/*! iParapheur 2019-09-05 */
function g(a){throw a}function p(){return function(){}}function aa(a){return function(){return this[a]}}function ba(a){return function(){return a}}function ca(a,b){var c=a.split("."),d=s;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var f;c.length&&(f=c.shift());)!c.length&&da(b)?d[f]=b:d=d[f]?d[f]:d[f]={}}function ea(){}function fa(a){a.qb=function(){return a.Cd?a.Cd:a.Cd=new a}}function ga(a){var b=typeof a;if("object"==b){if(!a)return"null";if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function da(a){return a!==i}function ha(a){return"array"==ga(a)}function ia(a){var b=ga(a);return"array"==b||"object"==b&&"number"==typeof a.length}function t(a){return"string"==typeof a}function u(a){return"function"==ga(a)}function ja(a){var b=typeof a;return"object"==b&&a!=m||"function"==b}function ka(a){return a[la]||(a[la]=++ma)}function na(a,b,c){return a.call.apply(a.bind,arguments)}function oa(a,b,c){if(a||g(Error()),2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,d),a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){return pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa,pa.apply(m,arguments)}function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);return b.unshift.apply(b,c),a.apply(this,b)}}function v(a,b){function c(){}c.prototype=b.prototype,a.H=b.prototype,a.prototype=new c,a.prototype.constructor=a}function sa(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function ta(a){return ua.test(a)?(-1!=a.indexOf("&")&&(a=a.replace(va,"&amp;")),-1!=a.indexOf("<")&&(a=a.replace(wa,"&lt;")),-1!=a.indexOf(">")&&(a=a.replace(xa,"&gt;")),-1!=a.indexOf('"')&&(a=a.replace(ya,"&quot;")),a):a}function za(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})}function Ea(a,b){var c;a:{c=a.length;for(var d=t(a)?a.split(""):a,f=0;c>f;f++)if(f in d&&b.call(i,d[f],f,a)){c=f;break a}c=-1}return 0>c?m:t(a)?a.charAt(c):a[c]}function Fa(a,b){return 0<=Aa(a,b)}function C(a,b){var c=Aa(a,b);c>=0&&z.splice.call(a,c,1)}function Ga(a){var b=a.length;if(b>0){for(var c=Array(b),d=0;b>d;d++)c[d]=a[d];return c}return[]}function Ha(a,b){for(var c=1;c<arguments.length;c++){var f,d=arguments[c];if(ha(d)||(f=ia(d))&&d.hasOwnProperty("callee"))a.push.apply(a,d);else if(f)for(var e=a.length,h=d.length,k=0;h>k;k++)a[e+k]=d[k];else a.push(d)}}function Ia(a,b,c){return 2>=arguments.length?z.slice.call(a,b):z.slice.call(a,b,c)}function Ja(a,b){return a>b?1:b>a?-1:0}function Pa(){return s.navigator?s.navigator.userAgent:m}function Qa(){return s.navigator}function G(a){var b;if(!(b=cb[a])){b=0;for(var c=sa(String(Wa)).split("."),d=sa(String(a)).split("."),f=Math.max(c.length,d.length),e=0;0==b&&f>e;e++){var h=c[e]||"",k=d[e]||"",l=RegExp("(\\d*)(\\D*)","g"),r=RegExp("(\\d*)(\\D*)","g");do{var w=l.exec(h)||["","",""],y=r.exec(k)||["","",""];if(0==w[0].length&&0==y[0].length)break;b=((0==w[1].length?0:parseInt(w[1],10))<(0==y[1].length?0:parseInt(y[1],10))?-1:(0==w[1].length?0:parseInt(w[1],10))>(0==y[1].length?0:parseInt(y[1],10))?1:0)||((0==w[2].length)<(0==y[2].length)?-1:(0==w[2].length)>(0==y[2].length)?1:0)||(w[2]<y[2]?-1:w[2]>y[2]?1:0)}while(0==b)}b=cb[a]=b>=0}return b}function eb(a){return db[a]||(db[a]=D&&!!document.documentMode&&document.documentMode>=a)}function ib(a){return a=a.className,t(a)&&a.match(/\S+/g)||[]}function jb(a,b){var c=ib(a),d=Ia(arguments,1),f=c.length+d.length;return kb(c,d),a.className=c.join(" "),c.length==f}function lb(a,b){var c=ib(a),d=Ia(arguments,1),f=mb(c,d);return a.className=f.join(" "),f.length==c.length-d.length}function kb(a,b){for(var c=0;c<b.length;c++)Fa(a,b[c])||a.push(b[c])}function mb(a,b){return Ba(a,function(a){return!Fa(b,a)})}function nb(a,b,c){var d=ib(a);t(b)?C(d,b):ha(b)&&(d=mb(d,b)),t(c)&&!Fa(d,c)?d.push(c):ha(c)&&kb(d,c),a.className=d.join(" ")}function I(a,b){this.x=da(a)?a:0,this.y=da(b)?b:0}function ob(a,b){this.width=a,this.height=b}function pb(a,b){for(var c in a)b.call(i,a[c],c,a)}function rb(a,b){for(var c,d,f=1;f<arguments.length;f++){d=arguments[f];for(c in d)a[c]=d[c];for(var e=0;e<qb.length;e++)c=qb[e],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}function sb(a){return a?new tb(J(a)):fb||(fb=new tb)}function ub(a,b){pb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in vb?a.setAttribute(vb[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}function wb(a,b,c){var d=arguments,f=document,e=d[0],h=d[1];if(!gb&&h&&(h.name||h.type)){if(e=["<",e],h.name&&e.push(' name="',ta(h.name),'"'),h.type){e.push(' type="',ta(h.type),'"');var k={};rb(k,h),delete k.type,h=k}e.push(">"),e=e.join("")}return e=f.createElement(e),h&&(t(h)?e.className=h:ha(h)?jb.apply(m,[e].concat(h)):ub(e,h)),2<d.length&&xb(f,e,d,2),e}function xb(a,b,c,d){function f(c){c&&b.appendChild(t(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var e=c[d];if(!ia(e)||ja(e)&&0<e.nodeType)f(e);else{var h;a:{if(e&&"number"==typeof e.length){if(ja(e)){h="function"==typeof e.item||"string"==typeof e.item;break a}if(u(e)){h="function"==typeof e.item;break a}}h=n}B(h?Ga(e):e,f)}}}function yb(a){for(var b;b=a.firstChild;)a.removeChild(b)}function zb(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function Ab(a){return ja(a)&&1==a.nodeType}function Bb(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(16&a.compareDocumentPosition(b));for(;b&&a!=b;)b=b.parentNode;return b==a}function J(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function Cb(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?(a=a.tabIndex,"number"==typeof a&&a>=0&&32768>a):n}function tb(a){this.L=a||s.document||document}function Db(a){var b=a.L,a=F?b.body:b.documentElement,b=b.parentWindow||b.defaultView;return new I(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}function Fb(a,b){var c=b||[];return a&&c.push(a),c}function Jb(a){function b(){if(r>=0&&(x.id=c(r,A).replace(/\\/g,""),r=-1),w>=0){var a=w==A?m:c(w,A);0>">~+".indexOf(a)?x.D=a:x.Qb=a,w=-1}l>=0&&(x.ca.push(c(l+1,A).replace(/\\/g,"")),l=-1)}function c(b,c){return sa(a.slice(b,c))}for(var S,a=0<=">~+".indexOf(a.slice(-1))?a+" * ":a+" ",d=[],f=-1,e=-1,h=-1,k=-1,l=-1,r=-1,w=-1,y="",H="",A=0,Je=a.length,x=m,M=m;y=H,H=a.charAt(A),Je>A;A++)"\\"!=y&&(x||(S=A,x={Va:m,Aa:[],Ab:[],ca:[],D:m,Qb:m,id:m,rc:function(){return Ib?this.ie:this.D}},w=A),f>=0?"]"==H?(M.nc?M.yc=c(h||f+1,A):M.nc=c(f+1,A),!(f=M.yc)||'"'!=f.charAt(0)&&"'"!=f.charAt(0)||(M.yc=f.slice(1,-1)),x.Ab.push(M),M=m,f=h=-1):"="==H&&(h=0<="|~^$*".indexOf(y)?y:"",M.type=h+H,M.nc=c(f+1,A-h.length),h=A+1):e>=0?")"==H&&(k>=0&&(M.value=c(e+1,A)),k=e=-1):"#"==H?(b(),r=A+1):"."==H?(b(),l=A):":"==H?(b(),k=A):"["==H?(b(),f=A,M={}):"("==H?(k>=0&&(M={name:c(k+1,A),value:m},x.Aa.push(M)),e=A):" "==H&&y!=H&&(b(),k>=0&&x.Aa.push({name:c(k+1,A)}),x.Fd=x.Aa.length||x.Ab.length||x.ca.length,x.Be=x.Va=c(S,A),x.ie=x.D=x.Qb?m:x.D||"*",x.D&&(x.D=x.D.toUpperCase()),d.length&&d[d.length-1].Qb&&(x.Bd=d.pop(),x.Va=x.Bd.Va+" "+x.Va),d.push(x),x=m));return d}function Kb(a,b){return a?b?function(){return a.apply(window,arguments)&&b.apply(window,arguments)}:a:b}function Lb(a){return 1==a.nodeType}function Mb(a,b){return a?"class"==b?a.className||"":"for"==b?a.htmlFor||"":"style"==b?a.style.cssText||"":(Ib?a.getAttribute(b):a.getAttribute(b,2))||"":""}function Sb(a){for(;a=a[Qb];)if(Rb(a))return n;return j}function Tb(a){for(;a=a[Pb];)if(Rb(a))return n;return j}function Ub(a){var b=a.parentNode,c=0,d=b[Hb],f=a._i||-1,e=b._l||-1;if(!d)return-1;if(d=d.length,e==d&&f>=0&&e>=0)return f;for(b._l=d,f=-1,b=b.firstElementChild||b.firstChild;b;b=b[Pb])Rb(b)&&(b._i=++c,a===b&&(f=c));return f}function Vb(a){return!(Ub(a)%2)}function Wb(a){return Ub(a)%2}function Xb(a,b){if(!a)return Eb;var b=b||{},c=m;return b.z||(c=Kb(c,Lb)),b.D||"*"!=a.D&&(c=Kb(c,function(b){return b&&b.tagName==a.rc()})),b.ca||B(a.ca,function(a,b){var e=RegExp("(?:^|\\s)"+a+"(?:\\s|$)");c=Kb(c,function(a){return e.test(a.className)}),c.count=b}),b.Aa||B(a.Aa,function(a){var b=a.name;Yb[b]&&(c=Kb(c,Yb[b](b,a.value)))}),b.Ab||B(a.Ab,function(a){var b,e=a.nc;a.type&&Nb[a.type]?b=Nb[a.type](e,a.yc):e.length&&(b=Zb(e)),b&&(c=Kb(c,b))}),b.id||a.id&&(c=Kb(c,function(b){return!!b&&b.id==a.id})),c||"default"in b||(c=Eb),c}function ac(a){var b=$b[a.Va];if(b)return b;var c=a.Bd,c=c?c.Qb:"",d=Xb(a,{z:1}),f="*"==a.D,e=document.getElementsByClassName;if(c){if(e={z:1},f&&(e.D=1),d=Xb(a,e),"+"==c)var h=d,b=function(a,b,c){for(;a=a[Pb];)if(!Ob||Lb(a)){(!c||bc(a,c))&&h(a)&&b.push(a);break}return b};else if("~"==c)var k=d,b=function(a,b,c){for(a=a[Pb];a;){if(Rb(a)){if(c&&!bc(a,c))break;k(a)&&b.push(a)}a=a[Pb]}return b};else if(">"==c)var l=d,l=l||Eb,b=function(a,b,c){for(var d=0,f=a[Hb];a=f[d++];)Rb(a)&&(!c||bc(a,c))&&l(a,d)&&b.push(a);return b}}else if(a.id)d=!a.Fd&&f?Eb:Xb(a,{z:1,id:1}),b=function(b,c){var e,f=sb(b).d(a.id);if((e=f&&d(f))&&!(e=9==b.nodeType)){for(e=f.parentNode;e&&e!=b;)e=e.parentNode;e=!!e}return e?Fb(f,c):void 0};else if(e&&/\{\s*\[native code\]\s*\}/.test(String(e))&&a.ca.length&&!Gb)var d=Xb(a,{z:1,ca:1,id:1}),r=a.ca.join(" "),b=function(a,b){for(var f,c=Fb(0,b),e=0,h=a.getElementsByClassName(r);f=h[e++];)d(f,a)&&c.push(f);return c};else f||a.Fd?(d=Xb(a,{z:1,D:1,id:1}),b=function(b,c){for(var e,f=Fb(0,c),h=0,k=b.getElementsByTagName(a.rc());e=k[h++];)d(e,b)&&f.push(e);return f}):b=function(b,c){for(var f,d=Fb(0,c),e=0,h=b.getElementsByTagName(a.rc());f=h[e++];)d.push(f);return d};return $b[a.Va]=b}function ec(a){var b=Jb(sa(a));if(1==b.length){var c=ac(b[0]);return function(a){return(a=c(a,[]))&&(a.Pb=j),a}}return function(a){for(var c,e,k,l,a=Fb(a),h=b.length,r=0;h>r;r++){l=[],c=b[r],e=a.length-1,e>0&&(k={},l.Pb=j),e=ac(c);for(var w=0;c=a[w];w++)e(c,l,k);if(!l.length)break;a=l}return l}}function gc(a,b){if(fc){var c=dc[a];if(c&&!b)return c}if(c=cc[a])return c;var c=a.charAt(0),d=-1==a.indexOf(" ");if(0<=a.indexOf("#")&&d&&(b=j),fc&&!b&&-1==">~+".indexOf(c)&&(!D||-1==a.indexOf(":"))&&!(Gb&&0<=a.indexOf("."))&&-1==a.indexOf(":contains")&&-1==a.indexOf("|=")){var f=0<=">~+".indexOf(a.charAt(a.length-1))?a+" *":a;return dc[a]=function(b){try{9==b.nodeType||d||g("");var c=b.querySelectorAll(f);return D?c.Ud=j:c.Pb=j,c}catch(e){return gc(a,j)(b)}}}var e=a.split(/\s*,\s*/);return cc[a]=2>e.length?ec(a):function(a){for(var d,b=0,c=[];d=e[b++];)c=c.concat(ec(d)(a));return c}}function bc(a,b){if(!b)return 1;var c=ic(a);return b[c]?0:b[c]=1}function jc(a){if(a&&a.Pb)return a;var b=[];if(!a||!a.length)return b;if(a[0]&&b.push(a[0]),2>a.length)return b;if(hc++,D&&Ib){var c=hc+"";a[0].setAttribute("_zipIdx",c);for(var f,d=1;f=a[d];d++)a[d].getAttribute("_zipIdx")!=c&&b.push(f),f.setAttribute("_zipIdx",c)}else if(D&&a.Ud)try{for(d=1;f=a[d];d++)Lb(f)&&b.push(f)}catch(e){}else for(a[0]&&(a[0]._zipIdx=hc),d=1;f=a[d];d++)a[d]._zipIdx!=hc&&b.push(f),f._zipIdx=hc;return b}function K(a,b){if(!a)return[];if(a.constructor==Array)return a;if(!t(a))return[a];if(t(b)&&(b=t(b)?document.getElementById(b):b,!b))return[];var b=b||document,c=b.ownerDocument||b.documentElement;return Ib=b.contentType&&"application/xml"==b.contentType||Ta&&(b.doctype||"[object XMLDocument]"==c.toString())||!!c&&(D?c.xml:b.xmlVersion||c.xmlVersion),(c=gc(a)(b))&&c.Pb?c:jc(c)}function nc(){0!=oc&&(this.te=Error().stack,ka(this))}function pc(a,b){this.type=a,this.currentTarget=this.target=b}function qc(a){a.preventDefault()}function rc(a){return rc[" "](a),a}function sc(a,b){a&&this.init(a,b)}function uc(a){return(kc?0==a.n.button:"click"==a.type?j:!!(a.n.button&tc[0]))&&!(F&&Oa&&a.ctrlKey)}function vc(){}function N(a,b,c,d,f){if(b){if(ha(b)){for(var e=0;e<b.length;e++)N(a,b[e],c,d,f);return m}var d=!!d,h=L;b in h||(h[b]={m:0,N:0}),h=h[b],d in h||(h[d]={m:0,N:0},h.m++);var l,h=h[d],k=ka(a);if(h.N++,h[k]){for(l=h[k],e=0;e<l.length;e++)if(h=l[e],h.Ua==c&&h.Qa==f){if(h.Ba)break;return l[e].key}}else l=h[k]=[],h.m++;var r=Ac,w=lc?function(a){return r.call(w.src,w.key,a)}:function(a){return a=r.call(w.src,w.key,a),a?void 0:a},e=w;return e.src=a,h=new vc,h.init(c,e,a,b,d,f),c=h.key,e.key=c,l.push(h),xc[c]=h,yc[k]||(yc[k]=[]),yc[k].push(h),a.addEventListener?(a==s||!a.jd)&&a.addEventListener(b,e,d):a.attachEvent(b in zc?zc[b]:zc[b]="on"+b,e),c}g(Error("Invalid event type"))}function Bc(a,b,c,d,f){if(ha(b))for(var e=0;e<b.length;e++)Bc(a,b[e],c,d,f);else if(d=!!d,a=Cc(a,b,d))for(e=0;e<a.length;e++)if(a[e].Ua==c&&a[e].capture==d&&a[e].Qa==f){O(a[e].key);break}}function O(a){if(!xc[a])return n;var b=xc[a];if(b.Ba)return n;var c=b.src,d=b.type,f=b.Id,e=b.capture;return c.removeEventListener?(c==s||!c.jd)&&c.removeEventListener(d,f,e):c.detachEvent&&c.detachEvent(d in zc?zc[d]:zc[d]="on"+d,f),c=ka(c),yc[c]&&(f=yc[c],C(f,b),0==f.length&&delete yc[c]),b.Ba=j,(b=L[d][e][c])&&(b.Hd=j,Dc(d,e,c,b)),delete xc[a],j}function Dc(a,b,c,d){if(!d.Kb&&d.Hd){for(var f=0,e=0;f<d.length;f++)d[f].Ba?d[f].Id.src=m:(f!=e&&(d[e]=d[f]),e++);d.length=e,d.Hd=n,0==e&&(delete L[a][b][c],L[a][b].m--,0==L[a][b].m&&(delete L[a][b],L[a].m--),0==L[a].m&&delete L[a])}}function Cc(a,b,c){var d=L;return b in d&&(d=d[b],c in d&&(d=d[c],a=ka(a),d[a]))?d[a]:m}function Ec(a,b,c,d,f){var e=1,b=ka(b);if(a[b]){a.N--,a=a[b],a.Kb?a.Kb++:a.Kb=1;try{for(var h=a.length,k=0;h>k;k++){var l=a[k];l&&!l.Ba&&(e&=Fc(l,f)!==n)}}finally{a.Kb--,Dc(c,d,b,a)}}return Boolean(e)}function Fc(a,b){return a.gd&&O(a.key),a.handleEvent(b)}function Ac(a,b){if(!xc[a])return j;var c=xc[a],d=c.type,f=L;if(!(d in f))return j;var e,h,f=f[d];if(!lc){var k;if(!(k=b))a:{k=["window","event"];for(var l=s;e=k.shift();){if(l[e]==m){k=m;break a}l=l[e]}k=l}if(e=k,k=j in f,l=n in f,k){if(0>e.keyCode||e.returnValue!=i)return j;a:{var r=n;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(w){r=j}(r||e.returnValue==i)&&(e.returnValue=j)}}r=new sc,r.init(e,this),e=j;try{if(k){for(var y=[],H=r.currentTarget;H;H=H.parentNode)y.push(H);h=f[j],h.N=h.m;for(var S=y.length-1;!r.za&&S>=0&&h.N;S--)r.currentTarget=y[S],e&=Ec(h,y[S],d,j,r);if(l)for(h=f[n],h.N=h.m,S=0;!r.za&&S<y.length&&h.N;S++)r.currentTarget=y[S],e&=Ec(h,y[S],d,n,r)}else e=Fc(c,r)}finally{y&&(y.length=0)}return e}return d=new sc(b,this),e=Fc(c,d)}function Gc(a){nc.call(this),this.yd=a,this.h=[]}function P(a,b,c,d,f){ha(c)||(Hc[0]=c,c=Hc);for(var e=0;e<c.length;e++){var h=N(b,c[e],d||a,f||n,a.yd||a);a.h.push(h)}return a}function Ic(a,b,c,d,f,e){if(ha(c))for(var h=0;h<c.length;h++)Ic(a,b,c[h],d,f,e);else{a:{if(d=d||a,e=e||a.yd||a,f=!!f,b=Cc(b,c,f))for(c=0;c<b.length;c++)if(!b[c].Ba&&b[c].Ua==d&&b[c].capture==f&&b[c].Qa==e){b=b[c];break a}b=m}b&&(b=b.key,O(b),C(a.h,b))}return a}function Jc(){nc.call(this)}function Kc(a,b,c,d){this.top=a,this.right=b,this.bottom=c,this.left=d}function Lc(a,b,c,d){this.left=a,this.top=b,this.width=c,this.height=d}function Q(a,b,c){t(b)?Mc(a,c,b):pb(b,qa(Mc,a))}function Mc(a,b,c){a.style[za(c)]=b}function R(a,b){var c=J(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,m))?c[b]||c.getPropertyValue(b)||"":""}function Nc(a,b){return a.currentStyle?a.currentStyle[b]:m}function Oc(a,b){return R(a,b)||Nc(a,b)||a.style&&a.style[b]}function Pc(a,b,c){var d,f=E&&(Oa||Va)&&G("1.9");b instanceof I?(d=b.x,b=b.y):(d=b,b=c),a.style.left=Qc(d,f),a.style.top=Qc(b,f)}function Rc(a){var b=a.getBoundingClientRect();return D&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop),b}function Sc(a){if(D&&!eb(8))return a.offsetParent;for(var b=J(a),c=Oc(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Oc(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return m}function Tc(a){var b,h,c=J(a),d=Oc(a,"position"),f=E&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),e=new I(0,0);if(b=c?J(c):document,(h=D)&&(h=!eb(9))&&(sb(b),h=n),h=h?b.body:b.documentElement,a==h)return e;if(a.getBoundingClientRect)b=Rc(a),a=Db(sb(c)),e.x=b.left+a.x,e.y=b.top+a.y;else if(c.getBoxObjectFor&&!f)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(h),e.x=b.screenX-a.screenX,e.y=b.screenY-a.screenY;else{f=a;do{if(e.x+=f.offsetLeft,e.y+=f.offsetTop,f!=a&&(e.x+=f.clientLeft||0,e.y+=f.clientTop||0),F&&"fixed"==Oc(f,"position")){e.x+=c.body.scrollLeft,e.y+=c.body.scrollTop;break}f=f.offsetParent}while(f&&f!=a);for((Ta||F&&"absolute"==d)&&(e.y-=c.body.offsetTop),f=a;(f=Sc(f))&&f!=c.body&&f!=h;)e.x-=f.scrollLeft,Ta&&"TR"==f.tagName||(e.y-=f.scrollTop)}return e}function Uc(a,b){var c=Vc(a),d=Vc(b);return new I(c.x-d.x,c.y-d.y)}function Vc(a){var b=new I;if(1==a.nodeType){if(a.getBoundingClientRect){var c=Rc(a);b.x=c.left,b.y=c.top}else{var c=Db(sb(a)),d=Tc(a);b.x=d.x-c.x,b.y=d.y-c.y}if(E&&!G(12)){var f;D?f="-ms-transform":F?f="-webkit-transform":Ta?f="-o-transform":E&&(f="-moz-transform");var e;f&&(e=Oc(a,f)),e||(e=Oc(a,"transform")),e?(a=e.match(Wc),a=a?new I(parseFloat(a[1]),parseFloat(a[2])):new I(0,0)):a=new I(0,0),b=new I(b.x+a.x,b.y+a.y)}}else f=u(a.Vd),e=a,a.targetTouches?e=a.targetTouches[0]:f&&a.n.targetTouches&&(e=a.n.targetTouches[0]),b.x=e.clientX,b.y=e.clientY;return b}function Xc(a,b,c){b instanceof ob?(c=b.height,b=b.width):c==i&&g(Error("missing height argument")),a.style.width=Qc(b,j),a.style.height=Qc(c,j)}function Qc(a,b){return"number"==typeof a&&(a=(b?Math.round(a):a)+"px"),a}function Yc(a){if("none"!=Oc(a,"display"))return Zc(a);var b=a.style,c=b.display,d=b.visibility,f=b.position;return b.visibility="hidden",b.position="absolute",b.display="inline",a=Zc(a),b.display=c,b.position=f,b.visibility=d,a}function Zc(a){var b=a.offsetWidth,c=a.offsetHeight,d=F&&!b&&!c;return da(b)&&!d||!a.getBoundingClientRect?new ob(b,c):(a=Rc(a),new ob(a.right-a.left,a.bottom-a.top))}function $c(a){var b=Tc(a),a=Yc(a);return new Lc(b.x,b.y,a.width,a.height)}function T(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function U(a,b){a.style.display=b?"":"none"}function ad(a){return"rtl"==Oc(a,"direction")}function cd(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left,a.style.left=b;var f=a.style.pixelLeft;return a.style.left=c,a.runtimeStyle.left=d,f}function dd(a,b){if(D){var c=cd(a,Nc(a,b+"Left")),d=cd(a,Nc(a,b+"Right")),f=cd(a,Nc(a,b+"Top")),e=cd(a,Nc(a,b+"Bottom"));return new Kc(f,d,e,c)}return c=R(a,b+"Left"),d=R(a,b+"Right"),f=R(a,b+"Top"),e=R(a,b+"Bottom"),new Kc(parseFloat(f),parseFloat(d),parseFloat(e),parseFloat(c))}function fd(a,b){if("none"==Nc(a,b+"Style"))return 0;var c=Nc(a,b+"Width");return c in ed?ed[c]:cd(a,c)}function gd(a){if(D){var b=fd(a,"borderLeft"),c=fd(a,"borderRight"),d=fd(a,"borderTop"),a=fd(a,"borderBottom");return new Kc(d,c,a,b)}return b=R(a,"borderLeftWidth"),c=R(a,"borderRightWidth"),d=R(a,"borderTopWidth"),a=R(a,"borderBottomWidth"),new Kc(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}function hd(a,b,c){nc.call(this),this.target=a,this.handle=b||a,this.wc=c||new Lc(NaN,NaN,NaN,NaN),this.L=J(a),this.ja=new Gc(this),N(this.handle,["touchstart","mousedown"],this.me,n,this)}function jd(a){return da(a.pa)||(a.pa=ad(a.target)),a.pa}function kd(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.init(a.n.targetTouches[0],a.currentTarget):("touchend"==b||"touchcancel"==b)&&a.init(a.n.changedTouches[0],a.currentTarget)}function od(a,b,c){var d=Db(sb(a.L)),b=b+(d.x-a.Bc.x),c=c+(d.y-a.Bc.y);return a.Bc=d,a.La+=b,a.Ma+=c,b=md(a,a.La),a=nd(a,a.Ma),new I(b,a)}function pd(a,b,c,d){a.ld(c,d),a.dispatchEvent(new ld("drag",a,b.clientX,b.clientY,b,c,d))}function md(a,b){var c=a.wc,d=isNaN(c.left)?m:c.left,c=isNaN(c.width)?0:c.width;return Math.min(d!=m?d+c:1/0,Math.max(d!=m?d:-(1/0),b))}function nd(a,b){var c=a.wc,d=isNaN(c.top)?m:c.top,c=isNaN(c.height)?0:c.height;return Math.min(d!=m?d+c:1/0,Math.max(d!=m?d:-(1/0),b))}function ld(a,b,c,d,f,e,h,k){pc.call(this,a),this.clientX=c,this.clientY=d,this.re=f,this.left=da(e)?e:b.La,this.top=da(h)?h:b.Ma,this.ve=b,this.ue=!!k}function qd(a){for(var b=0,c=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)b+=a.offsetLeft-a.scrollLeft,c+=a.offsetTop-a.scrollTop,a=a.offsetParent;return{top:c,left:b}}function rd(){this.$a=[]}function sd(a,b){this.X={},this.h=[];var c=arguments.length;if(c>1){c%2&&g(Error("Uneven number of arguments"));for(var d=0;c>d;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){var f;if(a instanceof sd)td(a),f=a.h.concat(),d=V(a);else{var c=[],e=0;for(f in a)c[e++]=f;f=c,c=[],e=0;for(d in a)c[e++]=a[d];d=c}for(c=0;c<f.length;c++)this.set(f[c],d[c])}}function V(a){td(a);for(var b=[],c=0;c<a.h.length;c++)b.push(a.X[a.h[c]]);return b}function td(a){if(a.m!=a.h.length){for(var b=0,c=0;b<a.h.length;){var d=a.h[b];ud(a.X,d)&&(a.h[c++]=d),b++}a.h.length=c}if(a.m!=a.h.length){for(var f={},c=b=0;b<a.h.length;)d=a.h[b],ud(f,d)||(a.h[c++]=d,f[d]=1),b++;a.h.length=c}}function ud(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function W(a,b){this.x=a,this.y=b}function vd(a){this.points=a}function wd(a){for(var b=0,c=a.length-1,d=0;d<a.length;d++)b+=(a[c].x+a[d].x)*(a[c].y-a[d].y),c=d;return b/2}function xd(a,b){for(var c,f,d=c=0,e=a.length-1,h=0;h<a.length;h++)f=a[h].x*a[e].y-a[e].x*a[h].y,c+=(a[h].x+a[e].x)*f,d+=(a[h].y+a[e].y)*f,e=h;for(f=6*wd(a),c=new W(Math.abs(c/f),Math.abs(d/f)),d=[],f=0;f<a.length;f++){var e=a[f],k=(0>wd(a)?-1:1)*b,h=e.x-c.x,l=e.y-c.y,r=k>0?1:0>k?-1:0,k=Math.sqrt(Math.pow(k,2)/(1+Math.pow(h/l,2)));d.push({x:e.x+Math.abs(h/l*k)*(h>0?1:0>h?-1:0)*r,y:e.y+Math.abs(k)*(l>0?1:0>l?-1:0)*r})}return d}function yd(a,b,c,d){c>0?(this.x=a,this.width=c):(this.x=a+c,this.width=-c),d>0?(this.y=b,this.height=d):(this.y=b+d,this.height=-d)}function zd(a,b,c,d){this.type=a,this.geometry=b,c&&(this.units=c),d&&(this.style=d)}function Ad(a){return"rect"==a.type?a.geometry.width*a.geometry.height:"polygon"==a.type?Math.abs(wd(a.geometry.points)):0}function Bd(a){if("rect"==a.type)return a;if("polygon"==a.type){for(var b=a.geometry.points,c=b[0].x,d=b[0].x,f=b[0].y,e=b[0].y,h=1;h<b.length;h++)b[h].x>d&&(d=b[h].x),b[h].x<c&&(c=b[h].x),b[h].y>e&&(e=b[h].y),b[h].y<f&&(f=b[h].y);return new zd("rect",new yd(c,f,d-c,e-f),n,a.style)}}function Cd(a,b){var c;c=a.geometry.points;var d=0>wd(c)?-1:1;if(4>c.length)c=xd(c,d*b);else{for(var f=c.length-1,e=1,h=[],k=0;k<c.length;k++)f=xd([c[f],c[k],c[e]],d*b),h.push(f[1]),f=k,e++,e>c.length-1&&(e=0);c=h}return new zd("polygon",new vd(c),n,a.style)}function Dd(a,b){if("rect"==a.type){var c=b(a.geometry);return new zd("rect",c,n,a.style)}if("polygon"==a.type){var d=[];return B(a.geometry.points,function(a){d.push(b(a))}),new zd("polygon",new vd(d),n,a.style)}}function Ed(a){return JSON.stringify(a.geometry)}function Fd(a,b,c){this.src=a,this.text=b,this.shapes=[c],this.context=document.URL}function Gd(){}function Hd(a,b){a.g=new sd,a.Vc=[],a.cb=[],a.Ha=[],a.Ea=[],a.Zb=[],a.vb={Sa:n,Ra:n},a.Fa=new sd,a.ac=i,a.cd=b}function Id(a,b){var c=a.Fa.get(b);return c||(c={Sa:n,Ra:n},a.Fa.set(b,c)),c}function Jd(a,b){var c=a.Fb(b);if(!a.g.get(c)){var d=a.zc(b),f=[],e=[];B(a.Vc,function(a){d.addHandler(a.type,a.Qa)}),B(a.cb,function(a){a.onInitAnnotator&&a.onInitAnnotator(d)}),B(a.Ea,function(a){a.src==c&&(d.G(a),f.push(a))}),B(a.Zb,function(a){a.src==c&&(d.v(a),e.push(a))}),B(f,function(b){C(a.Ea,b)}),B(e,function(b){C(a.Zb,b)});var h=a.Fa.get(c);h?(h.Sa&&d.M(),h.Ra&&d.ea(),a.Fa.remove(c)):(a.vb.Sa&&d.M(),a.vb.Ra&&d.ea()),a.ac&&d.ga(a.ac),a.g.set(c,d),C(a.Ha,b)}}function Kd(a){var b,c;for(c=a.Ha.length;c>0;c--){for(var d=b=a.Ha[c-1],f=d.offsetTop,e=d.offsetLeft,h=d.offsetWidth,k=d.offsetHeight;d.offsetParent;)d=d.offsetParent,f+=d.offsetTop,e+=d.offsetLeft;f<window.pageYOffset+window.innerHeight&&e<window.pageXOffset+window.innerWidth&&f+k>window.pageYOffset&&e+h>window.pageXOffset&&Jd(a,b)}}function Ld(a,b,c){if(b){var d=a.g.get(b);d?c?d.Ca():d.ea():Id(a,b).Ra=c}else B(V(a.g),function(a){c?a.Ca():a.ea()}),a.vb.Ra=!c,B(V(a.Fa),function(a){a.Ra=!c})}function Md(a,b,c){if(b){var d=a.g.get(b);d?c?d.Y():d.M():Id(a,b).Sa=c}else B(V(a.g),function(a){c?a.Y():a.M()}),a.vb.Sa=!c,B(V(a.Fa),function(a){a.Sa=!c})}function Nd(a,b){return ud(a.g.X,b)?j:Ea(a.Ha,function(c){return a.Fb(c)==b})!=m}function Od(a,b){var c=sb().createElement("DIV");if(c.innerHTML=a(b||Pd,i,i),1==c.childNodes.length){var d=c.firstChild;if(1==d.nodeType)return d}return c}function Qd(a,b){a!=m&&this.append.apply(this,arguments)}function Rd(){}function ge(){}function he(a,b,c){this.ha=a,this.P=[],this.ma=n,this.Pd=b,this.Ob=c}function fe(a,b){a.ma||a.ha.append(b)}function je(a,b,c,d,f){if(!(D||F&&G("525")))return j;if(Oa&&f)return ke(a);if(f&&!d||!c&&(17==b||18==b)||D&&d&&b==a)return n;switch(a){case 13:return!(D&&eb(9));case 27:return!F}return ke(a)}function ke(a){if(a>=48&&57>=a||a>=96&&106>=a||a>=65&&90>=a||F&&0==a)return j;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return j;default:return n}}function le(a){switch(a){case 61:return 187;case 59:return 186;case 224:return 91;case 0:return 224;default:return a}}function me(a,b){nc.call(this),a&&ne(this,a,b)}function ne(a,b,c){a.Jb&&a.detach(),a.A=b,a.Ib=N(a.A,"keypress",a,c),a.uc=N(a.A,"keydown",a.Xd,c,a),a.Jb=N(a.A,"keyup",a.Zd,c,a)}function se(a,b,c,d){d&&this.init(d,i),this.type="key",this.keyCode=a,this.charCode=b,this.repeat=c}function te(){}function ue(a){nc.call(this),this.lb=a||sb(),this.pa=ve}function we(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}g(Error("Invalid component state"))}function xe(){}function ze(a,b){var c=[];return b&&(a=a.concat([b])),B([],function(d){Da(d,qa(Fa,a))&&(!b||Fa(d,b))&&c.push(d.join("_"))}),c}function Ae(a){var b=a.pb();a.Bb={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}}function Ce(a,b,c){if(ue.call(this,c),!b){for(var d,b=this.constructor;b&&(d=ka(b),!(d=Be[d]));)b=b.H?b.H.constructor:m;b=d?u(d.qb)?d.qb():new d:m}this.C=b,this.jb=a}function De(a){a.fa&&n!=a.tc&&Ee(a,n),a.tc=n}function Ee(a,b){var c=a.Eb(),d=a.d();b?(P(P(P(P(c,d,"mouseover",a.wd),d,"mousedown",a.ud),d,"mouseup",a.xd),d,"mouseout",a.vd),a.Gb!=ea&&P(c,d,"contextmenu",a.Gb),D&&P(c,d,"dblclick",a.sd)):(Ic(Ic(Ic(Ic(c,d,"mouseover",a.wd),d,"mousedown",a.ud),d,"mouseup",a.xd),d,"mouseout",a.vd),a.Gb!=ea&&Ic(c,d,"contextmenu",a.Gb),D&&Ic(c,d,"dblclick",a.sd))}function Fe(a,b){Ge(a,2,b)&&a.O(2,b)}function X(a,b){return!!(a.oc&b)&&!!(a.U&b)}function Ge(a,b,c){return!!(a.U&b)&&!!(a.r&b)!=c&&(!(a.ne&b)||a.dispatchEvent(we(b,c)))&&!a.md}function He(a,b){if(X(a,16)){var c=!(16&a.r);Ge(a,16,c)&&a.O(16,c)}return X(a,8)&&Ge(a,8,j)&&a.O(8,j),X(a,64)&&(c=!(64&a.r),Ge(a,64,c)&&a.O(64,c)),c=new pc("action",a),b&&(c.altKey=b.altKey,c.ctrlKey=b.ctrlKey,c.metaKey=b.metaKey,c.shiftKey=b.shiftKey,c.Dc=b.Dc),a.dispatchEvent(c)}function Ke(){return new Ce(m)}function Le(){}function Me(a,b,c){Ce.call(this,a,b||Le.qb(),c),De(this),this.Ub(j),a||(this.jb="")}function Oe(a){return a.sb.top+a.sb.bottom+a.fd.top+a.fd.bottom}function Pe(a){var b=a.Gd,c=a.d();return b&&c&&a.Nb&&(b-=Oe(a)),b}function Qe(a){var b=a.de,c=a.d();return b&&c&&a.Nb&&(b-=Oe(a)),b}function Re(a){if(!a.zd){var b=a.d().cloneNode(n);Q(b,{position:"absolute",height:"auto",top:"-9999px",margin:"0",padding:"1px",border:"1px solid #000",overflow:"hidden"}),a.qd().L.body.appendChild(b);var c=b.scrollHeight;b.style.padding="10px";var d=b.scrollHeight;a.Fc=d>c,b.style.borderWidth="10px",a.Ec=b.scrollHeight>d,b.style.height="100px",100!=b.offsetHeight&&(a.Nb=j),zb(b),a.zd=j}var b=a.d(),c=a.d().scrollHeight,f=a.d(),d=f.offsetHeight-f.clientHeight;if(!a.Fc)var e=a.sb,d=d-(e.top+e.bottom);return a.Ec||(f=gd(f),d-=f.top+f.bottom),c+=d>0?d:0,a.Nb?c-=Oe(a):(a.Fc||(d=a.sb,c+=d.top+d.bottom),a.Ec||(a=gd(b),c+=a.top+a.bottom)),c}function Se(a,b){a.la!=b&&(a.la=b,a.d().style.height=b+"px")}function Te(a){a=a.d(),a.style.height="auto";var b=a.value.match(/\n/g)||[];a.rows=b.length+1}function Ue(a){return"object"==typeof a&&a&&0===a.se?a.content:String(a).replace(Ve,We)}function We(a){return Xe[a]}function Ye(){return'<div class="annotorious-popup top-left" style="position:absolute;z-index:1"><div class="annotorious-popup-buttons"><a class="annotorious-popup-button annotorious-popup-button-edit" title="Modifier" href="javascript:void(0);">EDIT</a><a class="annotorious-popup-button annotorious-popup-button-delete" title="Supprimer" href="javascript:void(0);">DELETE</a></div><span class="annotorious-popup-text"></span></div>'}function Ze(){return'<div class="annotorious-editor" style="position:absolute;z-index:1"><form><textarea class="annotorious-editor-text" placeholder="Ajouter un commentaire..." tabindex="1"></textarea><div class="annotorious-editor-button-container"><a class="annotorious-editor-button annotorious-editor-button-cancel" href="javascript:void(0);" tabindex="3"><i class="fa fa-fw fa-lg fa-times-circle-o"></i>Annuler</a><a class="annotorious-editor-button annotorious-editor-button-save" href="javascript:void(0);" tabindex="2"><i class="fa fa-fw fa-lg fa-floppy-o"></i>Enregistrer</a></div></form></div>'}function $e(a){function b(){var a=d.Ja;a.d()&&a.Pa()}this.element=Od(Ze),this.e=a,this.Sd=a.getItem(),this.Ja=new Me(""),this.Qd=K(".annotorious-editor-button-cancel",this.element)[0],this.Uc=K(".annotorious-editor-button-save",this.element)[0];var c;c=this.Uc,hb?c=c.parentElement:(c=c.parentNode,c=Ab(c)?c:m),this.Rd=c,this.Za=[];var d=this;N(this.Qd,"click",function(b){b.preventDefault(),a.stopSelection(d.ad),d.close()}),N(this.Uc,"click",function(b){b.preventDefault(),b=d.pd(),a.G(b),a.stopSelection(),d.ad?a.fireEvent("onAnnotationUpdated",b,a.getItem()):a.fireEvent("onAnnotationCreated",b,a.getItem()),d.close()}),U(this.element,n),a.element.appendChild(this.element),this.Ja.kb(K(".annotorious-editor-text",this.element)[0]);var f=this.element;c=document.createElement("div"),Q(c,"position","absolute"),Q(c,"top","0px"),Q(c,"right","0px"),Q(c,"width","5px"),Q(c,"height","100%"),Q(c,"cursor","e-resize"),f.appendChild(c);var e=gd(f),e=$c(f).width-e.right-e.left;c=new hd(c),c.wc=new Lc(e,0,800,0)||new Lc(NaN,NaN,NaN,NaN),c.ld=function(a){Q(f,"width",a+"px"),b&&b()}}function af(a,b,c){var d=this;c||(c="Cliquez et Déplacez pour Annoter"),this.element=Od(bf,{Mb:c}),this.e=a,this.Yc=K(".annotorious-hint-msg",this.element)[0],this.Wc=K(".annotorious-hint-icon",this.element)[0],this.hc=function(){d.show()},this.gc=function(){cf(d)},this.Yb(),cf(this),b.appendChild(this.element)}function cf(a){window.clearTimeout(a.dc),T(a.Yc,0)}function df(a){this.element=Od(Ye),this.e=a,this.Td=K(".annotorious-popup-text",this.element)[0],this.Q=K(".annotorious-popup-buttons",this.element)[0],this.bc=n,this.Za=[];var b=K(".annotorious-popup-button-edit",this.Q)[0],c=K(".annotorious-popup-button-delete",this.Q)[0],d=this;N(b,"mouseover",function(){
jb(b,"annotorious-popup-button-active")}),N(b,"mouseout",function(){lb(b,"annotorious-popup-button-active")}),N(b,"click",function(){T(d.element,0),Q(d.element,"pointer-events","none"),a.pc(d.f)}),N(c,"mouseover",function(){jb(c,"annotorious-popup-button-active")}),N(c,"mouseout",function(){lb(c,"annotorious-popup-button-active")}),N(c,"click",function(){a.fireEvent("beforeAnnotationRemoved",d.f)||(T(d.element,0),Q(d.element,"pointer-events","none"),a.v(d.f),a.fireEvent("onAnnotationRemoved",d.f))}),ef&&(N(this.element,"mouseover",function(){window.clearTimeout(d.$b),.9>(d.Q.style[za("opacity")]||"")&&T(d.Q,.9),d.clearHideTimer()}),N(this.element,"mouseout",function(){T(d.Q,0),d.startHideTimer()}),a.addHandler("onMouseOutOfItem",function(){d.startHideTimer()})),T(this.Q,0),T(this.element,0),Q(this.element,"pointer-events","none"),a.element.appendChild(this.element)}function ff(){}function gf(a,b){this.Z=a,this.e=b,this.Da=[],this.aa=[],this.sa=this.Z.getContext("2d"),this.ra=j,this.yb=n;var c=this;N(this.Z,hf,function(a){if(c.ra){var b=jf(c,a.offsetX,a.offsetY);b?(c.yb=c.yb&&b==c.f,c.f?c.f!=b&&(c.ra=n,c.e.popup.startHideTimer()):(c.f=b,kf(c),c.e.fireEvent("onMouseOverAnnotation",{K:c.f,mouseEvent:a}))):!c.yb&&c.f&&(c.ra=n,c.e.popup.startHideTimer())}else c.Ya=a}),b.addHandler("onMouseOutOfItem",function(){delete c.f,c.ra=j}),b.addHandler("beforePopupHide",function(){if(!c.ra&&c.Ya){var a=c.f;c.f=jf(c,c.Ya.offsetX,c.Ya.offsetY),c.ra=j,a!=c.f?(kf(c),c.e.fireEvent("onMouseOutOfAnnotation",{K:a,mouseEvent:c.Ya}),c.e.fireEvent("onMouseOverAnnotation",{K:c.f,mouseEvent:c.Ya})):c.f&&c.e.popup.clearHideTimer()}else kf(c)})}function jf(a,b,c){return a=a.nb(b,c),0<a.length?a[0]:void 0}function lf(a,b,c){var d=Ea(a.e.ka(),function(a){return a.getSupportedShapeType()==b.type});d?d.drawShape(a.sa,b,c):console.log("WARNING unsupported shape type: "+b.type)}function kf(a){if(a.sa.clearRect(0,0,a.Z.width,a.Z.height),B(a.Da,function(b){b!=a.f&&lf(a,a.aa[Ed(b.shapes[0])])}),a.f){var b=a.aa[Ed(a.f.shapes[0])];lf(a,b,j),b=Bd(b).geometry,a.e.popup.show(a.f,new W(b.x,b.y+b.height+5))}}function rf(a,b){var c=n;return a.offsetX=a.offsetX?a.offsetX:n,a.offsetY=a.offsetY?a.offsetY:n,c=a.offsetX&&a.offsetY||!a.n.changedTouches?{x:a.offsetX,y:a.offsetY}:{x:a.n.changedTouches[0].clientX-qd(b).left,y:a.n.changedTouches[0].clientY-qd(b).top}}function sf(){}function tf(a){return'<canvas class="annotorious-item annotorious-opacity-fade" style="position:absolute; top:0px; left:0px; width:'+Ue(a.width)+"px; height:"+Ue(a.height)+'px; z-index:0" width="'+Ue(a.width)+'" height="'+Ue(a.height)+'"></canvas>'}function bf(a){return'<div class="annotorious-hint" style="white-space:nowrap; position:absolute; top:0px; left:0px; pointer-events:none;"><div class="annotorious-hint-msg annotorious-opacity-fade">'+Ue(a.Mb)+'</div><div class="annotorious-hint-icon" style="pointer-events:auto"></div></div>'}function uf(a,b){function c(b,c){Q(d,"margin-"+b,c+"px"),Q(a,"margin-"+b,0),Q(a,"padding-"+b,0)}this.$=a,this.bd={padding:a.style.padding,margin:a.style.margin},this.t=new rd,this.Ia=[],this.ic=j,this.element=wb("div","annotorious-annotationlayer"),Q(this.element,"position","relative"),Q(this.element,"display","inline-block");var d=this.element,f=dd(a,"margin"),e=dd(a,"padding");(0!=f.top||0!=e.top)&&c("top",f.top+e.top),(0!=f.right||0!=e.right)&&c("right",f.right+e.right),(0!=f.bottom||0!=e.bottom)&&c("bottom",f.bottom+e.bottom),(0!=f.left||0!=e.left)&&c("left",f.left+e.left),(f=a.parentNode)&&f.replaceChild(this.element,a),this.element.appendChild(a),f=$c(a),this.ia=Od(tf,{width:f.width,height:f.height}),ef&&jb(this.ia,"annotorious-item-unfocus"),this.element.appendChild(this.ia),this.c=Od(tf,{width:f.width,height:f.height}),ef&&U(this.c,n),this.element.appendChild(this.c),this.popup=b?b:new df(this),f=new sf,f.init(this,this.c),this.Ia.push(f),this.Ga=f,this.editor=new $e(this),this.k=new gf(this.ia,this),this.ab=new af(this,this.element);var h=this;ef&&(N(this.element,of,function(a){a=a.relatedTarget,a&&Bb(h.element,a)||(h.t.fireEvent("onMouseOverItem"),nb(h.ia,"annotorious-item-unfocus","annotorious-item-focus"))}),N(this.element,qf,function(a){a=a.relatedTarget,a&&Bb(h.element,a)||(h.t.fireEvent("onMouseOutOfItem"),nb(h.ia,"annotorious-item-focus","annotorious-item-unfocus"))}));var k=mf?this.c:this.ia;N(k,nf,function(a){a=rf(a,k),h.k.o(n),h.ic?(U(h.c,j),h.Ga.startSelection(a.x,a.y)):(a=h.k.nb(a.x,a.y),0<a.length&&h.k.o(a[0]))}),this.t.addHandler("onSelectionCompleted",function(a){var b=a.viewportBounds;h.editor.setPosition(new W(b.left+h.$.offsetLeft,b.bottom+4+h.$.offsetTop)),h.editor.open(n,a)}),this.t.addHandler("onSelectionCanceled",function(){ef&&U(h.c,n),h.Ga.stopSelection()})}function vf(a){var b=a.getAttribute("data-original");return b?b:a.src}function wf(){Hd(this,function(){return K("img.annotatable",document)})}function xf(a){return'<div class="annotorious-opacity-fade" style="white-space:nowrap; position:absolute; pointer-events:none; top:80px; width:100%; text-align:center;"><div class="annotorious-ol-hint" style="width: 400px; margin:0px auto;">'+Ue(a.Mb)+"</dvi></div>"}function yf(a,b){this.V=a,this.R=$c(b.element),this.j=b.popup,Q(this.j.element,"z-index",99e3),this.S=[],this.ub=new OpenLayers.Layer.Boxes("Annotorious"),this.V.addLayer(this.ub);var c=this;this.V.events.register("move",this.V,function(){c.F&&c.bb()}),b.addHandler("beforePopupHide",function(){c.ta==c.F?c.j.clearHideTimer():c.gb(c.ta,c.F)})}function zf(a){function b(){var a=parseInt(R(d.element,"width"),10),b=parseInt(R(d.element,"height"),10);Xc(d.c,a,b),d.c.width=a,d.c.height=b}this.V=a,this.element=a.div;var c=this.element.style[za("position")]||"";"absolute"!=c&&"relative"!=c&&Q(this.element,"position","relative"),this.t=new rd,this.J=Od(xf,{Mb:"Click and Drag"}),Q(this.J,"z-index",9998),T(this.J,0),this.element.appendChild(this.J),this.popup=new df(this),this.k=new yf(a,this),this.c=Od(tf,{width:"0",height:"0"}),U(this.c,n),Q(this.c,"position","absolute"),Q(this.c,"top","0px"),Q(this.c,"z-index",9999),this.element.appendChild(this.c);var d=this;b(),this.T=new sf,this.T.init(this,this.c),this.fb=i,this.editor=new $e(this),Q(this.editor.element,"z-index",1e4),window.addEventListener?window.addEventListener("resize",b,n):window.attachEvent&&window.attachEvent("onresize",b),N(this.element,"mouseover",function(a){a=a.relatedTarget,(!a||!Bb(d.element,a))&&d.t.fireEvent("onMouseOverItem")}),N(this.element,"mouseout",function(a){a=a.relatedTarget,(!a||!Bb(d.element,a))&&d.t.fireEvent("onMouseOutOfItem")}),N(this.c,"mousedown",function(a){var b=Vc(d.element);d.T.startSelection(a.clientX-b.x,a.clientY-b.y)}),this.t.addHandler("onSelectionCompleted",function(a){Q(d.c,"pointer-events","none"),a=a.viewportBounds,d.editor.setPosition(new W(a.left,a.bottom+4)),d.editor.open()}),this.t.addHandler("onSelectionCanceled",function(){d.stopSelection()})}function Af(){Hd(this)}function Bf(a,b){this.W=a,this.R=$c(a.element),this.j=b.popup,Q(this.j.element,"z-index",99e3),this.S=[];var c=this;this.W.addHandler("animation",function(){c.F&&c.bb()}),b.addHandler("beforePopupHide",function(){c.ta==c.F?c.j.clearHideTimer():c.gb(c.ta,c.F)})}function Cf(a){this.element=a.element,this.W=a,this.t=new rd,this.J=Od(xf,{Mb:"Click and Drag"}),Q(this.J,"z-index",9998),T(this.J,0),this.element.appendChild(this.J),this.popup=new df(this),this.k=new Bf(a,this),this.c=Od(tf,{width:"0",height:"0"}),U(this.c,n),Q(this.c,"position","absolute"),Q(this.c,"top","0px"),Q(this.c,"z-index",9999),this.element.appendChild(this.c);var b=this;this.T=new sf,this.T.init(this,this.c);var a=parseInt(R(b.element,"width"),10),c=parseInt(R(b.element,"height"),10);Xc(b.c,a,c),b.c.width=a,b.c.height=c,this.T=new sf,this.T.init(this,this.c),this.editor=new $e(this),N(this.c,"mousedown",function(a){var c=Vc(b.element);b.T.startSelection(a.clientX-c.x,a.clientY-c.y)}),this.t.addHandler("onSelectionCompleted",function(a){Q(b.c,"pointer-events","none"),a=a.viewportBounds,b.editor.setPosition(new W(a.left,a.bottom+4)),b.editor.open()}),this.t.addHandler("onSelectionCanceled",function(){b.stopSelection()})}function Df(){Hd(this)}function Y(){function a(){Ef(b)}this.Xc=n,this.l=[new wf],window.OpenLayers&&this.l.push(new Af),window.OpenSeadragon&&this.l.push(new Df),this.cb=[];var b=this;window.addEventListener?window.addEventListener("load",a,n):window.attachEvent&&window.attachEvent("onload",a)}function Ef(a){a.Xc||(B(a.l,function(a){a.init()}),B(a.cb,function(b){b.initPlugin&&b.initPlugin(a),B(a.l,function(a){a.zb(b)})}),a.Xc=j)}function Z(a,b){return Ea(a.l,function(a){return Nd(a,b)})}function AboutController($scope,modals){var javaVersion=PluginDetect.getVersion("Java"),isWindows=navigator.platform.indexOf("Win")>-1,isLinux=navigator.platform.indexOf("Linux")>-1,isEdge=window.navigator.userAgent.indexOf("Edge")>-1,isIE=navigator.browserInfo()[0].toLowerCase().indexOf("explorer")>-1,isChrome=navigator.browserInfo()[0].toLowerCase().indexOf("chrome")>-1&&!isEdge,isFirefox=navigator.browserInfo()[0].toLowerCase().indexOf("firefox")>-1;$scope.navigator=isEdge?["Edge"]:navigator.browserInfo(),$scope.client={signature:{isCompatible:isWindows&&!isEdge||isLinux&&isFirefox,canExtension:isWindows&&!isEdge&&!isIE&&(isFirefox||isChrome),canJava:isWindows&&(isIE||isFirefox)||isLinux&&isFirefox,isIE:isIE,extension:!1,version:"",error:""},java:{enabled:null!==javaVersion,version:null!==javaVersion?javaVersion.replace(/,/g,"."):""}},window.addEventListener("libersignready",function(){testForLiberSign()});var testForLiberSign=function(){"object"==typeof LiberSign&&($scope.client.signature.extension=!0,LiberSign.getVersion().then(function(version){$scope.$apply(function(){$scope.client.signature.version=version})})["catch"](function(error){console.log(error),$scope.$apply(function(){$scope.client.signature.error=error.result})}))};testForLiberSign(),$scope.launchHelpModal=function(){modals.launch("base",{ctrl:HelpExtensionController,template:"partials/modals/extensionHelpModal.html"})}}function ApercuController($scope,navigationService,Dossiers,Annotations,configuration,preferences,$sce,$location,modals,utils,$timeout,bestBureau,$http,$filter,viewService){var step=0;$scope.currentDocument={},$scope.savedFilters={},$scope.uploadErrorMessage=void 0,$scope.local={annot:""},$scope.getFileExtIcon=function(filename){var ext=/^.+\.([^.]+)$/.exec(filename);ext=null===ext?"":ext[1].toLowerCase();var iconName="fa-";switch(ext){case"pdf":iconName+="file-pdf-o";break;case"zip":iconName+="file-archive-o";break;case"xml":iconName+="file-code-o";break;case"png":case"jpg":case"jpeg":case"gif":iconName+="file-image-o";break;case"pptx":case"ppt":case"odp":iconName+="file-powerpoint-o";break;case"xlsx":case"xls":case"ods":iconName+="file-excel-o";break;case"docx":case"doc":case"odt":case"rtf":case"txt":case"htm":case"html":iconName+="file-word-o"}return iconName},$scope.getActionTooltip=function(etape){var tooltip="Fin de circuit";switch(etape.actionDemandee.toLowerCase()){case"visa":tooltip="Visa";break;case"signature":tooltip="Signature";break;case"mailsecpastell":tooltip="Mail sécurisé Pastell";break;case"mailsec":tooltip="Mail sécurisé S²LOW";break;case"tdt":tooltip="Télé-transmission";break;case"cachet":tooltip="Cachet serveur"}return tooltip},$scope.getIconClass=function(etape,folderEtape){var classes="";switch(!etape.approved||etape.rejected&&folderEtape.isCurrent||(classes+=" text-success"),etape.approved&&etape.rejected&&folderEtape.isCurrent&&(classes+=" text-danger"),etape.actionDemandee.toLowerCase()){case"visa":classes+=" fa-check-square-o";break;case"signature":classes+=" ls-signature";break;case"mailsecpastell":classes+=" fa-envelope-o";break;case"mailsec":classes+=" fa-envelope";break;case"tdt":classes+=" fa-cloud-upload";break;case"cachet":classes+=" ls-stamp";break;default:classes+=" fa-flag-checkered"}return classes};var oldFilter={};navigationService.dash.selected||(oldFilter=angular.copy(navigationService.currentFilter)),$scope.changeFilter=function(name){var filter;$scope.savedFilters.hasOwnProperty(name)?($scope.nav.selected=name,$scope.nav.currentPage=0,filter=JSON.parse($scope.savedFilters[$scope.nav.selected])):"dashboard.Unsaved_filter"===name?($scope.nav.currentPage=0,filter=oldFilter):"dashboard.Default"===name?($scope.nav.currentPage=0,filter={dossier:"a-traiter"}):($scope.nav.currentPage=0,filter={dossier:name}),angular.extend(navigationService.currentFilter,filter),getDossiers()},$scope.currentDocumentIndex=0,$scope.currentPage=0,$scope.changedAnnotation=function(data){$scope.dossier&&(localStorage[$scope.dossier.id+"-annotation-"+navigationService.bureauCourant.id]=data)},$scope.loaded=!1;var prefs,defaultPosition={right:[{name:"annotations",show:!0},{name:"actions",show:!0},{name:"circuit",show:!0},{name:"nom-dossier",show:!0},{name:"details-dossier",show:!0},{name:"postit",show:!0},{name:"annotindex",show:!0},{name:"annoter",show:!0}],left:[{name:"liste-dossiers",show:!0}]},prefsDashletsToView=function(){var numberOfDashlets=9,dashletsAdded=0,dashletsPosition=$scope.prefs.dashletsPosition,result={right:[],left:[]},hasElement=!0,i=0;do dashletsPosition.right&&dashletsPosition.right.hasOwnProperty("c"+i)?(result.right.push(dashletsPosition.right["c"+i]),dashletsAdded++):hasElement=!1,i++;while(hasElement);hasElement=!0,i=0;do dashletsPosition.left&&dashletsPosition.left.hasOwnProperty("c"+i)?(result.left.push(dashletsPosition.left["c"+i]),dashletsAdded++):hasElement=!1,i++;while(hasElement);return dashletsAdded!==numberOfDashlets&&(result=defaultPosition),result},hasInitOnce=!1;$scope.timestamp=(new Date).getTime();var initController=function(){if($scope.apercu.flags.reset(),$scope.timestamp=(new Date).getTime(),step=0,$scope.apercu.annotations.canLoad){var tmp=$scope.apercu.annotations.hasDashlets;$scope.apercu.annotations.reset(),$scope.apercu.annotations.hasDashlets=tmp}$scope.hasAnnotPub=!1,preferences.initPreferences(function(data){prefs=data,$scope.apercu.iframe.init(prefs.viewXemelios),$scope.savedFilters=prefs.savedFilters,bestBureau.error?$scope.bestBureauError=bestBureau.error:($scope.dossier=Dossiers.get({id:navigationService.dossierToEdit,bureauCourant:navigationService.bureauCourant.id},function(){$scope.local.annot=localStorage[$scope.dossier.id+"-annotation-"+navigationService.bureauCourant.id],$scope.dossier.documents&&$scope.dossier.documents.length>0&&$scope.dossier.documents[$scope.currentDocumentIndex].pageCount>0?($scope.currentDocument=angular.copy($scope.dossier.documents[$scope.currentDocumentIndex]),$scope.apercu.annotations.pageCount=$scope.dossier.documents[$scope.currentDocumentIndex].pageCount):$scope.apercu.flags.noVisuel=!0,$scope.hasEditableMeta=!1;for(var j in $scope.dossier.metadatas){var current=$scope.dossier.metadatas[j];if("true"===current.editable){$scope.hasEditableMeta=!0;break}}$scope.dossier.$getCircuit().then(function(){if($scope.dossier.circuit){$scope.flags.noCircuit=!1,$scope.dossier.circuit.annotPriv&&($scope.dossier.circuit.annotPriv=$sce.trustAsHtml($scope.dossier.circuit.annotPriv.replace(/\n/g,"<br/>")));for(var i=0;i<$scope.dossier.circuit.etapes.length;i++){if($scope.dossier.circuit.etapes[i].annotPub&&($scope.hasAnnotPub=!0,$scope.dossier.circuit.etapes[i].annotPub=$sce.trustAsHtml($scope.dossier.circuit.etapes[i].annotPub.replace(/\n/g,"<br/>"))),!$scope.dossier.circuit.etapes[i].approved){$scope.dossier.listeMetadatas=$scope.dossier.circuit.etapes[i].listeMetadatas;break}step+=1}}else $scope.flags.noCircuit=!0;initAnnotationsAndContent(),hasInitOnce=!0},function(){$scope.flags.noCircuit=!0,initAnnotationsAndContent(),hasInitOnce=!0})}),hasInitOnce||getDossiers())}),$scope.isFirst=!0,$scope.nav=navigationService.dash,$scope.dashFilter=navigationService.currentFilter},initAnnotationsAndContent=function(){$scope.dashletsPosition||($scope.dashletsPosition=prefsDashletsToView()),$timeout(function(){$scope.apercu.flags.noVisuel||($scope.updateUrlImageSource(),$scope.apercu.annotations.canLoad=!0),$scope.loaded=!0})},nextDossier=null;$scope.changePage=function(next){(next&&navigationService.dash.hasNext||!next&&navigationService.dash.hasPrev)&&(navigationService.dash.currentPage+=next?1:-1,getDossiers())};var getDossiers=function(){$scope.gettingDossier=!0,navigationService.dash.hasNext=!1,navigationService.dash.hasPrev=!1;var skipped=navigationService.dash.currentPage>0?navigationService.dash.skipped[navigationService.dash.currentPage-1]:0,pendingNumber=navigationService.dash.currentPage>0?navigationService.dash.pendingNumber[navigationService.dash.currentPage-1]:0;$scope.dossiers=Dossiers.list({bureau:navigationService.bureauCourant.id,pageSize:prefs.pagesize,page:navigationService.dash.currentPage,corbeilleName:navigationService.currentFilter.dossier,skipped:skipped,pendingFile:pendingNumber,sort:navigationService.dash.currentChamp,asc:navigationService.dash.ascBase,filter:utils.generateFilter(navigationService.currentFilter)},function(){$scope.gettingDossier=!1,$scope.dossiers.length>0&&(navigationService.dash.hasNext=$scope.dossiers[0].total>prefs.pagesize,navigationService.dash.skipped[+navigationService.dash.currentPage]=$scope.dossiers[0].skipped,navigationService.dash.pendingNumber[+navigationService.dash.currentPage]=$scope.dossiers[0].pendingFile),navigationService.dash.hasPrev=navigationService.dash.currentPage>0,findNextDossier()})},findNextDossier=function(){for(var i=0;i<$scope.dossiers.length;i++)$scope.dossier.id===$scope.dossiers[i].id&&i+1<$scope.dossiers.length&&(nextDossier=$scope.dossiers[i+1])};$scope.removeDocument=function(index){$scope.dossier.$removeDocument({doc:$scope.dossier.documents[index].id,bureauCourant:navigationService.bureauCourant.id}).then(function(){$scope.dossier.documents.splice(index,1)},function(){document.state=""})},$scope.getSignatureFormat=function(){return $scope.dossier.circuit.sigFormat},$scope.getProtocol=function(){return $scope.dossier.circuit.protocol},$scope.wrongType=function(ext,isValid,isAuthorized){$scope.$apply(function(){isAuthorized?($scope.typeError=!0,$scope.formatError=!1,$scope.uploadErrorMessage=void 0):($scope.typeError=!1,$scope.formatError=!0,$scope.uploadErrorMessage=void 0)})},$scope.wrongPDF=function(){$scope.$apply(function(){$scope.formatError=!0})},$scope.beginReplace=function(files){return $scope.$apply(function(){$scope.typeError=!1,$scope.formatError=!1,$scope.uploadErrorMessage=void 0,$scope.dossier.documents[0].state="replace",$scope.dossier.documents[0].name=files[0].name,$scope.dossier.documents[0].visuelPdf=!1}),0},$scope.documentAdded=function(resp,index){$scope.$apply(function(){if(resp.exception)$scope.existLog=!0,$scope.existDoc=$scope.dossier.documents[index].name;else if($scope.existLog=!1,$.extend($scope.dossier.documents[index],{canDelete:!0,downloadUrl:resp.downloadUrl,id:resp.success}),0===index){var previousVersion=$scope.apercu.annotations.replacedVersions[$scope.dossier.documents[0].id];$scope.apercu.annotations.replacedVersions[$scope.dossier.documents[0].id]=previousVersion?previousVersion+1:1,setTimeout(function(){initController()},250)}$scope.dossier.documents[index].state=""})},$scope.updateVisuEnd=function(resp,index){$scope.$apply(function(){resp.exception?($scope.existLog=!0,$scope.existDoc=$scope.dossier.documents[index].name):($scope.existLog=!1,$scope.dossier.documents[index].visuelPdf=!0),$scope.dossier.documents[index].state="",initController()})},$scope.updateVisu=function(){return $scope.$apply(function(){$scope.typeError=!1,$scope.formatError=!1,$scope.uploadErrorMessage=void 0,$scope.dossier.documents[0].state="visuel"}),0},$scope.addDocument=function(files){return $scope.$apply(function(){$scope.typeError=!1,$scope.formatError=!1,$scope.uploadErrorMessage=void 0,$scope.dossier.documents.push({name:files[0].name})}),$scope.$apply(function(){$scope.dossier.documents[$scope.dossier.documents.length-1].state="saving"}),$scope.dossier.documents.length-1},$scope.addDocumentUrl=$sce.getTrustedResourceUrl($scope.context+"/addDocument"),$scope.addVisuelUrl=$sce.getTrustedResourceUrl($scope.context+"/addVisuel");var viewToPrefsDashlets=function(){for(var dashletsPosition=angular.copy($scope.dashletsPosition),result={right:{},left:{}},i=0;i<dashletsPosition.right.length;i++)result.right["c"+i]=dashletsPosition.right[i];for(var j=0;j<dashletsPosition.left.length;j++)result.left["c"+j]=dashletsPosition.left[j];return result};$scope.saveDashletsPosition=function(){preferences.changeProperty(preferences.paths.DASHLETS,viewToPrefsDashlets()),preferences.changeProperty(preferences.paths.VIEWXEM,$scope.apercu.iframe.visuType),$scope.dashletsSaved=!0,$timeout(function(){$scope.dashletsSaved=!1},3e3)},$scope.editDossier=function(){navigationService.dossierToEdit=$scope.dossier.id};var getDossierModal=function(){var dossiers=[];return dossiers.push($scope.dossier),dossiers};$scope.oneOrMoreAttestError=function(){if($scope.dossier&&$scope.dossier.documents)for(var i=0;i<$scope.dossier.documents.length;i++)if(!~$scope.dossier.documents[i].attestState)return!0;return!1},$scope.launchAttest=function(){modals.launch("SimpleConfirmation",{title:$filter("translate")("apercu.refresh_signature_attestations")+" - "+$scope.dossier.title,message:$filter("translate")("apercu.refresh_signature_attestations_detail"),ctrl:BaseController},function(){$scope.dossier.locked=!0;for(var j=0;j<$scope.dossier.documents.length;j++)-1==$scope.dossier.documents[j].attestState&&($scope.dossier.documents[j].attestState=1);var action={bureauCourant:navigationService.bureauCourant.id};$scope.dossier.$attest(action)})},$scope.launchModal=function(action){modals.launch(action,getDossierModal)},$scope.launchModalWithRedirect=function(action){var defaultPublicAnnotation=$scope.local.annot||"";"REJET"===action&&0===defaultPublicAnnotation.length&&(defaultPublicAnnotation=$scope.apercu.annotations.getAnnotationsText()),$scope.changedAnnotation(defaultPublicAnnotation),modals.launch(action,getDossierModal,$scope.selectNextDossier)};var metaHasChanged=!1;$scope.metaChanged=function(){metaHasChanged=!0},$scope.metasForm={},$scope.setFormScope=function(scope){$scope.metasForm=scope},$scope.checkReadAndLaunchModalWithRedirect=function(action){"SIGNATURE"!==$scope.dossier.actionDemandee||$scope.dossier.hasRead||"true"!==configuration.properties["parapheur.ihm.confirmbox.read"]?modals.launch(action,getDossierModal,$scope.selectNextDossier):modals.launch("base",{title:"Attestation de lecture",message:"Je reconnais avoir pris connaissance des documents sélectionnés",template:"partials/modals/readConfirmModal.html",ctrl:BaseController},function(){$scope.readDossier(0),modals.launch(action,getDossierModal,$scope.selectNextDossier)}),metaHasChanged&&$scope.metasForm.metasForm.$valid&&modals.launch("base",{title:"Enregistrement des métadonnées",message:"Les métadonnées ont été modifiées. Souhaitez-vous enregistrer les modification ?",template:"partials/modals/simpleConfirmationModal.html",ctrl:BaseController},function(){$scope.saveMetadatas()})},$scope.readDossier=function(index){0===index&&~$scope.dossier.actions.indexOf("REJET")&&!$scope.dossier.hasRead&&($scope.dossier.hasRead=!0,$scope.dossier.isRead=!0,$scope.dossier.readingMandatory&&($scope.dossier.actions.push("SIGNATURE"),$scope.dossier.actions.push("AVIS_COMPLEMENTAIRE"),$scope.dossier.actions.push("TRANSFERT_SIGNATURE")))},$scope.launchModalWithRefresh=function(action){modals.launch(action,getDossierModal,function(){$scope.refreshDossier=!0,$timeout(function(){initController(),$scope.refreshDossier=!1},5e3)})};var removeDossierFromList=function(id){for(var i=0;i<$scope.dossiers.length;i++){var dossier=$scope.dossiers[i];dossier.id===id&&($scope.dossiers.splice(i,1),$scope.dossiers.length<$scope.prefs.pagesize/2&&(navigationService.dash.hasNext||navigationService.dash.hasPrev)&&getDossiersRetain())}};$scope.saveMetadatas=function(){$scope.metaSaved=!1,$scope.metaSavedError=!1,$scope.dossier.$update({bureauCourant:navigationService.bureauCourant.id},function(){$scope.metaSaved=!0,$scope.dossier.$getCircuit().then(function(){$timeout(function(){$scope.metaSaved=!1},3e3)}),metaHasChanged=!1},function(error){$scope.metaSavedError=!0,$scope.metaSavedErrorMsg=error.data.message})},$scope.$on("notificationReceived",function(event,obj){var changed=!1;if("TRANSFORM"===obj.action||"GET_ATTEST"===obj.action){for(var doc,index,j=0;j<$scope.dossier.documents.length;j++)$scope.dossier.documents[j].id===obj.id&&(doc=$scope.dossier.documents[j],changed=!0,index=j);if(doc)switch(obj.state){case"NEW":doc.isLocked=!0,doc.canDelete=!1;break;case"END":if("TRANSFORM"!==obj.action){doc.attestState=2;break}doc.visuelPdf=!0,doc.pageCount=obj.pageCount,$scope.currentDocumentIndex===index&&($scope.currentDocumentIndex=-1,$scope.selectDocument(index));case"ERROR":if("TRANSFORM"===obj.action)break;doc.attestState=-1;break;default:doc.isLocked=!1,doc.canDelete=!0}else obj.id===$scope.dossier.id&&($scope.dossier.locked=!1)}else obj.bureauId===navigationService.bureauCourant.id&&~obj.banettes.indexOf(navigationService.currentFilter.dossier)&&("new"===obj.state||removeDossierFromList(obj.id))}),$scope.refreshStatus=function(){$scope.dossier.$status()},$scope.apercu={flags:{annotShownOnce:!1,noVisuel:!1,reset:function(){this.noVisuel=!1}},options:{getOptionsFromMeta:function(metaInfo){var values=[];if("true"!==metaInfo.mandatory&&values.push({text:"",value:""}),"BOOLEAN"===metaInfo.type)values.push({text:$filter("translate")("details-dossier.true"),value:"true"}),values.push({text:$filter("translate")("details-dossier.false"),value:"false"});else if(metaInfo.values)for(var i=0;i<metaInfo.values.length;i++)values.push({text:metaInfo.values[i],value:metaInfo.values[i]});return values},filters:function(){var result=[];result.push({key:"dashboard.Unsaved_filter",value:$filter("translate")("dashboard.Unsaved_filter")}),result.push({key:"dashboard.Default",value:$filter("translate")("dashboard.Default")}),result.push({key:"en-preparation",value:$filter("translate")("liste-dossier.toTransmit"),group:$filter("translate")("liste-dossier.traySelection")}),result.push({key:"a-traiter",value:$filter("translate")("liste-dossier.toTreat"),group:$filter("translate")("liste-dossier.traySelection")}),result.push({key:"a-archiver",value:$filter("translate")("liste-dossier.endOfCircuit"),group:$filter("translate")("liste-dossier.traySelection")}),result.push({key:"retournes",value:$filter("translate")("liste-dossier.returned"),group:$filter("translate")("liste-dossier.traySelection")}),result.push({key:"en-cours",value:$filter("translate")("liste-dossier.pending"),group:$filter("translate")("liste-dossier.traySelection")}),result.push({key:"a-venir",value:$filter("translate")("liste-dossier.upcoming"),group:$filter("translate")("liste-dossier.traySelection")}),result.push({key:"recuperables",value:$filter("translate")("liste-dossier.retrievables"),group:$filter("translate")("liste-dossier.traySelection")}),result.push({key:"en-retard",value:$filter("translate")("liste-dossier.late"),group:$filter("translate")("liste-dossier.traySelection")}),result.push({key:"traites",value:$filter("translate")("liste-dossier.treated"),group:$filter("translate")("liste-dossier.traySelection")}),result.push({key:"dossiers-delegues",value:$filter("translate")("liste-dossier.delegatedFolders"),group:$filter("translate")("liste-dossier.traySelection")});for(var keys=Object.keys($scope.savedFilters),i=0;i<keys.length;i++)result.push({key:keys[i],value:keys[i],group:$filter("translate")("liste-dossier.filterSelection")});return result}},signature:{sigWrongType:!1,isSigUploaded:!1,filename:"",wrongTypeSig:function(){var that=this;$scope.$apply(function(){that.sigWrongType=!0,$timeout(function(){that.sigWrongType=!1},3e3)})},sigAdded:function(files){this.filename=files[0].name},sigUploaded:function(uploadedFile){var that=this;$scope.$apply(function(){var action={content:uploadedFile.encodedFile,name:that.filename};$scope.dossier.$addSignature(action,function(){$scope.dossier.$getCircuit(),that.isSigUploaded=!0,$timeout(function(){that.isSigUploaded=!1},3e3)})})}},annotations:{list:[],orderedList:{},pagesLoaded:[],replacedVersions:{},documentPage:{documentIndex:0,page:0},page:0,viewPage:1,maxSize:7,src:"",pageCount:0,canLoad:!1,isInit:!1,hasAnnotation:!1,fullscreen:!1,signatureMode:!1,hasDashlets:{left:!0,right:!0},positionSignature:{},docHasAnnot:{},reset:function(){this.list=[],this.orderedList={},this.pagesLoaded=[],this.page=0,this.viewPage=1,this.maxSize=7,this.src="",this.canLoad=!1,this.isInit=!1,this.hasAnnotation=!1,this.fullscreen=!1,this.signatureMode=!1,this.pageCount=0,this.documentPage={documentIndex:0,page:0},this.hasDashlets={left:!0,right:!0}},init:function(){var that=this;$scope.$watch("apercu.annotations.hasDashlets",function(){""!==that.src&&$timeout(function(){$scope.$broadcast("resizeAnnotation")})},!0)},canPositionSignature:function(){return $scope.dossier.circuit&&$scope.dossier.circuit.sigFormat.indexOf("PAdES")>-1&&(!$scope.dossier.circuit.etapes[0].approved&&($scope.dossier.actions.indexOf("VISA")>-1||$scope.dossier.actions.indexOf("SECRETARIAT")>-1)||$scope.dossier.actions.indexOf("SIGNATURE")>-1||$scope.dossier.actions.indexOf("CACHET")>-1)?!0:!1},switchFullscreen:function(){this.fullscreen=!this.fullscreen,$timeout(function(){$scope.$broadcast("resizeAnnotation")})},pageChanged:function(){this.page=this.viewPage-1,this.documentPage={documentIndex:$scope.currentDocumentIndex,page:this.page}},handleAnnotation:function(annotation,canEdit,page){var annotObj=angular.copy(annotation),currentVersion=$scope.getCurrentDocumentVersionNumber($scope.dossier.documents[$scope.currentDocumentIndex].id);return annotObj.shapes=[{type:"rect",geometry:{x:annotObj.rect.topLeft.x/this.currentWidth,y:annotObj.rect.topLeft.y/this.currentHeight,width:(annotObj.rect.bottomRight.x-annotObj.rect.topLeft.x)/this.currentWidth,height:(annotObj.rect.bottomRight.y-annotObj.rect.topLeft.y)/this.currentHeight},style:{stroke:"rgba(0, 0, 0, 1)",hi_stroke:"rgba(0, 0, 0, 1)",fill:"rgba(0, 0, 255, 0.1)",hi_fill:"rgba(0, 0, 255, 0.15)",Ce:2,xe:2,Ee:1,ye:1}}],annotObj.editable=canEdit,annotObj.date=new Date(annotObj.date),annotObj.src=this.src+ +page+"?version="+currentVersion,annotObj},handlePosition:function(anno,page){this.positionSignature[$scope.currentDocumentIndex.toString()]&&this.positionSignature[$scope.currentDocumentIndex.toString()].page===page&&anno.addAnnotation(this.positionSignature[$scope.currentDocumentIndex.toString()])},handleList:function(anno,width,height,page){var that=this,list=this.list,documentId=$scope.dossier.documents[$scope.currentDocumentIndex].id;$scope.dossier.documents.length>1&&(this.hasAnnotation=!0);for(var etapeIndex=0;etapeIndex<list.length;etapeIndex++){var isEditable=etapeIndex===step;for(var pageNumber in list[etapeIndex][documentId])if(pageNumber.indexOf("$")<0&&(list[etapeIndex][documentId][pageNumber].length>0&&(this.hasAnnotation=!0),+pageNumber===page)){if(void 0!==list[etapeIndex][documentId][pageNumber])for(var j=0;j<list[etapeIndex][documentId][pageNumber].length;j++){var annotObj=that.handleAnnotation(list[etapeIndex][documentId][pageNumber][j],isEditable,pageNumber);anno.addAnnotation(annotObj)}that.pagesLoaded.push(pageNumber)}}},orderList:function(){var that=this,list=this.list;that.orderedList={};for(var etapeIndex=0;etapeIndex<list.length;etapeIndex++)for(var documentId in list[etapeIndex])if(documentId.indexOf("$")<0){var documentIndex=$scope.getDocumentIndex(documentId);void 0===that.orderedList[documentIndex]&&(that.orderedList[documentIndex]={});for(var pageNumber in list[etapeIndex][documentId])if(pageNumber.indexOf("$")<0&&(void 0===that.orderedList[documentIndex][pageNumber]&&(that.orderedList[documentIndex][pageNumber]=[]),void 0!==list[etapeIndex][documentId][pageNumber]))for(var annotationIndex=0;annotationIndex<list[etapeIndex][documentId][pageNumber].length;annotationIndex++){
var annotObj=that.handleAnnotation(list[etapeIndex][documentId][pageNumber][annotationIndex],!1,pageNumber);that.orderedList[documentIndex][pageNumber].push(annotObj)}}},select:function(documentIndex,page,annot){if(page=+page,this.page!==page||documentIndex!==$scope.currentDocumentIndex){$scope.selectDocument(documentIndex),$scope.currentPage=page,$scope.updateUrlImageSource(),this.documentPage={documentIndex:documentIndex,page:page},this.page=page,this.viewPage=page+1;var offSelect=$scope.$on("annotoriousLoaded",function(){anno.highlightAnnotation(annot),offSelect()})}else anno.highlightAnnotation(annot)},getAnnotationsText:function(){for(var list=this.list,annotText="",etapeIndex=step,hasAnnot=!1,i=0;i<$scope.dossier.documents.length;i++){var documentId=$scope.dossier.documents[i].id,hasDoc=!1;for(var pageNumber in list[etapeIndex][documentId]){var hasPage=!1;if(pageNumber.indexOf("$")<0)for(var j=0;j<list[etapeIndex][documentId][pageNumber].length;j++)hasAnnot||(annotText+="\n\nAnnotations graphiques :",hasAnnot=!0),hasDoc||(annotText+="\n- Document : "+$scope.dossier.documents[i].name,hasDoc=!0),hasPage||(annotText+="\n- Page : "+(+pageNumber+1)+"\n",hasPage=!0),annotText+=list[etapeIndex][documentId][pageNumber][j].text+"\n"}}return annotText},load:function(anno,width,height){this.currentWidth=width,this.currentHeight=height;var that=this;if(this.isInit)that.pagesLoaded.indexOf(that.page)<0&&that.handleList(anno,width,height,that.page),this.canPositionSignature()&&this.handlePosition(anno,this.page);else{if(this.list=Annotations.list({idDossier:$scope.dossier.id},function(){that.handleList(anno,width,height,that.page),that.orderList(),that.getAnnotationsText()}),this.canPositionSignature()){$scope.forCachet=!1;for(var i=0;$scope.dossier.circuit.etapes.length>i;i++){var etape=$scope.dossier.circuit.etapes[i];if(!etape.approved){if("SIGNATURE"===etape.actionDemandee)break;"CACHET"===etape.actionDemandee&&($scope.forCachet=!0)}}$http({url:configuration.context+"/proxy/alfresco/parapheur/dossiers/"+$scope.dossier.id+"/customSignature",method:"GET",params:{cachet:$scope.forCachet}}).success(function(data){data[0]&&0===data[0].page&&(data[0].page=$scope.apercu.annotations.pageCount),that.positionSignature[$scope.currentDocumentIndex]&&anno.removeAnnotation(that.positionSignature[$scope.currentDocumentIndex]),that.positionSignature=that.positionsToAnnotations(data),that.handlePosition(anno,that.page)})}this.isInit=!0}},positionsToAnnotations:function(positions){var localWidth=594,localHeight=840;this.currentWidth>this.currentHeight&&(localWidth=840,localHeight=594);var currentVersion=$scope.getCurrentDocumentVersionNumber($scope.dossier.documents[$scope.currentDocumentIndex].id),annotations={};for(var key in positions){var height=positions[key].height/localHeight;annotations[key]={src:document.location.origin+configuration.context+"/proxy/alfresco/parapheur/dossiers/"+$scope.dossier.id+"/"+$scope.dossier.documents[key].id+"/"+(positions[key].page-1)+"?version="+currentVersion,text:"",type:"rect",context:document.location.origin+configuration.context+"/#/apercu",author:"Signature location",isSignaturePosition:!0,page:positions[key].page-1,shapes:[{type:"rect",geometry:{x:positions[key].x/localWidth,y:1-height-positions[key].y/localHeight,width:positions[key].width/localWidth,height:height},style:{stroke:"rgba(0, 0, 0, 1)",hi_stroke:"rgba(0, 0, 0, 1)",fill:"rgba(255, 0, 0, 0.1)",hi_fill:"rgba(255, 0, 0, 0.15)",Ce:2,xe:2,Ee:1,ye:1}}]}}return annotations},setPosition:function(anno,annotation){var localWidth=594,localHeight=840;this.currentWidth>this.currentHeight&&(localWidth=840,localHeight=594),this.positionSignature[$scope.currentDocumentIndex]&&anno.removeAnnotation(this.positionSignature[$scope.currentDocumentIndex]),this.positionSignature[$scope.currentDocumentIndex]=annotation;var height=Math.round(annotation.shapes[0].geometry.height*localHeight),position={x:Math.round(annotation.shapes[0].geometry.x*localWidth),y:localHeight-Math.round(annotation.shapes[0].geometry.y*localHeight)-height,width:Math.round(annotation.shapes[0].geometry.width*localWidth),height:height,page:annotation.page+1};$http.post(configuration.context+"/proxy/alfresco/parapheur/dossiers/"+$scope.dossier.id+"/"+$scope.dossier.documents[$scope.currentDocumentIndex].id+"/customSignature",position),this.signatureMode=!1},create:function(annotation){annotation=new Annotations(annotation);var documentId=$scope.dossier.documents[$scope.currentDocumentIndex].id;return void 0===this.list[step][documentId][this.page]&&(this.list[step][documentId][this.page]=[]),void 0===this.orderedList[$scope.currentDocumentIndex][this.page]&&(this.orderedList[$scope.currentDocumentIndex][this.page]=[]),this.list[step][documentId][this.page].push(annotation),this.orderedList[$scope.currentDocumentIndex][this.page].push(annotation),this.hasAnnotation=!0,annotation.$save({idDossier:$scope.dossier.id,idDocument:documentId})},update:function(annotation){for(var documentId=$scope.dossier.documents[$scope.currentDocumentIndex].id,a=new Annotations(annotation),i=0;i<this.list[step][documentId][this.page].length;i++)if(this.list[step][documentId][this.page][i].id===a.id){this.list[step][documentId][this.page][i]=angular.copy(a);break}for(var j=0;this.orderedList[$scope.currentDocumentIndex][this.page].length;j++)if(this.orderedList[$scope.currentDocumentIndex][this.page][j].id===a.id){this.orderedList[$scope.currentDocumentIndex][this.page][j]=angular.copy(a);break}return a.$update({idDossier:$scope.dossier.id,idDocument:documentId})},remove:function(annotation){if(annotation.isSignaturePosition){var that=this;return $http["delete"](configuration.context+"/proxy/alfresco/parapheur/dossiers/"+$scope.dossier.id+"/"+$scope.dossier.documents[$scope.currentDocumentIndex].id+"/customSignature").success(function(data){$http.get(configuration.context+"/proxy/alfresco/parapheur/dossiers/"+$scope.dossier.id+"/customSignature?cachet="+$scope.forCachet).success(function(data){that.positionSignature=that.positionsToAnnotations(data),that.handlePosition(anno,that.page)})})}$scope.apercu.annotations.docHasAnnot[$scope.currentDocumentIndex]=!1;for(var a=new Annotations(annotation),documentId=$scope.dossier.documents[$scope.currentDocumentIndex].id,i=0;i<this.list[step][documentId][this.page].length;i++)if(this.list[step][documentId][this.page][i].id===a.id){this.list[step][documentId][this.page].splice(i,1);break}for(var j=0;this.orderedList[$scope.currentDocumentIndex][this.page].length;j++)if(this.orderedList[$scope.currentDocumentIndex][this.page][j].id===a.id){this.orderedList[$scope.currentDocumentIndex][this.page].splice(j,1);break}for(var pageIndex in this.orderedList[$scope.currentDocumentIndex])if(this.orderedList[$scope.currentDocumentIndex].hasOwnProperty(pageIndex)&&this.orderedList[$scope.currentDocumentIndex][pageIndex].length>0){$scope.apercu.annotations.docHasAnnot[$scope.currentDocumentIndex]=!0;break}return a.$remove({idDossier:$scope.dossier.id,idDocument:documentId})}},iframe:{visuType:"xemelios",iframeId:"visionneuse",current:-3,max:-3,userChangePage:!1,isLoaded:!1,init:function(viewXem){var that=this;try{var propTenant=JSON.parse(configuration.properties["parapheur.ihm.apercu.helios.tenant"])}catch(e){}viewXem?this.visuType=viewXem:configuration.tenant&&propTenant[configuration.tenant]?this.visuType=propTenant[configuration.tenant]:this.visuType=configuration.properties["parapheur.ihm.apercu.helios"],$scope.$watch("apercu.flags.noVisuel",function(){$scope.apercu.flags.noVisuel&&$scope.dossier.isXemEnabled&&(that.visuType="xemelios")}),this.postLoad()},postLoad:function(){var defaultLoading=-1!=navigator.userAgent.indexOf("Chrome")?-3:-2;this.current=defaultLoading,this.max=defaultLoading,this.isLoaded=!1},onIframeLoad:function(){this.userChangePage?this.userChangePage=!1:(this.current++,0===this.current&&$scope.readDossier(0),this.max=this.current)},changePage:function(changed){this.userChangePage=!0,this.current+=changed,document.getElementById(this.iframeId).contentWindow.history.go(changed)},previousPage:function(){this.current>0&&this.changePage(-1)},nextPage:function(){this.current<this.max&&this.changePage(1)},switchVisu:function(){(this.current>=0||"visuelpdf"===this.visuType)&&(this.visuType="xemelios"===this.visuType?"visuelpdf":"xemelios","xemelios"===this.visuType?this.postLoad():$timeout(function(){$timeout(function(){$scope.$broadcast("resizeAnnotation")})}))}}},$scope.apercu.annotations.init(),$scope.updateUrlImageSource=function(){$scope.apercu.annotations.src=window.location.protocol+"//"+window.location.host+configuration.context+"/proxy/alfresco/parapheur/dossiers/"+$scope.dossier.id+"/"+$scope.dossier.documents[$scope.currentDocumentIndex].id+"/"},$scope.selectNextDossier=function(dossier){if(dossier){if(dossier.id===$scope.dossier.id)return;nextDossier=dossier}else findNextDossier();null===nextDossier||nextDossier.id===$scope.dossier.id?$location.path("/dashboard"):(navigationService.dossierToEdit=nextDossier.id,$scope.currentDocumentIndex=0,initController(),dossier||($scope.nextDossierSelected=!0,$timeout(function(){$scope.nextDossierSelected=!1},5e3)))},$scope.selectDocument=function(index){$scope.currentDocumentIndex!==index&&($scope.readDossier(index),$scope.currentDocumentIndex=index,$scope.currentPage=0,$scope.apercu.annotations.viewPage=0,$scope.apercu.annotations.page=0,$scope.apercu.annotations.pageCount=$scope.dossier.documents[index].pageCount,$scope.updateUrlImageSource(),$scope.apercu.annotations.documentPage={documentIndex:$scope.currentDocumentIndex,page:0},$scope.apercu.flags.reset())},$scope.getDocumentIndex=function(documentId){for(var currentDocumentIndex=0,documentIndex=0;documentIndex<$scope.dossier.documents.length;documentIndex++)$scope.dossier.documents[documentIndex].id===documentId&&(currentDocumentIndex=documentIndex);return currentDocumentIndex},$scope.getDocumentListItemClass=function(index){return $scope.isCurrentDocumentSelected(+index)?"document-list-element document-list-element-selected":$scope.isCurrentMainDocument(+index)?"document-list-element document-list-element-unselected":"document-list-element"},$scope.isPdf=function(index){return-1!==$scope.dossier.documents[index].name.indexOf(".pdf",$scope.dossier.documents[index].name.length-".pdf".length)},$scope.isCurrentDocumentSelected=function(index){return+$scope.currentDocumentIndex===+index},$scope.isCurrentMainDocument=function(index){return $scope.dossier.documents[+index].isMainDocument&&(0==index||$scope.dossier.circuit.isMultiDocument)},$scope.isFirstAnnex=function(index){return 0===index?!1:$scope.isCurrentMainDocument(index-1)&&!$scope.isCurrentMainDocument(index)},$scope.uploadError=function(resp,document){$scope.$apply(function(){$scope.uploadErrorMessage=$scope.getErrorMessage(resp),$scope.dossier.documents.splice(document,1)})},$scope.getErrorMessage=function(resultData){var resultMessage;if(400==resultData.status){var message=resultData.responseJSON?resultData.responseJSON.message:resultData.data.message;isNaN(message)?(console.log("Missing translation : "+message),resultMessage=message):resultMessage=$filter("translate")("ErrorCodes."+message)}else resultMessage=$filter("translate")("ErrorCodes."+resultData.status);return resultMessage},$scope.getCurrentProtocol=function(){return $scope.dossier.circuit?$scope.dossier.circuit.protocol:void 0},$scope.getCurrentSignatureFormat=function(){return $scope.dossier.circuit?$scope.dossier.circuit.sigFormat:void 0},$scope.isDocumentNameAlreadyExist=function(fileName){for(var alreadyExists=!1,i=0;i<$scope.dossier.documents.length;i++)if($scope.dossier.documents[i].name===fileName){alreadyExists=!0,$scope.$apply(function(){$scope.uploadErrorMessage=$filter("translate")("ErrorCodes.3003")});break}return alreadyExists},$scope.hasNoVisualToDisplay=function(){return $scope.apercu.flags.noVisuel&&(!$scope.dossier.isXemEnabled||"xemelios"!==$scope.apercu.iframe.visuType)&&!$scope.dossier.documents[$scope.currentDocumentIndex].isLocked},$scope.isGenerating=function(){return $scope.apercu.flags.noVisuel&&(!$scope.dossier.isXemEnabled||"xemelios"!==$scope.apercu.iframe.visuType)&&$scope.dossier.documents[$scope.currentDocumentIndex].isLocked};var timestamp=(new Date).getTime();$scope.getCurrentDocumentVersionNumber=function(){var version=timestamp;return $scope.dossier.documents&&$scope.dossier.documents[$scope.currentDocumentIndex]&&$scope.apercu.annotations.replacedVersions[$scope.dossier.documents[$scope.currentDocumentIndex].id]&&(version=$scope.apercu.annotations.replacedVersions[$scope.dossier.documents[$scope.currentDocumentIndex].id]),version},$scope.getDocumentName=function(documentIndex){return $scope.dossier.documents[documentIndex].name},$scope.isMultiDocument=function(){return $scope.dossier.circuit.isMultiDocument},initController()}function onIframeLoad(){var scopetemp=angular.element("iframe").scope();scopetemp.$$phase?scopetemp.apercu&&scopetemp.apercu.iframe.onIframeLoad():scopetemp.$apply(function(){scopetemp.apercu.iframe.onIframeLoad()})}function ArchivesController($scope,Metadonnees,Types,Archives,navigationService,viewService,preferences,utils,modals,$filter){var prefs=preferences.initPreferences(function(resp){viewService.getArchiveColumns(resp.enabledColumnsArchives,function(data){$scope.columns=data})});$scope.getFullTitle=function(title){var s=".pdf";return title.length>=s.length&&title.substr(title.length-s.length)===s?title:title+s},$scope.deleteArchive=function(archive){modals.launch("SimpleConfirmation",{title:$filter("translate")("archives.delete")+" "+archive.title,message:$filter("translate")("archives.delete_confirm"),ctrl:BaseController},function(){archive.$destroy(function(){$scope.dossiers.length=0,getDossiers()})})},$scope.renameArchive=function(archive){modals.launch("SimpleInput",{title:$filter("translate")("archives.rename")+" "+archive.title,message:$filter("translate")("archives.rename_confirm"),ctrl:InputController},function(ret){archive.title=ret.value,archive.$rename(function(){$scope.dossiers.length=0,getDossiers()})})},$scope.sortTable=function(column){column&&(navigationService.archives.currentChamp===column?navigationService.archives.ascBase=!navigationService.archives.ascBase:navigationService.archives.currentChamp=column,getDossiers())},$scope.noFilterName="archives.No_filter",$scope.unsavedFilterName="archives.Unsaved_filter",$scope.optionsFiltersAvailable=[],$scope.metadonnees=Metadonnees.list({type:"",sousType:""},function(){$scope.optionsFiltersAvailable.push({value:"",key:$filter("translate")("archives.select_a_filter_to_create")});for(var groupName="Metadonnées",i=0;i<$scope.metadonnees.length;i++)$scope.optionsFiltersAvailable.push({group:groupName,value:i,key:$scope.metadonnees[i].name})}),$scope.selectedMetadonnee={},$scope.metaTmpFilter={},$scope.metaFilter=[],$scope.selectedMetadonneeIndex={index:"",bis:""},navigationService.currentFilterArchive.metadonnees;var selectedIndex=void 0;$scope.createAdvancedFilter=function(index){$scope.selectedMetadonneeIndex.bis="",$scope.metaTmpFilter=angular.copy($scope.metadonnees[index]),selectedIndex=void 0},$scope.selectAdvancedFilter=function(index){$scope.selectedMetadonneeIndex.index="",$scope.metaTmpFilter=$scope.metaFilter[index],selectedIndex=index},$scope.saveAdvancedFilter=function(){$scope.selectedMetadonneeIndex.bis="",selectedIndex=void 0,$scope.metaTmpFilter=angular.copy($scope.metadonnees[$scope.selectedMetadonneeIndex.index])},$scope.deleteAdvancedFilter=function(){$scope.metaFilter.splice(selectedIndex,1),$scope.selectedMetadonneeIndex.bis="",$scope.metaTmpFilter=angular.copy({}),selectedIndex=void 0},$scope.editAdvancedFilter=function(){void 0===selectedIndex?(selectedIndex=$scope.metaFilter.length,$scope.metaFilter.push(angular.copy($scope.metaTmpFilter))):$scope.metaTmpFilter.text||$scope.metaTmpFilter.dateFrom||$scope.metaTmpFilter.dateTo?$scope.metaFilter[selectedIndex]=angular.copy($scope.metaTmpFilter):($scope.metaFilter.splice(selectedIndex,1),$scope.selectedMetadonneeIndex.bis="",selectedIndex=void 0)},$scope.keyDownAdvancedFilter=function($event){13===$event.keyCode&&$scope.saveAdvancedFilter()},$scope.keyDownAdvancedActiveFilter=function($event){(8===$event.keyCode||46===$event.keyCode)&&$scope.deleteAdvancedFilter()},$scope.nav=navigationService.archives,$scope.changePage=function(next){(next&&navigationService.archives.hasNext||!next&&navigationService.archives.hasPrev)&&(navigationService.archives.currentPage+=next?1:-1,getDossiers())},$scope.typo=Types.query(),$scope.currentFilter=navigationService.currentFilterArchive,$scope.dashboard={list:{},showed:{},current:navigationService.currentFilterArchive,navigation:navigationService.archives,content:"false",columns:[],prefs:{},hasSelectFilter:!1,init:function(){var that=this;this.prefs=preferences.initPreferences(function(resp){viewService.getArchiveColumns(resp.enabledColumnsArchives,function(data){that.columns=data}),that.list=angular.copy(resp.savedFilters),that.list[$scope.unsavedFilterName]=""}),$scope.$watch("dashboard.showed",function(){that.hasSelectFilter?that.hasSelectFilter=!1:that.navigation.selected=$scope.noFilterName},!0),this.showed=angular.copy(this.current)},save:function(){var that=this;modals.launch("SimpleInput",{title:"Sauvegarde du filtre",message:"Merci de renseigner le nom du nouveau filtre",ctrl:InputController},function(ret){preferences.saveFilter(ret.value,that.current),that.navigation.selected=ret.value})},remove:function(){preferences.removeProperty("savedFilters."+encodeURIComponent(this.navigation.selected)),delete this.list[this.navigation.selected],this.navigation.selected=$scope.noFilterName,this.change()},change:function(){if(this.navigation.selected===$scope.unsavedFilterName)angular.copy([],$scope.metaFilter);else if(this.navigation.selected){this.hasSelectFilter=!0,this.navigation.currentPage=0;var filter=JSON.parse(this.list[this.navigation.selected]);angular.copy(filter,this.current),angular.copy(filter,this.showed),$scope.metaFilter=angular.copy(this.current.metadonnees)}else this.navigation.selected=$scope.noFilterName,this.resetFilter();getDossiers()},doFilter:function(){this.navigation.currentPage=0,angular.copy(this.showed,this.current),this.current.metadonnees=angular.copy($scope.metaFilter),getDossiers()},resetFilter:function(){this.showed=angular.extend({types:[],subtypes:[],dateTo:"",dateFrom:"",title:"",metadonnees:[]}),angular.copy(this.showed,this.current),$scope.metaFilter=angular.copy([]),getDossiers()}},$scope.dashboard.init();var extractMeta=function(columns){var metas=[];return $.each(columns,function(index,value){~value.indexOf("cu:")&&metas.push(value)}),JSON.stringify({metas:metas})},getDossiers=function(){$scope.dossiersToDo=angular.copy({}),navigationService.archives.hasNext=!1,navigationService.archives.hasPrev=!1;var skipped=navigationService.archives.currentPage>0?navigationService.archives.skipped[navigationService.archives.currentPage-1]:0;$scope.dossiers=Archives.list({pageSize:prefs.pagesizeArchives,page:navigationService.archives.currentPage,skipped:skipped,sort:navigationService.archives.currentChamp,asc:navigationService.archives.ascBase,filter:utils.generateFilter(navigationService.currentFilterArchive),metas:extractMeta($scope.prefs.enabledColumnsArchives)},function(){$scope.dossiers.length>0&&(navigationService.archives.hasNext=$scope.dossiers[0].total>prefs.pagesizeArchives,navigationService.archives.skipped[navigationService.archives.currentPage]=$scope.dossiers[0].skipped),navigationService.archives.hasPrev=navigationService.archives.currentPage>0})};$scope.translateFilter=function(name){return name===$scope.unsavedFilterName?$filter("translate")(name):name},getDossiers(),$scope.$on("notificationReceived",function(event,obj){}),$scope.removeSlash=function(title){return title.replace(/\//g,"-")};var coloration=JSON.parse($scope.prefs.coloration);$scope.checkColoration=function(dossier){var color="",background="",passed=!1;return $.each(coloration,function(index,value){var locallyPassed=!1;void 0===dossier[value.property.value]||passed||$.each(value.test,function(jndex,jalue){switch(jalue.comparator){case"=":locallyPassed=jalue.value===dossier[value.property.value]+"";break;case"!=":locallyPassed=jalue.value!==dossier[value.property.value]+""}}),locallyPassed&&(passed=!0,color=value.textColor,background=value.backgroundColor)}),passed?'{"background-color":"'+background+' !important", "color":"'+color+' !important"}':""}}function BureauController($scope,$rootScope,navigationService,prefs,bureaux){"use strict";if($scope.selectBureau=function(bureau){$rootScope.currentBureau=bureau,navigationService.bureauCourant=bureau},!$rootScope.orderedBureaux)if($rootScope.orderedBureaux=[],void 0!==prefs.bureauxOrder){var i,j,k,array=JSON.parse(prefs.bureauxOrder),added=[];for(i=0;i<array.length;i++)for(j=0;j<bureaux.length;j++)bureaux[j].id===array[i]&&($rootScope.orderedBureaux.push(bureaux[j]),added[j]=!0);for(k=0;k<bureaux.length;k++)added[k]||$rootScope.orderedBureaux.push(bureaux[k])}else $rootScope.orderedBureaux=bureaux}function DashboardController($rootScope,$scope,Metadonnees,Types,Dossiers,Delegations,navigationService,viewService,preferences,$location,modals,utils,configuration,corbeilleFromMail,$timeout,$filter,cache){$scope.sortTable=function(column){if(column){var sortColumn=~column.value.indexOf("cu:")?column.value:column.key;navigationService.dash.currentChamp===sortColumn?navigationService.dash.ascBase=!navigationService.dash.ascBase:navigationService.dash.currentChamp=sortColumn,getDossiers()}},$scope.defaultFilterName="dashboard.Default",$scope.unsavedFilterName="dashboard.Unsaved_filter",$scope.metadonnees=Metadonnees.list({type:"",sousType:""}),cache.metadonnees.list(!1).then(function(metaList){$scope.allmetadonnees=metaList}),$scope.selectedMetadonnee={},$scope.metaTmpFilter={},$scope.metaFilter=[],$scope.selectedMetadonneeIndex={index:"",bis:""},angular.copy(navigationService.currentFilter.metadonnees,$scope.metaFilter);var selectedIndex=void 0;$scope.createAdvancedFilter=function(index){$scope.selectedMetadonneeIndex.bis="",$scope.metaTmpFilter=angular.copy($scope.metadonnees[index]),selectedIndex=void 0},$scope.selectAdvancedFilter=function(index){$scope.selectedMetadonneeIndex.index="",$scope.metaTmpFilter=$scope.metaFilter[index],selectedIndex=index},$scope.saveAdvancedFilter=function(){$scope.editAdvancedFilter(),$scope.selectedMetadonneeIndex.bis="",selectedIndex=void 0,$scope.metaTmpFilter=angular.copy($scope.metadonnees[$scope.selectedMetadonneeIndex.index]),angular.copy($scope.metaFilter,$scope.dashboard.showed.metadonnees),$scope.dashboard.changed()},$scope.deleteAdvancedFilter=function(){$scope.metaFilter.splice(selectedIndex,1),$scope.selectedMetadonneeIndex.bis="",$scope.metaTmpFilter=angular.copy({}),selectedIndex=void 0,angular.copy($scope.metaFilter,$scope.dashboard.showed.metadonnees),$scope.dashboard.changed()},$scope.editAdvancedFilter=function(){var isDefined=void 0!==selectedIndex;selectedIndex=!isDefined&&$scope.metaFilter?$scope.metaFilter.length:selectedIndex,"BOOLEAN"!==$scope.metaTmpFilter.type||$scope.metaTmpFilter.text||($scope.metaTmpFilter.text="false"),$scope.metaTmpFilter.text||$scope.metaTmpFilter.dateFrom||$scope.metaTmpFilter.dateTo?$scope.metaFilter[selectedIndex]=angular.copy($scope.metaTmpFilter):isDefined&&($scope.metaFilter.splice(selectedIndex,1),$scope.selectedMetadonneeIndex.bis="",selectedIndex=void 0)},$scope.delegation={current:{},timestamp:(new Date).getTime(),showed:!0,hasToShow:!1,dossiers:navigationService.bureauCourant["dossiers-delegues"],titulaires:[],init:function(hasToShow){var that=this;this.current=Delegations.get({id:navigationService.bureauCourant.id}),Delegations.titulaires({id:navigationService.bureauCourant.id},function(ret){angular.extend(that,ret)}),this.hasToShow=hasToShow},showDossiers:function(){navigationService.currentFilter.dossier="dossiers-delegues",getDossiers()}};var prefs;$scope.nav=navigationService.dash,$scope.changePage=function(next){(next&&navigationService.dash.hasNext||!next&&navigationService.dash.hasPrev)&&(navigationService.dash.currentPage+=next?1:-1,getDossiers())},$scope.typo=Types.query(),$scope.currentFilter=navigationService.currentFilter,$scope.corbeilleList=viewService.corbeillesList,$scope.corbeillesListFilter=viewService.corbeillesListFilter(navigationService.bureauCourant.isSecretaire,navigationService.bureauCourant.show_a_venir),$scope.dashboard={list:{},showed:{},current:navigationService.currentFilter,navigation:navigationService.dash,content:"false",columns:[],prefs:{},init:function(){if($.isEmptyObject(navigationService.bureauCourant))return void $location.path("/bureaux");angular.copy([],$scope.metaFilter);var that=this;this.prefs=preferences.initPreferences(function(resp){prefs=resp,$scope.delegation.init(resp.displayDelegation),viewService.getDashboardColumns(resp.enabledColumns,function(data){that.columns=data}),that.list=angular.copy(resp.savedFilters),that.list[$scope.unsavedFilterName]="",navigationService.dash.currentChamp=resp.propSort,navigationService.dash.ascBase=resp.asc,resp.filterDefault&&navigationService.hasToSetDefaultFilter&&!corbeilleFromMail?(that.navigation.selected=resp.filterDefault,that.change()):(corbeilleFromMail&&(that.resetFilter(),navigationService.currentFilter.dossier=corbeilleFromMail,corbeilleFromMail=void 0),that.showed.dossier=navigationService.currentFilter.dossier="a-venir"!=navigationService.currentFilter.dossier||navigationService.bureauCourant.show_a_venir?navigationService.currentFilter.dossier:"a-traiter",hasGetDossiersInEvent||getDossiers())}),this.showed=angular.copy(this.current),$scope.$watch("dashboard.showed",function(){that.changed()},!0)},changed:function(){var that=this;angular.equals(that.showed,that.current)?that.navigation.selected||angular.copy($scope.defaultFilterName,that.navigation.selected):that.navigation.selected=$scope.unsavedFilterName},save:function(){var that=this;angular.copy($scope.metaFilter,that.showed.metadonnees),modals.launch("SimpleInput",{title:"Enregistrer le filtre",message:"Merci de renseigner le nom du nouveau filtre",ctrl:InputController},function(ret){preferences.saveFilter(ret.value,that.showed),that.list[ret.value]=JSON.stringify(that.showed),that.navigation.selected=ret.value,that.change()})},remove:function(){preferences.removeFilter(this.navigation.selected),delete this.list[this.navigation.selected],this.navigation.selected=$scope.defaultFilterName,this.change()},change:function(){if(this.navigation.selected===$scope.unsavedFilterName)angular.copy([],$scope.metaFilter);else{this.navigation.currentPage=0;var filter={dossier:"a-traiter",types:[],subtypes:[],metadonnees:[]};if(this.navigation.selected!==$scope.defaultFilterName)try{filter=JSON.parse(this.list[this.navigation.selected])}catch(e){}filter.dossier="a-venir"!=filter.dossier||navigationService.bureauCourant.show_a_venir?filter.dossier:"a-traiter",angular.copy(filter,this.current),angular.copy(filter,this.showed),angular.copy(filter.metadonnees,$scope.metaFilter),angular.copy(filter,navigationService.currentFilter)}getDossiers(),$scope.selectAdvancedFilter("")},doFilter:function(){this.navigation.currentPage=0,"true"===this.searchContent&&(this.showed.dossier="content"),angular.copy(this.showed,this.current),this.current.metadonnees=angular.copy($scope.metaFilter),getDossiers()},resetFilter:function(){this.prefs.filterDefault&&!corbeilleFromMail?(this.navigation.selected=this.prefs.filterDefault,this.change()):(navigationService.currentFilter.types.length=0,navigationService.currentFilter.subtypes.length=0,navigationService.currentFilter.metadonnees.length=0,delete navigationService.currentFilter.dateFrom,delete navigationService.currentFilter.dateTo,delete navigationService.currentFilter.title,this.showed=angular.copy(navigationService.currentFilter),this.navigation.selected="","true"===this.searchContent?(this.searchContent="false",this.change()):getDossiers())}};var currentlyRetainDossiers=!1,hasToRetainDossiers=!1,getDossiersRetain=function(){var skipped=navigationService.dash.currentPage>0?navigationService.dash.skipped[navigationService.dash.currentPage-1]:0,pendingNumber=navigationService.dash.currentPage>0?navigationService.dash.pendingNumber[navigationService.dash.currentPage-1]:0;currentlyRetainDossiers||(currentlyGetDossiers&&(hasToRetainDossiers=!0),currentlyRetainDossiers=!0,Dossiers.list({bureau:navigationService.bureauCourant.id,pageSize:prefs.pagesize,page:navigationService.dash.currentPage,corbeilleName:navigationService.currentFilter.dossier,skipped:skipped,pendingFile:pendingNumber,sort:navigationService.dash.currentChamp,asc:navigationService.dash.ascBase,filter:utils.generateFilter(navigationService.currentFilter),metas:extractMeta($scope.prefs?$scope.prefs.enabledColumns:void 0)},function(data){$scope.setAllCheck(!1),$scope.dossiersToDo=angular.copy({}),$scope.dossiers=data,$scope.dossiers.length>0&&(navigationService.dash.hasNext=$scope.dossiers[0].total>prefs.pagesize,navigationService.dash.skipped[navigationService.dash.currentPage]=$scope.dossiers[0].skipped,navigationService.dash.pendingNumber[navigationService.dash.currentPage]=$scope.dossiers[0].pendingFile),navigationService.dash.hasPrev=navigationService.dash.currentPage>0;for(var i=0;i<$scope.dossiers.length;i++){var dossier=$scope.dossiers[i],present=!1;-1!==dossier.actions.indexOf("VISA")?(dossier.actions.splice(dossier.actions.indexOf("VISA"),1),present=!0):-1!==dossier.actions.indexOf("SIGNATURE")?(dossier.actions.splice(dossier.actions.indexOf("SIGNATURE"),1),present=!0):-1!==dossier.actions.indexOf("CACHET")&&(dossier.actions.splice(dossier.actions.indexOf("CACHET"),1),present=!0),present&&dossier.actions.push("VALIDATION")}currentlyRetainDossiers=!1}))},handleDashboardNotif=function(obj){if(obj.bureauId===navigationService.bureauCourant.id)if(~obj.banettes.indexOf("dossiers-delegues")&&"ERROR"!==obj.state&&("NEW"===obj.state?$scope.delegation.dossiers++:"END"===obj.state&&$scope.delegation.dossiers--),~obj.banettes.indexOf($scope.currentFilter.dossier)&&"ERROR"!==obj.state)if("NEW"===obj.state)$timeout.cancel(getDossiersPromise),getDossiersPromise=$timeout(function(){getDossiersRetain()},1e3);else if("END"===obj.state){var removedFromList=removeDossierFromList(obj.id);removedFromList&&navigationService.dash.hasNext&&($scope.loaded=!1,getDossiers(),$scope.loaded=!0)}else"EMITTED"===obj.state&&(setDossierSent(obj.id),removePendingFromDossier(obj.id));else removePendingFromDossier(obj.id);else removePendingFromDossier(obj.id)},handleHandlingNotifs=function(){for(var obj=$scope.notifsReceived.pop();void 0!=obj;)handleDashboardNotif(obj),obj=$scope.notifsReceived.pop()},removePendingFromDossier=function(id){for(var i=0;i<$scope.dossiers.length;i++){var dossier=$scope.dossiers[i];dossier.id===id&&($scope.dossiers[i].locked=!1)}},setDossierSent=function(id){for(var i=0;i<$scope.dossiers.length;i++){var dossier=$scope.dossiers[i];dossier.id===id&&($scope.dossiers[i].isSent=!0,$scope.dossiers[i].actions=["EMAIL","JOURNAL","SECRETARIAT"])}},removeDossierFromList=function(id){for(var i=0;i<$scope.dossiers.length;i++){var dossier=$scope.dossiers[i];if(dossier.id===id)return $scope.dossiers.splice(i,1),$scope.dossiers.length<prefs.pagesize/2&&(navigationService.dash.hasNext||navigationService.dash.hasPrev)?getDossiersRetain():$scope.setAllCheck(!1),!0}return!1},currentlyGetDossiers=!1,extractMeta=function(columns){var metas=[];return $.each(columns,function(index,value){~value.indexOf("cu:")&&metas.push(value)}),JSON.stringify({metas:metas})};$scope.loaded=!1,$scope.error=!1,$scope.errorMessage="";var getDossiers=function(){$scope.error=!1,$scope.errorMessage="",$scope.loaded=!1,$scope.setAllCheck(!1),$scope.dossiersToDo=angular.copy({}),navigationService.dash.hasNext=!1,navigationService.dash.hasPrev=!1;var skipped=navigationService.dash.currentPage>0?navigationService.dash.skipped[navigationService.dash.currentPage-1]:0,pendingNumber=navigationService.dash.currentPage>0?navigationService.dash.pendingNumber[navigationService.dash.currentPage-1]:0;
currentlyGetDossiers=!0,Dossiers.list({bureau:navigationService.bureauCourant.id,pageSize:prefs.pagesize,page:navigationService.dash.currentPage,corbeilleName:navigationService.currentFilter.dossier,skipped:skipped,pendingFile:pendingNumber,sort:navigationService.dash.currentChamp,asc:navigationService.dash.ascBase,filter:utils.generateFilter(navigationService.currentFilter),metas:extractMeta($scope.prefs?$scope.prefs.enabledColumns:void 0)},function(data){$scope.dossiers=data,$scope.dossiers.length>0&&(navigationService.dash.hasNext=$scope.dossiers[0].total>prefs.pagesize,navigationService.dash.skipped[navigationService.dash.currentPage]=$scope.dossiers[0].skipped,navigationService.dash.pendingNumber[navigationService.dash.currentPage]=$scope.dossiers[0].pendingFile),navigationService.dash.hasPrev=navigationService.dash.currentPage>0;for(var i=0;i<$scope.dossiers.length;i++){var dossier=$scope.dossiers[i],present=!1;-1!==dossier.actions.indexOf("VISA")&&"VISA"===dossier.actionDemandee?(dossier.actions.splice(dossier.actions.indexOf("VISA"),1),present=!0):-1!==dossier.actions.indexOf("SIGNATURE")&&"SIGNATURE"===dossier.actionDemandee?(dossier.actions.splice(dossier.actions.indexOf("SIGNATURE"),1),present=!0):-1!==dossier.actions.indexOf("CACHET")&&"CACHET"===dossier.actionDemandee&&(dossier.actions.splice(dossier.actions.indexOf("SIGNATURE"),1),present=!0),present&&dossier.actions.unshift("VALIDATION")}$scope.loaded=!0,currentlyGetDossiers=!1,hasToRetainDossiers&&getDossiersRetain(),handleHandlingNotifs()},function(){$scope.error=!0,$scope.errorMessage="Erreur lors de la récupération des dossiers.",$scope.loaded=!0})};$scope.checkboxDossier=[],$scope.dossiersToDo=[],$scope.setAllCheck=function(toSet){if($scope.dossiers){$scope.checkboxDossier.length=0;for(var i=0;i<$scope.dossiers.length;i++)$scope.checkboxDossier[i]=toSet}},$scope.masterCheckbox=!1,$scope.$watch("checkboxDossier",function(){$scope.masterCheckbox=-1===$.inArray(!1,$scope.checkboxDossier)&&$scope.checkboxDossier.length>0,$scope.dossiersToDo=[];for(var i=0;i<$scope.checkboxDossier.length;i++)$scope.checkboxDossier[i]&&$scope.dossiersToDo.push($scope.dossiers[i])},!0),$scope.selectDossier=function(dossier){navigationService.dossierToEdit=dossier.id};var hasGetDossiersInEvent=!1;$rootScope.eventGetDossiers=$rootScope.$on("getDossiers",function(ev){navigationService.currentFilter.types.length=0,navigationService.currentFilter.subtypes.length=0,navigationService.currentFilter.metadonnees.length=0,delete navigationService.currentFilter.dateFrom,delete navigationService.currentFilter.dateTo,delete navigationService.currentFilter.title,$scope.dashboard.showed=angular.copy(navigationService.currentFilter),$scope.dashboard.navigation.selected=$scope.unsavedFilterName,navigationService.dash.currentPage=0,hasGetDossiersInEvent=!0,getDossiers()}),$scope.$on("$locationChangeStart",function(event,next,current){$rootScope.eventGetDossiers()});var getDossierModal=function(){return $scope.dossiersToDo};$scope.launchModal=function(action){modals.launch(action,getDossierModal,function(){})},$scope.checkReadAndLaunchModal=function(action){for(var hasToValidate=!1,i=0;i<$scope.dossiersToDo.length;i++){var dossier=$scope.dossiersToDo[i];hasToValidate=hasToValidate||"SIGNATURE"===dossier.actionDemandee&&!dossier.hasRead&&"true"===configuration.properties["parapheur.ihm.confirmbox.read"]}hasToValidate?modals.launch("base",{title:"Attestation de lecture",message:"Je reconnais avoir pris connaissance des documents sélectionnés",template:"partials/modals/readConfirmModal.html",ctrl:BaseController},function(){modals.launch(action,getDossierModal)}):modals.launch(action,getDossierModal)};var getDossiersPromise;if($scope.notifsReceived=[],$scope.$on("notificationReceived",function(event,obj){$scope.loaded?handleDashboardNotif(obj):$scope.notifsReceived.push(obj)}),$scope.$watch("flags.backdrop",function(val){val||$scope.setAllCheck(!1)}),$scope.prefs)var coloration=JSON.parse($scope.prefs.coloration);$scope.checkColoration=function(dossier){var color="",background="",passed=!1;return $.each(coloration,function(index,value){var locallyPassed=!1;void 0===dossier[value.property.value]||passed||$.each(value.test,function(jndex,jalue){switch(jalue.comparator){case"=":locallyPassed=jalue.value===dossier[value.property.value]+"";break;case"!=":locallyPassed=jalue.value!==dossier[value.property.value]+""}}),locallyPassed&&(passed=!0,color=value.textColor,background=value.backgroundColor)}),passed?'{"background-color":"'+background+' !important", "color":"'+color+' !important"}':""},$scope.isDossierLockedInSelection=function(){for(var i=0;i<$scope.dossiersToDo.length;i++)if($scope.dossiersToDo[i].locked)return!0;return!1},$scope.isSignPapier=function(){for(var i=0;i<$scope.dossiersToDo.length;i++)if($scope.dossiersToDo[i].isSignPapier)return!0;return!1},$scope.isOnlySignature=function(){for(var i=0;i<$scope.dossiersToDo.length;i++)if("SIGNATURE"!==$scope.dossiersToDo[i].actionDemandee)return!1;return!0},$scope.isOnlyCachet=function(){for(var i=0;i<$scope.dossiersToDo.length;i++)if("CACHET"!==$scope.dossiersToDo[i].actionDemandee)return!1;return!0},$scope.isOnlyVisa=function(){for(var i=0;i<$scope.dossiersToDo.length;i++)if("VISA"!==$scope.dossiersToDo[i].actionDemandee)return!1;return!0},$scope.readDossier=function(dossier){~dossier.actions.indexOf("REJET")&&!dossier.hasRead&&(dossier.hasRead=!0,dossier.isRead=!0,dossier.readingMandatory&&dossier.actions.push("SIGNATURE"))},$scope.$on("$routeChangeStart",function(next,current){$scope.dossiersToDo=[]}),$scope.translateFilter=function(name){return name===$scope.unsavedFilterName?$filter("translate")(name):name},$scope.getIconClass=function(dossier,data){var result="fa";switch("Dossiers retournés"===dossier.banetteName?result+=" text-danger":dossier.isSent&&(result+=" text-orange"),dossier[data.value].toLowerCase()){case"visa":result+=" fa-check-square-o";break;case"signature":result+=" ls-signature";break;case"mailsecpastell":result+=" fa-envelope-o";break;case"mailsec":result+=" fa-envelope";break;case"tdt":result+=" fa-cloud-upload";break;case"cachet":result+=" ls-stamp";break;default:result+=" fa-flag-checkered"}return result},$scope.getActionTooltip=function(dossier,data){var tooltip="Fin de circuit";switch(dossier[data.value].toLowerCase()){case"visa":tooltip="Visa";break;case"signature":tooltip="Signature";break;case"mailsecpastell":tooltip="Mail sécurisé Pastell";break;case"mailsec":tooltip="Mail sécurisé S²LOW";break;case"tdt":tooltip="Télé-transmission";break;case"cachet":tooltip="Cachet serveur"}return"Dossiers retournés"===dossier.banetteName&&(tooltip+=" rejeté",("signature"===dossier[data.value].toLowerCase()||"tdt"===dossier[data.value].toLowerCase())&&(tooltip+="e")),dossier.isSent&&(tooltip+=" envoyé","tdt"===dossier[data.value].toLowerCase()&&(tooltip+="e")),tooltip},$scope.getFileExtIcon=function(filename){var ext=/^.+\.([^.]+)$/.exec(filename);ext=null===ext?"":ext[1].toLowerCase();var iconName="fa-";switch(ext){case"pdf":iconName+="file-pdf-o";break;case"zip":iconName+="file-archive-o";break;case"xml":iconName+="file-code-o";break;case"png":case"jpg":case"jpeg":case"gif":iconName+="file-image-o";break;case"pptx":case"ppt":case"odp":iconName+="file-powerpoint-o";break;case"xlsx":case"xls":case"ods":iconName+="file-excel-o";break;case"docx":case"doc":case"odt":case"rtf":case"txt":case"htm":case"html":iconName+="file-word-o"}return iconName},$scope.getIconSrc=function(dossier,data){var result=configuration.context+"/res/images/";return result+="Dossiers retournés"===dossier.banetteName?"ir-":dossier.isSent?"ic-":"iw-",result+=dossier[data.value].toLowerCase()+".png"},$scope.getReadMandatoryTooltip=function(dossier){var result;return result=dossier.hasRead?$filter("translate")("dashboard.Read_folder"):dossier.readingMandatory&&"SIGNATURE"===dossier.actionDemandee?$filter("translate")("dashboard.Unread_folder_with_mandatory_reading"):$filter("translate")("dashboard.Unread_folder")},$scope.dashboard.init()}function LogoutController(navigationService,$location){navigationService.isLoggedIn&&$location.path("/bureaux")}function NavbarController($rootScope,$route,$location,configuration,navigationService,preferences,viewService,notifications,utils,$http,$timeout,$filter){$rootScope.isLoggedIn=navigationService.isLoggedIn,$rootScope.config=configuration,$rootScope.properties=configuration.properties,$rootScope.updateProperties=function(p){$rootScope.properties=p,configuration.properties=p},$rootScope.currentBureau=navigationService.bureauCourant,$rootScope.context=configuration.context,$rootScope.pagename=function(){return $location.path()},$rootScope.empty=function(value){return $.isEmptyObject(value)},$rootScope.isEmptyOrNull=function(value){return!value||$.isEmptyObject(value)},$rootScope.log=function(toLog){console.log(toLog)},$rootScope.prefs=preferences.initPreferences(),$rootScope.flags=viewService.flags,$rootScope.cleanCurrentDossier=function(){navigationService.dossierToEdit=void 0},$rootScope.redirectToNew=function(){$location.path("/nouveau")},$rootScope.extension=function(file){var ext=/^.+\.([^.]+)$/.exec(file);return null===ext?"":ext[1]},$rootScope.inArray=function(element,array){return-1!==$.inArray(element,array)},$rootScope.logout=function(){$rootScope.isLoggedIn=!1,navigationService.isLoggedIn=!1,navigationService.hasToReset=!0},$rootScope.login=function(){$rootScope.isLoggedIn=!0,navigationService.isLoggedIn=!0,navigationService.hasToReset=!1,$location.path("/bureaux")},$rootScope.showBrand=!0,$rootScope.logoLoaded=function(){$rootScope.showBrand=!1},$rootScope.showedNotifs=!1,$rootScope.events={};var eventsBureau={success:{"a-traiter":[],"en-preparation":[],traite:[],retournes:[],"a-archiver":[],archive:[]},error:[]};$rootScope.unread=0,notifications.emit("binding",{userName:configuration.username}),notifications.on("message",function(data){var obj=$.parseJSON(data);$rootScope.$broadcast("notificationReceived",obj)});var errortask;$rootScope.$on("notificationReceived",function(event,obj){if(-1===Object.keys($rootScope.events).indexOf(obj.bureauId)&&($rootScope.events[obj.bureauId]={},angular.extend($rootScope.events[obj.bureauId],angular.copy(eventsBureau))),$rootScope.orderedBureaux)for(var i=0;i<$rootScope.orderedBureaux.length;i++)obj.bureauId===$rootScope.orderedBureaux[i].id&&"ERROR"!==obj.state&&handleMessageBureau(obj,$rootScope.orderedBureaux[i]);else obj.bureauId===navigationService.bureauCourant.id&&"ERROR"!==obj.state&&handleMessageBureau(obj,navigationService.bureauCourant);"ERROR"===obj.state&&"TRANSFORM"!==obj.action&&"GET_ATTEST"!==obj.action&&($timeout.cancel(errortask),$rootScope.errorNotification=angular.copy(obj),isNaN($rootScope.errorNotification.message)||($rootScope.errorNotification.message=$filter("translate")("ErrorCodes."+$rootScope.errorNotification.message)),errortask=$timeout(function(){$rootScope.errorNotification={}},5e3))}),$rootScope.showFiltersWindow=function(){$timeout(function(){$rootScope.$broadcast("fixbottom")},400)},$rootScope.stopErrorTask=function(){$timeout.cancel(errortask)},$rootScope.startErrorTask=function(){errortask=$timeout(function(){$rootScope.errorNotification={}},5e3)},$rootScope.errorNotification={};var handleMessageBureau=function(obj,bureau){for(var toAdd="NEW"===obj.state?1:"END"===obj.state?-1:0,i=0;i<obj.banettes.length;i++)bureau[obj.banettes[i]]+=toAdd;$rootScope.currentBureau!==bureau};$rootScope.asyncSelected={title:""},$rootScope.selectAsyncDossier=function(model){if("/archives"===$rootScope.pagename())navigationService.currentFilterArchive={title:model.title},$route.reload();else{var newPath="/apercu/"+model.id;$location.path()===newPath?$route.reload():$location.path(newPath)}};var task,hasRequested=!1;$rootScope.getDossiersNavbar=function(viewValue){var launchRequest=function(){return $timeout(function(){var resource;return resource="/archives"===$rootScope.pagename()?"archives":"dossiers",$http({url:configuration.context+"/proxy/alfresco/parapheur/"+resource,method:"GET",params:{pageSize:5,page:0,skipped:0,sort:"cm:title",asc:!0,filter:utils.generateFilter({title:viewValue}),metas:{metas:[]}}}).then(function(response){return hasRequested=!1,response.data})},500)};return hasRequested?($timeout.cancel(task),task=launchRequest()):(hasRequested=!0,task=launchRequest()),task.then(function(data){return data})},$rootScope.$on("$locationChangeStart",function(event,next,current){var currentLocation=current.substr(current.lastIndexOf("/")+1),nextLocation=next.substr(next.lastIndexOf("/")+1);currentLocation===nextLocation||"archives"!==currentLocation&&"archives"!==nextLocation||($rootScope.asyncSelected={title:""})})}function MainController($rootScope){$rootScope.themeSelected=userTheme}function NouveauController($scope,navigationService,configuration,Dossiers,Types,Circuits,Metadonnees,$location,$sce,modals,$timeout,$filter){if($.isEmptyObject(navigationService.bureauCourant)||!navigationService.bureauCourant)return void $location.path("/bureaux");var choices=configuration.properties["parapheur.ihm.creerdossier.visibilite.valeurs"].split(",");$scope.mainDocsMax=configuration.properties["parapheur.ihm.creerdossier.maindocuments.max"],$scope.mainDocsMax||($scope.mainDocsMax=6),$scope.visibilityChoices=[];for(var i=0;i<choices.length;i++)"public"===choices[i]?$scope.visibilityChoices.push({value:choices[i],text:"Public"}):"confidentiel"===choices[i]?$scope.visibilityChoices.push({value:choices[i],text:"Confidentiel"}):$scope.visibilityChoices.push({value:choices[i],text:"Groupe"});$scope.getIconClass=function(action){var result="fa";switch(action.toLowerCase()){case"visa":result+=" fa-check-square-o";break;case"signature":result+=" ls-signature";break;case"mailsecpastell":result+=" fa-envelope-o";break;case"mailsec":result+=" fa-envelope";break;case"tdt":result+=" fa-cloud-upload";break;case"cachet":result+=" ls-stamp";break;default:result+=" fa-flag-checkered"}return result},$scope.getActionTooltip=function(action){var tooltip="Fin de circuit";switch(action.toLowerCase()){case"visa":tooltip="Visa";break;case"signature":tooltip="Signature";break;case"mailsecpastell":tooltip="Mail sécurisé Pastell";break;case"mailsec":tooltip="Mail sécurisé S²LOW";break;case"tdt":tooltip="Télé-transmission";break;case"cachet":tooltip="Cachet serveur"}return tooltip},$scope.typo=Types.queryWithBureau({bureau:navigationService.bureauCourant.id}),$scope.acteursVariables={},$scope.dossier={},$scope.upgrading=!1,void 0===navigationService.dossierToEdit?$scope.dossier=Dossiers.save({bureauCourant:navigationService.bureauCourant.id},function(){$scope.dossier.$get({bureauCourant:navigationService.bureauCourant.id},function(){var visibility="public";try{var propTenant=JSON.parse(configuration.properties["parapheur.ihm.creerdossier.visibilite.defaut.tenant"])}catch(e){}visibility=configuration.tenant&&propTenant[configuration.tenant]?propTenant[configuration.tenant]:configuration.properties["parapheur.ihm.creerdossier.visibilite.defaut"],buildListDocuments(),$scope.dossier.visibility=~choices.indexOf(visibility)?visibility:"public",$scope.dossier.$getCircuit(),$scope.docsExists=!!$scope.dossier.documents.length})}):$scope.dossier=Dossiers.get({id:navigationService.dossierToEdit,bureauCourant:navigationService.bureauCourant.id},function(){for(var i=0;i<$scope.dossier.documents.length;i++)$scope.dossier.documents[i].state="";buildListDocuments();try{$scope.dossier.$getCircuit()}catch(e){console.log(e)}}),$scope.$watch("dossier.sousType",function(){$scope.dossier.sousType?$scope.circuit=Circuits.getWithTypo({id:$scope.dossier.type,action:$scope.dossier.sousType,bureau:navigationService.bureauCourant.id},function(){navigationService.bureauCourant.$associes(function(){for(var indexVariable=0,i=0;i<$scope.circuit.etapes.length;i++){var etape=$scope.circuit.etapes[i];"VARIABLE"===etape.transition?($scope.acteursVariables[i]=$scope.dossier.acteursVariables[indexVariable]||null,indexVariable++):$scope.acteursVariables[i]=null}}),buildListDocuments(),"XAdES/enveloped"!==$scope.circuit.sigFormat||$scope.dossier.xPathSignature||($scope.dossier.xPathSignature="."),$scope.metaInfos=Metadonnees.getWithTypo({id:$scope.dossier.type,action:$scope.dossier.sousType},function(){for(var i=0;i<$scope.circuit.etapes.length;i++)for(var etape=$scope.circuit.etapes[i],j=0;j<etape.listMetadatas.length;j++)$scope.metaInfos=$scope.metaInfos.filter(function(value){return value.id!=="cu:"+etape.listMetadatas[j]});for(var i=0;i<$scope.metaInfos.length;i++){var meta=$scope.metaInfos[i],obj={};obj[meta.id]=meta,obj[meta.id].value=$scope.dossier.metadatas[meta.id]?$scope.dossier.metadatas[meta.id].value:obj[meta.id]["default"]?obj[meta.id]["default"]:"",angular.extend($scope.dossier.metadatas,obj)}})}):($scope.circuit={},$scope.metaInfos=[],buildListDocuments())}),$scope.removeDocument=function(document){$scope.dossier.$removeDocument({doc:document.id,bureauCourant:navigationService.bureauCourant.id}).then(function(){for(var i=0;i<$scope.documentsPrincipaux.length;i++)$scope.documentsPrincipaux[i].id===document.id&&$scope.documentsPrincipaux.splice(i,1);for(var j=0;j<$scope.documentsAnnexes.length;j++)$scope.documentsAnnexes[j].id===document.id&&$scope.documentsAnnexes.splice(j,1);buildListDocuments()},function(){document.state=""})},$scope.updateVisu=function(){return $scope.$apply(function(){$scope.typeError=!1,$scope.formatError=!1,$scope.pdfError=!1,$scope.requestError=!1,$scope.existLog=!1,$scope.dossier.documents[0].state="visuel"}),0},$scope.metaHasChange=!1,$scope.valuesMetaUndefined=function(idMeta){$scope.dossier.metadatas[idMeta].value=""===$scope.dossier.metadatas[idMeta].value?void 0:$scope.dossier.metadatas[idMeta].value},$scope.updateVisuEnd=function(resp,index){$scope.$apply(function(){resp.exception?($scope.existLog=!0,$scope.existDoc=$scope.dossier.documents[index].name):($scope.existLog=!1,$scope.dossier.documents[index].visuelPdf=!0),$scope.dossier.documents[index].state=""})},$scope.addDocumentUrl=$sce.getTrustedResourceUrl($scope.context+"/addDocument"),$scope.addVisuelUrl=$sce.getTrustedResourceUrl($scope.context+"/addVisuel"),$scope.loadingDocuments=0;var initErrorsStates=function(){$scope.typeError=!1,$scope.formatError=!1,$scope.pdfError=!1,$scope.requestError=!1,$scope.existLog=!1};$scope.addDocument=function(files,isMainDoc){var document=void 0;return $scope.$apply(function(){initErrorsStates(),isMainDoc&&($scope.circuit.isMultiDocument&&!$scope.isMainDocumentListFull()||0===$scope.documentsPrincipaux.length)?$scope.documentsPrincipaux.push({name:files[0].name.replace(/[\^&:\"£*\/<>?%|+;]/g,""),isMainDocument:!0}):$scope.documentsAnnexes.push({name:files[0].name.replace(/[\^&:\"£*\/<>?%|+;]/g,""),isMainDocument:!1}),buildListDocuments()}),$scope.$apply(function(){document=isMainDoc&&$scope.documentsPrincipaux.length>0&&"saving"!==$scope.documentsPrincipaux[$scope.documentsPrincipaux.length-1].state?$scope.documentsPrincipaux[$scope.documentsPrincipaux.length-1]:$scope.documentsAnnexes[$scope.documentsAnnexes.length-1],document.state="saving",$scope.loadingDocuments++}),document},$scope.uploadError=function(resp,document){$scope.$apply(function(){initErrorsStates(),$scope.existLog=!0,$scope.message=$scope.getErrorMessage(resp),$scope.dossier.documents.splice(0,1);for(var i=0;i<$scope.documentsPrincipaux.length;i++)$scope.documentsPrincipaux[i].name===document.name&&$scope.documentsPrincipaux.splice(i,1);for(var j=0;j<$scope.documentsAnnexes.length;j++)$scope.documentsAnnexes[j].name===document.name&&$scope.documentsAnnexes.splice(j,1);buildListDocuments(),$scope.loadingDocuments--})},$scope.replaceError=function(resp){initErrorsStates(),$scope.existLog=!0,$scope.message=$scope.getErrorMessage(resp),$scope.loadingDocuments--,$scope.dossier.documents[0].state=""},$scope.documentAdded=function(resp,document){$scope.$apply(function(){initErrorsStates(),$.extend(document,{canDelete:!resp.isLocked,downloadUrl:resp.downloadUrl,id:resp.success,isLocked:resp.isLocked,isProtected:resp.isProtected,visuelPdfUrl:null,state:""}),$scope.loadingDocuments--})},$scope.uploadFinished=function(resp,index){$scope.$apply(function(){})};var replaceName="";$scope.beginReplace=function(files){return $scope.$apply(function(){initErrorsStates(),$scope.dossier.documents[0].state="replace",replaceName=files[0].name,$scope.loadingDocuments++}),0},$scope.endReplace=function(data,index){$scope.$apply(function(){initErrorsStates(),$scope.dossier.documents[0].name=replaceName,$scope.loadingDocuments--,$scope.dossier.documents[0].state="",$scope.dossier.documents[0].visuelPdf=!1,$scope.dossier.documents[0].canDelete=!data.isLocked,$scope.dossier.documents[0].isLocked=data.isLocked,$scope.dossier.documents[0].isProtected=data.isProtected})},$scope.metaChanged=function(){$scope.metaHasChange=!0},$scope.errorSavingProperties=!1,$scope.upgrade=function(success){$scope.errorSavingProperties=!1,$scope.upgrading=!0,$scope.metaHasChange=!1,buildListDocuments(),$scope.dossier.acteursVariables=[];for(var acteur in $scope.acteursVariables)null!=$scope.acteursVariables[acteur]&&$scope.dossier.acteursVariables.push($scope.acteursVariables[acteur]);$scope.dossier.$update({bureauCourant:navigationService.bureauCourant.id},function(){$scope.dossier.$getCircuit().then(function(){$scope.upgrading=!1,"function"==typeof success&&success()},function(){$scope.upgrading=!1,$scope.errorSavingProperties=!0})},function(resp){$scope.requestError=!0,$scope.requestErrorMessage=$scope.getErrorMessage(resp),$scope.upgrading=!1,$scope.errorSavingProperties=!0})},$scope.save=function(success){var func="function"==typeof success?success:function(){$scope.redirect=!0,$timeout(function(){navigationService.dossierToEdit=$scope.dossier.id,$location.path("/apercu")},2e3)};$scope.upgrade(func)};var buildListDocuments=function(){if(($scope.documentsPrincipaux&&$scope.documentsPrincipaux.length>0||$scope.documentsAnnexes&&$scope.documentsAnnexes.length>0)&&($scope.dossier.documents.length=0,$scope.dossier.documents=$scope.documentsPrincipaux.concat($scope.documentsAnnexes)),$scope.documentsPrincipaux=[],$scope.documentsAnnexes=[],$scope.dossier.documents)for(var i=0;i<$scope.dossier.documents.length;i++)!$scope.dossier.documents[i].isMainDocument||!$scope.circuit.isMultiDocument&&$scope.documentsPrincipaux.length?$scope.documentsAnnexes.push($scope.dossier.documents[i]):$scope.documentsPrincipaux.push($scope.dossier.documents[i])};$scope.getSortableOptions=function(classname){return $scope.circuit.isMultiDocument?{connectWith:classname,update:function(e,ui){ui.item.sortable.moved&&(ui.item.sortable.moved.isMainDocument=".mainDocList"!==classname),$scope.documentsPrincipaux.length>$scope.mainDocsMax&&($scope.documentsAnnexes.unshift($scope.documentsPrincipaux[$scope.documentsPrincipaux.length-1]),$scope.documentsAnnexes[0].isMainDocument=!1,$scope.documentsPrincipaux.splice($scope.documentsPrincipaux.length-1,1))}}:{connectWith:"",update:function(e,ui){}}},$scope.wrongPDF=function(){$scope.$apply(function(){initErrorsStates(),$scope.pdfError=!0})},$scope.wrongType=function(ext,isValid,isAuthorized){$scope.$apply(function(){initErrorsStates(),isValid?isAuthorized||($scope.typeError=!1,$scope.formatError=!0):($scope.typeError=!0,$scope.formatError=!1)})},$scope.checkIfExist=function(name){for(var i=0;i<$scope.documentsPrincipaux.length;i++)if($scope.documentsPrincipaux[i].name===name)return!0;for(var j=0;j<$scope.documentsAnnexes.length;j++)if($scope.documentsAnnexes[j].name===name)return!0;return!1},$scope.existFile=function(name){$scope.$apply(function(){initErrorsStates(),$scope.existLog=!0,$scope.message="Le document "+name+" existe déjà."})},$scope.focusTitle=function(){"Nouveau dossier"===$scope.dossier.title&&($scope.dossier.title=void 0)},$scope.blurTitle=function(){void 0==$scope.dossier.title&&($scope.dossier.title="Nouveau dossier")};var getDossierModal=function(){return[$scope.dossier]};$scope.saveAndEmit=function(){$scope.upgrade(function(){modals.launch("VALIDATION",getDossierModal,function(){$location.path("/dashboard")})})},$scope.saveAndSecretariat=function(){$scope.upgrade(function(){modals.launch("SECRETARIAT",getDossierModal,function(){$location.path("/dashboard")})})},$scope.getErrorMessage=function(resultData){var resultMessage;if(400==resultData.status){var message=resultData.responseJSON?resultData.responseJSON.message:resultData.data.message;isNaN(message)?(console.warn("Missing translation : "+message),resultMessage=message):resultMessage=$filter("translate")("ErrorCodes."+message)}else resultMessage=$filter("translate")("ErrorCodes."+resultData.status);return resultMessage},$scope.isMainDocumentListFull=function(){return $scope.documentsPrincipaux.length>=$scope.mainDocsMax},$scope.getSignatureFormat=function(){return $scope.circuit.sigFormat},$scope.isMainDocument=function(){return($scope.circuit.isMultiDocument||!$scope.dossier.documents||!$scope.dossier.documents[0]||null==$scope.dossier.documents[0].id)&&!$scope.isMainDocumentListFull()},$scope.getProtocol=function(){return $scope.circuit.protocol},$scope.isPreviousVariable=function(index){return index>0&&"VARIABLE"===$scope.circuit.etapes[index-1].transition&&"CHEF_DE"===$scope.circuit.etapes[index].transition?!0:index>0&&"CHEF_DE"===$scope.circuit.etapes[index-1].transition&&"CHEF_DE"===$scope.circuit.etapes[index].transition?$scope.isPreviousVariable(index-1):!1},$scope.cancel=function(){modals.launch("SUPPRESSION",getDossierModal,function(){$location.path("/dashboard")})},$scope.$on("notificationReceived",function(event,obj){var changed=!1;if("TRANSFORM"===obj.action){for(var docChanged,i=0;i<$scope.dossier.documents.length;i++)$scope.dossier.documents[i].id===obj.id&&(docChanged=$scope.dossier.documents[i],changed=!0);switch(obj.state){case"NEW":docChanged.isLocked=!0,docChanged.canDelete=!1;break;case"END":docChanged.visuelPdf=!0;default:docChanged.isLocked=!1,docChanged.canDelete=!0}changed&&buildListDocuments()}})}function OptionsController($scope,$modal,$sce,$rootScope,preferences,configuration,viewService,Bureaux,Users,prefs,$translate){$rootScope.prefs=prefs;var basePrefs=angular.copy($rootScope.prefs);$scope.columns={},viewService.getDashboardColumns($rootScope.prefs.enabledColumns,function(data){$scope.columns=data}),viewService.getArchiveColumns($rootScope.prefs.enabledColumnsArchives,function(data){$scope.archiveColumns=data}),$scope.signNode=configuration.signNode,$scope.newpass={},$scope.changePassword=function(){$scope.respPass=preferences.changePassword($scope.newpass.old,$scope.newpass.newOne)},$scope.themes=configuration.themes,$scope.changeTheme=function(theme){$rootScope.themeSelected=theme,preferences.changeProperty(preferences.paths.THEME,theme)},$scope.saveDashboardPrefs=function(){$rootScope.prefs.filterDefault&&basePrefs.filterDefault!==$rootScope.prefs.filterDefault?preferences.changeProperty(preferences.paths.FILTERDEFAULT,$rootScope.prefs.filterDefault,savedisplayDelegation):$rootScope.prefs.filterDefault?savedisplayDelegation():preferences.removeProperty(preferences.paths.FILTERDEFAULT.path,savedisplayDelegation)};var savedisplayDelegation=function(){basePrefs.displayDelegation!==$rootScope.prefs.displayDelegation?preferences.changeProperty(preferences.paths.DISDELEG,$rootScope.prefs.displayDelegation,savePagesize):savePagesize()},savePagesize=function(){basePrefs.pagesize!==$rootScope.prefs.pagesize?preferences.changeProperty(preferences.paths.PAGESIZE,$rootScope.prefs.pagesize,saveAsc):saveAsc()},saveAsc=function(){basePrefs.asc!==$rootScope.prefs.asc?preferences.changeProperty(preferences.paths.ASC,$rootScope.prefs.asc,savePropSort):savePropSort()},savePropSort=function(){basePrefs.propSort!==$rootScope.prefs.propSort?preferences.changeProperty(preferences.paths.PROPSORT,$rootScope.prefs.propSort,saveColumns):saveColumns()},saveColumns=function(){preferences.changeProperty(preferences.paths.COLDASH,viewService.toSaveColumns($scope.columns.enabled)),basePrefs=angular.copy($rootScope.prefs)};$scope.colorations=JSON.parse($scope.prefs.coloration),$scope.deleteColoration=function(index){$scope.colorations.splice(index,1)};var launchModal=function(ctrl,modalFile,success,enabledColumns){var modalInstance=$modal.open({templateUrl:modalFile,controller:ctrl,backdrop:"static",resolve:{enabledColumns:function(){return enabledColumns}}});modalInstance.result.then(function(result){"function"==typeof success&&success(result)},function(){})};$scope.addColoration=function(){launchModal(ColorationController,"partials/modals/colorationModal.html",function(data){$scope.colorations.push(data)},$scope.columns.enabled)},$scope.saveLanguage=function(){$translate.use($rootScope.prefs.language),preferences.changeProperty(preferences.paths.LANG,$rootScope.prefs.language)},$scope.saveArchivePrefs=function(){preferences.changeProperty(preferences.paths.PAGESIZEARCH,$rootScope.prefs.pagesizeArchives),preferences.changeProperty(preferences.paths.COLARCH,viewService.toSaveColumns($scope.archiveColumns.enabled))},$scope.notifications={mode:"always",mail:void 0,cron:{},changed:!1,saved:!1,error:void 0,init:function(){this.cron=viewService.extractCron($rootScope.prefs.notifications.digest.cron),this.mail=$rootScope.prefs.notifications.mail,$rootScope.prefs.notifications.enabled?$rootScope.prefs.notifications.dailydigest.enabled?this.mode=viewService.getCronMode($rootScope.prefs.notifications.digest.cron):this.mode="always":this.mode="never"},cronDidChange:function(){this.changed=!0},saveCronPrefs:function(){var that=this;this.error=void 0,Users.saveNotificationsPreferences({id:configuration.id},{mode:that.mode,mail:that.mail,frequency:that.cron[that.mode]}).$promise.then(function(){switch($rootScope.prefs.notifications.mail=that.mail,that.mode){case"never":$rootScope.prefs.notifications.enabled=!1;break;case"always":$rootScope.prefs.notifications.enabled=!0,$rootScope.prefs.notifications.dailydigest.enabled=!1;break;case"hourly":$rootScope.prefs.notifications.enabled=!0,$rootScope.prefs.notifications.dailydigest.enabled=!0,$rootScope.prefs.notifications.digest.cron="0 0 0/"+that.cron[that.mode]+" * * ?";break;case"daily":$rootScope.prefs.notifications.enabled=!0,$rootScope.prefs.notifications.dailydigest.enabled=!0,$rootScope.prefs.notifications.digest.cron="0 0 "+that.cron[that.mode]+" * * ?";break;case"weekly":$rootScope.prefs.notifications.enabled=!0,$rootScope.prefs.notifications.dailydigest.enabled=!0,$rootScope.prefs.notifications.digest.cron="0 0 8 ? * "+that.cron[that.mode]}that.changed=!1,that.saved=!0},function(error){that.error=error,that.changed=!1,that.saved=!1})}},$scope.notifications.init(),$scope.changeSignatureUrl=$sce.trustAsResourceUrl($scope.context+"/changeSignature"),$scope.typeError=!1,$scope.signatureSaved=function(resp){$scope.$apply(function(){configuration.signNode=resp.node,$scope.signNode=resp.node,$scope.typeError=!1,$scope.timeimg=(new Date).getTime()})},$scope.wrongType=function(){$scope.$apply(function(){$scope.typeError=!0})},$scope.bureaux=Bureaux.query(function(){if($rootScope.orderedBureaux=[],void 0!==$scope.prefs.bureauxOrder){for(var array=JSON.parse($scope.prefs.bureauxOrder),added=[],i=0;i<array.length;i++)for(var j=0;j<$scope.bureaux.length;j++)$scope.bureaux[j].id===array[i]&&($rootScope.orderedBureaux.push($scope.bureaux[j]),added[j]=!0);for(var k=0;k<$scope.bureaux.length;k++)added[k]||$rootScope.orderedBureaux.push($scope.bureaux[k])}else $rootScope.orderedBureaux=$scope.bureaux}),$scope.saveOrderPrefs=function(){for(var array=[],i=0;i<$rootScope.orderedBureaux.length;i++)array.push($rootScope.orderedBureaux[i].id);preferences.changeProperty(preferences.paths.BUREAUXORDER,JSON.stringify(array))},$scope.sort=[],$scope.$watch("columns.enabled",function(){if($scope.sort.length=0,!$scope.isEmptyOrNull($scope.columns.enabled))for(var i=0;i<$scope.columns.enabled.length;i++){var val=$scope.columns.enabled[i].value;
"actionDemandee"!==val&&"bureauName"!==val&&"banetteName"!==val&&$scope.sort.push($scope.columns.enabled[i])}})}function PolicyController($scope){}function StatsController($scope,Audits,Bureaux,$filter,Types){function getTime(timeInSeconds){var result="",rest=timeInSeconds;return Math.floor(rest/86400)>0&&(result+=Math.floor(rest/86400)+" jours",rest%=86400,Math.floor(rest/3600)>0)?(result+=" et ",result+=Math.floor(rest/3600)+" heures"):Math.floor(rest/3600)>0&&(result+=Math.floor(rest/3600)+" heures",rest%=3600,Math.floor(rest/60)>0)?(result+=" et ",result+=Math.floor(rest/60)+" minutes"):(Math.floor(rest/60)>0&&(result+=Math.floor(rest/60)+" minutes",rest%=60),rest>0&&(""!==result&&(result+=" et "),result+=rest+" secondes"),0===rest&&""===result?"Aucun traitement":result)}function getDateOfWeek(w,y){var d=1+7*(w-1);return new Date(y,0,d)}$scope.types=Types.query(),console.log($scope.types),$scope.data=[],$scope.moyennes=[],$scope.ecartTypes=[],$scope.cumul=1,$scope.datalength=0,$scope.gettingStats=!1;var fromTime=new Date;fromTime.setDate(1),$scope.listHandler={bureaux:[],searchResultSubList:[],page:0,maxSize:10,total:0,init:function(){this.search("")},search:function(toSearch){this.page=0,this.bureaux=$filter("filter")($scope.bureaux,{name:toSearch}),this.selectedBureau=this.bureaux.length>0?this.bureaux[0]:void 0,this.total=this.bureaux.length,this.getNewList()},pagine:function(toAddToPage){this.page+=toAddToPage,this.getNewList()},getNewList:function(){this.searchResultSubList=this.bureaux.slice(this.page*this.maxSize,this.page*this.maxSize+this.maxSize)},selectElement:function(b){this.selectedBureau=b,this.getNewList()}},Bureaux.query(function(listBureaux){$scope.bureaux=listBureaux,$scope.listHandler.init()}),$scope.opt={verbose:!0,options:{},fromTime:fromTime.getTime(),toTime:(new Date).getTime()};var optionToParam=function(bureau){var ret=angular.copy($scope.opt),option="";return bureau&&(option+="parapheur;"+bureau.id+"/"),$scope.opt.options.type&&(option+="typeMetier;"+$scope.opt.options.type+"/"),$scope.opt.options.sousType&&(option+="soustypeMetier;"+$scope.opt.options.sousType+"/"),ret.options=option,ret.cumul=$scope.cumul,ret};$scope.toHandle=0,$scope.hasStats=!1;var handleData=function(label,data,cumul){var dataset={type:"spline",axisYType:"secondary",name:label,showInLegend:!0,toolTipContent:"<span style='\"'color: {color};'\"'>{x}</span> {label}",dataPoints:[]};$scope.datalength=data.data.length;for(var i=0;i<data.data.length;i++){var date;if(4==cumul)date=new Date(data.data[i].key+"-01-01");else if(3==cumul)date=new Date(data.data[i].key+"-01");else if(2==cumul){var k=data.data[i].key;date=getDateOfWeek(k.split("-")[1],k.split("-")[0])}else date=new Date(data.data[i].key);dataset.dataPoints[i]={x:date,y:+data.data[i].value,label:getTime(+data.data[i].value)}}if($scope.bureaux.cumul){var alreadyExistingData=!1;for(i=0;i<$scope.data.length;i++)if($scope.data[i].name==dataset.name){for(var j=0;j<$scope.data[i].dataPoints.length;j++)$scope.data[i].dataPoints[j].y+=dataset.dataPoints[j].y;alreadyExistingData=!0}alreadyExistingData||$scope.data.push(dataset)}else $scope.data.push(dataset);$scope.toHandle--,$scope.gettingStats=!1};$scope.updateChartData=function(){$scope.currentBureauName=$scope.listHandler.selectedBureau.name,$scope.data=[],$scope.moyennes=[],$scope.ecartTypes=[],$scope.gettingStats=!0,$scope.savedCumul=$scope.cumul,updateChartData($scope.listHandler.selectedBureau),$scope.hasStats=!0};var updateChartData=function(bureau){Audits.tempsTraitement(optionToParam(bureau),function(result){var label=$filter("translate")("stats.handle_time");handleData(label,result,$scope.savedCumul)})}}function AvanceAdminController($scope,Connecteurs,Horodate,Attestation,Modeles,Metadonnees,Calques,SubCalques,modals,cache,$filter,Cachets,$http,configuration,PastellMailsec,PastellConnector){var testConfig=function(data,obj){if(obj.testConfig){obj.testConfig=!1;var toTest=angular.copy(obj.config);angular.extend(toTest,{cert:data.encodedFile,currentCertName:obj.config.name,tdt:obj.tdt}),Connecteurs.testConfig(toTest,function(response){angular.extend(obj.config,response),obj.changed=!1,obj.hasTestConfig=!0,obj.config.isPwdGoodForPkcs=obj.config.isPwdGoodForPkcs.substring(0,2)})}},connecteurObj={isInit:!1,testConfig:!1,hasTestConfig:!1,hasSaveConfig:!1,saveConfig:!1,changed:!1,isFileAdded:!1,typeError:!1,filename:void 0,config:{},oldConfig:{},init:function(){this.testConfig=!1,this.saveConfig=!1,this.hasTestConfig=!1,this.hasSaveConfig=!1,this.changed=!1,this.isFileAdded=!1,this.filename=void 0,this.isInit?angular.extend(this.config,this.oldConfig):this.get()},get:function(){var that=this;this.config=Connecteurs.get({type:this.type,tdt:this.tdt},function(){that.isInit=!0,angular.extend(that.oldConfig,that.config)})},set:function(data){this.hasTestConfig=!1;var that=this;this.saveConfig&&(this.saveConfig=!1,this.config.listeLogins&&this.config.listeLogins.length<2&&(this.config.userlogin="",this.config.userpassword=""),angular.extend(this.config,{cert:data.encodedFile,name:this.filename,tdt:this.tdt,type:this.type}),angular.extend(this.oldConfig,this.config),Connecteurs.set(this.config,function(){that.changed=!1,that.hasSaveConfig=!0}))},test:function(data){this.hasSaveConfig=!1,testConfig(data,this)},infoChanged:function(){this.changed=!0,this.hasSaveConfig=!1,this.hasTestConfig=!1},wrongType:function(){var that=this;$scope.$apply(function(){that.typeError=!0})},enableModeTest:function(){this.testConfig=!0,this.isFileAdded||this.test({})},enableModeSave:function(){this.saveConfig=!0,this.isFileAdded||this.set({})},fileEncoded:function(data){var that=this;$scope.$apply(function(){that.test(data),that.set(data)})},certAdded:function(files){var that=this;$scope.$apply(function(){that.filename=files[files.length-1].name,that.changed=!0,that.isFileAdded=!0,that.typeError=!1})}};$scope.slowActes=angular.copy(connecteurObj),angular.extend($scope.slowActes,{tdt:"s2low",type:"actes",updateClassifications:function(){var that=this;this.updating=!0,that.updated=!1,this.classifications=Connecteurs.classifications(function(){that.updating=!1,that.updated=!0})}}),$scope.slowHelios=angular.copy(connecteurObj),angular.extend($scope.slowHelios,{tdt:"s2low",type:"helios"}),$scope.slowMailsec=angular.copy(connecteurObj),angular.extend($scope.slowMailsec,{tdt:"s2low",type:"mailsec"}),$scope.fastHelios=angular.copy(connecteurObj),angular.extend($scope.fastHelios,{tdt:"fast",type:"helios"}),$scope.srciHelios=angular.copy(connecteurObj),angular.extend($scope.srciHelios,{tdt:"srci",type:"helios"}),$scope.attestation={isInit:!1,config:{},oldConfig:{},isSaved:!1,init:function(){var that=this;this.isInit?angular.extend(this.config,this.oldConfig):this.config=Attestation.get(function(){that.isInit=!0,angular.extend(that.oldConfig,that.config)}),this.isSaved=!1},set:function(){var that=this;angular.extend(this.oldConfig,this.config),Attestation.set(this.config,function(){that.isSaved=!0})}},$scope.horodate={isInit:!1,config:{},oldConfig:{},init:function(){var that=this;this.isInit?angular.extend(this.config,this.oldConfig):this.config=Horodate.get(function(){that.isInit=!0,angular.extend(that.oldConfig,that.config)})},set:function(){angular.extend(this.oldConfig,this.config),Horodate.set(this.config)}},$scope.mail={type:"mail",isInit:!1,config:{},oldConfig:{},init:function(){var that=this;this.isInit?angular.extend(this.config,this.oldConfig):this.config=Connecteurs.get({type:this.type},function(){that.isInit=!0,angular.extend(that.oldConfig,that.config)})},set:function(){angular.extend(this.oldConfig,this.config);var toSave=angular.copy(this.config);angular.extend(toSave,{type:this.type}),Connecteurs.set(toSave)}},$scope.archiland={type:"archiland",isInit:!1,config:{},oldConfig:{},init:function(){var that=this;this.isInit?angular.extend(this.config,this.oldConfig):this.config=Connecteurs.get({type:this.type},function(){that.isInit=!0;for(var services="",i=0;i<that.config.services.length;i++)services+=that.config.services[i]+"\n";that.config.services=services,angular.extend(that.oldConfig,that.config)})},set:function(){angular.extend(this.oldConfig,this.config);var toSave=angular.copy(this.config);angular.extend(toSave,{type:this.type}),Connecteurs.set(toSave)}},$scope.modeles={hasReload:0,reloadName:"",isInit:!1,hasSaved:!1,list:[],current:{},init:function(){var that=this;this.hasReload=0,this.hasSaved=!1,this.current={},this.isInit||(this.list=Modeles.list(function(){that.isInit=!0}))},get:function(model){var that=this;this.hasSaved=!1,model.$get(function(){that.current=angular.copy(model)})},set:function(){var that=this;this.hasReload=0,this.current.$set(function(){that.hasSaved=!0})},reload:function(model){var that=this;model?model.$reload(function(){that.hasReload=1,that.reloadName=model.name,model.id===that.current.id&&that.get(model)}):Modeles.reload(function(){that.hasReload=2,that.hasSaved=!1})},getHeight:function(){return Math.max($(window).height()-112,400)}},$scope.meta={hasReload:!1,isInit:!1,hasSaved:!1,errorMessage:null,list:[],current:{},nature:[],init:function(){var that=this;this.hasReload=!1,this.hasSaved=!1,this.errorMessage=null,this.current={},this.nature=[{key:"Admin.Avance.Metadata.type_select",value:""},{key:"Admin.Avance.Metadata.text",value:"STRING"},{key:"Admin.Avance.Metadata.date",value:"DATE"},{key:"Admin.Avance.Metadata.integer",value:"INTEGER"},{key:"Admin.Avance.Metadata.double",value:"DOUBLE"},{key:"Admin.Avance.Metadata.boolean",value:"BOOLEAN"},{key:"Admin.Avance.Metadata.url",value:"URL"}],this.isInit||cache.metadonnees.list(!0).then(function(list){that.isInit=!0,that.list=list})},select:function(m){this.hasSaved=!1,this.errorMessage=null,this.current=angular.copy(m),this.current.oldValues=void 0===this.current.values?[]:this.current.values,this.current.oldname=this.current.name},reload:function(){var that=this;Metadonnees.reload(function(){that.isInit=!1,cache.metadonnees.forceReload(),that.init()})},remove:function(m){var that=this;modals.launch("SimpleConfirmation",{title:$filter("translate")("Admin.Avance.Metadata.mod_del_title")+" "+m.name,message:$filter("translate")("Admin.Avance.Metadata.mod_del_confirm"),ctrl:BaseController},function(){for(var i=0;i<that.list.length;i++)if(that.list[i].id===m.id){that.list.splice(i,1);break}m.$remove(),that.init()})},create:function(){this.hasSaved=!1,this.errorMessage=null,this.current=new Metadonnees({isNew:!0,oldValues:[],values:[],hasValues:!1,deletable:!0,isAlphaOrdered:!0})},switchValues:function(ev){this.current.values=ev.target.checked?this.current.oldValues:void 0},addValue:function(){this.current.values.push({value:"",deletable:!0})},deleteValue:function(index){this.current.values.splice(index,1)},save:function(){var that=this;if(this.current.isAlphaOrdered&&(this.current.values=$filter("orderBy")(this.current.values,"value")),this.current.isNew)this.current.isNew=!1,this.current.$save(function(){that.errorMessage=null,that.hasSaved=!0,cache.metadonnees.forceReload()},function(error){that.errorMessage=that.generateErrorMessage(error)}),this.list.push(angular.copy(this.current));else{this.current.$update(function(){that.errorMessage=null,that.hasSaved=!0,cache.metadonnees.forceReload()},function(error){that.errorMessage=that.generateErrorMessage(error)});for(var i=0;i<this.list.length;i++)this.list[i].id===this.current.id&&(this.list[i]=angular.copy(this.current))}},idExists:function(){for(var i=0;i<this.list.length;i++)if(this.list[i].id.toLowerCase()===this.current.id.toLowerCase())return this.errorMessage=$filter("translate")("Admin.Avance.Metadata.same_name_error"),!0;return this.errorMessage=void 0,!1},generateErrorMessage:function(error){var res=$filter("translate")("Admin.Avance.Metadata.save_error");return error.data.message&&(res+=" : "+JSON.stringify(error.data.message)),res}},$scope.calques={isInit:!1,list:[],current:{},currentSub:{},filename:"",isFileAdded:!1,selectOptions:{},editComment:!1,init:function(){var that=this;this.current={},this.currentSub={},this.isInit||cache.calques.list().then(function(list){that.list=list,that.isInit=!0}),void 0===this.metadonnees&&(this.metadonnees=Metadonnees.list({asAdmin:!0},function(){that.buildSelectList()}))},create:function(){var that=this;modals.launch("SimpleInput",{title:$filter("translate")("Admin.Avance.Calque.mod_create_title"),message:$filter("translate")("Admin.Avance.Calque.mod_create_msg"),ctrl:InputController},function(ret){var calque=new Calques;angular.extend(calque,{name:ret.value,signature:[],image:[],commentaire:[],metadata:[]}),calque.$save(function(){that.list.push(calque),that.current=angular.copy(calque)})})},select:function(calque){calque.id!==this.current.id&&(this.current=calque,this.currentSub={},this.current.signature=SubCalques.list({type:"signature",idCalque:this.current.id}),this.current.image=SubCalques.list({type:"image",idCalque:this.current.id}),this.current.commentaire=SubCalques.list({type:"commentaire",idCalque:this.current.id}),this.current.metadata=SubCalques.list({type:"metadata",idCalque:this.current.id}))},buildSelectList:function(){for(var that=this,options={},i=0;i<this.metadonnees.length;i++)options["cu:"+that.metadonnees[i].id]=that.metadonnees[i].name;options["cm:title"]=$filter("translate")("Admin.Avance.Calque.meta_title"),options["ph:typeMetier"]=$filter("translate")("Admin.Avance.Calque.meta_type"),options["ph:soustypeMetier"]=$filter("translate")("Admin.Avance.Calque.meta_sub"),options["ph:dateValidation"]=$filter("translate")("Admin.Avance.Calque.meta_tdt"),options["SIGNATURE|ph:signataire"]=$filter("translate")("Admin.Avance.Calque.meta_name_sig"),options["SIGNATURE|ph:dateValidation"]=$filter("translate")("Admin.Avance.Calque.meta_date_sig"),options["VISA|ph:signataire"]=$filter("translate")("Admin.Avance.Calque.meta_name_visa"),options["VISA|ph:dateValidation"]=$filter("translate")("Admin.Avance.Calque.meta_date_visa"),options["VISA|OR;ph:delegue;ph:passe-par|cm:title"]=$filter("translate")("Admin.Avance.Calque.meta_bureau_visa"),options["VISA|ph:validator"]=$filter("translate")("Admin.Avance.Calque.meta_role_visa"),options["SHA256|ph:signature-electronique"]=$filter("translate")("Admin.Avance.Calque.meta_sig_hash"),options["SIGNATURE|OR;ph:delegue;ph:passe-par|cm:title"]=$filter("translate")("Admin.Avance.Calque.meta_bureau"),options["SIGNATURE|ph:validator"]=$filter("translate")("Admin.Avance.Calque.meta_role"),options["DELEGATION|SIGNATURE|IFF;ph:delegue;ph:passe-par|cm:title"]=$filter("translate")("Admin.Avance.Calque.meta_deleg"),this.selectOptions=options},newSub:function(type){this.currentSub=new SubCalques,this.currentSub.idCalque=this.current.id,this.currentSub.type=type,"metadata"===type&&void 0===this.metadonnees&&(this.metadonnees=Metadonnees.list({asAdmin:!0},function(result){console.log(result),that.buildSelectList()})),"signature"===type&&(this.currentSub.rang="0"),this.currentSub.postSignature=!1},metaReplace:function(input){return input.replace("cu:","").replace("{http://www.adullact.org/parapheur/metadata/1.0}","")},deleteSub:function(sub,type){var that=this,title=$filter("translate")("Admin.Avance.Calque.mod_elem_"+type);modals.launch("SimpleConfirmation",{title:$filter("translate")("Admin.Avance.Calque.mod_delel_title")+" "+title,message:$filter("translate")("Admin.Avance.Calque.mod_delel_confirm"),ctrl:BaseController},function(){for(var i=0;i<that.current[type].length;i++)if(that.current[type][i].id===sub.id){that.current[type].splice(i,1);break}sub.$remove()})},saveSub:function(type){var that=this;this.currentSub.$save(function(){that.current[type].push(that.currentSub),that.currentSub={}})},fileAdded:function(files){var that=this;$scope.$apply(function(){that.currentSub.nomImage=files[files.length-1].name,that.isFileAdded=!0})},fileEncoded:function(data){var that=this;$scope.$apply(function(){that.currentSub.fichierImage=data.encodedFile,that.saveSub("image")})},wrongType:function(ext){},remove:function(c){var that=this;modals.launch("SimpleConfirmation",{title:$filter("translate")("Admin.Avance.Calque.mod_del_title")+" "+c.name,message:$filter("translate")("Admin.Avance.Calque.mod_del_confirm"),ctrl:BaseController},function(){for(var i=0;i<that.list.length;i++)if(that.list[i].id===c.id){that.list.splice(i,1);break}c.$remove(),that.init()})}},$scope.cachet={list:[],mailForWarn:null,mailForWarnStatus:0,current:null,editingCert:null,isInit:!1,isFileAdded:!1,wrongExt:!1,typingTimer:void 0,errorCode:void 0,timestamp:Date.now(),init:function(){var that=this;this.current=null,this.errorCode=void 0,this.wrongExt=!1,this.isInit||(Cachets.getMailforwarn(function(data){that.mailForWarn=data.mailForWarn}),that.list=Cachets.list(function(){that.isInit=!0}))},saveMailForWarn:function(){var that=this;this.mailForWarnStatus=1,Cachets.setMailforwarn({mailForWarn:this.mailForWarn},function(data){that.mailForWarnStatus=2})},create:function(){this.current=new Cachets,this.current.isNew=!0,this.current.title="Nouveau certificat",this.current.editing=!0,this.errorCode=void 0},fileAdded:function(files){console.log(files);var that=this;$scope.$apply(function(){var reader=new FileReader;reader.onloadend=function(evt){evt.target.readyState===FileReader.DONE&&$scope.$apply(function(){that.current.certificate=evt.target.result.replace(/data:.*;base64,/,""),that.stopTyping()})},reader.readAsDataURL(files[0]),that.current.originalName=files[files.length-1].name,that.isFileAdded=!0,that.wrongExt=!1})},wrongType:function(){var that=this;$scope.$apply(function(){that.wrongExt=!0})},stopTyping:function(){if(this.current.description=void 0,this.current.certificate&&this.current.password){var that=this;that.errorCode=void 0,clearTimeout(that.typingTimer),that.typingTimer=setTimeout(that.loadInfos,500)}},loadInfos:function(){var that=$scope.cachet;that.current.loadChange=!0,that.current.password&&that.current.certificate&&$http({method:"POST",url:configuration.context+"/certInfo",data:{password:that.current.password,certificate:that.current.certificate}}).then(function(data){that.current.description=data.data,that.current.loadChange=!1})["catch"](function(error){that.errorCode=error.status,that.current.loadChange=!1})},save:function(){var that=this;this.current.$save().then(function(){that.current.isNew?(delete that.current.password,delete that.current.certificate,delete that.current.imageName,that.current.isNew=!1,that.list.push(that.current),that.current=null,that.errorCode=void 0):(that.current.editing=!1,angular.copy(that.current,that.editingCert))})["catch"](function(code){that.errorCode=code.status})},remove:function(cert){var that=this;modals.launch("SimpleConfirmation",{title:$filter("translate")("Admin.Avance.Cachet.mod_del_title")+" "+cert.title,message:$filter("translate")("Admin.Avance.Cachet.mod_del_confirm"),ctrl:BaseController},function(){for(var i=0;i<that.list.length;i++)if(that.list[i].id===cert.id){that.list.splice(i,1);break}cert.$remove(),that.init()})},select:function(cert){this.editingCert=cert,this.current=angular.copy(cert),this.current.editing=!1},modify:function(){this.oldcert=angular.copy(this.current),this.current.editing=!0},cancel:function(){angular.copy(this.oldcert,this.current)},fileNameChanged:function(elm){var that=this;$scope.$apply(function(){var reader=new FileReader;reader.onloadend=function(evt){evt.target.readyState===FileReader.DONE&&$scope.$apply(function(){that.current.image=evt.target.result.split(",")[1]})},reader.readAsDataURL(elm.files[0]),that.current.imageName=elm.files[0].name})}},$scope.pastellMailsec={list:[],current:null,isInit:!1,typingTimer:void 0,errorCode:void 0,plugloading:!1,entities:[],types:[],selectedId:void 0,init:function(){var that=this;this.current=null,this.errorCode=void 0,this.isInit||(this.list=PastellConnector.list(function(){that.isInit=!0}))},plug:function(){var that=this;that.errorCode=void 0,this.plugloading=!0,PastellMailsec.listEntities(this.current,function(result){that.entities=result,that.current.connected=!0,that.plugloading=!1},function(error){that.errorCode=error.status,that.plugloading=!1})},unplug:function(){this.entities=[],delete this.current.entity,this.current.connected=!1},entitychanged:function(){},create:function(){this.current=new PastellMailsec,this.current.isNew=!0,this.current.title="Nouveau connecteur",this.current.editing=!0,this.current.connected=!1,this.current.type="mailsec",this.errorCode=void 0,this.selectedId=void 0,this.selected=void 0},save:function(){var that=this;void 0!==this.selectedId&&(this.current.id=this.selectedId);var found=this.list.find(function(el){return el.title===that.current.title&&+el.serverId!==+that.current.id});found?this.exists=!0:this.current.$save().then(function(){if(delete that.current.password,that.current.isNew){var connector=new PastellConnector;that.current.serverId=that.current.id,connector.serverId=that.current.id,connector.title=that.current.title,connector.$save().then(function(){that.current.isNew&&that.list.push(connector),that.current.isNew=!1,that.current=null})}else that.selected.title=that.current.title,that.selected.$save(),that.current.isNew=!1,that.current=null;that.errorCode=void 0,that.selected=void 0})["catch"](function(code){that.errorCode=code.status})},remove:function(cert){var that=this;modals.launch("SimpleConfirmation",{title:$filter("translate")("Admin.Avance.PastellMailsec.mod_del_title")+" "+cert.title,message:$filter("translate")("Admin.Avance.PastellMailsec.mod_del_confirm"),ctrl:BaseController},function(){for(var i=0;i<that.list.length;i++)if(that.list[i].id===cert.id){that.list.splice(i,1);break}PastellMailsec.remove({id:cert.serverId}),cert.$remove(),that.init()})},select:function(connector){var that=this;this.selected=connector,PastellMailsec.get({id:connector.serverId},function(result){that.current=result,that.current.title=connector.title,PastellMailsec.listEntities(that.current,function(result){that.entities=result,that.current.connected=!0,that.plugloading=!1},function(error){that.errorCode=error.status,that.plugloading=!1}),that.selectedId=that.current.id,delete that.current.id})},modify:function(){this.oldcert=angular.copy(this.current),delete this.current.originalName,this.current.editing=!0},cancel:function(){angular.copy(this.oldcert,this.current)}}}function BureauxAdminController($scope,Bureaux,Delegations,utils,$modal,modals,$filter,cache){var list=[];$scope.bureaux={selected:{},edited:{},delegation:{selected:{}},foundUsers:[],ordered:[],editedOrdered:[],metadatas:[],list:[],search:"",isSearching:!1,init:function(){var that=this;this.getList(),cache.metadonnees.list(!0).then(function(list){that.metadatas=list})},getList:function(){var self=this;self.isSearching=!0,cache.bureaux.list().then(function(bureaux){list=bureaux,self.handleList(bureaux),self.isSearching=!1})},handleList:function(bureaux){var self=this,getParentProfondeur=function(value){var bureauParent=bureaux.filter(function(elm){return elm.id===value.hierarchie});return 0!==bureauParent.length?getParentProfondeur(bureauParent[0])+1:0};angular.forEach(bureaux,function(value){delete value.child,value.selected=void 0,value.hierarchie?value.profondeur=getParentProfondeur(value):value.profondeur=0}),self.list=$filter("orderBy")(bureaux,"title",!1),self.ordered=utils.reorderBureaux(self.list)},queryForTable:function(obj){return $scope.bureaux.bureauFilter(obj.branch,$scope.bureaux.search)},bureauFilter:function(obj,str){if(null!=str){for(var s=str.toLowerCase(),hasPropWithSearch=!1,hasSecWithSearch=!1,i=0;i<obj.proprietaires.length;i++){var prop=obj.proprietaires[i];hasPropWithSearch=hasPropWithSearch||~prop.username.toLowerCase().indexOf(s)||prop.firstName&&~prop.firstName.toLowerCase().indexOf(s)||prop.lastName&&~prop.lastName.toLowerCase().indexOf(s)}for(var j=0;j<obj.secretaires.length;j++){var sec=obj.secretaires[j];hasSecWithSearch=hasSecWithSearch||~sec.username.toLowerCase().indexOf(s)||sec.firstName&&~sec.firstName.toLowerCase().indexOf(s)||sec.lastName&&~sec.lastName.toLowerCase().indexOf(s)}return~obj.name.toLowerCase().indexOf(s)||~obj.title.toLowerCase().indexOf(s)||~obj.description.toLowerCase().indexOf(s)||hasSecWithSearch||hasPropWithSearch}return!0},findWithId:function(id){for(var i=0;i<this.list.length;i++)if(this.list[i].id===id)return this.list[i]},expandAll:function(){$scope.$broadcast("expandAll")},reduceAll:function(){$scope.$broadcast("reduceAll")},select:function(bureau){this.selected=bureau},launchModal:function(title,type,success){var self=this,modalInstance=$modal.open({templateUrl:"partials/modals/bureauxModal.html",controller:EditBureauCtrl,resolve:{type:function(){return type},titleModal:function(){return title},selfobj:function(){return self}}});modalInstance.result.then(function(result){"function"==typeof success&&success(result)},function(){self.selected.selected=!1,self.selected=void 0})},edit:function(){this.launchModal("Admin.Bureaux.BuMod_Edit",EDIT)},remove:function(){var self=this;modals.launch("SimpleConfirmation",{title:"Suppression du bureau "+self.selected.title,message:"Etes-vous sûr de vouloir supprimer le bureau "+self.selected.title+" ? (Attention, ce bureau ne sera pas supprimé mais rendu invisible)",ctrl:BaseController},function(){Bureaux.remove({id:self.selected.id},function(){self.getList()}),self.selected={}})},create:function(){this.selected&&(this.selected.selected=!1),this.selected=new Bureaux,this.selected["delegations-possibles"]=[],this.selected["metadatas-visibility"]=[],this.selected.proprietaires=[],this.selected.secretaires=[],this.selected.description="",this.selected.profondeur=0,this.launchModal("Admin.Bureaux.BuMod_Create",NEW)},update:function(editedBureau,selectedDelegation,success){var self=this,id=this.selected.id;if(id){var updated=utils.diff(this.selected,editedBureau),updateBureau=function(){updated?(delete updated.child,Bureaux.update({id:self.selected.id},updated,function(){success()})):success()};if(selectedDelegation.willItLoop)updateBureau();else{Delegations.update({id:editedBureau.id},selectedDelegation,function(){updateBureau()});var bureauCible=self.findWithId(selectedDelegation.idCible);selectedDelegation.titreCible=bureauCible?bureauCible.name:void 0,editedBureau.delegation=selectedDelegation}angular.extend(this.selected,editedBureau),self.handleList(list)}else editedBureau=new Bureaux(editedBureau),editedBureau.$save(function(){Delegations.update({id:editedBureau.id},selectedDelegation,function(){success()});var bureauCible=self.findWithId(selectedDelegation.idCible);selectedDelegation.titreCible=bureauCible?bureauCible.name:void 0,editedBureau.delegation=selectedDelegation,angular.extend(self.selected,editedBureau),list.push(editedBureau),self.handleList(list)})}},$scope.bureaux.init()}function CircuitsAdminController($scope,Circuits,modals,$filter,cache){$scope.maxSize=25,$scope.selectedCircuit={},$scope.selectedEtape={},$scope.saved=!1,$scope.filterBureau="",$scope.page=0,$scope.total=0;var selectName,selectId,currentSearch,pagedCircuits=[];$scope.searchCircuit=function(search){pagedCircuits=[],$scope.page=0,currentSearch=search,Circuits.list({search:"*"+(currentSearch||"")+"*",maxSize:$scope.maxSize,page:$scope.page},function(result){$scope.total=result.length?result[0].total:0,pagedCircuits[$scope.page]=result,$scope.circuits=result})},$scope.searchCircuit(""),$scope.pagine=function(toAddToPage){$scope.page+=toAddToPage;var page=$scope.page;pagedCircuits[$scope.page]?$scope.circuits=pagedCircuits[$scope.page]:Circuits.list({search:"*"+(currentSearch||"")+"*",maxSize:$scope.maxSize,page:$scope.page},function(result){pagedCircuits[page]=result,$scope.circuits=result})};var reloadCurrentPage=function(){pagedCircuits=[],Circuits.list({search:"*"+(currentSearch||"")+"*",maxSize:$scope.maxSize,page:$scope.page},function(result){0===result.length&&0!=$scope.page?($scope.page--,reloadCurrentPage()):($scope.total=result.length?result[0].total:0,pagedCircuits[$scope.page]=result),$scope.circuits=result})};$scope.hasMetadataMandatory=function(circuit){for(var hasMetadataMandatory=!1,i=0;i<circuit.etapes.length;i++)if(circuit.etapes[i].listeMetadatas.length>0){hasMetadataMandatory=!0;break}return hasMetadataMandatory},$scope.newCircuit=function(circuit){$scope.saved=!1,$scope.selectedEtape={},delete $scope.selectedEtape.index,$scope.selectedCircuit={aclGroupes:[],aclParapheurs:[],editable:!0,isUsed:!1,etapes:[{actionDemandee:"ARCHIVAGE",listeNotification:[],transition:"EMETTEUR"}],isPublic:!1,name:""},circuit&&(angular.extend($scope.selectedCircuit,angular.copy(circuit)),$scope.selectedCircuit.id=void 0,$scope.selectedCircuit.name=circuit.name+" - copie",$scope.selectedCircuit.isCopy=!0,$scope.selectedCircuit.isUsed=!1),$scope.selectedCircuit.editable=!0,$scope.baseName=$scope.selectedCircuit.name},$scope.deleteCircuit=function(circuit){modals.launch("SimpleConfirmation",{title:$filter("translate")("Admin.Circuits.Wo_Delete")+" "+circuit.name,message:$filter("translate")("Admin.Circuits.Wo_Confirm")+" "+circuit.name+" ?",ctrl:BaseController},function(){circuit.$delete(function(){reloadCurrentPage()});for(var i=0;i<$scope.circuits.length;i++)if($scope.circuits[i].id===circuit.id){$scope.circuits.splice(i,1);break}$scope.selectedCircuit={}})},$scope.selectCircuit=function(circuit){$scope.filterBureau="",$scope.saved=!1,$scope.baseName=circuit.name,$scope.selectedEtape={},delete $scope.selectedEtape.index,selectName=circuit.name,selectId=circuit.id,$scope.selectedCircuit=angular.copy(circuit),"ARCHIVAGE"!==$scope.selectedCircuit.etapes[$scope.selectedCircuit.etapes.length-1].actionDemandee&&$scope.selectedCircuit.etapes.push({actionDemandee:"ARCHIVAGE",listeNotification:[],transition:"EMETTEUR"})},$scope.selectEtape=function(etape,index){$scope.filterBureau="",$scope.saved=!1,$scope.selectedEtape=etape,$scope.selectedEtape.index=index,$scope.selectedTransition=etape.parapheur?etape.parapheur:etape.transition},$scope.deleteEtape=function(index){$scope.saved=!1,index?$scope.selectedCircuit.etapes.splice(index,1):$scope.selectedCircuit.etapes.splice($scope.selectedEtape.index,1),$scope.selectedEtape={}},$scope.sortableOpts={placeholder:"ui-state-highlight",update:function(event,ui){$scope.selectedEtape.index==ui.item.sortable.index&&($scope.selectedEtape.index=ui.item.sortable.dropindex)}},$scope.addEtape=function(index){$scope.saved=!1,$scope.selectedEtape={transition:"EMETTEUR",index:index,actionDemandee:"VISA",listeNotification:[],listeMetadatas:[]},$scope.selectedCircuit.etapes.splice(index,0,$scope.selectedEtape)},$scope.changeTransitionEtape=function(){if("EMETTEUR"!==$scope.selectedTransition&&"CHEF_DE"!==$scope.selectedTransition){$scope.selectedEtape.transition="PARAPHEUR",$scope.selectedEtape.parapheur=$scope.selectedTransition;for(var found=!1,i=0;!found&&i<$scope.listHandler.list.length;)$scope.listHandler.list[i].id===$scope.selectedEtape.parapheur&&($scope.selectedEtape.parapheurName=$scope.listHandler.list[i].title,found=!0),i++}else $scope.selectedEtape.transition=$scope.selectedTransition,delete $scope.selectedEtape.parapheur,delete $scope.selectedEtape.parapheurName},$scope.saveCircuit=function(){$scope.alreadyExist=!1,$scope.selectedCircuit=new Circuits($scope.selectedCircuit),$scope.selectedCircuit.id?$scope.selectedCircuit.$update(function(){for(var i=0;i<$scope.circuits.length;i++)$scope.circuits[i].name===$scope.selectedCircuit.name&&selectName!==$scope.selectedCircuit.name&&$scope.circuits.splice(i,1),$scope.circuits[i].id===selectId&&($scope.circuits[i]=angular.copy($scope.selectedCircuit)),$scope.saved=!0,$scope.baseName=$scope.selectedCircuit.name;reloadCurrentPage()}):Circuits.list({search:$scope.selectedCircuit.name,maxSize:10,page:0},function(result){for(var exist=!1,i=0;i<result.length;i++)if(result[i].name.toLowerCase()===$scope.selectedCircuit.name.toLowerCase()){exist=!0;break}exist?$scope.alreadyExist=!0:$scope.selectedCircuit.$save(function(){for(var found=!1,i=0;i<$scope.circuits.length;i++)if($scope.circuits[i].name===$scope.selectedCircuit.name){
$scope.circuits[i]=angular.copy($scope.selectedCircuit),found=!0;break}found||$scope.circuits.push(angular.copy($scope.selectedCircuit)),selectName=$scope.selectedCircuit.name,selectId=$scope.selectedCircuit.id,$scope.saved=!0,$scope.baseName=$scope.selectedCircuit.name,reloadCurrentPage()})})},$scope.listMetaHandler={list:[],init:function(){var that=this;cache.metadonnees.list(!0).then(function(metaList){that.list=$filter("orderBy")(metaList,"name",!1)})},getNameWithId:function(id){return this.list.find(function(element){return element.id===id})}},$scope.listHandler={list:[],bureaux:[],page:0,maxSize:10,total:0,init:function(){var that=this;cache.bureaux.list().then(function(bureaux){that.list=$filter("orderBy")(bureaux,"title",!1),that.search("")})},search:function(toSearch){this.page=0,this.bureaux=$filter("filter")(this.list,toSearch),this.total=this.bureaux.length},pagine:function(toAddToPage){this.page+=toAddToPage},selectEtape:function(b){b.id?($scope.selectedEtape.transition="PARAPHEUR",$scope.selectedEtape.parapheur=b.id,$scope.selectedEtape.parapheurName=b.title):($scope.selectedEtape.transition=b,delete $scope.selectedEtape.parapheur,delete $scope.selectedEtape.parapheurName)}},$scope.listHandler.init(),$scope.listMetaHandler.init()}function DossiersAdminController($scope,$filter,modals,Dossiers,ngTableParams,usSpinnerService,cache){cache.bureaux.list().then(function(bureaux){$scope.bureaux=bureaux}),cache.types.list().then(function(list){$scope.types=list}),$scope.dossiersShowed={},$scope.opt={bureau:void 0,type:"",sousType:"",title:"",showOnlyCurrent:!1,showOnlyLate:!1},$scope.noneOpt=angular.copy($scope.opt),$scope.hasFoundFolder=!0,$scope.buttonsDisabled=!1,$scope.hasSearch=!1,$scope.getDossiers=function(opt){$scope.buttonsDisabled=!0,$scope.hasFoundFolder=!0,$scope.hasSearch=!0;var localOpt=angular.copy(opt);localOpt&&localOpt.bureau&&(localOpt.bureau=localOpt.bureau.id),usSpinnerService.spin("spinnerDossiers"),$scope.dossiers=Dossiers.listAsAdmin(localOpt,function(){usSpinnerService.stop("spinnerDossiers"),buildTable(),$scope.hasFoundFolder=$scope.dossiers.length>0,$scope.buttonsDisabled=!1})};var buildTable=function(){$scope.tableParams?$scope.tableParams.reload():$scope.tableParams=new ngTableParams({page:1,count:10},{total:0,getData:function($defer,params){var orderedData=params.sorting()?$filter("orderBy")($scope.dossiers,params.orderBy()):$scope.dossiers;params.total($scope.dossiers.length),$defer.resolve(orderedData.slice((params.page()-1)*params.count(),params.page()*params.count()))}})};$scope.viewJournal=function(dossier){modals.launch("JOURNAL",function(){return[dossier]})},$scope.viewProperties=function(dossier){modals.launch("PROPERTIES",function(){return[dossier]})},$scope.confirmDelete=function(dossier){modals.launch("SimpleConfirmation",{title:$filter("translate")("Admin.Dossiers.Mod_Del")+" "+dossier.title,message:$filter("translate")("Admin.Dossiers.Mod_Del_Mess")+" "+dossier.title+" ?",ctrl:BaseController},function(){var id=dossier.id;dossier.$destroy();for(var i=0;i<$scope.dossiers.length;i++){var d=$scope.dossiers[i];d.id===id&&$scope.dossiers.splice(i,1)}buildTable()})},$scope.unlock=function(dossier){modals.launch("SimpleConfirmation",{title:$filter("translate")("Admin.Dossiers.Mod_Unlock")+" "+dossier.title,message:$filter("translate")("Admin.Dossiers.Mod_Unlock_Mess")+" "+dossier.title+" ?",ctrl:BaseController},function(){var id=dossier.id;dossier.$unlock();for(var i=0;i<$scope.dossiers.length;i++){var d=$scope.dossiers[i];d.id===id&&($scope.dossiers[i].locked=!1)}buildTable()})},$scope.confirmTransfert=function(dossier){modals.launch("MOVE",function(){return[dossier]})},$scope.getStateName=function(banette){var r="";switch(banette){case"Dossiers en fin de circuit":r=$filter("translate")("Admin.Dossiers.State_App");break;case"Dossiers à relire - annoter":r=$filter("translate")("Admin.Dossiers.State_Sec");break;case"Dossiers à traiter":r=$filter("translate")("Admin.Dossiers.State_Cur");break;case"Dossiers à transmettre":r=$filter("translate")("Admin.Dossiers.State_Prep");break;case"Dossiers retournés":r=$filter("translate")("Admin.Dossiers.State_Rej")}return r},$scope.isEnCours=function(banette){return"Dossiers en fin de circuit"!==banette&&"Dossiers retournés"!==banette},$scope.isUnlockable=function(dossier){var timeout=+$scope.properties["parapheur.ihm.admin.dossier.locked.notify"]||600;return Math.floor((+new Date-dossier.modified)/1e3)>timeout&&dossier.locked}}function GroupesAdminController($scope,Groupes,utils,modals,usSpinnerService,cache,$filter){$scope.unorderedGroupes=[],$scope.saved=!1,$scope.hasSearchUser=!1,$scope.groupes=[];var baseUsers=[],usersToAdd=[],usersToDelete=[],initGroupes=function(){cache.groupes.list().then(function(list){$scope.unorderedGroupes=list,angular.forEach($scope.unorderedGroupes,function(value){delete value.child,value.selected=void 0}),$scope.groupes=utils.reorderGroupes(angular.copy($scope.unorderedGroupes))})},groupsShowed=[];$scope.$watch("search",function(){groupsShowed=[]},!0),$scope.queryGroups=function(obj){return null!=$scope.search?~obj.branch.shortName.toLowerCase().indexOf($scope.search.toLowerCase())?(groupsShowed.push(obj.branch.shortName.toLowerCase()),!0):obj.branch.parent&&~groupsShowed.indexOf(obj.branch.parent.toLowerCase())?(groupsShowed.push(obj.branch.shortName.toLowerCase()),!0):!1:!0},initGroupes(),$scope.selectGroup=function(group){$scope.hasSearchUser=!1,$scope.saved=!1,$scope.selectedGroup=new Groupes(angular.copy(group)),$scope.selectedGroup.$getMembers(function(data){baseUsers=[],angular.forEach(data.users,function(value,key){baseUsers.push(value.shortName)})}),usersToAdd=[],usersToDelete=[],$scope.listUsersHandler.getNewList()},$scope.deleteGroup=function(group){modals.launch("SimpleConfirmation",{title:$filter("translate")("Admin.Groupes.ModGr_Title")+" "+group.shortName,message:$filter("translate")("Admin.Groupes.ModGr_Msg")+" "+group.shortName+" ?\n\n"+$filter("translate")("Admin.Groupes.Gr_Del_Info")+".",ctrl:BaseController},function(){$scope.selectedGroup=void 0,group.$delete(function(){for(var i=0;i<$scope.unorderedGroupes.length;i++)$scope.unorderedGroupes[i].id===group.id&&($scope.unorderedGroupes.splice(i,1),$scope.groupes=utils.reorderGroupes(angular.copy($scope.unorderedGroupes)))})})},$scope.userAlreadyInGroup=function(item){var toReturn=!0;return $scope.selectedGroup?(angular.forEach($scope.selectedGroup.users,function(value,key){value.shortName===item.username&&(toReturn=!1)}),toReturn):!0},$scope.addUserToGroup=function(user){~baseUsers.indexOf(user.username)||usersToAdd.push(user.username),~usersToDelete.indexOf(user.username)&&usersToDelete.splice(usersToDelete.indexOf(user.username),1),$scope.selectedGroup.users.push({shortName:user.username,fullName:user.firstName+" "+user.lastName}),$scope.listUsersHandler.getNewList()},$scope.removeUserFromGroup=function(index){var user=$scope.selectedGroup.users[index];("ALFRESCO_ADMINISTRATORS"!==$scope.selectedGroup.shortName||"admin"!==user.shortName.split("@")[0])&&(~baseUsers.indexOf(user.shortName)&&usersToDelete.push(user.shortName),~usersToAdd.indexOf(user.shortName)&&usersToAdd.splice(usersToAdd.indexOf(user.shortName),1),$scope.selectedGroup.users.splice(index,1)),$scope.listUsersHandler.getNewList()};var toUpdate,checkSaved=function(updated){toUpdate+=updated?-1:0,0===toUpdate&&($scope.saved=!0,$scope.saving=!1,usSpinnerService.stop("spinnerGroups"))},updateMembers=function(){toUpdate=usersToAdd.length+usersToDelete.length,checkSaved(!1);for(var i=0;i<usersToAdd.length;i++)$scope.selectedGroup.userToChange=usersToAdd[i],$scope.selectedGroup.$addUser(function(){checkSaved(!0)});for(var j=0;j<usersToDelete.length;j++)$scope.selectedGroup.userToChange=usersToDelete[j],$scope.selectedGroup.$removeUser(function(){checkSaved(!0)});$scope.selectedGroup.userToChange=void 0};$scope.saveGroup=function(){$scope.saving=!0,$scope.saved=!1,usSpinnerService.spin("spinnerGroups"),$scope.selectedGroup.isNew?($scope.selectedGroup=new Groupes($scope.selectedGroup),$scope.selectedGroup.$save(function(){updateMembers(),$scope.selectedGroup.isNew=!1,$scope.unorderedGroupes.push($scope.selectedGroup),$scope.groupes=utils.reorderGroupes(angular.copy($scope.unorderedGroupes))})):updateMembers()},$scope.createGroup=function(){$scope.hasSearchUser=!1,$scope.saved=!1,baseUsers=[],usersToAdd=[],usersToDelete=[],$scope.saved=!1,$scope.selectedGroup={shortName:"",isNew:!0,users:[]}};var users=[];$scope.listUsersHandler={users:[],subList:[],page:0,maxSize:10,total:0,init:function(){this.search("")},search:function(toSearch){this.subList=[],this.page=0,this.users=$filter("orderBy")($filter("filter")(users,toSearch),"lastName"),this.total=this.users.length,this.getNewList()},pagine:function(toAddToPage){this.page+=toAddToPage,this.getNewList()},getNewList:function(){this.subList=this.users.slice(this.page*this.maxSize,this.page*this.maxSize+this.maxSize)}},cache.users.list().then(function(list){users=list,$scope.listUsersHandler.init()})}function InformationsAdminController($scope,$rootScope,$interval,$location,$http,$filter,configuration,Office,Tenants,Attestation,Xemelios,$modal){$scope.Math=window.Math,$scope.infos={},$scope.reload={},$scope.isTenant=""!==configuration.tenant&&void 0!=$rootScope.isMTEnabled&&1==$rootScope.isMTEnabled;var initReload=function(){$scope.reload={all:!1,properties:!1,errorProperties:!1,xemelios:!1,office:!1,errorOffice:!1}},loadInfos=function(success){$http({method:"GET",url:configuration.context+"/informations"}).then(function(data){$scope.infos=data.data,buildMemChart(data.data),buildDiskChart(data.data),checkXemeliosStatus(success),$http({method:"GET",url:configuration.context+"/proxy/alfresco/parapheur/utilisateurs/connected"}).then(function(data){$scope.infos.users=data.data}),Office.get(function(result){$scope.infos.office=result})}),Attestation.get(function(result){result.port=+result.port,$http({method:"POST",url:configuration.context+"/attestStatus",data:result}).then(function(response){$scope.infos.isASEnabled=response.data.isASEnabled})})};$scope.memChartData=[],$scope.diskChartData=[];var buildMemChart=function(data){$scope.memChartData.length=0,$scope.memChartData.push({y:Math.round(data.freeMem/1024/1024),name:$filter("translate")("Admin.Informations.Info_Free"),percent:Math.round(100*data.freeMem/data.maxMem)}),$scope.memChartData.push({y:Math.round((data.maxMem-data.freeMem)/1024/1024),name:$filter("translate")("Admin.Informations.Info_Occ"),percent:100-Math.round(100*data.freeMem/data.maxMem)})},buildDiskChart=function(data){$scope.diskChartData.length=0,$scope.diskChartData.push({y:Math.round(data.usableSpace/1024/1024/1024),name:$filter("translate")("Admin.Informations.Info_Free"),percent:Math.round(100*data.usableSpace/data.totalSpace)}),$scope.diskChartData.push({y:Math.round((data.totalSpace-data.usableSpace)/1024/1024/1024),name:$filter("translate")("Admin.Informations.Info_Occ"),percent:100-Math.round(100*data.usableSpace/data.totalSpace)})},xemeliosPid="",checkXemeliosStatus=function(success){Xemelios.get(function(response){angular.extend($scope.infos,response),$scope.reload.xemelios=!1,"function"==typeof success&&success()})};$scope.reloadProperties=function(success){initReload(),$http({method:"GET",url:configuration.context+"/reloadProperties"}).then(function(data){$scope.updateProperties(data.data),$scope.infos.isPropertiesFound=data.data.found,$scope.infos.isPropertiesFound?$scope.reload.properties=!0:$scope.reload.errorProperties=!0,"function"==typeof success&&success()})},$scope.reloadInfos=function(){initReload(),loadInfos(function(){var oldFound=$scope.infos.isPropertiesFound;$scope.reloadProperties(function(){$scope.reload.all=!0,$scope.reload.properties=oldFound?!1:$scope.infos.isPropertiesFound,$scope.reload.errorProperties=oldFound?!$scope.infos.isPropertiesFound:!1})})},$scope.restartOffice=function(){initReload(),Office.restart(function(data){data?$scope.reload.office=!0:$scope.reload.errorOffice=!0})},$scope.restartXemelios=function(){$scope.reload.xemelios=!0,Xemelios.status(function(pid){xemeliosPid=pid.status,Xemelios.restart(function(){var promiseInterval,newPid,stopCheck=function(){angular.isDefined(promiseInterval)&&($interval.cancel(promiseInterval),promiseInterval=void 0)};promiseInterval=$interval(function(){Xemelios.status(function(response){response.status&&response.status!==xemeliosPid&&(newPid===response.status?(xemeliosPid=newPid,checkXemeliosStatus(),stopCheck()):newPid=response.status)})},2e3)})})},$scope.launchHealthStatus=function(){$modal.open({templateUrl:"partials/modals/healthModal.html",controller:HealthController})},configuration.isAdmin?(void 0==$rootScope.isMTEnabled&&Tenants.isEnabled(function(data){$rootScope.isMTEnabled=data.mtEnabled,$scope.isTenant=1==$rootScope.isMTEnabled&&""!==configuration.tenant}),initReload(),loadInfos()):configuration.isAdminCircuits()&&!configuration.isAdminFonctionnel()?$location.path("/admin/circuits"):configuration.isAdminFonctionnel()?$location.path("/admin/bureaux"):$location.path("/bureaux")}function NodeBrowserAdminController($scope,$http,configuration){$scope.datatree={},$scope.rootPath=["/company/home"],$http({method:"GET",url:configuration.context+"/proxy/alfresco/slingshot/doclib/treenode/node/alfresco/company/home/?children=true&libraryRoot=alfresco://company/home&max=500"}).success(function(data){$scope.datatree=data,$scope.getNodeProperties(data.parent.nodeRef)}),$scope.getNodeProperties=function(nodeRef){nodeRef=nodeRef.replace("workspace://SpacesStore",""),$http({method:"GET",url:configuration.context+"/proxy/alfresco/api/node/workspace/SpacesStore/"+nodeRef}).success(function(datadeux){var xmlDoc;if(window.DOMParser){var parser=new DOMParser;xmlDoc=parser.parseFromString(datadeux,"text/xml")}else xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),xmlDoc.async=!1,xmlDoc.loadXML(datadeux);$scope.objectProps={};for(var node in xmlDoc.getElementsByTagName("properties")){var propsNodes=xmlDoc.getElementsByTagName("properties")[node].childNodes;for(var n in propsNodes)propsNodes[n].childNodes&&propsNodes[n].childNodes.length&&propsNodes[n].childNodes[0].childNodes[0]&&($scope.objectProps[propsNodes[n].getAttribute("displayName")]=propsNodes[n].childNodes[0].childNodes[0].nodeValue)}})},$scope.goToPath=function(){var path=$scope.rootPath.join("/");$http({method:"GET",url:configuration.context+"/proxy/alfresco/slingshot/doclib/treenode/node/alfresco"+path+"?children=true&libraryRoot=alfresco://company/home&max=500"}).success(function(data){$scope.datatree=data,$scope.getNodeProperties(data.parent.nodeRef)})},$scope.selectNode=function(name){$scope.rootPath.push(name),$scope.goToPath()},$scope.goToPathIndex=function(index){$scope.rootPath.splice(index+1,$scope.rootPath.length),$scope.goToPath()}}function ScriptAdminController($scope,$http,configuration){$scope.readOnly=!0,$scope.runas="admin",$scope.script="",$scope.template="${mjson}",$scope.renderedTemplate="",$scope.printOutput=[],$scope.tenantList=[],$scope.selectedTenant=null,$scope.scriptError=!1,$http({method:"GET",url:configuration.context+"/proxy/alfresco/slingshot/doclib/treenode/node/alfresco/company/home/?children=false&libraryRoot=alfresco://company/home&max=500"}).success(function(data){$scope.spaceNodeRef=data.parent.nodeRef}),$http({method:"GET",url:configuration.context+"/proxy/alfresco/de/fme/jsconsole/spacesroot"}).success(function(data){$scope.tenantList=data}),$scope.sendScript=function(){$scope.scriptError=!1,$scope.renderedTemplate="",$http.post(configuration.context+"/proxy/alfresco/de/fme/jsconsole/execute",{context:{},script:$scope.script,template:$scope.template,transaction:!$scope.readOnly,urlargs:"",spaceNodeRef:$scope.selectedTenant?$scope.selectedTenant.node:$scope.spaceNodeRef,documentNodeRef:"",runas:$scope.runas+($scope.selectedTenant?"@"+$scope.selectedTenant.name:"")}).success(function(data){$scope.renderedTemplate=data.renderedTemplate,$scope.printOutput=data.printOutput}).error(function(data){$scope.renderedTemplate=data.renderedTemplate,$scope.printOutput=data.printOutput,$scope.scriptError=!0})}}function StatsAdminController($scope,Audits,cache,$filter,ngTableParams,$sce){function getDateOfWeek(w,y){var d=1+7*(w-1);return new Date(y,0,d)}function getTime(timeInSeconds){var result="",rest=timeInSeconds;return Math.floor(rest/86400)>0&&(result+=Math.floor(rest/86400)+" jours, ",rest%=86400),Math.floor(rest/3600)>0&&(result+=Math.floor(rest/3600)+" heures, ",rest%=3600),Math.floor(rest/60)>0&&(result+=Math.floor(rest/60)+" minutes",rest%=60),rest>0&&(""!==result&&(result+=" et "),result+=rest+" secondes"),0===rest?"Aucun traitement":result}cache.types.list().then(function(list){$scope.types=list}),$scope.action={dossiersCrees:!0,dossiersEmis:!1,dossiersEmisRefuses:!1,dossiersInstruits:!1,dossiersRefuses:!1,dossiersTraites:!1,tempsTraitement:!1},$scope.data=[],$scope.moyennes=[],$scope.ecartTypes=[],$scope.cumul=1,$scope.datalength=0,$scope.gettingStats=!1;var fromTime=new Date;fromTime.setDate(1),$scope.listHandler={bureaux:[],subList:[],searchResultSubList:[],selectedSubList:[],selectedBureaux:[],page:0,maxSize:10,total:0,init:function(){this.search("")},search:function(toSearch){this.subList=[],this.page=0,this.bureaux=$filter("filter")($scope.bureaux,{name:toSearch}),this.total=this.bureaux.length,this.getNewList()},pagine:function(toAddToPage){this.page+=toAddToPage,this.getNewList()},getNewList:function(){this.searchResultSubList=$filter("notSameId")(this.bureaux.slice(this.page*this.maxSize,this.page*this.maxSize+this.maxSize),this.selectedBureaux)},selectElement:function(b){this.selectedSubList.push(b),this.selectedBureaux.push(b.id),this.getNewList()},deselectElement:function(id){var indexInArray=this.selectedBureaux.indexOf(id);~indexInArray&&this.selectedBureaux.splice(indexInArray,1),this.selectedSubList=$.grep(this.selectedSubList,function(a){return a.id!=id}),this.getNewList()}},cache.bureaux.list().then(function(bureaux){$scope.bureaux=bureaux,$scope.listHandler.init()}),$scope.opt={verbose:!0,options:{},fromTime:fromTime.getTime(),toTime:(new Date).getTime()};var optionToParam=function(bureau){var ret=angular.copy($scope.opt),option="";return bureau&&(option+="parapheur;"+bureau.id+"/"),$scope.opt.options.type&&(option+="typeMetier;"+$scope.opt.options.type+"/"),$scope.opt.options.sousType&&(option+="soustypeMetier;"+$scope.opt.options.sousType+"/"),ret.options=option,ret.cumul=$scope.cumul,ret};$scope.toHandle=0,$scope.hasStats=!1;var handleTimeDate=function(label,data,cumul){var dataset={type:"spline",axisYType:"secondary",name:label,showInLegend:!0,toolTipContent:"<span style='\"'color: {color};'\"'>{x}</span> {label}",dataPoints:[]};$scope.datalength=data.data.length;for(var i=0;i<data.data.length;i++){var date;if(4==cumul)date=new Date(data.data[i].key+"-01-01");else if(3==cumul)date=new Date(data.data[i].key+"-01");else if(2==cumul){var k=data.data[i].key;date=getDateOfWeek(k.split("-")[1],k.split("-")[0])}else date=new Date(data.data[i].key);dataset.dataPoints[i]={x:date,y:+data.data[i].value,label:getTime(+data.data[i].value)}}if($scope.bureaux.cumul){var alreadyExistingData=!1;for(i=0;i<$scope.data.length;i++)if($scope.data[i].name==dataset.name){for(var j=0;j<$scope.data[i].dataPoints.length;j++)$scope.data[i].dataPoints[j].y+=dataset.dataPoints[j].y;alreadyExistingData=!0}alreadyExistingData||$scope.data.push(dataset)}else $scope.data.push(dataset);$scope.toHandle--,$scope.gettingStats=!1},handleData=function(label,data,cumul){$scope.moyenne=data.moyenne,$scope.ecartType=data.ecartType;var dataset={type:"line",name:label,showInLegend:!0,dataPoints:[]};$scope.datalength=data.data.length;for(var i=0;i<data.data.length;i++){var date;if(4==cumul)date=new Date(data.data[i].key+"-01-01");else if(3==cumul)date=new Date(data.data[i].key+"-01");else if(2==cumul){var k=data.data[i].key;date=getDateOfWeek(k.split("-")[1],k.split("-")[0])}else date=new Date(data.data[i].key);dataset.dataPoints[i]={x:date,y:+data.data[i].value}}if($scope.bureaux.cumul){var alreadyExistingData=!1;for(i=0;i<$scope.data.length;i++)if($scope.data[i].name==dataset.name){for(var j=0;j<$scope.data[i].dataPoints.length;j++)$scope.data[i].dataPoints[j].y+=dataset.dataPoints[j].y;alreadyExistingData=!0}alreadyExistingData||$scope.data.push(dataset)}else $scope.data.push(dataset);$scope.moyennes.push(data.moyenne||""),$scope.ecartTypes.push(data.ecartType||""),$scope.toHandle--,$scope.gettingStats=!1},hasGenerateRejectTable=!1;$scope.updateChartData=function(){if($scope.searchReject=!1,$scope.$broadcast("reinitTab"),$scope.data=[],$scope.moyennes=[],$scope.ecartTypes=[],$scope.gettingStats=!0,$scope.savedCumul=$scope.cumul,$scope.listHandler.selectedSubList.length>0)for(var i=0;i<$scope.listHandler.selectedSubList.length;i++)updateChartData($scope.listHandler.selectedSubList[i]);else updateChartData(null);$scope.hasStats=!0,hasGenerateRejectTable=!1};var buildTable=function(){if($scope.tableParams)$scope.tableParams.page(1),$scope.tableParams.reload();else{for(var i=0;i<$scope.rejetDetail.length;i++)$scope.rejetDetail[i].cause=$sce.trustAsHtml($scope.rejetDetail[i].cause.replace(/\n/g,"<br/>"));$scope.tableParams=new ngTableParams({page:1,count:10},{total:0,getData:function($defer,params){var orderedData=params.sorting()?$filter("orderBy")($scope.rejetDetail,params.orderBy()):$scope.rejetDetail;params.total(orderedData.length),$defer.resolve(orderedData.slice((params.page()-1)*params.count(),params.page()*params.count()))}})}$scope.flags.isSearching=!1};$scope.generateRejectTable=function(){if(!hasGenerateRejectTable){if($scope.listHandler.selectedSubList.length>0)for(var i=0;i<$scope.listHandler.selectedSubList.length;i++)generateRejectTable($scope.listHandler.selectedSubList[i]);else generateRejectTable(null);hasGenerateRejectTable=!0}};var generateRejectTable=function(bureau){Audits.causesRejet(optionToParam(bureau),function(result){$scope.searchReject=result.length>0,$scope.rejetDetail=result,buildTable()})},updateChartData=function(bureau){var bureauLabel="";null!=bureau&&(bureauLabel=" ("+bureau.name+")"),$scope.action.dossiersCrees&&($scope.toHandle++,Audits.crees(optionToParam(bureau),function(result){var label=$filter("translate")("Admin.Stats.Created")+($scope.bureaux.cumul?"":bureauLabel);handleData(label,result,$scope.savedCumul)})),$scope.action.dossiersEmis&&($scope.toHandle++,Audits.emis(optionToParam(bureau),function(result){var label=$filter("translate")("Admin.Stats.Emited")+($scope.bureaux.cumul?"":bureauLabel);handleData(label,result,$scope.savedCumul)})),$scope.action.dossiersEmisRefuses&&($scope.toHandle++,Audits.emisRefuses(optionToParam(bureau),function(result){var label=$filter("translate")("Admin.Stats.EmitedRejected")+($scope.bureaux.cumul?"":bureauLabel);handleData(label,result,$scope.savedCumul)})),$scope.action.dossiersInstruits&&($scope.toHandle++,Audits.instruits(optionToParam(bureau),function(result){var label=$filter("translate")("Admin.Stats.Instructed")+($scope.bureaux.cumul?"":bureauLabel);handleData(label,result,$scope.savedCumul)})),$scope.action.dossiersRefuses&&($scope.toHandle++,Audits.refuses(optionToParam(bureau),function(result){var label=$filter("translate")("Admin.Stats.Rejected")+($scope.bureaux.cumul?"":bureauLabel);handleData(label,result,$scope.savedCumul),$scope.generateRejectTable()})),$scope.action.dossiersTraites&&($scope.toHandle++,Audits.traites(optionToParam(bureau),function(result){var label=$filter("translate")("Admin.Stats.Handled")+($scope.bureaux.cumul?"":bureauLabel);handleData(label,result,$scope.savedCumul)})),$scope.action.tempsTraitement&&($scope.toHandle++,Audits.tempsTraitement(optionToParam(bureau),function(result){var label=$filter("translate")("Admin.Stats.Time")+" (en secondes) "+($scope.bureaux.cumul?"":bureauLabel);handleTimeDate(label,result,$scope.savedCumul)}))};$scope.exportToCSV=function(){for(var toExport=[],i=0;i<$scope.data.length;i++)for(var name=$scope.data[i].name,j=0;j<$scope.data[i].dataPoints.length;j++){var point=$scope.data[i].dataPoints[j];if(!toExport[j]){var d=new Date(point.x);toExport[j]={date:d.getFullYear()+"-"+(+d.getMonth()+1)+"-"+d.getDate()}}toExport[j][name]=point.y}for(var csvContent="",hasAddHeader=!1,k=0;k<toExport.length;k++){if(!hasAddHeader){var isFirst=!0;for(var el in toExport[k])isFirst||(csvContent+=";"),isFirst=!1,csvContent+=el;csvContent+="\n",hasAddHeader=!0}var isFirstElement=!0;for(var elem in toExport[k])isFirstElement||(csvContent+=";"),isFirstElement=!1,csvContent+=toExport[k][elem];csvContent+="\n"}if($scope.moyennes.length>0&&$scope.ecartTypes.length>0){csvContent+="\n",csvContent+="moyenne;";for(var m=0;m<$scope.moyennes.length;m++)csvContent+=$scope.moyennes[m]+";";csvContent+="\n",csvContent+="ecart Type;";for(var e=0;e<$scope.ecartTypes.length;e++)csvContent+=$scope.ecartTypes[e]+";"}var blob=new Blob(["\ufeff",csvContent],{type:"text/csv"});if(window.navigator.msSaveOrOpenBlob&&window.Blob)navigator.msSaveOrOpenBlob(blob,"statistiques.csv");else{var link=document.createElement("a");link.href=URL.createObjectURL(blob),link.setAttribute("download","statistiques.csv"),document.body.appendChild(link),link.click(),document.body.removeChild(link)}}}function TenantAdminController($scope,$log,Tenants,modals){$scope.password={newOne:"",confirm:""},$scope.tenant={isEnabled:!1,isGettingInfos:void 0,cantSelect:!1,isCreating:!1,list:[],selected:void 0,edited:void 0,search:"",init:function(){var that=this;Tenants.isEnabled(function(result){that.isEnabled=result.mtEnabled,that.isEnabled&&that.getList()},function(error){$log.error(error)})},getList:function(){this.list=Tenants.list()},select:function(coll){if(!this.isCreating)if(coll.enabled&&!coll.modify){var that=this;this.cantSelect=!1,this.selected=coll,void 0===this.selected.description?this.selected.$get(function(){that.edited=angular.copy(coll)},function(){that.edited=angular.copy(coll),$log.error("Impossible de récupérer les informations du tenant")}):this.edited=angular.copy(coll)}else this.selected=void 0,this.edited=void 0,this.cantSelect=!0},create:function(){this.isEnabled&&(this.selected=new Tenants({title:"",tenantDomain:"",siren:"",city:"",country:"",postalCode:"",enabled:!0,isNew:!0}),this.edited=angular.copy(this.selected))},infos:function(){var that=this;this.isGettingInfos=this.selected.tenantDomain;var tmp=this.selected;this.selected.$details(function(){that.isGettingInfos=void 0,tmp.hasDetails=!0},function(){that.isGettingInfos=void 0,$log.error("Impossible de récupérer les détails du tenant")})},save:function(){var that=this;this.selected.isNew?(this.edited.tenantDomain=this.edited.tenantDomain.toLowerCase(),this.exist(this.edited.tenantDomain)?this.selected.exist=!0:(this.isCreating=!0,this.selected.exist=!1,angular.extend(this.selected,this.edited),this.selected.modify=!0,this.selected.password=$scope.password.confirm,this.selected.$save(function(){that.isCreating=!1,that.selected.isNew=!1,that.selected.modify=!1,that.list.push(that.selected)}))):(angular.extend(this.selected,this.edited),this.selected.modify=!0,this.selected.$update(function(){that.selected.modify=!1}))},exist:function(tenantDomain){for(var i=0;i<this.list.length;i++)if(this.list[i].tenantDomain===tenantDomain)return!0;return!1},switchState:function(coll){this.isCreating||(this.selected=void 0,this.edited=void 0,coll.modify=!0,coll.enabled=!coll.enabled,coll.$enable(function(){coll.modify=!1}))},reloadMail:function(coll){this.isCreating||(coll.reloadMail=!0,coll.$reloadMail(function(){coll.reloadMail=!1}))},changeAdminPassword:function(){var that=this;modals.launch("base",{title:"Modifier le mot de passe",message:"Vous pouvez redéfinir le mot de passe de l'administrateur de la collectivité "+that.selected.title,ctrl:AskPasswordController,template:"partials/modals/askPasswordModal.html"},function(result){that.selected.password=result,that.selected.modify=!0,that.selected.$changePassword(function(){that.selected.modify=!1})})},changePESProperties:function(){var that=this;modals.launch("base",{title:"Modifier les paramètres PES",message:"Vous pouvez redéfinir les paramètres PES de la collectivité "+that.selected.title,ctrl:SetPESProperties,template:"partials/modals/pesPropertiesTenant.html",object:that.selected},function(result){angular.extend(that.selected,result),that.selected.$updatePesProperties()})}},$scope.tenant.init()}function SetPESProperties($scope,$modalInstance,title,message,object){$scope.title=title,$scope.message=message,$scope.properties={},object.policyIdentifierID?$scope.properties=angular.copy(object):object.$getPesProperties(function(){$scope.properties=angular.copy(object)}),$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){$modalInstance.close($scope.properties)}}function TypologieAdminController($scope,$cacheFactory,Types,SousTypes,Circuits,modals,$filter,cache,usSpinnerService,Cachets,PastellConnector,Dossiers){var reinitTab=function(){$scope.$broadcast("reinitTab")};$scope.tdtNomOptions=[{value:"S²LOW",key:"S²LOW"},{value:"SRCI",key:"SRCI"},{value:"FAST",key:"FAST"}],$scope.tdtProtocoleOptions=[{value:"ACTES",key:"ACTES"},{value:"HELIOS",key:"HELIOS"}],$scope.boolvalues=[{key:"Oui",value:"true"},{key:"Non",value:"false"}],$scope.cachetCerts=Cachets.list(),$scope.pastellMailsec=PastellConnector.list(),$scope.isMetaInited=!1;var types=[],bureaux=[],metadonnees=[],groupes=[],calques=[],cancelSelectType=!1;$scope.handler={init:function(){var that=this;cache.types.list().then(function(typelist){types=typelist;for(var i=0;i<types.length;i++){types[i].sousTypes=$filter("orderBy")(types[i].sousTypes,"id"),types[i].selected=!1;for(var j=0;j<types[i].sousTypes.length;j++)types[i].sousTypes[j].selected=!1}that.types.search("")}),cache.bureaux.list().then(function(bureauxList){bureaux=bureauxList,that.bureaux.search("")}),cache.metadonnees.list(!0).then(function(metaList){metadonnees=metaList,$scope.isMetaInited=!0}),cache.groupes.list().then(function(groupsList){groupes=groupsList,that.groupes.search("")}),cache.calques.list().then(function(calquesList){calques=calquesList,that.calques.search("")})},types:{selected:{},edited:{},selectedSubtype:void 0,editedSubtype:void 0,errorType:void 0,errorSubtype:void 0,list:[],subList:[],page:0,maxSize:10,total:0,searchValue:"",saving:!1,hasCachet:function(){var hasCachetInCircuit=!this.editedSubtype.circuit;if($scope.handler.circuits.selected&&$scope.handler.circuits.selected.etapes)for(var i=0;i<$scope.handler.circuits.selected.etapes.length;i++)if("CACHET"===$scope.handler.circuits.selected.etapes[i].actionDemandee){hasCachetInCircuit=!0;break}return hasCachetInCircuit},hasPastellMailsec:function(){var hasMailsecPastellInCircuit=!this.editedSubtype.circuit;if($scope.handler.circuits.selected&&$scope.handler.circuits.selected.etapes)for(var i=0;i<$scope.handler.circuits.selected.etapes.length;i++)if("MAILSECPASTELL"===$scope.handler.circuits.selected.etapes[i].actionDemandee){hasMailsecPastellInCircuit=!0;break}return hasMailsecPastellInCircuit},hasCachetSelected:function(){var hasCircuitSelected=!!this.editedSubtype.circuit,hasCachetResult=this.hasCachet(),hasCachetInSelect=!!this.editedSubtype.cachetCertificate;return hasCircuitSelected&&hasCachetResult?hasCachetInSelect&&this.canCachet():!0},canCachet:function(){var sigFormat=this.getSignatureFormat();return"PAdES/basic"===sigFormat||"PAdES/basicCertifie"===sigFormat},create:function(){this.selected?this.selected.selected=!1:null,this.selectedSubtype?this.selectedSubtype.selected=!1:null;var type={isNew:!0,tdtOverride:"false",sousTypes:[],tdtNom:"pas de TdT",tdtProtocole:"aucun"};this.selected=type,this.edited=new Types(type),this.selectedSubtype=void 0},createSub:function(type){reinitTab(),cancelSelectType=!0,this.selected?this.selected.selected=!1:null,this.selectedSubtype?this.selectedSubtype.selected=!1:null;var sousType={isNew:!0,parent:type.id,parapheurs:[],
parapheursFilters:[],groupsFilters:[],groups:[],calques:[],calquesAnnexes:[],metadatas:[],visibility:"public",visibilityFilter:"public",digitalSignatureMandatory:"true"};this.selectedSubtype=sousType,this.editedSubtype=new SousTypes(sousType),this.selected=void 0,type.selected=!1},save:function(){if(this.errorType=void 0,this.isTypeAlreadyExists(this.edited.id))return void(this.errorType=$filter("translate")("Admin.Typologie.Error_type_name_already_exists"));var that=this;this.saving=!0,this.edited.id=this.edited.id.replace(/  +/g," "),this.edited.$save(function(){that.saving=!1,that.edited.isNew=!1,that.edited.selected=!1,that.selected=that.edited,types[types.length]=that.edited,that.selected=void 0,that.updateSublist()},function(error){that.saving=!1,that.errorType=error.data.message})},saveSub:function(){if(this.isSubTypeTypeAlreadyExists(this.editedSubtype.parent,this.editedSubtype.id))return void(this.errorSubtype=$filter("translate")("Admin.Typologie.Error_type_name_already_exists"));var that=this;this.errorSubtype=void 0,this.saving=!0,this.editedSubtype.id=this.editedSubtype.id.replace(/  +/g," "),this.editedSubtype.$save(function(){that.saving=!1,that.editedSubtype.isNew=!1,that.selectedSubtype=that.editedSubtype;for(var i=0;i<types.length;i++)types[i].id===that.editedSubtype.parent&&(types[i].sousTypes[types[i].sousTypes.length]=that.editedSubtype);that.updateSublist(),that.selectedSubtype=void 0},function(error){that.saving=!1,that.errorSubtype=error.data.message})},update:function(){if(this.errorType=void 0,this.edited.oldId=this.selected.id,this.edited.id=this.edited.id.replace(/  +/g," "),this.edited.oldId!==this.edited.id&&this.isTypeAlreadyExists(this.edited.id))return void(this.errorType=$filter("translate")("Admin.Typologie.Error_type_name_already_exists"));var that=this;this.saving=!0,this.edited.$update(function(data){that.saving=!1;var oldId=that.selected.id;angular.forEach(types,function(value,key){if(value.id===oldId){if(oldId!=data.id)for(var i=0;i<data.sousTypes.length;i++)data.sousTypes[i].parent=data.id;types[key]=data}}),that.updateSublist(),data.selected=!1,that.selected=void 0},function(error){that.saving=!1,that.errorType=error.data.message})},updateSub:function(){if(this.errorSubtype=void 0,this.editedSubtype.oldId=this.selectedSubtype.id,this.editedSubtype.id=this.editedSubtype.id.replace(/  +/g," "),this.editedSubtype.oldId!==this.editedSubtype.id&&this.isSubTypeTypeAlreadyExists(this.editedSubtype.parent,this.editedSubtype.id))return void(this.errorSubtype=$filter("translate")("Admin.Typologie.Error_subtype_name_already_exists"));this.editedSubtype.circuit||(this.editedSubtype.circuit="");var that=this;that.saving=!0,this.editedSubtype.$update(function(){that.saving=!1,that.selectedSubtype.id=that.editedSubtype.id,that.selectedSubtype.selected=!1,that.updateSublist(),that.selectedSubtype=void 0},function(error){that.saving=!1,that.errorSubtype=error.data.message})},select:function(type){this.errorSubtype=void 0,this.errorType=void 0,type.isDeleted||cancelSelectType||(void 0!==type.parent?(reinitTab(),this.selected=void 0,this.edited=void 0,this.selectedSubtype=type,this.editedSubtype=SousTypes.get(type,function(){$scope.handler.bureaux.getNewList(),$scope.handler.circuits.init()})):(this.selected=type,this.edited=new Types(type),this.selectedSubtype=void 0)),cancelSelectType=!1},remove:function(type){var that=this;modals.launch("base",{title:$filter("translate")(type.parent?"Admin.Typologie.Ty_Sub_Mod_Delete":"Admin.Typologie.Ty_Mod_Delete")+" "+type.id,message:$filter("translate")("Admin.Typologie.Ty_Mod_Confirm"),template:"partials/modals/simpleConfirmationModal.html",ctrl:RemoveTypeController,object:type},function(){type.isDeleted=!0,void 0!==type.parent&&(that.selectedSubtype=void 0,that.editedSubtype=void 0,type=new SousTypes(type)),that.selected=void 0,that.edited=void 0,type.$delete();for(var hasParent=void 0!==type.parent,i=0;i<types.length;i++)if(hasParent){if(type.parent===types[i].id)for(var j=0;j<types[i].sousTypes.length;j++)type.id===types[i].sousTypes[j].id&&types[i].sousTypes.splice(j,1)}else type.id===types[i].id&&types.splice(i,1);that.updateSublist()})},launchOverride:function(){modals.launch("OverrideS2low",this.edited)},showOverrideButton:function(){return this.edited.sigFormat&&("XAdES/enveloped"===this.edited.sigFormat&&"SRCI"!==this.edited.tdtNom&&"FAST"!==this.edited.tdtNom||~this.edited.sigFormat.indexOf("PAdES")||"S²LOW"===this.edited.tdtNom&&"aucun"!==this.edited.tdtProtocole)||~this.edited.sigFormat.indexOf("AUTO")},showOverrideRadio:function(){return"S²LOW"===this.edited.tdtNom&&"aucun"!==this.edited.tdtProtocole},getOverrideButtonName:function(){return~this.edited.sigFormat.indexOf("AUTO")?$filter("translate")("Admin.Typologie.Ty_Profil"):!~this.edited.sigFormat.indexOf("PAdES")||"ACTES"===this.edited.tdtProtocole&&"S²LOW"===this.edited.tdtNom?"XAdES/enveloped"!==this.edited.sigFormat||"HELIOS"===this.edited.tdtProtocole&&"S²LOW"===this.edited.tdtNom?$filter("translate")("Admin.Typologie.Ty_Connector")+" S²LOW":$filter("translate")("Admin.Typologie.Ty_Profil")+" XAdES":$filter("translate")("Admin.Typologie.Ty_Profil")+" PAdES"},getOverrideButtonIcon:function(){return(!~this.edited.sigFormat.indexOf("PAdES")||"ACTES"===this.edited.tdtProtocole&&"S²LOW"===this.edited.tdtNom)&&("XAdES/enveloped"!==this.edited.sigFormat||"HELIOS"===this.edited.tdtProtocole&&"S²LOW"===this.edited.tdtNom)?"fa-plug":"ls-signature"},changeProtocol:function(){$scope.dashChanged=!0,this.edited.sigFormat="ACTES"===this.edited.tdtProtocole?"PKCS#7/single":"XAdES/enveloped"},getProtocol:function(){for(var tdtProtocole,i=0;i<types.length;i++)if(types[i].id===this.selectedSubtype.parent){tdtProtocole=types[i].tdtProtocole;break}return tdtProtocole},getSignatureFormat:function(){for(var sigFormat,i=0;i<types.length;i++)if(types[i].id===this.selectedSubtype.parent){sigFormat=types[i].sigFormat;break}return sigFormat},addMetadata:function(meta,fromCircuit){this.editedSubtype.metadatas[this.editedSubtype.metadatas.length]={id:meta.id,editable:"false",mandatory:"false","default":"",fromCircuit:fromCircuit}},addCalque:function(calque){this.editedSubtype.calques[this.editedSubtype.calques.length]={id:calque.id,numDocument:"0"}},addCalqueAnnexe:function(calque){this.editedSubtype.calquesAnnexes[this.editedSubtype.calquesAnnexes.length]=calque.id},search:function(){this.page=0,this.updateSublist()},updateSublist:function(){this.subList=$filter("filter")(types,this.searchValue),this.total=this.subList.length,this.subList=this.subList.slice(this.page*this.maxSize,this.page*this.maxSize+this.maxSize)},pagine:function(toAddToPage){this.page+=toAddToPage,this.updateSublist()},isTypeAlreadyExists:function(typeName){if(!this.subList)return!1;for(var alreadyExists=!1,i=0;i<this.subList.length;i++)if(this.subList[i].id.toUpperCase()===typeName.toUpperCase()){alreadyExists=!0;break}return alreadyExists},isSubTypeTypeAlreadyExists:function(typeName,subTypeName){if(!this.subList)return!1;for(var alreadyExists=!1,i=0;i<this.subList.length;i++)if(this.subList[i].id.toUpperCase()===typeName.toUpperCase()){for(var j=0;j<this.subList[i].sousTypes.length;j++)this.subList[i].sousTypes[j].id.toUpperCase()===subTypeName.toUpperCase()&&(alreadyExists=!0);break}return alreadyExists}},bureaux:{list:function(){return bureaux},subList:[],subListForCreation:[],subListForFilter:[],page:0,maxSize:10,total:0,searchValue:"",search:function(){this.page=0,this.updateSublist()},updateSublist:function(){this.subList=$filter("customfilter")(bureaux,this.searchValue),this.total=this.subList.length,this.subList=this.subList.slice(this.page*this.maxSize,this.page*this.maxSize+this.maxSize),this.getNewList()},pagine:function(toAddToPage){this.page+=toAddToPage,this.updateSublist()},selectForCreation:function(b){$scope.handler.types.editedSubtype.parapheurs.push(b.id),this.getNewList()},unselectForCreation:function(id){var indexInArray=$scope.handler.types.editedSubtype.parapheurs.indexOf(id);~indexInArray&&$scope.handler.types.editedSubtype.parapheurs.splice(indexInArray,1),this.getNewList()},selectForFilter:function(b){$scope.handler.types.editedSubtype.parapheursFilters.push(b.id),this.getNewList()},unselectForFilter:function(id){var indexInArray=$scope.handler.types.editedSubtype.parapheursFilters.indexOf(id);~indexInArray&&$scope.handler.types.editedSubtype.parapheursFilters.splice(indexInArray,1),this.getNewList()},getNewList:function(){this.subListForCreation=$filter("notSameId")(this.subList,$scope.handler.types.editedSubtype?$scope.handler.types.editedSubtype.parapheurs:[]),this.subListForFilter=$filter("notSameId")(this.subList,$scope.handler.types.editedSubtype?$scope.handler.types.editedSubtype.parapheursFilters:[])}},groupes:{list:function(){return groupes},subList:[],subListForCreation:[],subListForFilter:[],page:0,maxSize:10,total:0,searchValue:"",search:function(){this.page=0,this.updateSublist()},updateSublist:function(){this.subList=$filter("customfilter")(groupes,this.searchValue),this.total=this.subList.length,this.subList=this.subList.slice(this.page*this.maxSize,this.page*this.maxSize+this.maxSize),this.getNewList()},pagine:function(toAddToPage){this.page+=toAddToPage,this.updateSublist()},selectForCreation:function(b){$scope.handler.types.editedSubtype.groups.push(b.id),this.getNewList()},unselectForCreation:function(id){var indexInArray=$scope.handler.types.editedSubtype.groups.indexOf(id);~indexInArray&&$scope.handler.types.editedSubtype.groups.splice(indexInArray,1),this.getNewList()},selectForFilter:function(b){$scope.handler.types.editedSubtype.groupsFilters.push(b.id),this.getNewList()},unselectForFilter:function(id){var indexInArray=$scope.handler.types.editedSubtype.groupsFilters.indexOf(id);~indexInArray&&$scope.handler.types.editedSubtype.groupsFilters.splice(indexInArray,1),this.getNewList()},getNewList:function(){this.subListForCreation=$filter("notSameId")(this.subList,$scope.handler.types.editedSubtype?$scope.handler.types.editedSubtype.groups:[]),this.subListForFilter=$filter("notSameId")(this.subList,$scope.handler.types.editedSubtype?$scope.handler.types.editedSubtype.groupsFilters:[])}},circuits:{list:[],pagedList:[],page:0,total:0,maxSize:10,currentSearch:"",selected:{},hasVariableStep:!1,init:function(){var that=this;Circuits.list({search:$scope.handler.types.editedSubtype.circuit,maxSize:10,page:0},function(result){for(var i=0;i<result.length;i++)if(result[i].name===$scope.handler.types.editedSubtype.circuit){that.isCircuitVariable(result[i]),that.selected=result[i],that.select(that.selected);break}}),this.pagedList.length||this.search()},search:function(toSearch){var that=this;this.pagedList=[],this.currentSearch=toSearch,this.page=0,Circuits.list({search:"*"+(toSearch||"")+"*",maxSize:this.maxSize,page:this.page},function(result){that.total=result.length?result[0].total:0,that.pagedList[that.page]=result,that.list=result})},pagine:function(toAddToPage){var that=this;this.page+=toAddToPage;var page=this.page;this.pagedList[this.page]?this.list=this.pagedList[this.page]:Circuits.list({search:"*"+(this.currentSearch||"")+"*",maxSize:this.maxSize,page:this.page},function(result){that.pagedList[page]=result,that.list=result})},select:function(circuit){$scope.handler.types.editedSubtype.metadatas.map(function(element){element.fromCircuit=!1}),this.isCircuitVariable(circuit),$scope.handler.types.editedSubtype.circuit=circuit?circuit.name:"",this.selected=circuit;var metaToAdd=this.getListMetaFromCircuit(circuit);$scope.handler.metadonnees.list().map(function(meta){if(-1!==metaToAdd.indexOf(meta.id)){var metaSelected=$scope.handler.types.editedSubtype.metadatas.find(function(element){return element.id===meta.id});metaSelected?(metaSelected.fromCircuit=!0,metaSelected.mandatory="false",metaSelected.editable="false",metaSelected["default"]=""):$scope.handler.types.addMetadata(meta,!0)}})},getListMetaFromCircuit:function(circuit){var listeMeta=[];return circuit&&circuit.etapes.map(function(value){value.listeMetadatas&&(listeMeta=listeMeta.concat(value.listeMetadatas.filter(function(item){return listeMeta.indexOf(item)<0})))}),listeMeta},isCircuitVariable:function(circuit){if(this.hasVariableStep=!1,circuit)for(var i=0;i<circuit.etapes.length;i++)"VARIABLE"===circuit.etapes[i].transition&&(this.hasVariableStep=!0)}},metadonnees:{list:function(){return metadonnees},subList:[],page:0,maxSize:10,total:0,searchValue:"",search:function(){this.page=0,this.updateSublist()},updateSublist:function(){this.subList=$filter("filter")(metadonnees,{id:this.searchValue}),this.total=this.subList.length,this.subList=this.subList.slice(this.page*this.maxSize,this.page*this.maxSize+this.maxSize)},pagine:function(toAddToPage){this.page+=toAddToPage,this.updateSublist()}},calques:{list:function(){return calques},subList:[],page:0,maxSize:10,total:0,searchValue:"",search:function(){this.page=0,this.updateSublist()},updateSublist:function(){this.subList=$filter("filter")(calques,{id:this.searchValue}),this.total=this.subList.length,this.subList=this.subList.slice(this.page*this.maxSize,this.page*this.maxSize+this.maxSize)},pagine:function(toAddToPage){this.page+=toAddToPage,this.updateSublist()}}},$scope.handler.init();var checkAll=function(value,property,filter,toFilter){var listIds=[],objects=$filter("filter")(toFilter,filter);if(filter){listIds=$scope.editedSousType[property];for(var i=0;i<objects.length;i++){var index=listIds.indexOf(objects[i].id);~index?value||listIds.splice(index,1):value&&(listIds[listIds.length]=objects[i].id)}}else if(value)for(var j=0;j<objects.length;j++)listIds[listIds.length]=objects[j].id;$scope.editedSousType[property]=listIds};$scope.checkAllBureaux=function(value,property,filter){checkAll(value,property,filter,$scope.bureaux)},$scope.checkAllGroups=function(value,property,filter){checkAll(value,property,filter,$scope.groupes)},$scope.removeFromProperty=function(property,id){var index=property.indexOf(id);~index&&property.splice(index,1)},$scope.checkPermissionBureau=function(checked,id){var indexInArray=$scope.editedSousType.parapheurs.indexOf(id);checked&&-1==indexInArray?$scope.editedSousType.parapheurs.push(id):checked||-1==indexInArray||$scope.editedSousType.parapheurs.splice(indexInArray,1)},$scope.checkPermissionBureauFiltre=function(checked,id){var indexInArray=$scope.editedSousType.parapheursFilters.indexOf(id);checked&&-1==indexInArray?$scope.editedSousType.parapheursFilters.push(id):checked||-1==indexInArray||$scope.editedSousType.parapheursFilters.splice(indexInArray,1)},$scope.checkPermissionGroupe=function(checked,id){var indexInArray=$scope.editedSousType.groups.indexOf(id);checked&&-1==indexInArray?$scope.editedSousType.groups.push(id):checked||-1==indexInArray||$scope.editedSousType.groups.splice(indexInArray,1)},$scope.checkPermissionGroupeFiltre=function(checked,id){var indexInArray=$scope.editedSousType.groupsFilters.indexOf(id);checked&&-1==indexInArray?$scope.editedSousType.groupsFilters.push(id):checked||-1==indexInArray||$scope.editedSousType.groupsFilters.splice(indexInArray,1)},$scope.getProtocole=function(typeId){for(var tdtProtocole,i=0;i<$scope.listHandler.types.length;i++)if($scope.listHandler.types[i].id===typeId){tdtProtocole=$scope.listHandler.types[i].tdtProtocole;break}return tdtProtocole},$scope.isAcceptingAttest=function(){for(var parentProtocol,parentFormat,i=0;i<types.length;i++)if(types[i].id===$scope.handler.types.selectedSubtype.parent){parentProtocol=types[i].tdtProtocole,parentFormat=types[i].sigFormat;break}return parentFormat&&(parentFormat.indexOf("PAdES")>-1||parentFormat.indexOf("PKCS#7/single")>-1)},$scope.isAcceptingMultidoc=function(){for(var parentProtocol,parentFormat,i=0;i<types.length;i++)if(types[i].id===$scope.handler.types.selectedSubtype.parent){parentProtocol=types[i].tdtProtocole,parentFormat=types[i].sigFormat;break}var parentProtocolCompatible=!parentProtocol||"aucun"===parentProtocol,parentFormatCompatible=parentFormat&&(parentFormat.indexOf("PAdES")>-1||parentFormat.indexOf("PKCS#7/single")>-1);return parentProtocolCompatible&&parentFormatCompatible},$cacheFactory.get("$http").removeAll()}function UtilisateursAdminController($scope,$rootScope,Users,utils,$modal,ngTableParams,$filter,modals,configuration,Tenants,cache,$location){$scope.users=[],$scope.newUser={},$scope.search="",$scope.newPass={newOne:"",confirm:""},$scope.flags={hasSearch:!1,isSearching:!1},configuration.isAdmin||$location.path("/bureaux");var isTenantEnabled;void 0==$rootScope.isMTEnabled?Tenants.isEnabled(function(result){$rootScope.isMTEnabled=result.mtEnabled,isTenantEnabled=result.mtEnabled}):isTenantEnabled=$rootScope.isMTEnabled,$scope.multiTenantEnableError=!1;var buildTable=function(){$scope.tableParams?($scope.tableParams.page(1),$scope.tableParams.reload()):$scope.tableParams=new ngTableParams({page:1,count:10},{total:0,getData:function($defer,params){var orderedData=params.sorting()?$filter("orderBy")($filter("filter")($scope.users,$scope.search),params.orderBy()):$filter("filter")($scope.users,$scope.search);params.total(orderedData.length),$defer.resolve(orderedData.slice((params.page()-1)*params.count(),params.page()*params.count()))}}),$scope.flags.isSearching=!1};$scope.createUser=function(){$scope.newPass={newOne:"",confirm:""},$scope.newUser=new Users},$scope.cancelCreate=function(){$scope.newUser={}};var saveUser=function(){$scope.newUser.email||($scope.newUser.email=""),configuration.tenant&&($scope.newUser.username=$scope.newUser.username.split("@")[0]),$scope.newUser.$save(function(){"already exists"===$scope.newUser.id?$scope.exist=!0:(configuration.tenant&&($scope.newUser.username=$scope.newUser.username+"@"+configuration.tenant),$scope.users.push($scope.newUser),buildTable(),$scope.newUser={})})};$scope.editUser=function(user){launchModal(user)},$scope.askForPassword=function(){isTenantEnabled&&~$scope.newUser.username.indexOf("@")&&!configuration.tenant?$scope.multiTenantEnableError=!0:modals.launch("base",{title:"Admin.Users.UserMod_New_Title",message:"Admin.Users.UserMod_New_Msg",ctrl:AskPasswordController,template:"partials/modals/askPasswordModal.html"},function(result){$scope.newUser.password=result,$scope.flags.hasSearch=!0,saveUser()})},$scope.deleteUser=function(user){var message="";user.isFromLdap&&(message=$filter("translate")("Admin.Users.UserMod_Remove_LDAP")),(user.isSecretaire||user.isProprietaire)&&(message+=$filter("translate")("Admin.Users.UserMod_Remove_Prop")),message+=$filter("translate")("Admin.Users.UserMod_Remove_Confirm"),launchConfirmModal("Admin.Users.UserMod_Remove",(user.firstName||"")+" "+(user.lastName||""),message,user,DeleteUserController,"partials/modals/simpleConfirmationModal.html",function(){user.$delete(function(){var indexInArray=$scope.users.indexOf(user);-1!=indexInArray&&$scope.users.splice(indexInArray,1),buildTable()})})},$scope.updateListUsers=function(){$scope.flags.hasSearch=!0,$scope.flags.isSearching=!0,cache.users.list().then(function(list){$scope.users=list,buildTable()})},$scope.updateListUsers(),$scope.changeSearch=function(){buildTable()};var launchModal=function(user,type,success){var modalInstance=$modal.open({templateUrl:"partials/modals/utilisateursModal.html",controller:EditUserCtrl,resolve:{type:function(){return type},user:function(){return user}}});modalInstance.result.then(function(result){"function"==typeof success&&success(result),updateUser(result.user,result.originalUser);var indexInArray=$scope.users.indexOf(user);-1!=indexInArray&&angular.extend($scope.users[indexInArray],result.user)},function(){})},launchConfirmModal=function(title,complement,message,user,ctrl,modalFile,success){var modalInstance=$modal.open({templateUrl:modalFile,controller:ctrl,backdrop:"static",resolve:{user:function(){return user},title:function(){return title},titleComplement:function(){return complement},message:function(){return message}}});modalInstance.result.then(function(result){"function"==typeof success&&success(result)},function(){})},updateUser=function(user,originalUser){if(user.id){var updated=utils.diff(originalUser,user);$scope.isEmptyOrNull(updated)||Users.update({id:user.id},updated)}}}!function(e,t){function M(e){var t=e.length,n=x.type(e);return x.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function F(e){var t=O[e]={};return x.each(e.match(T)||[],function(e,n){t[n]=!0}),t}function R(e,n,r,i){if(x.acceptData(e)){var o,a,s=x.expando,l=e.nodeType,u=l?x.cache:e,c=l?e[s]:e[s]&&s;if(c&&u[c]&&(i||u[c].data)||r!==t||"string"!=typeof n)return c||(c=l?e[s]=p.pop()||x.guid++:s),u[c]||(u[c]=l?{}:{toJSON:x.noop}),("object"==typeof n||"function"==typeof n)&&(i?u[c]=x.extend(u[c],n):u[c].data=x.extend(u[c].data,n)),a=u[c],i||(a.data||(a.data={}),a=a.data),r!==t&&(a[x.camelCase(n)]=r),"string"==typeof n?(o=a[n],null==o&&(o=a[x.camelCase(n)])):o=a,o}}function W(e,t,n){if(x.acceptData(e)){var r,i,o=e.nodeType,a=o?x.cache:e,s=o?e[x.expando]:x.expando;if(a[s]){if(t&&(r=n?a[s]:a[s].data)){x.isArray(t)?t=t.concat(x.map(t,x.camelCase)):t in r?t=[t]:(t=x.camelCase(t),t=t in r?[t]:t.split(" ")),i=t.length;for(;i--;)delete r[t[i]];if(n?!I(r):!x.isEmptyObject(r))return}(n||(delete a[s].data,I(a[s])))&&(o?x.cleanData([e],!0):x.support.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}function $(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(P,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:B.test(r)?x.parseJSON(r):r}catch(o){}x.data(e,n,r)}else r=t}return r}function I(e){var t;for(t in e)if(("data"!==t||!x.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function it(){return!0}function ot(){return!1}function at(){try{return a.activeElement}catch(e){}}function pt(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function ft(e,t,n){if(x.isFunction(t))return x.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return x.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(st.test(t))return x.filter(t,e,n);t=x.filter(t,e)}return x.grep(e,function(e){return x.inArray(e,t)>=0!==n})}function dt(e){var t=ht.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function Lt(e,t){return x.nodeName(e,"table")&&x.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function Ht(e){return e.type=(null!==x.find.attr(e,"type"))+"/"+e.type,e}function qt(e){var t=Et.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function _t(e,t){for(var n,r=0;null!=(n=e[r]);r++)x._data(n,"globalEval",!t||x._data(t[r],"globalEval"))}function Mt(e,t){if(1===t.nodeType&&x.hasData(e)){var n,r,i,o=x._data(e),a=x._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)x.event.add(t,n,s[n][r])}a.data&&(a.data=x.extend({},a.data))}}function Ot(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!x.support.noCloneEvent&&t[x.expando]){i=x._data(t);for(r in i.events)x.removeEvent(t,r,i.handle);t.removeAttribute(x.expando)}"script"===n&&t.text!==e.text?(Ht(t).text=e.text,qt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),x.support.html5Clone&&e.innerHTML&&!x.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Ct.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function Ft(e,n){var r,o,a=0,s=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!s)for(s=[],r=e.childNodes||e;null!=(o=r[a]);a++)!n||x.nodeName(o,n)?s.push(o):x.merge(s,Ft(o,n));return n===t||n&&x.nodeName(e,n)?x.merge([e],s):s}function Bt(e){Ct.test(e.type)&&(e.defaultChecked=e.checked)}function tn(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;i--;)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,"none"===x.css(e,"display")||!x.contains(e.ownerDocument,e)}function rn(e,t){for(var n,r,i,o=[],a=0,s=e.length;s>a;a++)r=e[a],r.style&&(o[a]=x._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&nn(r)&&(o[a]=x._data(r,"olddisplay",ln(r.nodeName)))):o[a]||(i=nn(r),(n&&"none"!==n||!i)&&x._data(r,"olddisplay",i?n:x.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function on(e,t,n){var r=Vt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function an(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=x.css(e,n+Zt[o],!0,i)),r?("content"===n&&(a-=x.css(e,"padding"+Zt[o],!0,i)),"margin"!==n&&(a-=x.css(e,"border"+Zt[o]+"Width",!0,i))):(a+=x.css(e,"padding"+Zt[o],!0,i),"padding"!==n&&(a+=x.css(e,"border"+Zt[o]+"Width",!0,i)));return a}function sn(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Rt(e),a=x.support.boxSizing&&"border-box"===x.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=Wt(e,t,o),(0>i||null==i)&&(i=e.style[t]),Yt.test(i))return i;r=a&&(x.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+an(e,t,n||(a?"border":"content"),r,o)+"px"}function ln(e){var t=a,n=Gt[e];return n||(n=un(e,t),"none"!==n&&n||(Pt=(Pt||x("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(Pt[0].contentWindow||Pt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=un(e,t),Pt.detach()),Gt[e]=n),n}function un(e,t){var n=x(t.createElement(e)).appendTo(t.body),r=x.css(n[0],"display");return n.remove(),r}function gn(e,t,n,r){var i;if(x.isArray(t))x.each(t,function(t,i){n||pn.test(e)?r(e,i):gn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==x.type(t))r(e,t);else for(i in t)gn(e+"["+i+"]",t[i],n,r)}function Hn(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(T)||[];if(x.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qn(e,n,r,i){function s(l){var u;return o[l]=!0,x.each(e[l]||[],function(e,l){var c=l(n,r,i);return"string"!=typeof c||a||o[c]?a?!(u=c):t:(n.dataTypes.unshift(c),s(c),!1)}),u}var o={},a=e===jn;return s(n.dataTypes[0])||!o["*"]&&s("*")}function _n(e,n){var r,i,o=x.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&x.extend(!0,e,r),e}function Mn(e,n,r){for(var i,o,a,s,l=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),o===t&&(o=e.mimeType||n.getResponseHeader("Content-Type"));if(o)for(s in l)if(l[s]&&l[s].test(o)){u.unshift(s);break}if(u[0]in r)a=u[0];else{for(s in r){if(!u[0]||e.converters[s+" "+u[0]]){a=s;break}i||(i=s)}a=a||i}return a?(a!==u[0]&&u.unshift(a),r[a]):t}function On(e,t,n,r){var i,o,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=u[l+" "+o]||u["* "+o],!a)for(i in u)if(s=i.split(" "),s[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[i]:u[i]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(p){return{state:"parsererror",error:a?p:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function In(){try{return new e.XMLHttpRequest}catch(t){}}function zn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Kn(){return setTimeout(function(){Xn=t}),Xn=x.now()}function Zn(e,t,n){for(var r,i=(Qn[t]||[]).concat(Qn["*"]),o=0,a=i.length;a>o;o++)if(r=i[o].call(n,t,e))return r}function er(e,t,n){var r,i,o=0,a=Gn.length,s=x.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=Xn||Kn(),n=Math.max(0,u.startTime+u.duration-t),r=n/u.duration||0,o=1-r,a=0,l=u.tweens.length;l>a;a++)u.tweens[a].run(o);return s.notifyWith(e,[u,o,n]),1>o&&l?n:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:x.extend({},t),opts:x.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Kn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=x.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)u.tweens[n].run(1);return t?s.resolveWith(e,[u,t]):s.rejectWith(e,[u,t]),this}}),c=u.props;for(tr(c,u.opts.specialEasing);a>o;o++)if(r=Gn[o].call(u,e,c,u.opts))return r;return x.map(c,Zn,u),x.isFunction(u.opts.start)&&u.opts.start.call(e,u),x.fx.timer(x.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function tr(e,t){var n,r,i,o,a;for(n in e)if(r=x.camelCase(n),i=t[r],o=e[n],x.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),a=x.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function nr(e,t,n){var r,i,o,a,s,l,u=this,c={},p=e.style,f=e.nodeType&&nn(e),d=x._data(e,"fxshow");n.queue||(s=x._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,x.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===x.css(e,"display")&&"none"===x.css(e,"float")&&(x.support.inlineBlockNeedsLayout&&"inline"!==ln(e.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",x.support.shrinkWrapBlocks||u.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],Vn.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(f?"hide":"show"))continue;c[r]=d&&d[r]||x.style(e,r)}if(!x.isEmptyObject(c)){d?"hidden"in d&&(f=d.hidden):d=x._data(e,"fxshow",{}),o&&(d.hidden=!f),f?x(e).show():u.done(function(){x(e).hide()}),u.done(function(){var t;x._removeData(e,"fxshow");for(t in c)x.style(e,t,c[t])});for(r in c)a=Zn(f?d[r]:0,r,u),r in d||(d[r]=a.start,f&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function or(e){return x.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var n,r,i=typeof t,o=e.location,a=e.document,s=a.documentElement,l=e.jQuery,u=e.$,c={},p=[],f="1.10.2",d=p.concat,h=p.push,g=p.slice,m=p.indexOf,y=c.toString,v=c.hasOwnProperty,b=f.trim,x=function(e,t){return new x.fn.init(e,t,r)},w=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=/\S+/g,C=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,N=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,k=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,E=/^[\],:{}\s]*$/,S=/(?:^|:|,)(?:\s*\[)+/g,A=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,j=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,D=/^-ms-/,L=/-([\da-z])/gi,H=function(e,t){return t.toUpperCase()},q=function(e){(a.addEventListener||"load"===e.type||"complete"===a.readyState)&&(_(),x.ready())},_=function(){a.addEventListener?(a.removeEventListener("DOMContentLoaded",q,!1),e.removeEventListener("load",q,!1)):(a.detachEvent("onreadystatechange",q),e.detachEvent("onload",q))};x.fn=x.prototype={jquery:f,constructor:x,init:function(e,n,r){var i,o;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:N.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);
if(i[1]){if(n=n instanceof x?n[0]:n,x.merge(this,x.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:a,!0)),k.test(i[1])&&x.isPlainObject(n))for(i in n)x.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(o=a.getElementById(i[2]),o&&o.parentNode){if(o.id!==i[2])return r.find(e);this.length=1,this[0]=o}return this.context=a,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):x.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),x.makeArray(e,this))},selector:"",length:0,toArray:function(){return g.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=x.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return x.each(this,e,t)},ready:function(e){return x.ready.promise().done(e),this},slice:function(){return this.pushStack(g.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(x.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:h,sort:[].sort,splice:[].splice},x.fn.init.prototype=x.fn,x.extend=x.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},l=2),"object"==typeof s||x.isFunction(s)||(s={}),u===l&&(s=this,--l);u>l;l++)if(null!=(o=arguments[l]))for(i in o)e=s[i],r=o[i],s!==r&&(c&&r&&(x.isPlainObject(r)||(n=x.isArray(r)))?(n?(n=!1,a=e&&x.isArray(e)?e:[]):a=e&&x.isPlainObject(e)?e:{},s[i]=x.extend(c,a,r)):r!==t&&(s[i]=r));return s},x.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===x&&(e.$=u),t&&e.jQuery===x&&(e.jQuery=l),x},isReady:!1,readyWait:1,holdReady:function(e){e?x.readyWait++:x.ready(!0)},ready:function(e){if(e===!0?!--x.readyWait:!x.isReady){if(!a.body)return setTimeout(x.ready);x.isReady=!0,e!==!0&&--x.readyWait>0||(n.resolveWith(a,[x]),x.fn.trigger&&x(a).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===x.type(e)},isArray:Array.isArray||function(e){return"array"===x.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?c[y.call(e)]||"object":typeof e},isPlainObject:function(e){var n;if(!e||"object"!==x.type(e)||e.nodeType||x.isWindow(e))return!1;try{if(e.constructor&&!v.call(e,"constructor")&&!v.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}if(x.support.ownLast)for(n in e)return v.call(e,n);for(n in e);return n===t||v.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||a;var r=k.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=x.buildFragment([e],t,i),i&&x(i).remove(),x.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=x.trim(n),n&&E.test(n.replace(A,"@").replace(j,"]").replace(S,"")))?Function("return "+n)():(x.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||x.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&x.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(D,"ms-").replace(L,H)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,a=M(e);if(n){if(a)for(;o>i&&(r=t.apply(e[i],n),r!==!1);i++);else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(a)for(;o>i&&(r=t.call(e[i],i,e[i]),r!==!1);i++);else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:b&&!b.call("\ufeff ")?function(e){return null==e?"":b.call(e)}:function(e){return null==e?"":(e+"").replace(C,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(M(Object(e))?x.merge(n,"string"==typeof e?[e]:e):h.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(m)return m.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,o=0;if("number"==typeof r)for(;r>o;o++)e[i++]=n[o];else for(;n[o]!==t;)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,a=M(e),s=[];if(a)for(;o>i;i++)r=t(e[i],i,n),null!=r&&(s[s.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(s[s.length]=r);return d.apply([],s)},guid:1,proxy:function(e,n){var r,i,o;return"string"==typeof n&&(o=e[n],n=e,e=o),x.isFunction(e)?(r=g.call(arguments,2),i=function(){return e.apply(n||this,r.concat(g.call(arguments)))},i.guid=e.guid=e.guid||x.guid++,i):t},access:function(e,n,r,i,o,a,s){var l=0,u=e.length,c=null==r;if("object"===x.type(r)){o=!0;for(l in r)x.access(e,n,l,r[l],!0,a,s)}else if(i!==t&&(o=!0,x.isFunction(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(x(e),n)})),n))for(;u>l;l++)n(e[l],r,s?i:i.call(e[l],l,n(e[l],r)));return o?e:c?n.call(e):u?n(e[0],r):a},now:function(){return(new Date).getTime()},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i}}),x.ready.promise=function(t){if(!n)if(n=x.Deferred(),"complete"===a.readyState)setTimeout(x.ready);else if(a.addEventListener)a.addEventListener("DOMContentLoaded",q,!1),e.addEventListener("load",q,!1);else{a.attachEvent("onreadystatechange",q),e.attachEvent("onload",q);var r=!1;try{r=null==e.frameElement&&a.documentElement}catch(i){}r&&r.doScroll&&function o(){if(!x.isReady){try{r.doScroll("left")}catch(e){return setTimeout(o,50)}_(),x.ready()}}()}return n.promise(t)},x.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){c["[object "+t+"]"]=t.toLowerCase()}),r=x(a),function(e,t){function at(e,t,n,i){var o,a,s,l,u,c,d,m,y,x;if((t?t.ownerDocument||t:w)!==f&&p(t),t=t||f,n=n||[],!e||"string"!=typeof e)return n;if(1!==(l=t.nodeType)&&9!==l)return[];if(h&&!i){if(o=Z.exec(e))if(s=o[1]){if(9===l){if(a=t.getElementById(s),!a||!a.parentNode)return n;if(a.id===s)return n.push(a),n}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(s))&&v(t,a)&&a.id===s)return n.push(a),n}else{if(o[2])return M.apply(n,t.getElementsByTagName(e)),n;if((s=o[3])&&r.getElementsByClassName&&t.getElementsByClassName)return M.apply(n,t.getElementsByClassName(s)),n}if(r.qsa&&(!g||!g.test(e))){if(m=d=b,y=t,x=9===l&&e,1===l&&"object"!==t.nodeName.toLowerCase()){for(c=mt(e),(d=t.getAttribute("id"))?m=d.replace(nt,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",u=c.length;u--;)c[u]=m+yt(c[u]);y=V.test(e)&&t.parentNode||t,x=c.join(",")}if(x)try{return M.apply(n,y.querySelectorAll(x)),n}catch(T){}finally{d||t.removeAttribute("id")}}}return kt(e.replace(z,"$1"),t,n,i)}function st(){function t(n,r){return e.push(n+=" ")>o.cacheLength&&delete t[e.shift()],t[n]=r}var e=[];return t}function lt(e){return e[b]=!0,e}function ut(e){var t=f.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ct(e,t){for(var n=e.split("|"),r=e.length;r--;)o.attrHandle[n[r]]=t}function pt(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||D)-(~e.sourceIndex||D);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function dt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ht(e){return lt(function(t){return t=+t,lt(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function gt(){}function mt(e,t){var n,r,i,a,s,l,u,c=k[e+" "];if(c)return t?0:c.slice(0);for(s=e,l=[],u=o.preFilter;s;){(!n||(r=X.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),l.push(i=[])),n=!1,(r=U.exec(s))&&(n=r.shift(),i.push({value:n,type:r[0].replace(z," ")}),s=s.slice(n.length));for(a in o.filter)!(r=Q[a].exec(s))||u[a]&&!(r=u[a](r))||(n=r.shift(),i.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?at.error(e):k(e,l).slice(0)}function yt(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function vt(e,t,n){var r=t.dir,o=n&&"parentNode"===r,a=C++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i)}:function(t,n,s){var l,u,c,p=T+" "+a;if(s){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,s))return!0}else for(;t=t[r];)if(1===t.nodeType||o)if(c=t[b]||(t[b]={}),(u=c[r])&&u[0]===p){if((l=u[1])===!0||l===i)return l===!0}else if(u=c[r]=[p],u[1]=e(t,n,s)||i,u[1]===!0)return!0}}function bt(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function xt(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,u=null!=t;l>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),u&&t.push(s));return a}function wt(e,t,n,r,i,o){return r&&!r[b]&&(r=wt(r)),i&&!i[b]&&(i=wt(i,o)),lt(function(o,a,s,l){var u,c,p,f=[],d=[],h=a.length,g=o||Nt(t||"*",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:xt(g,f,e,s,l),y=n?i||(o?e:h||r)?[]:a:m;if(n&&n(m,y,s,l),r)for(u=xt(y,d),r(u,[],s,l),c=u.length;c--;)(p=u[c])&&(y[d[c]]=!(m[d[c]]=p));if(o){if(i||e){if(i){for(u=[],c=y.length;c--;)(p=y[c])&&u.push(m[c]=p);i(null,y=[],u,l)}for(c=y.length;c--;)(p=y[c])&&(u=i?F.call(o,p):f[c])>-1&&(o[u]=!(a[u]=p))}}else y=xt(y===a?y.splice(h,y.length):y),i?i(null,a,y,l):M.apply(a,y)})}function Tt(e){for(var t,n,r,i=e.length,a=o.relative[e[0].type],s=a||o.relative[" "],l=a?1:0,c=vt(function(e){return e===t},s,!0),p=vt(function(e){return F.call(t,e)>-1},s,!0),f=[function(e,n,r){return!a&&(r||n!==u)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];i>l;l++)if(n=o.relative[e[l].type])f=[vt(bt(f),n)];else{if(n=o.filter[e[l].type].apply(null,e[l].matches),n[b]){for(r=++l;i>r&&!o.relative[e[r].type];r++);return wt(l>1&&bt(f),l>1&&yt(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(z,"$1"),n,r>l&&Tt(e.slice(l,r)),i>r&&Tt(e=e.slice(r)),i>r&&yt(e))}f.push(n)}return bt(f)}function Ct(e,t){var n=0,r=t.length>0,a=e.length>0,s=function(s,l,c,p,d){var h,g,m,y=[],v=0,b="0",x=s&&[],w=null!=d,C=u,N=s||a&&o.find.TAG("*",d&&l.parentNode||l),k=T+=null==C?1:Math.random()||.1;for(w&&(u=l!==f&&l,i=n);null!=(h=N[b]);b++){if(a&&h){for(g=0;m=e[g++];)if(m(h,l,c)){p.push(h);break}w&&(T=k,i=++n)}r&&((h=!m&&h)&&v--,s&&x.push(h))}if(v+=b,r&&b!==v){for(g=0;m=t[g++];)m(x,y,l,c);if(s){if(v>0)for(;b--;)x[b]||y[b]||(y[b]=q.call(p));y=xt(y)}M.apply(p,y),w&&!s&&y.length>0&&v+t.length>1&&at.uniqueSort(p)}return w&&(T=k,u=C),x};return r?lt(s):s}function Nt(e,t,n){for(var r=0,i=t.length;i>r;r++)at(e,t[r],n);return n}function kt(e,t,n,i){var a,s,u,c,p,f=mt(e);if(!i&&1===f.length){if(s=f[0]=f[0].slice(0),s.length>2&&"ID"===(u=s[0]).type&&r.getById&&9===t.nodeType&&h&&o.relative[s[1].type]){if(t=(o.find.ID(u.matches[0].replace(rt,it),t)||[])[0],!t)return n;e=e.slice(s.shift().value.length)}for(a=Q.needsContext.test(e)?0:s.length;a--&&(u=s[a],!o.relative[c=u.type]);)if((p=o.find[c])&&(i=p(u.matches[0].replace(rt,it),V.test(s[0].type)&&t.parentNode||t))){if(s.splice(a,1),e=i.length&&yt(s),!e)return M.apply(n,i),n;break}}return l(e,f)(i,t,!h,n,V.test(e)),n}var n,r,i,o,a,s,l,u,c,p,f,d,h,g,m,y,v,b="sizzle"+-new Date,w=e.document,T=0,C=0,N=st(),k=st(),E=st(),S=!1,A=function(e,t){return e===t?(S=!0,0):0},j=typeof t,D=1<<31,L={}.hasOwnProperty,H=[],q=H.pop,_=H.push,M=H.push,O=H.slice,F=H.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",P="[\\x20\\t\\r\\n\\f]",R="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",W=R.replace("w","w#"),$="\\["+P+"*("+R+")"+P+"*(?:([*^$|!~]?=)"+P+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+W+")|)|)"+P+"*\\]",I=":("+R+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+$.replace(3,8)+")*)|.*)\\)|)",z=RegExp("^"+P+"+|((?:^|[^\\\\])(?:\\\\.)*)"+P+"+$","g"),X=RegExp("^"+P+"*,"+P+"*"),U=RegExp("^"+P+"*([>+~]|"+P+")"+P+"*"),V=RegExp(P+"*[+~]"),Y=RegExp("="+P+"*([^\\]'\"]*)"+P+"*\\]","g"),J=RegExp(I),G=RegExp("^"+W+"$"),Q={ID:RegExp("^#("+R+")"),CLASS:RegExp("^\\.("+R+")"),TAG:RegExp("^("+R.replace("w","w*")+")"),ATTR:RegExp("^"+$),PSEUDO:RegExp("^"+I),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+P+"*(even|odd|(([+-]|)(\\d*)n|)"+P+"*(?:([+-]|)"+P+"*(\\d+)|))"+P+"*\\)|)","i"),bool:RegExp("^(?:"+B+")$","i"),needsContext:RegExp("^"+P+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+P+"*((?:-\\d)?\\d*)"+P+"*\\)|)(?=[^-]|$)","i")},K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/^(?:input|select|textarea|button)$/i,tt=/^h\d$/i,nt=/'|\\/g,rt=RegExp("\\\\([\\da-f]{1,6}"+P+"?|("+P+")|.)","ig"),it=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(55296|r>>10,56320|1023&r)};try{M.apply(H=O.call(w.childNodes),w.childNodes),H[w.childNodes.length].nodeType}catch(ot){M={apply:H.length?function(e,t){_.apply(e,O.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}s=at.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},r=at.support={},p=at.setDocument=function(e){var n=e?e.ownerDocument||e:w,i=n.defaultView;return n!==f&&9===n.nodeType&&n.documentElement?(f=n,d=n.documentElement,h=!s(n),i&&i.attachEvent&&i!==i.top&&i.attachEvent("onbeforeunload",function(){p()}),r.attributes=ut(function(e){return e.className="i",!e.getAttribute("className")}),r.getElementsByTagName=ut(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),r.getElementsByClassName=ut(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),r.getById=ut(function(e){return d.appendChild(e).id=b,!n.getElementsByName||!n.getElementsByName(b).length}),r.getById?(o.find.ID=function(e,t){if(typeof t.getElementById!==j&&h){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},o.filter.ID=function(e){var t=e.replace(rt,it);return function(e){return e.getAttribute("id")===t}}):(delete o.find.ID,o.filter.ID=function(e){var t=e.replace(rt,it);return function(e){var n=typeof e.getAttributeNode!==j&&e.getAttributeNode("id");return n&&n.value===t}}),o.find.TAG=r.getElementsByTagName?function(e,n){return typeof n.getElementsByTagName!==j?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},o.find.CLASS=r.getElementsByClassName&&function(e,n){return typeof n.getElementsByClassName!==j&&h?n.getElementsByClassName(e):t},m=[],g=[],(r.qsa=K.test(n.querySelectorAll))&&(ut(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||g.push("\\["+P+"*(?:value|"+B+")"),e.querySelectorAll(":checked").length||g.push(":checked")}),ut(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&g.push("[*^$]="+P+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(r.matchesSelector=K.test(y=d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ut(function(e){r.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),m.push("!=",I)}),g=g.length&&RegExp(g.join("|")),m=m.length&&RegExp(m.join("|")),v=K.test(d.contains)||d.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},A=d.compareDocumentPosition?function(e,t){if(e===t)return S=!0,0;var i=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return i?1&i||!r.sortDetached&&t.compareDocumentPosition(e)===i?e===n||v(w,e)?-1:t===n||v(w,t)?1:c?F.call(c,e)-F.call(c,t):0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(e===t)return S=!0,0;if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:c?F.call(c,e)-F.call(c,t):0;if(o===a)return pt(e,t);for(r=e;r=r.parentNode;)s.unshift(r);for(r=t;r=r.parentNode;)l.unshift(r);for(;s[i]===l[i];)i++;return i?pt(s[i],l[i]):s[i]===w?-1:l[i]===w?1:0},n):f},at.matches=function(e,t){return at(e,null,null,t)},at.matchesSelector=function(e,t){if((e.ownerDocument||e)!==f&&p(e),t=t.replace(Y,"='$1']"),!(!r.matchesSelector||!h||m&&m.test(t)||g&&g.test(t)))try{var n=y.call(e,t);if(n||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(i){}return at(t,f,null,[e]).length>0},at.contains=function(e,t){return(e.ownerDocument||e)!==f&&p(e),v(e,t)},at.attr=function(e,n){(e.ownerDocument||e)!==f&&p(e);var i=o.attrHandle[n.toLowerCase()],a=i&&L.call(o.attrHandle,n.toLowerCase())?i(e,n,!h):t;return a===t?r.attributes||!h?e.getAttribute(n):(a=e.getAttributeNode(n))&&a.specified?a.value:null:a},at.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},at.uniqueSort=function(e){var t,n=[],i=0,o=0;if(S=!r.detectDuplicates,c=!r.sortStable&&e.slice(0),e.sort(A),S){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return e},a=at.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=a(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=a(t);return n},o=at.selectors={cacheLength:50,createPseudo:lt,match:Q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(rt,it),e[3]=(e[4]||e[5]||"").replace(rt,it),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||at.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&at.error(e[0]),e},PSEUDO:function(e){var n,r=!e[5]&&e[2];return Q.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:r&&J.test(r)&&(n=mt(r,!0))&&(n=r.indexOf(")",r.length-n)-r.length)&&(e[0]=e[0].slice(0,n),e[2]=r.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(rt,it).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=N[e+" "];return t||(t=RegExp("(^|"+P+")"+e+"("+P+"|$)"))&&N(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==j&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=at.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,p,f,d,h,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!l&&!s;if(m){if(o){for(;g;){for(p=t;p=p[g];)if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&v){for(c=m[b]||(m[b]={}),u=c[e]||[],d=u[0]===T&&u[1],f=u[0]===T&&u[2],p=d&&m.childNodes[d];p=++d&&p&&p[g]||(f=d=0)||h.pop();)if(1===p.nodeType&&++f&&p===t){c[e]=[T,d,f];break}}else if(v&&(u=(t[b]||(t[b]={}))[e])&&u[0]===T)f=u[1];else for(;(p=++d&&p&&p[g]||(f=d=0)||h.pop())&&((s?p.nodeName.toLowerCase()!==y:1!==p.nodeType)||!++f||(v&&((p[b]||(p[b]={}))[e]=[T,f]),p!==t)););return f-=i,f===r||0===f%r&&f/r>=0}}},PSEUDO:function(e,t){var n,r=o.pseudos[e]||o.setFilters[e.toLowerCase()]||at.error("unsupported pseudo: "+e);return r[b]?r(t):r.length>1?(n=[e,e,"",t],o.setFilters.hasOwnProperty(e.toLowerCase())?lt(function(e,n){for(var i,o=r(e,t),a=o.length;a--;)i=F.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:lt(function(e){var t=[],n=[],r=l(e.replace(z,"$1"));return r[b]?lt(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:lt(function(e){return function(t){return at(e,t).length>0}}),contains:lt(function(e){return function(t){return(t.textContent||t.innerText||a(t)).indexOf(e)>-1}}),lang:lt(function(e){return G.test(e||"")||at.error("unsupported lang: "+e),e=e.replace(rt,it).toLowerCase(),function(t){var n;do if(n=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!o.pseudos.empty(e)},header:function(e){return tt.test(e.nodeName)},input:function(e){return et.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:ht(function(){return[0]}),last:ht(function(e,t){return[t-1]}),eq:ht(function(e,t,n){return[0>n?n+t:n]}),even:ht(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:ht(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:ht(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:ht(function(e,t,n){for(var r=0>n?n+t:n;t>++r;)e.push(r);return e})}},o.pseudos.nth=o.pseudos.eq;for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})o.pseudos[n]=ft(n);for(n in{submit:!0,reset:!0})o.pseudos[n]=dt(n);gt.prototype=o.filters=o.pseudos,o.setFilters=new gt,l=at.compile=function(e,t){var n,r=[],i=[],o=E[e+" "];if(!o){for(t||(t=mt(e)),n=t.length;n--;)o=Tt(t[n]),o[b]?r.push(o):i.push(o);o=E(e,Ct(i,r))}return o},r.sortStable=b.split("").sort(A).join("")===b,r.detectDuplicates=S,p(),r.sortDetached=ut(function(e){return 1&e.compareDocumentPosition(f.createElement("div"))}),ut(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ct("type|href|height|width",function(e,n,r){return r?t:e.getAttribute(n,"type"===n.toLowerCase()?1:2)}),r.attributes&&ut(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ct("value",function(e,n,r){return r||"input"!==e.nodeName.toLowerCase()?t:e.defaultValue}),ut(function(e){return null==e.getAttribute("disabled")})||ct(B,function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&i.specified?i.value:e[n]===!0?n.toLowerCase():null}),x.find=at,x.expr=at.selectors,x.expr[":"]=x.expr.pseudos,x.unique=at.uniqueSort,x.text=at.getText,x.isXMLDoc=at.isXML,x.contains=at.contains}(e);var O={};x.Callbacks=function(e){e="string"==typeof e?O[e]||F(e):x.extend({},e);var n,r,i,o,a,s,l=[],u=!e.once&&[],c=function(t){for(r=e.memory&&t,i=!0,a=s||0,s=0,o=l.length,n=!0;l&&o>a;a++)if(l[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,l&&(u?u.length&&c(u.shift()):r?l=[]:p.disable())},p={add:function(){if(l){var t=l.length;!function i(t){x.each(t,function(t,n){var r=x.type(n);"function"===r?e.unique&&p.has(n)||l.push(n):n&&n.length&&"string"!==r&&i(n)})}(arguments),n?o=l.length:r&&(s=t,c(r))}return this},remove:function(){return l&&x.each(arguments,function(e,t){for(var r;(r=x.inArray(t,l,r))>-1;)l.splice(r,1),n&&(o>=r&&o--,a>=r&&a--)}),this},has:function(e){return e?x.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=u=r=t,this},disabled:function(){return!l},lock:function(){return u=t,r||p.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||i&&!u||(t=t||[],t=[e,t.slice?t.slice():t],n?u.push(t):c(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},x.extend({Deferred:function(e){var t=[["resolve","done",x.Callbacks("once memory"),"resolved"],["reject","fail",x.Callbacks("once memory"),"rejected"],["notify","progress",x.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return x.Deferred(function(n){x.each(t,function(t,o){var a=o[0],s=x.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&x.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?x.extend(e,r):r}},i={};return r.pipe=r.then,x.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var s,l,u,t=0,n=g.call(arguments),r=n.length,i=1!==r||e&&x.isFunction(e.promise)?r:0,o=1===i?e:x.Deferred(),a=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?g.call(arguments):r,n===s?o.notifyWith(t,n):--i||o.resolveWith(t,n)}};if(r>1)for(s=Array(r),l=Array(r),u=Array(r);r>t;t++)n[t]&&x.isFunction(n[t].promise)?n[t].promise().done(a(t,u,n)).fail(o.reject).progress(a(t,l,s)):--i;return i||o.resolveWith(u,n),o.promise()}}),x.support=function(t){var n,r,o,s,l,u,c,p,f,d=a.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*")||[],r=d.getElementsByTagName("a")[0],!r||!r.style||!n.length)return t;s=a.createElement("select"),u=s.appendChild(a.createElement("option")),o=d.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute="t"!==d.className,t.leadingWhitespace=3===d.firstChild.nodeType,t.tbody=!d.getElementsByTagName("tbody").length,t.htmlSerialize=!!d.getElementsByTagName("link").length,t.style=/top/.test(r.getAttribute("style")),t.hrefNormalized="/a"===r.getAttribute("href"),t.opacity=/^0.5/.test(r.style.opacity),t.cssFloat=!!r.style.cssFloat,t.checkOn=!!o.value,t.optSelected=u.selected,t.enctype=!!a.createElement("form").enctype,t.html5Clone="<:nav></:nav>"!==a.createElement("nav").cloneNode(!0).outerHTML,t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!u.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}o=a.createElement("input"),o.setAttribute("value",""),t.input=""===o.getAttribute("value"),o.value="t",o.setAttribute("type","radio"),t.radioValue="t"===o.value,o.setAttribute("checked","t"),o.setAttribute("name","t"),l=a.createDocumentFragment(),l.appendChild(o),t.appendChecked=o.checked,t.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(f in{submit:!0,change:!0,focusin:!0})d.setAttribute(c="on"+f,"t"),t[f+"Bubbles"]=c in e||d.attributes[c].expando===!1;d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===d.style.backgroundClip;for(f in x(t))break;return t.ownLast="0"!==f,x(function(){var n,r,o,s="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",l=a.getElementsByTagName("body")[0];l&&(n=a.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",l.appendChild(n).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=d.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",p=0===o[0].offsetHeight,o[0].style.display="",o[1].style.display="none",t.reliableHiddenOffsets=p&&0===o[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",x.swap(l,null!=l.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===d.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{width:"4px"}).width,r=d.appendChild(a.createElement("div")),r.style.cssText=d.style.cssText=s,r.style.marginRight=r.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof d.style.zoom!==i&&(d.innerHTML="",d.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(l.style.zoom=1)),l.removeChild(n),n=d=o=r=null)}),n=s=l=u=r=o=null,t}({});var B=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,P=/([A-Z])/g;x.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?x.cache[e[x.expando]]:e[x.expando],!!e&&!I(e)},data:function(e,t,n){return R(e,t,n)},removeData:function(e,t){return W(e,t)},_data:function(e,t,n){return R(e,t,n,!0)},_removeData:function(e,t){return W(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&x.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),x.fn.extend({data:function(e,n){var r,i,o=null,a=0,s=this[0];if(e===t){if(this.length&&(o=x.data(s),1===s.nodeType&&!x._data(s,"parsedAttrs"))){for(r=s.attributes;r.length>a;a++)i=r[a].name,0===i.indexOf("data-")&&(i=x.camelCase(i.slice(5)),$(s,i,o[i]));x._data(s,"parsedAttrs",!0)}return o}return"object"==typeof e?this.each(function(){x.data(this,e)}):arguments.length>1?this.each(function(){x.data(this,e,n)}):s?$(s,e,x.data(s,e)):null},removeData:function(e){return this.each(function(){x.removeData(this,e)})}}),x.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=x._data(e,n),r&&(!i||x.isArray(r)?i=x._data(e,n,x.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=x.queue(e,t),r=n.length,i=n.shift(),o=x._queueHooks(e,t),a=function(){x.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),
!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return x._data(e,n)||x._data(e,n,{empty:x.Callbacks("once memory").add(function(){x._removeData(e,t+"queue"),x._removeData(e,n)})})}}),x.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?x.queue(this[0],e):n===t?this:this.each(function(){var t=x.queue(this,e,n);x._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&x.dequeue(this,e)})},dequeue:function(e){return this.each(function(){x.dequeue(this,e)})},delay:function(e,t){return e=x.fx?x.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,o=x.Deferred(),a=this,s=this.length,l=function(){--i||o.resolveWith(a,[a])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";s--;)r=x._data(a[s],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(l));return l(),o.promise(n)}});var z,X,U=/[\t\r\n\f]/g,V=/\r/g,Y=/^(?:input|select|textarea|button|object)$/i,J=/^(?:a|area)$/i,G=/^(?:checked|selected)$/i,Q=x.support.getSetAttribute,K=x.support.input;x.fn.extend({attr:function(e,t){return x.access(this,x.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){x.removeAttr(this,e)})},prop:function(e,t){return x.access(this,x.prop,e,t,arguments.length>1)},removeProp:function(e){return e=x.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,l="string"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(T)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(U," "):" ")){for(o=0;i=t[o++];)0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=x.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,l=0===arguments.length||"string"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(T)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(U," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");n.className=e?x.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):x.isFunction(e)?this.each(function(n){x(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,r=0,o=x(this),a=e.match(T)||[];t=a[r++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else(n===i||"boolean"===n)&&(this.className&&x._data(this,"__className__",this.className),this.className=this.className||e===!1?"":x._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(U," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];return arguments.length?(i=x.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=i?e.call(this,n,x(this).val()):e,null==o?o="":"number"==typeof o?o+="":x.isArray(o)&&(o=x.map(o,function(e){return null==e?"":e+""})),r=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,o,"value")!==t||(this.value=o))})):o?(r=x.valHooks[o.type]||x.valHooks[o.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(o,"value"))!==t?n:(n=o.value,"string"==typeof n?n.replace(V,""):null==n?"":n)):void 0}}),x.extend({valHooks:{option:{get:function(e){var t=x.find.attr(e,"value");return null!=t?t:e.text}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,l=0>i?s:o?i:0;s>l;l++)if(n=r[l],!(!n.selected&&l!==i||(x.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&x.nodeName(n.parentNode,"optgroup"))){if(t=x(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=x.makeArray(t),a=i.length;a--;)r=i[a],(r.selected=x.inArray(x(r).val(),o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}},attr:function(e,n,r){var o,a,s=e.nodeType;return e&&3!==s&&8!==s&&2!==s?typeof e.getAttribute===i?x.prop(e,n,r):(1===s&&x.isXMLDoc(e)||(n=n.toLowerCase(),o=x.attrHooks[n]||(x.expr.match.bool.test(n)?X:z)),r===t?o&&"get"in o&&null!==(a=o.get(e,n))?a:(a=x.find.attr(e,n),null==a?t:a):null!==r?o&&"set"in o&&(a=o.set(e,r,n))!==t?a:(e.setAttribute(n,r+""),r):(x.removeAttr(e,n),t)):void 0},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(T);if(o&&1===e.nodeType)for(;n=o[i++];)r=x.propFix[n]||n,x.expr.match.bool.test(n)?K&&Q||!G.test(n)?e[r]=!1:e[x.camelCase("default-"+n)]=e[r]=!1:x.attr(e,n,""),e.removeAttribute(Q?n:r)},attrHooks:{type:{set:function(e,t){if(!x.support.radioValue&&"radio"===t&&x.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,r){var i,o,a,s=e.nodeType;return e&&3!==s&&8!==s&&2!==s?(a=1!==s||!x.isXMLDoc(e),a&&(n=x.propFix[n]||n,o=x.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&null!==(i=o.get(e,n))?i:e[n]):void 0},propHooks:{tabIndex:{get:function(e){var t=x.find.attr(e,"tabindex");return t?parseInt(t,10):Y.test(e.nodeName)||J.test(e.nodeName)&&e.href?0:-1}}}}),X={set:function(e,t,n){return t===!1?x.removeAttr(e,n):K&&Q||!G.test(n)?e.setAttribute(!Q&&x.propFix[n]||n,n):e[x.camelCase("default-"+n)]=e[n]=!0,n}},x.each(x.expr.match.bool.source.match(/\w+/g),function(e,n){var r=x.expr.attrHandle[n]||x.find.attr;x.expr.attrHandle[n]=K&&Q||!G.test(n)?function(e,n,i){var o=x.expr.attrHandle[n],a=i?t:(x.expr.attrHandle[n]=t)!=r(e,n,i)?n.toLowerCase():null;return x.expr.attrHandle[n]=o,a}:function(e,n,r){return r?t:e[x.camelCase("default-"+n)]?n.toLowerCase():null}}),K&&Q||(x.attrHooks.value={set:function(e,n,r){return x.nodeName(e,"input")?(e.defaultValue=n,t):z&&z.set(e,n,r)}}),Q||(z={set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},x.expr.attrHandle.id=x.expr.attrHandle.name=x.expr.attrHandle.coords=function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&""!==i.value?i.value:null},x.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&r.specified?r.value:t},set:z.set},x.attrHooks.contenteditable={set:function(e,t,n){z.set(e,""===t?!1:t,n)}},x.each(["width","height"],function(e,n){x.attrHooks[n]={set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}}})),x.support.hrefNormalized||x.each(["href","src"],function(e,t){x.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),x.support.style||(x.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),x.support.optSelected||(x.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.support.enctype||(x.propFix.enctype="encoding"),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(e,n){return x.isArray(n)?e.checked=x.inArray(x(e).val(),n)>=0:t}},x.support.checkOn||(x.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;x.event={global:{},add:function(e,n,r,o,a){var s,l,u,c,p,f,d,h,g,m,y,v=x._data(e);if(v){for(r.handler&&(c=r,r=c.handler,a=c.selector),r.guid||(r.guid=x.guid++),(l=v.events)||(l=v.events={}),(f=v.handle)||(f=v.handle=function(e){return typeof x===i||e&&x.event.triggered===e.type?t:x.event.dispatch.apply(f.elem,arguments)},f.elem=e),n=(n||"").match(T)||[""],u=n.length;u--;)s=rt.exec(n[u])||[],g=y=s[1],m=(s[2]||"").split(".").sort(),g&&(p=x.event.special[g]||{},g=(a?p.delegateType:p.bindType)||g,p=x.event.special[g]||{},d=x.extend({type:g,origType:y,data:o,handler:r,guid:r.guid,selector:a,needsContext:a&&x.expr.match.needsContext.test(a),namespace:m.join(".")},c),(h=l[g])||(h=l[g]=[],h.delegateCount=0,p.setup&&p.setup.call(e,o,m,f)!==!1||(e.addEventListener?e.addEventListener(g,f,!1):e.attachEvent&&e.attachEvent("on"+g,f))),p.add&&(p.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),x.event.global[g]=!0);e=null}},remove:function(e,t,n,r,i){var o,a,s,l,u,c,p,f,d,h,g,m=x.hasData(e)&&x._data(e);if(m&&(c=m.events)){for(t=(t||"").match(T)||[""],u=t.length;u--;)if(s=rt.exec(t[u])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){for(p=x.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,f=c[d]||[],s=s[2]&&RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=f.length;o--;)a=f[o],!i&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,p.remove&&p.remove.call(e,a));l&&!f.length&&(p.teardown&&p.teardown.call(e,h,m.handle)!==!1||x.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)x.event.remove(e,d+t[u],n,r,!0);x.isEmptyObject(c)&&(delete m.handle,x._removeData(e,"events"))}},trigger:function(n,r,i,o){var s,l,u,c,p,f,d,h=[i||a],g=v.call(n,"type")?n.type:n,m=v.call(n,"namespace")?n.namespace.split("."):[];if(u=f=i=i||a,3!==i.nodeType&&8!==i.nodeType&&!nt.test(g+x.event.triggered)&&(g.indexOf(".")>=0&&(m=g.split("."),g=m.shift(),m.sort()),l=0>g.indexOf(":")&&"on"+g,n=n[x.expando]?n:new x.Event(g,"object"==typeof n&&n),n.isTrigger=o?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:x.makeArray(r,[n]),p=x.event.special[g]||{},o||!p.trigger||p.trigger.apply(i,r)!==!1)){if(!o&&!p.noBubble&&!x.isWindow(i)){for(c=p.delegateType||g,nt.test(c+g)||(u=u.parentNode);u;u=u.parentNode)h.push(u),f=u;f===(i.ownerDocument||a)&&h.push(f.defaultView||f.parentWindow||e)}for(d=0;(u=h[d++])&&!n.isPropagationStopped();)n.type=d>1?c:p.bindType||g,s=(x._data(u,"events")||{})[n.type]&&x._data(u,"handle"),s&&s.apply(u,r),s=l&&u[l],s&&x.acceptData(u)&&s.apply&&s.apply(u,r)===!1&&n.preventDefault();if(n.type=g,!o&&!n.isDefaultPrevented()&&(!p._default||p._default.apply(h.pop(),r)===!1)&&x.acceptData(i)&&l&&i[g]&&!x.isWindow(i)){f=i[l],f&&(i[l]=null),x.event.triggered=g;try{i[g]()}catch(y){}x.event.triggered=t,f&&(i[l]=f)}return n.result}},dispatch:function(e){e=x.event.fix(e);var n,r,i,o,a,s=[],l=g.call(arguments),u=(x._data(this,"events")||{})[e.type]||[],c=x.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(s=x.event.handlers.call(this,e,u),n=0;(o=s[n++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,a=0;(i=o.handlers[a++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((x.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,l),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],l=n.delegateCount,u=e.target;if(l&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==e.type)){for(o=[],a=0;l>a;a++)i=n[a],r=i.selector+" ",o[r]===t&&(o[r]=i.needsContext?x(r,this).index(u)>=0:x.find(r,this,null,[u]).length),o[r]&&o.push(i);o.length&&s.push({elem:u,handlers:o})}return n.length>l&&s.push({elem:this,handlers:n.slice(l)}),s},fix:function(e){if(e[x.expando])return e;var t,n,r,i=e.type,o=e,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new x.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=o.srcElement||a),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,o,s=n.button,l=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||a,o=i.documentElement,r=i.body,e.pageX=n.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&l&&(e.relatedTarget=l===e.target?n.toElement:l),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==at()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===at()&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},click:{trigger:function(){return x.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t},_default:function(e){return x.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=x.extend(new x.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?x.event.trigger(i,null,t):x.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},x.removeEvent=a.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},x.Event=function(e,n){return this instanceof x.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:ot):this.type=e,n&&x.extend(this,n),this.timeStamp=e&&e.timeStamp||x.now(),this[x.expando]=!0,t):new x.Event(e,n)},x.Event.prototype={isDefaultPrevented:ot,isPropagationStopped:ot,isImmediatePropagationStopped:ot,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},x.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){x.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!x.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),x.support.submitBubbles||(x.event.special.submit={setup:function(){return x.nodeName(this,"form")?!1:(x.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=x.nodeName(n,"input")||x.nodeName(n,"button")?n.form:t;r&&!x._data(r,"submitBubbles")&&(x.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),x._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&x.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return x.nodeName(this,"form")?!1:(x.event.remove(this,"._submit"),t)}}),x.support.changeBubbles||(x.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(x.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),x.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),x.event.simulate("change",this,e,!0)})),!1):(x.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!x._data(t,"changeBubbles")&&(x.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||x.event.simulate("change",this.parentNode,e,!0)}),x._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return x.event.remove(this,"._change"),!Z.test(this.nodeName)}}),x.support.focusinBubbles||x.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){x.event.simulate(t,e.target,x.event.fix(e),!0)};x.event.special[t]={setup:function(){0===n++&&a.addEventListener(e,r,!0)},teardown:function(){0===--n&&a.removeEventListener(e,r,!0)}}}),x.fn.extend({on:function(e,n,r,i,o){var a,s;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=ot;else if(!i)return this;return 1===o&&(s=i,i=function(e){return x().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=x.guid++)),this.each(function(){x.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,x(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=ot),this.each(function(){x.event.remove(this,e,r,n)})},trigger:function(e,t){return this.each(function(){x.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?x.event.trigger(e,n,r,!0):t}});var st=/^.[^:#\[\.,]*$/,lt=/^(?:parents|prev(?:Until|All))/,ut=x.expr.match.needsContext,ct={children:!0,contents:!0,next:!0,prev:!0};x.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(x(e).filter(function(){for(t=0;i>t;t++)if(x.contains(r[t],this))return!0}));for(t=0;i>t;t++)x.find(e,r[t],n);return n=this.pushStack(i>1?x.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t,n=x(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(x.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e||[],!0))},filter:function(e){return this.pushStack(ft(this,e||[],!1))},is:function(e){return!!ft(this,"string"==typeof e&&ut.test(e)?x(e):e||[],!1).length},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=ut.test(e)||"string"!=typeof e?x(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(a?a.index(n)>-1:1===n.nodeType&&x.find.matchesSelector(n,e))){n=o.push(n);break}return this.pushStack(o.length>1?x.unique(o):o)},index:function(e){return e?"string"==typeof e?x.inArray(this[0],x(e)):x.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?x(e,t):x.makeArray(e&&e.nodeType?[e]:e),r=x.merge(this.get(),n);return this.pushStack(x.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),x.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x.dir(e,"parentNode")},parentsUntil:function(e,t,n){return x.dir(e,"parentNode",n)},next:function(e){return pt(e,"nextSibling")},prev:function(e){return pt(e,"previousSibling")},nextAll:function(e){return x.dir(e,"nextSibling")},prevAll:function(e){return x.dir(e,"previousSibling")},nextUntil:function(e,t,n){return x.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return x.dir(e,"previousSibling",n)},siblings:function(e){return x.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return x.sibling(e.firstChild)},contents:function(e){return x.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:x.merge([],e.childNodes)}},function(e,t){x.fn[e]=function(n,r){var i=x.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=x.filter(r,i)),this.length>1&&(ct[e]||(i=x.unique(i)),lt.test(e)&&(i=i.reverse())),this.pushStack(i)}}),x.extend({filter:function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?x.find.matchesSelector(r,e)?[r]:[]:x.find.matches(e,x.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,n,r){for(var i=[],o=e[n];o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!x(o).is(r));)1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var ht="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gt=/ jQuery\d+="(?:null|\d+)"/g,mt=RegExp("<(?:"+ht+")[\\s/>]","i"),yt=/^\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,xt=/<tbody/i,wt=/<|&#?\w+;/,Tt=/<(?:script|style|link)/i,Ct=/^(?:checkbox|radio)$/i,Nt=/checked\s*(?:[^=]|=\s*.checked.)/i,kt=/^$|\/(?:java|ecma)script/i,Et=/^true\/(.*)/,St=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,At={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:x.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},jt=dt(a),Dt=jt.appendChild(a.createElement("div"));At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,x.fn.extend({text:function(e){return x.access(this,function(e){return e===t?x.text(this):this.empty().append((this[0]&&this[0].ownerDocument||a).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Lt(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Lt(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?x.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||x.cleanData(Ft(n)),n.parentNode&&(t&&x.contains(n.ownerDocument,n)&&_t(Ft(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&x.cleanData(Ft(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&x.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return x.clone(this,e,t)})},html:function(e){return x.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(gt,""):t;if(!("string"!=typeof e||Tt.test(e)||!x.support.htmlSerialize&&mt.test(e)||!x.support.leadingWhitespace&&yt.test(e)||At[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(vt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(x.cleanData(Ft(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=x.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),x(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=d.apply([],e);var r,i,o,a,s,l,u=0,c=this.length,p=this,f=c-1,h=e[0],g=x.isFunction(h);if(g||!(1>=c||"string"!=typeof h||x.support.checkClone)&&Nt.test(h))return this.each(function(r){var i=p.eq(r);g&&(e[0]=h.call(this,r,i.html())),i.domManip(e,t,n)});if(c&&(l=x.buildFragment(e,this[0].ownerDocument,!1,!n&&this),r=l.firstChild,1===l.childNodes.length&&(l=r),r)){for(a=x.map(Ft(l,"script"),Ht),o=a.length;c>u;u++)i=l,u!==f&&(i=x.clone(i,!0,!0),o&&x.merge(a,Ft(i,"script"))),t.call(this[u],i,u);if(o)for(s=a[a.length-1].ownerDocument,x.map(a,qt),u=0;o>u;u++)i=a[u],kt.test(i.type||"")&&!x._data(i,"globalEval")&&x.contains(s,i)&&(i.src?x._evalUrl(i.src):x.globalEval((i.text||i.textContent||i.innerHTML||"").replace(St,"")));l=r=null}return this}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){x.fn[e]=function(e){for(var n,r=0,i=[],o=x(e),a=o.length-1;a>=r;r++)n=r===a?this:this.clone(!0),x(o[r])[t](n),h.apply(i,n.get());return this.pushStack(i)}}),x.extend({clone:function(e,t,n){var r,i,o,a,s,l=x.contains(e.ownerDocument,e);if(x.support.html5Clone||x.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Dt.innerHTML=e.outerHTML,Dt.removeChild(o=Dt.firstChild)),!(x.support.noCloneEvent&&x.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||x.isXMLDoc(e)))for(r=Ft(o),s=Ft(e),a=0;null!=(i=s[a]);++a)r[a]&&Ot(i,r[a]);if(t)if(n)for(s=s||Ft(e),r=r||Ft(o),a=0;null!=(i=s[a]);a++)Mt(i,r[a]);else Mt(e,o);return r=Ft(o,"script"),r.length>0&&_t(r,!l&&Ft(e,"script")),r=s=i=null,o},buildFragment:function(e,t,n,r){for(var i,o,a,s,l,u,c,p=e.length,f=dt(t),d=[],h=0;p>h;h++)if(o=e[h],o||0===o)if("object"===x.type(o))x.merge(d,o.nodeType?[o]:o);else if(wt.test(o)){for(s=s||f.appendChild(t.createElement("div")),l=(bt.exec(o)||["",""])[1].toLowerCase(),c=At[l]||At._default,s.innerHTML=c[1]+o.replace(vt,"<$1></$2>")+c[2],i=c[0];i--;)s=s.lastChild;if(!x.support.leadingWhitespace&&yt.test(o)&&d.push(t.createTextNode(yt.exec(o)[0])),!x.support.tbody)for(o="table"!==l||xt.test(o)?"<table>"!==c[1]||xt.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;i--;)x.nodeName(u=o.childNodes[i],"tbody")&&!u.childNodes.length&&o.removeChild(u);for(x.merge(d,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=f.lastChild}else d.push(t.createTextNode(o));for(s&&f.removeChild(s),x.support.appendChecked||x.grep(Ft(d,"input"),Bt),h=0;o=d[h++];)if((!r||-1===x.inArray(o,r))&&(a=x.contains(o.ownerDocument,o),s=Ft(f.appendChild(o),"script"),a&&_t(s),n))for(i=0;o=s[i++];)kt.test(o.type||"")&&n.push(o);return s=null,f},cleanData:function(e,t){for(var n,r,o,a,s=0,l=x.expando,u=x.cache,c=x.support.deleteExpando,f=x.event.special;null!=(n=e[s]);s++)if((t||x.acceptData(n))&&(o=n[l],a=o&&u[o])){if(a.events)for(r in a.events)f[r]?x.event.remove(n,r):x.removeEvent(n,r,a.handle);u[o]&&(delete u[o],c?delete n[l]:typeof n.removeAttribute!==i?n.removeAttribute(l):n[l]=null,p.push(o))}},_evalUrl:function(e){return x.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),x.fn.extend({wrapAll:function(e){if(x.isFunction(e))return this.each(function(t){x(this).wrapAll(e.call(this,t))});if(this[0]){var t=x(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return x.isFunction(e)?this.each(function(t){x(this).wrapInner(e.call(this,t))}):this.each(function(){var t=x(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=x.isFunction(e);return this.each(function(n){x(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){x.nodeName(this,"body")||x(this).replaceWith(this.childNodes)}).end()}});var Pt,Rt,Wt,$t=/alpha\([^)]*\)/i,It=/opacity\s*=\s*([^)]*)/,zt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Ut=/^margin/,Vt=RegExp("^("+w+")(.*)$","i"),Yt=RegExp("^("+w+")(?!px)[a-z%]+$","i"),Jt=RegExp("^([+-])=("+w+")","i"),Gt={BODY:"block"},Qt={position:"absolute",visibility:"hidden",display:"block"},Kt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];x.fn.extend({css:function(e,n){return x.access(this,function(e,n,r){var i,o,a={},s=0;if(x.isArray(n)){for(o=Rt(e),i=n.length;i>s;s++)a[n[s]]=x.css(e,n[s],!1,o);return a}return r!==t?x.style(e,n,r):x.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){nn(this)?x(this).show():x(this).hide()})}}),x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Wt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":x.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,l=x.camelCase(n),u=e.style;if(n=x.cssProps[l]||(x.cssProps[l]=tn(u,l)),s=x.cssHooks[n]||x.cssHooks[l],r===t)return s&&"get"in s&&(o=s.get(e,!1,i))!==t?o:u[n];if(a=typeof r,"string"===a&&(o=Jt.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(x.css(e,n)),a="number"),!(null==r||"number"===a&&isNaN(r)||("number"!==a||x.cssNumber[l]||(r+="px"),x.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(u[n]="inherit"),s&&"set"in s&&(r=s.set(e,r,i))===t)))try{u[n]=r}catch(c){}}},css:function(e,n,r,i){var o,a,s,l=x.camelCase(n);return n=x.cssProps[l]||(x.cssProps[l]=tn(e.style,l)),s=x.cssHooks[n]||x.cssHooks[l],s&&"get"in s&&(a=s.get(e,!0,r)),a===t&&(a=Wt(e,n,i)),"normal"===a&&n in Kt&&(a=Kt[n]),""===r||r?(o=parseFloat(a),r===!0||x.isNumeric(o)?o||0:a):a}}),e.getComputedStyle?(Rt=function(t){return e.getComputedStyle(t,null)},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),l=s?s.getPropertyValue(n)||s[n]:t,u=e.style;return s&&(""!==l||x.contains(e.ownerDocument,e)||(l=x.style(e,n)),Yt.test(l)&&Ut.test(n)&&(i=u.width,o=u.minWidth,a=u.maxWidth,u.minWidth=u.maxWidth=u.width=l,l=s.width,u.width=i,u.minWidth=o,u.maxWidth=a)),l}):a.documentElement.currentStyle&&(Rt=function(e){return e.currentStyle},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),l=s?s[n]:t,u=e.style;return null==l&&u&&u[n]&&(l=u[n]),Yt.test(l)&&!zt.test(n)&&(i=u.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),u.left="fontSize"===n?"1em":l,l=u.pixelLeft+"px",u.left=i,a&&(o.left=a)),""===l?"auto":l}),x.each(["height","width"],function(e,n){x.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(x.css(e,"display"))?x.swap(e,Qt,function(){return sn(e,n,i)}):sn(e,n,i):t},set:function(e,t,r){var i=r&&Rt(e);return on(e,t,r?an(e,n,r,x.support.boxSizing&&"border-box"===x.css(e,"boxSizing",!1,i),i):0)}}}),x.support.opacity||(x.cssHooks.opacity={get:function(e,t){return It.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=x.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===x.trim(o.replace($t,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=$t.test(o)?o.replace($t,i):o+" "+i)}}),x(function(){x.support.reliableMarginRight||(x.cssHooks.marginRight={get:function(e,n){return n?x.swap(e,{display:"inline-block"},Wt,[e,"marginRight"]):t}}),!x.support.pixelPosition&&x.fn.position&&x.each(["top","left"],function(e,n){x.cssHooks[n]={get:function(e,r){return r?(r=Wt(e,n),Yt.test(r)?x(e).position()[n]+"px":r):t}}})}),x.expr&&x.expr.filters&&(x.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!x.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||x.css(e,"display"));
},x.expr.filters.visible=function(e){return!x.expr.filters.hidden(e)}),x.each({margin:"",padding:"",border:"Width"},function(e,t){x.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+Zt[r]+t]=o[r]||o[r-2]||o[0];return i}},Ut.test(e)||(x.cssHooks[e+t].set=on)});var cn=/%20/g,pn=/\[\]$/,fn=/\r?\n/g,dn=/^(?:submit|button|image|reset|file)$/i,hn=/^(?:input|select|textarea|keygen)/i;x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=x.prop(this,"elements");return e?x.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!x(this).is(":disabled")&&hn.test(this.nodeName)&&!dn.test(e)&&(this.checked||!Ct.test(e))}).map(function(e,t){var n=x(this).val();return null==n?null:x.isArray(n)?x.map(n,function(e){return{name:t.name,value:e.replace(fn,"\r\n")}}):{name:t.name,value:n.replace(fn,"\r\n")}}).get()}}),x.param=function(e,n){var r,i=[],o=function(e,t){t=x.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=x.ajaxSettings&&x.ajaxSettings.traditional),x.isArray(e)||e.jquery&&!x.isPlainObject(e))x.each(e,function(){o(this.name,this.value)});else for(r in e)gn(r,e[r],n,o);return i.join("&").replace(cn,"+")},x.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){x.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),x.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var mn,yn,vn=x.now(),bn=/\?/,xn=/#.*$/,wn=/([?&])_=[^&]*/,Tn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Cn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Nn=/^(?:GET|HEAD)$/,kn=/^\/\//,En=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Sn=x.fn.load,An={},jn={},Dn="*/".concat("*");try{yn=o.href}catch(Ln){yn=a.createElement("a"),yn.href="",yn=yn.href}mn=En.exec(yn.toLowerCase())||[],x.fn.load=function(e,n,r){if("string"!=typeof e&&Sn)return Sn.apply(this,arguments);var i,o,a,s=this,l=e.indexOf(" ");return l>=0&&(i=e.slice(l,e.length),e=e.slice(0,l)),x.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(a="POST"),s.length>0&&x.ajax({url:e,type:a,dataType:"html",data:n}).done(function(e){o=arguments,s.html(i?x("<div>").append(x.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){s.each(r,o||[e.responseText,t,e])}),this},x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){x.fn[t]=function(e){return this.on(t,e)}}),x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yn,type:"GET",isLocal:Cn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Dn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":x.parseJSON,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?_n(_n(e,x.ajaxSettings),t):_n(x.ajaxSettings,e)},ajaxPrefilter:Hn(An),ajaxTransport:Hn(jn),ajax:function(e,n){function k(e,n,r,i){var c,y,v,w,T,N=n;2!==b&&(b=2,s&&clearTimeout(s),u=t,a=i||"",C.readyState=e>0?4:0,c=e>=200&&300>e||304===e,r&&(w=Mn(p,C,r)),w=On(p,w,C,c),c?(p.ifModified&&(T=C.getResponseHeader("Last-Modified"),T&&(x.lastModified[o]=T),T=C.getResponseHeader("etag"),T&&(x.etag[o]=T)),204===e||"HEAD"===p.type?N="nocontent":304===e?N="notmodified":(N=w.state,y=w.data,v=w.error,c=!v)):(v=N,(e||!N)&&(N="error",0>e&&(e=0))),C.status=e,C.statusText=(n||N)+"",c?h.resolveWith(f,[y,N,C]):h.rejectWith(f,[C,N,v]),C.statusCode(m),m=t,l&&d.trigger(c?"ajaxSuccess":"ajaxError",[C,p,c?y:v]),g.fireWith(f,[C,N]),l&&(d.trigger("ajaxComplete",[C,p]),--x.active||x.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var r,i,o,a,s,l,u,c,p=x.ajaxSetup({},n),f=p.context||p,d=p.context&&(f.nodeType||f.jquery)?x(f):x.event,h=x.Deferred(),g=x.Callbacks("once memory"),m=p.statusCode||{},y={},v={},b=0,w="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!c)for(c={};t=Tn.exec(a);)c[t[1].toLowerCase()]=t[2];t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return b||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else C.always(e[C.status]);return this},abort:function(e){var t=e||w;return u&&u.abort(t),k(0,t),this}};if(h.promise(C).complete=g.add,C.success=C.done,C.error=C.fail,p.url=((e||p.url||yn)+"").replace(xn,"").replace(kn,mn[1]+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=x.trim(p.dataType||"*").toLowerCase().match(T)||[""],null==p.crossDomain&&(r=En.exec(p.url.toLowerCase()),p.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(mn[3]||("http:"===mn[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=x.param(p.data,p.traditional)),qn(An,p,n,C),2===b)return C;l=p.global,l&&0===x.active++&&x.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Nn.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(bn.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=wn.test(o)?o.replace(wn,"$1_="+vn++):o+(bn.test(o)?"&":"?")+"_="+vn++)),p.ifModified&&(x.lastModified[o]&&C.setRequestHeader("If-Modified-Since",x.lastModified[o]),x.etag[o]&&C.setRequestHeader("If-None-Match",x.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&C.setRequestHeader("Content-Type",p.contentType),C.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Dn+"; q=0.01":""):p.accepts["*"]);for(i in p.headers)C.setRequestHeader(i,p.headers[i]);if(p.beforeSend&&(p.beforeSend.call(f,C,p)===!1||2===b))return C.abort();w="abort";for(i in{success:1,error:1,complete:1})C[i](p[i]);if(u=qn(jn,p,n,C)){C.readyState=1,l&&d.trigger("ajaxSend",[C,p]),p.async&&p.timeout>0&&(s=setTimeout(function(){C.abort("timeout")},p.timeout));try{b=1,u.send(y,k)}catch(N){if(!(2>b))throw N;k(-1,N)}}else k(-1,"No Transport");return C},getJSON:function(e,t,n){return x.get(e,t,n,"json")},getScript:function(e,n){return x.get(e,t,n,"script")}}),x.each(["get","post"],function(e,n){x[n]=function(e,r,i,o){return x.isFunction(r)&&(o=o||i,i=r,r=t),x.ajax({url:e,type:n,dataType:o,data:r,success:i})}}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return x.globalEval(e),e}}}),x.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),x.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=a.head||x("head")[0]||a.documentElement;return{send:function(t,i){n=a.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var Fn=[],Bn=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Fn.pop()||x.expando+"_"+vn++;return this[e]=!0,e}}),x.ajaxPrefilter("json jsonp",function(n,r,i){var o,a,s,l=n.jsonp!==!1&&(Bn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bn.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=x.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(Bn,"$1"+o):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return s||x.error(o+" was not called"),s[0]},n.dataTypes[0]="json",a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=r.jsonpCallback,Fn.push(o)),s&&x.isFunction(a)&&a(s[0]),s=a=t}),"script"):t});var Pn,Rn,Wn=0,$n=e.ActiveXObject&&function(){var e;for(e in Pn)Pn[e](t,!0)};x.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&In()||zn()}:In,Rn=x.ajaxSettings.xhr(),x.support.cors=!!Rn&&"withCredentials"in Rn,Rn=x.support.ajax=!!Rn,Rn&&x.ajaxTransport(function(n){if(!n.crossDomain||x.support.cors){var r;return{send:function(i,o){var a,s,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)l[s]=n.xhrFields[s];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(s in i)l.setRequestHeader(s,i[s])}catch(u){}l.send(n.hasContent&&n.data||null),r=function(e,i){var s,u,c,p;try{if(r&&(i||4===l.readyState))if(r=t,a&&(l.onreadystatechange=x.noop,$n&&delete Pn[a]),i)4!==l.readyState&&l.abort();else{p={},s=l.status,u=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(p.text=l.responseText);try{c=l.statusText}catch(f){c=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=p.text?200:404}}catch(d){i||o(-1,d)}p&&o(s,c,p,u)},n.async?4===l.readyState?setTimeout(r):(a=++Wn,$n&&(Pn||(Pn={},x(e).unload($n)),Pn[a]=r),l.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Un,Vn=/^(?:toggle|show|hide)$/,Yn=RegExp("^(?:([+-])=|)("+w+")([a-z%]*)$","i"),Jn=/queueHooks$/,Gn=[nr],Qn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Yn.exec(t),o=i&&i[3]||(x.cssNumber[e]?"":"px"),a=(x.cssNumber[e]||"px"!==o&&+r)&&Yn.exec(x.css(n.elem,e)),s=1,l=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do s=s||".5",a/=s,x.style(n.elem,e,a+o);while(s!==(s=n.cur()/r)&&1!==s&&--l)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};x.Animation=x.extend(er,{tweener:function(e,t){x.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],Qn[n]=Qn[n]||[],Qn[n].unshift(t)},prefilter:function(e,t){t?Gn.unshift(e):Gn.push(e)}}),x.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(x.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=x.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){x.fx.step[e.prop]?x.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[x.cssProps[e.prop]]||x.cssHooks[e.prop])?x.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},x.each(["toggle","show","hide"],function(e,t){var n=x.fn[t];x.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),x.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=x.isEmptyObject(e),o=x.speed(t,n,r),a=function(){var t=er(this,x.extend({},e),o);(i||x._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=x.timers,a=x._data(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&Jn.test(n)&&i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&x.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=x._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=x.timers,a=r?r.length:0;for(n.finish=!0,x.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),x.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){x.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),x.speed=function(e,t,n){var r=e&&"object"==typeof e?x.extend({},e):{complete:n||!n&&t||x.isFunction(e)&&e,duration:e,easing:n&&t||t&&!x.isFunction(t)&&t};return r.duration=x.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in x.fx.speeds?x.fx.speeds[r.duration]:x.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){x.isFunction(r.old)&&r.old.call(this),r.queue&&x.dequeue(this,r.queue)},r},x.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},x.timers=[],x.fx=rr.prototype.init,x.fx.tick=function(){var e,n=x.timers,r=0;for(Xn=x.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||x.fx.stop(),Xn=t},x.fx.timer=function(e){e()&&x.timers.push(e)&&x.fx.start()},x.fx.interval=13,x.fx.start=function(){Un||(Un=setInterval(x.fx.tick,x.fx.interval))},x.fx.stop=function(){clearInterval(Un),Un=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fx.step={},x.expr&&x.expr.filters&&(x.expr.filters.animated=function(e){return x.grep(x.timers,function(t){return e===t.elem}).length}),x.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){x.offset.setOffset(this,e,t)});var n,r,o={top:0,left:0},a=this[0],s=a&&a.ownerDocument;return s?(n=s.documentElement,x.contains(n,a)?(typeof a.getBoundingClientRect!==i&&(o=a.getBoundingClientRect()),r=or(s),{top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o):void 0},x.offset={setOffset:function(e,t,n){var r=x.css(e,"position");"static"===r&&(e.style.position="relative");var p,f,i=x(e),o=i.offset(),a=x.css(e,"top"),s=x.css(e,"left"),l=("absolute"===r||"fixed"===r)&&x.inArray("auto",[a,s])>-1,u={},c={};l?(c=i.position(),p=c.top,f=c.left):(p=parseFloat(a)||0,f=parseFloat(s)||0),x.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(u.top=t.top-o.top+p),null!=t.left&&(u.left=t.left-o.left+f),"using"in t?t.using.call(e,u):i.css(u)}},x.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===x.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),x.nodeName(e[0],"html")||(n=e.offset()),n.top+=x.css(e[0],"borderTopWidth",!0),n.left+=x.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-x.css(r,"marginTop",!0),left:t.left-n.left-x.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||s;e&&!x.nodeName(e,"html")&&"static"===x.css(e,"position");)e=e.offsetParent;return e||s})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);x.fn[e]=function(i){return x.access(this,function(e,i,o){var a=or(e);return o===t?a?n in a?a[n]:a.document.documentElement[i]:e[i]:(a?a.scrollTo(r?x(a).scrollLeft():o,r?o:x(a).scrollTop()):e[i]=o,t)},e,i,arguments.length,null)}}),x.each({Height:"height",Width:"width"},function(e,n){x.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){x.fn[i]=function(i,o){var a=arguments.length&&(r||"boolean"!=typeof i),s=r||(i===!0||o===!0?"margin":"border");return x.access(this,function(n,r,i){var o;return x.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):i===t?x.css(n,r,s):x.style(n,r,i,s)},n,a?i:t,a,null)}})}),x.fn.size=function(){return this.length},x.fn.andSelf=x.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=x:(e.jQuery=e.$=x,"function"==typeof define&&define.amd&&define("jquery",[],function(){return x}))}(window),function(t,e){function i(e,i){var n,o,a,r=e.nodeName.toLowerCase();return"area"===r?(n=e.parentNode,o=n.name,e.href&&o&&"map"===n.nodeName.toLowerCase()?(a=t("img[usemap=#"+o+"]")[0],!!a&&s(a)):!1):(/input|select|textarea|button|object/.test(r)?!e.disabled:"a"===r?e.href||i:i)&&s(e)}function s(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var n=0,o=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(i,s){return"number"==typeof i?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),s&&s.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(i){if(i!==e)return this.css("zIndex",i);if(this.length)for(var s,n,o=t(this[0]);o.length&&o[0]!==document;){if(s=o.css("position"),("absolute"===s||"relative"===s||"fixed"===s)&&(n=parseInt(o.css("zIndex"),10),!isNaN(n)&&0!==n))return n;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,s){return!!t.data(e,s[3])},focusable:function(e){return i(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var s=t.attr(e,"tabindex"),n=isNaN(s);return(n||s>=0)&&i(e,!n)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(i,s){function n(e,i,s,n){return t.each(o,function(){i-=parseFloat(t.css(e,"padding"+this))||0,s&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),n&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var o="Width"===s?["Left","Right"]:["Top","Bottom"],a=s.toLowerCase(),r={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+s]=function(i){return i===e?r["inner"+s].call(this):this.each(function(){t(this).css(a,n(this,i)+"px")})},t.fn["outer"+s]=function(e,i){return"number"!=typeof e?r["outer"+s].call(this,e):this.each(function(){t(this).css(a,n(this,e,!0,i)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,i,s){var n,o=t.ui[e].prototype;for(n in s)o.plugins[n]=o.plugins[n]||[],o.plugins[n].push([i,s[n]])},call:function(t,e,i){var s,n=t.plugins[e];if(n&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(s=0;n.length>s;s++)t.options[n[s][0]]&&n[s][1].apply(t.element,i)}},hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return e[s]>0?!0:(e[s]=1,n=e[s]>0,e[s]=0,n)}})}(jQuery),function(t,e){var i=0,s=Array.prototype.slice,n=t.cleanData;t.cleanData=function(e){for(var i,s=0;null!=(i=e[s]);s++)try{t(i).triggerHandler("remove")}catch(o){}n(e)},t.widget=function(i,s,n){var o,a,r,h,l={},c=i.split(".")[0];i=i.split(".")[1],o=c+"-"+i,n||(n=s,s=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[c]=t[c]||{},a=t[c][i],r=t[c][i]=function(t,i){return this._createWidget?(arguments.length&&this._createWidget(t,i),e):new r(t,i)},t.extend(r,a,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),h=new s,h.options=t.widget.extend({},h.options),t.each(n,function(i,n){return t.isFunction(n)?(l[i]=function(){var t=function(){return s.prototype[i].apply(this,arguments)},e=function(t){return s.prototype[i].apply(this,t)};return function(){var i,s=this._super,o=this._superApply;return this._super=t,this._superApply=e,i=n.apply(this,arguments),this._super=s,this._superApply=o,i}}(),e):(l[i]=n,e)}),r.prototype=t.widget.extend(h,{widgetEventPrefix:a?h.widgetEventPrefix:i},l,{constructor:r,namespace:c,widgetName:i,widgetFullName:o}),a?(t.each(a._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,r,i._proto)}),delete a._childConstructors):s._childConstructors.push(r),t.widget.bridge(i,r)},t.widget.extend=function(i){for(var n,o,a=s.call(arguments,1),r=0,h=a.length;h>r;r++)for(n in a[r])o=a[r][n],a[r].hasOwnProperty(n)&&o!==e&&(i[n]=t.isPlainObject(o)?t.isPlainObject(i[n])?t.widget.extend({},i[n],o):t.widget.extend({},o):o);return i},t.widget.bridge=function(i,n){var o=n.prototype.widgetFullName||i;t.fn[i]=function(a){var r="string"==typeof a,h=s.call(arguments,1),l=this;return a=!r&&h.length?t.widget.extend.apply(null,[a].concat(h)):a,r?this.each(function(){var s,n=t.data(this,o);return n?t.isFunction(n[a])&&"_"!==a.charAt(0)?(s=n[a].apply(n,h),s!==n&&s!==e?(l=s&&s.jquery?l.pushStack(s.get()):s,!1):e):t.error("no such method '"+a+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+a+"'")}):this.each(function(){var e=t.data(this,o);e?e.option(a||{})._init():t.data(this,o,new n(a,this))}),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,s){s=t(s||this.defaultElement||this)[0],this.element=t(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),s!==this&&(t.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===s&&this.destroy()}}),this.document=t(s.style?s.ownerDocument:s.document||s),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,s){var n,o,a,r=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(r={},n=i.split("."),i=n.shift(),n.length){for(o=r[i]=t.widget.extend({},this.options[i]),a=0;n.length-1>a;a++)o[n[a]]=o[n[a]]||{},o=o[n[a]];if(i=n.pop(),s===e)return o[i]===e?null:o[i];o[i]=s}else{if(s===e)return this.options[i]===e?null:this.options[i];r[i]=s}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,s,n){var o,a=this;"boolean"!=typeof i&&(n=s,s=i,i=!1),n?(s=o=t(s),this.bindings=this.bindings.add(s)):(n=s,s=this.element,o=this.widget()),t.each(n,function(n,r){function h(){return i||a.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof r?a[r]:r).apply(a,arguments):e}"string"!=typeof r&&(h.guid=r.guid=r.guid||h.guid||t.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+a.eventNamespace,u=l[2];u?o.delegate(u,c,h):s.bind(c,h)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?i:n.effect||i:e;n=n||{},"number"==typeof n&&(n={duration:n}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}})}(jQuery),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var s=this,n=1===i.which,o="string"==typeof this.options.cancel&&i.target.nodeName?t(i.target).closest(this.options.cancel).length:!1;return n&&!o&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return s._mouseMove(t)},this._mouseUpDelegate=function(t){return s._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t){t.widget("ui.draggable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var i=this.options;return this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(t(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),
this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",e,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,s=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(s=t.ui.ddmanager.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),"original"!==this.options.helper||t.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1):!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;return n.containment?"window"===n.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===n.containment?void(this.containment=[0,0,t(document).width()-this.helperProportions.width-this.margins.left,(t(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):n.containment.constructor===Array?void(this.containment=n.containment):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=t(n.containment),s=i[0],void(s&&(e="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i))):void(this.containment=null)},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:n.scrollTop(),left:n.scrollLeft()}),{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*s}},_generatePosition:function(e){var i,s,n,o,a=this.options,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=e.pageX,l=e.pageY;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(s=this.relative_container.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(h=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(h=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),a.grid&&(n=a.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,l=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-a.grid[1]:n+a.grid[1]:n,o=a.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,h=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-a.grid[0]:o+a.grid[0]:o)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i){var s=t(this).data("ui-draggable"),n=s.options,o=t.extend({},i,{item:s.element});s.sortables=[],t(n.connectToSortable).each(function(){var i=t.data(this,"ui-sortable");i&&!i.options.disabled&&(s.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",e,o))})},stop:function(e,i){var s=t(this).data("ui-draggable"),n=t.extend({},i,{item:s.element});t.each(s.sortables,function(){this.instance.isOver?(this.instance.isOver=0,s.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===s.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,n))})},drag:function(e,i){var s=t(this).data("ui-draggable"),n=this;t.each(s.sortables,function(){var o=!1,a=this;this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,t.each(s.sortables,function(){return this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this!==a&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(a.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(n).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=s.offset.click.top,this.instance.offset.click.left=s.offset.click.left,this.instance.offset.parent.left-=s.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=s.offset.parent.top-this.instance.offset.parent.top,s._trigger("toSortable",e),s.dropped=this.instance.element,s.currentItem=s.element,this.instance.fromOutside=s),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),s._trigger("fromSortable",e),s.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),i=t(this).data("ui-draggable").options;e.css("cursor")&&(i._cursor=e.css("cursor")),e.css("cursor",i.cursor)},stop:function(){var e=t(this).data("ui-draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i){var s=t(i.helper),n=t(this).data("ui-draggable").options;s.css("opacity")&&(n._opacity=s.css("opacity")),s.css("opacity",n.opacity)},stop:function(e,i){var s=t(this).data("ui-draggable").options;s._opacity&&t(i.helper).css("opacity",s._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("ui-draggable");e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var i=t(this).data("ui-draggable"),s=i.options,n=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(s.axis&&"x"===s.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-e.pageY<s.scrollSensitivity?i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop+s.scrollSpeed:e.pageY-i.overflowOffset.top<s.scrollSensitivity&&(i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-e.pageX<s.scrollSensitivity?i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft+s.scrollSpeed:e.pageX-i.overflowOffset.left<s.scrollSensitivity&&(i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(e.pageY-t(document).scrollTop()<s.scrollSensitivity?n=t(document).scrollTop(t(document).scrollTop()-s.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<s.scrollSensitivity&&(n=t(document).scrollTop(t(document).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(e.pageX-t(document).scrollLeft()<s.scrollSensitivity?n=t(document).scrollLeft(t(document).scrollLeft()-s.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<s.scrollSensitivity&&(n=t(document).scrollLeft(t(document).scrollLeft()+s.scrollSpeed)))),n!==!1&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("ui-draggable"),i=e.options;e.snapElements=[],t(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=t(this),s=i.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:s.top,left:s.left})})},drag:function(e,i){var s,n,o,a,r,h,l,c,u,d,p=t(this).data("ui-draggable"),f=p.options,g=f.snapTolerance,m=i.offset.left,v=m+p.helperProportions.width,_=i.offset.top,b=_+p.helperProportions.height;for(u=p.snapElements.length-1;u>=0;u--)r=p.snapElements[u].left,h=r+p.snapElements[u].width,l=p.snapElements[u].top,c=l+p.snapElements[u].height,r-g>v||m>h+g||l-g>b||_>c+g||!t.contains(p.snapElements[u].item.ownerDocument,p.snapElements[u].item)?(p.snapElements[u].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[u].item})),p.snapElements[u].snapping=!1):("inner"!==f.snapMode&&(s=g>=Math.abs(l-b),n=g>=Math.abs(c-_),o=g>=Math.abs(r-v),a=g>=Math.abs(h-m),s&&(i.position.top=p._convertPositionTo("relative",{top:l-p.helperProportions.height,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r-p.helperProportions.width}).left-p.margins.left),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:h}).left-p.margins.left)),d=s||n||o||a,"outer"!==f.snapMode&&(s=g>=Math.abs(l-_),n=g>=Math.abs(c-b),o=g>=Math.abs(r-m),a=g>=Math.abs(h-v),s&&(i.position.top=p._convertPositionTo("relative",{top:l,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r}).left-p.margins.left),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:h-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[u].snapping&&(s||n||o||a||d)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[u].item})),p.snapElements[u].snapping=s||n||o||a||d)}}),t.ui.plugin.add("draggable","stack",{start:function(){var e,i=this.data("ui-draggable").options,s=t.makeArray(t(i.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});s.length&&(e=parseInt(t(s[0]).css("zIndex"),10)||0,t(s).each(function(i){t(this).css("zIndex",e+i)}),this.css("zIndex",e+s.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i){var s=t(i.helper),n=t(this).data("ui-draggable").options;s.css("zIndex")&&(n._zIndex=s.css("zIndex")),s.css("zIndex",n.zIndex)},stop:function(e,i){var s=t(this).data("ui-draggable").options;s._zIndex&&t(i.helper).css("zIndex",s._zIndex)}})}(jQuery),function(t){function e(t,e,i){return t>e&&e+i>t}t.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e=this.options,i=e.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(i)?i:function(t){return t.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},t.ui.ddmanager.droppables[e.scope]=t.ui.ddmanager.droppables[e.scope]||[],t.ui.ddmanager.droppables[e.scope].push(this),e.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var e=0,i=t.ui.ddmanager.droppables[this.options.scope];i.length>e;e++)i[e]===this&&i.splice(e,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,i){"accept"===e&&(this.accept=t.isFunction(i)?i:function(t){return t.is(i)}),t.Widget.prototype._setOption.apply(this,arguments)},_activate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var s=i||t.ui.ddmanager.current,n=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var e=t.data(this,"ui-droppable");return e.options.greedy&&!e.options.disabled&&e.options.scope===s.options.scope&&e.accept.call(e.element[0],s.currentItem||s.element)&&t.ui.intersect(s,t.extend(e,{offset:e.element.offset()}),e.options.tolerance)?(n=!0,!1):void 0}),n?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(s)),this.element):!1):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(t,i,s){if(!i.offset)return!1;var n,o,a=(t.positionAbs||t.position.absolute).left,r=a+t.helperProportions.width,h=(t.positionAbs||t.position.absolute).top,l=h+t.helperProportions.height,c=i.offset.left,u=c+i.proportions.width,d=i.offset.top,p=d+i.proportions.height;switch(s){case"fit":return a>=c&&u>=r&&h>=d&&p>=l;case"intersect":return a+t.helperProportions.width/2>c&&u>r-t.helperProportions.width/2&&h+t.helperProportions.height/2>d&&p>l-t.helperProportions.height/2;case"pointer":return n=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,o=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,e(o,d,i.proportions.height)&&e(n,c,i.proportions.width);case"touch":return(h>=d&&p>=h||l>=d&&p>=l||d>h&&l>p)&&(a>=c&&u>=a||r>=c&&u>=r||c>a&&r>u);default:return!1}},t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,i){var s,n,o=t.ui.ddmanager.droppables[e.options.scope]||[],a=i?i.type:null,r=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(s=0;o.length>s;s++)if(!(o[s].options.disabled||e&&!o[s].accept.call(o[s].element[0],e.currentItem||e.element))){for(n=0;r.length>n;n++)if(r[n]===o[s].element[0]){o[s].proportions.height=0;continue t}o[s].visible="none"!==o[s].element.css("display"),o[s].visible&&("mousedown"===a&&o[s]._activate.call(o[s],i),o[s].offset=o[s].element.offset(),o[s].proportions={width:o[s].element[0].offsetWidth,height:o[s].element[0].offsetHeight})}},drop:function(e,i){var s=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(e,i){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,o,a=t.ui.intersect(e,this,this.options.tolerance),r=!a&&this.isover?"isout":a&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,o=this.element.parents(":data(ui-droppable)").filter(function(){return t.data(this,"ui-droppable").options.scope===n}),o.length&&(s=t.data(o[0],"ui-droppable"),s.greedyChild="isover"===r)),s&&"isover"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),s&&"isout"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(e,i){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}}}(jQuery),function(t){function e(t){return parseInt(t,10)||0}function i(t){return!isNaN(parseInt(t,10))}t.widget("ui.resizable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var e,i,s,n,o,a=this,r=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},i=0;e.length>i;i++)s=t.trim(e[i]),o="ui-resizable-"+s,n=t("<div class='ui-resizable-handle "+o+"'></div>"),n.css({zIndex:r.zIndex}),"se"===s&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(n);this._renderAxis=function(e){var i,s,n,o;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=t(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(s=t(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(n,o),this._proportionallyResize()),t(this.handles[i]).length},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){a.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(t(this).removeClass("ui-resizable-autohide"),a._handles.show())}).mouseleave(function(){r.disabled||a.resizing||(t(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(e){var i,s,n=!1;for(i in this.handles)s=t(this.handles[i])[0],(s===e.target||t.contains(s,e.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(i){var s,n,o,a=this.options,r=this.element.position(),h=this.element;return this.resizing=!0,/absolute/.test(h.css("position"))?h.css({position:"absolute",top:h.css("top"),left:h.css("left")}):h.is(".ui-draggable")&&h.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy(),s=e(this.helper.css("left")),n=e(this.helper.css("top")),a.containment&&(s+=t(a.containment).scrollLeft()||0,n+=t(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:s,top:n},this.size=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()},this.originalSize=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()},this.originalPosition={left:s,top:n},this.sizeDiff={width:h.outerWidth()-h.width(),height:h.outerHeight()-h.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===o?this.axis+"-resize":o),h.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(e){var i,s=this.helper,n={},o=this.originalMousePosition,a=this.axis,r=this.position.top,h=this.position.left,l=this.size.width,c=this.size.height,u=e.pageX-o.left||0,d=e.pageY-o.top||0,p=this._change[a];return p?(i=p.apply(this,[e,u,d]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),this.position.top!==r&&(n.top=this.position.top+"px"),this.position.left!==h&&(n.left=this.position.left+"px"),this.size.width!==l&&(n.width=this.size.width+"px"),this.size.height!==c&&(n.height=this.size.height+"px"),s.css(n),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(n)||this._trigger("resize",e,this.ui()),!1):!1},_mouseStop:function(e){this.resizing=!1;var i,s,n,o,a,r,h,l=this.options,c=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&t.ui.hasScroll(i[0],"left")?0:c.sizeDiff.height,o=s?0:c.sizeDiff.width,a={width:c.helper.width()-o,height:c.helper.height()-n},r=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,h=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null,l.animate||this.element.css(t.extend(a,{top:h,left:r})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!l.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,s,n,o,a,r=this.options;a={minWidth:i(r.minWidth)?r.minWidth:0,maxWidth:i(r.maxWidth)?r.maxWidth:1/0,minHeight:i(r.minHeight)?r.minHeight:0,maxHeight:i(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||t)&&(e=a.minHeight*this.aspectRatio,n=a.minWidth/this.aspectRatio,s=a.maxHeight*this.aspectRatio,o=a.maxWidth/this.aspectRatio,e>a.minWidth&&(a.minWidth=e),n>a.minHeight&&(a.minHeight=n),a.maxWidth>s&&(a.maxWidth=s),a.maxHeight>o&&(a.maxHeight=o)),this._vBoundaries=a},_updateCache:function(t){this.offset=this.helper.offset(),i(t.left)&&(this.position.left=t.left),i(t.top)&&(this.position.top=t.top),i(t.height)&&(this.size.height=t.height),i(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,s=this.size,n=this.axis;return i(t.height)?t.width=t.height*this.aspectRatio:i(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===n&&(t.left=e.left+(s.width-t.width),t.top=null),"nw"===n&&(t.top=e.top+(s.height-t.height),t.left=e.left+(s.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,s=this.axis,n=i(t.width)&&e.maxWidth&&e.maxWidth<t.width,o=i(t.height)&&e.maxHeight&&e.maxHeight<t.height,a=i(t.width)&&e.minWidth&&e.minWidth>t.width,r=i(t.height)&&e.minHeight&&e.minHeight>t.height,h=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,c=/sw|nw|w/.test(s),u=/nw|ne|n/.test(s);return a&&(t.width=e.minWidth),r&&(t.height=e.minHeight),n&&(t.width=e.maxWidth),o&&(t.height=e.maxHeight),a&&c&&(t.left=h-e.minWidth),n&&c&&(t.left=h-e.maxWidth),r&&u&&(t.top=l-e.minHeight),o&&u&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var t,e,i,s,n,o=this.helper||this.element;for(t=0;this._proportionallyResizeElements.length>t;t++){if(n=this._proportionallyResizeElements[t],!this.borderDif)for(this.borderDif=[],i=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],s=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")],e=0;i.length>e;e++)this.borderDif[e]=(parseInt(i[e],10)||0)+(parseInt(s[e],10)||0);n.css({height:o.height()-this.borderDif[0]-this.borderDif[2]||0,width:o.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),
this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,s=this.originalPosition;return{left:s.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).data("ui-resizable"),s=i.options,n=i._proportionallyResizeElements,o=n.length&&/textarea/i.test(n[0].nodeName),a=o&&t.ui.hasScroll(n[0],"left")?0:i.sizeDiff.height,r=o?0:i.sizeDiff.width,h={width:i.size.width-r,height:i.size.height-a},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(h,c&&l?{top:c,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&t(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var i,s,n,o,a,r,h,l=t(this).data("ui-resizable"),c=l.options,u=l.element,d=c.containment,p=d instanceof t?d.get(0):/parent/.test(d)?u.parent().get(0):d;p&&(l.containerElement=t(p),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(i=t(p),s=[],t(["Top","Right","Left","Bottom"]).each(function(t,n){s[t]=e(i.css("padding"+n))}),l.containerOffset=i.offset(),l.containerPosition=i.position(),l.containerSize={height:i.innerHeight()-s[3],width:i.innerWidth()-s[1]},n=l.containerOffset,o=l.containerSize.height,a=l.containerSize.width,r=t.ui.hasScroll(p,"left")?p.scrollWidth:a,h=t.ui.hasScroll(p)?p.scrollHeight:o,l.parentData={element:p,left:n.left,top:n.top,width:r,height:h}))},resize:function(e){var i,s,n,o,a=t(this).data("ui-resizable"),r=a.options,h=a.containerOffset,l=a.position,c=a._aspectRatio||e.shiftKey,u={top:0,left:0},d=a.containerElement;d[0]!==document&&/static/.test(d.css("position"))&&(u=h),l.left<(a._helper?h.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-h.left:a.position.left-u.left),c&&(a.size.height=a.size.width/a.aspectRatio),a.position.left=r.helper?h.left:0),l.top<(a._helper?h.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-h.top:a.position.top),c&&(a.size.width=a.size.height*a.aspectRatio),a.position.top=a._helper?h.top:0),a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top,i=Math.abs((a._helper?a.offset.left-u.left:a.offset.left-u.left)+a.sizeDiff.width),s=Math.abs((a._helper?a.offset.top-u.top:a.offset.top-h.top)+a.sizeDiff.height),n=a.containerElement.get(0)===a.element.parent().get(0),o=/relative|absolute/.test(a.containerElement.css("position")),n&&o&&(i-=a.parentData.left),i+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-i,c&&(a.size.height=a.size.width/a.aspectRatio)),s+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-s,c&&(a.size.width=a.size.height*a.aspectRatio))},stop:function(){var e=t(this).data("ui-resizable"),i=e.options,s=e.containerOffset,n=e.containerPosition,o=e.containerElement,a=t(e.helper),r=a.offset(),h=a.outerWidth()-e.sizeDiff.width,l=a.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:h,height:l}),e._helper&&!i.animate&&/static/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:h,height:l})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).data("ui-resizable"),i=e.options,s=function(e){t(e).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?s(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):t.each(i.alsoResize,function(t){s(t)})},resize:function(e,i){var s=t(this).data("ui-resizable"),n=s.options,o=s.originalSize,a=s.originalPosition,r={height:s.size.height-o.height||0,width:s.size.width-o.width||0,top:s.position.top-a.top||0,left:s.position.left-a.left||0},h=function(e,s){t(e).each(function(){var e=t(this),n=t(this).data("ui-resizable-alsoresize"),o={},a=s&&s.length?s:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(a,function(t,e){var i=(n[e]||0)+(r[e]||0);i&&i>=0&&(o[e]=i||null)}),e.css(o)})};"object"!=typeof n.alsoResize||n.alsoResize.nodeType?h(n.alsoResize):t.each(n.alsoResize,function(t,e){h(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).data("ui-resizable"),i=e.options,s=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).data("ui-resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).data("ui-resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e=t(this).data("ui-resizable"),i=e.options,s=e.size,n=e.originalSize,o=e.originalPosition,a=e.axis,r="number"==typeof i.grid?[i.grid,i.grid]:i.grid,h=r[0]||1,l=r[1]||1,c=Math.round((s.width-n.width)/h)*h,u=Math.round((s.height-n.height)/l)*l,d=n.width+c,p=n.height+u,f=i.maxWidth&&d>i.maxWidth,g=i.maxHeight&&p>i.maxHeight,m=i.minWidth&&i.minWidth>d,v=i.minHeight&&i.minHeight>p;i.grid=r,m&&(d+=h),v&&(p+=l),f&&(d-=h),g&&(p-=l),/^(se|s|e)$/.test(a)?(e.size.width=d,e.size.height=p):/^(ne)$/.test(a)?(e.size.width=d,e.size.height=p,e.position.top=o.top-u):/^(sw)$/.test(a)?(e.size.width=d,e.size.height=p,e.position.left=o.left-c):(e.size.width=d,e.size.height=p,e.position.top=o.top-u,e.position.left=o.left-c)}})}(jQuery),function(t){t.widget("ui.selectable",t.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){e=t(i.options.filter,i.element[0]),e.addClass("ui-selectee"),e.each(function(){var e=t(this),i=e.offset();t.data(this,"selectable-item",{element:this,$element:e,left:i.left,top:i.top,right:i.left+e.outerWidth(),bottom:i.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=e.addClass("ui-selectee"),this._mouseInit(),this.helper=t("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(e){var i=this,s=this.options;this.opos=[e.pageX,e.pageY],this.options.disabled||(this.selectees=t(s.filter,this.element[0]),this._trigger("start",e),t(s.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=t.data(this,"selectable-item");s.startselected=!0,e.metaKey||e.ctrlKey||(s.$element.removeClass("ui-selected"),s.selected=!1,s.$element.addClass("ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",e,{unselecting:s.element}))}),t(e.target).parents().addBack().each(function(){var s,n=t.data(this,"selectable-item");return n?(s=!e.metaKey&&!e.ctrlKey||!n.$element.hasClass("ui-selected"),n.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger("selecting",e,{selecting:n.element}):i._trigger("unselecting",e,{unselecting:n.element}),!1):void 0}))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var i,s=this,n=this.options,o=this.opos[0],a=this.opos[1],r=e.pageX,h=e.pageY;return o>r&&(i=r,r=o,o=i),a>h&&(i=h,h=a,a=i),this.helper.css({left:o,top:a,width:r-o,height:h-a}),this.selectees.each(function(){var i=t.data(this,"selectable-item"),l=!1;i&&i.element!==s.element[0]&&("touch"===n.tolerance?l=!(i.left>r||o>i.right||i.top>h||a>i.bottom):"fit"===n.tolerance&&(l=i.left>o&&r>i.right&&i.top>a&&h>i.bottom),l?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,s._trigger("selecting",e,{selecting:i.element}))):(i.selecting&&((e.metaKey||e.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),s._trigger("unselecting",e,{unselecting:i.element}))),i.selected&&(e.metaKey||e.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,s._trigger("unselecting",e,{unselecting:i.element})))))}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each(function(){var s=t.data(this,"selectable-item");s.$element.removeClass("ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",e,{unselected:s.element})}),t(".ui-selecting",this.element[0]).each(function(){var s=t.data(this,"selectable-item");s.$element.removeClass("ui-selecting").addClass("ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",e,{selected:s.element})}),this._trigger("stop",e),this.helper.remove(),!1}})}(jQuery),function(t){function e(t,e,i){return t>e&&e+i>t}function i(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))}t.widget("ui.sortable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===t.axis||i(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,i){"disabled"===e?(this.options[e]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,i){var s=null,n=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,o.widgetName+"-item")===o?(s=t(this),!1):void 0}),t.data(e.target,o.widgetName+"-item")===o&&(s=t(e.target)),s&&(!this.options.handle||i||(t(this.options.handle,s).find("*").addBack().each(function(){this===e.target&&(n=!0)}),n))?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(e,i,s){var n,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=t("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,s,n,o,a=this.options,r=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+a.scrollSpeed:e.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+a.scrollSpeed:e.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(e.pageY-t(document).scrollTop()<a.scrollSensitivity?r=t(document).scrollTop(t(document).scrollTop()-a.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<a.scrollSensitivity&&(r=t(document).scrollTop(t(document).scrollTop()+a.scrollSpeed)),e.pageX-t(document).scrollLeft()<a.scrollSensitivity?r=t(document).scrollLeft(t(document).scrollLeft()-a.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<a.scrollSensitivity&&(r=t(document).scrollLeft(t(document).scrollLeft()+a.scrollSpeed))),r!==!1&&t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],o=this._intersectsWithPointer(s),o&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==n&&!t.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],n):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(e,s),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var s=this,n=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){s._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!s.length&&e.key&&s.push(e.key+"="),s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},i.each(function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,o=t.left,a=o+t.width,r=t.top,h=r+t.height,l=this.offset.click.top,c=this.offset.click.left,u="x"===this.options.axis||s+l>r&&h>s+l,d="y"===this.options.axis||e+c>o&&a>e+c,p=u&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:e+this.helperProportions.width/2>o&&a>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(t){var i="x"===this.options.axis||e(this.positionAbs.top+this.offset.click.top,t.top,t.height),s="y"===this.options.axis||e(this.positionAbs.left+this.offset.click.left,t.left,t.width),n=i&&s,o=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return n?this.floating?a&&"right"===a||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(t){var i=e(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),s=e(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&s||"left"===o&&!s:n&&("down"===n&&i||"up"===n&&!i)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i,s,n,o,a=[],r=[],h=this._connectWith();if(h&&e)for(i=h.length-1;i>=0;i--)for(n=t(h[i]),s=n.length-1;s>=0;s--)o=t.data(n[s],this.widgetFullName),o&&o!==this&&!o.options.disabled&&r.push([t.isFunction(o.options.items)?o.options.items.call(o.element):t(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(r.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=r.length-1;i>=0;i--)r[i][0].each(function(){a.push(this)});return t(a)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;e.length>i;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,s,n,o,a,r,h,l,c=this.items,u=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(n=t(d[i]),s=n.length-1;s>=0;s--)o=t.data(n[s],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(u.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(i=u.length-1;i>=0;i--)for(a=u[i][1],r=u[i][0],s=0,l=r.length;l>s;s++)h=t(r[s]),h.data(this.widgetName+"-item",a),c.push({item:h,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,o;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item,e||(s.width=n.outerWidth(),s.height=n.outerHeight()),o=n.offset(),s.left=o.left,s.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,s=e.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=e.currentItem[0].nodeName.toLowerCase(),n=t("<"+s+">",e.document[0]).addClass(i||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===s?e.currentItem.children().each(function(){t("<td>&#160;</td>",e.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(n)}):"img"===s&&n.attr("src",e.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(t,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(s.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),s.placeholder.update(e,e.placeholder)},_contactContainers:function(s){var n,o,a,r,h,l,c,u,d,p,f=null,g=null;for(n=this.containers.length-1;n>=0;n--)if(!t.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(f&&t.contains(this.containers[n].element[0],f.element[0]))continue;f=this.containers[n],g=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",s,this._uiHash(this)),this.containers[n].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[g].containerCache.over||(this.containers[g]._trigger("over",s,this._uiHash(this)),this.containers[g].containerCache.over=1);else{for(a=1e4,r=null,p=f.floating||i(this.currentItem),h=p?"left":"top",l=p?"width":"height",c=this.positionAbs[h]+this.offset.click[h],o=this.items.length-1;o>=0;o--)t.contains(this.containers[g].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(!p||e(this.positionAbs.top+this.offset.click.top,this.items[o].top,this.items[o].height))&&(u=this.items[o].item.offset()[h],d=!1,Math.abs(u-c)>Math.abs(u+this.items[o][l]-c)&&(d=!0,u+=this.items[o][l]),a>Math.abs(u-c)&&(a=Math.abs(u-c),r=this.items[o],this.direction=d?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[g])return;r?this._rearrange(s,r,null,!0):this._rearrange(s,null,this.containers[g].element,!0),this._trigger("change",s,this._uiHash()),this.containers[g]._trigger("change",s,this._uiHash(this)),this.currentContainer=this.containers[g],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[g]._trigger("over",s,this._uiHash(this)),this.containers[g].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"===n.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"===n.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(e=t(n.containment)[0],i=t(n.containment).offset(),s="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())*s}},_generatePosition:function(e){var i,s,n=this.options,o=e.pageX,a=e.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((a-this.originalPageY)/n.grid[1])*n.grid[1],a=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,
s=this.originalPageX+Math.round((o-this.originalPageX)/n.grid[0])*n.grid[0],o=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(t,e){this.reverting=!1;var i,s=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&s.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||s.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(s.push(function(t){this._trigger("remove",t,this._uiHash())}),s.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),s.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)e||s.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(s.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!e){for(this._trigger("beforeStop",t,this._uiHash()),i=0;s.length>i;i++)s[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!e){for(i=0;s.length>i;i++)s[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})}(jQuery),function(t,e){var i="ui-effects-";t.effects={effect:{}},function(t,e){function i(t,e,i){var s=u[e.type]||{};return null==t?i||!e.def?null:e.def:(t=s.floor?~~t:parseFloat(t),isNaN(t)?e.def:s.mod?(t+s.mod)%s.mod:0>t?0:t>s.max?s.max:t)}function s(i){var s=l(),n=s._rgba=[];return i=i.toLowerCase(),f(h,function(t,o){var a,r=o.re.exec(i),h=r&&o.parse(r),l=o.space||"rgba";return h?(a=s[l](h),s[c[l].cache]=a[c[l].cache],n=s._rgba=a._rgba,!1):e}),n.length?("0,0,0,0"===n.join()&&t.extend(n,o.transparent),s):o[i]}function n(t,e,i){return i=(i+1)%1,1>6*i?t+6*(e-t)*i:1>2*i?e:2>3*i?t+6*(e-t)*(2/3-i):t}var o,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],l=t.Color=function(e,i,s,n){return new t.Color.fn.parse(e,i,s,n)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},d=l.support={},p=t("<p>")[0],f=t.each;p.style.cssText="background-color:rgba(1,1,1,.5)",d.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(c,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),l.fn=t.extend(l.prototype,{parse:function(n,a,r,h){if(n===e)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=t(n).css(a),a=e);var u=this,d=t.type(n),p=this._rgba=[];return a!==e&&(n=[n,a,r,h],d="array"),"string"===d?this.parse(s(n)||o._default):"array"===d?(f(c.rgba.props,function(t,e){p[e.idx]=i(n[e.idx],e)}),this):"object"===d?(n instanceof l?f(c,function(t,e){n[e.cache]&&(u[e.cache]=n[e.cache].slice())}):f(c,function(e,s){var o=s.cache;f(s.props,function(t,e){if(!u[o]&&s.to){if("alpha"===t||null==n[t])return;u[o]=s.to(u._rgba)}u[o][e.idx]=i(n[t],e,!0)}),u[o]&&0>t.inArray(null,u[o].slice(0,3))&&(u[o][3]=1,s.from&&(u._rgba=s.from(u[o])))}),this):e},is:function(t){var i=l(t),s=!0,n=this;return f(c,function(t,o){var a,r=i[o.cache];return r&&(a=n[o.cache]||o.to&&o.to(n._rgba)||[],f(o.props,function(t,i){return null!=r[i.idx]?s=r[i.idx]===a[i.idx]:e})),s}),s},_space:function(){var t=[],e=this;return f(c,function(i,s){e[s.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var s=l(t),n=s._space(),o=c[n],a=0===this.alpha()?l("transparent"):this,r=a[o.cache]||o.to(a._rgba),h=r.slice();return s=s[o.cache],f(o.props,function(t,n){var o=n.idx,a=r[o],l=s[o],c=u[n.type]||{};null!==l&&(null===a?h[o]=l:(c.mod&&(l-a>c.mod/2?a+=c.mod:a-l>c.mod/2&&(a-=c.mod)),h[o]=i((l-a)*e+a,n)))}),this[n](h)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=l(e)._rgba;return l(t.map(i,function(t,e){return(1-s)*n[e]+s*t}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),s=i.pop();return e&&i.push(~~(255*s)),"#"+t.map(i,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,c.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,s=t[0]/255,n=t[1]/255,o=t[2]/255,a=t[3],r=Math.max(s,n,o),h=Math.min(s,n,o),l=r-h,c=r+h,u=.5*c;return e=h===r?0:s===r?60*(n-o)/l+360:n===r?60*(o-s)/l+120:60*(s-n)/l+240,i=0===l?0:.5>=u?l/c:l/(2-c),[Math.round(e)%360,i,u,null==a?1:a]},c.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],s=t[2],o=t[3],a=.5>=s?s*(1+i):s+i-s*i,r=2*s-a;return[Math.round(255*n(r,a,e+1/3)),Math.round(255*n(r,a,e)),Math.round(255*n(r,a,e-1/3)),o]},f(c,function(s,n){var o=n.props,a=n.cache,h=n.to,c=n.from;l.fn[s]=function(s){if(h&&!this[a]&&(this[a]=h(this._rgba)),s===e)return this[a].slice();var n,r=t.type(s),u="array"===r||"object"===r?s:arguments,d=this[a].slice();return f(o,function(t,e){var s=u["object"===r?t:e.idx];null==s&&(s=d[e.idx]),d[e.idx]=i(s,e)}),c?(n=l(c(d)),n[a]=d,n):l(d)},f(o,function(e,i){l.fn[e]||(l.fn[e]=function(n){var o,a=t.type(n),h="alpha"===e?this._hsla?"hsla":"rgba":s,l=this[h](),c=l[i.idx];return"undefined"===a?c:("function"===a&&(n=n.call(this,c),a=t.type(n)),null==n&&i.empty?this:("string"===a&&(o=r.exec(n),o&&(n=c+parseFloat(o[2])*("+"===o[1]?1:-1))),l[i.idx]=n,this[h](l)))})})}),l.hook=function(e){var i=e.split(" ");f(i,function(e,i){t.cssHooks[i]={set:function(e,n){var o,a,r="";if("transparent"!==n&&("string"!==t.type(n)||(o=s(n)))){if(n=l(o||n),!d.rgba&&1!==n._rgba[3]){for(a="backgroundColor"===i?e.parentNode:e;(""===r||"transparent"===r)&&a&&a.style;)try{r=t.css(a,"backgroundColor"),a=a.parentNode}catch(h){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{e.style[i]=n}catch(h){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=l(e.elem,i),e.end=l(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})},l.hook(a),t.cssHooks.borderColor={expand:function(t){var e={};return f(["Top","Right","Bottom","Left"],function(i,s){e["border"+s+"Color"]=t}),e}},o=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(e){var i,s,n=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,o={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],"string"==typeof n[i]&&(o[t.camelCase(i)]=n[i]);else for(i in n)"string"==typeof n[i]&&(o[i]=n[i]);return o}function s(e,i){var s,n,a={};for(s in i)n=i[s],e[s]!==n&&(o[s]||(t.fx.step[s]||!isNaN(parseFloat(n)))&&(a[s]=n));return a}var n=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(jQuery.style(t.elem,i,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(e,o,a,r){var h=t.speed(o,a,r);return this.queue(function(){var o,a=t(this),r=a.attr("class")||"",l=h.children?a.find("*").addBack():a;l=l.map(function(){var e=t(this);return{el:e,start:i(this)}}),o=function(){t.each(n,function(t,i){e[i]&&a[i+"Class"](e[i])})},o(),l=l.map(function(){return this.end=i(this.el[0]),this.diff=s(this.start,this.end),this}),a.attr("class",r),l=l.map(function(){var e=this,i=t.Deferred(),s=t.extend({},h,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,s),i.promise()}),t.when.apply(t,l.get()).done(function(){o(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),h.complete.call(a[0])})})},t.fn.extend({addClass:function(e){return function(i,s,n,o){return s?t.effects.animateClass.call(this,{add:i},s,n,o):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(i,s,n,o){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},s,n,o):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(i){return function(s,n,o,a,r){return"boolean"==typeof n||n===e?o?t.effects.animateClass.call(this,n?{add:s}:{remove:s},o,a,r):i.apply(this,arguments):t.effects.animateClass.call(this,{toggle:s},n,o,a)}}(t.fn.toggleClass),switchClass:function(e,i,s,n,o){return t.effects.animateClass.call(this,{add:i,remove:e},s,n,o)}})}(),function(){function s(e,i,s,n){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(n=s,s=i,i={}),t.isFunction(s)&&(n=s,s=null),i&&t.extend(e,i),s=s||i.duration,e.duration=t.fx.off?0:"number"==typeof s?s:s in t.fx.speeds?t.fx.speeds[s]:t.fx.speeds._default,e.complete=n||i.complete,e}function n(e){return!e||"number"==typeof e||t.fx.speeds[e]?!0:"string"!=typeof e||t.effects.effect[e]?t.isFunction(e)?!0:"object"!=typeof e||e.effect?!1:!0:!0}t.extend(t.effects,{version:"1.10.3",save:function(t,e){for(var s=0;e.length>s;s++)null!==e[s]&&t.data(i+e[s],t[0].style[e[s]])},restore:function(t,s){var n,o;for(o=0;s.length>o;o++)null!==s[o]&&(n=t.data(i+s[o]),n===e&&(n=""),t.css(s[o],n))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,s;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=t[1]/e.width}return{x:s,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},s=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:e.width(),height:e.height()},o=document.activeElement;try{o.id}catch(a){o=document.body}return e.wrap(s),(e[0]===o||t.contains(e[0],o))&&t(o).focus(),s=e.parent(),"static"===e.css("position")?(s.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,s){i[s]=e.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(n),s.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).focus()),e},setTransition:function(e,i,s,n){return n=n||{},t.each(i,function(t,i){var o=e.cssUnit(i);o[0]>0&&(n[i]=o[0]*s+o[1])}),n}}),t.fn.extend({effect:function(){function e(e){function s(){t.isFunction(o)&&o.call(n[0]),t.isFunction(e)&&e()}var n=t(this),o=i.complete,r=i.mode;(n.is(":hidden")?"hide"===r:"show"===r)?(n[r](),s()):a.call(n[0],i,s)}var i=s.apply(this,arguments),n=i.mode,o=i.queue,a=t.effects.effect[i.effect];return t.fx.off||!a?n?this[n](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):o===!1?this.each(e):this.queue(o||"fx",e)},show:function(t){return function(e){if(n(e))return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(t.fn.show),hide:function(t){return function(e){if(n(e))return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(t.fn.hide),toggle:function(t){return function(e){if(n(e)||"boolean"==typeof e)return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),s=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(s=[parseFloat(i),e])}),s}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;((e=Math.pow(2,--i))-1)/11>t;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return.5>t?i(2*t)/2:1-i(-2*t+2)/2}})}()}(jQuery),function(t){var e=0,i={},s={};i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="hide",s.height=s.paddingTop=s.paddingBottom=s.borderTopWidth=s.borderBottomWidth="show",t.widget("ui.accordion",{version:"1.10.3",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var e=this.options;this.prevShow=this.prevHide=t(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),e.collapsible||e.active!==!1&&null!=e.active||(e.active=0),this._processPanels(),0>e.active&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():t(),content:this.active.length?this.active.next():t()}},_createIcons:function(){var e=this.options.icons;e&&(t("<span>").addClass("ui-accordion-header-icon ui-icon "+e.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(e.header).addClass(e.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){return"active"===t?void this._activate(e):("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||this.options.active!==!1||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons()),void("disabled"===t&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!e)))},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var i=t.ui.keyCode,s=this.headers.length,n=this.headers.index(e.target),o=!1;switch(e.keyCode){case i.RIGHT:case i.DOWN:o=this.headers[(n+1)%s];break;case i.LEFT:case i.UP:o=this.headers[(n-1+s)%s];break;case i.SPACE:case i.ENTER:this._eventHandler(e);break;case i.HOME:o=this.headers[0];break;case i.END:o=this.headers[s-1]}o&&(t(e.target).attr("tabIndex",-1),t(o).attr("tabIndex",0),o.focus(),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().focus()},refresh:function(){var e=this.options;this._processPanels(),e.active===!1&&e.collapsible===!0||!this.headers.length?(e.active=!1,this.active=t()):e.active===!1?this._activate(0):this.active.length&&!t.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=t()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var i,s=this.options,n=s.heightStyle,o=this.element.parent(),a=this.accordionId="ui-accordion-"+(this.element.attr("id")||++e);this.active=this._findActive(s.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(e){var i=t(this),s=i.attr("id"),n=i.next(),o=n.attr("id");s||(s=a+"-header-"+e,i.attr("id",s)),o||(o=a+"-panel-"+e,n.attr("id",o)),i.attr("aria-controls",o),n.attr("aria-labelledby",s)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(s.event),"fill"===n?(i=o.height(),this.element.siblings(":visible").each(function(){var e=t(this),s=e.css("position");"absolute"!==s&&"fixed"!==s&&(i-=e.outerHeight(!0))}),this.headers.each(function(){i-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===n&&(i=0,this.headers.next().each(function(){i=Math.max(i,t(this).css("height","").height())}).height(i))},_activate:function(e){var i=this._findActive(e)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var i={keydown:"_keydown"};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var i=this.options,s=this.active,n=t(e.currentTarget),o=n[0]===s[0],a=o&&i.collapsible,r=a?t():n.next(),h=s.next(),l={oldHeader:s,oldPanel:h,newHeader:a?t():n,newPanel:r};e.preventDefault(),o&&!i.collapsible||this._trigger("beforeActivate",e,l)===!1||(i.active=a?!1:this.headers.index(n),this.active=o?t():n,this._toggle(l),s.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),o||(n.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),n.next().addClass("ui-accordion-content-active")))},_toggle:function(e){var i=e.newPanel,s=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=s,this.options.animate?this._animate(i,s,e):(s.hide(),i.show(),this._toggleComplete(e)),s.attr({"aria-expanded":"false","aria-hidden":"true"}),s.prev().attr("aria-selected","false"),i.length&&s.length?s.prev().attr("tabIndex",-1):i.length&&this.headers.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(t,e,n){var o,a,r,h=this,l=0,c=t.length&&(!e.length||t.index()<e.index()),u=this.options.animate||{},d=c&&u.down||u,p=function(){h._toggleComplete(n)};return"number"==typeof d&&(r=d),"string"==typeof d&&(a=d),a=a||d.easing||u.easing,r=r||d.duration||u.duration,e.length?t.length?(o=t.show().outerHeight(),e.animate(i,{duration:r,easing:a,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(s,{duration:r,easing:a,complete:p,step:function(t,i){i.now=Math.round(t),"height"!==i.prop?l+=i.now:"content"!==h.options.heightStyle&&(i.now=Math.round(o-e.outerHeight()-l),l=0)}})):e.animate(i,r,a,p):t.animate(s,r,a,p)},_toggleComplete:function(t){var e=t.oldPanel;e.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}})}(jQuery),function(t){var e=0;t.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var e,i,s,n=this.element[0].nodeName.toLowerCase(),o="textarea"===n,a="input"===n;this.isMultiLine=o?!0:a?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[o||a?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return e=!0,s=!0,void(i=!0);e=!1,s=!1,i=!1;var o=t.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:e=!0,this._move("previousPage",n);break;case o.PAGE_DOWN:e=!0,this._move("nextPage",n);break;case o.UP:e=!0,this._keyEvent("previous",n);break;case o.DOWN:e=!0,this._keyEvent("next",n);break;case o.ENTER:case o.NUMPAD_ENTER:this.menu.active&&(e=!0,n.preventDefault(),this.menu.select(n));break;case o.TAB:this.menu.active&&this.menu.select(n);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(e)return e=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&s.preventDefault());if(!i){var n=t.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(t){return s?(s=!1,void t.preventDefault()):void this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),void this._change(t))}}),this._initSource(),this.menu=t("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];t(e.target).closest(".ui-menu-item").length||this._delay(function(){var e=this;this.document.one("mousedown",function(s){s.target===e.element[0]||s.target===i||t.contains(i,s.target)||e.close()})})},menufocus:function(e,i){if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)});var s=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",e,{item:s})?e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(s.value):this.liveRegion.text(s.value)},menuselect:function(t,e){var i=e.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e||(e=this.element.closest(".ui-front")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,i,s=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,s){s(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,n){s.xhr&&s.xhr.abort(),s.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){n(t)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):this._trigger("search",e)!==!1?this._search(t):void 0},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var t=this,i=++e;return function(s){i===e&&t.__response(s),t.pending--,t.pending||t.element.removeClass("ui-autocomplete-loading")}},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({label:e.label||e.value,value:e.value||e.label},e)})},_suggest:function(e){var i=this.menu.element.empty();this._renderMenu(i,e),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var s=this;t.each(i,function(t,i){s._renderItemData(e,i)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").append(t("<a>").text(i.label)).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this._value(this.term),void this.menu.blur()):void this.menu[t](e):void this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(t,e),e.preventDefault())}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var s=RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,function(t){return s.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.text(e))}})}(jQuery),
function(t){var e,i,s,n,o="ui-button ui-widget ui-state-default ui-corner-all",a="ui-state-hover ui-state-active ",r="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",h=function(){var e=t(this);setTimeout(function(){e.find(":ui-button").button("refresh")},1)},l=function(e){var i=e.name,s=e.form,n=t([]);return i&&(i=i.replace(/'/g,"\\'"),n=s?t(s).find("[name='"+i+"']"):t("[name='"+i+"']",e.ownerDocument).filter(function(){return!this.form})),n};t.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,h),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var a=this,r=this.options,c="checkbox"===this.type||"radio"===this.type,u=c?"":"ui-state-active",d="ui-state-focus";null===r.label&&(r.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){r.disabled||this===e&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){r.disabled||t(this).removeClass(u)}).bind("click"+this.eventNamespace,function(t){r.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){a.buttonElement.addClass(d)}).bind("blur"+this.eventNamespace,function(){a.buttonElement.removeClass(d)}),c&&(this.element.bind("change"+this.eventNamespace,function(){n||a.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(t){r.disabled||(n=!1,i=t.pageX,s=t.pageY)}).bind("mouseup"+this.eventNamespace,function(t){r.disabled||(i!==t.pageX||s!==t.pageY)&&(n=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return r.disabled||n?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(r.disabled||n)return!1;t(this).addClass("ui-state-active"),a.buttonElement.attr("aria-pressed","true");var e=a.element[0];l(e).not(e).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return r.disabled?!1:(t(this).addClass("ui-state-active"),e=this,void a.document.one("mouseup",function(){e=null}))}).bind("mouseup"+this.eventNamespace,function(){return r.disabled?!1:void t(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(e){return r.disabled?!1:void((e.keyCode===t.ui.keyCode.SPACE||e.keyCode===t.ui.keyCode.ENTER)&&t(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",r.disabled),this._resetButton()},_determineButtonType:function(){var t,e,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+a+" "+r).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){return this._super(t,e),"disabled"===t?void(e?this.element.prop("disabled",!0):this.element.prop("disabled",!1)):void this._resetButton()},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?l(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var e=this.buttonElement.removeClass(r),i=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),s=this.options.icons,n=s.primary&&s.secondary,o=[];s.primary||s.secondary?(this.options.text&&o.push("ui-button-text-icon"+(n?"s":s.primary?"-primary":"-secondary")),s.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(o.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(i)))):o.push("ui-button-text-only"),e.addClass(o.join(" "))}}),t.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(t,e){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.dpDiv=s(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function s(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(i,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){t.datepicker._isDisabledDatepicker(o.inline?e.parent()[0]:o.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))})}function n(e,i){t.extend(e,i);for(var s in i)null==i[s]&&(e[s]=i[s]);return e}t.extend(t.ui,{datepicker:{version:"1.10.3"}});var o,a="datepicker";t.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return n(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var s,n,o;s=e.nodeName.toLowerCase(),n="div"===s||"span"===s,e.id||(this.uuid+=1,e.id="dp"+this.uuid),o=this._newInst(t(e),n),o.settings=t.extend({},i||{}),"input"===s?this._connectDatepicker(e,o):n&&this._inlineDatepicker(e,o)},_newInst:function(e,i){var n=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?s(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var s=t(e);i.append=t([]),i.trigger=t([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),t.data(e,a,i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var s,n,o,a=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),a&&(i.append=t("<span class='"+this._appendClass+"'>"+a+"</span>"),e[r?"before":"after"](i.append)),e.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&e.focus(this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),o=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:o,alt:n,title:n}):t("<button type='button'></button>").addClass(this._triggerClass).html(o?t("<img/>").attr({src:o,alt:n,title:n}):n)),e[r?"before":"after"](i.trigger),i.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,s,n,o=new Date(2009,11,20),a=this._get(t,"dateFormat");a.match(/[DM]/)&&(e=function(t){for(i=0,s=0,n=0;t.length>n;n++)t[n].length>i&&(i=t[n].length,s=n);return s},o.setMonth(e(this._get(t,a.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(e(this._get(t,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),t.input.attr("size",this._formatDate(t,o).length)}},_inlineDatepicker:function(e,i){var s=t(e);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),t.data(e,a,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,s,o,r){var h,l,c,u,d,p=this._dialogInst;return p||(this.uuid+=1,h="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+h+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},t.data(this._dialogInput[0],a,p)),n(p.settings,o||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(l=document.documentElement.clientWidth,c=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+u,c/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],a,p),this},_destroyDatepicker:function(e){var i,s=t(e),n=t.data(e,a);s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,a),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty())},_enableDatepicker:function(e){var i,s,n=t(e),o=t.data(e,a);n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,s,n=t(e),o=t.data(e,a);n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;this._disabledInputs.length>e;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,a)}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,s,o){var a,r,h,l,c=this._getInst(i);return 2===arguments.length&&"string"==typeof s?"defaults"===s?t.extend({},t.datepicker._defaults):c?"all"===s?t.extend({},c.settings):this._get(c,s):null:(a=s||{},"string"==typeof s&&(a={},a[s]=o),c&&(this._curInst===c&&this._hideDatepicker(),r=this._getDateDatepicker(i,!0),h=this._getMinMaxDate(c,"min"),l=this._getMinMaxDate(c,"max"),n(c.settings,a),null!==h&&a.dateFormat!==e&&a.minDate===e&&(c.settings.minDate=this._formatDate(c,h)),null!==l&&a.dateFormat!==e&&a.maxDate===e&&(c.settings.maxDate=this._formatDate(c,l)),"disabled"in a&&(a.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(t(i),c),this._autoSize(c),this._setDate(c,r),this._updateAlternate(c),this._updateDatepicker(c)),e)},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,s,n,o=t.datepicker._getInst(e.target),a=!0,r=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),a=!1;break;case 13:return n=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",o.dpDiv),n[0]&&t.datepicker._selectDay(e.target,o.selectedMonth,o.selectedYear,n[0]),i=t.datepicker._get(o,"onSelect"),i?(s=t.datepicker._formatDate(o),i.apply(o.input?o.input[0]:null,[s,o])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),a=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),a=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?1:-1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),a=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?-1:1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),a=e.ctrlKey||e.metaKey;break;default:a=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):a=!1;a&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(i){var s,n,o=t.datepicker._getInst(i.target);return t.datepicker._get(o,"constrainInput")?(s=t.datepicker._possibleChars(t.datepicker._get(o,"dateFormat")),n=String.fromCharCode(null==i.charCode?i.keyCode:i.charCode),i.ctrlKey||i.metaKey||" ">n||!s||s.indexOf(n)>-1):e},_doKeyUp:function(e){var i,s=t.datepicker._getInst(e.target);if(s.input.val()!==s.lastVal)try{i=t.datepicker.parseDate(t.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,t.datepicker._getFormatConfig(s)),i&&(t.datepicker._setDateFromField(s),t.datepicker._updateAlternate(s),t.datepicker._updateDatepicker(s))}catch(n){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var i,s,o,a,r,h,l;i=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==i&&(t.datepicker._curInst.dpDiv.stop(!0,!0),i&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),s=t.datepicker._get(i,"beforeShow"),o=s?s.apply(e,[e,i]):{},o!==!1&&(n(i.settings,o),i.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(i),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),a=!1,t(e).parents().each(function(){return a|="fixed"===t(this).css("position"),!a}),r={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(i),r=t.datepicker._checkOffset(i,r,a),i.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":a?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),i.inline||(h=t.datepicker._get(i,"showAnim"),l=t.datepicker._get(i,"duration"),i.dpDiv.zIndex(t(e).zIndex()+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[h]?i.dpDiv.show(h,t.datepicker._get(i,"showOptions"),l):i.dpDiv[h||"show"](h?l:null),t.datepicker._shouldFocusInput(i)&&i.input.focus(),t.datepicker._curInst=i))}},_updateDatepicker:function(e){this.maxRows=4,o=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,s=this._getNumberOfMonths(e),n=s[1],a=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&e.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",a*n+"em"),e.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,s){var n=e.dpDiv.outerWidth(),o=e.dpDiv.outerHeight(),a=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:t(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?n-a:0,i.left-=s&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=s&&i.top===e.input.offset().top+r?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>h&&h>n?Math.abs(i.left+n-h):0),i.top-=Math.min(i.top,i.top+o>l&&l>o?Math.abs(o+r):0),i},_findPos:function(e){for(var i,s=this._getInst(e),n=this._get(s,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[n?"previousSibling":"nextSibling"];return i=t(e).offset(),[i.left,i.top]},_hideDatepicker:function(e){var i,s,n,o,r=this._curInst;!r||e&&r!==t.data(e,a)||this._datepickerShowing&&(i=this._get(r,"showAnim"),s=this._get(r,"duration"),n=function(){t.datepicker._tidyDialog(r)},t.effects&&(t.effects.effect[i]||t.effects[i])?r.dpDiv.hide(i,t.datepicker._get(r,"showOptions"),s,n):r.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,o=this._get(r,"onClose"),o&&o.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),s=t.datepicker._getInst(i[0]);(i[0].id!==t.datepicker._mainDivId&&0===i.parents("#"+t.datepicker._mainDivId).length&&!i.hasClass(t.datepicker.markerClassName)&&!i.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||i.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==s)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,s){var n=t(e),o=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(o,i+("M"===s?this._get(o,"showCurrentAtPos"):0),s),this._updateDatepicker(o))},_gotoToday:function(e){var i,s=t(e),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(e,i,s){var n=t(e),o=this._getInst(n[0]);o["selected"+("M"===s?"Month":"Year")]=o["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(n)},_selectDay:function(e,i,s,n){var o,a=t(e);t(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])||(o=this._getInst(a[0]),o.selectedDay=o.currentDay=t("a",n).html(),o.selectedMonth=o.currentMonth=i,o.selectedYear=o.currentYear=s,this._selectDate(e,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var s,n=t(e),o=this._getInst(n[0]);i=null!=i?i:this._formatDate(o),o.input&&o.input.val(i),this._updateAlternate(o),s=this._get(o,"onSelect"),s?s.apply(o.input?o.input[0]:null,[i,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var i,s,n,o=this._get(e,"altField");o&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),s=this._getDate(e),n=this.formatDate(i,s,this._getFormatConfig(e)),t(o).each(function(){t(this).val(n)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(i,s,n){if(null==i||null==s)throw"Invalid arguments";if(s="object"==typeof s?""+s:s+"",""===s)return null;var o,a,r,h,l=0,c=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),d=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,p=(n?n.dayNames:null)||this._defaults.dayNames,f=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,g=(n?n.monthNames:null)||this._defaults.monthNames,m=-1,v=-1,_=-1,b=-1,y=!1,w=function(t){var e=i.length>o+1&&i.charAt(o+1)===t;return e&&o++,e},k=function(t){var e=w(t),i="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,n=RegExp("^\\d{1,"+i+"}"),o=s.substring(l).match(n);if(!o)throw"Missing number at position "+l;return l+=o[0].length,parseInt(o[0],10)},x=function(i,n,o){var a=-1,r=t.map(w(i)?o:n,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(r,function(t,i){var n=i[1];return s.substr(l,n.length).toLowerCase()===n.toLowerCase()?(a=i[0],l+=n.length,!1):e}),-1!==a)return a+1;throw"Unknown name at position "+l},D=function(){if(s.charAt(l)!==i.charAt(o))throw"Unexpected literal at position "+l;l++};for(o=0;i.length>o;o++)if(y)"'"!==i.charAt(o)||w("'")?D():y=!1;else switch(i.charAt(o)){case"d":_=k("d");break;case"D":x("D",d,p);break;case"o":b=k("o");break;case"m":v=k("m");break;case"M":v=x("M",f,g);break;case"y":m=k("y");break;case"@":h=new Date(k("@")),m=h.getFullYear(),v=h.getMonth()+1,_=h.getDate();break;case"!":h=new Date((k("!")-this._ticksTo1970)/1e4),m=h.getFullYear(),v=h.getMonth()+1,_=h.getDate();break;case"'":w("'")?D():y=!0;break;default:D()}if(s.length>l&&(r=s.substr(l),!/^\s+/.test(r)))throw"Extra/unparsed characters found in date: "+r;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),b>-1)for(v=1,_=b;a=this._getDaysInMonth(m,v-1),!(a>=_);)v++,_-=a;if(h=this._daylightSavingAdjust(new Date(m,v-1,_)),h.getFullYear()!==m||h.getMonth()+1!==v||h.getDate()!==_)throw"Invalid date";return h},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(t,e,i){if(!e)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,a=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,h=function(e){var i=t.length>s+1&&t.charAt(s+1)===e;return i&&s++,i},l=function(t,e,i){var s=""+e;if(h(t))for(;i>s.length;)s="0"+s;return s},c=function(t,e,i,s){return h(t)?s[e]:i[e]},u="",d=!1;if(e)for(s=0;t.length>s;s++)if(d)"'"!==t.charAt(s)||h("'")?u+=t.charAt(s):d=!1;else switch(t.charAt(s)){case"d":u+=l("d",e.getDate(),2);break;case"D":u+=c("D",e.getDay(),n,o);break;case"o":u+=l("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=l("m",e.getMonth()+1,2);break;case"M":u+=c("M",e.getMonth(),a,r);break;case"y":u+=h("y")?e.getFullYear():(10>e.getYear()%100?"0":"")+e.getYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":h("'")?u+="'":d=!0;break;default:u+=t.charAt(s)}return u},_possibleChars:function(t){var e,i="",s=!1,n=function(i){var s=t.length>e+1&&t.charAt(e+1)===i;return s&&e++,s};for(e=0;t.length>e;e++)if(s)"'"!==t.charAt(e)||n("'")?i+=t.charAt(e):s=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,i){return t.settings[i]!==e?t.settings[i]:this._defaults[i]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),s=t.lastVal=t.input?t.input.val():null,n=this._getDefaultDate(t),o=n,a=this._getFormatConfig(t);try{o=this.parseDate(i,s,a)||n}catch(r){s=e?"":s}t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),t.currentDay=s?o.getDate():0,t.currentMonth=s?o.getMonth():0,t.currentYear=s?o.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,s){var n=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},o=function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,o=n.getFullYear(),a=n.getMonth(),r=n.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case"d":case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":a+=parseInt(l[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a));break;case"y":case"Y":o+=parseInt(l[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a))}l=h.exec(i)}return new Date(o,a,r)},a=null==i||""===i?s:"string"==typeof i?o(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return a=a&&"Invalid Date"==""+a?s:a,a&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var s=!e,n=t.selectedMonth,o=t.selectedYear,a=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=a.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=a.getMonth(),t.drawYear=t.selectedYear=t.currentYear=a.getFullYear(),n===t.selectedMonth&&o===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(s?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));
return e},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),s="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(s,-i,"M")},next:function(){t.datepicker._adjustDate(s,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(s)},selectDay:function(){return t.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(s,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,s,n,o,a,r,h,l,c,u,d,p,f,g,m,v,_,b,y,w,k,x,D,C,I,P,T,M,S,z,A,H,E,N,W,O,F,R,L=new Date,j=this._daylightSavingAdjust(new Date(L.getFullYear(),L.getMonth(),L.getDate())),Y=this._get(t,"isRTL"),B=this._get(t,"showButtonPanel"),V=this._get(t,"hideIfNoPrevNext"),K=this._get(t,"navigationAsDateFormat"),U=this._getNumberOfMonths(t),q=this._get(t,"showCurrentAtPos"),Q=this._get(t,"stepMonths"),X=1!==U[0]||1!==U[1],$=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(t,"min"),J=this._getMinMaxDate(t,"max"),Z=t.drawMonth-q,te=t.drawYear;if(0>Z&&(Z+=12,te--),J)for(e=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-U[0]*U[1]+1,J.getDate())),e=G&&G>e?G:e;this._daylightSavingAdjust(new Date(te,Z,1))>e;)Z--,0>Z&&(Z=11,te--);for(t.drawMonth=Z,t.drawYear=te,i=this._get(t,"prevText"),i=K?this.formatDate(i,this._daylightSavingAdjust(new Date(te,Z-Q,1)),this._getFormatConfig(t)):i,s=this._canAdjustMonth(t,-1,te,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":V?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",n=this._get(t,"nextText"),n=K?this.formatDate(n,this._daylightSavingAdjust(new Date(te,Z+Q,1)),this._getFormatConfig(t)):n,o=this._canAdjustMonth(t,1,te,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>":V?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>",a=this._get(t,"currentText"),r=this._get(t,"gotoCurrent")&&t.currentDay?$:j,a=K?this.formatDate(a,r,this._getFormatConfig(t)):a,h=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",l=B?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?h:"")+(this._isInRange(t,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+a+"</button>":"")+(Y?"":h)+"</div>":"",c=parseInt(this._get(t,"firstDay"),10),c=isNaN(c)?0:c,u=this._get(t,"showWeek"),d=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),g=this._get(t,"monthNamesShort"),m=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),_=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),y="",k=0;U[0]>k;k++){for(x="",this.maxRows=4,D=0;U[1]>D;D++){if(C=this._daylightSavingAdjust(new Date(te,Z,t.selectedDay)),I=" ui-corner-all",P="",X){if(P+="<div class='ui-datepicker-group",U[1]>1)switch(D){case 0:P+=" ui-datepicker-group-first",I=" ui-corner-"+(Y?"right":"left");break;case U[1]-1:P+=" ui-datepicker-group-last",I=" ui-corner-"+(Y?"left":"right");break;default:P+=" ui-datepicker-group-middle",I=""}P+="'>"}for(P+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+I+"'>"+(/all|left/.test(I)&&0===k?Y?o:s:"")+(/all|right/.test(I)&&0===k?Y?s:o:"")+this._generateMonthYearHeader(t,Z,te,G,J,k>0||D>0,f,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",T=u?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;7>w;w++)M=(w+c)%7,T+="<th"+((w+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+d[M]+"'>"+p[M]+"</span></th>";for(P+=T+"</tr></thead><tbody>",S=this._getDaysInMonth(te,Z),te===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,S)),z=(this._getFirstDayOfMonth(te,Z)-c+7)%7,A=Math.ceil((z+S)/7),H=X&&this.maxRows>A?this.maxRows:A,this.maxRows=H,E=this._daylightSavingAdjust(new Date(te,Z,1-z)),N=0;H>N;N++){for(P+="<tr>",W=u?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(E)+"</td>":"",w=0;7>w;w++)O=m?m.apply(t.input?t.input[0]:null,[E]):[!0,""],F=E.getMonth()!==Z,R=F&&!_||!O[0]||G&&G>E||J&&E>J,W+="<td class='"+((w+c+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(E.getTime()===C.getTime()&&Z===t.selectedMonth&&t._keyEvent||b.getTime()===E.getTime()&&b.getTime()===C.getTime()?" "+this._dayOverClass:"")+(R?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!v?"":" "+O[1]+(E.getTime()===$.getTime()?" "+this._currentClass:"")+(E.getTime()===j.getTime()?" ui-datepicker-today":""))+"'"+(F&&!v||!O[2]?"":" title='"+O[2].replace(/'/g,"&#39;")+"'")+(R?"":" data-handler='selectDay' data-event='click' data-month='"+E.getMonth()+"' data-year='"+E.getFullYear()+"'")+">"+(F&&!v?"&#xa0;":R?"<span class='ui-state-default'>"+E.getDate()+"</span>":"<a class='ui-state-default"+(E.getTime()===j.getTime()?" ui-state-highlight":"")+(E.getTime()===$.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+E.getDate()+"</a>")+"</td>",E.setDate(E.getDate()+1),E=this._daylightSavingAdjust(E);P+=W+"</tr>"}Z++,Z>11&&(Z=0,te++),P+="</tbody></table>"+(X?"</div>"+(U[0]>0&&D===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=P}y+=x}return y+=l,t._keyEvent=!1,y},_generateMonthYearHeader:function(t,e,i,s,n,o,a,r){var h,l,c,u,d,p,f,g,m=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),_=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",y="";if(o||!m)y+="<span class='ui-datepicker-month'>"+a[e]+"</span>";else{for(h=s&&s.getFullYear()===i,l=n&&n.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;12>c;c++)(!h||c>=s.getMonth())&&(!l||n.getMonth()>=c)&&(y+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+r[c]+"</option>");y+="</select>"}if(_||(b+=y+(!o&&m&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",o||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e},f=p(u[0]),g=Math.max(f,p(u[1]||"")),f=s?Math.max(f,s.getFullYear()):f,g=n?Math.min(g,n.getFullYear()):g,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";g>=f;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),_&&(b+=(!o&&m&&v?"":"&#xa0;")+y),b+="</div>"},_adjustInstDate:function(t,e,i){var s=t.drawYear+("Y"===i?e:0),n=t.drawMonth+("M"===i?e:0),o=Math.min(t.selectedDay,this._getDaysInMonth(s,n))+("D"===i?e:0),a=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(s,n,o)));t.selectedDay=a.getDate(),t.drawMonth=t.selectedMonth=a.getMonth(),t.drawYear=t.selectedYear=a.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max"),n=i&&i>e?i:e;return s&&n>s?s:n},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,s){var n=this._getNumberOfMonths(t),o=this._daylightSavingAdjust(new Date(i,s+(0>e?e:n[0]*n[1]),1));return 0>e&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(t,o)},_isInRange:function(t,e){var i,s,n=this._getMinMaxDate(t,"min"),o=this._getMinMaxDate(t,"max"),a=null,r=null,h=this._get(t,"yearRange");return h&&(i=h.split(":"),s=(new Date).getFullYear(),a=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(a+=s),i[1].match(/[+\-].*/)&&(r+=s)),(!n||e.getTime()>=n.getTime())&&(!o||e.getTime()<=o.getTime())&&(!a||e.getFullYear()>=a)&&(!r||r>=e.getFullYear())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,s){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var n=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(s,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),n,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new i,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.10.3"}(jQuery),function(t){var e={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};t.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;0>i&&t(this).css("top",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),t=e.parent.children().eq(e.index),t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i=this;this._isOpen&&this._trigger("beforeClose",e)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||t(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",e)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!e&&this._trigger("focus",t),i},open:function(){var e=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=t(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),void this._trigger("open"))},_focusTabbable:function(){var t=this.element.find("[autofocus]");t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).focus()},_keepFocus:function(e){function i(){var e=this.document[0].activeElement,i=this.uiDialog[0]===e||t.contains(this.uiDialog[0],e);i||this._focusTabbable()}e.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=t("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);if(e.keyCode===t.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),n=i.filter(":last");e.target!==n[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==s[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(n.focus(1),e.preventDefault()):(s.focus(1),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=t("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(e),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title||t.html("&#160;"),t.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)||t.isArray(i)&&!i.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(t.each(i,function(i,s){var n,o;s=t.isFunction(s)?{click:s,text:i}:s,s=t.extend({type:"button"},s),n=s.click,s.click=function(){n.apply(e.element[0],arguments)},o={icons:s.icons,text:s.showText},delete s.icons,delete s.showText,t("<button></button>",s).button(o).appendTo(e.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){t(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",s,e(n))},drag:function(t,s){i._trigger("drag",t,e(s))},stop:function(n,o){s.position=[o.position.left-i.document.scrollLeft(),o.position.top-i.document.scrollTop()],t(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",n,e(o))}})},_makeResizable:function(){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var i=this,s=this.options,n=s.resizable,o=this.uiDialog.css("position"),a="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:a,start:function(s,n){t(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",s,e(n))},resize:function(t,s){i._trigger("resize",t,e(s))},stop:function(n,o){s.height=t(this).height(),s.width=t(this).width(),t(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",n,e(o))}}).css("position",o)},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(s){var n=this,o=!1,a={};t.each(s,function(t,s){n._setOption(t,s),t in e&&(o=!0),t in i&&(a[t]=s)}),o&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",a)},_setOption:function(t,e){var i,s,n=this.uiDialog;"dialogClass"===t&&n.removeClass(this.options.dialogClass).addClass(e),"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:""+e}),"draggable"===t&&(i=n.is(":data(ui-draggable)"),i&&!e&&n.draggable("destroy"),!i&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&(s=n.is(":data(ui-resizable)"),s&&!e&&n.resizable("destroy"),s&&"string"==typeof e&&n.resizable("option","handles",e),s||e===!1||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),t=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),e=Math.max(0,s.minHeight-t),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-t):"none","auto"===s.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return t(e.target).closest(".ui-dialog").length?!0:!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=this,i=this.widgetFullName;t.ui.dialog.overlayInstances||this._delay(function(){t.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(s){e._allowInteraction(s)||(s.preventDefault(),t(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=t("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),t.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(t.ui.dialog.overlayInstances--,t.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),t.ui.dialog.overlayInstances=0,t.uiBackCompat!==!1&&t.widget("ui.dialog",t.ui.dialog,{_position:function(){var e,i=this.options.position,s=[],n=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(s=i.split?i.split(" "):[i[0],i[1]],1===s.length&&(s[1]=s[0]),t.each(["left","top"],function(t,e){+s[t]===s[t]&&(n[t]=s[t],s[t]=e)}),i={my:s[0]+(0>n[0]?n[0]:"+"+n[0])+" "+s[1]+(0>n[1]?n[1]:"+"+n[1]),at:s.join(" ")}),i=t.extend({},t.ui.dialog.prototype.options.position,i)):i=t.ui.dialog.prototype.options.position,e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.position(i),e||this.uiDialog.hide()}})}(jQuery),function(t){var e=/up|down|vertical/,i=/up|left|vertical|horizontal/;t.effects.effect.blind=function(s,n){var o,a,r,h=t(this),l=["position","top","bottom","left","right","height","width"],c=t.effects.setMode(h,s.mode||"hide"),u=s.direction||"up",d=e.test(u),p=d?"height":"width",f=d?"top":"left",g=i.test(u),m={},v="show"===c;h.parent().is(".ui-effects-wrapper")?t.effects.save(h.parent(),l):t.effects.save(h,l),h.show(),o=t.effects.createWrapper(h).css({overflow:"hidden"}),a=o[p](),r=parseFloat(o.css(f))||0,m[p]=v?a:0,g||(h.css(d?"bottom":"right",0).css(d?"top":"left","auto").css({position:"absolute"}),m[f]=v?r:a+r),v&&(o.css(p,0),g||o.css(f,r+a)),o.animate(m,{duration:s.duration,easing:s.easing,queue:!1,complete:function(){"hide"===c&&h.hide(),t.effects.restore(h,l),t.effects.removeWrapper(h),n()}})}}(jQuery),function(t){t.effects.effect.bounce=function(e,i){var s,n,o,a=t(this),r=["position","top","bottom","left","right","height","width"],h=t.effects.setMode(a,e.mode||"effect"),l="hide"===h,c="show"===h,u=e.direction||"up",d=e.distance,p=e.times||5,f=2*p+(c||l?1:0),g=e.duration/f,m=e.easing,v="up"===u||"down"===u?"top":"left",_="up"===u||"left"===u,b=a.queue(),y=b.length;for((c||l)&&r.push("opacity"),t.effects.save(a,r),a.show(),t.effects.createWrapper(a),d||(d=a["top"===v?"outerHeight":"outerWidth"]()/3),c&&(o={opacity:1},o[v]=0,a.css("opacity",0).css(v,_?2*-d:2*d).animate(o,g,m)),l&&(d/=Math.pow(2,p-1)),o={},o[v]=0,s=0;p>s;s++)n={},n[v]=(_?"-=":"+=")+d,a.animate(n,g,m).animate(o,g,m),d=l?2*d:d/2;l&&(n={opacity:0},n[v]=(_?"-=":"+=")+d,a.animate(n,g,m)),a.queue(function(){l&&a.hide(),t.effects.restore(a,r),t.effects.removeWrapper(a),i()}),y>1&&b.splice.apply(b,[1,0].concat(b.splice(y,f+1))),a.dequeue()}}(jQuery),function(t){t.effects.effect.clip=function(e,i){var s,n,o,a=t(this),r=["position","top","bottom","left","right","height","width"],h=t.effects.setMode(a,e.mode||"hide"),l="show"===h,c=e.direction||"vertical",u="vertical"===c,d=u?"height":"width",p=u?"top":"left",f={};t.effects.save(a,r),a.show(),s=t.effects.createWrapper(a).css({overflow:"hidden"}),n="IMG"===a[0].tagName?s:a,o=n[d](),l&&(n.css(d,0),n.css(p,o/2)),f[d]=l?o:0,f[p]=l?0:o/2,n.animate(f,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){l||a.hide(),t.effects.restore(a,r),t.effects.removeWrapper(a),i()}})}}(jQuery),function(t){t.effects.effect.drop=function(e,i){var s,n=t(this),o=["position","top","bottom","left","right","opacity","height","width"],a=t.effects.setMode(n,e.mode||"hide"),r="show"===a,h=e.direction||"left",l="up"===h||"down"===h?"top":"left",c="up"===h||"left"===h?"pos":"neg",u={opacity:r?1:0};t.effects.save(n,o),n.show(),t.effects.createWrapper(n),s=e.distance||n["top"===l?"outerHeight":"outerWidth"](!0)/2,r&&n.css("opacity",0).css(l,"pos"===c?-s:s),u[l]=(r?"pos"===c?"+=":"-=":"pos"===c?"-=":"+=")+s,n.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===a&&n.hide(),t.effects.restore(n,o),t.effects.removeWrapper(n),i()}})}}(jQuery),function(t){t.effects.effect.explode=function(e,i){function s(){b.push(this),b.length===u*d&&n()}function n(){p.css({visibility:"visible"}),t(b).remove(),g||p.hide(),i()}var o,a,r,h,l,c,u=e.pieces?Math.round(Math.sqrt(e.pieces)):3,d=u,p=t(this),f=t.effects.setMode(p,e.mode||"hide"),g="show"===f,m=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/d),_=Math.ceil(p.outerHeight()/u),b=[];for(o=0;u>o;o++)for(h=m.top+o*_,c=o-(u-1)/2,a=0;d>a;a++)r=m.left+a*v,l=a-(d-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-a*v,top:-o*_}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:_,left:r+(g?l*v:0),top:h+(g?c*_:0),opacity:g?0:1}).animate({left:r+(g?0:l*v),top:h+(g?0:c*_),opacity:g?1:0},e.duration||500,e.easing,s)}}(jQuery),function(t){t.effects.effect.fade=function(e,i){var s=t(this),n=t.effects.setMode(s,e.mode||"toggle");s.animate({opacity:n},{queue:!1,duration:e.duration,easing:e.easing,complete:i})}}(jQuery),function(t){t.effects.effect.fold=function(e,i){var s,n,o=t(this),a=["position","top","bottom","left","right","height","width"],r=t.effects.setMode(o,e.mode||"hide"),h="show"===r,l="hide"===r,c=e.size||15,u=/([0-9]+)%/.exec(c),d=!!e.horizFirst,p=h!==d,f=p?["width","height"]:["height","width"],g=e.duration/2,m={},v={};t.effects.save(o,a),o.show(),s=t.effects.createWrapper(o).css({overflow:"hidden"}),n=p?[s.width(),s.height()]:[s.height(),s.width()],u&&(c=parseInt(u[1],10)/100*n[l?0:1]),h&&s.css(d?{height:0,width:c}:{height:c,width:0}),m[f[0]]=h?n[0]:c,v[f[1]]=h?n[1]:0,s.animate(m,g,e.easing).animate(v,g,e.easing,function(){l&&o.hide(),t.effects.restore(o,a),t.effects.removeWrapper(o),i()})}}(jQuery),function(t){t.effects.effect.highlight=function(e,i){var s=t(this),n=["backgroundImage","backgroundColor","opacity"],o=t.effects.setMode(s,e.mode||"show"),a={backgroundColor:s.css("backgroundColor")};"hide"===o&&(a.opacity=0),t.effects.save(s,n),s.show().css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(a,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&s.hide(),t.effects.restore(s,n),i()}})}}(jQuery),function(t){t.effects.effect.pulsate=function(e,i){var s,n=t(this),o=t.effects.setMode(n,e.mode||"show"),a="show"===o,r="hide"===o,h=a||"hide"===o,l=2*(e.times||5)+(h?1:0),c=e.duration/l,u=0,d=n.queue(),p=d.length;for((a||!n.is(":visible"))&&(n.css("opacity",0).show(),u=1),s=1;l>s;s++)n.animate({opacity:u},c,e.easing),u=1-u;n.animate({opacity:u},c,e.easing),n.queue(function(){r&&n.hide(),i()}),p>1&&d.splice.apply(d,[1,0].concat(d.splice(p,l+1))),n.dequeue()}}(jQuery),function(t){t.effects.effect.puff=function(e,i){var s=t(this),n=t.effects.setMode(s,e.mode||"hide"),o="hide"===n,a=parseInt(e.percent,10)||150,r=a/100,h={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()};t.extend(e,{effect:"scale",queue:!1,fade:!0,mode:n,complete:i,percent:o?a:100,from:o?h:{height:h.height*r,width:h.width*r,outerHeight:h.outerHeight*r,outerWidth:h.outerWidth*r}}),s.effect(e)},t.effects.effect.scale=function(e,i){var s=t(this),n=t.extend(!0,{},e),o=t.effects.setMode(s,e.mode||"effect"),a=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"hide"===o?0:100),r=e.direction||"both",h=e.origin,l={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},c={y:"horizontal"!==r?a/100:1,x:"vertical"!==r?a/100:1};n.effect="size",n.queue=!1,n.complete=i,"effect"!==o&&(n.origin=h||["middle","center"],n.restore=!0),n.from=e.from||("show"===o?{height:0,width:0,outerHeight:0,outerWidth:0}:l),n.to={height:l.height*c.y,width:l.width*c.x,outerHeight:l.outerHeight*c.y,outerWidth:l.outerWidth*c.x},n.fade&&("show"===o&&(n.from.opacity=0,n.to.opacity=1),"hide"===o&&(n.from.opacity=1,n.to.opacity=0)),s.effect(n)},t.effects.effect.size=function(e,i){var s,n,o,a=t(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],h=["position","top","bottom","left","right","overflow","opacity"],l=["width","height","overflow"],c=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],d=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=t.effects.setMode(a,e.mode||"effect"),f=e.restore||"effect"!==p,g=e.scale||"both",m=e.origin||["middle","center"],v=a.css("position"),_=f?r:h,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&a.show(),s={height:a.height(),width:a.width(),outerHeight:a.outerHeight(),outerWidth:a.outerWidth()},"toggle"===e.mode&&"show"===p?(a.from=e.to||b,a.to=e.from||s):(a.from=e.from||("show"===p?b:s),a.to=e.to||("hide"===p?b:s)),o={from:{y:a.from.height/s.height,x:a.from.width/s.width},to:{y:a.to.height/s.height,x:a.to.width/s.width}},("box"===g||"both"===g)&&(o.from.y!==o.to.y&&(_=_.concat(u),a.from=t.effects.setTransition(a,u,o.from.y,a.from),a.to=t.effects.setTransition(a,u,o.to.y,a.to)),o.from.x!==o.to.x&&(_=_.concat(d),a.from=t.effects.setTransition(a,d,o.from.x,a.from),a.to=t.effects.setTransition(a,d,o.to.x,a.to))),("content"===g||"both"===g)&&o.from.y!==o.to.y&&(_=_.concat(c).concat(l),a.from=t.effects.setTransition(a,c,o.from.y,a.from),a.to=t.effects.setTransition(a,c,o.to.y,a.to)),t.effects.save(a,_),a.show(),t.effects.createWrapper(a),a.css("overflow","hidden").css(a.from),m&&(n=t.effects.getBaseline(m,s),a.from.top=(s.outerHeight-a.outerHeight())*n.y,a.from.left=(s.outerWidth-a.outerWidth())*n.x,a.to.top=(s.outerHeight-a.to.outerHeight)*n.y,a.to.left=(s.outerWidth-a.to.outerWidth)*n.x),a.css(a.from),("content"===g||"both"===g)&&(u=u.concat(["marginTop","marginBottom"]).concat(c),d=d.concat(["marginLeft","marginRight"]),l=r.concat(u).concat(d),a.find("*[width]").each(function(){var i=t(this),s={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};f&&t.effects.save(i,l),i.from={height:s.height*o.from.y,width:s.width*o.from.x,outerHeight:s.outerHeight*o.from.y,outerWidth:s.outerWidth*o.from.x},i.to={height:s.height*o.to.y,width:s.width*o.to.x,outerHeight:s.height*o.to.y,outerWidth:s.width*o.to.x},o.from.y!==o.to.y&&(i.from=t.effects.setTransition(i,u,o.from.y,i.from),i.to=t.effects.setTransition(i,u,o.to.y,i.to)),o.from.x!==o.to.x&&(i.from=t.effects.setTransition(i,d,o.from.x,i.from),i.to=t.effects.setTransition(i,d,o.to.x,i.to)),i.css(i.from),i.animate(i.to,e.duration,e.easing,function(){f&&t.effects.restore(i,l)})})),a.animate(a.to,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){0===a.to.opacity&&a.css("opacity",a.from.opacity),"hide"===p&&a.hide(),t.effects.restore(a,_),f||("static"===v?a.css({position:"relative",top:a.to.top,left:a.to.left}):t.each(["top","left"],function(t,e){a.css(e,function(e,i){var s=parseInt(i,10),n=t?a.to.left:a.to.top;return"auto"===i?n+"px":s+n+"px"})})),t.effects.removeWrapper(a),i()}})}}(jQuery),function(t){t.effects.effect.shake=function(e,i){var s,n=t(this),o=["position","top","bottom","left","right","height","width"],a=t.effects.setMode(n,e.mode||"effect"),r=e.direction||"left",h=e.distance||20,l=e.times||3,c=2*l+1,u=Math.round(e.duration/c),d="up"===r||"down"===r?"top":"left",p="up"===r||"left"===r,f={},g={},m={},v=n.queue(),_=v.length;for(t.effects.save(n,o),n.show(),t.effects.createWrapper(n),f[d]=(p?"-=":"+=")+h,g[d]=(p?"+=":"-=")+2*h,m[d]=(p?"-=":"+=")+2*h,
n.animate(f,u,e.easing),s=1;l>s;s++)n.animate(g,u,e.easing).animate(m,u,e.easing);n.animate(g,u,e.easing).animate(f,u/2,e.easing).queue(function(){"hide"===a&&n.hide(),t.effects.restore(n,o),t.effects.removeWrapper(n),i()}),_>1&&v.splice.apply(v,[1,0].concat(v.splice(_,c+1))),n.dequeue()}}(jQuery),function(t){t.effects.effect.slide=function(e,i){var s,n=t(this),o=["position","top","bottom","left","right","width","height"],a=t.effects.setMode(n,e.mode||"show"),r="show"===a,h=e.direction||"left",l="up"===h||"down"===h?"top":"left",c="up"===h||"left"===h,u={};t.effects.save(n,o),n.show(),s=e.distance||n["top"===l?"outerHeight":"outerWidth"](!0),t.effects.createWrapper(n).css({overflow:"hidden"}),r&&n.css(l,c?isNaN(s)?"-"+s:-s:s),u[l]=(r?c?"+=":"-=":c?"-=":"+=")+s,n.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===a&&n.hide(),t.effects.restore(n,o),t.effects.removeWrapper(n),i()}})}}(jQuery),function(t){t.effects.effect.transfer=function(e,i){var s=t(this),n=t(e.to),o="fixed"===n.css("position"),a=t("body"),r=o?a.scrollTop():0,h=o?a.scrollLeft():0,l=n.offset(),c={top:l.top-r,left:l.left-h,height:n.innerHeight(),width:n.innerWidth()},u=s.offset(),d=t("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(e.className).css({top:u.top-r,left:u.left-h,height:s.innerHeight(),width:s.innerWidth(),position:o?"fixed":"absolute"}).animate(c,e.duration,e.easing,function(){d.remove(),i()})}}(jQuery),function(t){t.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,t.proxy(function(t){this.options.disabled&&t.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(t){t.preventDefault()},"click .ui-state-disabled > a":function(t){t.preventDefault()},"click .ui-menu-item:has(a)":function(e){var i=t(e.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(e),i.has(".ui-menu").length?this.expand(e):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var i=t(e.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(e,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.children(".ui-menu-item").eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){t(e.target).closest(".ui-menu").length||this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var s,n,o,a,r,h=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:h=!1,n=this.previousFilter||"",o=String.fromCharCode(e.keyCode),a=!1,clearTimeout(this.filterTimer),o===n?a=!0:o=n+o,r=RegExp("^"+i(o),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())}),s=a&&-1!==s.index(this.active.next())?this.active.nextAll(".ui-menu-item"):s,s.length||(o=String.fromCharCode(e.keyCode),r=RegExp("^"+i(o),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())})),s.length?(this.focus(e,s),s.length>1?(this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}h&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i=this.options.icons.submenu,s=this.element.find(this.options.menus);s.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),s=e.prev("a"),n=t("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);s.attr("aria-haspopup","true").prepend(n),e.attr("aria-labelledby",s.attr("id"))}),e=s.add(this.element),e.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),e.children(":not(.ui-menu-item)").each(function(){var e=t(this);/[^\-\u2014\u2013\s]/.test(e.text())||e.addClass("ui-widget-content ui-menu-divider")}),e.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),this._super(t,e)},focus:function(t,e){var i,s;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),s=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=e.children(".ui-menu"),i.length&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,s,n,o,a,r;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,n=e.offset().top-this.activeMenu.offset().top-i-s,o=this.activeMenu.scrollTop(),a=this.activeMenu.height(),r=e.height(),0>n?this.activeMenu.scrollTop(o+n):n+r>a&&this.activeMenu.scrollTop(o+n-a+r))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(e),this.activeMenu=s},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var s;this.active&&(s="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.children(".ui-menu-item")[e]()),this.focus(i,s)},nextPage:function(e){var i,s,n;return this.active?void(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=t(this),0>i.offset().top-s-n}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(e)},previousPage:function(e){var i,s,n;return this.active?void(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-s+n>0}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item").first()))):void this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)}})}(jQuery),function(t,e){function i(t,e,i){return[parseFloat(t[0])*(p.test(t[0])?e/100:1),parseFloat(t[1])*(p.test(t[1])?i/100:1)]}function s(e,i){return parseInt(t.css(e,i),10)||0}function n(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var o,a=Math.max,r=Math.abs,h=Math.round,l=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(o!==e)return o;var i,s,n=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=n.children()[0];return t("body").append(n),i=a.offsetWidth,n.css("overflow","scroll"),s=a.offsetWidth,i===s&&(s=n[0].clientWidth),n.remove(),o=i-s},getScrollInfo:function(e){var i=e.isWindow?"":e.element.css("overflow-x"),s=e.isWindow?"":e.element.css("overflow-y"),n="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,o="scroll"===s||"auto"===s&&e.height<e.element[0].scrollHeight;return{width:o?t.position.scrollbarWidth():0,height:n?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),s=t.isWindow(i[0]);return{element:i,isWindow:s,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s?i.width():i.outerWidth(),height:s?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var o,p,g,m,v,_,b=t(e.of),y=t.position.getWithinInfo(e.within),w=t.position.getScrollInfo(y),k=(e.collision||"flip").split(" "),x={};return _=n(b),b[0].preventDefault&&(e.at="left top"),p=_.width,g=_.height,m=_.offset,v=t.extend({},m),t.each(["my","at"],function(){var t,i,s=(e[this]||"").split(" ");1===s.length&&(s=l.test(s[0])?s.concat(["center"]):c.test(s[0])?["center"].concat(s):["center","center"]),s[0]=l.test(s[0])?s[0]:"center",s[1]=c.test(s[1])?s[1]:"center",t=u.exec(s[0]),i=u.exec(s[1]),x[this]=[t?t[0]:0,i?i[0]:0],e[this]=[d.exec(s[0])[0],d.exec(s[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===e.at[0]?v.left+=p:"center"===e.at[0]&&(v.left+=p/2),"bottom"===e.at[1]?v.top+=g:"center"===e.at[1]&&(v.top+=g/2),o=i(x.at,p,g),v.left+=o[0],v.top+=o[1],this.each(function(){var n,l,c=t(this),u=c.outerWidth(),d=c.outerHeight(),f=s(this,"marginLeft"),_=s(this,"marginTop"),D=u+f+s(this,"marginRight")+w.width,C=d+_+s(this,"marginBottom")+w.height,I=t.extend({},v),P=i(x.my,c.outerWidth(),c.outerHeight());"right"===e.my[0]?I.left-=u:"center"===e.my[0]&&(I.left-=u/2),"bottom"===e.my[1]?I.top-=d:"center"===e.my[1]&&(I.top-=d/2),I.left+=P[0],I.top+=P[1],t.support.offsetFractions||(I.left=h(I.left),I.top=h(I.top)),n={marginLeft:f,marginTop:_},t.each(["left","top"],function(i,s){t.ui.position[k[i]]&&t.ui.position[k[i]][s](I,{targetWidth:p,targetHeight:g,elemWidth:u,elemHeight:d,collisionPosition:n,collisionWidth:D,collisionHeight:C,offset:[o[0]+P[0],o[1]+P[1]],my:e.my,at:e.at,within:y,elem:c})}),e.using&&(l=function(t){var i=m.left-I.left,s=i+p-u,n=m.top-I.top,o=n+g-d,h={target:{element:b,left:m.left,top:m.top,width:p,height:g},element:{element:c,left:I.left,top:I.top,width:u,height:d},horizontal:0>s?"left":i>0?"right":"center",vertical:0>o?"top":n>0?"bottom":"middle"};u>p&&p>r(i+s)&&(h.horizontal="center"),d>g&&g>r(n+o)&&(h.vertical="middle"),h.important=a(r(i),r(s))>a(r(n),r(o))?"horizontal":"vertical",e.using.call(this,t,h)}),c.offset(t.extend(I,{using:l}))})},t.ui.position={fit:{left:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollLeft:s.offset.left,o=s.width,r=t.left-e.collisionPosition.marginLeft,h=n-r,l=r+e.collisionWidth-o-n;e.collisionWidth>o?h>0&&0>=l?(i=t.left+h+e.collisionWidth-o-n,t.left+=h-i):t.left=l>0&&0>=h?n:h>l?n+o-e.collisionWidth:n:h>0?t.left+=h:l>0?t.left-=l:t.left=a(t.left-r,t.left)},top:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollTop:s.offset.top,o=e.within.height,r=t.top-e.collisionPosition.marginTop,h=n-r,l=r+e.collisionHeight-o-n;e.collisionHeight>o?h>0&&0>=l?(i=t.top+h+e.collisionHeight-o-n,t.top+=h-i):t.top=l>0&&0>=h?n:h>l?n+o-e.collisionHeight:n:h>0?t.top+=h:l>0?t.top-=l:t.top=a(t.top-r,t.top)}},flip:{left:function(t,e){var i,s,n=e.within,o=n.offset.left+n.scrollLeft,a=n.width,h=n.isWindow?n.scrollLeft:n.offset.left,l=t.left-e.collisionPosition.marginLeft,c=l-h,u=l+e.collisionWidth-a-h,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>c?(i=t.left+d+p+f+e.collisionWidth-a-o,(0>i||r(c)>i)&&(t.left+=d+p+f)):u>0&&(s=t.left-e.collisionPosition.marginLeft+d+p+f-h,(s>0||u>r(s))&&(t.left+=d+p+f))},top:function(t,e){var i,s,n=e.within,o=n.offset.top+n.scrollTop,a=n.height,h=n.isWindow?n.scrollTop:n.offset.top,l=t.top-e.collisionPosition.marginTop,c=l-h,u=l+e.collisionHeight-a-h,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];0>c?(s=t.top+p+f+g+e.collisionHeight-a-o,t.top+p+f+g>c&&(0>s||r(c)>s)&&(t.top+=p+f+g)):u>0&&(i=t.top-e.collisionPosition.marginTop+p+f+g-h,t.top+p+f+g>u&&(i>0||u>r(i))&&(t.top+=p+f+g))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,s,n,o,a=document.getElementsByTagName("body")[0],r=document.createElement("div");e=document.createElement(a?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&t.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in s)e.style[o]=s[o];e.appendChild(r),i=a||document.documentElement,i.insertBefore(e,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",n=t(r).offset().left,t.support.offsetFractions=n>10&&11>n,e.innerHTML="",i.removeChild(e)}()}(jQuery),function(t,e){t.widget("ui.progressbar",{version:"1.10.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=t("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(t){return t===e?this.options.value:(this.options.value=this._constrainedValue(t),this._refreshValue(),e)},_constrainedValue:function(t){return t===e&&(t=this.options.value),this.indeterminate=t===!1,"number"!=typeof t&&(t=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=t("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),e===this.options.max&&this._trigger("complete")}})}(jQuery),function(t){var e=5;t.widget("ui.slider",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,s=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",a=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),e=n.length;i>e;e++)a.push(o);this.handles=n.add(t(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,i="";e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):this.range=t([])},_setupEvents:function(){var t=this.handles.add(this.range).filter("a");this._off(t),this._on(t,this._handleEvents),this._hoverable(t),this._focusable(t)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var i,s,n,o,a,r,h,l,c=this,u=this.options;return u.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(s-c.values(e));(n>i||n===i&&(e===c._lastChangedValue||c.values(e)===u.min))&&(n=i,o=t(this),a=e)}),r=this._start(e,a),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=a,o.addClass("ui-state-active").focus(),h=o.offset(),l=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-h.left-o.width()/2,top:e.pageY-h.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,a,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,s,n,o;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/e,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),o=this._valueMin()+s*n,this._trimAlignValue(o)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var s,n,o;this.options.values&&this.options.values.length?(s=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&i>s||1===e&&s>i)&&(i=s),i!==this.values(e)&&(n=this.values(),n[e]=i,o=this._trigger("slide",t,{handle:this.handles[e],value:i,values:n}),s=this.values(e?0:1),o!==!1&&this.values(e,i,!0))):i!==this.value()&&(o=this._trigger("slide",t,{handle:this.handles[e],value:i}),o!==!1&&this.value(i))},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,i){var s,n,o;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(s=this.options.values,n=arguments[0],o=0;s.length>o;o+=1)s[o]=this._trimAlignValue(n[o]),this._change(null,o);this._refreshValue()},_setOption:function(e,i){var s,n=0;switch("range"===e&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(n=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;n>s;s+=1)this._change(null,s);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,s;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(t){if(this._valueMin()>=t)return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,s=t-i;return 2*Math.abs(i)>=e&&(s+=i>0?e:-e),parseFloat(s.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,i,s,n,o,a=this.options.range,r=this.options,h=this,l=this._animateOff?!1:r.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=100*((h.values(s)-h._valueMin())/(h._valueMax()-h._valueMin())),c["horizontal"===h.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[l?"animate":"css"](c,r.animate),h.options.range===!0&&("horizontal"===h.orientation?(0===s&&h.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:r.animate})):(0===s&&h.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:r.animate}))),e=i}):(s=this.value(),n=this._valueMin(),o=this._valueMax(),i=o!==n?100*((s-n)/(o-n)):0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](c,r.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},r.animate),"max"===a&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},r.animate),"max"===a&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(i){var s,n,o,a,r=t(i.target).data("ui-slider-handle-index");switch(i.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(i.target).addClass("ui-state-active"),s=this._start(i,r),s===!1))return}switch(a=this.options.step,n=o=this.options.values&&this.options.values.length?this.values(r):this.value(),i.keyCode){case t.ui.keyCode.HOME:o=this._valueMin();break;case t.ui.keyCode.END:o=this._valueMax();break;case t.ui.keyCode.PAGE_UP:o=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.PAGE_DOWN:o=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(n===this._valueMax())return;o=this._trimAlignValue(n+a);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n===this._valueMin())return;o=this._trimAlignValue(n-a)}this._slide(i,r,o)},click:function(t){t.preventDefault()},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),t(e.target).removeClass("ui-state-active"))}}})}(jQuery),function(t){function e(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}t.widget("ui.spinner",{version:"1.10.3",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var e={},i=this.element;return t.each(["min","max","step"],function(t,s){var n=i.attr(s);void 0!==n&&n.length&&(e[s]=n)}),e},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",t)))},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((e>0?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(e){function i(){var t=this.element[0]===this.document[0].activeElement;t||(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s}))}var s;s=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),e.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(e)!==!1&&this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){return t(e.currentTarget).hasClass("ui-state-active")?this._start(e)===!1?!1:void this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var t=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=t.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*t.height())&&t.height()>0&&t.height(t.height()),this.options.disabled&&this.disable()},_keydown:function(e){var i=this.options,s=t.ui.keyCode;switch(e.keyCode){case s.UP:return this._repeat(null,1,e),!0;case s.DOWN:return this._repeat(null,-1,e),!0;case s.PAGE_UP:return this._repeat(null,i.page,e),!0;case s.PAGE_DOWN:return this._repeat(null,-i.page,e),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>";
},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(t){return this.spinning||this._trigger("start",t)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(t,e,i){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,i)},t),this._spin(e*this.options.step,i)},_spin:function(t,e){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+t*this._increment(this.counter)),this.spinning&&this._trigger("spin",e,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(e){var i=this.options.incremental;return i?t.isFunction(i)?i(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=""+t,i=e.indexOf(".");return-1===i?0:e.length-i-1},_adjustValue:function(t){var e,i,s=this.options;return e=null!==s.min?s.min:0,i=t-e,i=Math.round(i/s.step)*s.step,t=e+i,t=parseFloat(t.toFixed(this._precision())),null!==s.max&&t>s.max?s.max:null!==s.min&&s.min>t?s.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){if("culture"===t||"numberFormat"===t){var i=this._parse(this.element.val());return this.options[t]=e,void this.element.val(this._format(i))}("max"===t||"min"===t||"step"===t)&&"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(e.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(e.down)),this._super(t,e),"disabled"===t&&(e?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:e(function(t){this._super(t),this._value(this.element.val())}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(t,e){var i;""!==t&&(i=this._parse(t),null!==i&&(e||(i=this._adjustValue(i)),t=this._format(i))),this.element.val(t),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:e(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:e(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:e(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:e(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){return arguments.length?void e(this._value).call(this,t):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(t,e){function i(){return++n}function s(t){return t.hash.length>1&&decodeURIComponent(t.href.replace(o,""))===decodeURIComponent(location.href.replace(o,""))}var n=0,o=/#.*$/;t.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var e=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),t.isArray(i.disabled)&&(i.disabled=t.unique(i.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):t(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var i=this.options.active,s=this.options.collapsible,n=location.hash.substring(1);return null===i&&(n&&this.tabs.each(function(s,o){return t(o).attr("aria-controls")===n?(i=s,!1):e}),null===i&&(i=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===i||-1===i)&&(i=this.tabs.length?0:!1)),i!==!1&&(i=this.tabs.index(this.tabs.eq(i)),-1===i&&(i=s?!1:0)),!s&&i===!1&&this.anchors.length&&(i=0),i},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(i){var s=t(this.document[0].activeElement).closest("li"),n=this.tabs.index(s),o=!0;if(!this._handlePageNav(i)){switch(i.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:n++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:o=!1,n--;break;case t.ui.keyCode.END:n=this.anchors.length-1;break;case t.ui.keyCode.HOME:n=0;break;case t.ui.keyCode.SPACE:return i.preventDefault(),clearTimeout(this.activating),this._activate(n),e;case t.ui.keyCode.ENTER:return i.preventDefault(),clearTimeout(this.activating),this._activate(n===this.options.active?!1:n),e;default:return}i.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,o),i.ctrlKey||(s.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.focus())},_handlePageNav:function(i){return i.altKey&&i.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):i.altKey&&i.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):e},_findNextTab:function(e,i){function s(){return e>n&&(e=0),0>e&&(e=n),e}for(var n=this.tabs.length-1;-1!==t.inArray(s(),this.options.disabled);)e=i?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).focus(),t},_setOption:function(t,i){return"active"===t?(this._activate(i),e):"disabled"===t?(this._setupDisabled(i),e):(this._super(t,i),"collapsible"===t&&(this.element.toggleClass("ui-tabs-collapsible",i),i||this.options.active!==!1||this._activate(0)),"event"===t&&this._setupEvents(i),"heightStyle"===t&&this._setupHeightStyle(i),e)},_tabId:function(t){return t.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,i=this.tablist.children(":has(a[href])");e.disabled=t.map(i.filter(".ui-state-disabled"),function(t){return i.index(t)}),this._processTabs(),e.active!==!1&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return t("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=t(),this.anchors.each(function(i,n){var o,a,r,h=t(n).uniqueId().attr("id"),l=t(n).closest("li"),c=l.attr("aria-controls");s(n)?(o=n.hash,a=e.element.find(e._sanitizeSelector(o))):(r=e._tabId(l),o="#"+r,a=e.element.find(o),a.length||(a=e._createPanel(r),a.insertAfter(e.panels[i-1]||e.tablist)),a.attr("aria-live","polite")),a.length&&(e.panels=e.panels.add(a)),c&&l.data("ui-tabs-aria-controls",c),l.attr({"aria-controls":o.substring(1),"aria-labelledby":h}),a.attr("aria-labelledby",h)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(e){t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1);for(var i,s=0;i=this.tabs[s];s++)e===!0||-1!==t.inArray(s,e)?t(i).addClass("ui-state-disabled").attr("aria-disabled","true"):t(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=e},_setupEvents:function(e){var i={click:function(t){t.preventDefault()}};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,s=this.element.parent();"fill"===e?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var e=t(this),s=e.css("position");"absolute"!==s&&"fixed"!==s&&(i-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=t(this).outerHeight(!0)}),this.panels.each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each(function(){i=Math.max(i,t(this).height("").height())}).height(i))},_eventHandler:function(e){var i=this.options,s=this.active,n=t(e.currentTarget),o=n.closest("li"),a=o[0]===s[0],r=a&&i.collapsible,h=r?t():this._getPanelForTab(o),l=s.length?this._getPanelForTab(s):t(),c={oldTab:s,oldPanel:l,newTab:r?t():o,newPanel:h};e.preventDefault(),o.hasClass("ui-state-disabled")||o.hasClass("ui-tabs-loading")||this.running||a&&!i.collapsible||this._trigger("beforeActivate",e,c)===!1||(i.active=r?!1:this.tabs.index(o),this.active=a?t():o,this.xhr&&this.xhr.abort(),l.length||h.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(o),e),this._toggle(e,c))},_toggle:function(e,i){function s(){o.running=!1,o._trigger("activate",e,i)}function n(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),a.length&&o.options.show?o._show(a,o.options.show,s):(a.show(),s())}var o=this,a=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),n()),r.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),a.length&&r.length?i.oldTab.attr("tabIndex",-1):a.length&&this.tabs.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),a.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(e){var i,s=this._findActive(e);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return e===!1?t():this.tabs.eq(e)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+t+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var e=t(this),i=e.data("ui-tabs-aria-controls");i?e.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var s=this.options.disabled;s!==!1&&(i===e?s=!1:(i=this._getIndex(i),s=t.isArray(s)?t.map(s,function(t){return t!==i?t:null}):t.map(this.tabs,function(t,e){return e!==i?e:null})),this._setupDisabled(s))},disable:function(i){var s=this.options.disabled;if(s!==!0){if(i===e)s=!0;else{if(i=this._getIndex(i),-1!==t.inArray(i,s))return;s=t.isArray(s)?t.merge([i],s).sort():[i]}this._setupDisabled(s)}},load:function(e,i){e=this._getIndex(e);var n=this,o=this.tabs.eq(e),a=o.find(".ui-tabs-anchor"),r=this._getPanelForTab(o),h={tab:o,panel:r};s(a[0])||(this.xhr=t.ajax(this._ajaxSettings(a,i,h)),this.xhr&&"canceled"!==this.xhr.statusText&&(o.addClass("ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.success(function(t){setTimeout(function(){r.html(t),n._trigger("load",i,h)},1)}).complete(function(t,e){setTimeout(function(){"abort"===e&&n.panels.stop(!1,!0),o.removeClass("ui-tabs-loading"),r.removeAttr("aria-busy"),t===n.xhr&&delete n.xhr},1)})))},_ajaxSettings:function(e,i,s){var n=this;return{url:e.attr("href"),beforeSend:function(e,o){return n._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:o},s))}}},_getPanelForTab:function(e){var i=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}(jQuery),function(t){function e(e,i){var s=(e.attr("aria-describedby")||"").split(/\s+/);s.push(i),e.data("ui-tooltip-id",i).attr("aria-describedby",t.trim(s.join(" ")))}function i(e){var i=e.data("ui-tooltip-id"),s=(e.attr("aria-describedby")||"").split(/\s+/),n=t.inArray(i,s);-1!==n&&s.splice(n,1),e.removeData("ui-tooltip-id"),s=t.trim(s.join(" ")),s?e.attr("aria-describedby",s):e.removeAttr("aria-describedby")}var s=0;t.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var e=t(this).attr("title")||"";return t("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(e,i){var s=this;return"disabled"===e?(this[i?"_disable":"_enable"](),void(this.options[e]=i)):(this._super(e,i),void("content"===e&&t.each(this.tooltips,function(t,e){s._updateContent(e)})))},_disable:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event("blur");n.target=n.currentTarget=s[0],e.close(n,!0)}),this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.is("[title]")&&e.data("ui-tooltip-title",e.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))})},open:function(e){var i=this,s=t(e?e.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&s.parents().each(function(){var e,s=t(this);s.data("ui-tooltip-open")&&(e=t.Event("blur"),e.target=e.currentTarget=this,i.close(e,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))}),this._updateContent(s,e))},_updateContent:function(t,e){var i,s=this.options.content,n=this,o=e?e.type:null;return"string"==typeof s?this._open(e,t,s):(i=s.call(t[0],function(i){t.data("ui-tooltip-open")&&n._delay(function(){e&&(e.type=o),this._open(e,t,i)})}),void(i&&this._open(e,t,i)))},_open:function(i,s,n){function o(t){l.of=t,a.is(":hidden")||a.position(l)}var a,r,h,l=t.extend({},this.options.position);if(n){if(a=this._find(s),a.length)return void a.find(".ui-tooltip-content").html(n);s.is("[title]")&&(i&&"mouseover"===i.type?s.attr("title",""):s.removeAttr("title")),a=this._tooltip(s),e(s,a.attr("id")),a.find(".ui-tooltip-content").html(n),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:o}),o(i)):a.position(t.extend({of:s},this.options.position)),a.hide(),this._show(a,this.options.show),this.options.show&&this.options.show.delay&&(h=this.delayedShow=setInterval(function(){a.is(":visible")&&(o(l.of),clearInterval(h))},t.fx.interval)),this._trigger("open",i,{tooltip:a}),r={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var i=t.Event(e);i.currentTarget=s[0],this.close(i,!0)}},remove:function(){this._removeTooltip(a)}},i&&"mouseover"!==i.type||(r.mouseleave="close"),i&&"focusin"!==i.type||(r.focusout="close"),this._on(!0,s,r)}},close:function(e){var s=this,n=t(e?e.currentTarget:this.element),o=this._find(n);this.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&n.attr("title",n.data("ui-tooltip-title")),i(n),o.stop(!0),this._hide(o,this.options.hide,function(){s._removeTooltip(t(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,function(e,i){t(i.element).attr("title",i.title),delete s.parents[e]}),this.closing=!0,this._trigger("close",e,{tooltip:o}),this.closing=!1)},_tooltip:function(e){var i="ui-tooltip-"+s++,n=t("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return t("<div>").addClass("ui-tooltip-content").appendTo(n),n.appendTo(this.document[0].body),this.tooltips[i]=e,n},_find:function(e){var i=e.data("ui-tooltip-id");return i?t("#"+i):t()},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_destroy:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event("blur");n.target=n.currentTarget=s[0],e.close(n,!0),t("#"+i).remove(),s.data("ui-tooltip-title")&&(s.attr("title",s.data("ui-tooltip-title")),s.removeData("ui-tooltip-title"))})}})}(jQuery),jQuery(function($){$.datepicker.regional.fr={closeText:"Fermer",prevText:"Précédent",nextText:"Suivant",currentText:"Aujourd'hui",monthNames:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],monthNamesShort:["Janv.","Févr.","Mars","Avril","Mai","Juin","Juil.","Août","Sept.","Oct.","Nov.","Déc."],dayNames:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],dayNamesShort:["Dim.","Lun.","Mar.","Mer.","Jeu.","Ven.","Sam."],dayNamesMin:["D","L","M","M","J","V","S"],weekHeader:"Sem.",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},$.datepicker.setDefaults($.datepicker.regional.fr)}),function(a){function d(b){var c=b||window.event,d=[].slice.call(arguments,1),e=0,g=0,h=0;return b=a.event.fix(c),b.type="mousewheel",c.wheelDelta&&(e=c.wheelDelta/120),c.detail&&(e=-c.detail/3),h=e,void 0!==c.axis&&c.axis===c.HORIZONTAL_AXIS&&(h=0,g=-1*e),void 0!==c.wheelDeltaY&&(h=c.wheelDeltaY/120),void 0!==c.wheelDeltaX&&(g=-1*c.wheelDeltaX/120),d.unshift(b,e,g,h),(a.event.dispatch||a.event.handle).apply(this,d)}var b=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var c=b.length;c;)a.event.fixHooks[b[--c]]=a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=b.length;a;)this.addEventListener(b[--a],d,!1);else this.onmousewheel=d},teardown:function(){if(this.removeEventListener)for(var a=b.length;a;)this.removeEventListener(b[--a],d,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}(jQuery),function(c){var b={init:function(e){var f={set_width:!1,set_height:!1,horizontalScroll:!1,scrollInertia:950,mouseWheel:!0,mouseWheelPixels:"auto",autoDraggerLength:!0,autoHideScrollbar:!1,snapAmount:null,snapOffset:0,scrollButtons:{enable:!1,scrollType:"continuous",scrollSpeed:"auto",scrollAmount:40},advanced:{updateOnBrowserResize:!0,updateOnContentResize:!1,autoExpandHorizontalScroll:!1,autoScrollOnFocus:!0,normalizeMouseWheelDelta:!1},contentTouchScroll:!0,callbacks:{onScrollStart:function(){},onScroll:function(){},onTotalScroll:function(){},onTotalScrollBack:function(){},onTotalScrollOffset:0,onTotalScrollBackOffset:0,whileScrolling:function(){}},theme:"light"},e=c.extend(!0,f,e);return this.each(function(){var m=c(this);if(e.set_width&&m.css("width",e.set_width),e.set_height&&m.css("height",e.set_height),c(document).data("mCustomScrollbar-index")){var t=parseInt(c(document).data("mCustomScrollbar-index"));c(document).data("mCustomScrollbar-index",t+1)}else c(document).data("mCustomScrollbar-index","1");m.wrapInner("<div class='mCustomScrollBox mCS-"+e.theme+"' id='mCSB_"+c(document).data("mCustomScrollbar-index")+"' style='position:relative; height:100%; overflow:hidden; max-width:100%;' />").addClass("mCustomScrollbar _mCS_"+c(document).data("mCustomScrollbar-index"));var g=m.children(".mCustomScrollBox");if(e.horizontalScroll){g.addClass("mCSB_horizontal").wrapInner("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />");var k=g.children(".mCSB_h_wrapper");k.wrapInner("<div class='mCSB_container' style='position:absolute; left:0;' />").children(".mCSB_container").css({width:k.children().outerWidth(),position:"relative"}).unwrap()}else g.wrapInner("<div class='mCSB_container' style='position:relative; top:0;' />");var o=g.children(".mCSB_container");c.support.touch&&o.addClass("mCS_touch"),o.after("<div class='mCSB_scrollTools' style='position:absolute;'><div class='mCSB_draggerContainer'><div class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' style='position:relative;'></div></div><div class='mCSB_draggerRail'></div></div></div>");var l=g.children(".mCSB_scrollTools"),h=l.children(".mCSB_draggerContainer"),q=h.children(".mCSB_dragger");if(e.horizontalScroll?q.data("minDraggerWidth",q.width()):q.data("minDraggerHeight",q.height()),e.scrollButtons.enable&&(e.horizontalScroll?l.prepend("<a class='mCSB_buttonLeft' oncontextmenu='return false;'></a>").append("<a class='mCSB_buttonRight' oncontextmenu='return false;'></a>"):l.prepend("<a class='mCSB_buttonUp' oncontextmenu='return false;'></a>").append("<a class='mCSB_buttonDown' oncontextmenu='return false;'></a>")),g.bind("scroll",function(){m.is(".mCS_disabled")||g.scrollTop(0).scrollLeft(0)}),m.data({mCS_Init:!0,mCustomScrollbarIndex:c(document).data("mCustomScrollbar-index"),horizontalScroll:e.horizontalScroll,scrollInertia:e.scrollInertia,scrollEasing:"mcsEaseOut",mouseWheel:e.mouseWheel,mouseWheelPixels:e.mouseWheelPixels,autoDraggerLength:e.autoDraggerLength,autoHideScrollbar:e.autoHideScrollbar,snapAmount:e.snapAmount,snapOffset:e.snapOffset,scrollButtons_enable:e.scrollButtons.enable,scrollButtons_scrollType:e.scrollButtons.scrollType,scrollButtons_scrollSpeed:e.scrollButtons.scrollSpeed,scrollButtons_scrollAmount:e.scrollButtons.scrollAmount,autoExpandHorizontalScroll:e.advanced.autoExpandHorizontalScroll,autoScrollOnFocus:e.advanced.autoScrollOnFocus,normalizeMouseWheelDelta:e.advanced.normalizeMouseWheelDelta,contentTouchScroll:e.contentTouchScroll,onScrollStart_Callback:e.callbacks.onScrollStart,onScroll_Callback:e.callbacks.onScroll,onTotalScroll_Callback:e.callbacks.onTotalScroll,onTotalScrollBack_Callback:e.callbacks.onTotalScrollBack,onTotalScroll_Offset:e.callbacks.onTotalScrollOffset,onTotalScrollBack_Offset:e.callbacks.onTotalScrollBackOffset,whileScrolling_Callback:e.callbacks.whileScrolling,bindEvent_scrollbar_drag:!1,bindEvent_content_touch:!1,bindEvent_scrollbar_click:!1,bindEvent_mousewheel:!1,bindEvent_buttonsContinuous_y:!1,bindEvent_buttonsContinuous_x:!1,bindEvent_buttonsPixels_y:!1,bindEvent_buttonsPixels_x:!1,bindEvent_focusin:!1,bindEvent_autoHideScrollbar:!1,mCSB_buttonScrollRight:!1,mCSB_buttonScrollLeft:!1,mCSB_buttonScrollDown:!1,mCSB_buttonScrollUp:!1}),e.horizontalScroll)"none"!==m.css("max-width")&&(e.advanced.updateOnContentResize||(e.advanced.updateOnContentResize=!0));else if("none"!==m.css("max-height")){var s=!1,r=parseInt(m.css("max-height"));m.css("max-height").indexOf("%")>=0&&(s=r,r=m.parent().height()*s/100),m.css("overflow","hidden"),g.css("max-height",r)}if(m.mCustomScrollbar("update"),e.advanced.updateOnBrowserResize){var i,j=c(window).width(),u=c(window).height();c(window).bind("resize."+m.data("mCustomScrollbarIndex"),function(){i&&clearTimeout(i),i=setTimeout(function(){if(!m.is(".mCS_disabled")&&!m.is(".mCS_destroyed")){var w=c(window).width(),v=c(window).height();(j!==w||u!==v)&&("none"!==m.css("max-height")&&s&&g.css("max-height",m.parent().height()*s/100),m.mCustomScrollbar("update"),j=w,u=v)}},150)})}if(e.advanced.updateOnContentResize){var p;if(e.horizontalScroll)var n=o.outerWidth();else var n=o.outerHeight();p=setInterval(function(){if(e.horizontalScroll){e.advanced.autoExpandHorizontalScroll&&o.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:o.outerWidth(),position:"relative"}).unwrap();var v=o.outerWidth()}else var v=o.outerHeight();v!=n&&(m.mCustomScrollbar("update"),n=v)},300)}})},update:function(){var n=c(this),k=n.children(".mCustomScrollBox"),q=k.children(".mCSB_container");q.removeClass("mCS_no_scrollbar"),n.removeClass("mCS_disabled mCS_destroyed"),k.scrollTop(0).scrollLeft(0);var y=k.children(".mCSB_scrollTools"),o=y.children(".mCSB_draggerContainer"),m=o.children(".mCSB_dragger");if(n.data("horizontalScroll")){var A=y.children(".mCSB_buttonLeft"),t=y.children(".mCSB_buttonRight"),f=k.width();n.data("autoExpandHorizontalScroll")&&q.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:q.outerWidth(),position:"relative"}).unwrap();var z=q.outerWidth()}else var w=y.children(".mCSB_buttonUp"),g=y.children(".mCSB_buttonDown"),r=k.height(),i=q.outerHeight();if(i>r&&!n.data("horizontalScroll")){y.css("display","block");var s=o.height();if(n.data("autoDraggerLength")){var u=Math.round(r/i*s),l=m.data("minDraggerHeight");if(l>=u)m.css({height:l});else if(u>=s-10){var p=s-10;m.css({height:p})}else m.css({height:u});m.children(".mCSB_dragger_bar").css({"line-height":m.height()+"px"})}var B=m.height(),x=(i-r)/(s-B);n.data("scrollAmount",x).mCustomScrollbar("scrolling",k,q,o,m,w,g,A,t);var D=Math.abs(q.position().top);n.mCustomScrollbar("scrollTo",D,{scrollInertia:0,trigger:"internal"})}else if(z>f&&n.data("horizontalScroll")){y.css("display","block");var h=o.width();if(n.data("autoDraggerLength")){var j=Math.round(f/z*h),C=m.data("minDraggerWidth");if(C>=j)m.css({width:C});else if(j>=h-10){var e=h-10;m.css({width:e})}else m.css({width:j})}var v=m.width(),x=(z-f)/(h-v);n.data("scrollAmount",x).mCustomScrollbar("scrolling",k,q,o,m,w,g,A,t);var D=Math.abs(q.position().left);n.mCustomScrollbar("scrollTo",D,{scrollInertia:0,trigger:"internal"})}else k.unbind("mousewheel focusin"),n.data("horizontalScroll")?m.add(q).css("left",0):m.add(q).css("top",0),y.css("display","none"),q.addClass("mCS_no_scrollbar"),n.data({bindEvent_mousewheel:!1,bindEvent_focusin:!1})},scrolling:function(h,p,m,j,w,e,A,v){function D(G,H,I,F){k.data("horizontalScroll")?k.mCustomScrollbar("scrollTo",j.position().left-H+F,{moveDragger:!0,trigger:"internal"}):k.mCustomScrollbar("scrollTo",j.position().top-G+I,{moveDragger:!0,trigger:"internal"})}function q(x){j.data("preventAction")||(j.data("preventAction",!0),k.mCustomScrollbar("scrollTo",x,{trigger:"internal"}))}function z(){var x=k.data("scrollButtons_scrollSpeed");return"auto"===k.data("scrollButtons_scrollSpeed")&&(x=Math.round((k.data("scrollInertia")+100)/40)),x}var k=c(this);if(!k.data("bindEvent_scrollbar_drag")){var n,o;c.support.msPointer?(j.bind("MSPointerDown",function(H){H.preventDefault(),k.data({on_drag:!0}),j.addClass("mCSB_dragger_onDrag");var G=c(this),J=G.offset(),F=H.originalEvent.pageX-J.left,I=H.originalEvent.pageY-J.top;F<G.width()&&F>0&&I<G.height()&&I>0&&(n=I,o=F)}),c(document).bind("MSPointerMove."+k.data("mCustomScrollbarIndex"),function(H){if(H.preventDefault(),k.data("on_drag")){var G=j,J=G.offset(),F=H.originalEvent.pageX-J.left,I=H.originalEvent.pageY-J.top;D(n,o,I,F)}}).bind("MSPointerUp."+k.data("mCustomScrollbarIndex"),function(x){k.data({on_drag:!1}),j.removeClass("mCSB_dragger_onDrag")})):(j.bind("mousedown touchstart",function(H){H.preventDefault(),H.stopImmediatePropagation();var F,J,G=c(this),K=G.offset();if("touchstart"===H.type){var I=H.originalEvent.touches[0]||H.originalEvent.changedTouches[0];F=I.pageX-K.left,J=I.pageY-K.top}else k.data({on_drag:!0}),j.addClass("mCSB_dragger_onDrag"),F=H.pageX-K.left,J=H.pageY-K.top;F<G.width()&&F>0&&J<G.height()&&J>0&&(n=J,o=F)}).bind("touchmove",function(H){H.preventDefault(),H.stopImmediatePropagation();var K=H.originalEvent.touches[0]||H.originalEvent.changedTouches[0],G=c(this),J=G.offset(),F=K.pageX-J.left,I=K.pageY-J.top;D(n,o,I,F)}),c(document).bind("mousemove."+k.data("mCustomScrollbarIndex"),function(H){if(k.data("on_drag")){var G=j,J=G.offset(),F=H.pageX-J.left,I=H.pageY-J.top;D(n,o,I,F)}}).bind("mouseup."+k.data("mCustomScrollbarIndex"),function(x){k.data({on_drag:!1}),j.removeClass("mCSB_dragger_onDrag")})),k.data({bindEvent_scrollbar_drag:!0})}if(c.support.touch&&k.data("contentTouchScroll")&&!k.data("bindEvent_content_touch")){var l,B,r,s,u,C,E;p.bind("touchstart",function(x){x.stopImmediatePropagation(),l=x.originalEvent.touches[0]||x.originalEvent.changedTouches[0],B=c(this),r=B.offset(),u=l.pageX-r.left,s=l.pageY-r.top,C=s,E=u}),p.bind("touchmove",function(x){x.preventDefault(),x.stopImmediatePropagation(),l=x.originalEvent.touches[0]||x.originalEvent.changedTouches[0],B=c(this).parent(),r=B.offset(),u=l.pageX-r.left,s=l.pageY-r.top,k.data("horizontalScroll")?k.mCustomScrollbar("scrollTo",E-u,{trigger:"internal"}):k.mCustomScrollbar("scrollTo",C-s,{trigger:"internal"})})}if(k.data("bindEvent_scrollbar_click")||(m.bind("click",function(F){var x=(F.pageY-m.offset().top)*k.data("scrollAmount"),y=c(F.target);k.data("horizontalScroll")&&(x=(F.pageX-m.offset().left)*k.data("scrollAmount")),(y.hasClass("mCSB_draggerContainer")||y.hasClass("mCSB_draggerRail"))&&k.mCustomScrollbar("scrollTo",x,{
trigger:"internal",scrollEasing:"draggerRailEase"})}),k.data({bindEvent_scrollbar_click:!0})),k.data("mouseWheel")&&(k.data("bindEvent_mousewheel")||(h.bind("mousewheel",function(H,J){var G,F=k.data("mouseWheelPixels"),x=Math.abs(p.position().top),I=j.position().top,y=m.height()-j.height();k.data("normalizeMouseWheelDelta")&&(J=0>J?-1:1),"auto"===F&&(F=100+Math.round(k.data("scrollAmount")/2)),k.data("horizontalScroll")&&(I=j.position().left,y=m.width()-j.width(),x=Math.abs(p.position().left)),(J>0&&0!==I||0>J&&I!==y)&&(H.preventDefault(),H.stopImmediatePropagation()),G=x-J*F,k.mCustomScrollbar("scrollTo",G,{trigger:"internal"})}),k.data({bindEvent_mousewheel:!0}))),k.data("scrollButtons_enable"))if("pixels"===k.data("scrollButtons_scrollType"))k.data("horizontalScroll")?(v.add(A).unbind("mousedown touchstart MSPointerDown mouseup MSPointerUp mouseout MSPointerOut touchend",i,g),k.data({bindEvent_buttonsContinuous_x:!1}),k.data("bindEvent_buttonsPixels_x")||(v.bind("click",function(x){x.preventDefault(),q(Math.abs(p.position().left)+k.data("scrollButtons_scrollAmount"))}),A.bind("click",function(x){x.preventDefault(),q(Math.abs(p.position().left)-k.data("scrollButtons_scrollAmount"))}),k.data({bindEvent_buttonsPixels_x:!0}))):(e.add(w).unbind("mousedown touchstart MSPointerDown mouseup MSPointerUp mouseout MSPointerOut touchend",i,g),k.data({bindEvent_buttonsContinuous_y:!1}),k.data("bindEvent_buttonsPixels_y")||(e.bind("click",function(x){x.preventDefault(),q(Math.abs(p.position().top)+k.data("scrollButtons_scrollAmount"))}),w.bind("click",function(x){x.preventDefault(),q(Math.abs(p.position().top)-k.data("scrollButtons_scrollAmount"))}),k.data({bindEvent_buttonsPixels_y:!0})));else if(k.data("horizontalScroll")){if(v.add(A).unbind("click"),k.data({bindEvent_buttonsPixels_x:!1}),!k.data("bindEvent_buttonsContinuous_x")){v.bind("mousedown touchstart MSPointerDown",function(y){y.preventDefault();var x=z();k.data({mCSB_buttonScrollRight:setInterval(function(){k.mCustomScrollbar("scrollTo",Math.abs(p.position().left)+x,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var i=function(x){x.preventDefault(),clearInterval(k.data("mCSB_buttonScrollRight"))};v.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",i),A.bind("mousedown touchstart MSPointerDown",function(y){y.preventDefault();var x=z();k.data({mCSB_buttonScrollLeft:setInterval(function(){k.mCustomScrollbar("scrollTo",Math.abs(p.position().left)-x,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var g=function(x){x.preventDefault(),clearInterval(k.data("mCSB_buttonScrollLeft"))};A.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",g),k.data({bindEvent_buttonsContinuous_x:!0})}}else if(e.add(w).unbind("click"),k.data({bindEvent_buttonsPixels_y:!1}),!k.data("bindEvent_buttonsContinuous_y")){e.bind("mousedown touchstart MSPointerDown",function(y){y.preventDefault();var x=z();k.data({mCSB_buttonScrollDown:setInterval(function(){k.mCustomScrollbar("scrollTo",Math.abs(p.position().top)+x,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var t=function(x){x.preventDefault(),clearInterval(k.data("mCSB_buttonScrollDown"))};e.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",t),w.bind("mousedown touchstart MSPointerDown",function(y){y.preventDefault();var x=z();k.data({mCSB_buttonScrollUp:setInterval(function(){k.mCustomScrollbar("scrollTo",Math.abs(p.position().top)-x,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var f=function(x){x.preventDefault(),clearInterval(k.data("mCSB_buttonScrollUp"))};w.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",f),k.data({bindEvent_buttonsContinuous_y:!0})}k.data("autoScrollOnFocus")&&(k.data("bindEvent_focusin")||(h.bind("focusin",function(){h.scrollTop(0).scrollLeft(0);var x=c(document.activeElement);if(x.is("input,textarea,select,button,a[tabindex],area,object")){var G=p.position().top,y=x.position().top,F=h.height()-x.outerHeight();k.data("horizontalScroll")&&(G=p.position().left,y=x.position().left,F=h.width()-x.outerWidth()),(0>G+y||G+y>F)&&k.mCustomScrollbar("scrollTo",y,{trigger:"internal"})}}),k.data({bindEvent_focusin:!0}))),k.data("autoHideScrollbar")&&(k.data("bindEvent_autoHideScrollbar")||(h.bind("mouseenter",function(x){h.addClass("mCS-mouse-over"),d.showScrollbar.call(h.children(".mCSB_scrollTools"))}).bind("mouseleave touchend",function(x){h.removeClass("mCS-mouse-over"),"mouseleave"===x.type&&d.hideScrollbar.call(h.children(".mCSB_scrollTools"))}),k.data({bindEvent_autoHideScrollbar:!0})))},scrollTo:function(e,f){function u(w){switch(this.mcs={top:k.position().top,left:k.position().left,draggerTop:h.position().top,draggerLeft:h.position().left,topPct:Math.round(100*Math.abs(k.position().top)/Math.abs(k.outerHeight()-g.height())),leftPct:Math.round(100*Math.abs(k.position().left)/Math.abs(k.outerWidth()-g.width()))},w){case"onScrollStart":i.data("mCS_tweenRunning",!0).data("onScrollStart_Callback").call(i,this.mcs);break;case"whileScrolling":i.data("whileScrolling_Callback").call(i,this.mcs);break;case"onScroll":i.data("onScroll_Callback").call(i,this.mcs);break;case"onTotalScrollBack":i.data("onTotalScrollBack_Callback").call(i,this.mcs);break;case"onTotalScroll":i.data("onTotalScroll_Callback").call(i,this.mcs)}}var p,q,s,m,l,i=c(this),o={moveDragger:!1,trigger:"external",callbacks:!0,scrollInertia:i.data("scrollInertia"),scrollEasing:i.data("scrollEasing")},f=c.extend(o,f),g=i.children(".mCustomScrollBox"),k=g.children(".mCSB_container"),r=g.children(".mCSB_scrollTools"),j=r.children(".mCSB_draggerContainer"),h=j.children(".mCSB_dragger"),t=draggerSpeed=f.scrollInertia;if(!k.hasClass("mCS_no_scrollbar")&&(i.data({mCS_trigger:f.trigger}),i.data("mCS_Init")&&(f.callbacks=!1),e||0===e)){if("number"==typeof e)f.moveDragger?(p=e,e=i.data("horizontalScroll")?h.position().left*i.data("scrollAmount"):h.position().top*i.data("scrollAmount"),draggerSpeed=0):p=e/i.data("scrollAmount");else if("string"==typeof e){var v;v="top"===e?0:"bottom"!==e||i.data("horizontalScroll")?"left"===e?0:"right"===e&&i.data("horizontalScroll")?k.outerWidth()-g.width():"first"===e?i.find(".mCSB_container").find(":first"):"last"===e?i.find(".mCSB_container").find(":last"):i.find(e):k.outerHeight()-g.height(),1===v.length?(e=i.data("horizontalScroll")?v.position().left:v.position().top,p=e/i.data("scrollAmount")):p=e=v}if(i.data("horizontalScroll")){i.data("onTotalScrollBack_Offset")&&(s=-i.data("onTotalScrollBack_Offset")),i.data("onTotalScroll_Offset")&&(l=g.width()-k.outerWidth()+i.data("onTotalScroll_Offset")),0>p?(p=e=0,clearInterval(i.data("mCSB_buttonScrollLeft")),s||(q=!0)):p>=j.width()-h.width()?(p=j.width()-h.width(),e=g.width()-k.outerWidth(),clearInterval(i.data("mCSB_buttonScrollRight")),l||(m=!0)):e=-e;var n=i.data("snapAmount");n&&(e=Math.round(e/n)*n-i.data("snapOffset")),d.mTweenAxis.call(this,h[0],"left",Math.round(p),draggerSpeed,f.scrollEasing),d.mTweenAxis.call(this,k[0],"left",Math.round(e),t,f.scrollEasing,{onStart:function(){f.callbacks&&!i.data("mCS_tweenRunning")&&u("onScrollStart"),i.data("autoHideScrollbar")&&d.showScrollbar.call(r)},onUpdate:function(){f.callbacks&&u("whileScrolling")},onComplete:function(){f.callbacks&&(u("onScroll"),(q||s&&k.position().left>=s)&&u("onTotalScrollBack"),(m||l&&k.position().left<=l)&&u("onTotalScroll")),h.data("preventAction",!1),i.data("mCS_tweenRunning",!1),i.data("autoHideScrollbar")&&(g.hasClass("mCS-mouse-over")||d.hideScrollbar.call(r))}})}else{i.data("onTotalScrollBack_Offset")&&(s=-i.data("onTotalScrollBack_Offset")),i.data("onTotalScroll_Offset")&&(l=g.height()-k.outerHeight()+i.data("onTotalScroll_Offset")),0>p?(p=e=0,clearInterval(i.data("mCSB_buttonScrollUp")),s||(q=!0)):p>=j.height()-h.height()?(p=j.height()-h.height(),e=g.height()-k.outerHeight(),clearInterval(i.data("mCSB_buttonScrollDown")),l||(m=!0)):e=-e;var n=i.data("snapAmount");n&&(e=Math.round(e/n)*n-i.data("snapOffset")),d.mTweenAxis.call(this,h[0],"top",Math.round(p),draggerSpeed,f.scrollEasing),d.mTweenAxis.call(this,k[0],"top",Math.round(e),t,f.scrollEasing,{onStart:function(){f.callbacks&&!i.data("mCS_tweenRunning")&&u("onScrollStart"),i.data("autoHideScrollbar")&&d.showScrollbar.call(r)},onUpdate:function(){f.callbacks&&u("whileScrolling")},onComplete:function(){f.callbacks&&(u("onScroll"),(q||s&&k.position().top>=s)&&u("onTotalScrollBack"),(m||l&&k.position().top<=l)&&u("onTotalScroll")),h.data("preventAction",!1),i.data("mCS_tweenRunning",!1),i.data("autoHideScrollbar")&&(g.hasClass("mCS-mouse-over")||d.hideScrollbar.call(r))}})}i.data("mCS_Init")&&i.data({mCS_Init:!1})}},stop:function(){var g=c(this),e=g.children().children(".mCSB_container"),f=g.children().children().children().children(".mCSB_dragger");d.mTweenAxisStop.call(this,e[0]),d.mTweenAxisStop.call(this,f[0])},disable:function(e){var j=c(this),f=j.children(".mCustomScrollBox"),h=f.children(".mCSB_container"),g=f.children(".mCSB_scrollTools"),i=g.children().children(".mCSB_dragger");f.unbind("mousewheel focusin mouseenter mouseleave touchend"),h.unbind("touchstart touchmove"),e&&(j.data("horizontalScroll")?i.add(h).css("left",0):i.add(h).css("top",0)),g.css("display","none"),h.addClass("mCS_no_scrollbar"),j.data({bindEvent_mousewheel:!1,bindEvent_focusin:!1,bindEvent_content_touch:!1,bindEvent_autoHideScrollbar:!1}).addClass("mCS_disabled")},destroy:function(){var e=c(this);e.removeClass("mCustomScrollbar _mCS_"+e.data("mCustomScrollbarIndex")).addClass("mCS_destroyed").children().children(".mCSB_container").unwrap().children().unwrap().siblings(".mCSB_scrollTools").remove(),c(document).unbind("mousemove."+e.data("mCustomScrollbarIndex")+" mouseup."+e.data("mCustomScrollbarIndex")+" MSPointerMove."+e.data("mCustomScrollbarIndex")+" MSPointerUp."+e.data("mCustomScrollbarIndex")),c(window).unbind("resize."+e.data("mCustomScrollbarIndex"))}},d={showScrollbar:function(){this.stop().animate({opacity:1},"fast")},hideScrollbar:function(){this.stop().animate({opacity:0},"fast")},mTweenAxis:function(g,i,h,f,o,y){function t(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()}function x(){j||v.call(),j=t()-n,u(),j>=g._time&&(g._time=j>g._time?j+l-(j-g._time):j+l-1,g._time<j+1&&(g._time=j+1)),g._time<f?g._id=_request(x):w.call()}function u(){f>0?(g.currVal=k(g._time,r,m,f,o),s[i]=Math.round(g.currVal)+"px"):s[i]=h+"px",p.call()}function e(){l=1e3/60,g._time=j+l,_request=window.requestAnimationFrame?window.requestAnimationFrame:function(z){return u(),setTimeout(z,.01)},g._id=_request(x)}function q(){null!=g._id&&(window.requestAnimationFrame?window.cancelAnimationFrame(g._id):clearTimeout(g._id),g._id=null)}function k(B,A,F,E,C){switch(C){case"linear":return F*B/E+A;case"easeOutQuad":return B/=E,-F*B*(B-2)+A;case"easeInOutQuad":return B/=E/2,1>B?F/2*B*B+A:(B--,-F/2*(B*(B-2)-1)+A);case"easeOutCubic":return B/=E,B--,F*(B*B*B+1)+A;case"easeOutQuart":return B/=E,B--,-F*(B*B*B*B-1)+A;case"easeOutQuint":return B/=E,B--,F*(B*B*B*B*B+1)+A;case"easeOutCirc":return B/=E,B--,F*Math.sqrt(1-B*B)+A;case"easeOutSine":return F*Math.sin(B/E*(Math.PI/2))+A;case"easeOutExpo":return F*(-Math.pow(2,-10*B/E)+1)+A;case"mcsEaseOut":var D=(B/=E)*B,z=D*B;return A+F*(.499999999999997*z*D+-2.5*D*D+5.5*z+-6.5*D+4*B);case"draggerRailEase":return B/=E/2,1>B?F/2*B*B*B+A:(B-=2,F/2*(B*B*B+2)+A)}}var l,y=y||{},v=y.onStart||function(){},p=y.onUpdate||function(){},w=y.onComplete||function(){},n=t(),j=0,r=g.offsetTop,s=g.style;"left"===i&&(r=g.offsetLeft);var m=h-r;q(),e()},mTweenAxisStop:function(e){null!=e._id&&(window.requestAnimationFrame?window.cancelAnimationFrame(e._id):clearTimeout(e._id),e._id=null)},rafPolyfill:function(){for(var f=["ms","moz","webkit","o"],e=f.length;--e>-1&&!window.requestAnimationFrame;)window.requestAnimationFrame=window[f[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[f[e]+"CancelAnimationFrame"]||window[f[e]+"CancelRequestAnimationFrame"]}};d.rafPolyfill.call(),c.support.touch=!!("ontouchstart"in window),c.support.msPointer=window.navigator.msPointerEnabled;var a="https:"==document.location.protocol?"https:":"http:";c.event.special.mousewheel||document.write('<script src="'+a+'//cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.0.6/jquery.mousewheel.min.js"></script>'),c.fn.mCustomScrollbar=function(e){return b[e]?b[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void c.error("Method "+e+" does not exist"):b.init.apply(this,arguments)}}(jQuery),function(window,document,undefined){"use strict";function minErr(module){return function(){var message,i,code=arguments[0],prefix="["+(module?module+":":"")+code+"] ",template=arguments[1],templateArgs=arguments,stringify=function(obj){return"function"==typeof obj?obj.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof obj?"undefined":"string"!=typeof obj?JSON.stringify(obj):obj};for(message=prefix+template.replace(/\{\d+\}/g,function(match){var arg,index=+match.slice(1,-1);return index+2<templateArgs.length?(arg=templateArgs[index+2],"function"==typeof arg?arg.toString().replace(/ ?\{[\s\S]*$/,""):"undefined"==typeof arg?"undefined":"string"!=typeof arg?toJson(arg):arg):match}),message=message+"\nhttp://errors.angularjs.org/1.2.10/"+(module?module+"/":"")+code,i=2;i<arguments.length;i++)message=message+(2==i?"?":"&")+"p"+(i-2)+"="+encodeURIComponent(stringify(arguments[i]));return new Error(message)}}function isArrayLike(obj){if(null==obj||isWindow(obj))return!1;var length=obj.length;return 1===obj.nodeType&&length?!0:isString(obj)||isArray(obj)||0===length||"number"==typeof length&&length>0&&length-1 in obj}function forEach(obj,iterator,context){var key;if(obj)if(isFunction(obj))for(key in obj)"prototype"==key||"length"==key||"name"==key||obj.hasOwnProperty&&!obj.hasOwnProperty(key)||iterator.call(context,obj[key],key);else if(obj.forEach&&obj.forEach!==forEach)obj.forEach(iterator,context);else if(isArrayLike(obj))for(key=0;key<obj.length;key++)iterator.call(context,obj[key],key);else for(key in obj)obj.hasOwnProperty(key)&&iterator.call(context,obj[key],key);return obj}function sortedKeys(obj){var keys=[];for(var key in obj)obj.hasOwnProperty(key)&&keys.push(key);return keys.sort()}function forEachSorted(obj,iterator,context){for(var keys=sortedKeys(obj),i=0;i<keys.length;i++)iterator.call(context,obj[keys[i]],keys[i]);return keys}function reverseParams(iteratorFn){return function(value,key){iteratorFn(key,value)}}function nextUid(){for(var digit,index=uid.length;index;){if(index--,digit=uid[index].charCodeAt(0),57==digit)return uid[index]="A",uid.join("");if(90!=digit)return uid[index]=String.fromCharCode(digit+1),uid.join("");uid[index]="0"}return uid.unshift("0"),uid.join("")}function setHashKey(obj,h){h?obj.$$hashKey=h:delete obj.$$hashKey}function extend(dst){var h=dst.$$hashKey;return forEach(arguments,function(obj){obj!==dst&&forEach(obj,function(value,key){dst[key]=value})}),setHashKey(dst,h),dst}function int(str){return parseInt(str,10)}function inherit(parent,extra){return extend(new(extend(function(){},{prototype:parent})),extra)}function noop(){}function identity($){return $}function valueFn(value){return function(){return value}}function isUndefined(value){return"undefined"==typeof value}function isDefined(value){return"undefined"!=typeof value}function isObject(value){return null!=value&&"object"==typeof value}function isString(value){return"string"==typeof value}function isNumber(value){return"number"==typeof value}function isDate(value){return"[object Date]"===toString.call(value)}function isArray(value){return"[object Array]"===toString.call(value)}function isFunction(value){return"function"==typeof value}function isRegExp(value){return"[object RegExp]"===toString.call(value)}function isWindow(obj){return obj&&obj.document&&obj.location&&obj.alert&&obj.setInterval}function isScope(obj){return obj&&obj.$evalAsync&&obj.$watch}function isFile(obj){return"[object File]"===toString.call(obj)}function isElement(node){return!(!node||!(node.nodeName||node.on&&node.find))}function map(obj,iterator,context){var results=[];return forEach(obj,function(value,index,list){results.push(iterator.call(context,value,index,list))}),results}function includes(array,obj){return-1!=indexOf(array,obj)}function indexOf(array,obj){if(array.indexOf)return array.indexOf(obj);for(var i=0;i<array.length;i++)if(obj===array[i])return i;return-1}function arrayRemove(array,value){var index=indexOf(array,value);return index>=0&&array.splice(index,1),value}function copy(source,destination){if(isWindow(source)||isScope(source))throw ngMinErr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(destination){if(source===destination)throw ngMinErr("cpi","Can't copy! Source and destination are identical.");if(isArray(source)){destination.length=0;for(var i=0;i<source.length;i++)destination.push(copy(source[i]))}else{var h=destination.$$hashKey;forEach(destination,function(value,key){delete destination[key]});for(var key in source)destination[key]=copy(source[key]);setHashKey(destination,h)}}else destination=source,source&&(isArray(source)?destination=copy(source,[]):isDate(source)?destination=new Date(source.getTime()):isRegExp(source)?destination=new RegExp(source.source):isObject(source)&&(destination=copy(source,{})));return destination}function shallowCopy(src,dst){dst=dst||{};for(var key in src)src.hasOwnProperty(key)&&"$"!==key.charAt(0)&&"$"!==key.charAt(1)&&(dst[key]=src[key]);return dst}function equals(o1,o2){if(o1===o2)return!0;if(null===o1||null===o2)return!1;if(o1!==o1&&o2!==o2)return!0;var length,key,keySet,t1=typeof o1,t2=typeof o2;if(t1==t2&&"object"==t1){if(!isArray(o1)){if(isDate(o1))return isDate(o2)&&o1.getTime()==o2.getTime();if(isRegExp(o1)&&isRegExp(o2))return o1.toString()==o2.toString();if(isScope(o1)||isScope(o2)||isWindow(o1)||isWindow(o2)||isArray(o2))return!1;keySet={};for(key in o1)if("$"!==key.charAt(0)&&!isFunction(o1[key])){if(!equals(o1[key],o2[key]))return!1;keySet[key]=!0}for(key in o2)if(!keySet.hasOwnProperty(key)&&"$"!==key.charAt(0)&&o2[key]!==undefined&&!isFunction(o2[key]))return!1;return!0}if(!isArray(o2))return!1;if((length=o1.length)==o2.length){for(key=0;length>key;key++)if(!equals(o1[key],o2[key]))return!1;return!0}}return!1}function csp(){return document.securityPolicy&&document.securityPolicy.isActive||document.querySelector&&!(!document.querySelector("[ng-csp]")&&!document.querySelector("[data-ng-csp]"))}function concat(array1,array2,index){return array1.concat(slice.call(array2,index))}function sliceArgs(args,startIndex){return slice.call(args,startIndex||0)}function bind(self,fn){var curryArgs=arguments.length>2?sliceArgs(arguments,2):[];return!isFunction(fn)||fn instanceof RegExp?fn:curryArgs.length?function(){return arguments.length?fn.apply(self,curryArgs.concat(slice.call(arguments,0))):fn.apply(self,curryArgs)}:function(){return arguments.length?fn.apply(self,arguments):fn.call(self)}}function toJsonReplacer(key,value){var val=value;return"string"==typeof key&&"$"===key.charAt(0)?val=undefined:isWindow(value)?val="$WINDOW":value&&document===value?val="$DOCUMENT":isScope(value)&&(val="$SCOPE"),val}function toJson(obj,pretty){return"undefined"==typeof obj?undefined:JSON.stringify(obj,toJsonReplacer,pretty?"  ":null)}function fromJson(json){return isString(json)?JSON.parse(json):json}function toBoolean(value){if("function"==typeof value)value=!0;else if(value&&0!==value.length){var v=lowercase(""+value);value=!("f"==v||"0"==v||"false"==v||"no"==v||"n"==v||"[]"==v)}else value=!1;return value}function startingTag(element){element=jqLite(element).clone();try{element.empty()}catch(e){}var TEXT_NODE=3,elemHtml=jqLite("<div>").append(element).html();try{return element[0].nodeType===TEXT_NODE?lowercase(elemHtml):elemHtml.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(match,nodeName){return"<"+lowercase(nodeName)})}catch(e){return lowercase(elemHtml)}}function tryDecodeURIComponent(value){try{return decodeURIComponent(value)}catch(e){}}function parseKeyValue(keyValue){var key_value,key,obj={};return forEach((keyValue||"").split("&"),function(keyValue){if(keyValue&&(key_value=keyValue.split("="),key=tryDecodeURIComponent(key_value[0]),isDefined(key))){var val=isDefined(key_value[1])?tryDecodeURIComponent(key_value[1]):!0;obj[key]?isArray(obj[key])?obj[key].push(val):obj[key]=[obj[key],val]:obj[key]=val}}),obj}function toKeyValue(obj){var parts=[];return forEach(obj,function(value,key){isArray(value)?forEach(value,function(arrayValue){parts.push(encodeUriQuery(key,!0)+(arrayValue===!0?"":"="+encodeUriQuery(arrayValue,!0)))}):parts.push(encodeUriQuery(key,!0)+(value===!0?"":"="+encodeUriQuery(value,!0)))}),parts.length?parts.join("&"):""}function encodeUriSegment(val){return encodeUriQuery(val,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,pctEncodeSpaces?"%20":"+")}function angularInit(element,bootstrap){function append(element){element&&elements.push(element)}var appElement,module,elements=[element],names=["ng:app","ng-app","x-ng-app","data-ng-app"],NG_APP_CLASS_REGEXP=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;forEach(names,function(name){names[name]=!0,append(document.getElementById(name)),name=name.replace(":","\\:"),element.querySelectorAll&&(forEach(element.querySelectorAll("."+name),append),forEach(element.querySelectorAll("."+name+"\\:"),append),forEach(element.querySelectorAll("["+name+"]"),append))}),forEach(elements,function(element){if(!appElement){var className=" "+element.className+" ",match=NG_APP_CLASS_REGEXP.exec(className);match?(appElement=element,module=(match[2]||"").replace(/\s+/g,",")):forEach(element.attributes,function(attr){!appElement&&names[attr.name]&&(appElement=element,module=attr.value)})}}),appElement&&bootstrap(appElement,module?[module]:[])}function bootstrap(element,modules){var doBootstrap=function(){if(element=jqLite(element),element.injector()){var tag=element[0]===document?"document":startingTag(element);throw ngMinErr("btstrpd","App Already Bootstrapped with this Element '{0}'",tag)}modules=modules||[],modules.unshift(["$provide",function($provide){$provide.value("$rootElement",element)}]),modules.unshift("ng");var injector=createInjector(modules);return injector.invoke(["$rootScope","$rootElement","$compile","$injector","$animate",function(scope,element,compile,injector,animate){scope.$apply(function(){element.data("$injector",injector),compile(element)(scope)})}]),injector},NG_DEFER_BOOTSTRAP=/^NG_DEFER_BOOTSTRAP!/;return window&&!NG_DEFER_BOOTSTRAP.test(window.name)?doBootstrap():(window.name=window.name.replace(NG_DEFER_BOOTSTRAP,""),void(angular.resumeBootstrap=function(extraModules){forEach(extraModules,function(module){modules.push(module)}),doBootstrap()}))}function snake_case(name,separator){return separator=separator||"_",name.replace(SNAKE_CASE_REGEXP,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}function bindJQuery(){jQuery=window.jQuery,jQuery?(jqLite=jQuery,extend(jQuery.fn,{scope:JQLitePrototype.scope,isolateScope:JQLitePrototype.isolateScope,controller:JQLitePrototype.controller,injector:JQLitePrototype.injector,inheritedData:JQLitePrototype.inheritedData}),jqLitePatchJQueryRemove("remove",!0,!0,!1),jqLitePatchJQueryRemove("empty",!1,!1,!1),jqLitePatchJQueryRemove("html",!1,!1,!0)):jqLite=JQLite,angular.element=jqLite}function assertArg(arg,name,reason){if(!arg)throw ngMinErr("areq","Argument '{0}' is {1}",name||"?",reason||"required");return arg}function assertArgFn(arg,name,acceptArrayAnnotation){return acceptArrayAnnotation&&isArray(arg)&&(arg=arg[arg.length-1]),assertArg(isFunction(arg),name,"not a function, got "+(arg&&"object"==typeof arg?arg.constructor.name||"Object":typeof arg)),arg}function assertNotHasOwnProperty(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)}function getter(obj,path,bindFnToScope){if(!path)return obj;for(var key,keys=path.split("."),lastInstance=obj,len=keys.length,i=0;len>i;i++)key=keys[i],obj&&(obj=(lastInstance=obj)[key]);return!bindFnToScope&&isFunction(obj)?bind(lastInstance,obj):obj}function getBlockElements(nodes){var startNode=nodes[0],endNode=nodes[nodes.length-1];if(startNode===endNode)return jqLite(startNode);var element=startNode,elements=[element];do{if(element=element.nextSibling,!element)break;elements.push(element)}while(element!==endNode);return jqLite(elements)}function setupModuleLoader(window){function ensure(obj,name,factory){return obj[name]||(obj[name]=factory())}var $injectorMinErr=minErr("$injector"),ngMinErr=minErr("ng"),angular=ensure(window,"angular",Object);return angular.$$minErr=angular.$$minErr||minErr,ensure(angular,"module",function(){var modules={};return function(name,requires,configFn){var assertNotHasOwnProperty=function(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)};return assertNotHasOwnProperty(name,"module"),requires&&modules.hasOwnProperty(name)&&(modules[name]=null),ensure(modules,name,function(){function invokeLater(provider,method,insertMethod){return function(){return invokeQueue[insertMethod||"push"]([provider,method,arguments]),moduleInstance}}if(!requires)throw $injectorMinErr("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",name);var invokeQueue=[],runBlocks=[],config=invokeLater("$injector","invoke"),moduleInstance={_invokeQueue:invokeQueue,_runBlocks:runBlocks,requires:requires,name:name,provider:invokeLater("$provide","provider"),factory:invokeLater("$provide","factory"),service:invokeLater("$provide","service"),value:invokeLater("$provide","value"),constant:invokeLater("$provide","constant","unshift"),animation:invokeLater("$animateProvider","register"),filter:invokeLater("$filterProvider","register"),controller:invokeLater("$controllerProvider","register"),directive:invokeLater("$compileProvider","directive"),config:config,run:function(block){return runBlocks.push(block),this}};return configFn&&config(configFn),moduleInstance})}})}function publishExternalAPI(angular){extend(angular,{bootstrap:bootstrap,copy:copy,extend:extend,equals:equals,element:jqLite,forEach:forEach,injector:createInjector,noop:noop,bind:bind,toJson:toJson,fromJson:fromJson,identity:identity,isUndefined:isUndefined,isDefined:isDefined,isString:isString,isFunction:isFunction,isObject:isObject,isNumber:isNumber,isElement:isElement,isArray:isArray,version:version,isDate:isDate,lowercase:lowercase,uppercase:uppercase,callbacks:{counter:0},$$minErr:minErr,$$csp:csp}),angularModule=setupModuleLoader(window);try{angularModule("ngLocale")}catch(e){angularModule("ngLocale",[]).provider("$locale",$LocaleProvider)}angularModule("ng",["ngLocale"],["$provide",function($provide){$provide.provider({$$sanitizeUri:$$SanitizeUriProvider}),$provide.provider("$compile",$CompileProvider).directive({a:htmlAnchorDirective,input:inputDirective,textarea:inputDirective,form:formDirective,script:scriptDirective,select:selectDirective,style:styleDirective,option:optionDirective,ngBind:ngBindDirective,ngBindHtml:ngBindHtmlDirective,ngBindTemplate:ngBindTemplateDirective,ngClass:ngClassDirective,ngClassEven:ngClassEvenDirective,ngClassOdd:ngClassOddDirective,ngCloak:ngCloakDirective,ngController:ngControllerDirective,ngForm:ngFormDirective,ngHide:ngHideDirective,ngIf:ngIfDirective,ngInclude:ngIncludeDirective,ngInit:ngInitDirective,ngNonBindable:ngNonBindableDirective,ngPluralize:ngPluralizeDirective,ngRepeat:ngRepeatDirective,ngShow:ngShowDirective,ngStyle:ngStyleDirective,ngSwitch:ngSwitchDirective,ngSwitchWhen:ngSwitchWhenDirective,ngSwitchDefault:ngSwitchDefaultDirective,ngOptions:ngOptionsDirective,ngTransclude:ngTranscludeDirective,ngModel:ngModelDirective,ngList:ngListDirective,ngChange:ngChangeDirective,required:requiredDirective,ngRequired:requiredDirective,ngValue:ngValueDirective}).directive({ngInclude:ngIncludeFillContentDirective}).directive(ngAttributeAliasDirectives).directive(ngEventDirectives),$provide.provider({$anchorScroll:$AnchorScrollProvider,$animate:$AnimateProvider,$browser:$BrowserProvider,$cacheFactory:$CacheFactoryProvider,$controller:$ControllerProvider,$document:$DocumentProvider,$exceptionHandler:$ExceptionHandlerProvider,$filter:$FilterProvider,$interpolate:$InterpolateProvider,$interval:$IntervalProvider,$http:$HttpProvider,$httpBackend:$HttpBackendProvider,$location:$LocationProvider,$log:$LogProvider,$parse:$ParseProvider,$rootScope:$RootScopeProvider,$q:$QProvider,$sce:$SceProvider,$sceDelegate:$SceDelegateProvider,$sniffer:$SnifferProvider,$templateCache:$TemplateCacheProvider,$timeout:$TimeoutProvider,$window:$WindowProvider})}])}function jqNextId(){return++jqId}function camelCase(name){return name.replace(SPECIAL_CHARS_REGEXP,function(_,separator,letter,offset){return offset?letter.toUpperCase():letter}).replace(MOZ_HACK_REGEXP,"Moz$1")}function jqLitePatchJQueryRemove(name,dispatchThis,filterElems,getterIfNoArguments){function removePatch(param){var set,setIndex,setLength,element,childIndex,childLength,children,list=filterElems&&param?[this.filter(param)]:[this],fireEvent=dispatchThis;if(!getterIfNoArguments||null!=param)for(;list.length;)for(set=list.shift(),setIndex=0,setLength=set.length;setLength>setIndex;setIndex++)for(element=jqLite(set[setIndex]),fireEvent?element.triggerHandler("$destroy"):fireEvent=!fireEvent,childIndex=0,childLength=(children=element.children()).length;childLength>childIndex;childIndex++)list.push(jQuery(children[childIndex]));return originalJqFn.apply(this,arguments)}var originalJqFn=jQuery.fn[name];originalJqFn=originalJqFn.$original||originalJqFn,removePatch.$original=originalJqFn,jQuery.fn[name]=removePatch}function JQLite(element){if(element instanceof JQLite)return element;if(!(this instanceof JQLite)){if(isString(element)&&"<"!=element.charAt(0))throw jqLiteMinErr("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new JQLite(element)}if(isString(element)){var div=document.createElement("div");div.innerHTML="<div>&#160;</div>"+element,div.removeChild(div.firstChild),jqLiteAddNodes(this,div.childNodes);var fragment=jqLite(document.createDocumentFragment());fragment.append(this)}else jqLiteAddNodes(this,element)}function jqLiteClone(element){return element.cloneNode(!0)}function jqLiteDealoc(element){jqLiteRemoveData(element);for(var i=0,children=element.childNodes||[];i<children.length;i++)jqLiteDealoc(children[i])}function jqLiteOff(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("offargs","jqLite#off() does not support the `selector` argument");var events=jqLiteExpandoStore(element,"events"),handle=jqLiteExpandoStore(element,"handle");handle&&(isUndefined(type)?forEach(events,function(eventHandler,type){removeEventListenerFn(element,type,eventHandler),delete events[type]}):forEach(type.split(" "),function(type){isUndefined(fn)?(removeEventListenerFn(element,type,events[type]),delete events[type]):arrayRemove(events[type]||[],fn)}))}function jqLiteRemoveData(element,name){var expandoId=element[jqName],expandoStore=jqCache[expandoId];if(expandoStore){if(name)return void delete jqCache[expandoId].data[name];expandoStore.handle&&(expandoStore.events.$destroy&&expandoStore.handle({},"$destroy"),jqLiteOff(element)),delete jqCache[expandoId],element[jqName]=undefined}}function jqLiteExpandoStore(element,key,value){var expandoId=element[jqName],expandoStore=jqCache[expandoId||-1];return isDefined(value)?(expandoStore||(element[jqName]=expandoId=jqNextId(),
expandoStore=jqCache[expandoId]={}),void(expandoStore[key]=value)):expandoStore&&expandoStore[key]}function jqLiteData(element,key,value){var data=jqLiteExpandoStore(element,"data"),isSetter=isDefined(value),keyDefined=!isSetter&&isDefined(key),isSimpleGetter=keyDefined&&!isObject(key);if(data||isSimpleGetter||jqLiteExpandoStore(element,"data",data={}),isSetter)data[key]=value;else{if(!keyDefined)return data;if(isSimpleGetter)return data&&data[key];extend(data,key)}}function jqLiteHasClass(element,selector){return element.getAttribute?(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+selector+" ")>-1:!1}function jqLiteRemoveClass(element,cssClasses){cssClasses&&element.setAttribute&&forEach(cssClasses.split(" "),function(cssClass){element.setAttribute("class",trim((" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+trim(cssClass)+" "," ")))})}function jqLiteAddClass(element,cssClasses){if(cssClasses&&element.setAttribute){var existingClasses=(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");forEach(cssClasses.split(" "),function(cssClass){cssClass=trim(cssClass),-1===existingClasses.indexOf(" "+cssClass+" ")&&(existingClasses+=cssClass+" ")}),element.setAttribute("class",trim(existingClasses))}}function jqLiteAddNodes(root,elements){if(elements){elements=elements.nodeName||!isDefined(elements.length)||isWindow(elements)?[elements]:elements;for(var i=0;i<elements.length;i++)root.push(elements[i])}}function jqLiteController(element,name){return jqLiteInheritedData(element,"$"+(name||"ngController")+"Controller")}function jqLiteInheritedData(element,name,value){element=jqLite(element),9==element[0].nodeType&&(element=element.find("html"));for(var names=isArray(name)?name:[name];element.length;){for(var i=0,ii=names.length;ii>i;i++)if((value=element.data(names[i]))!==undefined)return value;element=element.parent()}}function jqLiteEmpty(element){for(var i=0,childNodes=element.childNodes;i<childNodes.length;i++)jqLiteDealoc(childNodes[i]);for(;element.firstChild;)element.removeChild(element.firstChild)}function getBooleanAttrName(element,name){var booleanAttr=BOOLEAN_ATTR[name.toLowerCase()];return booleanAttr&&BOOLEAN_ELEMENTS[element.nodeName]&&booleanAttr}function createEventHandler(element,events){var eventHandler=function(event,type){if(event.preventDefault||(event.preventDefault=function(){event.returnValue=!1}),event.stopPropagation||(event.stopPropagation=function(){event.cancelBubble=!0}),event.target||(event.target=event.srcElement||document),isUndefined(event.defaultPrevented)){var prevent=event.preventDefault;event.preventDefault=function(){event.defaultPrevented=!0,prevent.call(event)},event.defaultPrevented=!1}event.isDefaultPrevented=function(){return event.defaultPrevented||event.returnValue===!1};var eventHandlersCopy=shallowCopy(events[type||event.type]||[]);forEach(eventHandlersCopy,function(fn){fn.call(element,event)}),8>=msie?(event.preventDefault=null,event.stopPropagation=null,event.isDefaultPrevented=null):(delete event.preventDefault,delete event.stopPropagation,delete event.isDefaultPrevented)};return eventHandler.elem=element,eventHandler}function hashKey(obj){var key,objType=typeof obj;return"object"==objType&&null!==obj?"function"==typeof(key=obj.$$hashKey)?key=obj.$$hashKey():key===undefined&&(key=obj.$$hashKey=nextUid()):key=obj,objType+":"+key}function HashMap(array){forEach(array,this.put,this)}function annotate(fn){var $inject,fnText,argDecl,last;return"function"==typeof fn?($inject=fn.$inject)||($inject=[],fn.length&&(fnText=fn.toString().replace(STRIP_COMMENTS,""),argDecl=fnText.match(FN_ARGS),forEach(argDecl[1].split(FN_ARG_SPLIT),function(arg){arg.replace(FN_ARG,function(all,underscore,name){$inject.push(name)})})),fn.$inject=$inject):isArray(fn)?(last=fn.length-1,assertArgFn(fn[last],"fn"),$inject=fn.slice(0,last)):assertArgFn(fn,"fn",!0),$inject}function createInjector(modulesToLoad){function supportObject(delegate){return function(key,value){return isObject(key)?void forEach(key,reverseParams(delegate)):delegate(key,value)}}function provider(name,provider_){if(assertNotHasOwnProperty(name,"service"),(isFunction(provider_)||isArray(provider_))&&(provider_=providerInjector.instantiate(provider_)),!provider_.$get)throw $injectorMinErr("pget","Provider '{0}' must define $get factory method.",name);return providerCache[name+providerSuffix]=provider_}function factory(name,factoryFn){return provider(name,{$get:factoryFn})}function service(name,constructor){return factory(name,["$injector",function($injector){return $injector.instantiate(constructor)}])}function value(name,val){return factory(name,valueFn(val))}function constant(name,value){assertNotHasOwnProperty(name,"constant"),providerCache[name]=value,instanceCache[name]=value}function decorator(serviceName,decorFn){var origProvider=providerInjector.get(serviceName+providerSuffix),orig$get=origProvider.$get;origProvider.$get=function(){var origInstance=instanceInjector.invoke(orig$get,origProvider);return instanceInjector.invoke(decorFn,null,{$delegate:origInstance})}}function loadModules(modulesToLoad){var moduleFn,invokeQueue,i,ii,runBlocks=[];return forEach(modulesToLoad,function(module){if(!loadedModules.get(module)){loadedModules.put(module,!0);try{if(isString(module))for(moduleFn=angularModule(module),runBlocks=runBlocks.concat(loadModules(moduleFn.requires)).concat(moduleFn._runBlocks),invokeQueue=moduleFn._invokeQueue,i=0,ii=invokeQueue.length;ii>i;i++){var invokeArgs=invokeQueue[i],provider=providerInjector.get(invokeArgs[0]);provider[invokeArgs[1]].apply(provider,invokeArgs[2])}else isFunction(module)?runBlocks.push(providerInjector.invoke(module)):isArray(module)?runBlocks.push(providerInjector.invoke(module)):assertArgFn(module,"module")}catch(e){throw isArray(module)&&(module=module[module.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),$injectorMinErr("modulerr","Failed to instantiate module {0} due to:\n{1}",module,e.stack||e.message||e)}}}),runBlocks}function createInternalInjector(cache,factory){function getService(serviceName){if(cache.hasOwnProperty(serviceName)){if(cache[serviceName]===INSTANTIATING)throw $injectorMinErr("cdep","Circular dependency found: {0}",path.join(" <- "));return cache[serviceName]}try{return path.unshift(serviceName),cache[serviceName]=INSTANTIATING,cache[serviceName]=factory(serviceName)}catch(err){throw cache[serviceName]===INSTANTIATING&&delete cache[serviceName],err}finally{path.shift()}}function invoke(fn,self,locals){var length,i,key,args=[],$inject=annotate(fn);for(i=0,length=$inject.length;length>i;i++){if(key=$inject[i],"string"!=typeof key)throw $injectorMinErr("itkn","Incorrect injection token! Expected service name as string, got {0}",key);args.push(locals&&locals.hasOwnProperty(key)?locals[key]:getService(key))}return fn.$inject||(fn=fn[length]),fn.apply(self,args)}function instantiate(Type,locals){var instance,returnedValue,Constructor=function(){};return Constructor.prototype=(isArray(Type)?Type[Type.length-1]:Type).prototype,instance=new Constructor,returnedValue=invoke(Type,instance,locals),isObject(returnedValue)||isFunction(returnedValue)?returnedValue:instance}return{invoke:invoke,instantiate:instantiate,get:getService,annotate:annotate,has:function(name){return providerCache.hasOwnProperty(name+providerSuffix)||cache.hasOwnProperty(name)}}}var INSTANTIATING={},providerSuffix="Provider",path=[],loadedModules=new HashMap,providerCache={$provide:{provider:supportObject(provider),factory:supportObject(factory),service:supportObject(service),value:supportObject(value),constant:supportObject(constant),decorator:decorator}},providerInjector=providerCache.$injector=createInternalInjector(providerCache,function(){throw $injectorMinErr("unpr","Unknown provider: {0}",path.join(" <- "))}),instanceCache={},instanceInjector=instanceCache.$injector=createInternalInjector(instanceCache,function(servicename){var provider=providerInjector.get(servicename+providerSuffix);return instanceInjector.invoke(provider.$get,provider)});return forEach(loadModules(modulesToLoad),function(fn){instanceInjector.invoke(fn||noop)}),instanceInjector}function $AnchorScrollProvider(){var autoScrollingEnabled=!0;this.disableAutoScrolling=function(){autoScrollingEnabled=!1},this.$get=["$window","$location","$rootScope",function($window,$location,$rootScope){function getFirstAnchor(list){var result=null;return forEach(list,function(element){result||"a"!==lowercase(element.nodeName)||(result=element)}),result}function scroll(){var elm,hash=$location.hash();hash?(elm=document.getElementById(hash))?elm.scrollIntoView():(elm=getFirstAnchor(document.getElementsByName(hash)))?elm.scrollIntoView():"top"===hash&&$window.scrollTo(0,0):$window.scrollTo(0,0)}var document=$window.document;return autoScrollingEnabled&&$rootScope.$watch(function(){return $location.hash()},function(){$rootScope.$evalAsync(scroll)}),scroll}]}function Browser(window,document,$log,$sniffer){function completeOutstandingRequest(fn){try{fn.apply(null,sliceArgs(arguments,1))}finally{if(outstandingRequestCount--,0===outstandingRequestCount)for(;outstandingRequestCallbacks.length;)try{outstandingRequestCallbacks.pop()()}catch(e){$log.error(e)}}}function startPoller(interval,setTimeout){!function check(){forEach(pollFns,function(pollFn){pollFn()}),pollTimeout=setTimeout(check,interval)}()}function fireUrlChange(){newLocation=null,lastBrowserUrl!=self.url()&&(lastBrowserUrl=self.url(),forEach(urlChangeListeners,function(listener){listener(self.url())}))}var self=this,rawDocument=document[0],location=window.location,history=window.history,setTimeout=window.setTimeout,clearTimeout=window.clearTimeout,pendingDeferIds={};self.isMock=!1;var outstandingRequestCount=0,outstandingRequestCallbacks=[];self.$$completeOutstandingRequest=completeOutstandingRequest,self.$$incOutstandingRequestCount=function(){outstandingRequestCount++},self.notifyWhenNoOutstandingRequests=function(callback){forEach(pollFns,function(pollFn){pollFn()}),0===outstandingRequestCount?callback():outstandingRequestCallbacks.push(callback)};var pollTimeout,pollFns=[];self.addPollFn=function(fn){return isUndefined(pollTimeout)&&startPoller(100,setTimeout),pollFns.push(fn),fn};var lastBrowserUrl=location.href,baseElement=document.find("base"),newLocation=null;self.url=function(url,replace){if(location!==window.location&&(location=window.location),history!==window.history&&(history=window.history),url){if(lastBrowserUrl==url)return;return lastBrowserUrl=url,$sniffer.history?replace?history.replaceState(null,"",url):(history.pushState(null,"",url),baseElement.attr("href",baseElement.attr("href"))):(newLocation=url,replace?location.replace(url):location.href=url),self}return newLocation||location.href.replace(/%27/g,"'")};var urlChangeListeners=[],urlChangeInit=!1;self.onUrlChange=function(callback){return urlChangeInit||($sniffer.history&&jqLite(window).on("popstate",fireUrlChange),$sniffer.hashchange?jqLite(window).on("hashchange",fireUrlChange):self.addPollFn(fireUrlChange),urlChangeInit=!0),urlChangeListeners.push(callback),callback},self.baseHref=function(){var href=baseElement.attr("href");return href?href.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var lastCookies={},lastCookieString="",cookiePath=self.baseHref();self.cookies=function(name,value){var cookieLength,cookieArray,cookie,i,index;if(!name){if(rawDocument.cookie!==lastCookieString)for(lastCookieString=rawDocument.cookie,cookieArray=lastCookieString.split("; "),lastCookies={},i=0;i<cookieArray.length;i++)cookie=cookieArray[i],index=cookie.indexOf("="),index>0&&(name=unescape(cookie.substring(0,index)),lastCookies[name]===undefined&&(lastCookies[name]=unescape(cookie.substring(index+1))));return lastCookies}value===undefined?rawDocument.cookie=escape(name)+"=;path="+cookiePath+";expires=Thu, 01 Jan 1970 00:00:00 GMT":isString(value)&&(cookieLength=(rawDocument.cookie=escape(name)+"="+escape(value)+";path="+cookiePath).length+1,cookieLength>4096&&$log.warn("Cookie '"+name+"' possibly not set or overflowed because it was too large ("+cookieLength+" > 4096 bytes)!"))},self.defer=function(fn,delay){var timeoutId;return outstandingRequestCount++,timeoutId=setTimeout(function(){delete pendingDeferIds[timeoutId],completeOutstandingRequest(fn)},delay||0),pendingDeferIds[timeoutId]=!0,timeoutId},self.defer.cancel=function(deferId){return pendingDeferIds[deferId]?(delete pendingDeferIds[deferId],clearTimeout(deferId),completeOutstandingRequest(noop),!0):!1}}function $BrowserProvider(){this.$get=["$window","$log","$sniffer","$document",function($window,$log,$sniffer,$document){return new Browser($window,$document,$log,$sniffer)}]}function $CacheFactoryProvider(){this.$get=function(){function cacheFactory(cacheId,options){function refresh(entry){entry!=freshEnd&&(staleEnd?staleEnd==entry&&(staleEnd=entry.n):staleEnd=entry,link(entry.n,entry.p),link(entry,freshEnd),freshEnd=entry,freshEnd.n=null)}function link(nextEntry,prevEntry){nextEntry!=prevEntry&&(nextEntry&&(nextEntry.p=prevEntry),prevEntry&&(prevEntry.n=nextEntry))}if(cacheId in caches)throw minErr("$cacheFactory")("iid","CacheId '{0}' is already taken!",cacheId);var size=0,stats=extend({},options,{id:cacheId}),data={},capacity=options&&options.capacity||Number.MAX_VALUE,lruHash={},freshEnd=null,staleEnd=null;return caches[cacheId]={put:function(key,value){var lruEntry=lruHash[key]||(lruHash[key]={key:key});return refresh(lruEntry),isUndefined(value)?void 0:(key in data||size++,data[key]=value,size>capacity&&this.remove(staleEnd.key),value)},get:function(key){var lruEntry=lruHash[key];if(lruEntry)return refresh(lruEntry),data[key]},remove:function(key){var lruEntry=lruHash[key];lruEntry&&(lruEntry==freshEnd&&(freshEnd=lruEntry.p),lruEntry==staleEnd&&(staleEnd=lruEntry.n),link(lruEntry.n,lruEntry.p),delete lruHash[key],delete data[key],size--)},removeAll:function(){data={},size=0,lruHash={},freshEnd=staleEnd=null},destroy:function(){data=null,stats=null,lruHash=null,delete caches[cacheId]},info:function(){return extend({},stats,{size:size})}}}var caches={};return cacheFactory.info=function(){var info={};return forEach(caches,function(cache,cacheId){info[cacheId]=cache.info()}),info},cacheFactory.get=function(cacheId){return caches[cacheId]},cacheFactory}}function $TemplateCacheProvider(){this.$get=["$cacheFactory",function($cacheFactory){return $cacheFactory("templates")}]}function $CompileProvider($provide,$$sanitizeUriProvider){var hasDirectives={},Suffix="Directive",COMMENT_DIRECTIVE_REGEXP=/^\s*directive\:\s*([\d\w\-_]+)\s+(.*)$/,CLASS_DIRECTIVE_REGEXP=/(([\d\w\-_]+)(?:\:([^;]+))?;?)/,EVENT_HANDLER_ATTR_REGEXP=/^(on[a-z]+|formaction)$/;this.directive=function registerDirective(name,directiveFactory){return assertNotHasOwnProperty(name,"directive"),isString(name)?(assertArg(directiveFactory,"directiveFactory"),hasDirectives.hasOwnProperty(name)||(hasDirectives[name]=[],$provide.factory(name+Suffix,["$injector","$exceptionHandler",function($injector,$exceptionHandler){var directives=[];return forEach(hasDirectives[name],function(directiveFactory,index){try{var directive=$injector.invoke(directiveFactory);isFunction(directive)?directive={compile:valueFn(directive)}:!directive.compile&&directive.link&&(directive.compile=valueFn(directive.link)),directive.priority=directive.priority||0,directive.index=index,directive.name=directive.name||name,directive.require=directive.require||directive.controller&&directive.name,directive.restrict=directive.restrict||"A",directives.push(directive)}catch(e){$exceptionHandler(e)}}),directives}])),hasDirectives[name].push(directiveFactory)):forEach(name,reverseParams(registerDirective)),this},this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.aHrefSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.imgSrcSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.imgSrcSanitizationWhitelist()},this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function($injector,$interpolate,$exceptionHandler,$http,$templateCache,$parse,$controller,$rootScope,$document,$sce,$animate,$$sanitizeUri){function compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext){$compileNodes instanceof jqLite||($compileNodes=jqLite($compileNodes)),forEach($compileNodes,function(node,index){3==node.nodeType&&node.nodeValue.match(/\S+/)&&($compileNodes[index]=node=jqLite(node).wrap("<span></span>").parent()[0])});var compositeLinkFn=compileNodes($compileNodes,transcludeFn,$compileNodes,maxPriority,ignoreDirective,previousCompileContext);return safeAddClass($compileNodes,"ng-scope"),function(scope,cloneConnectFn,transcludeControllers){assertArg(scope,"scope");var $linkNode=cloneConnectFn?JQLitePrototype.clone.call($compileNodes):$compileNodes;forEach(transcludeControllers,function(instance,name){$linkNode.data("$"+name+"Controller",instance)});for(var i=0,ii=$linkNode.length;ii>i;i++){var node=$linkNode[i],nodeType=node.nodeType;(1===nodeType||9===nodeType)&&$linkNode.eq(i).data("$scope",scope)}return cloneConnectFn&&cloneConnectFn($linkNode,scope),compositeLinkFn&&compositeLinkFn(scope,$linkNode,$linkNode),$linkNode}}function safeAddClass($element,className){try{$element.addClass(className)}catch(e){}}function compileNodes(nodeList,transcludeFn,$rootElement,maxPriority,ignoreDirective,previousCompileContext){function compositeLinkFn(scope,nodeList,$rootElement,boundTranscludeFn){var nodeLinkFn,childLinkFn,node,$node,childScope,childTranscludeFn,i,ii,n,nodeListLength=nodeList.length,stableNodeList=new Array(nodeListLength);for(i=0;nodeListLength>i;i++)stableNodeList[i]=nodeList[i];for(i=0,n=0,ii=linkFns.length;ii>i;n++)node=stableNodeList[n],nodeLinkFn=linkFns[i++],childLinkFn=linkFns[i++],$node=jqLite(node),nodeLinkFn?(nodeLinkFn.scope?(childScope=scope.$new(),$node.data("$scope",childScope)):childScope=scope,childTranscludeFn=nodeLinkFn.transclude,childTranscludeFn||!boundTranscludeFn&&transcludeFn?nodeLinkFn(childLinkFn,childScope,node,$rootElement,createBoundTranscludeFn(scope,childTranscludeFn||transcludeFn)):nodeLinkFn(childLinkFn,childScope,node,$rootElement,boundTranscludeFn)):childLinkFn&&childLinkFn(scope,node.childNodes,undefined,boundTranscludeFn)}for(var attrs,directives,nodeLinkFn,childNodes,childLinkFn,linkFnFound,linkFns=[],i=0;i<nodeList.length;i++)attrs=new Attributes,directives=collectDirectives(nodeList[i],[],attrs,0===i?maxPriority:undefined,ignoreDirective),nodeLinkFn=directives.length?applyDirectivesToNode(directives,nodeList[i],attrs,transcludeFn,$rootElement,null,[],[],previousCompileContext):null,nodeLinkFn&&nodeLinkFn.scope&&safeAddClass(jqLite(nodeList[i]),"ng-scope"),childLinkFn=nodeLinkFn&&nodeLinkFn.terminal||!(childNodes=nodeList[i].childNodes)||!childNodes.length?null:compileNodes(childNodes,nodeLinkFn?nodeLinkFn.transclude:transcludeFn),linkFns.push(nodeLinkFn,childLinkFn),linkFnFound=linkFnFound||nodeLinkFn||childLinkFn,previousCompileContext=null;return linkFnFound?compositeLinkFn:null}function createBoundTranscludeFn(scope,transcludeFn){return function(transcludedScope,cloneFn,controllers){var scopeCreated=!1;transcludedScope||(transcludedScope=scope.$new(),transcludedScope.$$transcluded=!0,scopeCreated=!0);var clone=transcludeFn(transcludedScope,cloneFn,controllers);return scopeCreated&&clone.on("$destroy",bind(transcludedScope,transcludedScope.$destroy)),clone}}function collectDirectives(node,directives,attrs,maxPriority,ignoreDirective){var match,className,nodeType=node.nodeType,attrsMap=attrs.$attr;switch(nodeType){case 1:addDirective(directives,directiveNormalize(nodeName_(node).toLowerCase()),"E",maxPriority,ignoreDirective);for(var attr,name,nName,ngAttrName,value,nAttrs=node.attributes,j=0,jj=nAttrs&&nAttrs.length;jj>j;j++){var attrStartName=!1,attrEndName=!1;if(attr=nAttrs[j],!msie||msie>=8||attr.specified){name=attr.name,ngAttrName=directiveNormalize(name),NG_ATTR_BINDING.test(ngAttrName)&&(name=snake_case(ngAttrName.substr(6),"-"));var directiveNName=ngAttrName.replace(/(Start|End)$/,"");ngAttrName===directiveNName+"Start"&&(attrStartName=name,attrEndName=name.substr(0,name.length-5)+"end",name=name.substr(0,name.length-6)),nName=directiveNormalize(name.toLowerCase()),attrsMap[nName]=name,attrs[nName]=value=trim(attr.value),getBooleanAttrName(node,nName)&&(attrs[nName]=!0),addAttrInterpolateDirective(node,directives,value,nName),addDirective(directives,nName,"A",maxPriority,ignoreDirective,attrStartName,attrEndName)}}if(className=node.className,isString(className)&&""!==className)for(;match=CLASS_DIRECTIVE_REGEXP.exec(className);)nName=directiveNormalize(match[2]),addDirective(directives,nName,"C",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[3])),className=className.substr(match.index+match[0].length);break;case 3:addTextInterpolateDirective(directives,node.nodeValue);break;case 8:try{match=COMMENT_DIRECTIVE_REGEXP.exec(node.nodeValue),match&&(nName=directiveNormalize(match[1]),addDirective(directives,nName,"M",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[2])))}catch(e){}}return directives.sort(byPriority),directives}function groupScan(node,attrStart,attrEnd){var nodes=[],depth=0;if(attrStart&&node.hasAttribute&&node.hasAttribute(attrStart)){do{if(!node)throw $compileMinErr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",attrStart,attrEnd);1==node.nodeType&&(node.hasAttribute(attrStart)&&depth++,node.hasAttribute(attrEnd)&&depth--),nodes.push(node),node=node.nextSibling}while(depth>0)}else nodes.push(node);return jqLite(nodes)}function groupElementsLinkFnWrapper(linkFn,attrStart,attrEnd){return function(scope,element,attrs,controllers,transcludeFn){return element=groupScan(element[0],attrStart,attrEnd),linkFn(scope,element,attrs,controllers,transcludeFn)}}function applyDirectivesToNode(directives,compileNode,templateAttrs,transcludeFn,jqCollection,originalReplaceDirective,preLinkFns,postLinkFns,previousCompileContext){function addLinkFns(pre,post,attrStart,attrEnd){pre&&(attrStart&&(pre=groupElementsLinkFnWrapper(pre,attrStart,attrEnd)),pre.require=directive.require,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(pre=cloneAndAnnotateFn(pre,{isolateScope:!0})),preLinkFns.push(pre)),post&&(attrStart&&(post=groupElementsLinkFnWrapper(post,attrStart,attrEnd)),post.require=directive.require,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(post=cloneAndAnnotateFn(post,{isolateScope:!0})),postLinkFns.push(post))}function getControllers(require,$element,elementControllers){var value,retrievalMethod="data",optional=!1;if(isString(require)){for(;"^"==(value=require.charAt(0))||"?"==value;)require=require.substr(1),"^"==value&&(retrievalMethod="inheritedData"),optional=optional||"?"==value;if(value=null,elementControllers&&"data"===retrievalMethod&&(value=elementControllers[require]),value=value||$element[retrievalMethod]("$"+require+"Controller"),!value&&!optional)throw $compileMinErr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",require,directiveName);return value}return isArray(require)&&(value=[],forEach(require,function(require){value.push(getControllers(require,$element,elementControllers))})),value}function nodeLinkFn(childLinkFn,scope,linkNode,$rootElement,boundTranscludeFn){function controllersBoundTransclude(scope,cloneAttachFn){var transcludeControllers;return arguments.length<2&&(cloneAttachFn=scope,scope=undefined),hasElementTranscludeDirective&&(transcludeControllers=elementControllers),boundTranscludeFn(scope,cloneAttachFn,transcludeControllers)}var attrs,$element,i,ii,linkFn,controller,isolateScope,transcludeFn,elementControllers={};if(attrs=compileNode===linkNode?templateAttrs:shallowCopy(templateAttrs,new Attributes(jqLite(linkNode),templateAttrs.$attr)),$element=attrs.$$element,newIsolateScopeDirective){var LOCAL_REGEXP=/^\s*([@=&])(\??)\s*(\w*)\s*$/,$linkNode=jqLite(linkNode);isolateScope=scope.$new(!0),templateDirective&&templateDirective===newIsolateScopeDirective.$$originalDirective?$linkNode.data("$isolateScope",isolateScope):$linkNode.data("$isolateScopeNoTemplate",isolateScope),safeAddClass($linkNode,"ng-isolate-scope"),forEach(newIsolateScopeDirective.scope,function(definition,scopeName){var lastValue,parentGet,parentSet,compare,match=definition.match(LOCAL_REGEXP)||[],attrName=match[3]||scopeName,optional="?"==match[2],mode=match[1];switch(isolateScope.$$isolateBindings[scopeName]=mode+attrName,mode){case"@":attrs.$observe(attrName,function(value){isolateScope[scopeName]=value}),attrs.$$observers[attrName].$$scope=scope,attrs[attrName]&&(isolateScope[scopeName]=$interpolate(attrs[attrName])(scope));break;case"=":if(optional&&!attrs[attrName])return;parentGet=$parse(attrs[attrName]),compare=parentGet.literal?equals:function(a,b){return a===b},parentSet=parentGet.assign||function(){throw lastValue=isolateScope[scopeName]=parentGet(scope),$compileMinErr("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",attrs[attrName],newIsolateScopeDirective.name)},lastValue=isolateScope[scopeName]=parentGet(scope),isolateScope.$watch(function(){var parentValue=parentGet(scope);return compare(parentValue,isolateScope[scopeName])||(compare(parentValue,lastValue)?parentSet(scope,parentValue=isolateScope[scopeName]):isolateScope[scopeName]=parentValue),lastValue=parentValue},null,parentGet.literal);break;case"&":parentGet=$parse(attrs[attrName]),isolateScope[scopeName]=function(locals){return parentGet(scope,locals)};break;default:throw $compileMinErr("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",newIsolateScopeDirective.name,scopeName,definition)}})}for(transcludeFn=boundTranscludeFn&&controllersBoundTransclude,controllerDirectives&&forEach(controllerDirectives,function(directive){var controllerInstance,locals={$scope:directive===newIsolateScopeDirective||directive.$$isolateScope?isolateScope:scope,$element:$element,$attrs:attrs,$transclude:transcludeFn};controller=directive.controller,"@"==controller&&(controller=attrs[directive.name]),controllerInstance=$controller(controller,locals),elementControllers[directive.name]=controllerInstance,hasElementTranscludeDirective||$element.data("$"+directive.name+"Controller",controllerInstance),directive.controllerAs&&(locals.$scope[directive.controllerAs]=controllerInstance)}),i=0,ii=preLinkFns.length;ii>i;i++)try{linkFn=preLinkFns[i],linkFn(linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.require,$element,elementControllers),transcludeFn)}catch(e){$exceptionHandler(e,startingTag($element))}var scopeToChild=scope;for(newIsolateScopeDirective&&(newIsolateScopeDirective.template||null===newIsolateScopeDirective.templateUrl)&&(scopeToChild=isolateScope),childLinkFn&&childLinkFn(scopeToChild,linkNode.childNodes,undefined,boundTranscludeFn),i=postLinkFns.length-1;i>=0;i--)try{linkFn=postLinkFns[i],linkFn(linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.require,$element,elementControllers),transcludeFn)}catch(e){$exceptionHandler(e,startingTag($element))}}previousCompileContext=previousCompileContext||{};for(var newScopeDirective,directive,directiveName,$template,linkFn,directiveValue,terminalPriority=-Number.MAX_VALUE,controllerDirectives=previousCompileContext.controllerDirectives,newIsolateScopeDirective=previousCompileContext.newIsolateScopeDirective,templateDirective=previousCompileContext.templateDirective,nonTlbTranscludeDirective=previousCompileContext.nonTlbTranscludeDirective,hasTranscludeDirective=!1,hasElementTranscludeDirective=!1,$compileNode=templateAttrs.$$element=jqLite(compileNode),replaceDirective=originalReplaceDirective,childTranscludeFn=transcludeFn,i=0,ii=directives.length;ii>i;i++){directive=directives[i];var attrStart=directive.$$start,attrEnd=directive.$$end;if(attrStart&&($compileNode=groupScan(compileNode,attrStart,attrEnd)),$template=undefined,terminalPriority>directive.priority)break;if((directiveValue=directive.scope)&&(newScopeDirective=newScopeDirective||directive,directive.templateUrl||(assertNoDuplicate("new/isolated scope",newIsolateScopeDirective,directive,$compileNode),isObject(directiveValue)&&(newIsolateScopeDirective=directive))),directiveName=directive.name,!directive.templateUrl&&directive.controller&&(directiveValue=directive.controller,controllerDirectives=controllerDirectives||{},assertNoDuplicate("'"+directiveName+"' controller",controllerDirectives[directiveName],directive,$compileNode),controllerDirectives[directiveName]=directive),(directiveValue=directive.transclude)&&(hasTranscludeDirective=!0,directive.$$tlb||(assertNoDuplicate("transclusion",nonTlbTranscludeDirective,directive,$compileNode),nonTlbTranscludeDirective=directive),"element"==directiveValue?(hasElementTranscludeDirective=!0,terminalPriority=directive.priority,$template=groupScan(compileNode,attrStart,attrEnd),$compileNode=templateAttrs.$$element=jqLite(document.createComment(" "+directiveName+": "+templateAttrs[directiveName]+" ")),compileNode=$compileNode[0],replaceWith(jqCollection,jqLite(sliceArgs($template)),compileNode),childTranscludeFn=compile($template,transcludeFn,terminalPriority,replaceDirective&&replaceDirective.name,{nonTlbTranscludeDirective:nonTlbTranscludeDirective})):($template=jqLite(jqLiteClone(compileNode)).contents(),$compileNode.empty(),childTranscludeFn=compile($template,transcludeFn))),directive.template)if(assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directiveValue=isFunction(directive.template)?directive.template($compileNode,templateAttrs):directive.template,directiveValue=denormalizeTemplate(directiveValue),directive.replace){if(replaceDirective=directive,$template=jqLite("<div>"+trim(directiveValue)+"</div>").contents(),compileNode=$template[0],1!=$template.length||1!==compileNode.nodeType)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",directiveName,"");replaceWith(jqCollection,$compileNode,compileNode);var newTemplateAttrs={$attr:{}},templateDirectives=collectDirectives(compileNode,[],newTemplateAttrs),unprocessedDirectives=directives.splice(i+1,directives.length-(i+1));newIsolateScopeDirective&&markDirectivesAsIsolate(templateDirectives),directives=directives.concat(templateDirectives).concat(unprocessedDirectives),mergeTemplateAttributes(templateAttrs,newTemplateAttrs),ii=directives.length}else $compileNode.html(directiveValue);if(directive.templateUrl)assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directive.replace&&(replaceDirective=directive),nodeLinkFn=compileTemplateUrl(directives.splice(i,directives.length-i),$compileNode,templateAttrs,jqCollection,childTranscludeFn,preLinkFns,postLinkFns,{controllerDirectives:controllerDirectives,newIsolateScopeDirective:newIsolateScopeDirective,templateDirective:templateDirective,nonTlbTranscludeDirective:nonTlbTranscludeDirective}),ii=directives.length;else if(directive.compile)try{linkFn=directive.compile($compileNode,templateAttrs,childTranscludeFn),isFunction(linkFn)?addLinkFns(null,linkFn,attrStart,attrEnd):linkFn&&addLinkFns(linkFn.pre,linkFn.post,attrStart,attrEnd)}catch(e){$exceptionHandler(e,startingTag($compileNode))}directive.terminal&&(nodeLinkFn.terminal=!0,terminalPriority=Math.max(terminalPriority,directive.priority))}return nodeLinkFn.scope=newScopeDirective&&newScopeDirective.scope===!0,nodeLinkFn.transclude=hasTranscludeDirective&&childTranscludeFn,nodeLinkFn}function markDirectivesAsIsolate(directives){for(var j=0,jj=directives.length;jj>j;j++)directives[j]=inherit(directives[j],{
$$isolateScope:!0})}function addDirective(tDirectives,name,location,maxPriority,ignoreDirective,startAttrName,endAttrName){if(name===ignoreDirective)return null;var match=null;if(hasDirectives.hasOwnProperty(name))for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;ii>i;i++)try{directive=directives[i],(maxPriority===undefined||maxPriority>directive.priority)&&-1!=directive.restrict.indexOf(location)&&(startAttrName&&(directive=inherit(directive,{$$start:startAttrName,$$end:endAttrName})),tDirectives.push(directive),match=directive)}catch(e){$exceptionHandler(e)}return match}function mergeTemplateAttributes(dst,src){var srcAttr=src.$attr,dstAttr=dst.$attr,$element=dst.$$element;forEach(dst,function(value,key){"$"!=key.charAt(0)&&(src[key]&&(value+=("style"===key?";":" ")+src[key]),dst.$set(key,value,!0,srcAttr[key]))}),forEach(src,function(value,key){"class"==key?(safeAddClass($element,value),dst["class"]=(dst["class"]?dst["class"]+" ":"")+value):"style"==key?($element.attr("style",$element.attr("style")+";"+value),dst.style=(dst.style?dst.style+";":"")+value):"$"==key.charAt(0)||dst.hasOwnProperty(key)||(dst[key]=value,dstAttr[key]=srcAttr[key])})}function compileTemplateUrl(directives,$compileNode,tAttrs,$rootElement,childTranscludeFn,preLinkFns,postLinkFns,previousCompileContext){var afterTemplateNodeLinkFn,afterTemplateChildLinkFn,linkQueue=[],beforeTemplateCompileNode=$compileNode[0],origAsyncDirective=directives.shift(),derivedSyncDirective=extend({},origAsyncDirective,{templateUrl:null,transclude:null,replace:null,$$originalDirective:origAsyncDirective}),templateUrl=isFunction(origAsyncDirective.templateUrl)?origAsyncDirective.templateUrl($compileNode,tAttrs):origAsyncDirective.templateUrl;return $compileNode.empty(),$http.get($sce.getTrustedResourceUrl(templateUrl),{cache:$templateCache}).success(function(content){var compileNode,tempTemplateAttrs,$template,childBoundTranscludeFn;if(content=denormalizeTemplate(content),origAsyncDirective.replace){if($template=jqLite("<div>"+trim(content)+"</div>").contents(),compileNode=$template[0],1!=$template.length||1!==compileNode.nodeType)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",origAsyncDirective.name,templateUrl);tempTemplateAttrs={$attr:{}},replaceWith($rootElement,$compileNode,compileNode);var templateDirectives=collectDirectives(compileNode,[],tempTemplateAttrs);isObject(origAsyncDirective.scope)&&markDirectivesAsIsolate(templateDirectives),directives=templateDirectives.concat(directives),mergeTemplateAttributes(tAttrs,tempTemplateAttrs)}else compileNode=beforeTemplateCompileNode,$compileNode.html(content);for(directives.unshift(derivedSyncDirective),afterTemplateNodeLinkFn=applyDirectivesToNode(directives,compileNode,tAttrs,childTranscludeFn,$compileNode,origAsyncDirective,preLinkFns,postLinkFns,previousCompileContext),forEach($rootElement,function(node,i){node==compileNode&&($rootElement[i]=$compileNode[0])}),afterTemplateChildLinkFn=compileNodes($compileNode[0].childNodes,childTranscludeFn);linkQueue.length;){var scope=linkQueue.shift(),beforeTemplateLinkNode=linkQueue.shift(),linkRootElement=linkQueue.shift(),boundTranscludeFn=linkQueue.shift(),linkNode=$compileNode[0];beforeTemplateLinkNode!==beforeTemplateCompileNode&&(linkNode=jqLiteClone(compileNode),replaceWith(linkRootElement,jqLite(beforeTemplateLinkNode),linkNode)),childBoundTranscludeFn=afterTemplateNodeLinkFn.transclude?createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude):boundTranscludeFn,afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,linkNode,$rootElement,childBoundTranscludeFn)}linkQueue=null}).error(function(response,code,headers,config){throw $compileMinErr("tpload","Failed to load template: {0}",config.url)}),function(ignoreChildLinkFn,scope,node,rootElement,boundTranscludeFn){linkQueue?(linkQueue.push(scope),linkQueue.push(node),linkQueue.push(rootElement),linkQueue.push(boundTranscludeFn)):afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,node,rootElement,boundTranscludeFn)}}function byPriority(a,b){var diff=b.priority-a.priority;return 0!==diff?diff:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function assertNoDuplicate(what,previousDirective,directive,element){if(previousDirective)throw $compileMinErr("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",previousDirective.name,directive.name,what,startingTag(element))}function addTextInterpolateDirective(directives,text){var interpolateFn=$interpolate(text,!0);interpolateFn&&directives.push({priority:0,compile:valueFn(function(scope,node){var parent=node.parent(),bindings=parent.data("$binding")||[];bindings.push(interpolateFn),safeAddClass(parent.data("$binding",bindings),"ng-binding"),scope.$watch(interpolateFn,function(value){node[0].nodeValue=value})})})}function getTrustedContext(node,attrNormalizedName){if("srcdoc"==attrNormalizedName)return $sce.HTML;var tag=nodeName_(node);return"xlinkHref"==attrNormalizedName||"FORM"==tag&&"action"==attrNormalizedName||"IMG"!=tag&&("src"==attrNormalizedName||"ngSrc"==attrNormalizedName)?$sce.RESOURCE_URL:void 0}function addAttrInterpolateDirective(node,directives,value,name){var interpolateFn=$interpolate(value,!0);if(interpolateFn){if("multiple"===name&&"SELECT"===nodeName_(node))throw $compileMinErr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",startingTag(node));directives.push({priority:100,compile:function(){return{pre:function(scope,element,attr){var $$observers=attr.$$observers||(attr.$$observers={});if(EVENT_HANDLER_ATTR_REGEXP.test(name))throw $compileMinErr("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");interpolateFn=$interpolate(attr[name],!0,getTrustedContext(node,name)),interpolateFn&&(attr[name]=interpolateFn(scope),($$observers[name]||($$observers[name]=[])).$$inter=!0,(attr.$$observers&&attr.$$observers[name].$$scope||scope).$watch(interpolateFn,function(newValue,oldValue){"class"===name&&newValue!=oldValue?attr.$updateClass(newValue,oldValue):attr.$set(name,newValue)}))}}}})}}function replaceWith($rootElement,elementsToRemove,newNode){var i,ii,firstElementToRemove=elementsToRemove[0],removeCount=elementsToRemove.length,parent=firstElementToRemove.parentNode;if($rootElement)for(i=0,ii=$rootElement.length;ii>i;i++)if($rootElement[i]==firstElementToRemove){$rootElement[i++]=newNode;for(var j=i,j2=j+removeCount-1,jj=$rootElement.length;jj>j;j++,j2++)jj>j2?$rootElement[j]=$rootElement[j2]:delete $rootElement[j];$rootElement.length-=removeCount-1;break}parent&&parent.replaceChild(newNode,firstElementToRemove);var fragment=document.createDocumentFragment();fragment.appendChild(firstElementToRemove),newNode[jqLite.expando]=firstElementToRemove[jqLite.expando];for(var k=1,kk=elementsToRemove.length;kk>k;k++){var element=elementsToRemove[k];jqLite(element).remove(),fragment.appendChild(element),delete elementsToRemove[k]}elementsToRemove[0]=newNode,elementsToRemove.length=1}function cloneAndAnnotateFn(fn,annotation){return extend(function(){return fn.apply(null,arguments)},fn,annotation)}var Attributes=function(element,attr){this.$$element=element,this.$attr=attr||{}};Attributes.prototype={$normalize:directiveNormalize,$addClass:function(classVal){classVal&&classVal.length>0&&$animate.addClass(this.$$element,classVal)},$removeClass:function(classVal){classVal&&classVal.length>0&&$animate.removeClass(this.$$element,classVal)},$updateClass:function(newClasses,oldClasses){this.$removeClass(tokenDifference(oldClasses,newClasses)),this.$addClass(tokenDifference(newClasses,oldClasses))},$set:function(key,value,writeAttr,attrName){var nodeName,booleanKey=getBooleanAttrName(this.$$element[0],key);booleanKey&&(this.$$element.prop(key,value),attrName=booleanKey),this[key]=value,attrName?this.$attr[key]=attrName:(attrName=this.$attr[key],attrName||(this.$attr[key]=attrName=snake_case(key,"-"))),nodeName=nodeName_(this.$$element),("A"===nodeName&&"href"===key||"IMG"===nodeName&&"src"===key)&&(this[key]=value=$$sanitizeUri(value,"src"===key)),writeAttr!==!1&&(null===value||value===undefined?this.$$element.removeAttr(attrName):this.$$element.attr(attrName,value));var $$observers=this.$$observers;$$observers&&forEach($$observers[key],function(fn){try{fn(value)}catch(e){$exceptionHandler(e)}})},$observe:function(key,fn){var attrs=this,$$observers=attrs.$$observers||(attrs.$$observers={}),listeners=$$observers[key]||($$observers[key]=[]);return listeners.push(fn),$rootScope.$evalAsync(function(){listeners.$$inter||fn(attrs[key])}),fn}};var startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),denormalizeTemplate="{{"==startSymbol||"}}"==endSymbol?identity:function(template){return template.replace(/\{\{/g,startSymbol).replace(/}}/g,endSymbol)},NG_ATTR_BINDING=/^ngAttr[A-Z]/;return compile}]}function directiveNormalize(name){return camelCase(name.replace(PREFIX_REGEXP,""))}function tokenDifference(str1,str2){var values="",tokens1=str1.split(/\s+/),tokens2=str2.split(/\s+/);outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token==tokens2[j])continue outer;values+=(values.length>0?" ":"")+token}return values}function $ControllerProvider(){var controllers={},CNTRL_REG=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(name,constructor){assertNotHasOwnProperty(name,"controller"),isObject(name)?extend(controllers,name):controllers[name]=constructor},this.$get=["$injector","$window",function($injector,$window){return function(expression,locals){var instance,match,constructor,identifier;if(isString(expression)&&(match=expression.match(CNTRL_REG),constructor=match[1],identifier=match[3],expression=controllers.hasOwnProperty(constructor)?controllers[constructor]:getter(locals.$scope,constructor,!0)||getter($window,constructor,!0),assertArgFn(expression,constructor,!0)),instance=$injector.instantiate(expression,locals),identifier){if(!locals||"object"!=typeof locals.$scope)throw minErr("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",constructor||expression.name,identifier);locals.$scope[identifier]=instance}return instance}}]}function $DocumentProvider(){this.$get=["$window",function(window){return jqLite(window.document)}]}function $ExceptionHandlerProvider(){this.$get=["$log",function($log){return function(exception,cause){$log.error.apply($log,arguments)}}]}function parseHeaders(headers){var key,val,i,parsed={};return headers?(forEach(headers.split("\n"),function(line){i=line.indexOf(":"),key=lowercase(trim(line.substr(0,i))),val=trim(line.substr(i+1)),key&&(parsed[key]?parsed[key]+=", "+val:parsed[key]=val)}),parsed):parsed}function headersGetter(headers){var headersObj=isObject(headers)?headers:undefined;return function(name){return headersObj||(headersObj=parseHeaders(headers)),name?headersObj[lowercase(name)]||null:headersObj}}function transformData(data,headers,fns){return isFunction(fns)?fns(data,headers):(forEach(fns,function(fn){data=fn(data,headers)}),data)}function isSuccess(status){return status>=200&&300>status}function $HttpProvider(){var JSON_START=/^\s*(\[|\{[^\{])/,JSON_END=/[\}\]]\s*$/,PROTECTION_PREFIX=/^\)\]\}',?\n/,CONTENT_TYPE_APPLICATION_JSON={"Content-Type":"application/json;charset=utf-8"},defaults=this.defaults={transformResponse:[function(data){return isString(data)&&(data=data.replace(PROTECTION_PREFIX,""),JSON_START.test(data)&&JSON_END.test(data)&&(data=fromJson(data))),data}],transformRequest:[function(d){return isObject(d)&&!isFile(d)?toJson(d):d}],headers:{common:{Accept:"application/json, text/plain, */*"},post:copy(CONTENT_TYPE_APPLICATION_JSON),put:copy(CONTENT_TYPE_APPLICATION_JSON),patch:copy(CONTENT_TYPE_APPLICATION_JSON)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},interceptorFactories=this.interceptors=[],responseInterceptorFactories=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function($httpBackend,$browser,$cacheFactory,$rootScope,$q,$injector){function $http(requestConfig){function transformResponse(response){var resp=extend({},response,{data:transformData(response.data,response.headers,config.transformResponse)});return isSuccess(response.status)?resp:$q.reject(resp)}function mergeHeaders(config){function execHeaders(headers){var headerContent;forEach(headers,function(headerFn,header){isFunction(headerFn)&&(headerContent=headerFn(),null!=headerContent?headers[header]=headerContent:delete headers[header])})}var defHeaderName,lowercaseDefHeaderName,reqHeaderName,defHeaders=defaults.headers,reqHeaders=extend({},config.headers);defHeaders=extend({},defHeaders.common,defHeaders[lowercase(config.method)]),execHeaders(defHeaders),execHeaders(reqHeaders);defaultHeadersIteration:for(defHeaderName in defHeaders){lowercaseDefHeaderName=lowercase(defHeaderName);for(reqHeaderName in reqHeaders)if(lowercase(reqHeaderName)===lowercaseDefHeaderName)continue defaultHeadersIteration;reqHeaders[defHeaderName]=defHeaders[defHeaderName]}return reqHeaders}var config={transformRequest:defaults.transformRequest,transformResponse:defaults.transformResponse},headers=mergeHeaders(requestConfig);extend(config,requestConfig),config.headers=headers,config.method=uppercase(config.method);var xsrfValue=urlIsSameOrigin(config.url)?$browser.cookies()[config.xsrfCookieName||defaults.xsrfCookieName]:undefined;xsrfValue&&(headers[config.xsrfHeaderName||defaults.xsrfHeaderName]=xsrfValue);var serverRequest=function(config){headers=config.headers;var reqData=transformData(config.data,headersGetter(headers),config.transformRequest);return isUndefined(config.data)&&forEach(headers,function(value,header){"content-type"===lowercase(header)&&delete headers[header]}),isUndefined(config.withCredentials)&&!isUndefined(defaults.withCredentials)&&(config.withCredentials=defaults.withCredentials),sendReq(config,reqData,headers).then(transformResponse,transformResponse)},chain=[serverRequest,undefined],promise=$q.when(config);for(forEach(reversedInterceptors,function(interceptor){(interceptor.request||interceptor.requestError)&&chain.unshift(interceptor.request,interceptor.requestError),(interceptor.response||interceptor.responseError)&&chain.push(interceptor.response,interceptor.responseError)});chain.length;){var thenFn=chain.shift(),rejectFn=chain.shift();promise=promise.then(thenFn,rejectFn)}return promise.success=function(fn){return promise.then(function(response){fn(response.data,response.status,response.headers,config)}),promise},promise.error=function(fn){return promise.then(null,function(response){fn(response.data,response.status,response.headers,config)}),promise},promise}function createShortMethods(names){forEach(arguments,function(name){$http[name]=function(url,config){return $http(extend(config||{},{method:name,url:url}))}})}function createShortMethodsWithData(name){forEach(arguments,function(name){$http[name]=function(url,data,config){return $http(extend(config||{},{method:name,url:url,data:data}))}})}function sendReq(config,reqData,reqHeaders){function done(status,response,headersString){cache&&(isSuccess(status)?cache.put(url,[status,response,parseHeaders(headersString)]):cache.remove(url)),resolvePromise(response,status,headersString),$rootScope.$$phase||$rootScope.$apply()}function resolvePromise(response,status,headers){status=Math.max(status,0),(isSuccess(status)?deferred.resolve:deferred.reject)({data:response,status:status,headers:headersGetter(headers),config:config})}function removePendingReq(){var idx=indexOf($http.pendingRequests,config);-1!==idx&&$http.pendingRequests.splice(idx,1)}var cache,cachedResp,deferred=$q.defer(),promise=deferred.promise,url=buildUrl(config.url,config.params);if($http.pendingRequests.push(config),promise.then(removePendingReq,removePendingReq),(config.cache||defaults.cache)&&config.cache!==!1&&"GET"==config.method&&(cache=isObject(config.cache)?config.cache:isObject(defaults.cache)?defaults.cache:defaultCache),cache)if(cachedResp=cache.get(url),isDefined(cachedResp)){if(cachedResp.then)return cachedResp.then(removePendingReq,removePendingReq),cachedResp;isArray(cachedResp)?resolvePromise(cachedResp[1],cachedResp[0],copy(cachedResp[2])):resolvePromise(cachedResp,200,{})}else cache.put(url,promise);return isUndefined(cachedResp)&&$httpBackend(config.method,url,reqData,done,reqHeaders,config.timeout,config.withCredentials,config.responseType),promise}function buildUrl(url,params){if(!params)return url;var parts=[];return forEachSorted(params,function(value,key){null===value||isUndefined(value)||(isArray(value)||(value=[value]),forEach(value,function(v){isObject(v)&&(v=toJson(v)),parts.push(encodeUriQuery(key)+"="+encodeUriQuery(v))}))}),url+(-1==url.indexOf("?")?"?":"&")+parts.join("&")}var defaultCache=$cacheFactory("$http"),reversedInterceptors=[];return forEach(interceptorFactories,function(interceptorFactory){reversedInterceptors.unshift(isString(interceptorFactory)?$injector.get(interceptorFactory):$injector.invoke(interceptorFactory))}),forEach(responseInterceptorFactories,function(interceptorFactory,index){var responseFn=isString(interceptorFactory)?$injector.get(interceptorFactory):$injector.invoke(interceptorFactory);reversedInterceptors.splice(index,0,{response:function(response){return responseFn($q.when(response))},responseError:function(response){return responseFn($q.reject(response))}})}),$http.pendingRequests=[],createShortMethods("get","delete","head","jsonp"),createShortMethodsWithData("post","put"),$http.defaults=defaults,$http}]}function createXhr(method){return 8>=msie&&"patch"===lowercase(method)?new ActiveXObject("Microsoft.XMLHTTP"):new window.XMLHttpRequest}function $HttpBackendProvider(){this.$get=["$browser","$window","$document",function($browser,$window,$document){return createHttpBackend($browser,createXhr,$browser.defer,$window.angular.callbacks,$document[0])}]}function createHttpBackend($browser,createXhr,$browserDefer,callbacks,rawDocument){function jsonpReq(url,done){var script=rawDocument.createElement("script"),doneWrapper=function(){script.onreadystatechange=script.onload=script.onerror=null,rawDocument.body.removeChild(script),done&&done()};return script.type="text/javascript",script.src=url,msie&&8>=msie?script.onreadystatechange=function(){/loaded|complete/.test(script.readyState)&&doneWrapper()}:script.onload=script.onerror=function(){doneWrapper()},rawDocument.body.appendChild(script),doneWrapper}var ABORTED=-1;return function(method,url,post,callback,headers,timeout,withCredentials,responseType){function timeoutRequest(){status=ABORTED,jsonpDone&&jsonpDone(),xhr&&xhr.abort()}function completeRequest(callback,status,response,headersString){timeoutId&&$browserDefer.cancel(timeoutId),jsonpDone=xhr=null,status=0===status?response?200:404:status,status=1223==status?204:status,callback(status,response,headersString),$browser.$$completeOutstandingRequest(noop)}var status;if($browser.$$incOutstandingRequestCount(),url=url||$browser.url(),"jsonp"==lowercase(method)){var callbackId="_"+(callbacks.counter++).toString(36);callbacks[callbackId]=function(data){callbacks[callbackId].data=data};var jsonpDone=jsonpReq(url.replace("JSON_CALLBACK","angular.callbacks."+callbackId),function(){callbacks[callbackId].data?completeRequest(callback,200,callbacks[callbackId].data):completeRequest(callback,status||-2),callbacks[callbackId]=angular.noop})}else{var xhr=createXhr(method);xhr.open(method,url,!0),forEach(headers,function(value,key){isDefined(value)&&xhr.setRequestHeader(key,value)}),xhr.onreadystatechange=function(){if(xhr&&4==xhr.readyState){var responseHeaders=null,response=null;status!==ABORTED&&(responseHeaders=xhr.getAllResponseHeaders(),response="response"in xhr?xhr.response:xhr.responseText),completeRequest(callback,status||xhr.status,response,responseHeaders)}},withCredentials&&(xhr.withCredentials=!0),responseType&&(xhr.responseType=responseType),xhr.send(post||null)}if(timeout>0)var timeoutId=$browserDefer(timeoutRequest,timeout);else timeout&&timeout.then&&timeout.then(timeoutRequest)}}function $InterpolateProvider(){var startSymbol="{{",endSymbol="}}";this.startSymbol=function(value){return value?(startSymbol=value,this):startSymbol},this.endSymbol=function(value){return value?(endSymbol=value,this):endSymbol},this.$get=["$parse","$exceptionHandler","$sce",function($parse,$exceptionHandler,$sce){function $interpolate(text,mustHaveExpression,trustedContext){for(var startIndex,endIndex,fn,exp,index=0,parts=[],length=text.length,hasInterpolation=!1,concat=[];length>index;)-1!=(startIndex=text.indexOf(startSymbol,index))&&-1!=(endIndex=text.indexOf(endSymbol,startIndex+startSymbolLength))?(index!=startIndex&&parts.push(text.substring(index,startIndex)),parts.push(fn=$parse(exp=text.substring(startIndex+startSymbolLength,endIndex))),fn.exp=exp,index=endIndex+endSymbolLength,hasInterpolation=!0):(index!=length&&parts.push(text.substring(index)),index=length);if((length=parts.length)||(parts.push(""),length=1),trustedContext&&parts.length>1)throw $interpolateMinErr("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",text);return!mustHaveExpression||hasInterpolation?(concat.length=length,fn=function(context){try{for(var part,i=0,ii=length;ii>i;i++)"function"==typeof(part=parts[i])&&(part=part(context),part=trustedContext?$sce.getTrusted(trustedContext,part):$sce.valueOf(part),null===part||isUndefined(part)?part="":"string"!=typeof part&&(part=toJson(part))),concat[i]=part;return concat.join("")}catch(err){var newErr=$interpolateMinErr("interr","Can't interpolate: {0}\n{1}",text,err.toString());$exceptionHandler(newErr)}},fn.exp=text,fn.parts=parts,fn):void 0}var startSymbolLength=startSymbol.length,endSymbolLength=endSymbol.length;return $interpolate.startSymbol=function(){return startSymbol},$interpolate.endSymbol=function(){return endSymbol},$interpolate}]}function $IntervalProvider(){this.$get=["$rootScope","$window","$q",function($rootScope,$window,$q){function interval(fn,delay,count,invokeApply){var setInterval=$window.setInterval,clearInterval=$window.clearInterval,deferred=$q.defer(),promise=deferred.promise,iteration=0,skipApply=isDefined(invokeApply)&&!invokeApply;return count=isDefined(count)?count:0,promise.then(null,null,fn),promise.$$intervalId=setInterval(function(){deferred.notify(iteration++),count>0&&iteration>=count&&(deferred.resolve(iteration),clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId]),skipApply||$rootScope.$apply()},delay),intervals[promise.$$intervalId]=deferred,promise}var intervals={};return interval.cancel=function(promise){return promise&&promise.$$intervalId in intervals?(intervals[promise.$$intervalId].reject("canceled"),clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId],!0):!1},interval}]}function $LocaleProvider(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(num){return 1===num?"one":"other"}}}}function encodePath(path){for(var segments=path.split("/"),i=segments.length;i--;)segments[i]=encodeUriSegment(segments[i]);return segments.join("/")}function parseAbsoluteUrl(absoluteUrl,locationObj,appBase){var parsedUrl=urlResolve(absoluteUrl,appBase);locationObj.$$protocol=parsedUrl.protocol,locationObj.$$host=parsedUrl.hostname,locationObj.$$port=int(parsedUrl.port)||DEFAULT_PORTS[parsedUrl.protocol]||null}function parseAppUrl(relativeUrl,locationObj,appBase){var prefixed="/"!==relativeUrl.charAt(0);prefixed&&(relativeUrl="/"+relativeUrl);var match=urlResolve(relativeUrl,appBase);locationObj.$$path=decodeURIComponent(prefixed&&"/"===match.pathname.charAt(0)?match.pathname.substring(1):match.pathname),locationObj.$$search=parseKeyValue(match.search),locationObj.$$hash=decodeURIComponent(match.hash),locationObj.$$path&&"/"!=locationObj.$$path.charAt(0)&&(locationObj.$$path="/"+locationObj.$$path)}function beginsWith(begin,whole){return 0===whole.indexOf(begin)?whole.substr(begin.length):void 0}function stripHash(url){var index=url.indexOf("#");return-1==index?url:url.substr(0,index)}function stripFile(url){return url.substr(0,stripHash(url).lastIndexOf("/")+1)}function serverBase(url){return url.substring(0,url.indexOf("/",url.indexOf("//")+2))}function LocationHtml5Url(appBase,basePrefix){this.$$html5=!0,basePrefix=basePrefix||"";var appBaseNoFile=stripFile(appBase);parseAbsoluteUrl(appBase,this,appBase),this.$$parse=function(url){var pathUrl=beginsWith(appBaseNoFile,url);if(!isString(pathUrl))throw $locationMinErr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',url,appBaseNoFile);parseAppUrl(pathUrl,this,appBase),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBaseNoFile+this.$$url.substr(1)},this.$$rewrite=function(url){var appUrl,prevAppUrl;return(appUrl=beginsWith(appBase,url))!==undefined?(prevAppUrl=appUrl,(appUrl=beginsWith(basePrefix,appUrl))!==undefined?appBaseNoFile+(beginsWith("/",appUrl)||appUrl):appBase+prevAppUrl):(appUrl=beginsWith(appBaseNoFile,url))!==undefined?appBaseNoFile+appUrl:appBaseNoFile==url+"/"?appBaseNoFile:void 0}}function LocationHashbangUrl(appBase,hashPrefix){var appBaseNoFile=stripFile(appBase);parseAbsoluteUrl(appBase,this,appBase),this.$$parse=function(url){function removeWindowsDriveName(path,url,base){var firstPathSegmentMatch,windowsFilePathExp=/^\/?.*?:(\/.*)/;return 0===url.indexOf(base)&&(url=url.replace(base,"")),windowsFilePathExp.exec(url)?path:(firstPathSegmentMatch=windowsFilePathExp.exec(path),firstPathSegmentMatch?firstPathSegmentMatch[1]:path)}var withoutBaseUrl=beginsWith(appBase,url)||beginsWith(appBaseNoFile,url),withoutHashUrl="#"==withoutBaseUrl.charAt(0)?beginsWith(hashPrefix,withoutBaseUrl):this.$$html5?withoutBaseUrl:"";if(!isString(withoutHashUrl))throw $locationMinErr("ihshprfx",'Invalid url "{0}", missing hash prefix "{1}".',url,hashPrefix);parseAppUrl(withoutHashUrl,this,appBase),this.$$path=removeWindowsDriveName(this.$$path,withoutHashUrl,appBase),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBase+(this.$$url?hashPrefix+this.$$url:"")},this.$$rewrite=function(url){return stripHash(appBase)==stripHash(url)?url:void 0}}function LocationHashbangInHtml5Url(appBase,hashPrefix){this.$$html5=!0,LocationHashbangUrl.apply(this,arguments);var appBaseNoFile=stripFile(appBase);this.$$rewrite=function(url){var appUrl;return appBase==stripHash(url)?url:(appUrl=beginsWith(appBaseNoFile,url))?appBase+hashPrefix+appUrl:appBaseNoFile===url+"/"?appBaseNoFile:void 0}}function locationGetter(property){return function(){return this[property]}}function locationGetterSetter(property,preprocess){return function(value){return isUndefined(value)?this[property]:(this[property]=preprocess(value),this.$$compose(),this)}}function $LocationProvider(){var hashPrefix="",html5Mode=!1;this.hashPrefix=function(prefix){return isDefined(prefix)?(hashPrefix=prefix,this):hashPrefix},this.html5Mode=function(mode){return isDefined(mode)?(html5Mode=mode,this):html5Mode},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function($rootScope,$browser,$sniffer,$rootElement){function afterLocationChange(oldUrl){$rootScope.$broadcast("$locationChangeSuccess",$location.absUrl(),oldUrl)}var $location,LocationMode,appBase,baseHref=$browser.baseHref(),initialUrl=$browser.url();html5Mode?(appBase=serverBase(initialUrl)+(baseHref||"/"),LocationMode=$sniffer.history?LocationHtml5Url:LocationHashbangInHtml5Url):(appBase=stripHash(initialUrl),LocationMode=LocationHashbangUrl),$location=new LocationMode(appBase,"#"+hashPrefix),$location.$$parse($location.$$rewrite(initialUrl)),$rootElement.on("click",function(event){if(!event.ctrlKey&&!event.metaKey&&2!=event.which){for(var elm=jqLite(event.target);"a"!==lowercase(elm[0].nodeName);)if(elm[0]===$rootElement[0]||!(elm=elm.parent())[0])return;var absHref=elm.prop("href");isObject(absHref)&&"[object SVGAnimatedString]"===absHref.toString()&&(absHref=urlResolve(absHref.animVal).href);var rewrittenUrl=$location.$$rewrite(absHref);absHref&&!elm.attr("target")&&rewrittenUrl&&!event.isDefaultPrevented()&&(event.preventDefault(),rewrittenUrl!=$browser.url()&&($location.$$parse(rewrittenUrl),$rootScope.$apply(),window.angular["ff-684208-preventDefault"]=!0))}}),$location.absUrl()!=initialUrl&&$browser.url($location.absUrl(),!0),$browser.onUrlChange(function(newUrl){$location.absUrl()!=newUrl&&($rootScope.$evalAsync(function(){var oldUrl=$location.absUrl();$location.$$parse(newUrl),$rootScope.$broadcast("$locationChangeStart",newUrl,oldUrl).defaultPrevented?($location.$$parse(oldUrl),$browser.url(oldUrl)):afterLocationChange(oldUrl)}),$rootScope.$$phase||$rootScope.$digest())});var changeCounter=0;return $rootScope.$watch(function(){var oldUrl=$browser.url(),currentReplace=$location.$$replace;return changeCounter&&oldUrl==$location.absUrl()||(changeCounter++,$rootScope.$evalAsync(function(){$rootScope.$broadcast("$locationChangeStart",$location.absUrl(),oldUrl).defaultPrevented?$location.$$parse(oldUrl):($browser.url($location.absUrl(),currentReplace),afterLocationChange(oldUrl))})),$location.$$replace=!1,changeCounter}),$location}]}function $LogProvider(){var debug=!0,self=this;this.debugEnabled=function(flag){return isDefined(flag)?(debug=flag,this):debug},this.$get=["$window",function($window){function formatError(arg){return arg instanceof Error&&(arg.stack?arg=arg.message&&-1===arg.stack.indexOf(arg.message)?"Error: "+arg.message+"\n"+arg.stack:arg.stack:arg.sourceURL&&(arg=arg.message+"\n"+arg.sourceURL+":"+arg.line)),arg}function consoleLog(type){var console=$window.console||{},logFn=console[type]||console.log||noop,hasApply=!1;try{hasApply=!!logFn.apply}catch(e){}return hasApply?function(){var args=[];return forEach(arguments,function(arg){args.push(formatError(arg))}),logFn.apply(console,args)}:function(arg1,arg2){logFn(arg1,null==arg2?"":arg2)}}return{log:consoleLog("log"),info:consoleLog("info"),warn:consoleLog("warn"),error:consoleLog("error"),debug:function(){var fn=consoleLog("debug");return function(){debug&&fn.apply(self,arguments)}}()}}]}function ensureSafeMemberName(name,fullExpression){if("constructor"===name)throw $parseMinErr("isecfld",'Referencing "constructor" field in Angular expressions is disallowed! Expression: {0}',fullExpression);return name}function ensureSafeObject(obj,fullExpression){if(obj){if(obj.constructor===obj)throw $parseMinErr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj.document&&obj.location&&obj.alert&&obj.setInterval)throw $parseMinErr("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",fullExpression);
if(obj.children&&(obj.nodeName||obj.on&&obj.find))throw $parseMinErr("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",fullExpression)}return obj}function setter(obj,path,setValue,fullExp,options){options=options||{};for(var key,element=path.split("."),i=0;element.length>1;i++){key=ensureSafeMemberName(element.shift(),fullExp);var propertyObj=obj[key];propertyObj||(propertyObj={},obj[key]=propertyObj),obj=propertyObj,obj.then&&options.unwrapPromises&&(promiseWarning(fullExp),"$$v"in obj||!function(promise){promise.then(function(val){promise.$$v=val})}(obj),obj.$$v===undefined&&(obj.$$v={}),obj=obj.$$v)}return key=ensureSafeMemberName(element.shift(),fullExp),obj[key]=setValue,setValue}function cspSafeGetterFn(key0,key1,key2,key3,key4,fullExp,options){return ensureSafeMemberName(key0,fullExp),ensureSafeMemberName(key1,fullExp),ensureSafeMemberName(key2,fullExp),ensureSafeMemberName(key3,fullExp),ensureSafeMemberName(key4,fullExp),options.unwrapPromises?function(scope,locals){var promise,pathVal=locals&&locals.hasOwnProperty(key0)?locals:scope;return null==pathVal?pathVal:(pathVal=pathVal[key0],pathVal&&pathVal.then&&(promiseWarning(fullExp),"$$v"in pathVal||(promise=pathVal,promise.$$v=undefined,promise.then(function(val){promise.$$v=val})),pathVal=pathVal.$$v),key1?null==pathVal?undefined:(pathVal=pathVal[key1],pathVal&&pathVal.then&&(promiseWarning(fullExp),"$$v"in pathVal||(promise=pathVal,promise.$$v=undefined,promise.then(function(val){promise.$$v=val})),pathVal=pathVal.$$v),key2?null==pathVal?undefined:(pathVal=pathVal[key2],pathVal&&pathVal.then&&(promiseWarning(fullExp),"$$v"in pathVal||(promise=pathVal,promise.$$v=undefined,promise.then(function(val){promise.$$v=val})),pathVal=pathVal.$$v),key3?null==pathVal?undefined:(pathVal=pathVal[key3],pathVal&&pathVal.then&&(promiseWarning(fullExp),"$$v"in pathVal||(promise=pathVal,promise.$$v=undefined,promise.then(function(val){promise.$$v=val})),pathVal=pathVal.$$v),key4?null==pathVal?undefined:(pathVal=pathVal[key4],pathVal&&pathVal.then&&(promiseWarning(fullExp),"$$v"in pathVal||(promise=pathVal,promise.$$v=undefined,promise.then(function(val){promise.$$v=val})),pathVal=pathVal.$$v),pathVal):pathVal):pathVal):pathVal):pathVal)}:function(scope,locals){var pathVal=locals&&locals.hasOwnProperty(key0)?locals:scope;return null==pathVal?pathVal:(pathVal=pathVal[key0],key1?null==pathVal?undefined:(pathVal=pathVal[key1],key2?null==pathVal?undefined:(pathVal=pathVal[key2],key3?null==pathVal?undefined:(pathVal=pathVal[key3],key4?null==pathVal?undefined:pathVal=pathVal[key4]:pathVal):pathVal):pathVal):pathVal)}}function simpleGetterFn1(key0,fullExp){return ensureSafeMemberName(key0,fullExp),function(scope,locals){return null==scope?undefined:(locals&&locals.hasOwnProperty(key0)?locals:scope)[key0]}}function simpleGetterFn2(key0,key1,fullExp){return ensureSafeMemberName(key0,fullExp),ensureSafeMemberName(key1,fullExp),function(scope,locals){return null==scope?undefined:(scope=(locals&&locals.hasOwnProperty(key0)?locals:scope)[key0],null==scope?undefined:scope[key1])}}function getterFn(path,options,fullExp){if(getterFnCache.hasOwnProperty(path))return getterFnCache[path];var fn,pathKeys=path.split("."),pathKeysLength=pathKeys.length;if(options.unwrapPromises||1!==pathKeysLength)if(options.unwrapPromises||2!==pathKeysLength)if(options.csp)fn=6>pathKeysLength?cspSafeGetterFn(pathKeys[0],pathKeys[1],pathKeys[2],pathKeys[3],pathKeys[4],fullExp,options):function(scope,locals){var val,i=0;do val=cspSafeGetterFn(pathKeys[i++],pathKeys[i++],pathKeys[i++],pathKeys[i++],pathKeys[i++],fullExp,options)(scope,locals),locals=undefined,scope=val;while(pathKeysLength>i);return val};else{var code="var p;\n";forEach(pathKeys,function(key,index){ensureSafeMemberName(key,fullExp),code+="if(s == null) return undefined;\ns="+(index?"s":'((k&&k.hasOwnProperty("'+key+'"))?k:s)')+'["'+key+'"];\n'+(options.unwrapPromises?'if (s && s.then) {\n pw("'+fullExp.replace(/(["\r\n])/g,"\\$1")+'");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v=v;});\n}\n s=s.$$v\n}\n':"")}),code+="return s;";var evaledFnGetter=new Function("s","k","pw",code);evaledFnGetter.toString=valueFn(code),fn=options.unwrapPromises?function(scope,locals){return evaledFnGetter(scope,locals,promiseWarning)}:evaledFnGetter}else fn=simpleGetterFn2(pathKeys[0],pathKeys[1],fullExp);else fn=simpleGetterFn1(pathKeys[0],fullExp);return"hasOwnProperty"!==path&&(getterFnCache[path]=fn),fn}function $ParseProvider(){var cache={},$parseOptions={csp:!1,unwrapPromises:!1,logPromiseWarnings:!0};this.unwrapPromises=function(value){return isDefined(value)?($parseOptions.unwrapPromises=!!value,this):$parseOptions.unwrapPromises},this.logPromiseWarnings=function(value){return isDefined(value)?($parseOptions.logPromiseWarnings=value,this):$parseOptions.logPromiseWarnings},this.$get=["$filter","$sniffer","$log",function($filter,$sniffer,$log){return $parseOptions.csp=$sniffer.csp,promiseWarning=function(fullExp){$parseOptions.logPromiseWarnings&&!promiseWarningCache.hasOwnProperty(fullExp)&&(promiseWarningCache[fullExp]=!0,$log.warn("[$parse] Promise found in the expression `"+fullExp+"`. Automatic unwrapping of promises in Angular expressions is deprecated."))},function(exp){var parsedExpression;switch(typeof exp){case"string":if(cache.hasOwnProperty(exp))return cache[exp];var lexer=new Lexer($parseOptions),parser=new Parser(lexer,$filter,$parseOptions);return parsedExpression=parser.parse(exp,!1),"hasOwnProperty"!==exp&&(cache[exp]=parsedExpression),parsedExpression;case"function":return exp;default:return noop}}}]}function $QProvider(){this.$get=["$rootScope","$exceptionHandler",function($rootScope,$exceptionHandler){return qFactory(function(callback){$rootScope.$evalAsync(callback)},$exceptionHandler)}]}function qFactory(nextTick,exceptionHandler){function defaultCallback(value){return value}function defaultErrback(reason){return reject(reason)}function all(promises){var deferred=defer(),counter=0,results=isArray(promises)?[]:{};return forEach(promises,function(promise,key){counter++,ref(promise).then(function(value){results.hasOwnProperty(key)||(results[key]=value,--counter||deferred.resolve(results))},function(reason){results.hasOwnProperty(key)||deferred.reject(reason)})}),0===counter&&deferred.resolve(results),deferred.promise}var defer=function(){var value,deferred,pending=[];return deferred={resolve:function(val){if(pending){var callbacks=pending;pending=undefined,value=ref(val),callbacks.length&&nextTick(function(){for(var callback,i=0,ii=callbacks.length;ii>i;i++)callback=callbacks[i],value.then(callback[0],callback[1],callback[2])})}},reject:function(reason){deferred.resolve(reject(reason))},notify:function(progress){if(pending){var callbacks=pending;pending.length&&nextTick(function(){for(var callback,i=0,ii=callbacks.length;ii>i;i++)callback=callbacks[i],callback[2](progress)})}},promise:{then:function(callback,errback,progressback){var result=defer(),wrappedCallback=function(value){try{result.resolve((isFunction(callback)?callback:defaultCallback)(value))}catch(e){result.reject(e),exceptionHandler(e)}},wrappedErrback=function(reason){try{result.resolve((isFunction(errback)?errback:defaultErrback)(reason))}catch(e){result.reject(e),exceptionHandler(e)}},wrappedProgressback=function(progress){try{result.notify((isFunction(progressback)?progressback:defaultCallback)(progress))}catch(e){exceptionHandler(e)}};return pending?pending.push([wrappedCallback,wrappedErrback,wrappedProgressback]):value.then(wrappedCallback,wrappedErrback,wrappedProgressback),result.promise},"catch":function(callback){return this.then(null,callback)},"finally":function(callback){function makePromise(value,resolved){var result=defer();return resolved?result.resolve(value):result.reject(value),result.promise}function handleCallback(value,isResolved){var callbackOutput=null;try{callbackOutput=(callback||defaultCallback)()}catch(e){return makePromise(e,!1)}return callbackOutput&&isFunction(callbackOutput.then)?callbackOutput.then(function(){return makePromise(value,isResolved)},function(error){return makePromise(error,!1)}):makePromise(value,isResolved)}return this.then(function(value){return handleCallback(value,!0)},function(error){return handleCallback(error,!1)})}}}},ref=function(value){return value&&isFunction(value.then)?value:{then:function(callback){var result=defer();return nextTick(function(){result.resolve(callback(value))}),result.promise}}},reject=function(reason){return{then:function(callback,errback){var result=defer();return nextTick(function(){try{result.resolve((isFunction(errback)?errback:defaultErrback)(reason))}catch(e){result.reject(e),exceptionHandler(e)}}),result.promise}}},when=function(value,callback,errback,progressback){var done,result=defer(),wrappedCallback=function(value){try{return(isFunction(callback)?callback:defaultCallback)(value)}catch(e){return exceptionHandler(e),reject(e)}},wrappedErrback=function(reason){try{return(isFunction(errback)?errback:defaultErrback)(reason)}catch(e){return exceptionHandler(e),reject(e)}},wrappedProgressback=function(progress){try{return(isFunction(progressback)?progressback:defaultCallback)(progress)}catch(e){exceptionHandler(e)}};return nextTick(function(){ref(value).then(function(value){done||(done=!0,result.resolve(ref(value).then(wrappedCallback,wrappedErrback,wrappedProgressback)))},function(reason){done||(done=!0,result.resolve(wrappedErrback(reason)))},function(progress){done||result.notify(wrappedProgressback(progress))})}),result.promise};return{defer:defer,reject:reject,when:when,all:all}}function $RootScopeProvider(){var TTL=10,$rootScopeMinErr=minErr("$rootScope"),lastDirtyWatch=null;this.digestTtl=function(value){return arguments.length&&(TTL=value),TTL},this.$get=["$injector","$exceptionHandler","$parse","$browser",function($injector,$exceptionHandler,$parse,$browser){function Scope(){this.$id=nextUid(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this["this"]=this.$root=this,this.$$destroyed=!1,this.$$asyncQueue=[],this.$$postDigestQueue=[],this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings={}}function beginPhase(phase){if($rootScope.$$phase)throw $rootScopeMinErr("inprog","{0} already in progress",$rootScope.$$phase);$rootScope.$$phase=phase}function clearPhase(){$rootScope.$$phase=null}function compileToFn(exp,name){var fn=$parse(exp);return assertArgFn(fn,name),fn}function decrementListenerCount(current,count,name){do current.$$listenerCount[name]-=count,0===current.$$listenerCount[name]&&delete current.$$listenerCount[name];while(current=current.$parent)}function initWatchVal(){}Scope.prototype={constructor:Scope,$new:function(isolate){var ChildScope,child;return isolate?(child=new Scope,child.$root=this.$root,child.$$asyncQueue=this.$$asyncQueue,child.$$postDigestQueue=this.$$postDigestQueue):(ChildScope=function(){},ChildScope.prototype=this,child=new ChildScope,child.$id=nextUid()),child["this"]=child,child.$$listeners={},child.$$listenerCount={},child.$parent=this,child.$$watchers=child.$$nextSibling=child.$$childHead=child.$$childTail=null,child.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=child,this.$$childTail=child):this.$$childHead=this.$$childTail=child,child},$watch:function(watchExp,listener,objectEquality){var scope=this,get=compileToFn(watchExp,"watch"),array=scope.$$watchers,watcher={fn:listener,last:initWatchVal,get:get,exp:watchExp,eq:!!objectEquality};if(lastDirtyWatch=null,!isFunction(listener)){var listenFn=compileToFn(listener||noop,"listener");watcher.fn=function(newVal,oldVal,scope){listenFn(scope)}}if("string"==typeof watchExp&&get.constant){var originalFn=watcher.fn;watcher.fn=function(newVal,oldVal,scope){originalFn.call(this,newVal,oldVal,scope),arrayRemove(array,watcher)}}return array||(array=scope.$$watchers=[]),array.unshift(watcher),function(){arrayRemove(array,watcher),lastDirtyWatch=null}},$watchCollection:function(obj,listener){function $watchCollectionWatch(){newValue=objGetter(self);var newLength,key;if(isObject(newValue))if(isArrayLike(newValue)){oldValue!==internalArray&&(oldValue=internalArray,oldLength=oldValue.length=0,changeDetected++),newLength=newValue.length,oldLength!==newLength&&(changeDetected++,oldValue.length=oldLength=newLength);for(var i=0;newLength>i;i++)oldValue[i]!==newValue[i]&&(changeDetected++,oldValue[i]=newValue[i])}else{oldValue!==internalObject&&(oldValue=internalObject={},oldLength=0,changeDetected++),newLength=0;for(key in newValue)newValue.hasOwnProperty(key)&&(newLength++,oldValue.hasOwnProperty(key)?oldValue[key]!==newValue[key]&&(changeDetected++,oldValue[key]=newValue[key]):(oldLength++,oldValue[key]=newValue[key],changeDetected++));if(oldLength>newLength){changeDetected++;for(key in oldValue)oldValue.hasOwnProperty(key)&&!newValue.hasOwnProperty(key)&&(oldLength--,delete oldValue[key])}}else oldValue!==newValue&&(oldValue=newValue,changeDetected++);return changeDetected}function $watchCollectionAction(){listener(newValue,oldValue,self)}var oldValue,newValue,self=this,changeDetected=0,objGetter=$parse(obj),internalArray=[],internalObject={},oldLength=0;return this.$watch($watchCollectionWatch,$watchCollectionAction)},$digest:function(){var watch,value,last,watchers,length,dirty,next,current,logIdx,logMsg,asyncTask,asyncQueue=this.$$asyncQueue,postDigestQueue=this.$$postDigestQueue,ttl=TTL,target=this,watchLog=[];beginPhase("$digest"),lastDirtyWatch=null;do{for(dirty=!1,current=target;asyncQueue.length;){try{asyncTask=asyncQueue.shift(),asyncTask.scope.$eval(asyncTask.expression)}catch(e){clearPhase(),$exceptionHandler(e)}lastDirtyWatch=null}traverseScopesLoop:do{if(watchers=current.$$watchers)for(length=watchers.length;length--;)try{if(watch=watchers[length])if((value=watch.get(current))===(last=watch.last)||(watch.eq?equals(value,last):"number"==typeof value&&"number"==typeof last&&isNaN(value)&&isNaN(last))){if(watch===lastDirtyWatch){dirty=!1;break traverseScopesLoop}}else dirty=!0,lastDirtyWatch=watch,watch.last=watch.eq?copy(value):value,watch.fn(value,last===initWatchVal?value:last,current),5>ttl&&(logIdx=4-ttl,watchLog[logIdx]||(watchLog[logIdx]=[]),logMsg=isFunction(watch.exp)?"fn: "+(watch.exp.name||watch.exp.toString()):watch.exp,logMsg+="; newVal: "+toJson(value)+"; oldVal: "+toJson(last),watchLog[logIdx].push(logMsg))}catch(e){clearPhase(),$exceptionHandler(e)}if(!(next=current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}while(current=next);if((dirty||asyncQueue.length)&&!ttl--)throw clearPhase(),$rootScopeMinErr("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",TTL,toJson(watchLog))}while(dirty||asyncQueue.length);for(clearPhase();postDigestQueue.length;)try{postDigestQueue.shift()()}catch(e){$exceptionHandler(e)}},$destroy:function(){if(!this.$$destroyed){var parent=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this!==$rootScope&&(forEach(this.$$listenerCount,bind(null,decrementListenerCount,this)),parent.$$childHead==this&&(parent.$$childHead=this.$$nextSibling),parent.$$childTail==this&&(parent.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null)}},$eval:function(expr,locals){return $parse(expr)(this,locals)},$evalAsync:function(expr){$rootScope.$$phase||$rootScope.$$asyncQueue.length||$browser.defer(function(){$rootScope.$$asyncQueue.length&&$rootScope.$digest()}),this.$$asyncQueue.push({scope:this,expression:expr})},$$postDigest:function(fn){this.$$postDigestQueue.push(fn)},$apply:function(expr){try{return beginPhase("$apply"),this.$eval(expr)}catch(e){$exceptionHandler(e)}finally{clearPhase();try{$rootScope.$digest()}catch(e){throw $exceptionHandler(e),e}}},$on:function(name,listener){var namedListeners=this.$$listeners[name];namedListeners||(this.$$listeners[name]=namedListeners=[]),namedListeners.push(listener);var current=this;do current.$$listenerCount[name]||(current.$$listenerCount[name]=0),current.$$listenerCount[name]++;while(current=current.$parent);var self=this;return function(){namedListeners[indexOf(namedListeners,listener)]=null,decrementListenerCount(self,1,name)}},$emit:function(name,args){var namedListeners,i,length,empty=[],scope=this,stopPropagation=!1,event={name:name,targetScope:scope,stopPropagation:function(){stopPropagation=!0},preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1},listenerArgs=concat([event],arguments,1);do{for(namedListeners=scope.$$listeners[name]||empty,event.currentScope=scope,i=0,length=namedListeners.length;length>i;i++)if(namedListeners[i])try{namedListeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else namedListeners.splice(i,1),i--,length--;if(stopPropagation)return event;scope=scope.$parent}while(scope);return event},$broadcast:function(name,args){for(var listeners,i,length,target=this,current=target,next=target,event={name:name,targetScope:target,preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1},listenerArgs=concat([event],arguments,1);current=next;){for(event.currentScope=current,listeners=current.$$listeners[name]||[],i=0,length=listeners.length;length>i;i++)if(listeners[i])try{listeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else listeners.splice(i,1),i--,length--;if(!(next=current.$$listenerCount[name]&&current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}return event}};var $rootScope=new Scope;return $rootScope}]}function $$SanitizeUriProvider(){var aHrefSanitizationWhitelist=/^\s*(https?|ftp|mailto|tel|file):/,imgSrcSanitizationWhitelist=/^\s*(https?|ftp|file):|data:image\//;this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?(aHrefSanitizationWhitelist=regexp,this):aHrefSanitizationWhitelist},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?(imgSrcSanitizationWhitelist=regexp,this):imgSrcSanitizationWhitelist},this.$get=function(){return function(uri,isImage){var normalizedVal,regex=isImage?imgSrcSanitizationWhitelist:aHrefSanitizationWhitelist;return msie&&!(msie>=8)||(normalizedVal=urlResolve(uri).href,""===normalizedVal||normalizedVal.match(regex))?uri:"unsafe:"+normalizedVal}}}function escapeForRegexp(s){return s.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function adjustMatcher(matcher){if("self"===matcher)return matcher;if(isString(matcher)){if(matcher.indexOf("***")>-1)throw $sceMinErr("iwcard","Illegal sequence *** in string matcher.  String: {0}",matcher);return matcher=escapeForRegexp(matcher).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+matcher+"$")}if(isRegExp(matcher))return new RegExp("^"+matcher.source+"$");throw $sceMinErr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function adjustMatchers(matchers){var adjustedMatchers=[];return isDefined(matchers)&&forEach(matchers,function(matcher){adjustedMatchers.push(adjustMatcher(matcher))}),adjustedMatchers}function $SceDelegateProvider(){this.SCE_CONTEXTS=SCE_CONTEXTS;var resourceUrlWhitelist=["self"],resourceUrlBlacklist=[];this.resourceUrlWhitelist=function(value){return arguments.length&&(resourceUrlWhitelist=adjustMatchers(value)),resourceUrlWhitelist},this.resourceUrlBlacklist=function(value){return arguments.length&&(resourceUrlBlacklist=adjustMatchers(value)),resourceUrlBlacklist},this.$get=["$injector",function($injector){function matchUrl(matcher,parsedUrl){return"self"===matcher?urlIsSameOrigin(parsedUrl):!!matcher.exec(parsedUrl.href)}function isResourceUrlAllowedByPolicy(url){var i,n,parsedUrl=urlResolve(url.toString()),allowed=!1;for(i=0,n=resourceUrlWhitelist.length;n>i;i++)if(matchUrl(resourceUrlWhitelist[i],parsedUrl)){allowed=!0;break}if(allowed)for(i=0,n=resourceUrlBlacklist.length;n>i;i++)if(matchUrl(resourceUrlBlacklist[i],parsedUrl)){allowed=!1;break}return allowed}function generateHolderType(Base){var holderType=function(trustedValue){this.$$unwrapTrustedValue=function(){return trustedValue}};return Base&&(holderType.prototype=new Base),holderType.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},holderType.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},holderType}function trustAs(type,trustedValue){var Constructor=byType.hasOwnProperty(type)?byType[type]:null;if(!Constructor)throw $sceMinErr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",type,trustedValue);if(null===trustedValue||trustedValue===undefined||""===trustedValue)return trustedValue;if("string"!=typeof trustedValue)throw $sceMinErr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",type);return new Constructor(trustedValue)}function valueOf(maybeTrusted){return maybeTrusted instanceof trustedValueHolderBase?maybeTrusted.$$unwrapTrustedValue():maybeTrusted}function getTrusted(type,maybeTrusted){if(null===maybeTrusted||maybeTrusted===undefined||""===maybeTrusted)return maybeTrusted;var constructor=byType.hasOwnProperty(type)?byType[type]:null;if(constructor&&maybeTrusted instanceof constructor)return maybeTrusted.$$unwrapTrustedValue();if(type===SCE_CONTEXTS.RESOURCE_URL){if(isResourceUrlAllowedByPolicy(maybeTrusted))return maybeTrusted;throw $sceMinErr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",maybeTrusted.toString())}if(type===SCE_CONTEXTS.HTML)return htmlSanitizer(maybeTrusted);throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")}var htmlSanitizer=function(html){throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")};$injector.has("$sanitize")&&(htmlSanitizer=$injector.get("$sanitize"));var trustedValueHolderBase=generateHolderType(),byType={};return byType[SCE_CONTEXTS.HTML]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.CSS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.URL]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.JS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.RESOURCE_URL]=generateHolderType(byType[SCE_CONTEXTS.URL]),{trustAs:trustAs,getTrusted:getTrusted,valueOf:valueOf}}]}function $SceProvider(){var enabled=!0;this.enabled=function(value){return arguments.length&&(enabled=!!value),enabled},this.$get=["$parse","$sniffer","$sceDelegate",function($parse,$sniffer,$sceDelegate){if(enabled&&$sniffer.msie&&$sniffer.msieDocumentMode<8)throw $sceMinErr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 9 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var sce=copy(SCE_CONTEXTS);sce.isEnabled=function(){return enabled},sce.trustAs=$sceDelegate.trustAs,sce.getTrusted=$sceDelegate.getTrusted,sce.valueOf=$sceDelegate.valueOf,enabled||(sce.trustAs=sce.getTrusted=function(type,value){return value},sce.valueOf=identity),sce.parseAs=function(type,expr){var parsed=$parse(expr);return parsed.literal&&parsed.constant?parsed:function(self,locals){return sce.getTrusted(type,parsed(self,locals))}};var parse=sce.parseAs,getTrusted=sce.getTrusted,trustAs=sce.trustAs;return forEach(SCE_CONTEXTS,function(enumValue,name){var lName=lowercase(name);sce[camelCase("parse_as_"+lName)]=function(expr){return parse(enumValue,expr)},sce[camelCase("get_trusted_"+lName)]=function(value){return getTrusted(enumValue,value)},sce[camelCase("trust_as_"+lName)]=function(value){return trustAs(enumValue,value)}}),sce}]}function $SnifferProvider(){this.$get=["$window","$document",function($window,$document){var vendorPrefix,match,eventSupport={},android=int((/android (\d+)/.exec(lowercase(($window.navigator||{}).userAgent))||[])[1]),boxee=/Boxee/i.test(($window.navigator||{}).userAgent),document=$document[0]||{},documentMode=document.documentMode,vendorRegex=/^(Moz|webkit|O|ms)(?=[A-Z])/,bodyStyle=document.body&&document.body.style,transitions=!1,animations=!1;if(bodyStyle){for(var prop in bodyStyle)if(match=vendorRegex.exec(prop)){vendorPrefix=match[0],vendorPrefix=vendorPrefix.substr(0,1).toUpperCase()+vendorPrefix.substr(1);break}vendorPrefix||(vendorPrefix="WebkitOpacity"in bodyStyle&&"webkit"),transitions=!!("transition"in bodyStyle||vendorPrefix+"Transition"in bodyStyle),animations=!!("animation"in bodyStyle||vendorPrefix+"Animation"in bodyStyle),!android||transitions&&animations||(transitions=isString(document.body.style.webkitTransition),animations=isString(document.body.style.webkitAnimation))}return{history:!(!$window.history||!$window.history.pushState||4>android||boxee),hashchange:"onhashchange"in $window&&(!documentMode||documentMode>7),hasEvent:function(event){if("input"==event&&9==msie)return!1;if(isUndefined(eventSupport[event])){var divElm=document.createElement("div");eventSupport[event]="on"+event in divElm}return eventSupport[event]},csp:csp(),vendorPrefix:vendorPrefix,transitions:transitions,animations:animations,android:android,msie:msie,msieDocumentMode:documentMode}}]}function $TimeoutProvider(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function($rootScope,$browser,$q,$exceptionHandler){function timeout(fn,delay,invokeApply){var timeoutId,deferred=$q.defer(),promise=deferred.promise,skipApply=isDefined(invokeApply)&&!invokeApply;return timeoutId=$browser.defer(function(){try{deferred.resolve(fn())}catch(e){deferred.reject(e),$exceptionHandler(e)}finally{delete deferreds[promise.$$timeoutId]}skipApply||$rootScope.$apply()},delay),promise.$$timeoutId=timeoutId,deferreds[timeoutId]=deferred,promise}var deferreds={};return timeout.cancel=function(promise){return promise&&promise.$$timeoutId in deferreds?(deferreds[promise.$$timeoutId].reject("canceled"),delete deferreds[promise.$$timeoutId],$browser.defer.cancel(promise.$$timeoutId)):!1},timeout}]}function urlResolve(url,base){var href=url;return msie&&(urlParsingNode.setAttribute("href",href),href=urlParsingNode.href),urlParsingNode.setAttribute("href",href),{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:"/"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}function urlIsSameOrigin(requestUrl){var parsed=isString(requestUrl)?urlResolve(requestUrl):requestUrl;return parsed.protocol===originUrl.protocol&&parsed.host===originUrl.host}function $WindowProvider(){this.$get=valueFn(window)}function $FilterProvider($provide){function register(name,factory){if(isObject(name)){var filters={};return forEach(name,function(filter,key){filters[key]=register(key,filter)}),filters}return $provide.factory(name+suffix,factory)}var suffix="Filter";this.register=register,this.$get=["$injector",function($injector){return function(name){return $injector.get(name+suffix)}}],register("currency",currencyFilter),register("date",dateFilter),register("filter",filterFilter),register("json",jsonFilter),register("limitTo",limitToFilter),register("lowercase",lowercaseFilter),register("number",numberFilter),register("orderBy",orderByFilter),register("uppercase",uppercaseFilter)}function filterFilter(){return function(array,expression,comparator){if(!isArray(array))return array;var comparatorType=typeof comparator,predicates=[];predicates.check=function(value){for(var j=0;j<predicates.length;j++)if(!predicates[j](value))return!1;return!0},"function"!==comparatorType&&(comparator="boolean"===comparatorType&&comparator?function(obj,text){return angular.equals(obj,text)}:function(obj,text){return text=(""+text).toLowerCase(),(""+obj).toLowerCase().indexOf(text)>-1});var search=function(obj,text){if("string"==typeof text&&"!"===text.charAt(0))return!search(obj,text.substr(1));switch(typeof obj){case"boolean":case"number":case"string":return comparator(obj,text);case"object":switch(typeof text){case"object":return comparator(obj,text);default:for(var objKey in obj)if("$"!==objKey.charAt(0)&&search(obj[objKey],text))return!0}return!1;case"array":for(var i=0;i<obj.length;i++)if(search(obj[i],text))return!0;return!1;default:return!1}};switch(typeof expression){case"boolean":case"number":case"string":expression={$:expression};case"object":for(var key in expression)!function(path){"undefined"!=typeof expression[path]&&predicates.push(function(value){return search("$"==path?value:getter(value,path),expression[path])})}(key);break;case"function":predicates.push(expression);break;default:return array}for(var filtered=[],j=0;j<array.length;j++){var value=array[j];predicates.check(value)&&filtered.push(value)}return filtered}}function currencyFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(amount,currencySymbol){return isUndefined(currencySymbol)&&(currencySymbol=formats.CURRENCY_SYM),formatNumber(amount,formats.PATTERNS[1],formats.GROUP_SEP,formats.DECIMAL_SEP,2).replace(/\u00A4/g,currencySymbol)}}function numberFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(number,fractionSize){return formatNumber(number,formats.PATTERNS[0],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize)}}function formatNumber(number,pattern,groupSep,decimalSep,fractionSize){if(isNaN(number)||!isFinite(number))return"";var isNegative=0>number;number=Math.abs(number);var numStr=number+"",formatedText="",parts=[],hasExponent=!1;if(-1!==numStr.indexOf("e")){var match=numStr.match(/([\d\.]+)e(-?)(\d+)/);match&&"-"==match[2]&&match[3]>fractionSize+1?numStr="0":(formatedText=numStr,hasExponent=!0)}if(hasExponent)fractionSize>0&&number>-1&&1>number&&(formatedText=number.toFixed(fractionSize));else{var fractionLen=(numStr.split(DECIMAL_SEP)[1]||"").length;isUndefined(fractionSize)&&(fractionSize=Math.min(Math.max(pattern.minFrac,fractionLen),pattern.maxFrac));var pow=Math.pow(10,fractionSize);number=Math.round(number*pow)/pow;var fraction=(""+number).split(DECIMAL_SEP),whole=fraction[0];fraction=fraction[1]||"";var i,pos=0,lgroup=pattern.lgSize,group=pattern.gSize;if(whole.length>=lgroup+group)for(pos=whole.length-lgroup,i=0;pos>i;i++)(pos-i)%group===0&&0!==i&&(formatedText+=groupSep),formatedText+=whole.charAt(i);for(i=pos;i<whole.length;i++)(whole.length-i)%lgroup===0&&0!==i&&(formatedText+=groupSep),formatedText+=whole.charAt(i);for(;fraction.length<fractionSize;)fraction+="0";fractionSize&&"0"!==fractionSize&&(formatedText+=decimalSep+fraction.substr(0,fractionSize))}return parts.push(isNegative?pattern.negPre:pattern.posPre),parts.push(formatedText),parts.push(isNegative?pattern.negSuf:pattern.posSuf),parts.join("")}function padNumber(num,digits,trim){var neg="";for(0>num&&(neg="-",num=-num),num=""+num;num.length<digits;)num="0"+num;return trim&&(num=num.substr(num.length-digits)),neg+num}function dateGetter(name,size,offset,trim){return offset=offset||0,function(date){var value=date["get"+name]();return(offset>0||value>-offset)&&(value+=offset),0===value&&-12==offset&&(value=12),padNumber(value,size,trim)}}function dateStrGetter(name,shortForm){return function(date,formats){var value=date["get"+name](),get=uppercase(shortForm?"SHORT"+name:name);return formats[get][value]}}function timeZoneGetter(date){var zone=-1*date.getTimezoneOffset(),paddedZone=zone>=0?"+":"";return paddedZone+=padNumber(Math[zone>0?"floor":"ceil"](zone/60),2)+padNumber(Math.abs(zone%60),2);
}function ampmGetter(date,formats){return date.getHours()<12?formats.AMPMS[0]:formats.AMPMS[1]}function dateFilter($locale){function jsonStringToDate(string){var match;if(match=string.match(R_ISO8601_STR)){var date=new Date(0),tzHour=0,tzMin=0,dateSetter=match[8]?date.setUTCFullYear:date.setFullYear,timeSetter=match[8]?date.setUTCHours:date.setHours;match[9]&&(tzHour=int(match[9]+match[10]),tzMin=int(match[9]+match[11])),dateSetter.call(date,int(match[1]),int(match[2])-1,int(match[3]));var h=int(match[4]||0)-tzHour,m=int(match[5]||0)-tzMin,s=int(match[6]||0),ms=Math.round(1e3*parseFloat("0."+(match[7]||0)));return timeSetter.call(date,h,m,s,ms),date}return string}var R_ISO8601_STR=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(date,format){var fn,match,text="",parts=[];if(format=format||"mediumDate",format=$locale.DATETIME_FORMATS[format]||format,isString(date)&&(date=NUMBER_STRING.test(date)?int(date):jsonStringToDate(date)),isNumber(date)&&(date=new Date(date)),!isDate(date))return date;for(;format;)match=DATE_FORMATS_SPLIT.exec(format),match?(parts=concat(parts,match,1),format=parts.pop()):(parts.push(format),format=null);return forEach(parts,function(value){fn=DATE_FORMATS[value],text+=fn?fn(date,$locale.DATETIME_FORMATS):value.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),text}}function jsonFilter(){return function(object){return toJson(object,!0)}}function limitToFilter(){return function(input,limit){if(!isArray(input)&&!isString(input))return input;if(limit=int(limit),isString(input))return limit?limit>=0?input.slice(0,limit):input.slice(limit,input.length):"";var i,n,out=[];for(limit>input.length?limit=input.length:limit<-input.length&&(limit=-input.length),limit>0?(i=0,n=limit):(i=input.length+limit,n=input.length);n>i;i++)out.push(input[i]);return out}}function orderByFilter($parse){return function(array,sortPredicate,reverseOrder){function comparator(o1,o2){for(var i=0;i<sortPredicate.length;i++){var comp=sortPredicate[i](o1,o2);if(0!==comp)return comp}return 0}function reverseComparator(comp,descending){return toBoolean(descending)?function(a,b){return comp(b,a)}:comp}function compare(v1,v2){var t1=typeof v1,t2=typeof v2;return t1==t2?("string"==t1&&(v1=v1.toLowerCase(),v2=v2.toLowerCase()),v1===v2?0:v2>v1?-1:1):t2>t1?-1:1}if(!isArray(array))return array;if(!sortPredicate)return array;sortPredicate=isArray(sortPredicate)?sortPredicate:[sortPredicate],sortPredicate=map(sortPredicate,function(predicate){var descending=!1,get=predicate||identity;return isString(predicate)&&(("+"==predicate.charAt(0)||"-"==predicate.charAt(0))&&(descending="-"==predicate.charAt(0),predicate=predicate.substring(1)),get=$parse(predicate)),reverseComparator(function(a,b){return compare(get(a),get(b))},descending)});for(var arrayCopy=[],i=0;i<array.length;i++)arrayCopy.push(array[i]);return arrayCopy.sort(reverseComparator(comparator,reverseOrder))}}function ngDirective(directive){return isFunction(directive)&&(directive={link:directive}),directive.restrict=directive.restrict||"AC",valueFn(directive)}function FormController(element,attrs){function toggleValidCss(isValid,validationErrorKey){validationErrorKey=validationErrorKey?"-"+snake_case(validationErrorKey,"-"):"",element.removeClass((isValid?INVALID_CLASS:VALID_CLASS)+validationErrorKey).addClass((isValid?VALID_CLASS:INVALID_CLASS)+validationErrorKey)}var form=this,parentForm=element.parent().controller("form")||nullFormCtrl,invalidCount=0,errors=form.$error={},controls=[];form.$name=attrs.name||attrs.ngForm,form.$dirty=!1,form.$pristine=!0,form.$valid=!0,form.$invalid=!1,parentForm.$addControl(form),element.addClass(PRISTINE_CLASS),toggleValidCss(!0),form.$addControl=function(control){assertNotHasOwnProperty(control.$name,"input"),controls.push(control),control.$name&&(form[control.$name]=control)},form.$removeControl=function(control){control.$name&&form[control.$name]===control&&delete form[control.$name],forEach(errors,function(queue,validationToken){form.$setValidity(validationToken,!0,control)}),arrayRemove(controls,control)},form.$setValidity=function(validationToken,isValid,control){var queue=errors[validationToken];if(isValid)queue&&(arrayRemove(queue,control),queue.length||(invalidCount--,invalidCount||(toggleValidCss(isValid),form.$valid=!0,form.$invalid=!1),errors[validationToken]=!1,toggleValidCss(!0,validationToken),parentForm.$setValidity(validationToken,!0,form)));else{if(invalidCount||toggleValidCss(isValid),queue){if(includes(queue,control))return}else errors[validationToken]=queue=[],invalidCount++,toggleValidCss(!1,validationToken),parentForm.$setValidity(validationToken,!1,form);queue.push(control),form.$valid=!1,form.$invalid=!0}},form.$setDirty=function(){element.removeClass(PRISTINE_CLASS).addClass(DIRTY_CLASS),form.$dirty=!0,form.$pristine=!1,parentForm.$setDirty()},form.$setPristine=function(){element.removeClass(DIRTY_CLASS).addClass(PRISTINE_CLASS),form.$dirty=!1,form.$pristine=!0,forEach(controls,function(control){control.$setPristine()})}}function validate(ctrl,validatorName,validity,value){return ctrl.$setValidity(validatorName,validity),validity?value:undefined}function textInputType(scope,element,attr,ctrl,$sniffer,$browser){if(!$sniffer.android){var composing=!1;element.on("compositionstart",function(data){composing=!0}),element.on("compositionend",function(){composing=!1})}var listener=function(){if(!composing){var value=element.val();toBoolean(attr.ngTrim||"T")&&(value=trim(value)),ctrl.$viewValue!==value&&(scope.$$phase?ctrl.$setViewValue(value):scope.$apply(function(){ctrl.$setViewValue(value)}))}};if($sniffer.hasEvent("input"))element.on("input",listener);else{var timeout,deferListener=function(){timeout||(timeout=$browser.defer(function(){listener(),timeout=null}))};element.on("keydown",function(event){var key=event.keyCode;91===key||key>15&&19>key||key>=37&&40>=key||deferListener()}),$sniffer.hasEvent("paste")&&element.on("paste cut",deferListener)}element.on("change",listener),ctrl.$render=function(){element.val(ctrl.$isEmpty(ctrl.$viewValue)?"":ctrl.$viewValue)};var patternValidator,match,pattern=attr.ngPattern;if(pattern){var validateRegex=function(regexp,value){return validate(ctrl,"pattern",ctrl.$isEmpty(value)||regexp.test(value),value)};match=pattern.match(/^\/(.*)\/([gim]*)$/),match?(pattern=new RegExp(match[1],match[2]),patternValidator=function(value){return validateRegex(pattern,value)}):patternValidator=function(value){var patternObj=scope.$eval(pattern);if(!patternObj||!patternObj.test)throw minErr("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",pattern,patternObj,startingTag(element));return validateRegex(patternObj,value)},ctrl.$formatters.push(patternValidator),ctrl.$parsers.push(patternValidator)}if(attr.ngMinlength){var minlength=int(attr.ngMinlength),minLengthValidator=function(value){return validate(ctrl,"minlength",ctrl.$isEmpty(value)||value.length>=minlength,value)};ctrl.$parsers.push(minLengthValidator),ctrl.$formatters.push(minLengthValidator)}if(attr.ngMaxlength){var maxlength=int(attr.ngMaxlength),maxLengthValidator=function(value){return validate(ctrl,"maxlength",ctrl.$isEmpty(value)||value.length<=maxlength,value)};ctrl.$parsers.push(maxLengthValidator),ctrl.$formatters.push(maxLengthValidator)}}function numberInputType(scope,element,attr,ctrl,$sniffer,$browser){if(textInputType(scope,element,attr,ctrl,$sniffer,$browser),ctrl.$parsers.push(function(value){var empty=ctrl.$isEmpty(value);return empty||NUMBER_REGEXP.test(value)?(ctrl.$setValidity("number",!0),""===value?null:empty?value:parseFloat(value)):(ctrl.$setValidity("number",!1),undefined)}),ctrl.$formatters.push(function(value){return ctrl.$isEmpty(value)?"":""+value}),attr.min){var minValidator=function(value){var min=parseFloat(attr.min);return validate(ctrl,"min",ctrl.$isEmpty(value)||value>=min,value)};ctrl.$parsers.push(minValidator),ctrl.$formatters.push(minValidator)}if(attr.max){var maxValidator=function(value){var max=parseFloat(attr.max);return validate(ctrl,"max",ctrl.$isEmpty(value)||max>=value,value)};ctrl.$parsers.push(maxValidator),ctrl.$formatters.push(maxValidator)}ctrl.$formatters.push(function(value){return validate(ctrl,"number",ctrl.$isEmpty(value)||isNumber(value),value)})}function urlInputType(scope,element,attr,ctrl,$sniffer,$browser){textInputType(scope,element,attr,ctrl,$sniffer,$browser);var urlValidator=function(value){return validate(ctrl,"url",ctrl.$isEmpty(value)||URL_REGEXP.test(value),value)};ctrl.$formatters.push(urlValidator),ctrl.$parsers.push(urlValidator)}function emailInputType(scope,element,attr,ctrl,$sniffer,$browser){textInputType(scope,element,attr,ctrl,$sniffer,$browser);var emailValidator=function(value){return validate(ctrl,"email",ctrl.$isEmpty(value)||EMAIL_REGEXP.test(value),value)};ctrl.$formatters.push(emailValidator),ctrl.$parsers.push(emailValidator)}function radioInputType(scope,element,attr,ctrl){isUndefined(attr.name)&&element.attr("name",nextUid()),element.on("click",function(){element[0].checked&&scope.$apply(function(){ctrl.$setViewValue(attr.value)})}),ctrl.$render=function(){var value=attr.value;element[0].checked=value==ctrl.$viewValue},attr.$observe("value",ctrl.$render)}function checkboxInputType(scope,element,attr,ctrl){var trueValue=attr.ngTrueValue,falseValue=attr.ngFalseValue;isString(trueValue)||(trueValue=!0),isString(falseValue)||(falseValue=!1),element.on("click",function(){scope.$apply(function(){ctrl.$setViewValue(element[0].checked)})}),ctrl.$render=function(){element[0].checked=ctrl.$viewValue},ctrl.$isEmpty=function(value){return value!==trueValue},ctrl.$formatters.push(function(value){return value===trueValue}),ctrl.$parsers.push(function(value){return value?trueValue:falseValue})}function classDirective(name,selector){return name="ngClass"+name,function(){return{restrict:"AC",link:function(scope,element,attr){function ngClassWatchAction(newVal){if(selector===!0||scope.$index%2===selector){var newClasses=flattenClasses(newVal||"");oldVal?equals(newVal,oldVal)||attr.$updateClass(newClasses,flattenClasses(oldVal)):attr.$addClass(newClasses)}oldVal=copy(newVal)}function flattenClasses(classVal){if(isArray(classVal))return classVal.join(" ");if(isObject(classVal)){var classes=[];return forEach(classVal,function(v,k){v&&classes.push(k)}),classes.join(" ")}return classVal}var oldVal;scope.$watch(attr[name],ngClassWatchAction,!0),attr.$observe("class",function(value){ngClassWatchAction(scope.$eval(attr[name]))}),"ngClass"!==name&&scope.$watch("$index",function($index,old$index){var mod=1&$index;if(mod!==old$index&1){var classes=flattenClasses(scope.$eval(attr[name]));mod===selector?attr.$addClass(classes):attr.$removeClass(classes)}})}}}}var lowercase=function(string){return isString(string)?string.toLowerCase():string},uppercase=function(string){return isString(string)?string.toUpperCase():string},manualLowercase=function(s){return isString(s)?s.replace(/[A-Z]/g,function(ch){return String.fromCharCode(32|ch.charCodeAt(0))}):s},manualUppercase=function(s){return isString(s)?s.replace(/[a-z]/g,function(ch){return String.fromCharCode(-33&ch.charCodeAt(0))}):s};"i"!=="I".toLowerCase()&&(lowercase=manualLowercase,uppercase=manualUppercase);var msie,jqLite,jQuery,angularModule,nodeName_,slice=[].slice,push=[].push,toString=Object.prototype.toString,ngMinErr=minErr("ng"),angular=(window.angular,window.angular||(window.angular={})),uid=["0","0","0"];msie=int((/msie (\d+)/.exec(lowercase(navigator.userAgent))||[])[1]),isNaN(msie)&&(msie=int((/trident\/.*; rv:(\d+)/.exec(lowercase(navigator.userAgent))||[])[1])),noop.$inject=[],identity.$inject=[];var trim=function(){return String.prototype.trim?function(value){return isString(value)?value.trim():value}:function(value){return isString(value)?value.replace(/^\s\s*/,"").replace(/\s\s*$/,""):value}}();nodeName_=9>msie?function(element){return element=element.nodeName?element:element[0],element.scopeName&&"HTML"!=element.scopeName?uppercase(element.scopeName+":"+element.nodeName):element.nodeName}:function(element){return element.nodeName?element.nodeName:element[0].nodeName};var SNAKE_CASE_REGEXP=/[A-Z]/g,version={full:"1.2.10",major:1,minor:2,dot:10,codeName:"augmented-serendipity"},jqCache=JQLite.cache={},jqName=JQLite.expando="ng-"+(new Date).getTime(),jqId=1,addEventListenerFn=window.document.addEventListener?function(element,type,fn){element.addEventListener(type,fn,!1)}:function(element,type,fn){element.attachEvent("on"+type,fn)},removeEventListenerFn=window.document.removeEventListener?function(element,type,fn){element.removeEventListener(type,fn,!1)}:function(element,type,fn){element.detachEvent("on"+type,fn)},SPECIAL_CHARS_REGEXP=/([\:\-\_]+(.))/g,MOZ_HACK_REGEXP=/^moz([A-Z])/,jqLiteMinErr=minErr("jqLite"),JQLitePrototype=JQLite.prototype={ready:function(fn){function trigger(){fired||(fired=!0,fn())}var fired=!1;"complete"===document.readyState?setTimeout(trigger):(this.on("DOMContentLoaded",trigger),JQLite(window).on("load",trigger))},toString:function(){var value=[];return forEach(this,function(e){value.push(""+e)}),"["+value.join(", ")+"]"},eq:function(index){return jqLite(index>=0?this[index]:this[this.length+index])},length:0,push:push,sort:[].sort,splice:[].splice},BOOLEAN_ATTR={};forEach("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(value){BOOLEAN_ATTR[lowercase(value)]=value});var BOOLEAN_ELEMENTS={};forEach("input,select,option,textarea,button,form,details".split(","),function(value){BOOLEAN_ELEMENTS[uppercase(value)]=!0}),forEach({data:jqLiteData,inheritedData:jqLiteInheritedData,scope:function(element){return jqLite(element).data("$scope")||jqLiteInheritedData(element.parentNode||element,["$isolateScope","$scope"])},isolateScope:function(element){return jqLite(element).data("$isolateScope")||jqLite(element).data("$isolateScopeNoTemplate")},controller:jqLiteController,injector:function(element){return jqLiteInheritedData(element,"$injector")},removeAttr:function(element,name){element.removeAttribute(name)},hasClass:jqLiteHasClass,css:function(element,name,value){if(name=camelCase(name),!isDefined(value)){var val;return 8>=msie&&(val=element.currentStyle&&element.currentStyle[name],""===val&&(val="auto")),val=val||element.style[name],8>=msie&&(val=""===val?undefined:val),val}element.style[name]=value},attr:function(element,name,value){var lowercasedName=lowercase(name);if(BOOLEAN_ATTR[lowercasedName]){if(!isDefined(value))return element[name]||(element.attributes.getNamedItem(name)||noop).specified?lowercasedName:undefined;value?(element[name]=!0,element.setAttribute(name,lowercasedName)):(element[name]=!1,element.removeAttribute(lowercasedName))}else if(isDefined(value))element.setAttribute(name,value);else if(element.getAttribute){var ret=element.getAttribute(name,2);return null===ret?undefined:ret}},prop:function(element,name,value){return isDefined(value)?void(element[name]=value):element[name]},text:function(){function getText(element,value){var textProp=NODE_TYPE_TEXT_PROPERTY[element.nodeType];return isUndefined(value)?textProp?element[textProp]:"":void(element[textProp]=value)}var NODE_TYPE_TEXT_PROPERTY=[];return 9>msie?(NODE_TYPE_TEXT_PROPERTY[1]="innerText",NODE_TYPE_TEXT_PROPERTY[3]="nodeValue"):NODE_TYPE_TEXT_PROPERTY[1]=NODE_TYPE_TEXT_PROPERTY[3]="textContent",getText.$dv="",getText}(),val:function(element,value){if(isUndefined(value)){if("SELECT"===nodeName_(element)&&element.multiple){var result=[];return forEach(element.options,function(option){option.selected&&result.push(option.value||option.text)}),0===result.length?null:result}return element.value}element.value=value},html:function(element,value){if(isUndefined(value))return element.innerHTML;for(var i=0,childNodes=element.childNodes;i<childNodes.length;i++)jqLiteDealoc(childNodes[i]);element.innerHTML=value},empty:jqLiteEmpty},function(fn,name){JQLite.prototype[name]=function(arg1,arg2){var i,key;if(fn!==jqLiteEmpty&&(2==fn.length&&fn!==jqLiteHasClass&&fn!==jqLiteController?arg1:arg2)===undefined){if(isObject(arg1)){for(i=0;i<this.length;i++)if(fn===jqLiteData)fn(this[i],arg1);else for(key in arg1)fn(this[i],key,arg1[key]);return this}for(var value=fn.$dv,jj=value===undefined?Math.min(this.length,1):this.length,j=0;jj>j;j++){var nodeValue=fn(this[j],arg1,arg2);value=value?value+nodeValue:nodeValue}return value}for(i=0;i<this.length;i++)fn(this[i],arg1,arg2);return this}}),forEach({removeData:jqLiteRemoveData,dealoc:jqLiteDealoc,on:function onFn(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");var events=jqLiteExpandoStore(element,"events"),handle=jqLiteExpandoStore(element,"handle");events||jqLiteExpandoStore(element,"events",events={}),handle||jqLiteExpandoStore(element,"handle",handle=createEventHandler(element,events)),forEach(type.split(" "),function(type){var eventFns=events[type];if(!eventFns){if("mouseenter"==type||"mouseleave"==type){var contains=document.body.contains||document.body.compareDocumentPosition?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};events[type]=[];var eventmap={mouseleave:"mouseout",mouseenter:"mouseover"};onFn(element,eventmap[type],function(event){var target=this,related=event.relatedTarget;(!related||related!==target&&!contains(target,related))&&handle(event,type)})}else addEventListenerFn(element,type,handle),events[type]=[];eventFns=events[type]}eventFns.push(fn)})},off:jqLiteOff,one:function(element,type,fn){element=jqLite(element),element.on(type,function onFn(){element.off(type,fn),element.off(type,onFn)}),element.on(type,fn)},replaceWith:function(element,replaceNode){var index,parent=element.parentNode;jqLiteDealoc(element),forEach(new JQLite(replaceNode),function(node){index?parent.insertBefore(node,index.nextSibling):parent.replaceChild(node,element),index=node})},children:function(element){var children=[];return forEach(element.childNodes,function(element){1===element.nodeType&&children.push(element)}),children},contents:function(element){return element.childNodes||[]},append:function(element,node){forEach(new JQLite(node),function(child){(1===element.nodeType||11===element.nodeType)&&element.appendChild(child)})},prepend:function(element,node){if(1===element.nodeType){var index=element.firstChild;forEach(new JQLite(node),function(child){element.insertBefore(child,index)})}},wrap:function(element,wrapNode){wrapNode=jqLite(wrapNode)[0];var parent=element.parentNode;parent&&parent.replaceChild(wrapNode,element),wrapNode.appendChild(element)},remove:function(element){jqLiteDealoc(element);var parent=element.parentNode;parent&&parent.removeChild(element)},after:function(element,newElement){var index=element,parent=element.parentNode;forEach(new JQLite(newElement),function(node){parent.insertBefore(node,index.nextSibling),index=node})},addClass:jqLiteAddClass,removeClass:jqLiteRemoveClass,toggleClass:function(element,selector,condition){isUndefined(condition)&&(condition=!jqLiteHasClass(element,selector)),(condition?jqLiteAddClass:jqLiteRemoveClass)(element,selector)},parent:function(element){var parent=element.parentNode;return parent&&11!==parent.nodeType?parent:null},next:function(element){if(element.nextElementSibling)return element.nextElementSibling;for(var elm=element.nextSibling;null!=elm&&1!==elm.nodeType;)elm=elm.nextSibling;return elm},find:function(element,selector){return element.getElementsByTagName?element.getElementsByTagName(selector):[]},clone:jqLiteClone,triggerHandler:function(element,eventName,eventData){var eventFns=(jqLiteExpandoStore(element,"events")||{})[eventName];eventData=eventData||[];var event=[{preventDefault:noop,stopPropagation:noop}];forEach(eventFns,function(fn){fn.apply(element,event.concat(eventData))})}},function(fn,name){JQLite.prototype[name]=function(arg1,arg2,arg3){for(var value,i=0;i<this.length;i++)isUndefined(value)?(value=fn(this[i],arg1,arg2,arg3),isDefined(value)&&(value=jqLite(value))):jqLiteAddNodes(value,fn(this[i],arg1,arg2,arg3));return isDefined(value)?value:this},JQLite.prototype.bind=JQLite.prototype.on,JQLite.prototype.unbind=JQLite.prototype.off}),HashMap.prototype={put:function(key,value){this[hashKey(key)]=value},get:function(key){return this[hashKey(key)]},remove:function(key){var value=this[key=hashKey(key)];return delete this[key],value}};var FN_ARGS=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,FN_ARG_SPLIT=/,/,FN_ARG=/^\s*(_?)(\S+?)\1\s*$/,STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,$injectorMinErr=minErr("$injector"),$animateMinErr=minErr("$animate"),$AnimateProvider=["$provide",function($provide){this.$$selectors={},this.register=function(name,factory){var key=name+"-animation";if(name&&"."!=name.charAt(0))throw $animateMinErr("notcsel","Expecting class selector starting with '.' got '{0}'.",name);this.$$selectors[name.substr(1)]=key,$provide.factory(key,factory)},this.classNameFilter=function(expression){return 1===arguments.length&&(this.$$classNameFilter=expression instanceof RegExp?expression:null),this.$$classNameFilter},this.$get=["$timeout",function($timeout){return{enter:function(element,parent,after,done){after?after.after(element):(parent&&parent[0]||(parent=after.parent()),parent.append(element)),done&&$timeout(done,0,!1)},leave:function(element,done){element.remove(),done&&$timeout(done,0,!1)},move:function(element,parent,after,done){this.enter(element,parent,after,done)},addClass:function(element,className,done){className=isString(className)?className:isArray(className)?className.join(" "):"",forEach(element,function(element){jqLiteAddClass(element,className)}),done&&$timeout(done,0,!1)},removeClass:function(element,className,done){className=isString(className)?className:isArray(className)?className.join(" "):"",forEach(element,function(element){jqLiteRemoveClass(element,className)}),done&&$timeout(done,0,!1)},enabled:noop}}]}],$compileMinErr=minErr("$compile");$CompileProvider.$inject=["$provide","$$sanitizeUriProvider"];var PREFIX_REGEXP=/^(x[\:\-_]|data[\:\-_])/i,$interpolateMinErr=minErr("$interpolate"),PATH_MATCH=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,DEFAULT_PORTS={http:80,https:443,ftp:21},$locationMinErr=minErr("$location");LocationHashbangInHtml5Url.prototype=LocationHashbangUrl.prototype=LocationHtml5Url.prototype={$$html5:!1,$$replace:!1,absUrl:locationGetter("$$absUrl"),url:function(url,replace){if(isUndefined(url))return this.$$url;var match=PATH_MATCH.exec(url);return match[1]&&this.path(decodeURIComponent(match[1])),(match[2]||match[1])&&this.search(match[3]||""),this.hash(match[5]||"",replace),this},protocol:locationGetter("$$protocol"),host:locationGetter("$$host"),port:locationGetter("$$port"),path:locationGetterSetter("$$path",function(path){return"/"==path.charAt(0)?path:"/"+path}),search:function(search,paramValue){switch(arguments.length){case 0:return this.$$search;case 1:if(isString(search))this.$$search=parseKeyValue(search);else{if(!isObject(search))throw $locationMinErr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");this.$$search=search}break;default:isUndefined(paramValue)||null===paramValue?delete this.$$search[search]:this.$$search[search]=paramValue}return this.$$compose(),this},hash:locationGetterSetter("$$hash",identity),replace:function(){return this.$$replace=!0,this}};var promiseWarning,$parseMinErr=minErr("$parse"),promiseWarningCache={},OPERATORS={"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:noop,"+":function(self,locals,a,b){return a=a(self,locals),b=b(self,locals),isDefined(a)?isDefined(b)?a+b:a:isDefined(b)?b:undefined},"-":function(self,locals,a,b){return a=a(self,locals),b=b(self,locals),(isDefined(a)?a:0)-(isDefined(b)?b:0)},"*":function(self,locals,a,b){return a(self,locals)*b(self,locals)},"/":function(self,locals,a,b){return a(self,locals)/b(self,locals)},"%":function(self,locals,a,b){return a(self,locals)%b(self,locals)},"^":function(self,locals,a,b){return a(self,locals)^b(self,locals)},"=":noop,"===":function(self,locals,a,b){return a(self,locals)===b(self,locals)},"!==":function(self,locals,a,b){return a(self,locals)!==b(self,locals)},"==":function(self,locals,a,b){return a(self,locals)==b(self,locals)},"!=":function(self,locals,a,b){return a(self,locals)!=b(self,locals)},"<":function(self,locals,a,b){return a(self,locals)<b(self,locals)},">":function(self,locals,a,b){return a(self,locals)>b(self,locals)},"<=":function(self,locals,a,b){return a(self,locals)<=b(self,locals)},">=":function(self,locals,a,b){return a(self,locals)>=b(self,locals)},"&&":function(self,locals,a,b){return a(self,locals)&&b(self,locals)},"||":function(self,locals,a,b){return a(self,locals)||b(self,locals)},"&":function(self,locals,a,b){return a(self,locals)&b(self,locals)},"|":function(self,locals,a,b){return b(self,locals)(self,locals,a(self,locals))},"!":function(self,locals,a){return!a(self,locals)}},ESCAPE={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},Lexer=function(options){this.options=options};Lexer.prototype={constructor:Lexer,lex:function(text){this.text=text,this.index=0,this.ch=undefined,this.lastCh=":",this.tokens=[];for(var token,json=[];this.index<this.text.length;){if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent(),this.was("{,")&&"{"===json[0]&&(token=this.tokens[this.tokens.length-1])&&(token.json=-1===token.text.indexOf("."));else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch,json:this.was(":[,")&&this.is("{[")||this.is("}]:,")}),this.is("{[")&&json.unshift(this.ch),this.is("}]")&&json.shift(),this.index++;else{if(this.isWhitespace(this.ch)){this.index++;continue}var ch2=this.ch+this.peek(),ch3=ch2+this.peek(2),fn=OPERATORS[this.ch],fn2=OPERATORS[ch2],fn3=OPERATORS[ch3];fn3?(this.tokens.push({index:this.index,text:ch3,fn:fn3}),this.index+=3):fn2?(this.tokens.push({index:this.index,text:ch2,fn:fn2}),this.index+=2):fn?(this.tokens.push({index:this.index,text:this.ch,fn:fn,json:this.was("[,:")&&this.is("+-")}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},is:function(chars){return-1!==chars.indexOf(this.ch)},was:function(chars){return-1!==chars.indexOf(this.lastCh)},peek:function(i){var num=i||1;return this.index+num<this.text.length?this.text.charAt(this.index+num):!1},isNumber:function(ch){return ch>="0"&&"9">=ch},isWhitespace:function(ch){return" "===ch||"\r"===ch||"	"===ch||"\n"===ch||""===ch||" "===ch},isIdent:function(ch){return ch>="a"&&"z">=ch||ch>="A"&&"Z">=ch||"_"===ch||"$"===ch},isExpOperator:function(ch){return"-"===ch||"+"===ch||this.isNumber(ch)},throwError:function(error,start,end){end=end||this.index;var colStr=isDefined(start)?"s "+start+"-"+this.index+" ["+this.text.substring(start,end)+"]":" "+end;throw $parseMinErr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",error,colStr,this.text)},readNumber:function(){for(var number="",start=this.index;this.index<this.text.length;){var ch=lowercase(this.text.charAt(this.index));if("."==ch||this.isNumber(ch))number+=ch;else{var peekCh=this.peek();if("e"==ch&&this.isExpOperator(peekCh))number+=ch;else if(this.isExpOperator(ch)&&peekCh&&this.isNumber(peekCh)&&"e"==number.charAt(number.length-1))number+=ch;else{if(!this.isExpOperator(ch)||peekCh&&this.isNumber(peekCh)||"e"!=number.charAt(number.length-1))break;this.throwError("Invalid exponent")}}this.index++}number=1*number,this.tokens.push({index:start,text:number,json:!0,fn:function(){return number}})},readIdent:function(){for(var lastDot,peekIndex,methodName,ch,parser=this,ident="",start=this.index;this.index<this.text.length&&(ch=this.text.charAt(this.index),"."===ch||this.isIdent(ch)||this.isNumber(ch));)"."===ch&&(lastDot=this.index),ident+=ch,this.index++;if(lastDot)for(peekIndex=this.index;peekIndex<this.text.length;){if(ch=this.text.charAt(peekIndex),"("===ch){methodName=ident.substr(lastDot-start+1),ident=ident.substr(0,lastDot-start),this.index=peekIndex;break}if(!this.isWhitespace(ch))break;peekIndex++}var token={index:start,text:ident};if(OPERATORS.hasOwnProperty(ident))token.fn=OPERATORS[ident],token.json=OPERATORS[ident];else{var getter=getterFn(ident,this.options,this.text);token.fn=extend(function(self,locals){return getter(self,locals)},{assign:function(self,value){return setter(self,ident,value,parser.text,parser.options)}})}this.tokens.push(token),methodName&&(this.tokens.push({index:lastDot,text:".",json:!1}),this.tokens.push({index:lastDot+1,text:methodName,json:!1}))},readString:function(quote){var start=this.index;this.index++;for(var string="",rawString=quote,escape=!1;this.index<this.text.length;){var ch=this.text.charAt(this.index);if(rawString+=ch,escape){if("u"===ch){var hex=this.text.substring(this.index+1,this.index+5);hex.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+hex+"]"),this.index+=4,string+=String.fromCharCode(parseInt(hex,16))}else{var rep=ESCAPE[ch];string+=rep?rep:ch}escape=!1}else if("\\"===ch)escape=!0;else{if(ch===quote)return this.index++,void this.tokens.push({index:start,text:rawString,string:string,json:!0,fn:function(){return string}});string+=ch}this.index++}this.throwError("Unterminated quote",start)}};var Parser=function(lexer,$filter,options){this.lexer=lexer,this.$filter=$filter,this.options=options};Parser.ZERO=function(){return 0},Parser.prototype={constructor:Parser,parse:function(text,json){this.text=text,this.json=json,this.tokens=this.lexer.lex(text),json&&(this.assignment=this.logicalOR,this.functionCall=this.fieldAccess=this.objectIndex=this.filterChain=function(){this.throwError("is not valid json",{text:text,index:0})});var value=json?this.primary():this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),value.literal=!!value.literal,value.constant=!!value.constant,value},primary:function(){var primary;if(this.expect("("))primary=this.filterChain(),this.consume(")");else if(this.expect("["))primary=this.arrayDeclaration();else if(this.expect("{"))primary=this.object();else{var token=this.expect();primary=token.fn,primary||this.throwError("not a primary expression",token),token.json&&(primary.constant=!0,primary.literal=!0)}for(var next,context;next=this.expect("(","[",".");)"("===next.text?(primary=this.functionCall(primary,context),context=null):"["===next.text?(context=primary,primary=this.objectIndex(primary)):"."===next.text?(context=primary,primary=this.fieldAccess(primary)):this.throwError("IMPOSSIBLE");return primary},throwError:function(msg,token){throw $parseMinErr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",token.text,msg,token.index+1,this.text,this.text.substring(token.index))},peekToken:function(){if(0===this.tokens.length)throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e1,e2,e3,e4){if(this.tokens.length>0){var token=this.tokens[0],t=token.text;if(t===e1||t===e2||t===e3||t===e4||!e1&&!e2&&!e3&&!e4)return token}return!1},expect:function(e1,e2,e3,e4){var token=this.peek(e1,e2,e3,e4);return token?(this.json&&!token.json&&this.throwError("is not valid json",token),this.tokens.shift(),token):!1},consume:function(e1){this.expect(e1)||this.throwError("is unexpected, expecting ["+e1+"]",this.peek())},unaryFn:function(fn,right){return extend(function(self,locals){return fn(self,locals,right)},{constant:right.constant})},ternaryFn:function(left,middle,right){
return extend(function(self,locals){return left(self,locals)?middle(self,locals):right(self,locals)},{constant:left.constant&&middle.constant&&right.constant})},binaryFn:function(left,fn,right){return extend(function(self,locals){return fn(self,locals,left,right)},{constant:left.constant&&right.constant})},statements:function(){for(var statements=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&statements.push(this.filterChain()),!this.expect(";"))return 1===statements.length?statements[0]:function(self,locals){for(var value,i=0;i<statements.length;i++){var statement=statements[i];statement&&(value=statement(self,locals))}return value}},filterChain:function(){for(var token,left=this.expression();;){if(!(token=this.expect("|")))return left;left=this.binaryFn(left,token.fn,this.filter())}},filter:function(){for(var token=this.expect(),fn=this.$filter(token.text),argsFn=[];;){if(!(token=this.expect(":"))){var fnInvoke=function(self,locals,input){for(var args=[input],i=0;i<argsFn.length;i++)args.push(argsFn[i](self,locals));return fn.apply(self,args)};return function(){return fnInvoke}}argsFn.push(this.expression())}},expression:function(){return this.assignment()},assignment:function(){var right,token,left=this.ternary();return(token=this.expect("="))?(left.assign||this.throwError("implies assignment but ["+this.text.substring(0,token.index)+"] can not be assigned to",token),right=this.ternary(),function(scope,locals){return left.assign(scope,right(scope,locals),locals)}):left},ternary:function(){var middle,token,left=this.logicalOR();return(token=this.expect("?"))?(middle=this.ternary(),(token=this.expect(":"))?this.ternaryFn(left,middle,this.ternary()):void this.throwError("expected :",token)):left},logicalOR:function(){for(var token,left=this.logicalAND();;){if(!(token=this.expect("||")))return left;left=this.binaryFn(left,token.fn,this.logicalAND())}},logicalAND:function(){var token,left=this.equality();return(token=this.expect("&&"))&&(left=this.binaryFn(left,token.fn,this.logicalAND())),left},equality:function(){var token,left=this.relational();return(token=this.expect("==","!=","===","!=="))&&(left=this.binaryFn(left,token.fn,this.equality())),left},relational:function(){var token,left=this.additive();return(token=this.expect("<",">","<=",">="))&&(left=this.binaryFn(left,token.fn,this.relational())),left},additive:function(){for(var token,left=this.multiplicative();token=this.expect("+","-");)left=this.binaryFn(left,token.fn,this.multiplicative());return left},multiplicative:function(){for(var token,left=this.unary();token=this.expect("*","/","%");)left=this.binaryFn(left,token.fn,this.unary());return left},unary:function(){var token;return this.expect("+")?this.primary():(token=this.expect("-"))?this.binaryFn(Parser.ZERO,token.fn,this.unary()):(token=this.expect("!"))?this.unaryFn(token.fn,this.unary()):this.primary()},fieldAccess:function(object){var parser=this,field=this.expect().text,getter=getterFn(field,this.options,this.text);return extend(function(scope,locals,self){return getter(self||object(scope,locals))},{assign:function(scope,value,locals){return setter(object(scope,locals),field,value,parser.text,parser.options)}})},objectIndex:function(obj){var parser=this,indexFn=this.expression();return this.consume("]"),extend(function(self,locals){var v,p,o=obj(self,locals),i=indexFn(self,locals);return o?(v=ensureSafeObject(o[i],parser.text),v&&v.then&&parser.options.unwrapPromises&&(p=v,"$$v"in v||(p.$$v=undefined,p.then(function(val){p.$$v=val})),v=v.$$v),v):undefined},{assign:function(self,value,locals){var key=indexFn(self,locals),safe=ensureSafeObject(obj(self,locals),parser.text);return safe[key]=value}})},functionCall:function(fn,contextGetter){var argsFn=[];if(")"!==this.peekToken().text)do argsFn.push(this.expression());while(this.expect(","));this.consume(")");var parser=this;return function(scope,locals){for(var args=[],context=contextGetter?contextGetter(scope,locals):scope,i=0;i<argsFn.length;i++)args.push(argsFn[i](scope,locals));var fnPtr=fn(scope,locals,context)||noop;ensureSafeObject(context,parser.text),ensureSafeObject(fnPtr,parser.text);var v=fnPtr.apply?fnPtr.apply(context,args):fnPtr(args[0],args[1],args[2],args[3],args[4]);return ensureSafeObject(v,parser.text)}},arrayDeclaration:function(){var elementFns=[],allConstant=!0;if("]"!==this.peekToken().text)do{var elementFn=this.expression();elementFns.push(elementFn),elementFn.constant||(allConstant=!1)}while(this.expect(","));return this.consume("]"),extend(function(self,locals){for(var array=[],i=0;i<elementFns.length;i++)array.push(elementFns[i](self,locals));return array},{literal:!0,constant:allConstant})},object:function(){var keyValues=[],allConstant=!0;if("}"!==this.peekToken().text)do{var token=this.expect(),key=token.string||token.text;this.consume(":");var value=this.expression();keyValues.push({key:key,value:value}),value.constant||(allConstant=!1)}while(this.expect(","));return this.consume("}"),extend(function(self,locals){for(var object={},i=0;i<keyValues.length;i++){var keyValue=keyValues[i];object[keyValue.key]=keyValue.value(self,locals)}return object},{literal:!0,constant:allConstant})}};var getterFnCache={},$sceMinErr=minErr("$sce"),SCE_CONTEXTS={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},urlParsingNode=document.createElement("a"),originUrl=urlResolve(window.location.href,!0);$FilterProvider.$inject=["$provide"],currencyFilter.$inject=["$locale"],numberFilter.$inject=["$locale"];var DECIMAL_SEP=".",DATE_FORMATS={yyyy:dateGetter("FullYear",4),yy:dateGetter("FullYear",2,0,!0),y:dateGetter("FullYear",1),MMMM:dateStrGetter("Month"),MMM:dateStrGetter("Month",!0),MM:dateGetter("Month",2,1),M:dateGetter("Month",1,1),dd:dateGetter("Date",2),d:dateGetter("Date",1),HH:dateGetter("Hours",2),H:dateGetter("Hours",1),hh:dateGetter("Hours",2,-12),h:dateGetter("Hours",1,-12),mm:dateGetter("Minutes",2),m:dateGetter("Minutes",1),ss:dateGetter("Seconds",2),s:dateGetter("Seconds",1),sss:dateGetter("Milliseconds",3),EEEE:dateStrGetter("Day"),EEE:dateStrGetter("Day",!0),a:ampmGetter,Z:timeZoneGetter},DATE_FORMATS_SPLIT=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,NUMBER_STRING=/^\-?\d+$/;dateFilter.$inject=["$locale"];var lowercaseFilter=valueFn(lowercase),uppercaseFilter=valueFn(uppercase);orderByFilter.$inject=["$parse"];var htmlAnchorDirective=valueFn({restrict:"E",compile:function(element,attr){return 8>=msie&&(attr.href||attr.name||attr.$set("href",""),element.append(document.createComment("IE fix"))),attr.href||attr.xlinkHref||attr.name?void 0:function(scope,element){var href="[object SVGAnimatedString]"===toString.call(element.prop("href"))?"xlink:href":"href";element.on("click",function(event){element.attr(href)||event.preventDefault()})}}}),ngAttributeAliasDirectives={};forEach(BOOLEAN_ATTR,function(propName,attrName){if("multiple"!=propName){var normalized=directiveNormalize("ng-"+attrName);ngAttributeAliasDirectives[normalized]=function(){return{priority:100,link:function(scope,element,attr){scope.$watch(attr[normalized],function(value){attr.$set(attrName,!!value)})}}}}}),forEach(["src","srcset","href"],function(attrName){var normalized=directiveNormalize("ng-"+attrName);ngAttributeAliasDirectives[normalized]=function(){return{priority:99,link:function(scope,element,attr){attr.$observe(normalized,function(value){value&&(attr.$set(attrName,value),msie&&element.prop(attrName,attr[attrName]))})}}}});var nullFormCtrl={$addControl:noop,$removeControl:noop,$setValidity:noop,$setDirty:noop,$setPristine:noop};FormController.$inject=["$element","$attrs","$scope"];var formDirectiveFactory=function(isNgForm){return["$timeout",function($timeout){var formDirective={name:"form",restrict:isNgForm?"EAC":"E",controller:FormController,compile:function(){return{pre:function(scope,formElement,attr,controller){if(!attr.action){var preventDefaultListener=function(event){event.preventDefault?event.preventDefault():event.returnValue=!1};addEventListenerFn(formElement[0],"submit",preventDefaultListener),formElement.on("$destroy",function(){$timeout(function(){removeEventListenerFn(formElement[0],"submit",preventDefaultListener)},0,!1)})}var parentFormCtrl=formElement.parent().controller("form"),alias=attr.name||attr.ngForm;alias&&setter(scope,alias,controller,alias),parentFormCtrl&&formElement.on("$destroy",function(){parentFormCtrl.$removeControl(controller),alias&&setter(scope,alias,undefined,alias),extend(controller,nullFormCtrl)})}}}};return formDirective}]},formDirective=formDirectiveFactory(),ngFormDirective=formDirectiveFactory(!0),URL_REGEXP=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,EMAIL_REGEXP=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9-]+(\.[a-z0-9-]+)*$/i,NUMBER_REGEXP=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,inputType={text:textInputType,number:numberInputType,url:urlInputType,email:emailInputType,radio:radioInputType,checkbox:checkboxInputType,hidden:noop,button:noop,submit:noop,reset:noop},inputDirective=["$browser","$sniffer",function($browser,$sniffer){return{restrict:"E",require:"?ngModel",link:function(scope,element,attr,ctrl){ctrl&&(inputType[lowercase(attr.type)]||inputType.text)(scope,element,attr,ctrl,$sniffer,$browser)}}}],VALID_CLASS="ng-valid",INVALID_CLASS="ng-invalid",PRISTINE_CLASS="ng-pristine",DIRTY_CLASS="ng-dirty",NgModelController=["$scope","$exceptionHandler","$attrs","$element","$parse",function($scope,$exceptionHandler,$attr,$element,$parse){function toggleValidCss(isValid,validationErrorKey){validationErrorKey=validationErrorKey?"-"+snake_case(validationErrorKey,"-"):"",$element.removeClass((isValid?INVALID_CLASS:VALID_CLASS)+validationErrorKey).addClass((isValid?VALID_CLASS:INVALID_CLASS)+validationErrorKey)}this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$name=$attr.name;var ngModelGet=$parse($attr.ngModel),ngModelSet=ngModelGet.assign;if(!ngModelSet)throw minErr("ngModel")("nonassign","Expression '{0}' is non-assignable. Element: {1}",$attr.ngModel,startingTag($element));this.$render=noop,this.$isEmpty=function(value){return isUndefined(value)||""===value||null===value||value!==value};var parentForm=$element.inheritedData("$formController")||nullFormCtrl,invalidCount=0,$error=this.$error={};$element.addClass(PRISTINE_CLASS),toggleValidCss(!0),this.$setValidity=function(validationErrorKey,isValid){$error[validationErrorKey]!==!isValid&&(isValid?($error[validationErrorKey]&&invalidCount--,invalidCount||(toggleValidCss(!0),this.$valid=!0,this.$invalid=!1)):(toggleValidCss(!1),this.$invalid=!0,this.$valid=!1,invalidCount++),$error[validationErrorKey]=!isValid,toggleValidCss(isValid,validationErrorKey),parentForm.$setValidity(validationErrorKey,isValid,this))},this.$setPristine=function(){this.$dirty=!1,this.$pristine=!0,$element.removeClass(DIRTY_CLASS).addClass(PRISTINE_CLASS)},this.$setViewValue=function(value){this.$viewValue=value,this.$pristine&&(this.$dirty=!0,this.$pristine=!1,$element.removeClass(PRISTINE_CLASS).addClass(DIRTY_CLASS),parentForm.$setDirty()),forEach(this.$parsers,function(fn){value=fn(value)}),this.$modelValue!==value&&(this.$modelValue=value,ngModelSet($scope,value),forEach(this.$viewChangeListeners,function(listener){try{listener()}catch(e){$exceptionHandler(e)}}))};var ctrl=this;$scope.$watch(function(){var value=ngModelGet($scope);if(ctrl.$modelValue!==value){var formatters=ctrl.$formatters,idx=formatters.length;for(ctrl.$modelValue=value;idx--;)value=formatters[idx](value);ctrl.$viewValue!==value&&(ctrl.$viewValue=value,ctrl.$render())}return value})}],ngModelDirective=function(){return{require:["ngModel","^?form"],controller:NgModelController,link:function(scope,element,attr,ctrls){var modelCtrl=ctrls[0],formCtrl=ctrls[1]||nullFormCtrl;formCtrl.$addControl(modelCtrl),scope.$on("$destroy",function(){formCtrl.$removeControl(modelCtrl)})}}},ngChangeDirective=valueFn({require:"ngModel",link:function(scope,element,attr,ctrl){ctrl.$viewChangeListeners.push(function(){scope.$eval(attr.ngChange)})}}),requiredDirective=function(){return{require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){attr.required=!0;var validator=function(value){return attr.required&&ctrl.$isEmpty(value)?void ctrl.$setValidity("required",!1):(ctrl.$setValidity("required",!0),value)};ctrl.$formatters.push(validator),ctrl.$parsers.unshift(validator),attr.$observe("required",function(){validator(ctrl.$viewValue)})}}}},ngListDirective=function(){return{require:"ngModel",link:function(scope,element,attr,ctrl){var match=/\/(.*)\//.exec(attr.ngList),separator=match&&new RegExp(match[1])||attr.ngList||",",parse=function(viewValue){if(!isUndefined(viewValue)){var list=[];return viewValue&&forEach(viewValue.split(separator),function(value){value&&list.push(trim(value))}),list}};ctrl.$parsers.push(parse),ctrl.$formatters.push(function(value){return isArray(value)?value.join(", "):undefined}),ctrl.$isEmpty=function(value){return!value||!value.length}}}},CONSTANT_VALUE_REGEXP=/^(true|false|\d+)$/,ngValueDirective=function(){return{priority:100,compile:function(tpl,tplAttr){return CONSTANT_VALUE_REGEXP.test(tplAttr.ngValue)?function(scope,elm,attr){attr.$set("value",scope.$eval(attr.ngValue))}:function(scope,elm,attr){scope.$watch(attr.ngValue,function(value){attr.$set("value",value)})}}}},ngBindDirective=ngDirective(function(scope,element,attr){element.addClass("ng-binding").data("$binding",attr.ngBind),scope.$watch(attr.ngBind,function(value){element.text(value==undefined?"":value)})}),ngBindTemplateDirective=["$interpolate",function($interpolate){return function(scope,element,attr){var interpolateFn=$interpolate(element.attr(attr.$attr.ngBindTemplate));element.addClass("ng-binding").data("$binding",interpolateFn),attr.$observe("ngBindTemplate",function(value){element.text(value)})}}],ngBindHtmlDirective=["$sce","$parse",function($sce,$parse){return function(scope,element,attr){function getStringValue(){return(parsed(scope)||"").toString()}element.addClass("ng-binding").data("$binding",attr.ngBindHtml);var parsed=$parse(attr.ngBindHtml);scope.$watch(getStringValue,function(value){element.html($sce.getTrustedHtml(parsed(scope))||"")})}}],ngClassDirective=classDirective("",!0),ngClassOddDirective=classDirective("Odd",0),ngClassEvenDirective=classDirective("Even",1),ngCloakDirective=ngDirective({compile:function(element,attr){attr.$set("ngCloak",undefined),element.removeClass("ng-cloak")}}),ngControllerDirective=[function(){return{scope:!0,controller:"@",priority:500}}],ngEventDirectives={};forEach("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(name){var directiveName=directiveNormalize("ng-"+name);ngEventDirectives[directiveName]=["$parse",function($parse){return{compile:function($element,attr){var fn=$parse(attr[directiveName]);return function(scope,element,attr){element.on(lowercase(name),function(event){scope.$apply(function(){fn(scope,{$event:event})})})}}}}]});var ngIfDirective=["$animate",function($animate){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function($scope,$element,$attr,ctrl,$transclude){var block,childScope;$scope.$watch($attr.ngIf,function(value){toBoolean(value)?childScope||(childScope=$scope.$new(),$transclude(childScope,function(clone){clone[clone.length++]=document.createComment(" end ngIf: "+$attr.ngIf+" "),block={clone:clone},$animate.enter(clone,$element.parent(),$element)})):(childScope&&(childScope.$destroy(),childScope=null),block&&($animate.leave(getBlockElements(block.clone)),block=null))})}}}],ngIncludeDirective=["$http","$templateCache","$anchorScroll","$animate","$sce",function($http,$templateCache,$anchorScroll,$animate,$sce){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:angular.noop,compile:function(element,attr){var srcExp=attr.ngInclude||attr.src,onloadExp=attr.onload||"",autoScrollExp=attr.autoscroll;return function(scope,$element,$attr,ctrl,$transclude){var currentScope,currentElement,changeCounter=0,cleanupLastIncludeContent=function(){currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&($animate.leave(currentElement),currentElement=null)};scope.$watch($sce.parseAsResourceUrl(srcExp),function(src){var afterAnimation=function(){!isDefined(autoScrollExp)||autoScrollExp&&!scope.$eval(autoScrollExp)||$anchorScroll()},thisChangeId=++changeCounter;src?($http.get(src,{cache:$templateCache}).success(function(response){if(thisChangeId===changeCounter){var newScope=scope.$new();ctrl.template=response;var clone=$transclude(newScope,function(clone){cleanupLastIncludeContent(),$animate.enter(clone,null,$element,afterAnimation)});currentScope=newScope,currentElement=clone,currentScope.$emit("$includeContentLoaded"),scope.$eval(onloadExp)}}).error(function(){thisChangeId===changeCounter&&cleanupLastIncludeContent()}),scope.$emit("$includeContentRequested")):(cleanupLastIncludeContent(),ctrl.template=null)})}}}}],ngIncludeFillContentDirective=["$compile",function($compile){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(scope,$element,$attr,ctrl){$element.html(ctrl.template),$compile($element.contents())(scope)}}}],ngInitDirective=ngDirective({priority:450,compile:function(){return{pre:function(scope,element,attrs){scope.$eval(attrs.ngInit)}}}}),ngNonBindableDirective=ngDirective({terminal:!0,priority:1e3}),ngPluralizeDirective=["$locale","$interpolate",function($locale,$interpolate){var BRACE=/{}/g;return{restrict:"EA",link:function(scope,element,attr){var numberExp=attr.count,whenExp=attr.$attr.when&&element.attr(attr.$attr.when),offset=attr.offset||0,whens=scope.$eval(whenExp)||{},whensExpFns={},startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),isWhen=/^when(Minus)?(.+)$/;forEach(attr,function(expression,attributeName){isWhen.test(attributeName)&&(whens[lowercase(attributeName.replace("when","").replace("Minus","-"))]=element.attr(attr.$attr[attributeName]))}),forEach(whens,function(expression,key){whensExpFns[key]=$interpolate(expression.replace(BRACE,startSymbol+numberExp+"-"+offset+endSymbol))}),scope.$watch(function(){var value=parseFloat(scope.$eval(numberExp));return isNaN(value)?"":(value in whens||(value=$locale.pluralCat(value-offset)),whensExpFns[value](scope,element,!0))},function(newVal){element.text(newVal)})}}}],ngRepeatDirective=["$parse","$animate",function($parse,$animate){function getBlockStart(block){return block.clone[0]}function getBlockEnd(block){return block.clone[block.clone.length-1]}var NG_REMOVED="$$NG_REMOVED",ngRepeatMinErr=minErr("ngRepeat");return{transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,link:function($scope,$element,$attr,ctrl,$transclude){var trackByExp,trackByExpGetter,trackByIdExpFn,trackByIdArrayFn,trackByIdObjFn,lhs,rhs,valueIdentifier,keyIdentifier,expression=$attr.ngRepeat,match=expression.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),hashFnLocals={$id:hashKey};if(!match)throw ngRepeatMinErr("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",expression);if(lhs=match[1],rhs=match[2],trackByExp=match[3],trackByExp?(trackByExpGetter=$parse(trackByExp),trackByIdExpFn=function(key,value,index){return keyIdentifier&&(hashFnLocals[keyIdentifier]=key),hashFnLocals[valueIdentifier]=value,hashFnLocals.$index=index,trackByExpGetter($scope,hashFnLocals)}):(trackByIdArrayFn=function(key,value){return hashKey(value)},trackByIdObjFn=function(key){return key}),match=lhs.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/),!match)throw ngRepeatMinErr("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",lhs);valueIdentifier=match[3]||match[1],keyIdentifier=match[2];var lastBlockMap={};$scope.$watchCollection(rhs,function(collection){var index,length,nextNode,arrayLength,childScope,key,value,trackById,trackByIdFn,collectionKeys,block,elementsToRemove,previousNode=$element[0],nextBlockMap={},nextBlockOrder=[];if(isArrayLike(collection))collectionKeys=collection,trackByIdFn=trackByIdExpFn||trackByIdArrayFn;else{trackByIdFn=trackByIdExpFn||trackByIdObjFn,collectionKeys=[];for(key in collection)collection.hasOwnProperty(key)&&"$"!=key.charAt(0)&&collectionKeys.push(key);collectionKeys.sort()}for(arrayLength=collectionKeys.length,length=nextBlockOrder.length=collectionKeys.length,index=0;length>index;index++)if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],trackById=trackByIdFn(key,value,index),assertNotHasOwnProperty(trackById,"`track by` id"),lastBlockMap.hasOwnProperty(trackById))block=lastBlockMap[trackById],delete lastBlockMap[trackById],nextBlockMap[trackById]=block,nextBlockOrder[index]=block;else{if(nextBlockMap.hasOwnProperty(trackById))throw forEach(nextBlockOrder,function(block){block&&block.scope&&(lastBlockMap[block.id]=block)}),ngRepeatMinErr("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}",expression,trackById);nextBlockOrder[index]={id:trackById},nextBlockMap[trackById]=!1}for(key in lastBlockMap)lastBlockMap.hasOwnProperty(key)&&(block=lastBlockMap[key],elementsToRemove=getBlockElements(block.clone),$animate.leave(elementsToRemove),forEach(elementsToRemove,function(element){element[NG_REMOVED]=!0}),block.scope.$destroy());for(index=0,length=collectionKeys.length;length>index;index++){if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],block=nextBlockOrder[index],nextBlockOrder[index-1]&&(previousNode=getBlockEnd(nextBlockOrder[index-1])),block.scope){childScope=block.scope,nextNode=previousNode;do nextNode=nextNode.nextSibling;while(nextNode&&nextNode[NG_REMOVED]);getBlockStart(block)!=nextNode&&$animate.move(getBlockElements(block.clone),null,jqLite(previousNode)),previousNode=getBlockEnd(block)}else childScope=$scope.$new();childScope[valueIdentifier]=value,keyIdentifier&&(childScope[keyIdentifier]=key),childScope.$index=index,childScope.$first=0===index,childScope.$last=index===arrayLength-1,childScope.$middle=!(childScope.$first||childScope.$last),childScope.$odd=!(childScope.$even=0===(1&index)),block.scope||$transclude(childScope,function(clone){clone[clone.length++]=document.createComment(" end ngRepeat: "+expression+" "),$animate.enter(clone,null,jqLite(previousNode)),previousNode=clone,block.scope=childScope,block.clone=clone,nextBlockMap[block.id]=block})}lastBlockMap=nextBlockMap})}}}],ngShowDirective=["$animate",function($animate){return function(scope,element,attr){scope.$watch(attr.ngShow,function(value){$animate[toBoolean(value)?"removeClass":"addClass"](element,"ng-hide")})}}],ngHideDirective=["$animate",function($animate){return function(scope,element,attr){scope.$watch(attr.ngHide,function(value){$animate[toBoolean(value)?"addClass":"removeClass"](element,"ng-hide")})}}],ngStyleDirective=ngDirective(function(scope,element,attr){scope.$watch(attr.ngStyle,function(newStyles,oldStyles){oldStyles&&newStyles!==oldStyles&&forEach(oldStyles,function(val,style){element.css(style,"")}),newStyles&&element.css(newStyles)},!0)}),ngSwitchDirective=["$animate",function($animate){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(scope,element,attr,ngSwitchController){var selectedTranscludes,selectedElements,watchExpr=attr.ngSwitch||attr.on,selectedScopes=[];scope.$watch(watchExpr,function(value){for(var i=0,ii=selectedScopes.length;ii>i;i++)selectedScopes[i].$destroy(),$animate.leave(selectedElements[i]);selectedElements=[],selectedScopes=[],(selectedTranscludes=ngSwitchController.cases["!"+value]||ngSwitchController.cases["?"])&&(scope.$eval(attr.change),forEach(selectedTranscludes,function(selectedTransclude){var selectedScope=scope.$new();selectedScopes.push(selectedScope),selectedTransclude.transclude(selectedScope,function(caseElement){var anchor=selectedTransclude.element;selectedElements.push(caseElement),$animate.enter(caseElement,anchor.parent(),anchor)})}))})}}}],ngSwitchWhenDirective=ngDirective({transclude:"element",priority:800,require:"^ngSwitch",link:function(scope,element,attrs,ctrl,$transclude){ctrl.cases["!"+attrs.ngSwitchWhen]=ctrl.cases["!"+attrs.ngSwitchWhen]||[],ctrl.cases["!"+attrs.ngSwitchWhen].push({transclude:$transclude,element:element})}}),ngSwitchDefaultDirective=ngDirective({transclude:"element",priority:800,require:"^ngSwitch",link:function(scope,element,attr,ctrl,$transclude){ctrl.cases["?"]=ctrl.cases["?"]||[],ctrl.cases["?"].push({transclude:$transclude,element:element})}}),ngTranscludeDirective=ngDirective({controller:["$element","$transclude",function($element,$transclude){if(!$transclude)throw minErr("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",startingTag($element));this.$transclude=$transclude}],link:function($scope,$element,$attrs,controller){controller.$transclude(function(clone){$element.empty(),$element.append(clone)})}}),scriptDirective=["$templateCache",function($templateCache){return{restrict:"E",terminal:!0,compile:function(element,attr){if("text/ng-template"==attr.type){var templateUrl=attr.id,text=element[0].text;$templateCache.put(templateUrl,text)}}}}],ngOptionsMinErr=minErr("ngOptions"),ngOptionsDirective=valueFn({terminal:!0}),selectDirective=["$compile","$parse",function($compile,$parse){var NG_OPTIONS_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,nullModelCtrl={$setViewValue:noop};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function($element,$scope,$attrs){var nullOption,unknownOption,self=this,optionsMap={},ngModelCtrl=nullModelCtrl;self.databound=$attrs.ngModel,self.init=function(ngModelCtrl_,nullOption_,unknownOption_){ngModelCtrl=ngModelCtrl_,nullOption=nullOption_,unknownOption=unknownOption_},self.addOption=function(value){assertNotHasOwnProperty(value,'"option value"'),optionsMap[value]=!0,ngModelCtrl.$viewValue==value&&($element.val(value),unknownOption.parent()&&unknownOption.remove())},self.removeOption=function(value){this.hasOption(value)&&(delete optionsMap[value],ngModelCtrl.$viewValue==value&&this.renderUnknownOption(value))},self.renderUnknownOption=function(val){var unknownVal="? "+hashKey(val)+" ?";unknownOption.val(unknownVal),$element.prepend(unknownOption),$element.val(unknownVal),unknownOption.prop("selected",!0)},self.hasOption=function(value){return optionsMap.hasOwnProperty(value)},$scope.$on("$destroy",function(){self.renderUnknownOption=noop})}],link:function(scope,element,attr,ctrls){function setupAsSingle(scope,selectElement,ngModelCtrl,selectCtrl){ngModelCtrl.$render=function(){var viewValue=ngModelCtrl.$viewValue;selectCtrl.hasOption(viewValue)?(unknownOption.parent()&&unknownOption.remove(),selectElement.val(viewValue),""===viewValue&&emptyOption.prop("selected",!0)):isUndefined(viewValue)&&emptyOption?selectElement.val(""):selectCtrl.renderUnknownOption(viewValue)},selectElement.on("change",function(){scope.$apply(function(){unknownOption.parent()&&unknownOption.remove(),ngModelCtrl.$setViewValue(selectElement.val())})})}function setupAsMultiple(scope,selectElement,ctrl){var lastView;ctrl.$render=function(){var items=new HashMap(ctrl.$viewValue);forEach(selectElement.find("option"),function(option){option.selected=isDefined(items.get(option.value))})},scope.$watch(function(){equals(lastView,ctrl.$viewValue)||(lastView=copy(ctrl.$viewValue),ctrl.$render())}),selectElement.on("change",function(){scope.$apply(function(){var array=[];forEach(selectElement.find("option"),function(option){option.selected&&array.push(option.value)}),ctrl.$setViewValue(array)})})}function setupAsOptions(scope,selectElement,ctrl){function render(){var optionGroupName,optionGroup,option,existingParent,existingOptions,existingOption,key,groupLength,length,groupIndex,index,selected,lastElement,element,label,optionGroups={"":[]},optionGroupNames=[""],modelValue=ctrl.$modelValue,values=valuesFn(scope)||[],keys=keyName?sortedKeys(values):values,locals={},selectedSet=!1;if(multiple)if(trackFn&&isArray(modelValue)){selectedSet=new HashMap([]);for(var trackIndex=0;trackIndex<modelValue.length;trackIndex++)locals[valueName]=modelValue[trackIndex],selectedSet.put(trackFn(scope,locals),modelValue[trackIndex])}else selectedSet=new HashMap(modelValue);for(index=0;length=keys.length,length>index;index++){if(key=index,keyName){if(key=keys[index],"$"===key.charAt(0))continue;locals[keyName]=key}if(locals[valueName]=values[key],optionGroupName=groupByFn(scope,locals)||"",(optionGroup=optionGroups[optionGroupName])||(optionGroup=optionGroups[optionGroupName]=[],optionGroupNames.push(optionGroupName)),multiple)selected=isDefined(selectedSet.remove(trackFn?trackFn(scope,locals):valueFn(scope,locals)));else{if(trackFn){var modelCast={};modelCast[valueName]=modelValue,selected=trackFn(scope,modelCast)===trackFn(scope,locals)}else selected=modelValue===valueFn(scope,locals);selectedSet=selectedSet||selected}label=displayFn(scope,locals),label=isDefined(label)?label:"",optionGroup.push({id:trackFn?trackFn(scope,locals):keyName?keys[index]:index,label:label,selected:selected})}for(multiple||(nullOption||null===modelValue?optionGroups[""].unshift({id:"",label:"",selected:!selectedSet}):selectedSet||optionGroups[""].unshift({id:"?",label:"",selected:!0})),groupIndex=0,groupLength=optionGroupNames.length;groupLength>groupIndex;groupIndex++){for(optionGroupName=optionGroupNames[groupIndex],optionGroup=optionGroups[optionGroupName],optionGroupsCache.length<=groupIndex?(existingParent={element:optGroupTemplate.clone().attr("label",optionGroupName),label:optionGroup.label},existingOptions=[existingParent],optionGroupsCache.push(existingOptions),selectElement.append(existingParent.element)):(existingOptions=optionGroupsCache[groupIndex],existingParent=existingOptions[0],existingParent.label!=optionGroupName&&existingParent.element.attr("label",existingParent.label=optionGroupName)),lastElement=null,index=0,length=optionGroup.length;length>index;index++)option=optionGroup[index],(existingOption=existingOptions[index+1])?(lastElement=existingOption.element,existingOption.label!==option.label&&lastElement.text(existingOption.label=option.label),existingOption.id!==option.id&&lastElement.val(existingOption.id=option.id),lastElement[0].selected!==option.selected&&lastElement.prop("selected",existingOption.selected=option.selected)):(""===option.id&&nullOption?element=nullOption:(element=optionTemplate.clone()).val(option.id).attr("selected",option.selected).text(option.label),existingOptions.push(existingOption={element:element,label:option.label,id:option.id,selected:option.selected}),lastElement?lastElement.after(element):existingParent.element.append(element),lastElement=element);for(index++;existingOptions.length>index;)existingOptions.pop().element.remove()}for(;optionGroupsCache.length>groupIndex;)optionGroupsCache.pop()[0].element.remove()}var match;if(!(match=optionsExp.match(NG_OPTIONS_REGEXP)))throw ngOptionsMinErr("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",optionsExp,startingTag(selectElement));var displayFn=$parse(match[2]||match[1]),valueName=match[4]||match[6],keyName=match[5],groupByFn=$parse(match[3]||""),valueFn=$parse(match[2]?match[1]:valueName),valuesFn=$parse(match[7]),track=match[8],trackFn=track?$parse(match[8]):null,optionGroupsCache=[[{
element:selectElement,label:""}]];nullOption&&($compile(nullOption)(scope),nullOption.removeClass("ng-scope"),nullOption.remove()),selectElement.empty(),selectElement.on("change",function(){scope.$apply(function(){var optionGroup,key,value,optionElement,index,groupIndex,length,groupLength,trackIndex,collection=valuesFn(scope)||[],locals={};if(multiple){for(value=[],groupIndex=0,groupLength=optionGroupsCache.length;groupLength>groupIndex;groupIndex++)for(optionGroup=optionGroupsCache[groupIndex],index=1,length=optionGroup.length;length>index;index++)if((optionElement=optionGroup[index].element)[0].selected){if(key=optionElement.val(),keyName&&(locals[keyName]=key),trackFn)for(trackIndex=0;trackIndex<collection.length&&(locals[valueName]=collection[trackIndex],trackFn(scope,locals)!=key);trackIndex++);else locals[valueName]=collection[key];value.push(valueFn(scope,locals))}}else if(key=selectElement.val(),"?"==key)value=undefined;else if(""===key)value=null;else if(trackFn){for(trackIndex=0;trackIndex<collection.length;trackIndex++)if(locals[valueName]=collection[trackIndex],trackFn(scope,locals)==key){value=valueFn(scope,locals);break}}else locals[valueName]=collection[key],keyName&&(locals[keyName]=key),value=valueFn(scope,locals);ctrl.$setViewValue(value)})}),ctrl.$render=render,scope.$watch(render)}if(ctrls[1]){for(var emptyOption,selectCtrl=ctrls[0],ngModelCtrl=ctrls[1],multiple=attr.multiple,optionsExp=attr.ngOptions,nullOption=!1,optionTemplate=jqLite(document.createElement("option")),optGroupTemplate=jqLite(document.createElement("optgroup")),unknownOption=optionTemplate.clone(),i=0,children=element.children(),ii=children.length;ii>i;i++)if(""===children[i].value){emptyOption=nullOption=children.eq(i);break}selectCtrl.init(ngModelCtrl,nullOption,unknownOption),multiple&&(ngModelCtrl.$isEmpty=function(value){return!value||0===value.length}),optionsExp?setupAsOptions(scope,element,ngModelCtrl):multiple?setupAsMultiple(scope,element,ngModelCtrl):setupAsSingle(scope,element,ngModelCtrl,selectCtrl)}}}}],optionDirective=["$interpolate",function($interpolate){var nullSelectCtrl={addOption:noop,removeOption:noop};return{restrict:"E",priority:100,compile:function(element,attr){if(isUndefined(attr.value)){var interpolateFn=$interpolate(element.text(),!0);interpolateFn||attr.$set("value",element.text())}return function(scope,element,attr){var selectCtrlName="$selectController",parent=element.parent(),selectCtrl=parent.data(selectCtrlName)||parent.parent().data(selectCtrlName);selectCtrl&&selectCtrl.databound?element.prop("selected",!1):selectCtrl=nullSelectCtrl,interpolateFn?scope.$watch(interpolateFn,function(newVal,oldVal){attr.$set("value",newVal),newVal!==oldVal&&selectCtrl.removeOption(oldVal),selectCtrl.addOption(newVal)}):selectCtrl.addOption(attr.value),element.on("$destroy",function(){selectCtrl.removeOption(attr.value)})}}}}],styleDirective=valueFn({restrict:"E",terminal:!0});bindJQuery(),publishExternalAPI(angular),jqLite(document).ready(function(){angularInit(document,bootstrap)})}(window,document),!angular.$$csp()&&angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}</style>'),function(v,k,t){"use strict";k.module("ngAnimate",["ng"]).factory("$$animateReflow",["$window","$timeout",function(k,B){var d=k.requestAnimationFrame||k.webkitRequestAnimationFrame||function(d){return B(d,10,!1)},q=k.cancelAnimationFrame||k.webkitCancelAnimationFrame||function(d){return B.cancel(d)};return function(p){var k=d(p);return function(){q(k)}}}]).config(["$provide","$animateProvider",function(R,B){function d(d){for(var k=0;k<d.length;k++){var p=d[k];if(p.nodeType==X)return p}}var q=k.noop,p=k.forEach,$=B.$$selectors,X=1,l="$$ngAnimateState",K="ng-animate",m={running:!0};R.decorator("$animate",["$delegate","$injector","$sniffer","$rootElement","$timeout","$rootScope","$document",function(C,v,t,H,y,w,N){function I(a){if(a){var g=[],e={};a=a.substr(1).split("."),(t.transitions||t.animations)&&a.push("");for(var c=0;c<a.length;c++){var f=a[c],d=$[f];d&&!e[f]&&(g.push(v.get(d)),e[f]=!0)}return g}}function r(a,g,e,c,f,k,m){function t(a){n(),!0===a?z():((a=e.data(l))&&(a.done=z,e.data(l,a)),C(D,"after",z))}function C(c,d,f){"after"==d?r():E();var k=d+"End";p(c,function(b,aa){var h=function(){a:{var b=d+"Complete",a=c[aa];for(a[b]=!0,(a[k]||q)(),a=0;a<c.length;a++)if(!c[a][b])break a;f()}};("before"!=d||"enter"!=a&&"move"!=a)&&b[d]?b[k]=u?b[d](e,g,h):b[d](e,h):h()})}function w(c){e.triggerHandler("$animate:"+c,{event:a,className:g})}function E(){y(function(){w("before")},0,!1)}function r(){y(function(){w("after")},0,!1)}function v(){y(function(){w("close"),m&&m()},0,!1)}function n(){n.hasBeenRun||(n.hasBeenRun=!0,k())}function z(){if(!z.hasBeenRun){z.hasBeenRun=!0;var a=e.data(l);a&&(u?A(e):(a.closeAnimationTimeout=y(function(){A(e)},0,!1),e.data(l,a))),v()}}var s,x,G=d(e);if(G&&(s=G.className,x=s+" "+g),G&&L(x)){x=(" "+x).replace(/\s+/g,"."),c||(c=f?f.parent():e.parent()),x=I(x);var u="addClass"==a||"removeClass"==a;if(f=e.data(l)||{},ba(e,c)||0===x.length)n(),E(),r(),z();else{var D=[];u&&(f.disabled||f.running&&f.structural)||p(x,function(c){if(!c.allowCancel||c.allowCancel(e,a,g)){var d=c[a];"leave"==a?(c=d,d=null):c=c["before"+a.charAt(0).toUpperCase()+a.substr(1)],D.push({before:c,after:d})}}),0===D.length?(n(),E(),r(),v()):(c=" "+s+" ",f.running&&(y.cancel(f.closeAnimationTimeout),A(e),J(f.animations),x=(s=u&&!f.structural)&&f.className==g&&a!=f.event,f.beforeComplete||x?(f.done||q)(!0):s&&(c="removeClass"==f.event?c.replace(" "+f.className+" "," "):c+f.className+" ")),s=" "+g+" ","addClass"==a&&0<=c.indexOf(s)||"removeClass"==a&&-1==c.indexOf(s)?(n(),E(),r(),v()):(e.addClass(K),e.data(l,{running:!0,event:a,className:g,structural:!u,animations:D,done:t}),C(D,"before",t)))}}else n(),E(),r(),z()}function Q(a){a=d(a),a&&p(a.querySelectorAll("."+K),function(a){a=k.element(a);var e=a.data(l);e&&(J(e.animations),A(a))})}function J(a){p(a,function(a){a.beforeComplete||(a.beforeEnd||q)(!0),a.afterComplete||(a.afterEnd||q)(!0)})}function A(a){d(a)==d(H)?m.disabled||(m.running=!1,m.structural=!1):(a.removeClass(K),a.removeData(l))}function ba(a,g){if(m.disabled)return!0;if(d(a)==d(H))return m.disabled||m.running;do{if(0===g.length)break;var e=d(g)==d(H),c=e?m:g.data(l),c=c&&(!!c.disabled||!!c.running);if(e||c)return c;if(e)break}while(g=g.parent());return!0}H.data(l,m),w.$$postDigest(function(){w.$$postDigest(function(){m.running=!1})});var M=B.classNameFilter(),L=M?function(a){return M.test(a)}:function(){return!0};return{enter:function(a,d,e,c){this.enabled(!1,a),C.enter(a,d,e),w.$$postDigest(function(){r("enter","ng-enter",a,d,e,q,c)})},leave:function(a,d){Q(a),this.enabled(!1,a),w.$$postDigest(function(){r("leave","ng-leave",a,null,null,function(){C.leave(a)},d)})},move:function(a,d,e,c){Q(a),this.enabled(!1,a),C.move(a,d,e),w.$$postDigest(function(){r("move","ng-move",a,d,e,q,c)})},addClass:function(a,d,e){r("addClass",d,a,null,null,function(){C.addClass(a,d)},e)},removeClass:function(a,d,e){r("removeClass",d,a,null,null,function(){C.removeClass(a,d)},e)},enabled:function(a,d){switch(arguments.length){case 2:if(a)A(d);else{var e=d.data(l)||{};e.disabled=!0,d.data(l,e)}break;case 1:m.disabled=!a;break;default:a=!m.disabled}return!!a}}}]),B.register("",["$window","$sniffer","$timeout","$$animateReflow",function(m,l,B,H){function y(b,a){O&&O(),U.push(a);var h=d(b);b=k.element(h),V.push(b);var h=b.data(n),c=h.stagger,c=h.itemIndex*(Math.max(c.animationDelay,c.transitionDelay)||0);P=Math.max(P,(c+(h.maxDelay+h.maxDuration)*s)*x),h.animationCount=G,O=H(function(){p(U,function(b){b()});var b=[],a=G;p(V,function(a){b.push(a)}),B(function(){w(b,a),b=null},P,!1),U=[],V=[],O=null,u={},P=0,G++})}function w(b,a){p(b,function(b){(b=b.data(n))&&b.animationCount==a&&(b.closeAnimationFn||q)()})}function N(b,a){var h=a?u[a]:null;if(!h){var g,n,l,r,d=0,c=0,e=0,k=0;p(b,function(b){if(b.nodeType==X){b=m.getComputedStyle(b)||{},l=b[f+Y],d=Math.max(I(l),d),r=b[f+W],g=b[f+E],c=Math.max(I(g),c),n=b[F+E],k=Math.max(I(n),k);var a=I(b[F+Y]);a>0&&(a*=parseInt(b[F+R],10)||1),e=Math.max(a,e)}}),h={total:0,transitionPropertyStyle:r,transitionDurationStyle:l,transitionDelayStyle:g,transitionDelay:c,transitionDuration:d,animationDelayStyle:n,animationDelay:k,animationDuration:e},a&&(u[a]=h)}return h}function I(b){var a=0;return b=k.isString(b)?b.split(/\s*,\s*/):[],p(b,function(b){a=Math.max(parseFloat(b)||0,a)}),a}function r(b){var a=b.parent(),h=a.data(Z);return h||(a.data(Z,++D),h=D),h+"-"+d(b).className}function Q(b,a,h){var c=r(b),e=c+" "+a,k={},g=u[e]?++u[e].total:0;if(g>0){var l=a+"-stagger",k=c+" "+l;(c=!u[k])&&b.addClass(l),k=N(b,k),c&&b.removeClass(l)}if(h=h||function(b){return b()},b.addClass(a),h=h(function(){return N(b,e)}),l=Math.max(h.transitionDelay,h.animationDelay),c=Math.max(h.transitionDuration,h.animationDuration),0===c)return b.removeClass(a),!1;var m="";return 0<h.transitionDuration?d(b).style[f+W]="none":d(b).style[F]="none 0s",p(a.split(" "),function(b,a){m+=(a>0?" ":"")+b+"-active"}),b.data(n,{className:a,activeClassName:m,maxDuration:c,maxDelay:l,classes:a+" "+m,timings:h,stagger:k,itemIndex:g}),!0}function J(b){var a=f+W;b=d(b),b.style[a]&&0<b.style[a].length&&(b.style[a]="")}function A(b){var a=F;b=d(b),b.style[a]&&0<b.style[a].length&&(b.style[a]="")}function K(b,a,h){function e(c){b.off(v,k),b.removeClass(r),c=b,c.removeClass(a),c.removeData(n),c=d(b);for(var h in s)c.style.removeProperty(s[h])}function k(b){b.stopPropagation();var a=b.originalEvent||b;b=a.$manualTimeStamp||a.timeStamp||Date.now(),a=parseFloat(a.elapsedTime.toFixed(z)),Math.max(b-w,0)>=u&&a>=p&&h()}var f=b.data(n),g=d(b);if(-1!=g.className.indexOf(a)&&f){var l=f.timings,m=f.stagger,p=f.maxDuration,r=f.activeClassName,u=Math.max(l.transitionDelay,l.animationDelay)*x,w=Date.now(),v=T+" "+S,t=f.itemIndex,q="",s=[];if(0<l.transitionDuration){var y=l.transitionPropertyStyle;-1==y.indexOf("all")&&(q+=c+"transition-property: "+y+";",q+=c+"transition-duration: "+l.transitionDurationStyle+";",s.push(c+"transition-property"),s.push(c+"transition-duration"))}return t>0&&(0<m.transitionDelay&&0===m.transitionDuration&&(q+=c+"transition-delay: "+M(l.transitionDelayStyle,m.transitionDelay,t)+"; ",s.push(c+"transition-delay")),0<m.animationDelay&&0===m.animationDuration&&(q+=c+"animation-delay: "+M(l.animationDelayStyle,m.animationDelay,t)+"; ",s.push(c+"animation-delay"))),0<s.length&&(l=g.getAttribute("style")||"",g.setAttribute("style",l+" "+q)),b.on(v,k),b.addClass(r),f.closeAnimationFn=function(){e(),h()},e}h()}function M(b,a,c){var d="";return p(b.split(","),function(b,e){d+=(e>0?",":"")+(c*a+parseInt(b,10))+"s"}),d}function L(b,a,c){return Q(b,a,c)?function(c){c&&(b.removeClass(a),b.removeData(n))}:void 0}function a(a,c,d){return a.data(n)?K(a,c,d):(a.removeClass(c),a.removeData(n),void d())}function g(b,c,d){var e=L(b,c);if(e){var f=e;return y(b,function(){J(b),A(b),f=a(b,c,d)}),function(a){(f||q)(a)}}d()}function e(a,c){var d="";return a=k.isArray(a)?a:a.split(/\s+/),p(a,function(a,b){a&&0<a.length&&(d+=(b>0?" ":"")+a+c)}),d}var f,S,F,T,c="";v.ontransitionend===t&&v.onwebkittransitionend!==t?(c="-webkit-",f="WebkitTransition",S="webkitTransitionEnd transitionend"):(f="transition",S="transitionend"),v.onanimationend===t&&v.onwebkitanimationend!==t?(c="-webkit-",F="WebkitAnimation",T="webkitAnimationEnd animationend"):(F="animation",T="animationend");var O,Y="Duration",W="Property",E="Delay",R="IterationCount",Z="$$ngAnimateKey",n="$$ngAnimateCSS3Data",z=3,s=1.5,x=1e3,G=0,u={},D=0,U=[],V=[],P=0;return{allowCancel:function(a,c,h){var f=(a.data(n)||{}).classes;if(!f||0<=["enter","leave","move"].indexOf(c))return!0;var l=a.parent(),g=k.element(d(a).cloneNode());return g.attr("style","position:absolute; top:-9999px; left:-9999px"),g.removeAttr("id"),g.empty(),p(f.split(" "),function(a){g.removeClass(a)}),g.addClass(e(h,"addClass"==c?"-add":"-remove")),l.append(g),a=N(g),g.remove(),0<Math.max(a.transitionDuration,a.animationDuration)},enter:function(a,c){return g(a,"ng-enter",c)},leave:function(a,c){return g(a,"ng-leave",c)},move:function(a,c){return g(a,"ng-move",c)},beforeAddClass:function(a,c,d){var f=L(a,e(c,"-add"),function(d){return a.addClass(c),d=d(),a.removeClass(c),d});return f?(y(a,function(){J(a),A(a),d()}),f):void d()},addClass:function(b,c,d){return a(b,e(c,"-add"),d)},beforeRemoveClass:function(a,c,d){var f=L(a,e(c,"-remove"),function(d){var e=a.attr("class");return a.removeClass(c),d=d(),a.attr("class",e),d});return f?(y(a,function(){J(a),A(a),d()}),f):void d()},removeClass:function(b,c,d){return a(b,e(c,"-remove"),d)}}}])}])}(window,window.angular),function(h,e,A){"use strict";function u(w,q,k){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(a,c,b,f,n){function y(){l&&(l.$destroy(),l=null),g&&(k.leave(g),g=null)}function v(){var b=w.current&&w.current.locals;if(e.isDefined(b&&b.$template)){var b=a.$new(),f=w.current;g=n(b,function(d){k.enter(d,null,g||c,function(){!e.isDefined(t)||t&&!a.$eval(t)||q()}),y()}),l=f.scope=b,l.$emit("$viewContentLoaded"),l.$eval(h)}else y()}var l,g,t=b.autoscroll,h=b.onload||"";a.$on("$routeChangeSuccess",v),v()}}}function z(e,h,k){return{restrict:"ECA",priority:-400,link:function(a,c){var b=k.current,f=b.locals;c.html(f.$template);var n=e(c.contents());b.controller&&(f.$scope=a,f=h(b.controller,f),b.controllerAs&&(a[b.controllerAs]=f),c.data("$ngControllerController",f),c.children().data("$ngControllerController",f)),n(a)}}}h=e.module("ngRoute",["ng"]).provider("$route",function(){function h(a,c){return e.extend(new(e.extend(function(){},{prototype:a})),c)}function q(a,e){var b=e.caseInsensitiveMatch,f={originalPath:a,regexp:a},h=f.keys=[];return a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(a,e,b,c){return a="?"===c?c:null,c="*"===c?c:null,h.push({name:b,optional:!!a}),e=e||"",""+(a?"":e)+"(?:"+(a?e:"")+(c&&"(.+?)"||"([^/]+)")+(a||"")+")"+(a||"")}).replace(/([\/$\*])/g,"\\$1"),f.regexp=RegExp("^"+a+"$",b?"i":""),f}var k={};this.when=function(a,c){if(k[a]=e.extend({reloadOnSearch:!0},c,a&&q(a,c)),a){var b="/"==a[a.length-1]?a.substr(0,a.length-1):a+"/";k[b]=e.extend({redirectTo:a},q(b,c))}return this},this.otherwise=function(a){return this.when(null,a),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$http","$templateCache","$sce",function(a,c,b,f,n,q,v,l){function g(){var d=t(),m=r.current;d&&m&&d.$$route===m.$$route&&e.equals(d.pathParams,m.pathParams)&&!d.reloadOnSearch&&!x?(m.params=d.params,e.copy(m.params,b),a.$broadcast("$routeUpdate",m)):(d||m)&&(x=!1,a.$broadcast("$routeChangeStart",d,m),(r.current=d)&&d.redirectTo&&(e.isString(d.redirectTo)?c.path(u(d.redirectTo,d.params)).search(d.params).replace():c.url(d.redirectTo(d.pathParams,c.path(),c.search())).replace()),f.when(d).then(function(){if(d){var c,b,a=e.extend({},d.resolve);return e.forEach(a,function(d,c){a[c]=e.isString(d)?n.get(d):n.invoke(d)}),e.isDefined(c=d.template)?e.isFunction(c)&&(c=c(d.params)):e.isDefined(b=d.templateUrl)&&(e.isFunction(b)&&(b=b(d.params)),b=l.getTrustedResourceUrl(b),e.isDefined(b)&&(d.loadedTemplateUrl=b,c=q.get(b,{cache:v}).then(function(a){return a.data}))),e.isDefined(c)&&(a.$template=c),f.all(a)}}).then(function(c){d==r.current&&(d&&(d.locals=c,e.copy(d.params,b)),a.$broadcast("$routeChangeSuccess",d,m))},function(c){d==r.current&&a.$broadcast("$routeChangeError",d,m,c)}))}function t(){var a,b;return e.forEach(k,function(f,k){var p;if(p=!b){var s=c.path();p=f.keys;var l={};if(f.regexp)if(s=f.regexp.exec(s)){for(var g=1,q=s.length;q>g;++g){var n=p[g-1],r="string"==typeof s[g]?decodeURIComponent(s[g]):s[g];n&&r&&(l[n.name]=r)}p=l}else p=null;else p=null;p=a=p}p&&(b=h(f,{params:e.extend({},c.search(),a),pathParams:a}),b.$$route=f)}),b||k[null]&&h(k[null],{params:{},pathParams:{}})}function u(a,c){var b=[];return e.forEach((a||"").split(":"),function(a,d){if(0===d)b.push(a);else{var e=a.match(/(\w+)(.*)/),f=e[1];b.push(c[f]),b.push(e[2]||""),delete c[f]}}),b.join("")}var x=!1,r={routes:k,reload:function(){x=!0,a.$evalAsync(g)}};return a.$on("$locationChangeSuccess",g),r}]}),h.provider("$routeParams",function(){this.$get=function(){return{}}}),h.directive("ngView",u),h.directive("ngView",z),u.$inject=["$route","$anchorScroll","$animate"],z.$inject=["$compile","$controller","$route"]}(window,window.angular),function(y,v,z){"use strict";function t(g,a,b){q.directive(g,["$parse","$swipe",function(l,n){var r=75,h=.3,d=30;return function(p,m,k){function e(e){if(!u)return!1;var c=Math.abs(e.y-u.y);return e=(e.x-u.x)*a,f&&r>c&&e>0&&e>d&&h>c/e}var u,f,c=l(k[g]);n.bind(m,{start:function(e,c){u=e,f=!0},cancel:function(e){f=!1},end:function(a,f){e(a)&&p.$apply(function(){m.triggerHandler(b),c(p,{$event:f})})}})}}])}var q=v.module("ngTouch",[]);q.factory("$swipe",[function(){function g(a){var b=a.touches&&a.touches.length?a.touches:[a];return a=a.changedTouches&&a.changedTouches[0]||a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]||b[0].originalEvent||b[0],{x:a.clientX,y:a.clientY}}return{bind:function(a,b){var l,n,r,h,d=!1;a.on("touchstart mousedown",function(a){r=g(a),d=!0,n=l=0,h=r,b.start&&b.start(r,a)}),a.on("touchcancel",function(a){d=!1,b.cancel&&b.cancel(a)}),a.on("touchmove mousemove",function(a){if(d&&r){var m=g(a);l+=Math.abs(m.x-h.x),n+=Math.abs(m.y-h.y),h=m,10>l&&10>n||(n>l?(d=!1,b.cancel&&b.cancel(a)):(a.preventDefault(),b.move&&b.move(m,a)))}}),a.on("touchend mouseup",function(a){d&&(d=!1,b.end&&b.end(g(a),a))})}}}]),q.config(["$provide",function(g){g.decorator("ngClickDirective",["$delegate",function(a){return a.shift(),a}])}]),q.directive("ngClick",["$parse","$timeout","$rootElement",function(g,a,b){function l(a,c,b){for(var f=0;f<a.length;f+=2)if(Math.abs(a[f]-c)<d&&Math.abs(a[f+1]-b)<d)return a.splice(f,f+2),!0;return!1}function n(a){if(!(Date.now()-m>h)){var c=a.touches&&a.touches.length?a.touches:[a],b=c[0].clientX,c=c[0].clientY;1>b&&1>c||l(k,b,c)||(a.stopPropagation(),a.preventDefault(),a.target&&a.target.blur())}}function r(b){b=b.touches&&b.touches.length?b.touches:[b];var c=b[0].clientX,d=b[0].clientY;k.push(c,d),a(function(){for(var a=0;a<k.length;a+=2)if(k[a]==c&&k[a+1]==d){k.splice(a,a+2);break}},h,!1)}var m,k,h=2500,d=25,p="ng-click-active";return function(a,c,d){function f(){q=!1,c.removeClass(p)}var s,t,w,x,h=g(d.ngClick),q=!1;c.on("touchstart",function(a){q=!0,s=a.target?a.target:a.srcElement,3==s.nodeType&&(s=s.parentNode),c.addClass(p),t=Date.now(),a=a.touches&&a.touches.length?a.touches:[a],a=a[0].originalEvent||a[0],w=a.clientX,x=a.clientY}),c.on("touchmove",function(a){f()}),c.on("touchcancel",function(a){f()}),c.on("touchend",function(a){var h=Date.now()-t,e=a.changedTouches&&a.changedTouches.length?a.changedTouches:a.touches&&a.touches.length?a.touches:[a],g=e[0].originalEvent||e[0],e=g.clientX,g=g.clientY,p=Math.sqrt(Math.pow(e-w,2)+Math.pow(g-x,2));q&&750>h&&12>p&&(k||(b[0].addEventListener("click",n,!0),b[0].addEventListener("touchstart",r,!0),k=[]),m=Date.now(),l(k,e,g),s&&s.blur(),v.isDefined(d.disabled)&&!1!==d.disabled||c.triggerHandler("click",[a])),f()}),c.onclick=function(a){},c.on("click",function(b,c){a.$apply(function(){h(a,{$event:c||b})})}),c.on("mousedown",function(a){c.addClass(p)}),c.on("mousemove mouseup",function(a){c.removeClass(p)})}}]),t("ngSwipeLeft",-1,"swipeleft"),t("ngSwipeRight",1,"swiperight")}(window,window.angular),function(){"use strict";function d(a){return function(){var b,c=arguments[0],c="["+(a?a+":":"")+c+"] http://errors.angularjs.org/1.2.10/"+(a?a+"/":"")+c;for(b=1;b<arguments.length;b++)c=c+(1==b?"?":"&")+"p"+(b-1)+"="+encodeURIComponent("function"==typeof arguments[b]?arguments[b].toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof arguments[b]?"undefined":"string"!=typeof arguments[b]?JSON.stringify(arguments[b]):arguments[b]);return Error(c)}}!function(a){var c=d("$injector"),b=d("ng");return a=a.angular||(a.angular={}),a.$$minErr=a.$$minErr||d,a.module||(a.module=function(){var a={};return function(e,d,f){if("hasOwnProperty"===e)throw b("badname","module");return d&&a.hasOwnProperty(e)&&(a[e]=null),a[e]||(a[e]=function(){function a(c,d,e){return function(){return b[e||"push"]([c,d,arguments]),g}}if(!d)throw c("nomod",e);var b=[],h=[],k=a("$injector","invoke"),g={_invokeQueue:b,_runBlocks:h,requires:d,name:e,provider:a("$provide","provider"),factory:a("$provide","factory"),service:a("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),animation:a("$animateProvider","register"),filter:a("$filterProvider","register"),controller:a("$controllerProvider","register"),directive:a("$compileProvider","directive"),config:k,run:function(a){return h.push(a),this}};return f&&k(f),g}())}}())}(window)}(window),function(window,angular,undefined){"use strict";function isValidDottedPath(path){return null!=path&&""!==path&&"hasOwnProperty"!==path&&MEMBER_NAME_REGEX.test("."+path)}function lookupDottedPath(obj,path){if(!isValidDottedPath(path))throw $resourceMinErr("badmember",'Dotted member path "@{0}" is invalid.',path);for(var keys=path.split("."),i=0,ii=keys.length;ii>i&&obj!==undefined;i++){var key=keys[i];obj=null!==obj?obj[key]:undefined}return obj}function shallowClearAndCopy(src,dst){dst=dst||{},angular.forEach(dst,function(value,key){delete dst[key]});for(var key in src)src.hasOwnProperty(key)&&"$"!==key.charAt(0)&&"$"!==key.charAt(1)&&(dst[key]=src[key]);return dst}var $resourceMinErr=angular.$$minErr("$resource"),MEMBER_NAME_REGEX=/^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/;angular.module("ngResource",["ng"]).factory("$resource",["$http","$q",function($http,$q){function encodeUriSegment(val){return encodeUriQuery(val,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,pctEncodeSpaces?"%20":"+")}function Route(template,defaults){this.template=template,this.defaults=defaults||{},this.urlParams={}}function resourceFactory(url,paramDefaults,actions){function extractParams(data,actionParams){var ids={};return actionParams=extend({},paramDefaults,actionParams),forEach(actionParams,function(value,key){isFunction(value)&&(value=value()),ids[key]=value&&value.charAt&&"@"==value.charAt(0)?lookupDottedPath(data,value.substr(1)):value}),ids}function defaultResponseInterceptor(response){return response.resource}function Resource(value){shallowClearAndCopy(value||{},this)}var route=new Route(url);return actions=extend({},DEFAULT_ACTIONS,actions),forEach(actions,function(action,name){var hasBody=/^(POST|PUT|PATCH)$/i.test(action.method);Resource[name]=function(a1,a2,a3,a4){var data,success,error,params={};switch(arguments.length){case 4:error=a4,success=a3;case 3:case 2:if(!isFunction(a2)){params=a1,data=a2,success=a3;break}if(isFunction(a1)){success=a1,error=a2;break}success=a2,error=a3;case 1:isFunction(a1)?success=a1:hasBody?data=a1:params=a1;break;case 0:break;default:throw $resourceMinErr("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var isInstanceCall=this instanceof Resource,value=isInstanceCall?data:action.isArray?[]:new Resource(data),httpConfig={},responseInterceptor=action.interceptor&&action.interceptor.response||defaultResponseInterceptor,responseErrorInterceptor=action.interceptor&&action.interceptor.responseError||undefined;forEach(action,function(value,key){"params"!=key&&"isArray"!=key&&"interceptor"!=key&&(httpConfig[key]=copy(value))}),action.action?(hasBody&&(httpConfig.data=params),route.setUrlParams(httpConfig,extend({},extractParams(data,action.params||{})),action.url)):(hasBody&&(httpConfig.data=data),route.setUrlParams(httpConfig,extend({},extractParams(data,action.params||{}),params),action.url));var promise=$http(httpConfig).then(function(response){var data=response.data,promise=value.$promise;if(data){if(angular.isArray(data)!==!!action.isArray)throw $resourceMinErr("badcfg","Error in resource configuration. Expected response to contain an {0} but got an {1}",action.isArray?"array":"object",angular.isArray(data)?"array":"object");if(action.extend){if(action.extendParameter){var tmp={};tmp[action.extendParameter]=data,data=tmp}extend(value,data),value.$promise=promise}else action.isArray?(value.length=0,forEach(data,function(item){value.push(new Resource(item))})):action.action?value.$promise=promise:(shallowClearAndCopy(data,value),value.$promise=promise)}return value.$resolved=!0,response.resource=value,response},function(response){return value.$resolved=!0,(error||noop)(response),$q.reject(response)});return promise=promise.then(function(response){var value=responseInterceptor(response);return(success||noop)(value,response.headers),value},responseErrorInterceptor),isInstanceCall?promise:(value.$promise=promise,value.$resolved=!1,value)},Resource.prototype["$"+name]=function(params,success,error){isFunction(params)&&(error=success,success=params,params={});var result=Resource[name].call(this,params,this,success,error);return result.$promise||result}}),Resource.bind=function(additionalParamDefaults){return resourceFactory(url,extend({},paramDefaults,additionalParamDefaults),actions)},Resource}var DEFAULT_ACTIONS={get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}},noop=angular.noop,forEach=angular.forEach,extend=angular.extend,copy=angular.copy,isFunction=angular.isFunction;return Route.prototype={setUrlParams:function(config,params,actionUrl){var val,encodedVal,self=this,url=actionUrl||self.template,urlParams=self.urlParams={};forEach(url.split(/\W/),function(param){if("hasOwnProperty"===param)throw $resourceMinErr("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(param)&&param&&new RegExp("(^|[^\\\\]):"+param+"(\\W|$)").test(url)&&(urlParams[param]=!0)}),url=url.replace(/\\:/g,":"),params=params||{},forEach(self.urlParams,function(_,urlParam){val=params.hasOwnProperty(urlParam)?params[urlParam]:self.defaults[urlParam],angular.isDefined(val)&&null!==val?(encodedVal=encodeUriSegment(val),url=url.replace(new RegExp(":"+urlParam+"(\\W|$)","g"),encodedVal+"$1")):url=url.replace(new RegExp("(/?):"+urlParam+"(\\W|$)","g"),function(match,leadingSlashes,tail){return"/"==tail.charAt(0)?tail:leadingSlashes+tail})}),url=url.replace(/\/+$/,"")||"/",url=url.replace(/\/\.(?=\w+($|\?))/,"."),config.url=url.replace(/\/\\\./,"/."),forEach(params,function(value,key){self.urlParams[key]||(config.params=config.params||{},config.params[key]=value)})}},resourceFactory}])}(window,window.angular),angular.module("ngLocale",[],["$provide",function($provide){var PLURAL_CATEGORY={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};$provide.value("$locale",{DATETIME_FORMATS:{AMPMS:{0:"AM",1:"PM"},DAY:{0:"dimanche",1:"lundi",2:"mardi",3:"mercredi",4:"jeudi",5:"vendredi",6:"samedi"},MONTH:{0:"janvier",1:"février",2:"mars",3:"avril",4:"mai",5:"juin",6:"juillet",7:"août",8:"septembre",9:"octobre",10:"novembre",11:"décembre"},SHORTDAY:{0:"dim.",1:"lun.",2:"mar.",3:"mer.",4:"jeu.",5:"ven.",6:"sam."},SHORTMONTH:{0:"janv.",1:"févr.",2:"mars",3:"avr.",4:"mai",5:"juin",6:"juil.",7:"août",8:"sept.",9:"oct.",10:"nov.",11:"déc."},fullDate:"EEEE d MMMM y",longDate:"d MMMM y",medium:"d MMM y HH:mm:ss",mediumDate:"d MMM y",mediumTime:"HH:mm:ss","short":"dd/MM/yy HH:mm",shortDate:"dd/MM/yy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"€",DECIMAL_SEP:",",GROUP_SEP:" ",PATTERNS:{0:{gSize:3,lgSize:3,macFrac:0,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},1:{gSize:3,lgSize:3,macFrac:0,maxFrac:2,minFrac:2,minInt:1,negPre:"(",negSuf:" ¤)",posPre:"",posSuf:" ¤"}}},id:"fr-fr",pluralCat:function(n){return n>=0&&2>=n&&2!=n?PLURAL_CATEGORY.ONE:PLURAL_CATEGORY.OTHER}})}]),function(window,angular,undefined){"use strict";function $SanitizeProvider(){this.$get=["$$sanitizeUri",function($$sanitizeUri){return function(html){var buf=[];return htmlParser(html,htmlSanitizeWriter(buf,function(uri,isImage){return!/^unsafe/.test($$sanitizeUri(uri,isImage))})),buf.join("")}}]}function sanitizeText(chars){var buf=[],writer=htmlSanitizeWriter(buf,angular.noop);return writer.chars(chars),buf.join("")}function makeMap(str){var i,obj={},items=str.split(",");for(i=0;i<items.length;i++)obj[items[i]]=!0;return obj}function htmlParser(html,handler){function parseStartTag(tag,tagName,rest,unary){if(tagName=angular.lowercase(tagName),blockElements[tagName])for(;stack.last()&&inlineElements[stack.last()];)parseEndTag("",stack.last());optionalEndTagElements[tagName]&&stack.last()==tagName&&parseEndTag("",tagName),unary=voidElements[tagName]||!!unary,unary||stack.push(tagName);var attrs={};rest.replace(ATTR_REGEXP,function(match,name,doubleQuotedValue,singleQuotedValue,unquotedValue){var value=doubleQuotedValue||singleQuotedValue||unquotedValue||"";attrs[name]=decodeEntities(value)}),handler.start&&handler.start(tagName,attrs,unary)}function parseEndTag(tag,tagName){var i,pos=0;if(tagName=angular.lowercase(tagName))for(pos=stack.length-1;pos>=0&&stack[pos]!=tagName;pos--);if(pos>=0){for(i=stack.length-1;i>=pos;i--)handler.end&&handler.end(stack[i]);stack.length=pos}}var index,chars,match,stack=[],last=html;for(stack.last=function(){return stack[stack.length-1]};html;){if(chars=!0,stack.last()&&specialElements[stack.last()])html=html.replace(new RegExp("(.*)<\\s*\\/\\s*"+stack.last()+"[^>]*>","i"),function(all,text){return text=text.replace(COMMENT_REGEXP,"$1").replace(CDATA_REGEXP,"$1"),handler.chars&&handler.chars(decodeEntities(text)),""}),parseEndTag("",stack.last());else if(0===html.indexOf("<!--")?(index=html.indexOf("--",4),index>=0&&html.lastIndexOf("-->",index)===index&&(handler.comment&&handler.comment(html.substring(4,index)),html=html.substring(index+3),chars=!1)):DOCTYPE_REGEXP.test(html)?(match=html.match(DOCTYPE_REGEXP),match&&(html=html.replace(match[0],""),chars=!1)):BEGING_END_TAGE_REGEXP.test(html)?(match=html.match(END_TAG_REGEXP),match&&(html=html.substring(match[0].length),match[0].replace(END_TAG_REGEXP,parseEndTag),chars=!1)):BEGIN_TAG_REGEXP.test(html)&&(match=html.match(START_TAG_REGEXP),match&&(html=html.substring(match[0].length),match[0].replace(START_TAG_REGEXP,parseStartTag),chars=!1)),chars){index=html.indexOf("<");var text=0>index?html:html.substring(0,index);html=0>index?"":html.substring(index),handler.chars&&handler.chars(decodeEntities(text))}if(html==last)throw $sanitizeMinErr("badparse","The sanitizer was unable to parse the following block of html: {0}",html);last=html}parseEndTag()}function decodeEntities(value){if(!value)return"";var parts=spaceRe.exec(value),spaceBefore=parts[1],spaceAfter=parts[3],content=parts[2];return content&&(hiddenPre.innerHTML=content.replace(/</g,"&lt;"),content="textContent"in hiddenPre?hiddenPre.textContent:hiddenPre.innerText),spaceBefore+content+spaceAfter}function encodeEntities(value){return value.replace(/&/g,"&amp;").replace(NON_ALPHANUMERIC_REGEXP,function(value){return"&#"+value.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function htmlSanitizeWriter(buf,uriValidator){var ignore=!1,out=angular.bind(buf,buf.push);return{start:function(tag,attrs,unary){tag=angular.lowercase(tag),!ignore&&specialElements[tag]&&(ignore=tag),ignore||validElements[tag]!==!0||(out("<"),out(tag),angular.forEach(attrs,function(value,key){var lkey=angular.lowercase(key),isImage="img"===tag&&"src"===lkey||"background"===lkey;validAttrs[lkey]!==!0||uriAttrs[lkey]===!0&&!uriValidator(value,isImage)||(out(" "),out(key),out('="'),out(encodeEntities(value)),out('"'))}),out(unary?"/>":">"))},end:function(tag){tag=angular.lowercase(tag),
ignore||validElements[tag]!==!0||(out("</"),out(tag),out(">")),tag==ignore&&(ignore=!1)},chars:function(chars){ignore||out(encodeEntities(chars))}}}var $sanitizeMinErr=angular.$$minErr("$sanitize"),START_TAG_REGEXP=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,END_TAG_REGEXP=/^<\s*\/\s*([\w:-]+)[^>]*>/,ATTR_REGEXP=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,BEGIN_TAG_REGEXP=/^</,BEGING_END_TAGE_REGEXP=/^<\s*\//,COMMENT_REGEXP=/<!--(.*?)-->/g,DOCTYPE_REGEXP=/<!DOCTYPE([^>]*?)>/i,CDATA_REGEXP=/<!\[CDATA\[(.*?)]]>/g,NON_ALPHANUMERIC_REGEXP=/([^\#-~| |!])/g,voidElements=makeMap("area,br,col,hr,img,wbr"),optionalEndTagBlockElements=makeMap("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),optionalEndTagInlineElements=makeMap("rp,rt"),optionalEndTagElements=angular.extend({},optionalEndTagInlineElements,optionalEndTagBlockElements),blockElements=angular.extend({},optionalEndTagBlockElements,makeMap("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),inlineElements=angular.extend({},optionalEndTagInlineElements,makeMap("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),specialElements=makeMap("script,style"),validElements=angular.extend({},voidElements,blockElements,inlineElements,optionalEndTagElements),uriAttrs=makeMap("background,cite,href,longdesc,src,usemap"),validAttrs=angular.extend({},uriAttrs,makeMap("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width")),hiddenPre=document.createElement("pre"),spaceRe=/^(\s*)([\s\S]*?)(\s*)$/;angular.module("ngSanitize",[]).provider("$sanitize",$SanitizeProvider),angular.module("ngSanitize").filter("linky",["$sanitize",function($sanitize){var LINKY_URL_REGEXP=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>]/,MAILTO_REGEXP=/^mailto:/;return function(text,target){function addText(text){text&&html.push(sanitizeText(text))}function addLink(url,text){html.push("<a "),angular.isDefined(target)&&(html.push('target="'),html.push(target),html.push('" ')),html.push('href="'),html.push(url),html.push('">'),addText(text),html.push("</a>")}if(!text)return text;for(var match,url,i,raw=text,html=[];match=raw.match(LINKY_URL_REGEXP);)url=match[0],match[2]==match[3]&&(url="mailto:"+url),i=match.index,addText(raw.substr(0,i)),addLink(url,match[0].replace(MAILTO_REGEXP,"")),raw=raw.substring(i+match[0].length);return addText(raw),$sanitize(html.join(""))}}])}(window,window.angular),function(){"use strict";angular.module("localize",["ngSanitize"]).filter("escapeHTML",function(){var config={encReg:/[<>&"]/g,encMap:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"},encFunc:function(c){return config.encMap[c]}};return function(str){return String(str).replace(config.encReg,config.encFunc)}}).factory("localizeConfig",["$window",function($window){return{i18n:$window.i18n,observableAttrs:/^data-(?!ng-|localize)/}}]).factory("localize",["$filter","localizeConfig",function($filter,localizeConfig){var i18n=localizeConfig.i18n,escapeHTML=$filter("escapeHTML");return function(key,data,escape){var escapedData,func=i18n[key];return func?(escape&&(escapedData={},angular.forEach(data,function(value,key){escapedData[key]=escapeHTML(value)})),func(escapedData||data||{})):key}}]).filter("localize",["localize",function(localize){return localize}]).directive("localize",["$sanitize","$filter","localizeConfig",function($sanitize,$filter,localizeConfig){var i18n=localizeConfig.i18n,escapeHTML=$filter("escapeHTML");return function(scope,elm,attrs){var data,update,hasObservers,key=attrs.localize||elm.html(),func=i18n[key],isInput=/input|textarea/i.test(elm.prop("nodeName"));func?(isInput?update=function(){attrs.$set("placeholder",func(attrs))}:attrs.localize?update=function(){elm.text(func(attrs))}:(data={},update=function(key,value){key&&(data[key]=escapeHTML(value)),elm.html($sanitize(func(data)))}),angular.forEach(attrs.$attr,function(attr,normAttr){localizeConfig.observableAttrs.test(attr)&&(attrs.$observe(normAttr,isInput||attrs.localize?update:function(value){update(normAttr,value)}),hasObservers=!0)}),hasObservers||update()):attrs.localize&&(isInput?attrs.$set("placeholder",key):elm.text(key))}}]).factory("localizeFactory",["localizeConfig",function(localizeConfig){var i18n=localizeConfig.i18n;return function(){var directiveObj={link:function(scope,elm,attrs){var update,hasObservers,name=directiveObj.name,target=name.charAt(8).toLowerCase()+name.slice(9),key=attrs[name],func=i18n[key];func?(update=function(){attrs.$set(target,func(attrs))},angular.forEach(attrs.$attr,function(attr,normAttr){localizeConfig.observableAttrs.test(attr)&&(attrs.$observe(normAttr,update),hasObservers=!0)}),hasObservers||update()):attrs.$set(target,key)}};return directiveObj}}])}(),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a)if(void 0!==f.style[b])return a[b]}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(a){return{link:function(b,c,d){function e(b){function d(){j===e&&(j=void 0)}var e=a(c,b);return j&&j.cancel(),j=e,e.then(d,d),e}function f(){k?(k=!1,g()):(c.removeClass("collapse").addClass("collapsing"),e({height:c[0].scrollHeight+"px"}).then(g))}function g(){c.removeClass("collapsing"),c.addClass("collapse in"),c.css({height:"auto"})}function h(){k?(k=!1,i(),c.css({height:0})):(c.css({height:c[0].scrollHeight+"px"}),c[0].offsetWidth,c.removeClass("collapse in").addClass("collapsing"),e({height:0}).then(i))}function i(){c.removeClass("collapsing"),c.addClass("collapse")}var j,k=!0;b.$watch(d.collapse,function(a){a?h():f()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(b,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(a,b,c,d){d.addGroup(a),a.$watch("isOpen",function(b){b&&d.closeOthers(a)}),a.toggleOpen=function(){a.isDisabled||(a.isOpen=!a.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(a,b,c,d,e){d.setHeading(e(a,function(){}))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude]},function(a){a&&(b.html(""),b.append(a))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(a,b){a.closeable="close"in b}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(a,b,c){b.addClass("ng-binding").data("$binding",c.bindHtmlUnsafe),a.$watch(c.bindHtmlUnsafe,function(a){b.html(a||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){var e=d[0],f=d[1];f.$render=function(){b.toggleClass(e.activeClass,angular.equals(f.$modelValue,a.$eval(c.btnRadio)))},b.bind(e.toggleEvent,function(){var d=b.hasClass(e.activeClass);(!d||angular.isDefined(c.uncheckable))&&a.$apply(function(){f.$setViewValue(d?null:a.$eval(c.btnRadio)),f.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){var d=a.$eval(b);return angular.isDefined(d)?d:c}var h=d[0],i=d[1];i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.bind(h.toggleEvent,function(){a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition",function(a,b,c){function d(){e();var c=+a.interval;!isNaN(c)&&c>=0&&(g=b(f,c))}function e(){g&&(b.cancel(g),g=null)}function f(){h?(a.next(),d()):a.pause()}var g,h,i=this,j=i.slides=a.slides=[],k=-1;i.currentSlide=null;var l=!1;i.select=a.select=function(e,f){function g(){l||(i.currentSlide&&angular.isString(f)&&!a.noTransition&&e.$element?(e.$element.addClass(f),e.$element[0].offsetWidth,angular.forEach(j,function(a){angular.extend(a,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(e,{direction:f,active:!0,entering:!0}),angular.extend(i.currentSlide||{},{direction:f,leaving:!0}),a.$currentTransition=c(e.$element,{}),function(b,c){a.$currentTransition.then(function(){h(b,c)},function(){h(b,c)})}(e,i.currentSlide)):h(e,i.currentSlide),i.currentSlide=e,k=m,d())}function h(b,c){angular.extend(b,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(c||{},{direction:"",active:!1,leaving:!1,entering:!1}),a.$currentTransition=null}var m=j.indexOf(e);void 0===f&&(f=m>k?"next":"prev"),e&&e!==i.currentSlide&&(a.$currentTransition?(a.$currentTransition.cancel(),b(g)):g())},a.$on("$destroy",function(){l=!0}),i.indexOfSlide=function(a){return j.indexOf(a)},a.next=function(){var b=(k+1)%j.length;return a.$currentTransition?void 0:i.select(j[b],"next")},a.prev=function(){var b=0>k-1?j.length-1:k-1;return a.$currentTransition?void 0:i.select(j[b],"prev")},a.isActive=function(a){return i.currentSlide===a},a.$watch("interval",d),a.$on("$destroy",e),a.play=function(){h||(h=!0,d())},a.pause=function(){a.noPause||(h=!1,e())},i.addSlide=function(b,c){b.$element=c,j.push(b),1===j.length||b.active?(i.select(j[j.length-1]),1==j.length&&a.play()):b.active=!1},i.removeSlide=function(a){var b=j.indexOf(a);j.splice(b,1),j.length>0&&a.active?i.select(b>=j.length?j[b-1]:j[b]):k>b&&k--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?"},link:function(a,b,c,d){d.addSlide(a,b),a.$on("$destroy",function(){d.removeSlide(a)}),a.$watch("active",function(b){b&&d.select(a)})}}}),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(a,b){function c(a,b,c){return 1===b&&c>28?29===c&&(a%4===0&&a%100!==0||a%400===0):3===b||5===b||8===b||10===b?31>c:!0}this.parsers={};var d={yyyy:{regex:"\\d{4}",apply:function(a){this.year=+a}},yy:{regex:"\\d{2}",apply:function(a){this.year=+a+2e3}},y:{regex:"\\d{1,4}",apply:function(a){this.year=+a}},MMMM:{regex:a.DATETIME_FORMATS.MONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.MONTH.indexOf(b)}},MMM:{regex:a.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.SHORTMONTH.indexOf(b)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(a){this.month=a-1}},M:{regex:"[1-9]|1[0-2]",apply:function(a){this.month=a-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},EEEE:{regex:a.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:a.DATETIME_FORMATS.SHORTDAY.join("|")}};this.createParser=function(a){var c=[],e=a.split("");return angular.forEach(d,function(b,d){var f=a.indexOf(d);if(f>-1){a=a.split(""),e[f]="("+b.regex+")",a[f]="$";for(var g=f+1,h=f+d.length;h>g;g++)e[g]="",a[g]="$";a=a.join(""),c.push({index:f,apply:b.apply})}}),{regex:new RegExp("^"+e.join("")+"$"),map:b(c,"index")}},this.parse=function(b,d){if(!angular.isString(b))return b;d=a.DATETIME_FORMATS[d]||d,this.parsers[d]||(this.parsers[d]=this.createParser(d));var e=this.parsers[d],f=e.regex,g=e.map,h=b.match(f);if(h&&h.length){for(var i,j={year:1900,month:0,date:1,hours:0},k=1,l=h.length;l>k;k++){var m=g[k-1];m.apply&&m.apply.call(j,h[k])}return c(j.year,j.month,j.date)&&(i=new Date(j.year,j.month,j.date,j.hours)),i}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!=a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].documentElement.scrollLeft)}},positionElements:function(a,b,c,d){var e,f,g,h,i=c.split("-"),j=i[0],k=i[1]||"center";e=d?this.offset(a):this.position(a),f=b.prop("offsetWidth"),g=b.prop("offsetHeight");var l={center:function(){return e.left+e.width/2-f/2},left:function(){return e.left},right:function(){return e.left+e.width}},m={center:function(){return e.top+e.height/2-g/2},top:function(){return e.top},bottom:function(){return e.top+e.height}};switch(j){case"right":h={top:m[k](),left:l[j]()};break;case"left":h={top:m[k](),left:e.left-f};break;case"bottom":h={top:m[j](),left:l[k]()};break;default:h={top:e.top-g,left:l[k]()}}return h}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(a,b,c,d,e,f,g,h){var i=this,j={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(c,e){i[c]=angular.isDefined(b[c])?8>e?d(b[c])(a.$parent):a.$parent.$eval(b[c]):h[c]}),angular.forEach(["minDate","maxDate"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(a){i[d]=a?new Date(a):null,i.refreshView()}):i[d]=h[d]?new Date(h[d]):null}),a.datepickerMode=a.datepickerMode||h.datepickerMode,a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),this.activeDate=angular.isDefined(b.initDate)?a.$parent.$eval(b.initDate):new Date,a.isActive=function(b){return 0===i.compare(b.date,i.activeDate)?(a.activeDateId=b.uid,!0):!1},this.init=function(a){j=a,j.$render=function(){i.render()}},this.render=function(){if(j.$modelValue){var a=new Date(j.$modelValue),b=!isNaN(a);b?this.activeDate=a:f.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),j.$setValidity("date",b)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var a=j.$modelValue?new Date(j.$modelValue):null;j.$setValidity("date-disabled",!a||this.element&&!this.isDisabled(a))}},this.createDateObject=function(a,b){var c=j.$modelValue?new Date(j.$modelValue):null;return{date:a,label:g(a,b),selected:c&&0===this.compare(a,c),disabled:this.isDisabled(a),current:0===this.compare(a,new Date)}},this.isDisabled=function(c){return this.minDate&&this.compare(c,this.minDate)<0||this.maxDate&&this.compare(c,this.maxDate)>0||b.dateDisabled&&a.dateDisabled({date:c,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},a.select=function(b){if(a.datepickerMode===i.minMode){var c=j.$modelValue?new Date(j.$modelValue):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),j.$setViewValue(c),j.$render()}else i.activeDate=b,a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)-1]},a.move=function(a){var b=i.activeDate.getFullYear()+a*(i.step.years||0),c=i.activeDate.getMonth()+a*(i.step.months||0);i.activeDate.setFullYear(b,c,1),i.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===i.maxMode&&1===b||a.datepickerMode===i.minMode&&-1===b||(a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)+b])},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var k=function(){e(function(){i.element[0].focus()},0,!1)};a.$on("datepicker.focus",k),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey)if(b.preventDefault(),b.stopPropagation(),"enter"===c||"space"===c){if(i.isDisabled(i.activeDate))return;a.select(i.activeDate),k()}else!b.ctrlKey||"up"!==c&&"down"!==c?(i.handleKeyDown(c,b),i.refreshView()):(a.toggleMode("up"===c?1:-1),k())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f)}}}).directive("daypicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(b,c,d,e){function f(a,b){return 1!==b||a%4!==0||a%100===0&&a%400!==0?i[b]:29}function g(a,b){var c=new Array(b),d=new Date(a),e=0;for(d.setHours(12);b>e;)c[e++]=new Date(d),d.setDate(d.getDate()+1);return c}function h(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}b.showWeeks=e.showWeeks,e.step={months:1},e.element=c;var i=[31,28,31,30,31,30,31,31,30,31,30,31];e._refreshView=function(){var c=e.activeDate.getFullYear(),d=e.activeDate.getMonth(),f=new Date(c,d,1),i=e.startingDay-f.getDay(),j=i>0?7-i:-i,k=new Date(f);j>0&&k.setDate(-j+1);for(var l=g(k,42),m=0;42>m;m++)l[m]=angular.extend(e.createDateObject(l[m],e.formatDay),{secondary:l[m].getMonth()!==d,uid:b.uniqueId+"-"+m});b.labels=new Array(7);for(var n=0;7>n;n++)b.labels[n]={abbr:a(l[n].date,e.formatDayHeader),full:a(l[n].date,"EEEE")};if(b.title=a(e.activeDate,e.formatDayTitle),b.rows=e.split(l,7),b.showWeeks){b.weekNumbers=[];for(var o=h(b.rows[0][0].date),p=b.rows.length;b.weekNumbers.push(o++)<p;);}},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},e.handleKeyDown=function(a){var b=e.activeDate.getDate();if("left"===a)b-=1;else if("up"===a)b-=7;else if("right"===a)b+=1;else if("down"===a)b+=7;else if("pageup"===a||"pagedown"===a){var c=e.activeDate.getMonth()+("pageup"===a?-1:1);e.activeDate.setMonth(c,1),b=Math.min(f(e.activeDate.getFullYear(),e.activeDate.getMonth()),b)}else"home"===a?b=1:"end"===a&&(b=f(e.activeDate.getFullYear(),e.activeDate.getMonth()));e.activeDate.setDate(b)},e.refreshView()}}}]).directive("monthpicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(b,c,d,e){e.step={years:1},e.element=c,e._refreshView=function(){for(var c=new Array(12),d=e.activeDate.getFullYear(),f=0;12>f;f++)c[f]=angular.extend(e.createDateObject(new Date(d,f,1),e.formatMonth),{uid:b.uniqueId+"-"+f});b.title=a(e.activeDate,e.formatMonthTitle),b.rows=e.split(c,3)},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth())},e.handleKeyDown=function(a){var b=e.activeDate.getMonth();if("left"===a)b-=1;else if("up"===a)b-=3;else if("right"===a)b+=1;else if("down"===a)b+=3;else if("pageup"===a||"pagedown"===a){var c=e.activeDate.getFullYear()+("pageup"===a?-1:1);e.activeDate.setFullYear(c)}else"home"===a?b=0:"end"===a&&(b=11);e.activeDate.setMonth(b)},e.refreshView()}}}]).directive("yearpicker",["dateFilter",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(a,b,c,d){function e(a){return parseInt((a-1)/f,10)*f+1}var f=d.yearRange;d.step={years:f},d.element=b,d._refreshView=function(){for(var b=new Array(f),c=0,g=e(d.activeDate.getFullYear());f>c;c++)b[c]=angular.extend(d.createDateObject(new Date(g+c,0,1),d.formatYear),{uid:a.uniqueId+"-"+c});a.title=[b[0].label,b[f-1].label].join(" - "),a.rows=d.split(b,5)},d.compare=function(a,b){return a.getFullYear()-b.getFullYear()},d.handleKeyDown=function(a){var b=d.activeDate.getFullYear();"left"===a?b-=1:"up"===a?b-=5:"right"===a?b+=1:"down"===a?b+=5:"pageup"===a||"pagedown"===a?b+=("pageup"===a?-1:1)*d.step.years:"home"===a?b=e(d.activeDate.getFullYear()):"end"===a&&(b=e(d.activeDate.getFullYear())+f-1),d.activeDate.setFullYear(b)},d.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(a,b,c,d,e,f,g){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(h,i,j,k){function l(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function m(a){if(a){if(angular.isDate(a)&&!isNaN(a))return k.$setValidity("date",!0),a;if(angular.isString(a)){var b=f.parse(a,n)||new Date(a);return isNaN(b)?void k.$setValidity("date",!1):(k.$setValidity("date",!0),b)}return void k.$setValidity("date",!1)}return k.$setValidity("date",!0),null}var n,o=angular.isDefined(j.closeOnDateSelection)?h.$parent.$eval(j.closeOnDateSelection):g.closeOnDateSelection,p=angular.isDefined(j.datepickerAppendToBody)?h.$parent.$eval(j.datepickerAppendToBody):g.appendToBody;h.showButtonBar=angular.isDefined(j.showButtonBar)?h.$parent.$eval(j.showButtonBar):g.showButtonBar,h.getText=function(a){return h[a+"Text"]||g[a+"Text"]},j.$observe("datepickerPopup",function(a){n=a||g.datepickerPopup,k.$render()});var q=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");q.attr({"ng-model":"date","ng-change":"dateSelection()"});var r=angular.element(q.children()[0]);j.datepickerOptions&&angular.forEach(h.$parent.$eval(j.datepickerOptions),function(a,b){r.attr(l(b),a)}),angular.forEach(["minDate","maxDate"],function(a){j[a]&&(h.$parent.$watch(b(j[a]),function(b){h[a]=b}),r.attr(l(a),a))}),j.dateDisabled&&r.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),k.$parsers.unshift(m),h.dateSelection=function(a){angular.isDefined(a)&&(h.date=a),k.$setViewValue(h.date),k.$render(),o&&(h.isOpen=!1,i[0].focus())},i.bind("input change keyup",function(){h.$apply(function(){h.date=k.$modelValue})}),k.$render=function(){var a=k.$viewValue?e(k.$viewValue,n):"";i.val(a),h.date=m(k.$modelValue)};var s=function(a){h.isOpen&&a.target!==i[0]&&h.$apply(function(){h.isOpen=!1})},t=function(a){h.keydown(a)};i.bind("keydown",t),h.keydown=function(a){27===a.which?(a.preventDefault(),a.stopPropagation(),h.close()):40!==a.which||h.isOpen||(h.isOpen=!0)},h.$watch("isOpen",function(a){a?(h.$broadcast("datepicker.focus"),h.position=p?d.offset(i):d.position(i),h.position.top=h.position.top+i.prop("offsetHeight"),c.bind("click",s)):c.unbind("click",s)}),h.select=function(a){if("today"===a){var b=new Date;angular.isDate(k.$modelValue)?(a=new Date(k.$modelValue),a.setFullYear(b.getFullYear(),b.getMonth(),b.getDate())):a=new Date(b.setHours(0,0,0,0))}h.dateSelection(a)},h.close=function(){h.isOpen=!1,i[0].focus()};var u=a(q)(h);p?c.find("body").append(u):i.after(u),h.$on("$destroy",function(){u.remove(),i.unbind("keydown",t),c.unbind("click",s)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(a,b){b.bind("click",function(a){a.preventDefault(),a.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function(a){var b=null;this.open=function(e){b||(a.bind("click",c),a.bind("keydown",d)),b&&b!==e&&(b.isOpen=!1),b=e},this.close=function(e){b===e&&(b=null,a.unbind("click",c),a.unbind("keydown",d))};var c=function(a){a&&a.isDefaultPrevented()||b.$apply(function(){b.isOpen=!1})},d=function(a){27===a.which&&(b.focusToggleElement(),c())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function(a,b,c,d,e,f){var g,h=this,i=a.$new(),j=d.openClass,k=angular.noop,l=b.onToggle?c(b.onToggle):angular.noop;this.init=function(d){h.$element=d,b.isOpen&&(g=c(b.isOpen),k=g.assign,a.$watch(g,function(a){i.isOpen=!!a}))},this.toggle=function(a){return i.isOpen=arguments.length?!!a:!i.isOpen},this.isOpen=function(){return i.isOpen},i.focusToggleElement=function(){h.toggleElement&&h.toggleElement[0].focus()},i.$watch("isOpen",function(b,c){f[b?"addClass":"removeClass"](h.$element,j),b?(i.focusToggleElement(),e.open(i)):e.close(i),k(a,b),angular.isDefined(b)&&b!==c&&l(a,{open:!!b})}),a.$on("$locationChangeSuccess",function(){i.isOpen=!1}),a.$on("$destroy",function(){i.$destroy()})}]).directive("dropdown",function(){return{restrict:"CA",controller:"DropdownController",link:function(a,b,c,d){d.init(b)}}}).directive("dropdownToggle",function(){return{restrict:"CA",require:"?^dropdown",link:function(a,b,c,d){if(d){d.toggleElement=b;var e=function(e){e.preventDefault(),b.hasClass("disabled")||c.disabled||a.$apply(function(){d.toggle()})};b.bind("click",e),b.attr({"aria-haspopup":!0,"aria-expanded":!1}),a.$watch(d.isOpen,function(a){b.attr("aria-expanded",!!a)}),a.$on("$destroy",function(){b.unbind("click",e)})}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).directive("modalBackdrop",["$timeout",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(b){b.animate=!1,a(function(){b.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(a,b){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"template/modal/window.html"},link:function(c,d,e){d.addClass(e.windowClass||""),c.size=e.size,b(function(){c.animate=!0,d[0].focus()}),c.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!=c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))}}}}]).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(a,b,c,d,e,f){function g(){for(var a=-1,b=n.keys(),c=0;c<b.length;c++)n.get(b[c]).value.backdrop&&(a=c);return a}function h(a){var b=c.find("body").eq(0),d=n.get(a).value;n.remove(a),j(d.modalDomEl,d.modalScope,300,function(){d.modalScope.$destroy(),b.toggleClass(m,n.length()>0),i()})}function i(){if(k&&-1==g()){var a=l;j(k,l,150,function(){a.$destroy(),a=null}),k=void 0,l=void 0}}function j(c,d,e,f){function g(){g.done||(g.done=!0,c.remove(),f&&f())}d.animate=!1;var h=a.transitionEndEventName;if(h){var i=b(g,e);c.bind(h,function(){b.cancel(i),g(),d.$apply()})}else b(g,0)}var k,l,m="modal-open",n=f.createNew(),o={};return e.$watch(g,function(a){l&&(l.index=a)}),c.bind("keydown",function(a){var b;27===a.which&&(b=n.top(),
b&&b.value.keyboard&&(a.preventDefault(),e.$apply(function(){o.dismiss(b.key,"escape key press")})))}),o.open=function(a,b){n.add(a,{deferred:b.deferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard});var f=c.find("body").eq(0),h=g();h>=0&&!k&&(l=e.$new(!0),l.index=h,k=d("<div modal-backdrop></div>")(l),f.append(k));var i=angular.element("<div modal-window></div>");i.attr({"template-url":b.windowTemplateUrl,"window-class":b.windowClass,size:b.size,index:n.length()-1,animate:"animate"}).html(b.content);var j=d(i)(b.scope);n.top().value.modalDomEl=j,f.append(j),f.addClass(m)},o.close=function(a,b){var c=n.get(a).value;c&&(c.deferred.resolve(b),h(a))},o.dismiss=function(a,b){var c=n.get(a).value;c&&(c.deferred.reject(b),h(a))},o.dismissAll=function(a){for(var b=this.getTop();b;)this.dismiss(b.key,a),b=this.getTop()},o.getTop=function(){return n.top()},o}]).provider("$modal",function(){var a={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?d.when(a.template):e.get(a.templateUrl,{cache:f}).then(function(a){return a.data})}function j(a){var c=[];return angular.forEach(a,function(a){(angular.isFunction(a)||angular.isArray(a))&&c.push(d.when(b.invoke(a)))}),c}var k={};return k.open=function(b){var e=d.defer(),f=d.defer(),k={result:e.promise,opened:f.promise,close:function(a){h.close(k,a)},dismiss:function(a){h.dismiss(k,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var l=d.all([i(b)].concat(j(b.resolve)));return l.then(function(a){var d=(b.scope||c).$new();d.$close=k.close,d.$dismiss=k.dismiss;var f,i={},j=1;b.controller&&(i.$scope=d,i.$modalInstance=k,angular.forEach(b.resolve,function(b,c){i[c]=a[j++]}),f=g(b.controller,i)),h.open(k,{scope:d,deferred:e,content:a[0],backdrop:b.backdrop,keyboard:b.keyboard,windowClass:b.windowClass,windowTemplateUrl:b.windowTemplateUrl,size:b.size})},function(a){e.reject(a)}),l.then(function(){f.resolve(!0)},function(){f.reject(!1)}),k},k}]};return a}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(a,b,c){var d=this,e={$setViewValue:angular.noop},f=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(f,g){e=f,this.config=g,e.$render=function(){d.render()},b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){d.itemsPerPage=parseInt(b,10),a.totalPages=d.calculateTotalPages()}):this.itemsPerPage=g.itemsPerPage},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1)},this.render=function(){a.page=parseInt(e.$viewValue,10)||1},a.selectPage=function(b){a.page!==b&&b>0&&b<=a.totalPages&&(e.$setViewValue(b),e.$render())},a.getText=function(b){return a[b+"Text"]||d.config[b+"Text"]},a.noPrevious=function(){return 1===a.page},a.noNext=function(){return a.page===a.totalPages},a.$watch("totalItems",function(){a.totalPages=d.calculateTotalPages()}),a.$watch("totalPages",function(b){f(a.$parent,b),a.page>b?a.selectPage(b):e.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(a,b){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(c,d,e,f){function g(a,b,c){return{number:a,text:b,active:c}}function h(a,b){var c=[],d=1,e=b,f=angular.isDefined(k)&&b>k;f&&(l?(d=Math.max(a-Math.floor(k/2),1),e=d+k-1,e>b&&(e=b,d=e-k+1)):(d=(Math.ceil(a/k)-1)*k+1,e=Math.min(d+k-1,b)));for(var h=d;e>=h;h++){var i=g(h,h,h===a);c.push(i)}if(f&&!l){if(d>1){var j=g(d-1,"...",!1);c.unshift(j)}if(b>e){var m=g(e+1,"...",!1);c.push(m)}}return c}var i=f[0],j=f[1];if(j){var k=angular.isDefined(e.maxSize)?c.$parent.$eval(e.maxSize):b.maxSize,l=angular.isDefined(e.rotate)?c.$parent.$eval(e.rotate):b.rotate;c.boundaryLinks=angular.isDefined(e.boundaryLinks)?c.$parent.$eval(e.boundaryLinks):b.boundaryLinks,c.directionLinks=angular.isDefined(e.directionLinks)?c.$parent.$eval(e.directionLinks):b.directionLinks,i.init(j,b),e.maxSize&&c.$parent.$watch(a(e.maxSize),function(a){k=parseInt(a,10),i.render()});var m=i.render;i.render=function(){m(),c.page>0&&c.page<=c.totalPages&&(c.pages=h(c.page,c.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(b,c,d,e){var f=e[0],g=e[1];g&&(b.align=angular.isDefined(d.align)?b.$parent.$eval(d.align):a.align,f.init(g,a))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0},c={mouseenter:"mouseleave",click:"click",focus:"blur"},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$parse","$document","$position","$interpolate",function(e,f,g,h,i,j,k){return function(e,l,m){function n(a){var b=a||o.trigger||m,d=c[b]||b;return{show:b,hide:d}}var o=angular.extend({},b,d),p=a(e),q=k.startSymbol(),r=k.endSymbol(),s="<div "+p+'-popup title="'+q+"tt_title"+r+'" content="'+q+"tt_content"+r+'" placement="'+q+"tt_placement"+r+'" animation="tt_animation" is-open="tt_isOpen"></div>';return{restrict:"EA",scope:!0,compile:function(){var a=f(s);return function(b,c,d){function f(){b.tt_isOpen?m():k()}function k(){(!y||b.$eval(d[l+"Enable"]))&&(b.tt_popupDelay?v||(v=g(p,b.tt_popupDelay,!1),v.then(function(a){a()})):p()())}function m(){b.$apply(function(){q()})}function p(){return v=null,u&&(g.cancel(u),u=null),b.tt_content?(r(),t.css({top:0,left:0,display:"block"}),w?i.find("body").append(t):c.after(t),z(),b.tt_isOpen=!0,b.$digest(),z):angular.noop}function q(){b.tt_isOpen=!1,g.cancel(v),v=null,b.tt_animation?u||(u=g(s,500)):s()}function r(){t&&s(),t=a(b,function(){}),b.$digest()}function s(){u=null,t&&(t.remove(),t=null)}var t,u,v,w=angular.isDefined(o.appendToBody)?o.appendToBody:!1,x=n(void 0),y=angular.isDefined(d[l+"Enable"]),z=function(){var a=j.positionElements(c,t,b.tt_placement,w);a.top+="px",a.left+="px",t.css(a)};b.tt_isOpen=!1,d.$observe(e,function(a){b.tt_content=a,!a&&b.tt_isOpen&&q()}),d.$observe(l+"Title",function(a){b.tt_title=a}),d.$observe(l+"Placement",function(a){b.tt_placement=angular.isDefined(a)?a:o.placement}),d.$observe(l+"PopupDelay",function(a){var c=parseInt(a,10);b.tt_popupDelay=isNaN(c)?o.popupDelay:c});var A=function(){c.unbind(x.show,k),c.unbind(x.hide,m)};d.$observe(l+"Trigger",function(a){A(),x=n(a),x.show===x.hide?c.bind(x.show,f):(c.bind(x.show,k),c.bind(x.hide,m))});var B=b.$eval(d[l+"Animation"]);b.tt_animation=angular.isDefined(B)?!!B:o.animation,d.$observe(l+"AppendToBody",function(a){w=angular.isDefined(a)?h(a)(b):w}),w&&b.$on("$locationChangeSuccess",function(){b.tt_isOpen&&q()}),b.$on("$destroy",function(){g.cancel(u),g.cancel(v),A(),s()})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(a){return a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(a){return a("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(a,b,c){var d=this,e=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[],a.max=angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max,this.addBar=function(b,c){e||c.css({transition:"none"}),this.bars.push(b),b.$watch("value",function(c){b.percent=+(100*c/a.max).toFixed(2)}),b.$on("$destroy",function(){c=null,d.removeBar(b)})},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(a,b,c){var d={$setViewValue:angular.noop};this.init=function(e){d=e,d.$render=this.render,this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):c.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):c.stateOff;var f=angular.isDefined(b.ratingStates)?a.$parent.$eval(b.ratingStates):new Array(angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max);a.range=this.buildTemplateObjects(f)},this.buildTemplateObjects=function(a){for(var b=0,c=a.length;c>b;b++)a[b]=angular.extend({index:b},{stateOn:this.stateOn,stateOff:this.stateOff},a[b]);return a},a.rate=function(b){!a.readonly&&b>=0&&b<=a.range.length&&(d.$setViewValue(b),d.$render())},a.enter=function(b){a.readonly||(a.value=b),a.onHover({value:b})},a.reset=function(){a.value=d.$viewValue,a.onLeave()},a.onKeydown=function(b){/(37|38|39|40)/.test(b.which)&&(b.preventDefault(),b.stopPropagation(),a.rate(a.value+(38===b.which||39===b.which?1:-1)))},this.render=function(){a.value=d.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(b){b.active&&b!==a&&(b.active=!1,b.onDeselect())}),a.active=!0,a.onSelect()},b.addTab=function(a){c.push(a),1===c.length?a.active=!0:a.active&&b.select(a)},b.removeTab=function(a){var d=c.indexOf(a);if(a.active&&c.length>1){var e=d==c.length-1?d-1:d+1;b.select(c[e])}c.splice(d,1)}}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1}}}).directive("tab",["$parse",function(a){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(b,c,d){return function(b,c,e,f){b.$watch("active",function(a){a&&f.select(b)}),b.disabled=!1,e.disabled&&b.$parent.$watch(a(e.disabled),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},f.addTab(b),b.$on("$destroy",function(){f.removeTab(b)}),b.$transcludeFn=d}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}]).directive("tabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(b,c,d){var e=b.$eval(d.tabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(a,b,c,d,e,f){function g(){var b=parseInt(a.hours,10),c=a.showMeridian?b>0&&13>b:b>=0&&24>b;return c?(a.showMeridian&&(12===b&&(b=0),a.meridian===p[1]&&(b+=12)),b):void 0}function h(){var b=parseInt(a.minutes,10);return b>=0&&60>b?b:void 0}function i(a){return angular.isDefined(a)&&a.toString().length<2?"0"+a:a}function j(a){k(),o.$setViewValue(new Date(n)),l(a)}function k(){o.$setValidity("time",!0),a.invalidHours=!1,a.invalidMinutes=!1}function l(b){var c=n.getHours(),d=n.getMinutes();a.showMeridian&&(c=0===c||12===c?12:c%12),a.hours="h"===b?c:i(c),a.minutes="m"===b?d:i(d),a.meridian=n.getHours()<12?p[0]:p[1]}function m(a){var b=new Date(n.getTime()+6e4*a);n.setHours(b.getHours(),b.getMinutes()),j()}var n=new Date,o={$setViewValue:angular.noop},p=angular.isDefined(b.meridians)?a.$parent.$eval(b.meridians):f.meridians||e.DATETIME_FORMATS.AMPMS;this.init=function(c,d){o=c,o.$render=this.render;var e=d.eq(0),g=d.eq(1),h=angular.isDefined(b.mousewheel)?a.$parent.$eval(b.mousewheel):f.mousewheel;h&&this.setupMousewheelEvents(e,g),a.readonlyInput=angular.isDefined(b.readonlyInput)?a.$parent.$eval(b.readonlyInput):f.readonlyInput,this.setupInputEvents(e,g)};var q=f.hourStep;b.hourStep&&a.$parent.$watch(c(b.hourStep),function(a){q=parseInt(a,10)});var r=f.minuteStep;b.minuteStep&&a.$parent.$watch(c(b.minuteStep),function(a){r=parseInt(a,10)}),a.showMeridian=f.showMeridian,b.showMeridian&&a.$parent.$watch(c(b.showMeridian),function(b){if(a.showMeridian=!!b,o.$error.time){var c=g(),d=h();angular.isDefined(c)&&angular.isDefined(d)&&(n.setHours(c),j())}else l()}),this.setupMousewheelEvents=function(b,c){var d=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};b.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementHours():a.decrementHours()),b.preventDefault()}),c.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementMinutes():a.decrementMinutes()),b.preventDefault()})},this.setupInputEvents=function(b,c){if(a.readonlyInput)return a.updateHours=angular.noop,void(a.updateMinutes=angular.noop);var d=function(b,c){o.$setViewValue(null),o.$setValidity("time",!1),angular.isDefined(b)&&(a.invalidHours=b),angular.isDefined(c)&&(a.invalidMinutes=c)};a.updateHours=function(){var a=g();angular.isDefined(a)?(n.setHours(a),j("h")):d(!0)},b.bind("blur",function(){!a.invalidHours&&a.hours<10&&a.$apply(function(){a.hours=i(a.hours)})}),a.updateMinutes=function(){var a=h();angular.isDefined(a)?(n.setMinutes(a),j("m")):d(void 0,!0)},c.bind("blur",function(){!a.invalidMinutes&&a.minutes<10&&a.$apply(function(){a.minutes=i(a.minutes)})})},this.render=function(){var a=o.$modelValue?new Date(o.$modelValue):null;isNaN(a)?(o.$setValidity("time",!1),d.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(a&&(n=a),k(),l())},a.incrementHours=function(){m(60*q)},a.decrementHours=function(){m(60*-q)},a.incrementMinutes=function(){m(r)},a.decrementMinutes=function(){m(-r)},a.toggleMeridian=function(){m(720*(n.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f,b.find("input"))}}}),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(a){var b=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+c+'".');return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(a,b,c,d,e,f,g){var h=[9,13,27,38,40];return{require:"ngModel",link:function(i,j,k,l){var m,n=i.$eval(k.typeaheadMinLength)||1,o=i.$eval(k.typeaheadWaitMs)||0,p=i.$eval(k.typeaheadEditable)!==!1,q=b(k.typeaheadLoading).assign||angular.noop,r=b(k.typeaheadOnSelect),s=k.typeaheadInputFormatter?b(k.typeaheadInputFormatter):void 0,t=k.typeaheadAppendToBody?i.$eval(k.typeaheadAppendToBody):!1,u=b(k.ngModel).assign,v=g.parse(k.typeahead),w=i.$new();i.$on("$destroy",function(){w.$destroy()});var x="typeahead-"+w.$id+"-"+Math.floor(1e4*Math.random());j.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":x});var y=angular.element("<div typeahead-popup></div>");y.attr({id:x,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(k.typeaheadTemplateUrl)&&y.attr("template-url",k.typeaheadTemplateUrl);var z=function(){w.matches=[],w.activeIdx=-1,j.attr("aria-expanded",!1)},A=function(a){return x+"-option-"+a};w.$watch("activeIdx",function(a){0>a?j.removeAttr("aria-activedescendant"):j.attr("aria-activedescendant",A(a))});var B=function(a){var b={$viewValue:a};q(i,!0),c.when(v.source(i,b)).then(function(c){var d=a===l.$viewValue;if(d&&m)if(c.length>0){w.activeIdx=0,w.matches.length=0;for(var e=0;e<c.length;e++)b[v.itemName]=c[e],w.matches.push({id:A(e),label:v.viewMapper(w,b),model:c[e]});w.query=a,w.position=t?f.offset(j):f.position(j),w.position.top=w.position.top+j.prop("offsetHeight"),j.attr("aria-expanded",!0)}else z();d&&q(i,!1)},function(){z(),q(i,!1)})};z(),w.query=void 0;var C;l.$parsers.unshift(function(a){return m=!0,a&&a.length>=n?o>0?(C&&d.cancel(C),C=d(function(){B(a)},o)):B(a):(q(i,!1),z()),p?a:a?void l.$setValidity("editable",!1):(l.$setValidity("editable",!0),a)}),l.$formatters.push(function(a){var b,c,d={};return s?(d.$model=a,s(i,d)):(d[v.itemName]=a,b=v.viewMapper(i,d),d[v.itemName]=void 0,c=v.viewMapper(i,d),b!==c?b:a)}),w.select=function(a){var b,c,e={};e[v.itemName]=c=w.matches[a].model,b=v.modelMapper(i,e),u(i,b),l.$setValidity("editable",!0),r(i,{$item:c,$model:b,$label:v.viewMapper(i,e)}),z(),d(function(){j[0].focus()},0,!1)},j.bind("keydown",function(a){0!==w.matches.length&&-1!==h.indexOf(a.which)&&(a.preventDefault(),40===a.which?(w.activeIdx=(w.activeIdx+1)%w.matches.length,w.$digest()):38===a.which?(w.activeIdx=(w.activeIdx?w.activeIdx:w.matches.length)-1,w.$digest()):13===a.which||9===a.which?w.$apply(function(){w.select(w.activeIdx)}):27===a.which&&(a.stopPropagation(),z(),w.$digest()))}),j.bind("blur",function(){m=!1});var D=function(a){j[0]!==a.target&&(z(),w.$digest())};e.bind("click",D),i.$on("$destroy",function(){e.unbind("click",D)});var E=a(y)(w);t?e.find("body").append(E):j.after(E)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(a,b,c){a.templateUrl=c.templateUrl,a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(a,b,c,d){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(e,f,g){var h=d(g.templateUrl)(e.$parent)||"template/typeahead/typeahead-match.html";a.get(h,{cache:b}).success(function(a){f.replaceWith(c(a.trim())(e))})}}}]).filter("typeaheadHighlight",function(){function a(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(b,c){return c?(""+b).replace(new RegExp(a(c),"gi"),"<strong>$&</strong>"):b}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("template/alert/alert.html",'<div class="alert" ng-class="{\'alert-{{type || \'warning\'}}\': true, \'alert-dismissable\': closeable}" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{5 + showWeeks}}"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-show="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-show="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n	<li ng-transclude></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group">\n			<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div class="modal-backdrop fade"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div tabindex="-1" role="dialog" class="modal fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="{\'modal-sm\': size == \'sm\', \'modal-lg\': size == \'lg\', \'no-fade\': size == \'signature\'}"><div class="modal-content" ng-transclude></div></div>\n</div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1)"><i tooltip=\'Première page\' class=\'fa fa-angle-double-left\'></i></a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1)"><i tooltip=\'Page précédente\' class=\'fa fa-chevron-left\'></i></a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1)"><i tooltip=\'Page suivante\' class=\'fa fa-chevron-right\'></i></a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages)"><i tooltip=\'Dernière page\' class=\'fa fa-angle-double-right\'></i></a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n');
}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n</div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset-titles.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset-titles.html","<ul class=\"nav {{type && 'nav-' + type}}\" ng-class=\"{'nav-stacked': vertical}\">\n</ul>\n")}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset.html",'\n<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("template/timepicker/timepicker.html",'<table>\n	<tbody>\n		<tr class="text-center">\n			<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n		<tr>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n				<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td>:</td>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n				<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n		</tr>\n		<tr class="text-center">\n			<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n	</tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-if="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>')}]),function(){"use strict";var angularLocalStorage=angular.module("LocalStorageModule",[]);angularLocalStorage.provider("localStorageService",function(){this.prefix="ls",this.cookie={expiry:30,path:"/"},this.notify={setItem:!0,removeItem:!1},this.setPrefix=function(prefix){this.prefix=prefix},this.setStorageCookie=function(exp,path){this.cookie={expiry:exp,path:path}},this.setNotify=function(itemSet,itemRemove){this.notify={setItem:itemSet,removeItem:itemRemove}},this.$get=["$rootScope",function($rootScope){var prefix=this.prefix;"."!==prefix.substr(-1)&&(prefix=prefix?prefix+".":"");var browserSupportsLocalStorage=function(){try{var supported="localStorage"in window&&null!==window.localStorage,key=prefix+"__"+Math.round(1e7*Math.random());return supported&&(localStorage.setItem(key,""),localStorage.removeItem(key)),!0}catch(e){return $rootScope.$broadcast("LocalStorageModule.notification.error",e.message),!1}},addToLocalStorage=function(key,value){if(!browserSupportsLocalStorage())return $rootScope.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),notify.setItem&&$rootScope.$broadcast("LocalStorageModule.notification.setitem",{key:key,newvalue:value,storageType:"cookie"}),addToCookies(key,value);"undefined"==typeof value&&(value=null);try{(angular.isObject(value)||angular.isArray(value))&&(value=angular.toJson(value)),localStorage.setItem(prefix+key,value),notify.setItem&&$rootScope.$broadcast("LocalStorageModule.notification.setitem",{key:key,newvalue:value,storageType:"localStorage"})}catch(e){return $rootScope.$broadcast("LocalStorageModule.notification.error",e.message),addToCookies(key,value)}return!0},getFromLocalStorage=function(key){if(!browserSupportsLocalStorage())return $rootScope.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),getFromCookies(key);var item=localStorage.getItem(prefix+key);return item&&"null"!==item?"{"===item.charAt(0)||"["===item.charAt(0)?angular.fromJson(item):item:null},removeFromLocalStorage=function(key){if(!browserSupportsLocalStorage())return $rootScope.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),notify.removeItem&&$rootScope.$broadcast("LocalStorageModule.notification.removeitem",{key:key,storageType:"cookie"}),removeFromCookies(key);try{localStorage.removeItem(prefix+key),notify.removeItem&&$rootScope.$broadcast("LocalStorageModule.notification.removeitem",{key:key,storageType:"localStorage"})}catch(e){return $rootScope.$broadcast("LocalStorageModule.notification.error",e.message),removeFromCookies(key)}return!0},getKeysForLocalStorage=function(){if(!browserSupportsLocalStorage())return $rootScope.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),!1;var prefixLength=prefix.length,keys=[];for(var key in localStorage)if(key.substr(0,prefixLength)===prefix)try{keys.push(key.substr(prefixLength))}catch(e){return $rootScope.$broadcast("LocalStorageModule.notification.error",e.Description),[]}return keys},clearAllFromLocalStorage=function(){if(!browserSupportsLocalStorage())return $rootScope.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),clearAllFromCookies();var prefixLength=prefix.length;for(var key in localStorage)if(key.substr(0,prefixLength)===prefix)try{removeFromLocalStorage(key.substr(prefixLength))}catch(e){return $rootScope.$broadcast("LocalStorageModule.notification.error",e.message),clearAllFromCookies()}return!0},browserSupportsCookies=function(){try{return navigator.cookieEnabled||"cookie"in document&&(document.cookie.length>0||(document.cookie="test").indexOf.call(document.cookie,"test")>-1)}catch(e){return $rootScope.$broadcast("LocalStorageModule.notification.error",e.message),!1}},addToCookies=function(key,value){if("undefined"==typeof value)return!1;if(!browserSupportsCookies())return $rootScope.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var expiry="",expiryDate=new Date;null===value?(expiryDate.setTime(expiryDate.getTime()+-864e5),expiry="; expires="+expiryDate.toGMTString(),value=""):0!==cookie.expiry&&(expiryDate.setTime(expiryDate.getTime()+24*cookie.expiry*60*60*1e3),expiry="; expires="+expiryDate.toGMTString()),key&&(document.cookie=prefix+key+"="+encodeURIComponent(value)+expiry+"; path="+cookie.path)}catch(e){return $rootScope.$broadcast("LocalStorageModule.notification.error",e.message),!1}return!0},getFromCookies=function(key){if(!browserSupportsCookies())return $rootScope.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var cookies=document.cookie.split(";"),i=0;i<cookies.length;i++){for(var thisCookie=cookies[i];" "===thisCookie.charAt(0);)thisCookie=thisCookie.substring(1,thisCookie.length);if(0===thisCookie.indexOf(prefix+key+"="))return decodeURIComponent(thisCookie.substring(prefix.length+key.length+1,thisCookie.length))}return null},removeFromCookies=function(key){addToCookies(key,null)},clearAllFromCookies=function(){for(var thisCookie=null,thisKey=null,prefixLength=prefix.length,cookies=document.cookie.split(";"),i=0;i<cookies.length;i++){for(thisCookie=cookies[i];" "===thisCookie.charAt(0);)thisCookie=thisCookie.substring(1,thisCookie.length);thisKey=thisCookie.substring(prefixLength,thisCookie.indexOf("=")),removeFromCookies(thisKey)}};return{isSupported:browserSupportsLocalStorage,set:addToLocalStorage,add:addToLocalStorage,get:getFromLocalStorage,keys:getKeysForLocalStorage,remove:removeFromLocalStorage,clearAll:clearAllFromLocalStorage,cookie:{set:addToCookies,add:addToCookies,get:getFromCookies,remove:removeFromCookies,clearAll:clearAllFromCookies}}}]})}.call(this),!function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define(b):a.Spinner=b()}(this,function(){"use strict";function a(a,b){var c,d=document.createElement(a||"div");for(c in b)d[c]=b[c];return d}function b(a){for(var b=1,c=arguments.length;c>b;b++)a.appendChild(arguments[b]);return a}function c(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),f=.01+c/d*100,g=Math.max(1-(1-a)/b*(100-f),a),h=j.substring(0,j.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return l[e]||(m.insertRule("@"+i+"keyframes "+e+"{0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}100%{opacity:"+g+"}}",m.cssRules.length),l[e]=1),e}function d(a,b){var c,d,e=a.style;for(b=b.charAt(0).toUpperCase()+b.slice(1),d=0;d<k.length;d++)if(c=k[d]+b,void 0!==e[c])return c;return void 0!==e[b]?b:void 0}function e(a,b){for(var c in b)a.style[d(a,c)||c]=b[c];return a}function f(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)void 0===a[d]&&(a[d]=c[d])}return a}function g(a,b){return"string"==typeof a?a:a[b%a.length]}function h(a){this.opts=f(a||{},h.defaults,n)}function i(){function c(b,c){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}m.addRule(".spin-vml","behavior:url(#default#VML)"),h.prototype.lines=function(a,d){function f(){return e(c("group",{coordsize:k+" "+k,coordorigin:-j+" "+-j}),{width:k,height:k})}function h(a,h,i){b(m,b(e(f(),{rotation:360/d.lines*a+"deg",left:~~h}),b(e(c("roundrect",{arcsize:d.corners}),{width:j,height:d.width,left:d.radius,top:-d.width>>1,filter:i}),c("fill",{color:g(d.color,a),opacity:d.opacity}),c("stroke",{opacity:0}))))}var i,j=d.length+d.width,k=2*j,l=2*-(d.width+d.length)+"px",m=e(f(),{position:"absolute",top:l,left:l});if(d.shadow)for(i=1;i<=d.lines;i++)h(i,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(i=1;i<=d.lines;i++)h(i);return b(a,m)},h.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}}var j,k=["webkit","Moz","ms","O"],l={},m=function(){var c=a("style",{type:"text/css"});return b(document.getElementsByTagName("head")[0],c),c.sheet||c.styleSheet}(),n={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};h.defaults={},f(h.prototype,{spin:function(b){this.stop();var c=this,d=c.opts,f=c.el=e(a(0,{className:d.className}),{position:d.position,width:0,zIndex:d.zIndex});if(d.radius+d.length+d.width,e(f,{left:d.left,top:d.top}),b&&b.insertBefore(f,b.firstChild||null),f.setAttribute("role","progressbar"),c.lines(f,c.opts),!j){var g,h=0,i=(d.lines-1)*(1-d.direction)/2,k=d.fps,l=k/d.speed,m=(1-d.opacity)/(l*d.trail/100),n=l/d.lines;!function o(){h++;for(var a=0;a<d.lines;a++)g=Math.max(1-(h+(d.lines-a)*n)%l*m,d.opacity),c.opacity(f,a*d.direction+i,g,d);c.timeout=c.el&&setTimeout(o,~~(1e3/k))}()}return c},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this},lines:function(d,f){function h(b,c){return e(a(),{position:"absolute",width:f.length+f.width+"px",height:f.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*k+f.rotate)+"deg) translate("+f.radius+"px,0)",borderRadius:(f.corners*f.width>>1)+"px"})}for(var i,k=0,l=(f.lines-1)*(1-f.direction)/2;k<f.lines;k++)i=e(a(),{position:"absolute",top:1+~(f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:j&&c(f.opacity,f.trail,l+k*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&b(i,e(h("#000","0 0 4px #000"),{top:"2px"})),b(d,b(i,h(g(f.color,k),"0 0 1px rgba(0,0,0,.1)")));return d},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}});var o=e(a("group"),{behavior:"url(#default#VML)"});return!d(o,"transform")&&o.adj?i():j=d(o,"animation"),h}),!function(a,b){"use strict";b.module("angularSpinner",[]).factory("usSpinnerService",["$rootScope",function(a){var b={};return b.spin=function(b){a.$broadcast("us-spinner:spin",b)},b.stop=function(b){a.$broadcast("us-spinner:stop",b)},b}]).directive("usSpinner",["$window",function(a){return{scope:!0,link:function(c,d,e){c.spinner=null,c.key=b.isDefined(e.spinnerKey)?e.spinnerKey:!1,c.startActive=b.isDefined(e.spinnerStartActive)?e.spinnerStartActive:c.key?!1:!0,c.spin=function(){c.spinner&&c.spinner.spin(d[0])},c.stop=function(){c.spinner&&c.spinner.stop()},c.$watch(e.usSpinner,function(b){c.stop(),c.spinner=new a.Spinner(b),(!c.key||c.startActive)&&c.spinner.spin(d[0])},!0),c.$on("us-spinner:spin",function(a,b){b===c.key&&c.spin()}),c.$on("us-spinner:stop",function(a,b){b===c.key&&c.stop()}),c.$on("$destroy",function(){c.stop(),c.spinner=null})}}}])}(window,window.angular),function(){"use strict";angular.module("http-throttler",["http-interceptor-buffer"]).factory("httpThrottler",["$q","$log","httpBuffer",function($q,$log,httpBuffer){var reqCount,service;return reqCount=0,service={request:function(config){var deferred;return reqCount>=10?($log.warn("Too many requests"),deferred=$q.defer(),httpBuffer.append(config,deferred),deferred.promise):(reqCount++,config||$q.when(config))},response:function(response){return reqCount--,httpBuffer.retryOne(),response||$q.when(response)},responseError:function(rejection){return reqCount--,httpBuffer.retryOne(),$q.reject(rejection)}}}]),angular.module("http-interceptor-buffer",[]).factory("httpBuffer",["$log",function($log){var buffer,retryHttpRequest,service;return buffer=[],retryHttpRequest=function(config,deferred){return null!=config?deferred.resolve(config):void 0},service={append:function(config,deferred){return buffer.push({config:config,deferred:deferred})},retryOne:function(){var req;return buffer.length>0?(req=buffer.pop(),retryHttpRequest(req.config,req.deferred)):void 0}}}])}.call(this),function(angular,factory){"use strict";return"function"==typeof define&&define.amd?void define(["angular"],function(angular){return factory(angular)}):factory(angular)}(angular||null,function(angular){"use strict";var app=angular.module("ngTable",[]);app.factory("ngTableParams",["$q","$log",function($q,$log){var isNumber=function(n){return!isNaN(parseFloat(n))&&isFinite(n)},ngTableParams=function(baseParameters,baseSettings){var self=this,log=function(){settings.debugMode&&$log.debug&&$log.debug.apply(this,arguments)};this.data=[],this.parameters=function(newParameters,parseParamsFromUrl){if(parseParamsFromUrl=parseParamsFromUrl||!1,angular.isDefined(newParameters)){for(var key in newParameters){var value=newParameters[key];if(parseParamsFromUrl&&key.indexOf("[")>=0){for(var keys=key.split(/\[(.*)\]/).reverse(),lastKey="",i=0,len=keys.length;len>i;i++){var name=keys[i];if(""!==name){var v=value;value={},value[lastKey=name]=isNumber(v)?parseFloat(v):v}}"sorting"===lastKey&&(params[lastKey]={}),params[lastKey]=angular.extend(params[lastKey]||{},value[lastKey])}else params[key]=isNumber(newParameters[key])?parseFloat(newParameters[key]):newParameters[key]}return log("ngTable: set parameters",params),this}return params},this.settings=function(newSettings){return angular.isDefined(newSettings)?(angular.isArray(newSettings.data)&&(newSettings.total=newSettings.data.length),settings=angular.extend(settings,newSettings),log("ngTable: set settings",settings),this):settings},this.page=function(page){return angular.isDefined(page)?this.parameters({page:page}):params.page},this.total=function(total){return angular.isDefined(total)?this.settings({total:total}):settings.total},this.count=function(count){return angular.isDefined(count)?this.parameters({count:count,page:1}):params.count},this.filter=function(filter){return angular.isDefined(filter)?this.parameters({filter:filter}):params.filter},this.sorting=function(sorting){if(2==arguments.length){var sortArray={};return sortArray[sorting]=arguments[1],this.parameters({sorting:sortArray}),this}return angular.isDefined(sorting)?this.parameters({sorting:sorting}):params.sorting},this.isSortBy=function(field,direction){return angular.isDefined(params.sorting[field])&&params.sorting[field]==direction},this.orderBy=function(){var sorting=[];for(var column in params.sorting)sorting.push(("asc"===params.sorting[column]?"+":"-")+column);return sorting},this.getData=function($defer,params){angular.isArray(this.data)&&angular.isObject(params)?$defer.resolve(this.data.slice((params.page()-1)*params.count(),params.page()*params.count())):$defer.resolve([])},this.getGroups=function($defer,column){var defer=$q.defer();defer.promise.then(function(data){var groups={};angular.forEach(data,function(item){var groupName=angular.isFunction(column)?column(item):item[column];groups[groupName]=groups[groupName]||{data:[]},groups[groupName].value=groupName,groups[groupName].data.push(item)});var result=[];for(var i in groups)result.push(groups[i]);log("ngTable: refresh groups",result),$defer.resolve(result)}),this.getData(defer,self)},this.generatePagesArray=function(currentPage,totalItems,pageSize){var maxBlocks,maxPage,maxPivotPages,minPage,numPages,pages;if(maxBlocks=11,pages=[],numPages=Math.ceil(totalItems/pageSize),numPages>1){pages.push({type:"prev",number:Math.max(1,currentPage-1),active:currentPage>1}),pages.push({type:"first",number:1,active:currentPage>1}),maxPivotPages=Math.round((maxBlocks-5)/2),minPage=Math.max(2,currentPage-maxPivotPages),maxPage=Math.min(numPages-1,currentPage+2*maxPivotPages-(currentPage-minPage)),minPage=Math.max(2,minPage-(2*maxPivotPages-(maxPage-minPage)));for(var i=minPage;maxPage>=i;)i===minPage&&2!==i||i===maxPage&&i!==numPages-1?pages.push({type:"more",active:!1}):pages.push({type:"page",number:i,active:currentPage!==i}),i++;pages.push({type:"last",number:numPages,active:currentPage!==numPages}),pages.push({type:"next",number:Math.min(numPages,currentPage+1),active:numPages>currentPage})}return pages},this.url=function(asString){asString=asString||!1;var pairs=asString?[]:{};for(var key in params)if(params.hasOwnProperty(key)){var item=params[key],name=encodeURIComponent(key);if("object"==typeof item){for(var subkey in item)if(!angular.isUndefined(item[subkey])&&""!==item[subkey]){var pname=name+"["+encodeURIComponent(subkey)+"]";asString?pairs.push(pname+"="+item[subkey]):pairs[pname]=item[subkey]}}else angular.isFunction(item)||angular.isUndefined(item)||""===item||(asString?pairs.push(name+"="+encodeURIComponent(item)):pairs[name]=encodeURIComponent(item))}return pairs},this.reload=function(){var $defer=$q.defer(),self=this;settings.$loading=!0,settings.groupBy?settings.getGroups($defer,settings.groupBy,this):settings.getData($defer,this),log("ngTable: reload data"),$defer.promise.then(function(data){settings.$loading=!1,log("ngTable: current scope",settings.$scope),settings.groupBy?self.data=settings.$scope.$groups=data:self.data=settings.$scope.$data=data,settings.$scope.pages=self.generatePagesArray(self.page(),self.total(),self.count())})},this.reloadPages=function(){var self=this;settings.$scope.pages=self.generatePagesArray(self.page(),self.total(),self.count())};var params=this.$params={page:1,count:1,filter:{},sorting:{},group:{},groupBy:null},settings={$scope:null,$loading:!1,data:null,total:0,defaultSort:"desc",filterDelay:750,counts:[10,25,50,100],getGroups:this.getGroups,getData:this.getData};return this.settings(baseSettings),this.parameters(baseParameters,!0),this};return ngTableParams}]);var ngTableController=["$scope","ngTableParams","$q",function($scope,ngTableParams,$q){$scope.$loading=!1,$scope.params||($scope.params=new ngTableParams),$scope.params.settings().$scope=$scope;var delayFilter=function(){var timer=0;return function(callback,ms){clearTimeout(timer),timer=setTimeout(callback,ms)}}();$scope.$watch("params.$params",function(newParams,oldParams){$scope.params.settings().$scope=$scope,angular.equals(newParams.filter,oldParams.filter)?$scope.params.reload():delayFilter(function(){$scope.params.$params.page=1,$scope.params.reload()},$scope.params.settings().filterDelay)},!0),$scope.sortBy=function(column,event){var parsedSortable=$scope.parse(column.sortable);if(parsedSortable){var defaultSort=$scope.params.settings().defaultSort,inverseSort="asc"===defaultSort?"desc":"asc",sorting=$scope.params.sorting()&&$scope.params.sorting()[parsedSortable]&&$scope.params.sorting()[parsedSortable]===defaultSort,sortingParams=event.ctrlKey||event.metaKey?$scope.params.sorting():{};sortingParams[parsedSortable]=sorting?inverseSort:defaultSort,$scope.params.parameters({sorting:sortingParams})}}}];return app.directive("ngTable",["$compile","$q","$parse",function($compile,$q,$parse){return{restrict:"A",priority:1001,scope:!0,controller:ngTableController,compile:function(element){var columns=[],i=0,row=null,thead=element.find("thead");return angular.forEach(angular.element(element.find("tr")),function(tr){tr=angular.element(tr),tr.hasClass("ng-table-group")||row||(row=tr)}),row?(angular.forEach(row.find("td"),function(item){var el=angular.element(item);if(!el.attr("ignore-cell")||"true"!==el.attr("ignore-cell")){var parsedAttribute=function(attr,defaultValue){return function(scope){return $parse(el.attr("x-data-"+attr)||el.attr("data-"+attr)||el.attr(attr))(scope,{$columns:columns})||defaultValue}},parsedTitle=parsedAttribute("title"," "),headerTemplateURL=parsedAttribute("header",!1),filter=parsedAttribute("filter",!1)(),filterTemplateURL=!1,filterName=!1;filter&&filter.$$name&&(filterName=filter.$$name,delete filter.$$name),filter&&filter.templateURL&&(filterTemplateURL=filter.templateURL,delete filter.templateURL),el.attr("data-title-text",parsedTitle()),columns.push({id:i++,title:parsedTitle,sortable:parsedAttribute("sortable",!1),"class":el.attr("x-data-header-class")||el.attr("data-header-class")||el.attr("header-class"),filter:filter,filterTemplateURL:filterTemplateURL,filterName:filterName,headerTemplateURL:headerTemplateURL,filterData:el.attr("filter-data")?el.attr("filter-data"):null,show:el.attr("ng-show")?function(scope){return $parse(el.attr("ng-show"))(scope)}:function(){return!0}})}}),function(scope,element,attrs){if(scope.$loading=!1,scope.$columns=columns,scope.$watch(attrs.ngTable,function(params){angular.isUndefined(params)||(scope.paramsModel=$parse(attrs.ngTable),scope.params=params)},!0),scope.parse=function(text){return angular.isDefined(text)?text(scope):""},attrs.showFilter&&scope.$parent.$watch(attrs.showFilter,function(value){scope.show_filter=value}),angular.forEach(columns,function(column){var def;if(column.filterData){if(def=$parse(column.filterData)(scope,{$column:column}),!angular.isObject(def)||!angular.isObject(def.promise))throw new Error("Function "+column.filterData+" must be instance of $q.defer()");return delete column.filterData,def.promise.then(function(data){angular.isArray(data)||(data=[]),data.unshift({title:"-",id:""}),column.data=data})}}),!element.hasClass("ng-table")){scope.templates={header:attrs.templateHeader?attrs.templateHeader:"ng-table/header.html",pagination:attrs.templatePagination?attrs.templatePagination:"ng-table/pager.html"};var headerTemplate=thead.length>0?thead:angular.element(document.createElement("thead")).attr("ng-include","templates.header"),paginationTemplate=angular.element("<tfoot />").append(angular.element("<tr />").append(angular.element("<td />").attr({"ng-include":"templates.pagination",colspan:columns.length})));element.find("thead").remove();var tbody=element.find("tbody");element.prepend(headerTemplate),$compile(headerTemplate)(scope),$compile(paginationTemplate)(scope),element.addClass("ng-table"),tbody.after(paginationTemplate)}}):void 0}}}]),angular.module("ngTable").run(["$templateCache",function($templateCache){$templateCache.put("ng-table/filters/select-multiple.html",'<select ng-options="data.id as data.title for data in column.data" multiple ng-multiple="true" ng-model="params.filter()[name]" ng-show="filter==\'select-multiple\'" class="filter filter-select-multiple form-control" name="{{column.filterName}}"> </select>'),$templateCache.put("ng-table/filters/select.html",'<select ng-options="data.id as data.title for data in column.data" ng-model="params.filter()[name]" ng-show="filter==\'select\'" class="filter filter-select form-control" name="{{column.filterName}}"> </select>'),$templateCache.put("ng-table/filters/text.html",'<input type="text" name="{{column.filterName}}" ng-model="params.filter()[name]" ng-if="filter==\'text\'" class="input-filter form-control"/>'),$templateCache.put("ng-table/header.html",'<tr> <th ng-repeat="column in $columns" ng-class="{ \'sortable\': parse(column.sortable), \'sort-asc\': params.sorting()[parse(column.sortable)]==\'asc\', \'sort-desc\': params.sorting()[parse(column.sortable)]==\'desc\' }" ng-click="sortBy(column, $event)" ng-show="column.show(this)" ng-init="template=column.headerTemplateURL(this)" class="header {{column.class}}"> <div ng-if="!template" ng-show="!template" ng-bind="parse(column.title)"></div> <div ng-if="template" ng-show="template"><div ng-include="template"></div></div> </th> </tr> <tr ng-show="show_filter" class="ng-table-filters"> <th ng-repeat="column in $columns" ng-show="column.show(this)" class="filter"> <div ng-repeat="(name, filter) in column.filter"> <div ng-if="column.filterTemplateURL" ng-show="column.filterTemplateURL"> <div ng-include="column.filterTemplateURL"></div> </div> <div ng-if="!column.filterTemplateURL" ng-show="!column.filterTemplateURL"> <div ng-include="\'ng-table/filters/\' + filter + \'.html\'"></div> </div> </div> </th> </tr>'),$templateCache.put("ng-table/pager.html",'<div class="ng-cloak ng-table-pager"> <div ng-if="params.settings().counts.length" class="ng-table-counts btn-group pull-right"> <button ng-repeat="count in params.settings().counts" type="button" ng-class="{\'active\':params.count()==count}" ng-click="params.count(count)" class="btn btn-default"> <span ng-bind="count"></span> </button> </div> <ul class="pagination ng-table-pagination"> <li ng-class="{\'disabled\': !page.active}" ng-repeat="page in pages" ng-switch="page.type"> <a ng-switch-when="prev" ng-click="params.page(page.number)" href=""><i class="fa fa-chevron-left"></i></a> <a ng-switch-when="first" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="page" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="more" ng-click="params.page(page.number)" href="">&#8230;</a> <a ng-switch-when="last" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="next" ng-click="params.page(page.number)" href=""><i class="fa fa-chevron-right"</a> </li> </ul> </div> ')}]),app}),!function(a,b){"function"==typeof define&&define.amd?define([],function(){return b()}):"object"==typeof exports?module.exports=b():b()}(this,function(){function a(a){"use strict";var b=a.storageKey(),c=a.storage(),d=function(){var d=a.preferredLanguage();angular.isString(d)?a.use(d):c.put(b,a.use())};d.displayName="fallbackFromIncorrectStorageValue",c?c.get(b)?a.use(c.get(b))["catch"](d):d():angular.isString(a.preferredLanguage())&&a.use(a.preferredLanguage())}function b(){"use strict";var a,b,c=null,d=!1,e=!1;b={sanitize:function(a,b){return"text"===b&&(a=g(a)),a},escape:function(a,b){return"text"===b&&(a=f(a)),a},sanitizeParameters:function(a,b){return"params"===b&&(a=h(a,g)),a},escapeParameters:function(a,b){return"params"===b&&(a=h(a,f)),a}},b.escaped=b.escapeParameters,this.addStrategy=function(a,c){return b[a]=c,this},this.removeStrategy=function(a){return delete b[a],this},this.useStrategy=function(a){return d=!0,c=a,this},this.$get=["$injector","$log",function(f,g){var h=function(a,c,d){return angular.forEach(d,function(d){if(angular.isFunction(d))a=d(a,c);else{if(!angular.isFunction(b[d]))throw new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+d+"'");a=b[d](a,c)}}),a},i=function(){d||e||(g.warn("pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details."),e=!0)};return f.has("$sanitize")&&(a=f.get("$sanitize")),{useStrategy:function(a){return function(b){a.useStrategy(b)}}(this),sanitize:function(a,b,d){if(c||i(),arguments.length<3&&(d=c),!d)return a;var e=angular.isArray(d)?d:[d];return h(a,b,e)}}}];var f=function(a){return angular.element("<div></div>").text(a).html()},g=function(b){if(!a)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as 'escape'.");
return a(b)},h=function(a,b){if(angular.isObject(a)){var c=angular.isArray(a)?[]:{};return angular.forEach(a,function(a,d){c[d]=h(a,b)}),c}return angular.isNumber(a)?a:b(a)}}function c(a,b,c,d){"use strict";var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t={},u=[],v=a,w=[],x="translate-cloak",y=!1,z=".",A=0,B=!0,C="default",D={"default":function(a){return(a||"").split("-").join("_")},java:function(a){var b=(a||"").split("-").join("_"),c=b.split("_");return c.length>1?c[0].toLowerCase()+"_"+c[1].toUpperCase():b},bcp47:function(a){var b=(a||"").split("_").join("-"),c=b.split("-");return c.length>1?c[0].toLowerCase()+"-"+c[1].toUpperCase():b}},E="2.7.0",F=function(){if(angular.isFunction(d.getLocale))return d.getLocale();var a,c,e=b.$get().navigator,f=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(e.languages))for(a=0;a<e.languages.length;a++)if(c=e.languages[a],c&&c.length)return c;for(a=0;a<f.length;a++)if(c=e[f[a]],c&&c.length)return c;return null};F.displayName="angular-translate/service: getFirstBrowserLanguage";var G=function(){var a=F()||"";return D[C]&&(a=D[C](a)),a};G.displayName="angular-translate/service: getLocale";var H=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},I=function(){return this.replace(/^\s+|\s+$/g,"")},J=function(a){for(var b=[],c=angular.lowercase(a),d=0,e=u.length;e>d;d++)b.push(angular.lowercase(u[d]));if(H(b,c)>-1)return a;if(f){var g;for(var h in f){var i=!1,j=Object.prototype.hasOwnProperty.call(f,h)&&angular.lowercase(h)===angular.lowercase(a);if("*"===h.slice(-1)&&(i=h.slice(0,-1)===a.slice(0,h.length-1)),(j||i)&&(g=f[h],H(b,angular.lowercase(g))>-1))return g}}if(a){var k=a.split("_");if(k.length>1&&H(b,angular.lowercase(k[0]))>-1)return k[0]}return a},K=function(a,b){if(!a&&!b)return t;if(a&&!b){if(angular.isString(a))return t[a]}else angular.isObject(t[a])||(t[a]={}),angular.extend(t[a],L(b));return this};this.translations=K,this.cloakClassName=function(a){return a?(x=a,this):x};var L=function(a,b,c,d){var e,f,g,h;b||(b=[]),c||(c={});for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&(h=a[e],angular.isObject(h)?L(h,b.concat(e),c,e):(f=b.length?""+b.join(z)+z+e:e,b.length&&e===d&&(g=""+b.join(z),c[g]="@:"+f),c[f]=h));return c};L.displayName="flatObject",this.addInterpolation=function(a){return w.push(a),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(a){return n=a,this},this.useSanitizeValueStrategy=function(a){return c.useStrategy(a),this},this.preferredLanguage=function(a){return M(a),this};var M=function(a){return a&&(e=a),e};this.translationNotFoundIndicator=function(a){return this.translationNotFoundIndicatorLeft(a),this.translationNotFoundIndicatorRight(a),this},this.translationNotFoundIndicatorLeft=function(a){return a?(q=a,this):q},this.translationNotFoundIndicatorRight=function(a){return a?(r=a,this):r},this.fallbackLanguage=function(a){return N(a),this};var N=function(a){return a?(angular.isString(a)?(h=!0,g=[a]):angular.isArray(a)&&(h=!1,g=a),angular.isString(e)&&H(g,e)<0&&g.push(e),this):h?g[0]:g};this.use=function(a){if(a){if(!t[a]&&!o)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+a+"'");return i=a,this}return i};var O=function(a){return a?void(v=a):l?l+v:v};this.storageKey=O,this.useUrlLoader=function(a,b){return this.useLoader("$translateUrlLoader",angular.extend({url:a},b))},this.useStaticFilesLoader=function(a){return this.useLoader("$translateStaticFilesLoader",a)},this.useLoader=function(a,b){return o=a,p=b||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(a){return k=a,this},this.storagePrefix=function(a){return a?(l=a,this):a},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(a){return m=a,this},this.usePostCompiling=function(a){return y=!!a,this},this.uniformLanguageTag=function(a){return a?angular.isString(a)&&(a={standard:a}):a={},C=a.standard,this},this.determinePreferredLanguage=function(a){var b=a&&angular.isFunction(a)?a():G();return e=u.length?J(b):b,this},this.registerAvailableLanguageKeys=function(a,b){return a?(u=a,b&&(f=b),this):u},this.useLoaderCache=function(a){return a===!1?s=void 0:a===!0?s=!0:"undefined"==typeof a?s="$translationCache":a&&(s=a),this},this.directivePriority=function(a){return void 0===a?A:(A=a,this)},this.statefulFilter=function(a){return void 0===a?B:(B=a,this)},this.$get=["$log","$injector","$rootScope","$q",function(a,b,c,d){var f,l,u,z=b.get(n||"$translateDefaultInterpolation"),C=!1,D={},F={},G=function(a,b,c,h){if(angular.isArray(a)){var j=function(a){for(var e={},f=[],g=function(a){var f=d.defer(),g=function(b){e[a]=b,f.resolve([a,b])};return G(a,b,c,h).then(g,g),f.promise},i=0,j=a.length;j>i;i++)f.push(g(a[i]));return d.all(f).then(function(){return e})};return j(a)}var m=d.defer();a&&(a=I.apply(a));var n=function(){var a=e?F[e]:F[i];if(l=0,k&&!a){var b=f.get(v);if(a=F[b],g&&g.length){var c=H(g,b);l=0===c?1:0,H(g,e)<0&&g.push(e)}}return a}();if(n){var o=function(){_(a,b,c,h).then(m.resolve,m.reject)};o.displayName="promiseResolved",n["finally"](o,m.reject)}else _(a,b,c,h).then(m.resolve,m.reject);return m.promise},P=function(a){return q&&(a=[q,a].join(" ")),r&&(a=[a,r].join(" ")),a},Q=function(a){i=a,c.$emit("$translateChangeSuccess",{language:a}),k&&f.put(G.storageKey(),i),z.setLocale(i);var b=function(a,b){D[b].setLocale(i)};b.displayName="eachInterpolatorLocaleSetter",angular.forEach(D,b),c.$emit("$translateChangeEnd",{language:a})},R=function(a){if(!a)throw"No language key specified for loading.";var e=d.defer();c.$emit("$translateLoadingStart",{language:a}),C=!0;var f=s;"string"==typeof f&&(f=b.get(f));var g=angular.extend({},p,{key:a,$http:angular.extend({},{cache:f},p.$http)}),h=function(b){var d={};c.$emit("$translateLoadingSuccess",{language:a}),angular.isArray(b)?angular.forEach(b,function(a){angular.extend(d,L(a))}):angular.extend(d,L(b)),C=!1,e.resolve({key:a,table:d}),c.$emit("$translateLoadingEnd",{language:a})};h.displayName="onLoaderSuccess";var i=function(a){c.$emit("$translateLoadingError",{language:a}),e.reject(a),c.$emit("$translateLoadingEnd",{language:a})};return i.displayName="onLoaderError",b.get(o)(g).then(h,i),e.promise};if(k&&(f=b.get(k),!f.get||!f.put))throw new Error("Couldn't use storage '"+k+"', missing get() or put() method!");if(w.length){var S=function(a){var c=b.get(a);c.setLocale(e||i),D[c.getInterpolationIdentifier()]=c};S.displayName="interpolationFactoryAdder",angular.forEach(w,S)}var T=function(a){var b=d.defer();if(Object.prototype.hasOwnProperty.call(t,a))b.resolve(t[a]);else if(F[a]){var c=function(a){K(a.key,a.table),b.resolve(a.table)};c.displayName="translationTableResolver",F[a].then(c,b.reject)}else b.reject();return b.promise},U=function(a,b,c,e){var f=d.defer(),g=function(d){if(Object.prototype.hasOwnProperty.call(d,b)){e.setLocale(a);var g=d[b];"@:"===g.substr(0,2)?U(a,g.substr(2),c,e).then(f.resolve,f.reject):f.resolve(e.interpolate(d[b],c)),e.setLocale(i)}else f.reject()};return g.displayName="fallbackTranslationResolver",T(a).then(g,f.reject),f.promise},V=function(a,b,c,d){var e,f=t[a];if(f&&Object.prototype.hasOwnProperty.call(f,b)){if(d.setLocale(a),e=d.interpolate(f[b],c),"@:"===e.substr(0,2))return V(a,e.substr(2),c,d);d.setLocale(i)}return e},W=function(a,c){if(m){var d=b.get(m)(a,i,c);return void 0!==d?d:a}return a},X=function(a,b,c,e,f){var h=d.defer();if(a<g.length){var i=g[a];U(i,b,c,e).then(h.resolve,function(){X(a+1,b,c,e,f).then(h.resolve)})}else h.resolve(f?f:W(b,c));return h.promise},Y=function(a,b,c,d){var e;if(a<g.length){var f=g[a];e=V(f,b,c,d),e||(e=Y(a+1,b,c,d))}return e},Z=function(a,b,c,d){return X(u>0?u:l,a,b,c,d)},$=function(a,b,c){return Y(u>0?u:l,a,b,c)},_=function(a,b,c,e){var f=d.defer(),h=i?t[i]:t,j=c?D[c]:z;if(h&&Object.prototype.hasOwnProperty.call(h,a)){var k=h[a];"@:"===k.substr(0,2)?G(k.substr(2),b,c,e).then(f.resolve,f.reject):f.resolve(j.interpolate(k,b))}else{var l;m&&!C&&(l=W(a,b)),i&&g&&g.length?Z(a,b,j,e).then(function(a){f.resolve(a)},function(a){f.reject(P(a))}):m&&!C&&l?f.resolve(e?e:l):e?f.resolve(e):f.reject(P(a))}return f.promise},ab=function(a,b,c){var d,e=i?t[i]:t,f=z;if(D&&Object.prototype.hasOwnProperty.call(D,c)&&(f=D[c]),e&&Object.prototype.hasOwnProperty.call(e,a)){var h=e[a];d="@:"===h.substr(0,2)?ab(h.substr(2),b,c):f.interpolate(h,b)}else{var j;m&&!C&&(j=W(a,b)),i&&g&&g.length?(l=0,d=$(a,b,f)):d=m&&!C&&j?j:P(a)}return d},bb=function(a){j===a&&(j=void 0),F[a]=void 0};if(G.preferredLanguage=function(a){return a&&M(a),e},G.cloakClassName=function(){return x},G.fallbackLanguage=function(a){if(void 0!==a&&null!==a){if(N(a),o&&g&&g.length)for(var b=0,c=g.length;c>b;b++)F[g[b]]||(F[g[b]]=R(g[b]));G.use(G.use())}return h?g[0]:g},G.useFallbackLanguage=function(a){if(void 0!==a&&null!==a)if(a){var b=H(g,a);b>-1&&(u=b)}else u=0},G.proposedLanguage=function(){return j},G.storage=function(){return f},G.use=function(a){if(!a)return i;var b=d.defer();c.$emit("$translateChangeStart",{language:a});var e=J(a);return e&&(a=e),t[a]||!o||F[a]?j===a&&F[a]?F[a].then(function(a){return b.resolve(a.key),a},function(a){return b.reject(a),d.reject(a)}):(b.resolve(a),Q(a)):(j=a,F[a]=R(a).then(function(a){return K(a.key,a.table),b.resolve(a.key),Q(a.key),a},function(a){return c.$emit("$translateChangeError",{language:a}),b.reject(a),c.$emit("$translateChangeEnd",{language:a}),d.reject(a)}),F[a]["finally"](function(){bb(a)})),b.promise},G.storageKey=function(){return O()},G.isPostCompilingEnabled=function(){return y},G.refresh=function(a){function b(){f.resolve(),c.$emit("$translateRefreshEnd",{language:a})}function e(){f.reject(),c.$emit("$translateRefreshEnd",{language:a})}if(!o)throw new Error("Couldn't refresh translation table, no loader registered!");var f=d.defer();if(c.$emit("$translateRefreshStart",{language:a}),a)if(t[a]){var h=function(c){K(c.key,c.table),a===i&&Q(i),b()};h.displayName="refreshPostProcessor",R(a).then(h,e)}else e();else{var j=[],k={};if(g&&g.length)for(var l=0,m=g.length;m>l;l++)j.push(R(g[l])),k[g[l]]=!0;i&&!k[i]&&j.push(R(i));var n=function(a){t={},angular.forEach(a,function(a){K(a.key,a.table)}),i&&Q(i),b()};n.displayName="refreshPostProcessor",d.all(j).then(n)}return f.promise},G.instant=function(a,b,c){if(null===a||angular.isUndefined(a))return a;if(angular.isArray(a)){for(var d={},f=0,h=a.length;h>f;f++)d[a[f]]=G.instant(a[f],b,c);return d}if(angular.isString(a)&&a.length<1)return a;a&&(a=I.apply(a));var j,k=[];e&&k.push(e),i&&k.push(i),g&&g.length&&(k=k.concat(g));for(var l=0,n=k.length;n>l;l++){var o=k[l];if(t[o]&&("undefined"!=typeof t[o][a]?j=ab(a,b,c):(q||r)&&(j=P(a))),"undefined"!=typeof j)break}return j||""===j||(j=z.interpolate(a,b),m&&!C&&(j=W(a,b))),j},G.versionInfo=function(){return E},G.loaderCache=function(){return s},G.directivePriority=function(){return A},G.statefulFilter=function(){return B},o&&(angular.equals(t,{})&&G.use(G.use()),g&&g.length))for(var cb=function(a){return K(a.key,a.table),c.$emit("$translateChangeEnd",{language:a.key}),a},db=0,eb=g.length;eb>db;db++){var fb=g[db];t[fb]||(F[fb]=R(fb).then(cb))}return G}]}function d(a,b){"use strict";var c,d={},e="default";return d.setLocale=function(a){c=a},d.getInterpolationIdentifier=function(){return e},d.useSanitizeValueStrategy=function(a){return b.useStrategy(a),this},d.interpolate=function(c,d){d=d||{},d=b.sanitize(d,"params");var e=a(c)(d);return e=b.sanitize(e,"text")},d}function e(a,b,c,d,e,f){"use strict";var g=function(){return this.replace(/^\s+|\s+$/g,"")};return{restrict:"AE",scope:!0,priority:a.directivePriority(),compile:function(b,h){var i=h.translateValues?h.translateValues:void 0,j=h.translateInterpolation?h.translateInterpolation:void 0,k=b[0].outerHTML.match(/translate-value-+/i),l="^(.*)("+c.startSymbol()+".*"+c.endSymbol()+")(.*)",m="^(.*)"+c.startSymbol()+"(.*)"+c.endSymbol()+"(.*)";return function(b,n,o){b.interpolateParams={},b.preText="",b.postText="";var p={},q=function(a,c,d){if(c.translateValues&&angular.extend(a,e(c.translateValues)(b.$parent)),k)for(var f in d)if(Object.prototype.hasOwnProperty.call(c,f)&&"translateValue"===f.substr(0,14)&&"translateValues"!==f){var g=angular.lowercase(f.substr(14,1))+f.substr(15);a[g]=d[f]}},r=function(a){if(angular.isFunction(r._unwatchOld)&&(r._unwatchOld(),r._unwatchOld=void 0),angular.equals(a,"")||!angular.isDefined(a)){var d=g.apply(n.text()).match(l);if(angular.isArray(d)){b.preText=d[1],b.postText=d[3],p.translate=c(d[2])(b.$parent);var e=n.text().match(m);angular.isArray(e)&&e[2]&&e[2].length&&(r._unwatchOld=b.$watch(e[2],function(a){p.translate=a,x()}))}else p.translate=n.text().replace(/^\s+|\s+$/g,"")}else p.translate=a;x()},s=function(a){o.$observe(a,function(b){p[a]=b,x()})};q(b.interpolateParams,o,h);var t=!0;o.$observe("translate",function(a){"undefined"==typeof a?r(""):""===a&&t||(p.translate=a,x()),t=!1});for(var u in o)o.hasOwnProperty(u)&&"translateAttr"===u.substr(0,13)&&s(u);if(o.$observe("translateDefault",function(a){b.defaultText=a}),i&&o.$observe("translateValues",function(a){a&&b.$parent.$watch(function(){angular.extend(b.interpolateParams,e(a)(b.$parent))})}),k){var v=function(a){o.$observe(a,function(c){var d=angular.lowercase(a.substr(14,1))+a.substr(15);b.interpolateParams[d]=c})};for(var w in o)Object.prototype.hasOwnProperty.call(o,w)&&"translateValue"===w.substr(0,14)&&"translateValues"!==w&&v(w)}var x=function(){for(var a in p)p.hasOwnProperty(a)&&void 0!==p[a]&&y(a,p[a],b,b.interpolateParams,b.defaultText)},y=function(b,c,d,e,f){c?a(c,e,j,f).then(function(a){z(a,d,!0,b)},function(a){z(a,d,!1,b)}):z(c,d,!1,b)},z=function(b,c,e,f){if("translate"===f){e||"undefined"==typeof c.defaultText||(b=c.defaultText),n.html(c.preText+b+c.postText);var g=a.isPostCompilingEnabled(),i="undefined"!=typeof h.translateCompile,j=i&&"false"!==h.translateCompile;(g&&!i||j)&&d(n.contents())(c)}else{e||"undefined"==typeof c.defaultText||(b=c.defaultText);var k=o.$attr[f];"data-"===k.substr(0,5)&&(k=k.substr(5)),k=k.substr(15),n.attr(k,b)}};(i||k||o.translateDefault)&&b.$watch("interpolateParams",x,!0);var A=f.$on("$translateChangeSuccess",x);n.text().length&&r(o.translate?o.translate:""),x(),b.$on("$destroy",A)}}}}function f(a,b){"use strict";return{compile:function(c){var d=function(){c.addClass(b.cloakClassName())},e=function(){c.removeClass(b.cloakClassName())},f=a.$on("$translateChangeEnd",function(){e(),f(),f=null});return d(),function(a,c,f){f.translateCloak&&f.translateCloak.length&&f.$observe("translateCloak",function(a){b(a).then(e,d)})}}}}function g(a,b){"use strict";var c=function(c,d,e){return angular.isObject(d)||(d=a(d)(this)),b.instant(c,d,e)};return b.statefulFilter()&&(c.$stateful=!0),c}return angular.module("pascalprecht.translate",["ng"]).run(a),a.$inject=["$translate"],a.displayName="runTranslate",angular.module("pascalprecht.translate").provider("$translateSanitization",b),angular.module("pascalprecht.translate").constant("pascalprechtTranslateOverrider",{}).provider("$translate",c),c.$inject=["$STORAGE_KEY","$windowProvider","$translateSanitizationProvider","pascalprechtTranslateOverrider"],c.displayName="displayName",angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",d),d.$inject=["$interpolate","$translateSanitization"],d.displayName="$translateDefaultInterpolation",angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",e),e.$inject=["$translate","$q","$interpolate","$compile","$parse","$rootScope"],e.displayName="translateDirective",angular.module("pascalprecht.translate").directive("translateCloak",f),f.$inject=["$rootScope","$translate"],f.displayName="translateCloakDirective",angular.module("pascalprecht.translate").filter("translate",g),g.$inject=["$parse","$translate"],g.displayName="translateFilterFactory","pascalprecht.translate"}),!function(a,b){"function"==typeof define&&define.amd?define([],function(){return b()}):"object"==typeof exports?module.exports=b():b()}(this,function(){function a(a,b){"use strict";return function(c){if(!c||!(angular.isArray(c.files)||angular.isString(c.prefix)&&angular.isString(c.suffix)))throw new Error("Couldn't load static files, no files and prefix or suffix specified!");c.files||(c.files=[{prefix:c.prefix,suffix:c.suffix}]);for(var d=function(d){if(!d||!angular.isString(d.prefix)||!angular.isString(d.suffix))throw new Error("Couldn't load static file, no prefix or suffix specified!");var e=a.defer();return b(angular.extend({url:[d.prefix,c.key,d.suffix].join(""),method:"GET",params:""},c.$http)).success(function(a){e.resolve(a)}).error(function(){e.reject(c.key)}),e.promise},e=a.defer(),f=[],g=c.files.length,h=0;g>h;h++)f.push(d({prefix:c.files[h].prefix,key:c.key,suffix:c.files[h].suffix}));return a.all(f).then(function(a){for(var b=a.length,c={},d=0;b>d;d++)for(var f in a[d])c[f]=a[d][f];e.resolve(c)},function(a){e.reject(a)}),e.promise}}return angular.module("pascalprecht.translate").factory("$translateStaticFilesLoader",a),a.$inject=["$q","$http"],a.displayName="$translateStaticFilesLoader","pascalprecht.translate"});var i=void 0,j=!0,m=null,n=!1,q,s=this,la="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),ma=0,ra=Date.now||function(){return+new Date},va=/&/g,wa=/</g,xa=/>/g,ya=/\"/g,ua=/[&<>\"]/,z=Array.prototype,Aa=z.indexOf?function(a,b,c){return z.indexOf.call(a,b,c)}:function(a,b,c){if(c=c==m?0:0>c?Math.max(0,a.length+c):c,t(a))return t(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},B=z.forEach?function(a,b,c){z.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=t(a)?a.split(""):a,e=0;d>e;e++)e in f&&b.call(c,f[e],e,a)},Ba=z.filter?function(a,b,c){return z.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=[],e=0,h=t(a)?a.split(""):a,k=0;d>k;k++)if(k in h){var l=h[k];b.call(c,l,k,a)&&(f[e++]=l)}return f},Ca=z.map?function(a,b,c){return z.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=Array(d),e=t(a)?a.split(""):a,h=0;d>h;h++)h in e&&(f[h]=b.call(c,e[h],h,a));return f},Da=z.every?function(a,b,c){return z.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=t(a)?a.split(""):a,e=0;d>e;e++)if(e in f&&!b.call(c,f[e],e,a))return n;return j},Ka,La,Ma,Na,Oa;Na=Ma=La=Ka=n;var Ra;if(Ra=Pa()){var Sa=Qa();Ka=0==Ra.indexOf("Opera"),La=!Ka&&-1!=Ra.indexOf("MSIE"),Ma=!Ka&&-1!=Ra.indexOf("WebKit"),Na=!Ka&&!Ma&&"Gecko"==Sa.product}var Ta=Ka,D=La,E=Na,F=Ma,Ua=Qa();Oa=-1!=(Ua&&Ua.platform||"").indexOf("Mac");var Va=!!Qa()&&-1!=(Qa().appVersion||"").indexOf("X11"),Wa;a:{var Xa="",Ya;if(Ta&&s.opera)var Za=s.opera.version,Xa="function"==typeof Za?Za():Za;else if(E?Ya=/rv\:([^\);]+)(\)|;)/:D?Ya=/MSIE\s+([^\);]+)(\)|;)/:F&&(Ya=/WebKit\/(\S+)/),Ya)var $a=Ya.exec(Pa()),Xa=$a?$a[1]:"";if(D){var ab,bb=s.document;if(ab=bb?bb.documentMode:i,ab>parseFloat(Xa)){Wa=String(ab);break a}}Wa=Xa}var cb={},db={},fb,gb=!D||eb(9);!E&&!D||D&&eb(9)||E&&G("1.9.1"),D&&G("9");var hb=D||Ta||F;ob.prototype.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},ob.prototype.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this};var qb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),vb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};q=tb.prototype,q.qd=sb,q.d=function(a){return t(a)?this.L.getElementById(a):a},q.ga=ub,q.createElement=function(a){return this.L.createElement(a)},q.createTextNode=function(a){return this.L.createTextNode(a)},q.appendChild=function(a,b){a.appendChild(b)},q.append=function(a,b){xb(J(a),a,arguments,1)},q.contains=Bb;var Eb;Eb=ba(j);var Gb=F&&"BackCompat"==document.compatMode,Hb=document.firstChild.children?"children":"childNodes",Ib=n,Nb={"*=":function(a,b){return function(c){return 0<=Mb(c,a).indexOf(b)}},"^=":function(a,b){return function(c){return 0==Mb(c,a).indexOf(b)}},"$=":function(a,b){return function(c){return c=" "+Mb(c,a),c.lastIndexOf(b)==c.length-b.length}},"~=":function(a,b){var c=" "+b+" ";return function(b){return 0<=(" "+Mb(b,a)+" ").indexOf(c)}},"|=":function(a,b){return b=" "+b,function(c){return c=" "+Mb(c,a),c==b||0==c.indexOf(b+"-")}},"=":function(a,b){return function(c){return Mb(c,a)==b}}},Ob="undefined"==typeof document.firstChild.nextElementSibling,Pb=Ob?"nextSibling":"nextElementSibling",Qb=Ob?"previousSibling":"previousElementSibling",Rb=Ob?Lb:Eb,Yb={checked:function(){return function(a){return a.checked||a.attributes.checked}},"first-child":function(){return Sb},"last-child":function(){return Tb},"only-child":function(){return function(a){return Sb(a)&&Tb(a)?j:n}},empty:function(){return function(a){for(var b=a.childNodes,a=a.childNodes.length-1;a>=0;a--){var c=b[a].nodeType;if(1===c||3==c)return n}return j}},contains:function(a,b){var c=b.charAt(0);return('"'==c||"'"==c)&&(b=b.slice(1,-1)),function(a){return 0<=a.innerHTML.indexOf(b)}},not:function(a,b){var c=Jb(b)[0],d={z:1};"*"!=c.D&&(d.D=1),c.ca.length||(d.ca=1);var f=Xb(c,d);return function(a){return!f(a)}},"nth-child":function(a,b){if("odd"==b)return Wb;if("even"==b)return Vb;if(-1!=b.indexOf("n")){var c=b.split("n",2),d=c[0]?"-"==c[0]?-1:parseInt(c[0],10):1,f=c[1]?parseInt(c[1],10):0,e=0,h=-1;if(d>0?0>f?f=f%d&&d+f%d:f>0&&(f>=d&&(e=f-f%d),f%=d):0>d&&(d*=-1,f>0&&(h=f,f%=d)),d>0)return function(a){return a=Ub(a),a>=e&&(0>h||h>=a)&&a%d==f};b=f}var k=parseInt(b,10);return function(a){return Ub(a)==k}}},Zb=D?function(a){var b=a.toLowerCase();return"class"==b&&(a="className"),function(c){return Ib?c.getAttribute(a):c[a]||c[b]}}:function(a){return function(b){return b&&b.getAttribute&&b.hasAttribute(a)}},$b={},cc={},dc={},fc=!!document.querySelectorAll&&(!F||G("526")),hc=0,ic=D?function(a){return Ib?a.getAttribute("_uid")||a.setAttribute("_uid",++hc)||hc:a.uniqueID}:function(a){return a._uid||(a._uid=++hc)};K.Aa=Yb,ca("goog.dom.query",K),ca("goog.dom.query.pseudos",K.Aa);var kc=!D||eb(9),lc=!D||eb(9),mc=D&&!G("9");!F||G("528"),E&&G("1.9b")||D&&G("8")||Ta&&G("9.5")||F&&G("528"),E&&!G("8")||D&&G("9");var oc=0;nc.prototype.md=n,q=pc.prototype,q.za=n,q.defaultPrevented=n,q.Tb=j,q.stopPropagation=function(){this.za=j},q.preventDefault=function(){this.defaultPrevented=j,this.Tb=n},rc[" "]=ea,v(sc,pc);var tc=[1,4,2];q=sc.prototype,q.target=m,q.relatedTarget=m,q.offsetX=0,q.offsetY=0,q.clientX=0,q.clientY=0,q.screenX=0,q.screenY=0,q.button=0,q.keyCode=0,q.charCode=0,q.ctrlKey=n,q.altKey=n,q.shiftKey=n,q.metaKey=n,q.Dc=n,q.n=m,q.init=function(a,b){var c=this.type=a.type;pc.call(this,c),this.target=a.target||a.srcElement,this.currentTarget=b;var d=a.relatedTarget;if(d){if(E){var f;a:{try{rc(d.nodeName),f=j;break a}catch(e){}f=n}f||(d=m)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d,this.offsetX=F||a.offsetX!==i?a.offsetX:a.layerX,this.offsetY=F||a.offsetY!==i?a.offsetY:a.layerY,this.clientX=a.clientX!==i?a.clientX:a.pageX,this.clientY=a.clientY!==i?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0,this.button=a.button,this.keyCode=a.keyCode||0,this.charCode=a.charCode||("keypress"==c?a.keyCode:0),this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.Dc=Oa?a.metaKey:a.ctrlKey,this.state=a.state,this.n=a,a.defaultPrevented&&this.preventDefault(),delete this.za},q.stopPropagation=function(){sc.H.stopPropagation.call(this),this.n.stopPropagation?this.n.stopPropagation():this.n.cancelBubble=j},q.preventDefault=function(){sc.H.preventDefault.call(this);var a=this.n;if(a.preventDefault)a.preventDefault();else if(a.returnValue=n,mc)try{(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)&&(a.keyCode=-1)}catch(b){}},q.Vd=aa("n");var wc=0;q=vc.prototype,q.key=0,q.Ba=n,q.gd=n,q.init=function(a,b,c,d,f,e){u(a)?this.Ed=j:a&&a.handleEvent&&u(a.handleEvent)?this.Ed=n:g(Error("Invalid listener argument")),this.Ua=a,this.Id=b,this.src=c,this.type=d,this.capture=!!f,this.Qa=e,this.gd=n,this.key=++wc,this.Ba=n},q.handleEvent=function(a){return this.Ed?this.Ua.call(this.Qa||this.src,a):this.Ua.handleEvent.call(this.Ua,a)};var xc={},L={},yc={},zc={};v(Gc,nc);var Hc=[];Gc.prototype.Rb=function(){B(this.h,O),this.h.length=0},Gc.prototype.handleEvent=function(){g(Error("EventHandler.handleEvent not implemented"))},v(Jc,nc),q=Jc.prototype,q.jd=j,q.Cc=m,q.Hc=function(a){this.Cc=a},q.addEventListener=function(a,b,c,d){N(this,a,b,c,d)},q.removeEventListener=function(a,b,c,d){Bc(this,a,b,c,d)},q.dispatchEvent=function(a){var b=a.type||a,c=L;if(b in c){if(t(a))a=new pc(a,this);else if(a instanceof pc)a.target=a.target||this;else{var d=a,a=new pc(b,this);rb(a,d)}var f,e,d=1,c=c[b],b=j in c;if(b){for(f=[],e=this;e;e=e.Cc)f.push(e);e=c[j],e.N=e.m;for(var h=f.length-1;!a.za&&h>=0&&e.N;h--)a.currentTarget=f[h],d&=Ec(e,f[h],a.type,j,a)&&a.Tb!=n}if(n in c)if(e=c[n],e.N=e.m,b)for(h=0;!a.za&&h<f.length&&e.N;h++)a.currentTarget=f[h],d&=Ec(e,f[h],a.type,n,a)&&a.Tb!=n;else for(f=this;!a.za&&f&&e.N;f=f.Cc)a.currentTarget=f,d&=Ec(e,f,a.type,n,a)&&a.Tb!=n;a=Boolean(d)}else a=j;return a},Kc.prototype.contains=function(a){return this&&a?a instanceof Kc?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom:n},Lc.prototype.contains=function(a){return a instanceof Lc?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};var bd=E?"MozUserSelect":F?"WebkitUserSelect":m,ed={thin:2,medium:4,thick:6},Wc=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;v(hd,Jc);var id=D||E&&G("1.9.3");q=hd.prototype,q.clientX=0,q.clientY=0,q.screenX=0,q.screenY=0,q.Md=0,q.Nd=0,q.La=0,q.Ma=0,q.nd=j,q.va=n,q.Ad=0,q.ee=0,q.be=n,q.Ic=n,q.Eb=aa("ja"),q.me=function(a){var b="mousedown"==a.type;if(!this.nd||this.va||b&&!uc(a))this.dispatchEvent("earlycancel");else{if(kd(a),0==this.Ad){if(!this.dispatchEvent(new ld("start",this,a.clientX,a.clientY,a)))return;this.va=j,a.preventDefault()}else a.preventDefault();var b=this.L,c=b.documentElement,d=!id;P(this.ja,b,["touchmove","mousemove"],this.$d,d),P(this.ja,b,["touchend","mouseup"],this.Cb,d),id?(c.setCapture(n),P(this.ja,c,"losecapture",this.Cb)):P(this.ja,b?b.parentWindow||b.defaultView:window,"blur",this.Cb),D&&this.be&&P(this.ja,b,"dragstart",qc),this.ke&&P(this.ja,this.ke,"scroll",this.he,d),this.clientX=this.Md=a.clientX,this.clientY=this.Nd=a.clientY,this.screenX=a.screenX,this.screenY=a.screenY,this.Ic?(a=this.target,b=a.offsetLeft,c=a.offsetParent,!c&&"fixed"==Oc(a,"position")&&(c=J(a).documentElement),c?(E?(d=gd(c),b+=d.left):eb(8)&&(d=gd(c),b-=d.left),a=ad(c)?c.clientWidth-(b+a.offsetWidth):b):a=b):a=this.target.offsetLeft,this.La=a,this.Ma=this.target.offsetTop,this.Bc=Db(sb(this.L)),this.ee=ra()}},q.Cb=function(a,b){if(this.ja.Rb(),id&&this.L.releaseCapture(),this.va){kd(a),this.va=n;var c=md(this,this.La),d=nd(this,this.Ma);this.dispatchEvent(new ld("end",this,a.clientX,a.clientY,a,c,d,b||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel");("touchend"==a.type||"touchcancel"==a.type)&&a.preventDefault()},q.$d=function(a){if(this.nd){kd(a);var b=(this.Ic&&jd(this)?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;if(this.clientX=a.clientX,this.clientY=a.clientY,this.screenX=a.screenX,this.screenY=a.screenY,!this.va){var d=this.Md-this.clientX,f=this.Nd-this.clientY;if(d*d+f*f>this.Ad){if(!this.dispatchEvent(new ld("start",this,a.clientX,a.clientY,a)))return void(this.md||this.Cb(a));this.va=j}}c=od(this,b,c),b=c.x,c=c.y,this.va&&this.dispatchEvent(new ld("beforedrag",this,a.clientX,a.clientY,a,b,c))&&(pd(this,a,b,c),a.preventDefault())}},q.he=function(a){var b=od(this,0,0);a.clientX=this.clientX,a.clientY=this.clientY,pd(this,a,b.x,b.y)},q.ld=function(a,b){this.Ic&&jd(this)?this.target.style.right=a+"px":this.target.style.left=a+"px",this.target.style.top=b+"px"},v(ld,pc),rd.prototype.addHandler=function(a,b){this.$a[a]||(this.$a[a]=[]),this.$a[a].push(b)},rd.prototype.Sb=function(a,b){var c=this.$a[a];c&&C(c,b)},rd.prototype.fireEvent=function(a,b,c){var d=n;return(a=this.$a[a])&&B(a,function(a){a=a(b,c),da(a)&&!a&&(d=j)}),d},q=sd.prototype,q.m=0,q.Jc=0,q.clear=function(){this.X={},this.Jc=this.m=this.h.length=0},q.remove=function(a){return ud(this.X,a)?(delete this.X[a],this.m--,this.Jc++,this.h.length>2*this.m&&td(this),j):n},q.get=function(a,b){return ud(this.X,a)?this.X[a]:b},q.set=function(a,b){ud(this.X,a)||(this.m++,this.h.push(a),this.Jc++),this.X[a]=b},q=Gd.prototype,q.ba=function(a,b){var c=i,d=i;t(a)?(c=a,d=b):u(a)&&(d=a),c?(c=this.g.get(c))&&c.ba(d):B(V(this.g),function(a){a.ba(d)})},q.G=function(a,b){if(Nd(this,a.src)){var c=this.g.get(a.src);c?c.G(a,b):(this.Ea.push(a),b&&C(this.Ea,b))}},q.addHandler=function(a,b){B(V(this.g),function(c){c.addHandler(a,b)}),this.Vc.push({type:a,Qa:b})},q.zb=function(a){this.cb.push(a),B(V(this.g),function(b){a.onInitAnnotator&&a.onInitAnnotator(b)})},q.destroy=function(a){a?(a=this.g.get(a))&&a.destroy():(B(V(this.g),function(a){a.destroy()}),this.g.clear())},q.xa=function(a){return Nd(this,a)&&(a=this.g.get(a))?a.xa().getName():void 0},q.B=function(a){if(a){var b=this.g.get(a);return b?b.B():Ba(this.Ea,function(b){return b.src==a})}var c=[];return B(V(this.g),function(a){Ha(c,a.B())}),Ha(c,this.Ea),c},q.ka=function(a){return Nd(this,a)&&(a=this.g.get(a))?Ca(a.ka(),function(a){return a.getName()}):void 0},q.ea=function(a){Ld(this,a,n)},q.M=function(a){Md(this,a,n)},q.o=function(a){if(a){if(Nd(this,a.src)){var b=this.g.get(a.src);b&&b.o(a)}}else B(V(this.g),function(a){a.o()})},q.init=function(){this.cd&&Ha(this.Ha,this.cd()),Kd(this);var a=this,b=N(window,"scroll",function(){0<a.Ha.length?Kd(a):O(b)})},q.xc=function(a){this.Vb(a)&&Jd(this,a)},q.v=function(a){if(Nd(this,a.src)){var b=this.g.get(a.src);b?b.v(a):this.Zb.push(a)}},q.tb=function(a,b){if(Nd(this,a)){var c=this.g.get(a);c&&c.Kd(b)}},q.ga=function(a){this.ac=a,B(V(this.g),function(b){b.ga(a)})},q.Ca=function(a){Ld(this,a,j)},q.Y=function(a){Md(this,a,j)};var Pd={};q=Qd.prototype,q.ua="",q.set=function(a){this.ua=""+a},q.append=function(a,b,c){if(this.ua+=a,b!=m)for(var d=1;d<arguments.length;d++)this.ua+=arguments[d];return this},q.clear=function(){this.ua=""},q.toString=aa("ua");var Sd={ze:"<",we:">",pe:"&",Ae:" ",De:'"',qe:"'"},Td={a:0,abbr:0,acronym:0,address:0,applet:16,area:2,b:0,base:18,basefont:18,bdo:0,big:0,blockquote:0,body:49,br:2,button:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,dd:1,del:0,dfn:0,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,font:0,form:0,frame:18,frameset:16,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:49,hr:2,html:49,i:0,iframe:20,img:2,input:2,ins:0,isindex:18,kbd:0,label:0,legend:0,li:1,link:18,map:0,menu:0,meta:18,noframes:20,noscript:20,object:16,ol:0,optgroup:0,option:1,p:1,param:18,pre:0,q:0,s:0,samp:0,script:20,select:0,small:0,span:0,strike:0,strong:0,style:20,sub:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,title:24,tr:1,tt:0,u:0,ul:0,"var":0},Ud=/&/g,Vd=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,Wd=/</g,Xd=/>/g,Yd=/\"/g,Zd=/=/g,$d=/\0/g,ae=/&(#\d+|#x[0-9A-Fa-f]+|\w+);/g,be=/^#(\d+)$/,ce=/^#x([0-9A-Fa-f]+)$/,de=RegExp("^\\s*(?:(?:([a-z][a-z-]*)(\\s*=\\s*(\"[^\"]*\"|'[^']*'|(?=[a-z][a-z-]*\\s*=)|[^>\"'\\s]*))?)|(/?>)|[^a-z\\s>]+)","i"),ee=RegExp("^(?:&(\\#[0-9]+|\\#[x][0-9a-f]+|\\w+);|<[!]--[\\s\\S]*?-->|<!\\w[^>]*>|<\\?[^>*]*>|<(/)?([a-z][a-z0-9]*)|([^<&>]+)|([<&>]))","i");
Rd.prototype.parse=function(a,b){var e,h,k,c=m,d=n,f=[];for(a.P=[],a.ma=n;b;){var l=b.match(d?de:ee),b=b.substring(l[0].length);if(d)if(l[1]){var r=l[1].toLowerCase();if(l[2]){switch(l=l[3],l.charCodeAt(0)){case 34:case 39:l=l.substring(1,l.length-1)}l=l.replace($d,"").replace(ae,pa(this.ce,this))}else l=r;f.push(r,l)}else l[4]&&(h!==i&&(k?a.Ld&&a.Ld(e,f):a.od&&a.od(e)),k&&12&h&&(c=c===m?b.toLowerCase():c.substring(c.length-b.length),d=c.indexOf("</"+e),0>d&&(d=b.length),4&h?a.hd&&a.hd(b.substring(0,d)):a.Jd&&a.Jd(b.substring(0,d).replace(Vd,"&amp;$1").replace(Wd,"&lt;").replace(Xd,"&gt;")),b=b.substring(d)),e=h=k=i,f.length=0,d=n);else if(l[1])fe(a,l[0]);else if(l[3])k=!l[2],d=j,e=l[3].toLowerCase(),h=Td.hasOwnProperty(e)?Td[e]:i;else if(l[4])fe(a,l[4]);else if(l[5])switch(l[5]){case"<":fe(a,"&lt;");break;case">":fe(a,"&gt;");break;default:fe(a,"&amp;")}}for(c=a.P.length;0<=--c;)a.ha.append("</",a.P[c],">");a.P.length=0},Rd.prototype.ce=function(a){if(a=a.toLowerCase(),Sd.hasOwnProperty(a))return Sd[a];var b=a.match(be);return b?String.fromCharCode(parseInt(b[1],10)):(b=a.match(ce))?String.fromCharCode(parseInt(b[1],16)):""},v(he,ge);var ie={"*::class":9,"*::dir":0,"*::id":4,"*::lang":0,"*::onclick":2,"*::ondblclick":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::style":3,"*::title":0,"*::accesskey":0,"*::tabindex":0,"*::onfocus":2,"*::onblur":2,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::rel":0,"a::rev":0,"a::shape":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,"area::href":1,"area::nohref":0,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,"colgroup::width":0,"del::cite":1,"del::datetime":0,"dir::compact":0,"div::align":0,"dl::compact":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::longdesc":1,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::autocomplete":0,"input::align":0,"input::alt":0,"input::checked":0,"input::disabled":0,"input::ismap":0,"input::maxlength":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::readonly":0,"input::size":0,"input::src":1,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"ol::compact":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"p::align":0,"pre::width":0,"q::cite":1,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::size":0,"select::tabindex":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::cols":0,"textarea::disabled":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::readonly":0,"textarea::rows":0,"textarea::tabindex":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"ul::compact":0,"ul::type":0};he.prototype.Ld=function(a,b){if(!this.ma&&Td.hasOwnProperty(a)){var c=Td[a];if(!(32&c))if(16&c)this.ma=!(2&c);else{for(var d=b,f=0;f<d.length;f+=2){var l,e=d[f],h=d[f+1],k=m;if(l=a+"::"+e,(ie.hasOwnProperty(l)||(l="*::"+e,ie.hasOwnProperty(l)))&&(k=ie[l]),k!==m)switch(k){case 0:break;case 2:case 3:h=m;break;case 4:case 5:case 6:case 7:case 8:case 9:h=this.Ob?this.Ob(h):h;break;case 1:h=this.Pd&&this.Pd(h);break;case 11:h&&"#"===h.charAt(0)?(h=this.Ob?this.Ob(h):h)&&(h="#"+h):h=m;break;default:h=m}else h=m;d[f+1]=h}if(b=d){for(2&c||this.P.push(a),this.ha.append("<",a),c=0,d=b.length;d>c;c+=2)f=b[c],e=b[c+1],e!==m&&e!==i&&this.ha.append(" ",f,'="',e.replace(Ud,"&amp;").replace(Wd,"&lt;").replace(Xd,"&gt;").replace(Yd,"&#34;").replace(Zd,"&#61;"),'"');this.ha.append(">")}}}},he.prototype.od=function(a){if(this.ma)this.ma=n;else if(Td.hasOwnProperty(a)){var b=Td[a];if(!(50&b)){if(1&b)for(b=this.P.length;0<=--b;){var c=this.P[b];if(c===a)break;if(!(1&Td[c]))return}else for(b=this.P.length;0<=--b&&this.P[b]!==a;);if(!(0>b)){for(var d=this.P.length;--d>b;)c=this.P[d],1&Td[c]||this.ha.append("</",c,">");this.P.length=b,this.ha.append("</",a,">")}}}},he.prototype.Jd=function(a){this.ma||this.ha.append(a)},he.prototype.hd=function(a){this.ma||this.ha.append(a)},v(me,Jc),q=me.prototype,q.A=m,q.Ib=m,q.uc=m,q.Jb=m,q.oa=-1,q.na=-1,q.mc=n;var oe={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},pe={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},qe=D||F&&G("525"),re=Oa&&E;q=me.prototype,q.Xd=function(a){F&&(17==this.oa&&!a.ctrlKey||18==this.oa&&!a.altKey)&&(this.na=this.oa=-1),qe&&!je(a.keyCode,this.oa,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.na=E?le(a.keyCode):a.keyCode,re&&(this.mc=a.altKey))},q.Zd=function(a){this.na=this.oa=-1,this.mc=a.altKey},q.handleEvent=function(a){var c,d,b=a.n,f=b.altKey;D&&"keypress"==a.type?(c=this.na,d=13!=c&&27!=c?b.keyCode:0):F&&"keypress"==a.type?(c=this.na,d=0<=b.charCode&&63232>b.charCode&&ke(c)?b.charCode:0):Ta?(c=this.na,d=ke(c)?b.keyCode:0):(c=b.keyCode||this.na,d=b.charCode||0,re&&(f=this.mc),Oa&&63==d&&224==c&&(c=191));var e=c,h=b.keyIdentifier;c?c>=63232&&c in oe?e=oe[c]:25==c&&a.shiftKey&&(e=9):h&&h in pe&&(e=pe[h]),a=e==this.oa,this.oa=e,b=new se(e,d,a,b),b.altKey=f,this.dispatchEvent(b)},q.d=aa("A"),q.detach=function(){this.Ib&&(O(this.Ib),O(this.uc),O(this.Jb),this.Jb=this.uc=this.Ib=m),this.A=m,this.na=this.oa=-1},v(se,sc),fa(te),te.prototype.ge=0,te.qb(),v(ue,Jc),ue.prototype.ae=te.qb();var ve=m;q=ue.prototype,q.Hb=m,q.fa=n,q.A=m,q.pa=m,q.ya=m,q.ib=m,q.Ka=m,q.oe=n,q.d=aa("A"),q.Eb=function(){return this.sc||(this.sc=new Gc(this))},q.Hc=function(a){this.ya&&this.ya!=a&&g(Error("Method not supported")),ue.H.Hc.call(this,a)},q.qd=aa("lb"),q.kb=function(a){this.fa&&g(Error("Component already rendered")),a&&this.hb(a)?(this.oe=j,this.lb&&this.lb.L==J(a)||(this.lb=sb(a)),this.kd(a),this.Na()):g(Error("Invalid element to decorate"))},q.hb=ba(j),q.kd=function(a){this.A=a},q.Na=function(){function a(a){!a.fa&&a.d()&&a.Na()}this.fa=j,this.ib&&B(this.ib,a,i)},q.Db=function(){function a(a){a.fa&&a.Db()}this.ib&&B(this.ib,a,i),this.sc&&this.sc.Rb(),this.fa=n},q.ob=aa("A"),q.Wa=function(a){this.fa&&g(Error("Component already rendered")),this.pa=a},q.removeChild=function(a,b){if(a){var d,c=t(a)?a:a.Hb||(a.Hb=":"+(a.ae.ge++).toString(36));this.Ka&&c?(d=this.Ka,d=(c in d?d[c]:i)||m):d=m,a=d,c&&a&&(d=this.Ka,c in d&&delete d[c],C(this.ib,a),b&&(a.Db(),a.A&&zb(a.A)),c=a,c==m&&g(Error("Unable to set parent component")),c.ya=m,ue.H.Hc.call(c,m))}return a||g(Error("Child is not in parent component")),a};var ye;fa(xe),q=xe.prototype,q.ob=function(a){return a},q.mb=function(a,b,c){if(a=a.d?a.d():a)if(D&&!G("7")){var d=ze(ib(a),b);d.push(b),qa(c?jb:lb,a).apply(m,d)}else c?jb(a,b):lb(a,b)},q.hb=ba(j),q.kb=function(a,b){if(b.id){var c=b.id;if(a.ya&&a.ya.Ka){var d=a.ya.Ka,f=a.Hb;f in d&&delete d[f],d=a.ya.Ka,c in d&&g(Error('The object already contains the key "'+c+'"')),d[c]=a}a.Hb=c}(c=this.ob(b))&&c.firstChild?(c=c.firstChild.nextSibling?Ga(c.childNodes):c.firstChild,a.jb=c):a.jb=m;var e=0,h=this.pb(),k=this.pb(),l=n,r=n,c=n,d=ib(b);if(B(d,function(a){if(l||a!=h)if(r||a!=k){var b=e;if(!this.Od){this.Bb||Ae(this);var f,c=this.Bb,d={};for(f in c)d[c[f]]=f;this.Od=d}a=parseInt(this.Od[a],10),e=b|(isNaN(a)?0:a)}else r=j;else l=j,k==h&&(r=j)},this),a.r=e,l||(d.push(h),k==h&&(r=j)),r||d.push(k),(f=a.da)&&d.push.apply(d,f),D&&!G("7")){var w=ze(d);0<w.length&&(d.push.apply(d,w),c=j)}return(!l||!r||f||c)&&(b.className=d.join(" ")),a.isEnabled()||this.Xa(b,1,j),8&a.r&&this.Xa(b,8,j),16&a.U&&this.Xa(b,16,!!(16&a.r)),64&a.U&&this.Xa(b,64,!!(64&a.r)),b},q.Ub=function(a,b){var c=!b,d=D||Ta?a.getElementsByTagName("*"):m;if(bd){if(c=c?"none":"",a.style[bd]=c,d)for(var e,f=0;e=d[f];f++)e.style[bd]=c}else if((D||Ta)&&(c=c?"on":"",a.setAttribute("unselectable",c),d))for(f=0;e=d[f];f++)e.setAttribute("unselectable",c)},q.Wa=function(a,b){this.mb(a,this.pb()+"-rtl",b)},q.Dd=function(a){var b;return 32&a.U&&(b=a.Oa())?Cb(b):n},q.Gc=function(a,b){var c;if(32&a.U&&(c=a.Oa())){if(!b&&32&a.r){try{c.blur()}catch(d){}32&a.r&&a.rd()}Cb(c)!=b&&(b?c.tabIndex=0:(c.tabIndex=-1,c.removeAttribute("tabIndex")))}},q.O=function(a,b,c){var d=a.d();if(d){var f;this.Bb||Ae(this),(f=this.Bb[b])&&this.mb(a,f,c),this.Xa(d,b,c)}},q.Xa=function(a,b,c){ye||(ye={1:"disabled",8:"selected",16:"checked",64:"expanded"}),(b=ye[b])&&a.setAttribute("aria-"+b,c)},q.qa=function(a,b){var c=this.ob(a);if(c&&(yb(c),b))if(t(b))if("textContent"in c)c.textContent=b;else if(c.firstChild&&3==c.firstChild.nodeType){for(;c.lastChild!=c.firstChild;)c.removeChild(c.lastChild);c.firstChild.data=b}else yb(c),c.appendChild(J(c).createTextNode(b));else{var d=function(a){if(a){var b=J(c);c.appendChild(t(a)?b.createTextNode(a):a)}};ha(b)?B(b,d):!ia(b)||"nodeType"in b?d(b):B(Ga(b),d)}},q.Oa=function(a){return a.d()},q.pb=ba("goog-control");var Be={};v(Ce,ue),q=Ce.prototype,q.jb=m,q.r=0,q.U=39,q.oc=255,q.ne=0,q.Xb=j,q.da=m,q.tc=j,q.lc=n,q.je=m,q.Oa=function(){return this.C.Oa(this)},q.mb=function(a,b){b?a&&(this.da?Fa(this.da,a)||this.da.push(a):this.da=[a],this.C.mb(this,a,j)):a&&this.da&&(C(this.da,a),0==this.da.length&&(this.da=m),this.C.mb(this,a,n))},q.ob=function(){return this.C.ob(this.d())},q.hb=function(a){return this.C.hb(a)},q.kd=function(a){this.A=a=this.C.kb(this,a);var b=this.je||i;b&&a.setAttribute("role",b),this.lc||this.C.Ub(a,n),this.Xb="none"!=a.style.display},q.Na=function(){Ce.H.Na.call(this);var a=this.C;if(this.pa==m&&(this.pa=ad(this.fa?this.A:this.lb.L.body)),this.pa&&a.Wa(this.d(),j),this.isEnabled()&&a.Gc(this,this.Xb),-2&this.U&&(this.tc&&Ee(this,j),32&this.U&&(a=this.Oa()))){var b=this.vc||(this.vc=new me);ne(b,a),P(P(P(this.Eb(),b,"key",this.Yd),a,"focus",this.Wd),a,"blur",this.rd)}},q.Db=function(){Ce.H.Db.call(this),this.vc&&this.vc.detach(),this.Xb&&this.isEnabled()&&this.C.Gc(this,n)},q.qa=function(a){this.C.qa(this.d(),a),this.jb=a},q.Wa=function(a){Ce.H.Wa.call(this,a);var b=this.d();b&&this.C.Wa(b,a)},q.Ub=function(a){this.lc=a;var b=this.d();b&&this.C.Ub(b,a)},q.isEnabled=function(){return!(1&this.r)},q.setActive=function(a){Ge(this,4,a)&&this.O(4,a)},q.O=function(a,b){this.U&a&&b!=!!(this.r&a)&&(this.C.O(this,a,b),this.r=b?this.r|a:this.r&~a)},q.wd=function(a){(!a.relatedTarget||!Bb(this.d(),a.relatedTarget))&&this.dispatchEvent("enter")&&this.isEnabled()&&X(this,2)&&Fe(this,j)},q.vd=function(a){a.relatedTarget&&Bb(this.d(),a.relatedTarget)||!this.dispatchEvent("leave")||(X(this,4)&&this.setActive(n),X(this,2)&&Fe(this,n))},q.Gb=ea,q.ud=function(a){this.isEnabled()&&(X(this,2)&&Fe(this,j),uc(a)&&(X(this,4)&&this.setActive(j),this.C.Dd(this)&&this.Oa().focus())),!this.lc&&uc(a)&&a.preventDefault()},q.xd=function(a){this.isEnabled()&&(X(this,2)&&Fe(this,j),4&this.r&&He(this,a)&&X(this,4)&&this.setActive(n))},q.sd=function(a){this.isEnabled()&&He(this,a)},q.Wd=function(){X(this,32)&&Ge(this,32,j)&&this.O(32,j)},q.rd=function(){X(this,4)&&this.setActive(n),X(this,32)&&Ge(this,32,n)&&this.O(32,n)},q.Yd=function(a){return this.Xb&&this.isEnabled()&&13==a.keyCode&&He(this,a)?(a.preventDefault(),a.stopPropagation(),j):n},u(Ce)||g(Error("Invalid component class "+Ce)),u(xe)||g(Error("Invalid renderer class "+xe));var Ie=ka(Ce);Be[Ie]=xe,u(Ke)||g(Error("Invalid decorator function "+Ke)),v(Le,xe),fa(Le),q=Le.prototype,q.kb=function(a,b){return De(a),a.oc&=-256,a.fa&&32&a.r&&g(Error("Component already rendered")),32&a.r&&a.O(32,n),a.U&=-33,Le.H.kb.call(this,a,b),a.qa(b.value),b},q.hb=function(a){return"TEXTAREA"==a.tagName},q.Wa=ea,q.Dd=function(a){return a.isEnabled()},q.Gc=ea,q.O=function(a,b,c){Le.H.O.call(this,a,b,c),(a=a.d())&&1==b&&(a.disabled=c)},q.Xa=ea,q.qa=function(a,b){a&&(a.value=b)},q.pb=ba("goog-textarea"),v(Me,Ce);var Ne=E||F;q=Me.prototype,q.Ta=n,q.la=0,q.de=0,q.Gd=0,q.zd=n,q.Nb=n,q.Fc=n,q.Ec=n,q.qa=function(a){Me.H.qa.call(this,a),this.d()&&this.Pa()},q.Na=function(){Me.H.Na.call(this);var a=this.d();Q(a,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"}),this.sb=dd(a,"padding"),this.fd=gd(a),P(P(P(P(this.Eb(),a,"scroll",this.Pa),a,"focus",this.Pa),a,"keyup",this.Pa),a,"mouseup",this.fe),this.d()&&this.Pa()},q.Pa=function(){if(!this.Ta){var a=n;this.Ta=j;var b=this.d(),c=this.la;if(b.scrollHeight){var d=n,f=n,e=Re(this),h=b.offsetHeight,k=Pe(this),l=Qe(this);k&&k>e?(Se(this,k),d=j):l&&e>l?(Se(this,l),b.style.overflowY="",f=j):h!=e?Se(this,e):this.la||(this.la=e),!d&&!f&&Ne&&(a=j)}else Te(this);this.Ta=n,a&&(a=this.d(),this.Ta||(this.Ta=j,b=n,a.value||(a.value=" ",b=j),(f=a.scrollHeight)?(e=Re(this),d=Pe(this),h=Qe(this),!(d&&d>=e)&&!(h&&e>=h)&&(h=this.sb,a.style.paddingBottom=h.bottom+1+"px",Re(this)==e&&(a.style.paddingBottom=h.bottom+f+"px",a.scrollTop=0,f=Re(this)-f,f>=d?Se(this,f):Se(this,d)),a.style.paddingBottom=h.bottom+"px")):Te(this),b&&(a.value=""),this.Ta=n)),c!=this.la&&this.dispatchEvent("resize")}},q.fe=function(){var a=this.d(),b=a.offsetHeight;a.filters&&a.filters.length&&(a=a.filters.item("DXImageTransform.Microsoft.DropShadow"))&&(b-=a.offX),b!=this.la&&(this.la=this.Gd=b)},D&&G(8);var Xe={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","	":"&#9;","\n":"&#10;","":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","":"&#133;"," ":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"},Ve=/[\x00\x22\x26\x27\x3c\x3e]/g;q=$e.prototype,q.kc=function(a){var b=wb("div","annotorious-editor-field");t(a)?b.innerHTML=a:u(a)?this.Za.push({z:b,qc:a}):Ab(a)&&b.appendChild(a),a=this.Rd,a.parentNode&&a.parentNode.insertBefore(b,a)},q.open=function(a){(this.wb=this.ad=a)&&this.Ja.qa(String(a.text)),U(this.element,j),this.Ja.d().focus(),B(this.Za,function(b){var c=b.qc(a);t(c)?b.z.innerHTML=c:Ab(c)&&(yb(b.z),b.z.appendChild(c))}),this.e.fireEvent("onEditorShown",a)},q.close=function(){U(this.element,n),this.Ja.qa("")},q.setPosition=function(a){Pc(this.element,a.x,a.y)},q.pd=function(){var a;a=this.Ja.d().value;var b=new Qd;return(new Rd).parse(new he(b,function(a){return a},i),a),a=b.toString(),this.wb?this.wb.text=a:this.wb=new Fd(this.Sd.src,a,this.e.xa().getShape()),this.wb},$e.prototype.addField=$e.prototype.kc,$e.prototype.getAnnotation=$e.prototype.pd,af.prototype.Yb=function(){var a=this;this.$c=N(this.Wc,"mouseover",function(){a.show(),window.clearTimeout(a.dc)}),this.Zc=N(this.Wc,"mouseout",function(){cf(a)}),this.e.addHandler("onMouseOverItem",this.hc),this.e.addHandler("onMouseOutOfItem",this.gc)},af.prototype.xb=function(){O(this.$c),O(this.Zc),this.e.Sb("onMouseOverItem",this.hc),this.e.Sb("onMouseOutOfItem",this.gc)},af.prototype.show=function(){window.clearTimeout(this.dc),T(this.Yc,.8);var a=this;this.dc=window.setTimeout(function(){cf(a)},3e3)},af.prototype.destroy=function(){this.xb(),delete this.$c,delete this.Zc,delete this.hc,delete this.gc,zb(this.element)},q=df.prototype,q.kc=function(a){var b=wb("div","annotorious-popup-field");t(a)?b.innerHTML=a:u(a)?this.Za.push({z:b,qc:a}):Ab(a)&&b.appendChild(a),this.element.appendChild(b)},q.startHideTimer=function(){if(this.bc=n,!this.eb){var a=this;this.eb=window.setTimeout(function(){a.e.fireEvent("beforePopupHide",a),a.bc||(T(a.element,0),Q(a.element,"pointer-events","none"),T(a.Q,.9),delete a.eb)},150)}},q.clearHideTimer=function(){this.bc=j,this.eb&&(window.clearTimeout(this.eb),delete this.eb)},q.show=function(a,b){if(this.clearHideTimer(),b&&this.setPosition(b),a&&this.setAnnotation(a),this.$b&&window.clearTimeout(this.$b),T(this.Q,.9),ef){var c=this;this.$b=window.setTimeout(function(){T(c.Q,0)},1e3)}T(this.element,.9),Q(this.element,"pointer-events","auto"),this.e.fireEvent("onPopupShown",a)},q.setPosition=function(a){Pc(this.element,new I(a.x,a.y))},q.setAnnotation=function(a){this.f=a,this.Td.innerHTML=a.text?a.text.replace(/\n/g,"<br/>"):'<span class="annotorious-popup-empty">Aucun commentaire</span>',"editable"in a&&a.editable==n?U(this.Q,n):U(this.Q,j),B(this.Za,function(b){var c=b.qc(a);t(c)?b.z.innerHTML=c:Ab(c)&&(yb(b.z),b.z.appendChild(c))})},df.prototype.addField=df.prototype.kc,q=ff.prototype,q.G=function(a){this.k.G(a)},q.addHandler=function(a,b){this.t.addHandler(a,b)},q.fireEvent=function(a,b,c){return this.t.fireEvent(a,b,c)},q.xa=aa("T"),q.o=function(a){this.k.o(a)},q.v=function(a){this.k.v(a)},q.Sb=function(a,b){this.t.Sb(a,b)},q.stopSelection=function(a){U(this.c,n),this.fb&&(this.fb(),delete this.fb),this.T.stopSelection(),a&&this.k.G(a)},q=gf.prototype,q.G=function(a,b){b&&(b==this.f&&delete this.f,C(this.Da,b),delete this.aa[Ed(b.shapes[0])]),this.Da.push(a);var c=a.shapes[0];if("pixel"!=c.units)var d=this,c=Dd(c,function(a){return d.e.wa(a)});this.aa[Ed(a.shapes[0])]=c,kf(this)},q.v=function(a){a==this.f&&delete this.f,C(this.Da,a),delete this.aa[Ed(a.shapes[0])],kf(this)},q.B=function(){return Ga(this.Da)},q.o=function(a){(this.f=a)?this.yb=j:this.e.popup.startHideTimer(),kf(this),this.ra=j},q.nb=function(a,b){var c=[],d=this;return B(this.Da,function(f){var e;if(e=d.aa[Ed(f.shapes[0])],"rect"==e.type)e=a<e.geometry.x||b<e.geometry.y||a>e.geometry.x+e.geometry.width||b>e.geometry.y+e.geometry.height?n:j;else if("polygon"==e.type){e=e.geometry.points;for(var h=n,k=e.length-1,l=0;l<e.length;l++)e[l].y>b!=e[k].y>b&&a<(e[k].x-e[l].x)*(b-e[l].y)/(e[k].y-e[l].y)+e[l].x&&(h=!h),k=l;e=h}else e=n;e&&c.push(f)}),z.sort.call(c,function(a,b){var c=d.aa[Ed(a.shapes[0])],k=d.aa[Ed(b.shapes[0])];return Ad(c)-Ad(k)}||Ja),c};var mf=!1,ef=!mf,nf=mf?"touchstart":"mousedown",of=mf?"touchenter":"mouseover",hf=mf?"touchmove":"mousemove",pf=mf?"touchend":"mouseup",qf=mf?"touchleave":"mouseout";q=sf.prototype,q.init=function(a,b){this.Qc="#000000",this.Sc="#ffffff",this.Kc=n,this.Mc="#000000",this.Oc="#fff000",this.Lc=n,this.Nc=this.Tc=this.Rc=1,this.Pc=1.2,this.Z=b,this.e=a,this.sa=b.getContext("2d"),this.sa.lineWidth=1,this.cc=n},q.Yb=function(){var a=this,b=this.Z;this.ec=N(this.Z,hf,function(c){if(c=rf(c,b),a.cc){a.w={x:c.x,y:c.y},a.sa.clearRect(0,0,b.width,b.height);var c=a.w.x-a.I.x,d=a.w.y-a.I.y;a.drawShape(a.sa,{type:"rect",geometry:{x:c>0?a.I.x:a.w.x,y:d>0?a.I.y:a.w.y,width:Math.abs(c),height:Math.abs(d)}})}}),this.fc=N(b,pf,function(c){var d=rf(c,b),f=a.getShape(),c=c.n?c.n:c;a.cc=n,f?(a.xb(),a.e.fireEvent("onSelectionCompleted",{mouseEvent:c,shape:f,viewportBounds:a.getViewportBounds()})):(a.e.fireEvent("onSelectionCanceled"),c=a.e.nb(d.x,d.y),0<c.length&&a.e.o(c[0]))})},q.xb=function(){this.ec&&(O(this.ec),delete this.ec),this.fc&&(O(this.fc),delete this.fc)},q.getName=ba("rect_drag"),q.getSupportedShapeType=ba("rect"),q.ga=function(a){a.hasOwnProperty("outline")&&(this.Qc=a.outline),a.hasOwnProperty("stroke")&&(this.Sc=a.stroke),a.hasOwnProperty("fill")&&(this.Kc=a.fill),a.hasOwnProperty("hi_outline")&&(this.Mc=a.hi_outline),a.hasOwnProperty("hi_stroke")&&(this.Oc=a.hi_stroke),a.hasOwnProperty("hi_fill")&&(this.Lc=a.hi_fill),a.hasOwnProperty("outline_width")&&(this.Rc=a.outline_width),a.hasOwnProperty("stroke_width")&&(this.Tc=a.stroke_width),a.hasOwnProperty("hi_outline_width")&&(this.Nc=a.hi_outline_width),a.hasOwnProperty("hi_stroke_width")&&(this.Pc=a.hi_stroke_width)},q.startSelection=function(a,b){var c={x:a,y:b};this.cc=j,this.Yb(c),this.I=new W(a,b),this.e.fireEvent("onSelectionStarted",{offsetX:a,offsetY:b}),Q(document.body,"-webkit-user-select","none")},q.stopSelection=function(){this.xb(),this.sa.clearRect(0,0,this.Z.width,this.Z.height),Q(document.body,"-webkit-user-select","auto"),delete this.w},q.getShape=function(){if(this.w&&3<Math.abs(this.w.x-this.I.x)&&3<Math.abs(this.w.y-this.I.y)){var a=this.getViewportBounds(),a=this.e.Wb({x:a.left,y:a.top,width:a.right-a.left,height:a.bottom-a.top});return new zd("rect",a)}},q.getViewportBounds=function(){var a,b;this.w.x>this.I.x?(a=this.w.x,b=this.I.x):(a=this.I.x,b=this.w.x);var c,d;return this.w.y>this.I.y?(c=this.I.y,d=this.w.y):(c=this.w.y,d=this.I.y),{top:c,right:a,bottom:d,left:b}},q.drawShape=function(a,b,c){var d,f,e,h;"rect"==b.type&&("style"in b?c?(d=b.style.hi_fill,c=b.style.hi_stroke,f=b.style.hi_outline,e=b.style.xe,h=b.style.ye):(d=b.style.fill,c=b.style.stroke,f=b.style.outline,e=b.style.Ce,h=b.style.Ee):c?(d=this.Lc,c=this.Oc,f=this.Mc,e=this.Nc,h=this.Pc):(d=this.Kc,c=this.Sc,f=this.Qc,e=this.Rc,h=this.Tc),b=b.geometry,f&&(a.lineJoin="round",a.lineWidth=e,a.strokeStyle=f,a.strokeRect(b.x+e/2,b.y+e/2,b.width-e,b.height-e)),c&&(a.lineJoin="miter",a.lineWidth=h,a.strokeStyle=c,a.strokeRect(b.x+e+h/2,b.y+e+h/2,b.width-2*e-h,b.height-2*e-h)),d&&(a.lineJoin="miter",a.lineWidth=h,a.fillStyle=d,a.fillRect(b.x+e+h/2,b.y+e+h/2,b.width-2*e-h,b.height-2*e-h)))},v(uf,ff),q=uf.prototype,q.ba=p(),q.ed=function(a){a.init(this,this.c),this.Ia.push(a)},q.destroy=function(){var a=this.$;a.style.margin=this.bd.margin,a.style.padding=this.bd.padding;var b=this.element,c=b.parentNode;c&&c.replaceChild(a,b)},q.pc=function(a){this.k.v(a);var b=Ea(this.Ia,function(b){return b.getSupportedShapeType()==a.shapes[0].type});if(b){U(this.c,j),this.k.o(n);var c=this.c.getContext("2d"),d=a.shapes[0],f=this,d="pixel"==d.units?d:Dd(d,function(a){return f.wa(a)});b.drawShape(c,d)}b=Bd(a.shapes[0]).geometry,b="pixel"==a.shapes[0].units?new W(b.x,b.y+b.height):this.wa(new W(b.x,b.y+b.height)),this.editor.setPosition(new W(b.x+this.$.offsetLeft,b.y+4+this.$.offsetTop)),this.editor.open(a)},q.wa=function(a){var b=Yc(this.$);return a.width?{x:a.x*b.width,y:a.y*b.height,width:a.width*b.width,height:a.height*b.height}:{x:a.x*b.width,y:a.y*b.height}},q.xa=aa("Ga"),q.B=function(){return this.k.B()},q.nb=function(a,b){return Ga(this.k.nb(a,b))},q.ka=aa("Ia"),q.getItem=function(){return{src:vf(this.$),element:this.$}},q.ea=function(){U(this.ia,n)},q.M=function(){this.ic=n,this.ab&&(this.ab.destroy(),delete this.ab)},q.Kd=function(a){(this.Ga=Ea(this.Ia,function(b){return b.getName()==a}))||console.log('WARNING: selector "'+a+'" not available')},q.ga=function(a){B(this.Ia,function(b){b.ga(a)}),kf(this.k)},q.Ca=function(){U(this.ia,j)},q.Y=function(){this.ic=j,this.ab||(this.ab=new af(this,this.element))},q.stopSelection=function(a){ef&&U(this.c,n),this.Ga.stopSelection(),a&&this.k.G(a)},q.Wb=function(a){var b=Yc(this.$);return a.width?{x:a.x/b.width,y:a.y/b.height,width:a.width/b.width,height:a.height/b.height}:{x:a.x/b.width,y:a.y/b.height}},uf.prototype.addSelector=uf.prototype.ed,uf.prototype.fireEvent=uf.prototype.fireEvent,uf.prototype.setCurrentSelector=uf.prototype.Kd,uf.prototype.toItemCoordinates=uf.prototype.Wb,v(wf,Gd),wf.prototype.Fb=function(a){return vf(a)},wf.prototype.zc=function(a){return new uf(a)},wf.prototype.Vb=function(a){return Ab(a)?"IMG"==a.tagName:n},q=yf.prototype,q.destroy=function(){this.ub.destroy()},q.bb=function(){var a=this.F.Lb.div,b=$c(a),c=Uc(a,this.V.div),a=c.y,c=c.x,d=b.width,f=b.height,b=$c(this.j.element),a={y:a+f+5};c+b.width>this.R.width?(nb(this.j.element,"top-left","top-right"),a.x=c+d-b.width):(nb(this.j.element,"top-right","top-left"),a.x=c),0>a.x&&(a.x=0),a.x+b.width>this.R.width&&(a.x=this.R.width-b.width),a.y+b.height>this.R.height&&(a.y=this.R.height-b.height),this.j.setPosition(a)},q.jc=function(a){this.j.setAnnotation(a),this.bb(),this.j.show()},q.gb=function(a,b){a?(Uc(a.Lb.div,this.V.div),za("height"),Q(a.rb,"border-color","#fff000"),this.F=a,this.jc(a.K)):delete this.F,b&&Q(b.rb,"border-color","#fff")},q.G=function(a){var b=a.shapes[0].geometry,b=new OpenLayers.Marker.Box(new OpenLayers.Bounds(b.x,b.y,b.x+b.width,b.y+b.height));jb(b.div,"annotorious-ol-boxmarker-outer"),Q(b.div,"border",m);var c=wb("div","annotorious-ol-boxmarker-inner");Xc(c,"100%","100%"),b.div.appendChild(c);var d={K:a,Lb:b,rb:c},f=this;N(c,"mouseover",function(){f.F||f.gb(d),f.ta=d}),N(c,"mouseout",function(){delete f.ta,f.j.startHideTimer()}),this.S.push(d),z.sort.call(this.S,function(a,b){return Ad(b.K.shapes[0])-Ad(a.K.shapes[0])}||Ja);var e=1e4;B(this.S,function(a){Q(a.Lb.div,"z-index",e),e++}),this.ub.addMarker(b)},q.v=function(a){var b=Ea(this.S,function(b){return b.K==a});b&&(C(this.S,b),this.ub.removeMarker(b.Lb))},q.B=p(),q.o=function(a){a||this.j.startHideTimer()},v(zf,ff),q=zf.prototype,q.Y=p(),q.M=p(),q.ba=function(a){Q(this.c,"pointer-events","auto");var b=this;U(this.c,j),T(this.J,.8),window.setTimeout(function(){T(b.J,0)},2e3),a&&(this.fb=a)},q.destroy=function(){this.k.destroy(),zb(this.J),zb(this.c)},q.ed=p(),q.pc=function(a){this.k.v(a);var b=this.T,c=this;if(b){U(this.c,j),this.k.o(i);var d=this.c.getContext("2d"),f=Dd(a.shapes[0],function(a){return c.wa(a)});console.log(f),b.drawShape(d,f),b=Bd(f).geometry,this.editor.setPosition(new W(b.x,b.y+b.height)),this.editor.open(a)}},q.wa=function(a){var b=this.V.getViewPortPxFromLonLat(new OpenLayers.LonLat(a.x,a.y));return(a=a.width?this.V.getViewPortPxFromLonLat(new OpenLayers.LonLat(a.x+a.width,a.y+a.height)):n)?{x:b.x,y:a.y,width:a.x-b.x+2,height:b.y-a.y+2}:{x:b.x,y:b.y}},q.B=p(),q.ka=p(),q.getItem=function(){return{src:"map://openlayers/something"}},q.tb=p(),q.Wb=function(a){var b=this.V.getLonLatFromPixel(new OpenLayers.Pixel(a.x,a.y));return(a=a.width?new OpenLayers.Pixel(a.x+a.width-2,a.y+a.height-2):n)?(a=this.V.getLonLatFromPixel(a),b={x:b.lon,y:a.lat,width:a.lon-b.lon,height:b.lat-a.lat},console.log(b),b):{x:b.lon,y:b.lat}},v(Af,Gd),Af.prototype.Fb=ba("map://openlayers/something"),Af.prototype.zc=function(a){return new zf(a)},Af.prototype.Vb=function(a){return a instanceof OpenLayers.Map},q=Bf.prototype,q.bb=function(){var a=this.W.element,b=this.F.Ac,c=$c(b),b=Uc(b,a),a=b.y,b=b.x,d=c.width,f=c.height,c=$c(this.j.element),a={x:b,y:a+f+12};nb(this.j.element,"top-right","top-left"),this.W.isFullPage()||(b+c.width>this.R.width&&(nb(this.j.element,"top-left","top-right"),a.x=b+d-c.width),0>a.x&&(a.x=0),a.x+c.width>this.R.width&&(a.x=this.R.width-c.width),a.y+c.height>this.R.height&&(a.y=this.R.height-c.height)),this.j.setPosition(a)},q.jc=function(a){this.j.setAnnotation(a),this.bb(),this.j.show()},q.gb=function(a,b){a?(Q(a.rb,"border-color","#fff000"),this.F=a,this.jc(a.K)):delete this.F,b&&Q(b.rb,"border-color","#fff")},q.G=function(a){var b=a.shapes[0].geometry,c=wb("div","annotorious-ol-boxmarker-outer"),d=wb("div","annotorious-ol-boxmarker-inner");Xc(d,"100%","100%"),c.appendChild(d);var b=new OpenSeadragon.Rect(b.x,b.y,b.width,b.height),f={K:a,Ac:c,rb:d},e=this;N(d,"mouseover",function(){e.F||e.gb(f),e.ta=f}),N(d,"mouseout",function(){delete e.ta,e.j.startHideTimer()}),this.S.push(f),z.sort.call(this.S,function(a,b){return Ad(b.K.shapes[0])-Ad(a.K.shapes[0])}||Ja);var h=1e4;B(this.S,function(a){Q(a.Ac,"z-index",h),h++}),this.W.drawer.addOverlay(c,b)},q.v=function(a){var b=Ea(this.S,function(b){return b.K==a});b&&(C(this.S,b),this.W.drawer.removeOverlay(b.Ac))},q.B=p(),q.o=p(),v(Cf,ff),q=Cf.prototype,q.Y=p(),q.M=p(),q.ba=function(a){Q(this.c,"pointer-events","auto");var b=this;U(this.c,j),T(this.J,.8),window.setTimeout(function(){T(b.J,0)},2e3),a&&(this.fb=a)},q.pc=function(a){this.k.v(a);var b=this.T,c=this;if(b){U(this.c,j),this.k.o(i);var d=this.c.getContext("2d"),f=Dd(a.shapes[0],function(a){return c.wa(a)});b.drawShape(d,f),b=Bd(f).geometry,this.editor.setPosition(new W(b.x,b.y+b.height+4)),this.editor.open(a)}},q.wa=function(a){var b=qd(this.element);b.top+=window.pageYOffset,b.left+=window.pageXOffset;var c=new OpenSeadragon.Point(a.x,a.y),a=a.width?new OpenSeadragon.Point(a.x+a.width,a.y+a.height):n,c=this.W.viewport.viewportToWindowCoordinates(c);return a?(a=this.W.viewport.viewportToWindowCoordinates(a),{x:c.x-b.left,y:c.y-b.top,width:a.x-c.x+2,height:a.y-c.y+2}):c},q.B=p(),q.ka=p(),q.getItem=function(){return{src:"dzi://openseadragon/something"}},q.tb=p(),q.Wb=function(a){var b=qd(this.element);b.top+=window.pageYOffset,b.left+=window.pageXOffset;var c=new OpenSeadragon.Point(a.x+b.left,a.y+b.top),a=a.width?new OpenSeadragon.Point(a.x+b.left+a.width-2,a.y+b.top+a.height-2):n,c=this.W.viewport.windowToViewportCoordinates(c);return a?(a=this.W.viewport.windowToViewportCoordinates(a),{x:c.x,y:c.y,width:a.x-c.x,height:a.y-c.y}):c},v(Df,Gd),Df.prototype.Fb=ba("dzi://openseadragon/something"),Df.prototype.zc=function(a){return new Cf(a)},Df.prototype.Vb=function(a){return a.id&&0==a.id.indexOf("openseadragon")&&a.hasOwnProperty("drawer")?j:n},q=Y.prototype,q.ba=function(a,b){var c=i,d=i;if(t(a)?(c=a,d=b):u(a)&&(d=a),c){var f=Z(this,c);f&&f.ba(c,d)}else B(this.l,function(a){a.ba(d)})},q.G=function(a,b){var c;if(c=a.src,!(0<c.indexOf("://"))){var d=document.createElement("a");d.href=c,c=d.protocol+"//"+d.host+d.pathname}a.src=c,(c=Z(this,a.src))&&c.G(a,b)},q.addHandler=function(a,b){B(this.l,function(c){c.addHandler(a,b)})},q.zb=function(a,b){try{var c=new window.annotorious.plugin[a](b);"complete"==document.readyState?(c.initPlugin&&c.initPlugin(this),B(this.l,function(a){a.zb(c)})):this.cb.push(c)}catch(d){console.log("Could not load plugin: "+a)}},q.destroy=function(a){if(a){var b=Z(this,a);b&&b.destroy(a)}else B(this.l,function(a){a.destroy()})},q.xa=function(a){var b=Z(this,a);return b?b.xa(a):void 0},q.B=function(a){if(a){var b=Z(this,a);return b?b.B(a):[]}var c=[];return B(this.l,function(a){Ha(c,a.B())}),c},q.ka=function(a){var b=Z(this,a);return b?b.ka(a):[]},q.ea=function(a){if(a){var b=Z(this,a);b&&b.ea(a)}else B(this.l,function(a){a.ea()})},q.M=function(a){if(a){var b=Z(this,a);b&&b.M(a)}else B(this.l,function(a){a.M()})},q.o=function(a){if(a){var b=Z(this,a.src);b&&b.o(a)}else B(this.l,function(a){a.o()})},q.xc=function(a){Ef(this);var b=Ea(this.l,function(b){return b.Vb(a)});b?b.xc(a):g("Error: Annotorious does not support this media type in the current version or build configuration.")},q.Rb=function(a){var b=this;B(this.B(a),function(a){b.v(a)})},q.v=function(a){var b=Z(this,a.src);
b&&b.v(a)},q.reset=function(){B(this.l,function(a){a.destroy(),a.init()})},q.tb=function(a,b){var c=Z(this,a);c&&c.tb(a,b)},q.ga=function(a){B(this.l,function(b){b.ga(a)})},q.le=function(a){a?this.Y(i):this.M(i)},q.Ca=function(a){if(a){var b=Z(this,a);b&&b.Ca(a)}else B(this.l,function(a){a.Ca()})},q.Y=function(a){if(a){var b=Z(this,a);b&&b.Y(a)}else B(this.l,function(a){a.Y()})},window.anno=new Y,Y.prototype.activateSelector=Y.prototype.ba,Y.prototype.addAnnotation=Y.prototype.G,Y.prototype.addHandler=Y.prototype.addHandler,Y.prototype.addPlugin=Y.prototype.zb,Y.prototype.destroy=Y.prototype.destroy,Y.prototype.getActiveSelector=Y.prototype.xa,Y.prototype.getAnnotations=Y.prototype.B,Y.prototype.getAvailableSelectors=Y.prototype.ka,Y.prototype.hideAnnotations=Y.prototype.ea,Y.prototype.hideSelectionWidget=Y.prototype.M,Y.prototype.highlightAnnotation=Y.prototype.o,Y.prototype.makeAnnotatable=Y.prototype.xc,Y.prototype.removeAll=Y.prototype.Rb,Y.prototype.removeAnnotation=Y.prototype.v,Y.prototype.reset=Y.prototype.reset,Y.prototype.setActiveSelector=Y.prototype.tb,Y.prototype.setProperties=Y.prototype.ga,Y.prototype.showAnnotations=Y.prototype.Ca,Y.prototype.showSelectionWidget=Y.prototype.Y,window.annotorious||(window.annotorious={}),window.annotorious.plugin||(window.annotorious.plugin={}),window.annotorious.geometry||(window.annotorious.geometry={},window.annotorious.geometry.expand=Cd,window.annotorious.geometry.getBoundingRect=Bd),Y.prototype.setSelectionEnabled=Y.prototype.le,Annotorious=Y,function(){function _extend(target,source){if(!source||"function"==typeof source)return target;for(var attr in source)target[attr]=source[attr];return target}function _each(object,callback,args){var name,i=0,length=object.length,isObj=void 0===length||"function"==typeof object;if(args)if(isObj){for(name in object)if(callback.apply(object[name],args)===!1)break}else for(;length>i&&callback.apply(object[i++],args)!==!1;);else if(isObj){for(name in object)if(callback.call(object[name],name,object[name])===!1)break}else for(;length>i&&callback.call(object[i],i,object[i++])!==!1;);return object}function _ajax(options){var getXhr=function(callback){if(window.XMLHttpRequest)return callback(null,new XMLHttpRequest);if(window.ActiveXObject)try{return callback(null,new ActiveXObject("Msxml2.XMLHTTP"))}catch(e){return callback(null,new ActiveXObject("Microsoft.XMLHTTP"))}return callback(new Error)},encodeUsingUrlEncoding=function(data){if("string"==typeof data)return data;var result=[];for(var dataItem in data)data.hasOwnProperty(dataItem)&&result.push(encodeURIComponent(dataItem)+"="+encodeURIComponent(data[dataItem]));return result.join("&")},utf8=function(text){text=text.replace(/\r\n/g,"\n");for(var result="",i=0;i<text.length;i++){var c=text.charCodeAt(i);128>c?result+=String.fromCharCode(c):c>127&&2048>c?(result+=String.fromCharCode(c>>6|192),result+=String.fromCharCode(63&c|128)):(result+=String.fromCharCode(c>>12|224),result+=String.fromCharCode(c>>6&63|128),result+=String.fromCharCode(63&c|128))}return result},base64=function(text){var keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";text=utf8(text);var chr1,chr2,chr3,enc1,enc2,enc3,enc4,result="",i=0;do chr1=text.charCodeAt(i++),chr2=text.charCodeAt(i++),chr3=text.charCodeAt(i++),enc1=chr1>>2,enc2=(3&chr1)<<4|chr2>>4,enc3=(15&chr2)<<2|chr3>>6,enc4=63&chr3,isNaN(chr2)?enc3=enc4=64:isNaN(chr3)&&(enc4=64),result+=keyStr.charAt(enc1)+keyStr.charAt(enc2)+keyStr.charAt(enc3)+keyStr.charAt(enc4),chr1=chr2=chr3="",enc1=enc2=enc3=enc4="";while(i<text.length);return result},mergeHeaders=function(){for(var result=arguments[0],i=1;i<arguments.length;i++){var currentHeaders=arguments[i];for(var header in currentHeaders)currentHeaders.hasOwnProperty(header)&&(result[header]=currentHeaders[header])}return result},ajax=function(method,url,options,callback){"function"==typeof options&&(callback=options,options={}),options.cache=options.cache||!1,options.data=options.data||{},options.headers=options.headers||{},options.jsonp=options.jsonp||!1,options.async=void 0===options.async?!0:options.async;var payload,headers=mergeHeaders({accept:"*/*","content-type":"application/x-www-form-urlencoded;charset=UTF-8"},ajax.headers,options.headers);if(payload="application/json"===headers["content-type"]?JSON.stringify(options.data):encodeUsingUrlEncoding(options.data),"GET"===method){var queryString=[];if(payload&&(queryString.push(payload),payload=null),options.cache||queryString.push("_="+(new Date).getTime()),options.jsonp&&(queryString.push("callback="+options.jsonp),queryString.push("jsonp="+options.jsonp)),queryString=queryString.join("&"),queryString.length>1&&(url+=url.indexOf("?")>-1?"&"+queryString:"?"+queryString),options.jsonp){var head=document.getElementsByTagName("head")[0],script=document.createElement("script");return script.type="text/javascript",script.src=url,void head.appendChild(script)}}getXhr(function(err,xhr){if(err)return callback(err);xhr.open(method,url,options.async);for(var header in headers)headers.hasOwnProperty(header)&&xhr.setRequestHeader(header,headers[header]);xhr.onreadystatechange=function(){if(4===xhr.readyState){var data=xhr.responseText||"";if(!callback)return;callback(xhr.status,{text:function(){return data},json:function(){return JSON.parse(data)}})}},xhr.send(payload)})},http={authBasic:function(username,password){ajax.headers.Authorization="Basic "+base64(username+":"+password)},connect:function(url,options,callback){return ajax("CONNECT",url,options,callback)},del:function(url,options,callback){return ajax("DELETE",url,options,callback)},get:function(url,options,callback){return ajax("GET",url,options,callback)},head:function(url,options,callback){return ajax("HEAD",url,options,callback)},headers:function(headers){ajax.headers=headers||{}},isAllowed:function(url,verb,callback){this.options(url,function(status,data){callback(-1!==data.text().indexOf(verb))})},options:function(url,options,callback){return ajax("OPTIONS",url,options,callback)},patch:function(url,options,callback){return ajax("PATCH",url,options,callback)},post:function(url,options,callback){return ajax("POST",url,options,callback)},put:function(url,options,callback){return ajax("PUT",url,options,callback)},trace:function(url,options,callback){return ajax("TRACE",url,options,callback)}},methode=options.type?options.type.toLowerCase():"get";http[methode](options.url,options,function(status,data){200===status?options.success(data.json(),status,null):options.error(data.text(),status,null)})}function init(options,cb){"function"==typeof options&&(cb=options,options={}),options=options||{},f.extend(o,options),"string"==typeof o.ns&&(o.ns={namespaces:[o.ns],defaultNs:o.ns}),o.interpolationPrefixEscaped=f.regexEscape(o.interpolationPrefix),o.interpolationSuffixEscaped=f.regexEscape(o.interpolationSuffix),o.lng||(o.lng=f.detectLanguage()),o.lng?o.useCookie&&f.cookie.create(o.cookieName,o.lng,o.cookieExpirationTime):(o.lng=o.fallbackLng,o.useCookie&&f.cookie.remove(o.cookieName)),languages=f.toLanguages(o.lng),currentLng=languages[0],f.log("currentLng set to: "+currentLng),pluralExtensions.setCurrentLng(currentLng),$&&o.setJqueryExt&&addJqueryFunct();var deferred;if($&&$.Deferred&&(deferred=$.Deferred()),!o.resStore){var lngsToLoad=f.toLanguages(o.lng);"string"==typeof o.preload&&(o.preload=[o.preload]);for(var i=0,l=o.preload.length;l>i;i++)for(var pres=f.toLanguages(o.preload[i]),y=0,len=pres.length;len>y;y++)lngsToLoad.indexOf(pres[y])<0&&lngsToLoad.push(pres[y]);return i18n.sync.load(lngsToLoad,o,function(err,store){resStore=store,cb&&cb(translate),deferred&&deferred.resolve()}),deferred?deferred.promise():void 0}return resStore=o.resStore,cb&&cb(translate),deferred&&deferred.resolve(),deferred?deferred.promise():void 0}function preload(lngs,cb){"string"==typeof lngs&&(lngs=[lngs]);for(var i=0,l=lngs.length;l>i;i++)o.preload.indexOf(lngs[i])<0&&o.preload.push(lngs[i]);return init(cb)}function addResourceBundle(lng,ns,resources){"string"!=typeof ns&&(resources=ns,ns=o.ns.defaultNs),resStore[lng]=resStore[lng]||{},resStore[lng][ns]=resStore[lng][ns]||{},f.extend(resStore[lng][ns],resources)}function setDefaultNamespace(ns){o.ns.defaultNs=ns}function loadNamespace(namespace,cb){loadNamespaces([namespace],cb)}function loadNamespaces(namespaces,cb){var opts={dynamicLoad:o.dynamicLoad,resGetPath:o.resGetPath,getAsync:o.getAsync,ns:{namespaces:namespaces,defaultNs:""}},lngsToLoad=f.toLanguages(o.lng);"string"==typeof o.preload&&(o.preload=[o.preload]);for(var i=0,l=o.preload.length;l>i;i++)for(var pres=f.toLanguages(o.preload[i]),y=0,len=pres.length;len>y;y++)lngsToLoad.indexOf(pres[y])<0&&lngsToLoad.push(pres[y]);for(var lngNeedLoad=[],a=0,lenA=lngsToLoad.length;lenA>a;a++){var needLoad=!1,resSet=resStore[lngsToLoad[a]];if(resSet)for(var b=0,lenB=namespaces.length;lenB>b;b++)resSet[namespaces[b]]||(needLoad=!0);else needLoad=!0;needLoad&&lngNeedLoad.push(lngsToLoad[a])}lngNeedLoad.length?i18n.sync._fetch(lngNeedLoad,opts,function(err,store){var todo=namespaces.length*lngNeedLoad.length;f.each(namespaces,function(nsIndex,nsValue){f.each(lngNeedLoad,function(lngIndex,lngValue){resStore[lngValue]=resStore[lngValue]||{},resStore[lngValue][nsValue]=store[lngValue][nsValue],todo--,0===todo&&cb&&(o.useLocalStorage&&i18n.sync._storeLocal(resStore),cb())})})}):cb&&cb()}function setLng(lng,cb){return init({lng:lng},cb)}function lng(){return currentLng}function addJqueryFunct(){function parse(ele,key,options){if(0!==key.length){var attr="text";if(0===key.indexOf("[")){var parts=key.split("]");key=parts[1],attr=parts[0].substr(1,parts[0].length-1)}key.indexOf(";")===key.length-1&&(key=key.substr(0,key.length-2));var optionsToUse;"html"===attr?(optionsToUse=o.defaultValueFromContent?$.extend({defaultValue:ele.html()},options):options,ele.html($.t(key,optionsToUse))):"text"===attr?(optionsToUse=o.defaultValueFromContent?$.extend({defaultValue:ele.text()},options):options,ele.text($.t(key,optionsToUse))):(optionsToUse=o.defaultValueFromContent?$.extend({defaultValue:ele.attr(attr)},options):options,ele.attr(attr,$.t(key,optionsToUse)))}}function localize(ele,options){var key=ele.attr(o.selectorAttr);if(key){var target=ele,targetSelector=ele.data("i18n-target");if(targetSelector&&(target=ele.find(targetSelector)||ele),options||o.useDataAttrOptions!==!0||(options=ele.data("i18n-options")),options=options||{},key.indexOf(";")<=key.length-1){var keys=key.split(";");$.each(keys,function(m,k){parse(target,k,options)})}else parse(target,k,options);o.useDataAttrOptions===!0&&ele.data("i18n-options",options)}}$.t=$.t||translate,$.fn.i18n=function(options){return this.each(function(){localize($(this),options);var elements=$(this).find("["+o.selectorAttr+"]");elements.each(function(){localize($(this),options)})})}}function applyReplacement(str,replacementHash,nestedKey,options){if(options=options||replacementHash,str.indexOf(options.interpolationPrefix||o.interpolationPrefix)<0)return str;var prefix=options.interpolationPrefix?f.regexEscape(options.interpolationPrefix):o.interpolationPrefixEscaped,suffix=options.interpolationSuffix?f.regexEscape(options.interpolationSuffix):o.interpolationSuffixEscaped;return f.each(replacementHash,function(key,value){str="object"==typeof value&&null!==value?applyReplacement(str,value,nestedKey?nestedKey+o.keyseparator+key:key,options):str.replace(new RegExp([prefix,nestedKey?nestedKey+o.keyseparator+key:key,suffix].join(""),"g"),value)}),str}function applyReuse(translated,options){var comma=",",options_open="{",options_close="}",opts=f.extend({},options);for(delete opts.postProcess;-1!=translated.indexOf(o.reusePrefix)&&(replacementCounter++,!(replacementCounter>o.maxRecursion));){var index_of_opening=translated.indexOf(o.reusePrefix),index_of_end_of_closing=translated.indexOf(o.reuseSuffix,index_of_opening)+o.reuseSuffix.length,token=translated.substring(index_of_opening,index_of_end_of_closing),token_without_symbols=token.replace(o.reusePrefix,"").replace(o.reuseSuffix,"");if(-1!=token_without_symbols.indexOf(comma)){var index_of_token_end_of_closing=token_without_symbols.indexOf(comma);if(-1!=token_without_symbols.indexOf(options_open,index_of_token_end_of_closing)&&-1!=token_without_symbols.indexOf(options_close,index_of_token_end_of_closing)){var index_of_opts_opening=token_without_symbols.indexOf(options_open,index_of_token_end_of_closing),index_of_opts_end_of_closing=token_without_symbols.indexOf(options_close,index_of_opts_opening)+options_close.length;try{opts=f.extend(opts,JSON.parse(token_without_symbols.substring(index_of_opts_opening,index_of_opts_end_of_closing))),token_without_symbols=token_without_symbols.substring(0,index_of_token_end_of_closing)}catch(e){}}}var translated_token=_translate(token_without_symbols,opts);translated=translated.replace(token,translated_token)}return translated}function hasContext(options){return options.context&&"string"==typeof options.context}function needsPlural(options){return void 0!==options.count&&"string"!=typeof options.count&&1!==options.count}function translate(key,options){return replacementCounter=0,_translate(key,options)}function _translate(key,options){if(options=options||{},!resStore)return notfound;var optionWithoutCount,translated,notfound=options.defaultValue||key,lngs=languages;if(options.lng&&(lngs=f.toLanguages(options.lng),!resStore[lngs[0]])){var oldAsync=o.getAsync;o.getAsync=!1,i18n.sync.load(lngs,o,function(err,store){f.extend(resStore,store),o.getAsync=oldAsync})}var ns=options.ns||o.ns.defaultNs;if(key.indexOf(o.nsseparator)>-1){var parts=key.split(o.nsseparator);ns=parts[0],key=parts[1]}if(hasContext(options)){optionWithoutCount=f.extend({},options),delete optionWithoutCount.context,optionWithoutCount.defaultValue=o.contextNotFound;var contextKey=ns+o.nsseparator+key+"_"+options.context;if(translated=translate(contextKey,optionWithoutCount),translated!=o.contextNotFound)return applyReplacement(translated,{context:options.context})}if(needsPlural(options)){optionWithoutCount=f.extend({},options),delete optionWithoutCount.count,optionWithoutCount.defaultValue=o.pluralNotFound;var pluralKey=ns+o.nsseparator+key+o.pluralSuffix,pluralExtension=pluralExtensions.get(currentLng,options.count);if(pluralExtension>=0?pluralKey=pluralKey+"_"+pluralExtension:1===pluralExtension&&(pluralKey=ns+o.nsseparator+key),translated=translate(pluralKey,optionWithoutCount),translated!=o.pluralNotFound)return applyReplacement(translated,{count:options.count})}for(var found,keys=key.split(o.keyseparator),i=0,len=lngs.length;len>i&&!found;i++){for(var l=lngs[i],x=0,value=resStore[l]&&resStore[l][ns];keys[x];)value=value&&value[keys[x]],x++;if(void 0!==value){if("string"==typeof value)value=applyReplacement(value,options),value=applyReuse(value,options);else if("[object Array]"!==Object.prototype.toString.apply(value)||o.returnObjectTrees||options.returnObjectTrees)if(o.returnObjectTrees||options.returnObjectTrees){var copy={};for(var m in value)copy[m]=_translate(ns+o.nsseparator+key+o.keyseparator+m,options);value=copy}else value="key '"+ns+":"+key+" ("+l+")' returned a object instead of string.",f.log(value);else value=value.join("\n"),value=applyReplacement(value,options),value=applyReuse(value,options);found=value}}void 0===found&&o.fallbackToDefaultNS&&(found=_translate(key,options)),void 0===found&&o.sendMissing&&(options.lng?sync.postMissing(lngs[0],ns,key,notfound,lngs):sync.postMissing(o.lng,ns,key,notfound,lngs));var postProcessor=options.postProcess||o.postProcess;return void 0!==found&&postProcessor&&postProcessors[postProcessor]&&(found=postProcessors[postProcessor](found,key,options)),void 0===found&&(notfound=applyReplacement(notfound,options),notfound=applyReuse(notfound,options)),void 0!==found?found:notfound}function detectLanguage(){var detectedLng,qsParm=[];if("undefined"!=typeof window&&(!function(){for(var query=window.location.search.substring(1),parms=query.split("&"),i=0;i<parms.length;i++){var pos=parms[i].indexOf("=");if(pos>0){var key=parms[i].substring(0,pos),val=parms[i].substring(pos+1);qsParm[key]=val}}}(),qsParm[o.detectLngQS]&&(detectedLng=qsParm[o.detectLngQS])),!detectedLng&&"undefined"!=typeof document&&o.useCookie){var c=f.cookie.read(o.cookieName);c&&(detectedLng=c)}return detectedLng||"undefined"==typeof navigator||(detectedLng=navigator.language?navigator.language:navigator.userLanguage),detectedLng}Array.prototype.indexOf||(Array.prototype.indexOf=function(searchElement){"use strict";if(null==this)throw new TypeError;var t=Object(this),len=t.length>>>0;if(0===len)return-1;var n=0;if(arguments.length>0&&(n=Number(arguments[1]),n!=n?n=0:0!=n&&n!=1/0&&n!=-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=len)return-1;for(var k=n>=0?n:Math.max(len-Math.abs(n),0);len>k;k++)if(k in t&&t[k]===searchElement)return k;return-1});var currentLng,root=this,$=root.jQuery,i18n={},resStore={},replacementCounter=0,languages=[];"undefined"!=typeof module&&module.exports?module.exports=i18n:($&&($.i18n=$.i18n||i18n),root.i18n=root.i18n||i18n);var o={lng:void 0,load:"all",preload:[],lowerCaseLng:!1,returnObjectTrees:!1,fallbackLng:"dev",detectLngQS:"setLng",ns:"translation",fallbackToDefaultNS:!1,nsseparator:":",keyseparator:".",selectorAttr:"data-i18n",debug:!1,resGetPath:"locales/__lng__/__ns__.json",resPostPath:"locales/add/__lng__/__ns__",getAsync:!0,postAsync:!0,resStore:void 0,useLocalStorage:!1,localStorageExpirationTime:6048e5,dynamicLoad:!1,sendMissing:!1,sendMissingTo:"fallback",sendType:"POST",interpolationPrefix:"__",interpolationSuffix:"__",reusePrefix:"$t(",reuseSuffix:")",pluralSuffix:"_plural",pluralNotFound:["plural_not_found",Math.random()].join(""),contextNotFound:["context_not_found",Math.random()].join(""),setJqueryExt:!0,defaultValueFromContent:!0,useDataAttrOptions:!1,cookieExpirationTime:void 0,useCookie:!0,cookieName:"i18next",postProcess:void 0},_cookie={create:function(name,value,minutes){var expires;if(minutes){var date=new Date;date.setTime(date.getTime()+60*minutes*1e3),expires="; expires="+date.toGMTString()}else expires="";document.cookie=name+"="+value+expires+"; path=/"},read:function(name){for(var nameEQ=name+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(nameEQ))return c.substring(nameEQ.length,c.length)}return null},remove:function(name){this.create(name,"",-1)}},cookie_noop={create:function(name,value,minutes){},read:function(name){return null},remove:function(name){}},f={extend:$?$.extend:_extend,each:$?$.each:_each,ajax:$?$.ajax:_ajax,cookie:"undefined"!=typeof document?_cookie:cookie_noop,detectLanguage:detectLanguage,log:function(str){o.debug&&"undefined"!=typeof console&&console.log(str)},toLanguages:function(lng){var languages=[];if("string"==typeof lng&&lng.indexOf("-")>-1){var parts=lng.split("-");lng=o.lowerCaseLng?parts[0].toLowerCase()+"-"+parts[1].toLowerCase():parts[0].toLowerCase()+"-"+parts[1].toUpperCase(),"unspecific"!==o.load&&languages.push(lng),"current"!==o.load&&languages.push(parts[0])}else languages.push(lng);return-1===languages.indexOf(o.fallbackLng)&&o.fallbackLng&&languages.push(o.fallbackLng),languages},regexEscape:function(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},sync={load:function(lngs,options,cb){options.useLocalStorage?sync._loadLocal(lngs,options,function(err,store){for(var missingLngs=[],i=0,len=lngs.length;len>i;i++)store[lngs[i]]||missingLngs.push(lngs[i]);missingLngs.length>0?sync._fetch(missingLngs,options,function(err,fetched){f.extend(store,fetched),sync._storeLocal(fetched),cb(null,store)}):cb(null,store)}):sync._fetch(lngs,options,function(err,store){cb(null,store)})},_loadLocal:function(lngs,options,cb){var store={},nowMS=(new Date).getTime();if(window.localStorage){var todo=lngs.length;f.each(lngs,function(key,lng){var local=window.localStorage.getItem("res_"+lng);local&&(local=JSON.parse(local),local.i18nStamp&&local.i18nStamp+options.localStorageExpirationTime>nowMS&&(store[lng]=local)),todo--,0===todo&&cb(null,store)})}},_storeLocal:function(store){if(window.localStorage)for(var m in store)store[m].i18nStamp=(new Date).getTime(),window.localStorage.setItem("res_"+m,JSON.stringify(store[m]))},_fetch:function(lngs,options,cb){var ns=options.ns,store={};if(options.dynamicLoad){var url=applyReplacement(options.resGetPath,{lng:lngs.join("+"),ns:ns.namespaces.join("+")});f.ajax({url:url,success:function(data,status,xhr){f.log("loaded: "+url),cb(null,data)},error:function(xhr,status,error){f.log("failed loading: "+url),cb("failed loading resource.json error: "+error)},dataType:"json",async:options.getAsync})}else{var errors,todo=ns.namespaces.length*lngs.length;f.each(ns.namespaces,function(nsIndex,nsValue){f.each(lngs,function(lngIndex,lngValue){var loadComplete=function(err,data){err&&(errors=errors||[],errors.push(err)),store[lngValue]=store[lngValue]||{},store[lngValue][nsValue]=data,todo--,0===todo&&cb(errors,store)};"function"==typeof options.customLoad?options.customLoad(lngValue,nsValue,options,loadComplete):sync._fetchOne(lngValue,nsValue,options,loadComplete)})})}},_fetchOne:function(lng,ns,options,done){var url=applyReplacement(options.resGetPath,{lng:lng,ns:ns});f.ajax({url:url,success:function(data,status,xhr){f.log("loaded: "+url),done(null,data)},error:function(xhr,status,error){f.log("failed loading: "+url),done(error,{})},dataType:"json",async:options.getAsync})},postMissing:function(lng,ns,key,defaultValue,lngs){var payload={};payload[key]=defaultValue;var urls=[];if("fallback"===o.sendMissingTo)urls.push({lng:o.fallbackLng,url:applyReplacement(o.resPostPath,{lng:o.fallbackLng,ns:ns})});else if("current"===o.sendMissingTo)urls.push({lng:lng,url:applyReplacement(o.resPostPath,{lng:lng,ns:ns})});else if("all"===o.sendMissingTo)for(var i=0,l=lngs.length;l>i;i++)urls.push({lng:lngs[i],url:applyReplacement(o.resPostPath,{lng:lngs[i],ns:ns})});for(var y=0,len=urls.length;len>y;y++){var item=urls[y];f.ajax({url:item.url,type:o.sendType,data:payload,success:function(data,status,xhr){f.log("posted missing key '"+key+"' to: "+item.url);for(var keys=key.split("."),x=0,value=resStore[item.lng][ns];keys[x];)value=x===keys.length-1?value[keys[x]]=defaultValue:value[keys[x]]=value[keys[x]]||{},x++},error:function(xhr,status,error){f.log("failed posting missing key '"+key+"' to: "+item.url)},dataType:"json",async:o.postAsync})}}},pluralExtensions={rules:{ach:{name:"Acholi",numbers:[1,2],plurals:function(n){return Number(n>1)}},af:{name:"Afrikaans",numbers:[1,2],plurals:function(n){return Number(1!=n)}},ak:{name:"Akan",numbers:[1,2],plurals:function(n){return Number(n>1)}},am:{name:"Amharic",numbers:[1,2],plurals:function(n){return Number(n>1)}},an:{name:"Aragonese",numbers:[1,2],plurals:function(n){return Number(1!=n)}},ar:{name:"Arabic",numbers:[0,1,2,3,11,100],plurals:function(n){return Number(0===n?0:1==n?1:2==n?2:n%100>=3&&10>=n%100?3:n%100>=11?4:5)}},arn:{name:"Mapudungun",numbers:[1,2],plurals:function(n){return Number(n>1)}},ast:{name:"Asturian",numbers:[1,2],plurals:function(n){return Number(1!=n)}},ay:{name:"Aymará",numbers:[1],plurals:function(n){return 0}},az:{name:"Azerbaijani",numbers:[1,2],plurals:function(n){return Number(1!=n)}},be:{name:"Belarusian",numbers:[1,2,5],plurals:function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&4>=n%10&&(10>n%100||n%100>=20)?1:2)}},bg:{name:"Bulgarian",numbers:[1,2],plurals:function(n){return Number(1!=n)}},bn:{name:"Bengali",numbers:[1,2],plurals:function(n){return Number(1!=n)}},bo:{name:"Tibetan",numbers:[1],plurals:function(n){return 0}},br:{name:"Breton",numbers:[1,2],plurals:function(n){return Number(n>1)}},bs:{name:"Bosnian",numbers:[1,2,5],plurals:function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&4>=n%10&&(10>n%100||n%100>=20)?1:2)}},ca:{name:"Catalan",numbers:[1,2],plurals:function(n){return Number(1!=n)}},cgg:{name:"Chiga",numbers:[1],plurals:function(n){return 0}},cs:{name:"Czech",numbers:[1,2,5],plurals:function(n){return Number(1==n?0:n>=2&&4>=n?1:2)}},csb:{name:"Kashubian",numbers:[1,2,5],plurals:function(n){return Number(1==n?0:n%10>=2&&4>=n%10&&(10>n%100||n%100>=20)?1:2)}},cy:{name:"Welsh",numbers:[1,2,3,8],plurals:function(n){return Number(1==n?0:2==n?1:8!=n&&11!=n?2:3)}},da:{name:"Danish",numbers:[1,2],plurals:function(n){return Number(1!=n)}},de:{name:"German",numbers:[1,2],plurals:function(n){return Number(1!=n)}},dz:{name:"Dzongkha",numbers:[1],plurals:function(n){return 0}},el:{name:"Greek",numbers:[1,2],plurals:function(n){return Number(1!=n)}},en:{name:"English",numbers:[1,2],plurals:function(n){return Number(1!=n)}},eo:{name:"Esperanto",numbers:[1,2],plurals:function(n){return Number(1!=n)}},es:{name:"Spanish",numbers:[1,2],plurals:function(n){return Number(1!=n)}},es_ar:{name:"Argentinean Spanish",numbers:[1,2],plurals:function(n){return Number(1!=n)}},et:{name:"Estonian",numbers:[1,2],plurals:function(n){return Number(1!=n)}},eu:{name:"Basque",numbers:[1,2],plurals:function(n){return Number(1!=n)}},fa:{name:"Persian",numbers:[1],plurals:function(n){return 0}},fi:{name:"Finnish",numbers:[1,2],plurals:function(n){return Number(1!=n)}},fil:{name:"Filipino",numbers:[1,2],plurals:function(n){return Number(n>1)}},fo:{name:"Faroese",numbers:[1,2],plurals:function(n){return Number(1!=n)}},fr:{name:"French",numbers:[1,2],plurals:function(n){return Number(n>1)}},fur:{name:"Friulian",numbers:[1,2],plurals:function(n){return Number(1!=n)}},fy:{name:"Frisian",numbers:[1,2],plurals:function(n){return Number(1!=n)}},ga:{name:"Irish",numbers:[1,2,3,7,11],plurals:function(n){return Number(1==n?0:2==n?1:7>n?2:11>n?3:4)}},gd:{name:"Scottish Gaelic",numbers:[1,2,3,20],plurals:function(n){return Number(1==n||11==n?0:2==n||12==n?1:n>2&&20>n?2:3)}},gl:{name:"Galician",numbers:[1,2],plurals:function(n){return Number(1!=n)}},gu:{name:"Gujarati",numbers:[1,2],plurals:function(n){return Number(1!=n)}},gun:{name:"Gun",numbers:[1,2],plurals:function(n){return Number(n>1)}},ha:{name:"Hausa",numbers:[1,2],plurals:function(n){return Number(1!=n)}},he:{name:"Hebrew",numbers:[1,2],plurals:function(n){return Number(1!=n)}},hi:{name:"Hindi",numbers:[1,2],plurals:function(n){return Number(1!=n)}},hr:{name:"Croatian",numbers:[1,2,5],plurals:function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&4>=n%10&&(10>n%100||n%100>=20)?1:2)}},hu:{name:"Hungarian",numbers:[1,2],plurals:function(n){return Number(1!=n)}},hy:{name:"Armenian",numbers:[1,2],plurals:function(n){return Number(1!=n)}},ia:{name:"Interlingua",numbers:[1,2],plurals:function(n){return Number(1!=n)}},id:{name:"Indonesian",numbers:[1],plurals:function(n){return 0}},is:{name:"Icelandic",numbers:[1,2],plurals:function(n){return Number(n%10!=1||n%100==11)}},it:{name:"Italian",numbers:[1,2],plurals:function(n){return Number(1!=n)}},ja:{name:"Japanese",numbers:[1],plurals:function(n){return 0}},jbo:{name:"Lojban",numbers:[1],plurals:function(n){return 0}},jv:{name:"Javanese",numbers:[0,1],plurals:function(n){return Number(0!==n)}},ka:{name:"Georgian",numbers:[1],plurals:function(n){return 0}},kk:{name:"Kazakh",numbers:[1],plurals:function(n){return 0}},km:{name:"Khmer",numbers:[1],plurals:function(n){return 0}},kn:{name:"Kannada",numbers:[1,2],plurals:function(n){return Number(1!=n)}},ko:{name:"Korean",numbers:[1],plurals:function(n){return 0}},ku:{name:"Kurdish",numbers:[1,2],plurals:function(n){return Number(1!=n)}},kw:{name:"Cornish",numbers:[1,2,3,4],plurals:function(n){return Number(1==n?0:2==n?1:3==n?2:3)}},ky:{name:"Kyrgyz",numbers:[1],plurals:function(n){return 0}},lb:{name:"Letzeburgesch",numbers:[1,2],plurals:function(n){return Number(1!=n)}},ln:{name:"Lingala",numbers:[1,2],plurals:function(n){return Number(n>1)}},lo:{name:"Lao",numbers:[1],plurals:function(n){return 0}},lt:{name:"Lithuanian",numbers:[1,2,10],plurals:function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&(10>n%100||n%100>=20)?1:2)}},lv:{name:"Latvian",numbers:[0,1,2],plurals:function(n){return Number(n%10==1&&n%100!=11?0:0!==n?1:2)}},mai:{name:"Maithili",numbers:[1,2],plurals:function(n){return Number(1!=n)}},mfe:{name:"Mauritian Creole",numbers:[1,2],plurals:function(n){return Number(n>1)}},mg:{name:"Malagasy",numbers:[1,2],plurals:function(n){return Number(n>1)}},mi:{name:"Maori",numbers:[1,2],plurals:function(n){return Number(n>1)}},mk:{name:"Macedonian",numbers:[1,2],plurals:function(n){return Number(1==n||n%10==1?0:1)}},ml:{name:"Malayalam",numbers:[1,2],plurals:function(n){return Number(1!=n)}},mn:{name:"Mongolian",numbers:[1,2],plurals:function(n){return Number(1!=n)}},mnk:{name:"Mandinka",numbers:[0,1,2],plurals:function(n){return Number(1==n?1:2)}},mr:{name:"Marathi",numbers:[1,2],plurals:function(n){return Number(1!=n)}},ms:{name:"Malay",numbers:[1],plurals:function(n){return 0}},mt:{name:"Maltese",numbers:[1,2,11,20],plurals:function(n){return Number(1==n?0:0===n||n%100>1&&11>n%100?1:n%100>10&&20>n%100?2:3)}},nah:{name:"Nahuatl",numbers:[1,2],plurals:function(n){return Number(1!=n)}},nap:{name:"Neapolitan",numbers:[1,2],plurals:function(n){return Number(1!=n)}},nb:{name:"Norwegian Bokmal",numbers:[1,2],plurals:function(n){return Number(1!=n)}},ne:{name:"Nepali",numbers:[1,2],plurals:function(n){return Number(1!=n)}},nl:{name:"Dutch",numbers:[1,2],plurals:function(n){return Number(1!=n)}},nn:{name:"Norwegian Nynorsk",numbers:[1,2],plurals:function(n){return Number(1!=n)}},no:{name:"Norwegian",numbers:[1,2],plurals:function(n){return Number(1!=n)}},nso:{name:"Northern Sotho",numbers:[1,2],plurals:function(n){return Number(1!=n)}},oc:{name:"Occitan",numbers:[1,2],plurals:function(n){return Number(n>1)}},or:{name:"Oriya",numbers:[2,1],plurals:function(n){return Number(1!=n)}},pa:{name:"Punjabi",numbers:[1,2],plurals:function(n){return Number(1!=n)}},pap:{name:"Papiamento",numbers:[1,2],plurals:function(n){return Number(1!=n)}},pl:{name:"Polish",numbers:[1,2,5],plurals:function(n){return Number(1==n?0:n%10>=2&&4>=n%10&&(10>n%100||n%100>=20)?1:2)}},pms:{name:"Piemontese",numbers:[1,2],plurals:function(n){return Number(1!=n)}},ps:{name:"Pashto",numbers:[1,2],plurals:function(n){return Number(1!=n)}},pt:{name:"Portuguese",numbers:[1,2],plurals:function(n){return Number(1!=n)}},pt_br:{name:"Brazilian Portuguese",numbers:[1,2],plurals:function(n){return Number(1!=n)}},rm:{name:"Romansh",numbers:[1,2],plurals:function(n){return Number(1!=n)}},ro:{name:"Romanian",numbers:[1,2,20],plurals:function(n){return Number(1==n?0:0===n||n%100>0&&20>n%100?1:2)}},ru:{name:"Russian",numbers:[1,2,5],plurals:function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&4>=n%10&&(10>n%100||n%100>=20)?1:2)}},sah:{name:"Yakut",numbers:[1],plurals:function(n){return 0}},sco:{name:"Scots",numbers:[1,2],plurals:function(n){return Number(1!=n)}},se:{name:"Northern Sami",numbers:[1,2],plurals:function(n){return Number(1!=n)}},si:{name:"Sinhala",numbers:[1,2],plurals:function(n){return Number(1!=n)}},sk:{name:"Slovak",numbers:[1,2,5],plurals:function(n){return Number(1==n?0:n>=2&&4>=n?1:2)}},sl:{name:"Slovenian",numbers:[5,1,2,3],plurals:function(n){return Number(n%100==1?1:n%100==2?2:n%100==3||n%100==4?3:0)}},so:{name:"Somali",numbers:[1,2],plurals:function(n){return Number(1!=n)}},son:{name:"Songhay",numbers:[1,2],plurals:function(n){return Number(1!=n)}},sq:{name:"Albanian",numbers:[1,2],plurals:function(n){return Number(1!=n)}},sr:{name:"Serbian",numbers:[1,2,5],plurals:function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&4>=n%10&&(10>n%100||n%100>=20)?1:2)}},su:{name:"Sundanese",numbers:[1],plurals:function(n){return 0}},sv:{name:"Swedish",numbers:[1,2],plurals:function(n){return Number(1!=n)}},sw:{name:"Swahili",numbers:[1,2],plurals:function(n){return Number(1!=n)}},ta:{name:"Tamil",numbers:[1,2],plurals:function(n){return Number(1!=n)}},te:{name:"Telugu",numbers:[1,2],plurals:function(n){return Number(1!=n)}},tg:{name:"Tajik",numbers:[1,2],plurals:function(n){return Number(n>1)}},th:{name:"Thai",numbers:[1],plurals:function(n){
return 0}},ti:{name:"Tigrinya",numbers:[1,2],plurals:function(n){return Number(n>1)}},tk:{name:"Turkmen",numbers:[1,2],plurals:function(n){return Number(1!=n)}},tr:{name:"Turkish",numbers:[1,2],plurals:function(n){return Number(n>1)}},tt:{name:"Tatar",numbers:[1],plurals:function(n){return 0}},ug:{name:"Uyghur",numbers:[1],plurals:function(n){return 0}},uk:{name:"Ukrainian",numbers:[1,2,5],plurals:function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&4>=n%10&&(10>n%100||n%100>=20)?1:2)}},ur:{name:"Urdu",numbers:[1,2],plurals:function(n){return Number(1!=n)}},uz:{name:"Uzbek",numbers:[1,2],plurals:function(n){return Number(n>1)}},vi:{name:"Vietnamese",numbers:[1],plurals:function(n){return 0}},wa:{name:"Walloon",numbers:[1,2],plurals:function(n){return Number(n>1)}},wo:{name:"Wolof",numbers:[1],plurals:function(n){return 0}},yo:{name:"Yoruba",numbers:[1,2],plurals:function(n){return Number(1!=n)}},zh:{name:"Chinese",numbers:[1],plurals:function(n){return 0}}},addRule:function(lng,obj){pluralExtensions.rules[lng]=obj},setCurrentLng:function(lng){if(!pluralExtensions.currentRule||pluralExtensions.currentRule.lng!==lng){var parts=lng.split("-");pluralExtensions.currentRule={lng:lng,rule:pluralExtensions.rules[parts[0]]}}},get:function(lng,count){function getResult(l,c){var ext;if(ext=pluralExtensions.currentRule&&pluralExtensions.currentRule.lng===lng?pluralExtensions.currentRule.rule:pluralExtensions.rules[l]){var i=ext.plurals(c),number=ext.numbers[i];return 2===ext.numbers.length&&1===ext.numbers[0]&&(2===number?number=-1:1===number&&(number=1)),number}return 1===c?"1":"-1"}var parts=lng.split("-");return getResult(parts[0],count)}},postProcessors={},addPostProcessor=function(name,fc){postProcessors[name]=fc},sprintf=function(){function get_type(variable){return Object.prototype.toString.call(variable).slice(8,-1).toLowerCase()}function str_repeat(input,multiplier){for(var output=[];multiplier>0;output[--multiplier]=input);return output.join("")}var str_format=function(){return str_format.cache.hasOwnProperty(arguments[0])||(str_format.cache[arguments[0]]=str_format.parse(arguments[0])),str_format.format.call(null,str_format.cache[arguments[0]],arguments)};return str_format.format=function(parse_tree,argv){var arg,i,k,match,pad,pad_character,pad_length,cursor=1,tree_length=parse_tree.length,node_type="",output=[];for(i=0;tree_length>i;i++)if(node_type=get_type(parse_tree[i]),"string"===node_type)output.push(parse_tree[i]);else if("array"===node_type){if(match=parse_tree[i],match[2])for(arg=argv[cursor],k=0;k<match[2].length;k++){if(!arg.hasOwnProperty(match[2][k]))throw sprintf('[sprintf] property "%s" does not exist',match[2][k]);arg=arg[match[2][k]]}else arg=match[1]?argv[match[1]]:argv[cursor++];if(/[^s]/.test(match[8])&&"number"!=get_type(arg))throw sprintf("[sprintf] expecting number but found %s",get_type(arg));switch(match[8]){case"b":arg=arg.toString(2);break;case"c":arg=String.fromCharCode(arg);break;case"d":arg=parseInt(arg,10);break;case"e":arg=match[7]?arg.toExponential(match[7]):arg.toExponential();break;case"f":arg=match[7]?parseFloat(arg).toFixed(match[7]):parseFloat(arg);break;case"o":arg=arg.toString(8);break;case"s":arg=(arg=String(arg))&&match[7]?arg.substring(0,match[7]):arg;break;case"u":arg=Math.abs(arg);break;case"x":arg=arg.toString(16);break;case"X":arg=arg.toString(16).toUpperCase()}arg=/[def]/.test(match[8])&&match[3]&&arg>=0?"+"+arg:arg,pad_character=match[4]?"0"==match[4]?"0":match[4].charAt(1):" ",pad_length=match[6]-String(arg).length,pad=match[6]?str_repeat(pad_character,pad_length):"",output.push(match[5]?arg+pad:pad+arg)}return output.join("")},str_format.cache={},str_format.parse=function(fmt){for(var _fmt=fmt,match=[],parse_tree=[],arg_names=0;_fmt;){if(null!==(match=/^[^\x25]+/.exec(_fmt)))parse_tree.push(match[0]);else if(null!==(match=/^\x25{2}/.exec(_fmt)))parse_tree.push("%");else{if(null===(match=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(_fmt)))throw"[sprintf] huh?";if(match[2]){arg_names|=1;var field_list=[],replacement_field=match[2],field_match=[];if(null===(field_match=/^([a-z_][a-z_\d]*)/i.exec(replacement_field)))throw"[sprintf] huh?";for(field_list.push(field_match[1]);""!==(replacement_field=replacement_field.substring(field_match[0].length));)if(null!==(field_match=/^\.([a-z_][a-z_\d]*)/i.exec(replacement_field)))field_list.push(field_match[1]);else{if(null===(field_match=/^\[(\d+)\]/.exec(replacement_field)))throw"[sprintf] huh?";field_list.push(field_match[1])}match[2]=field_list}else arg_names|=2;if(3===arg_names)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";parse_tree.push(match)}_fmt=_fmt.substring(match[0].length)}return parse_tree},str_format}(),vsprintf=function(fmt,argv){return argv.unshift(fmt),sprintf.apply(null,argv)};addPostProcessor("sprintf",function(val,key,opts){return opts.sprintf?"[object Array]"===Object.prototype.toString.apply(opts.sprintf)?vsprintf(val,opts.sprintf):"object"==typeof opts.sprintf?sprintf(val,opts.sprintf):val:val}),i18n.init=init,i18n.setLng=setLng,i18n.preload=preload,i18n.addResourceBundle=addResourceBundle,i18n.loadNamespace=loadNamespace,i18n.loadNamespaces=loadNamespaces,i18n.setDefaultNamespace=setDefaultNamespace,i18n.t=translate,i18n.translate=translate,i18n.detectLanguage=f.detectLanguage,i18n.pluralExtensions=pluralExtensions,i18n.sync=sync,i18n.functions=f,i18n.lng=lng,i18n.addPostProcessor=addPostProcessor,i18n.options=o}(),function(Date,undefined){var origParse=Date.parse,numericKeys=[1,4,5,6,7,10,11];Date.parse=function(date){var timestamp,struct,minutesOffset=0;if(struct=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(date)){for(var k,i=0;k=numericKeys[i];++i)struct[k]=+struct[k]||0;struct[2]=(+struct[2]||1)-1,struct[3]=+struct[3]||1,"Z"!==struct[8]&&struct[9]!==undefined&&(minutesOffset=60*struct[10]+struct[11],"+"===struct[9]&&(minutesOffset=0-minutesOffset)),timestamp=Date.UTC(struct[1],struct[2],struct[3],struct[4],struct[5]+minutesOffset,struct[6],struct[7])}else timestamp=origParse?origParse(date):NaN;return new Date(timestamp)}}(Date),+function($){"use strict";var Tooltip=function(element,options){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",element,options)};Tooltip.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},Tooltip.prototype.init=function(type,element,options){this.enabled=!0,this.type=type,this.$element=$(element),this.options=this.getOptions(options);for(var triggers=this.options.trigger.split(" "),i=triggers.length;i--;){var trigger=triggers[i];if("click"==trigger)this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this));else if("manual"!=trigger){var eventIn="hover"==trigger?"mouseenter":"focusin",eventOut="hover"==trigger?"mouseleave":"focusout";this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this)),this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},Tooltip.prototype.getDefaults=function(){return Tooltip.DEFAULTS},Tooltip.prototype.getOptions=function(options){return options=$.extend({},this.getDefaults(),this.$element.data(),options),options.delay&&"number"==typeof options.delay&&(options.delay={show:options.delay,hide:options.delay}),options},Tooltip.prototype.getDelegateOptions=function(){var options={},defaults=this.getDefaults();return this._options&&$.each(this._options,function(key,value){defaults[key]!=value&&(options[key]=value)}),options},Tooltip.prototype.enter=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(self.timeout),self.hoverState="in",self.options.delay&&self.options.delay.show?void(self.timeout=setTimeout(function(){"in"==self.hoverState&&self.show()},self.options.delay.show)):self.show()},Tooltip.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(self.timeout),self.hoverState="out",self.options.delay&&self.options.delay.hide?void(self.timeout=setTimeout(function(){"out"==self.hoverState&&self.hide()},self.options.delay.hide)):self.hide()},Tooltip.prototype.show=function(){var e=$.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(e),e.isDefaultPrevented())return;var that=this,$tip=this.tip();this.setContent(),this.options.animation&&$tip.addClass("fade");var placement="function"==typeof this.options.placement?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement,autoToken=/\s?auto?\s?/i,autoPlace=autoToken.test(placement);autoPlace&&(placement=placement.replace(autoToken,"")||"top"),$tip.detach().css({top:0,left:0,display:"block"}).addClass(placement),this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element);var pos=this.getPosition(),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;if(autoPlace){var $parent=this.$element.parent(),orgPlacement=placement,docScroll=document.documentElement.scrollTop||document.body.scrollTop,parentWidth="body"==this.options.container?window.innerWidth:$parent.outerWidth(),parentHeight="body"==this.options.container?window.innerHeight:$parent.outerHeight(),parentLeft="body"==this.options.container?0:$parent.offset().left;placement="bottom"==placement&&pos.top+pos.height+actualHeight-docScroll>parentHeight?"top":"top"==placement&&pos.top-docScroll-actualHeight<0?"bottom":"right"==placement&&pos.right+actualWidth>parentWidth?"left":"left"==placement&&pos.left-actualWidth<parentLeft?"right":placement,$tip.removeClass(orgPlacement).addClass(placement)}var calculatedOffset=this.getCalculatedOffset(placement,pos,actualWidth,actualHeight);this.applyPlacement(calculatedOffset,placement),this.hoverState=null;var complete=function(){that.$element.trigger("shown.bs."+that.type)};$.support.transition&&this.$tip.hasClass("fade")?$tip.one($.support.transition.end,complete).emulateTransitionEnd(150):complete()}},Tooltip.prototype.applyPlacement=function(offset,placement){var replace,$tip=this.tip(),width=$tip[0].offsetWidth,height=$tip[0].offsetHeight,marginTop=parseInt($tip.css("margin-top"),10),marginLeft=parseInt($tip.css("margin-left"),10);isNaN(marginTop)&&(marginTop=0),isNaN(marginLeft)&&(marginLeft=0),offset.top=offset.top+marginTop,offset.left=offset.left+marginLeft,$.offset.setOffset($tip[0],$.extend({using:function(props){$tip.css({top:Math.round(props.top),left:Math.round(props.left)})}},offset),0),$tip.addClass("in");var actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;if("top"==placement&&actualHeight!=height&&(replace=!0,offset.top=offset.top+height-actualHeight),/bottom|top/.test(placement)){var delta=0;offset.left<0&&(delta=-2*offset.left,offset.left=0,$tip.offset(offset),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight),this.replaceArrow(delta-width+actualWidth,actualWidth,"left")}else this.replaceArrow(actualHeight-height,actualHeight,"top");replace&&$tip.offset(offset)},Tooltip.prototype.replaceArrow=function(delta,dimension,position){this.arrow().css(position,delta?50*(1-delta/dimension)+"%":"")},Tooltip.prototype.setContent=function(){var $tip=this.tip(),title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title),$tip.removeClass("fade in top bottom left right")},Tooltip.prototype.hide=function(){function complete(){"in"!=that.hoverState&&$tip.detach(),that.$element.trigger("hidden.bs."+that.type)}var that=this,$tip=this.tip(),e=$.Event("hide.bs."+this.type);return this.$element.trigger(e),e.isDefaultPrevented()?void 0:($tip.removeClass("in"),$.support.transition&&this.$tip.hasClass("fade")?$tip.one($.support.transition.end,complete).emulateTransitionEnd(150):complete(),this.hoverState=null,this)},Tooltip.prototype.fixTitle=function(){var $e=this.$element;($e.attr("title")||"string"!=typeof $e.attr("data-original-title"))&&$e.attr("data-original-title",$e.attr("title")||"").attr("title","")},Tooltip.prototype.hasContent=function(){return this.getTitle()},Tooltip.prototype.getPosition=function(){var el=this.$element[0];return $.extend({},"function"==typeof el.getBoundingClientRect?el.getBoundingClientRect():{width:el.offsetWidth,height:el.offsetHeight},this.$element.offset())},Tooltip.prototype.getCalculatedOffset=function(placement,pos,actualWidth,actualHeight){return"bottom"==placement?{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}:"top"==placement?{top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2}:"left"==placement?{top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}:{top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}},Tooltip.prototype.getTitle=function(){var title,$e=this.$element,o=this.options;return title=$e.attr("data-original-title")||("function"==typeof o.title?o.title.call($e[0]):o.title)},Tooltip.prototype.tip=function(){return this.$tip=this.$tip||$(this.options.template)},Tooltip.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},Tooltip.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},Tooltip.prototype.enable=function(){this.enabled=!0},Tooltip.prototype.disable=function(){this.enabled=!1},Tooltip.prototype.toggleEnabled=function(){this.enabled=!this.enabled},Tooltip.prototype.toggle=function(e){var self=e?$(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;self.tip().hasClass("in")?self.leave(self):self.enter(self)},Tooltip.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var old=$.fn.tooltip;$.fn.tooltip=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.tooltip"),options="object"==typeof option&&option;(data||"destroy"!=option)&&(data||$this.data("bs.tooltip",data=new Tooltip(this,options)),"string"==typeof option&&data[option]())})},$.fn.tooltip.Constructor=Tooltip,$.fn.tooltip.noConflict=function(){return $.fn.tooltip=old,this}}(jQuery),+function($){"use strict";var Button=function(element,options){this.$element=$(element),this.options=$.extend({},Button.DEFAULTS,options),this.isLoading=!1};Button.DEFAULTS={loadingText:"loading..."},Button.prototype.setState=function(state){var d="disabled",$el=this.$element,val=$el.is("input")?"val":"html",data=$el.data();state+="Text",data.resetText||$el.data("resetText",$el[val]()),$el[val](data[state]||this.options[state]),setTimeout($.proxy(function(){"loadingText"==state?(this.isLoading=!0,$el.addClass(d).attr(d,d)):this.isLoading&&(this.isLoading=!1,$el.removeClass(d).removeAttr(d))},this),0)},Button.prototype.toggle=function(){var changed=!0,$parent=this.$element.closest('[data-toggle="buttons"]');if($parent.length){var $input=this.$element.find("input");"radio"==$input.prop("type")&&($input.prop("checked")&&this.$element.hasClass("active")?changed=!1:$parent.find(".active").removeClass("active")),changed&&$input.prop("checked",!this.$element.hasClass("active")).trigger("change")}changed&&this.$element.toggleClass("active")};var old=$.fn.button;$.fn.button=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.button"),options="object"==typeof option&&option;data||$this.data("bs.button",data=new Button(this,options)),"toggle"==option?data.toggle():option&&data.setState(option)})},$.fn.button.Constructor=Button,$.fn.button.noConflict=function(){return $.fn.button=old,this},$(document).on("click.bs.button.data-api","[data-toggle^=button]",function(e){var $btn=$(e.target);$btn.hasClass("btn")||($btn=$btn.closest(".btn")),$btn.button("toggle"),e.preventDefault()})}(jQuery),+function($){"use strict";function clearMenus(e){$(backdrop).remove(),$(toggle).each(function(){var $parent=getParent($(this)),relatedTarget={relatedTarget:this};$parent.hasClass("open")&&($parent.trigger(e=$.Event("hide.bs.dropdown",relatedTarget)),e.isDefaultPrevented()||$parent.removeClass("open").trigger("hidden.bs.dropdown",relatedTarget))})}function getParent($this){var selector=$this.attr("data-target");selector||(selector=$this.attr("href"),selector=selector&&/#[A-Za-z]/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,""));var $parent=selector&&$(selector);return $parent&&$parent.length?$parent:$this.parent()}var backdrop=".dropdown-backdrop",toggle="[data-toggle=dropdown]",Dropdown=function(element){$(element).on("click.bs.dropdown",this.toggle)};Dropdown.prototype.toggle=function(e){var $this=$(this);if(!$this.is(".disabled, :disabled")){var $parent=getParent($this),isActive=$parent.hasClass("open");if(clearMenus(),!isActive){"ontouchstart"in document.documentElement&&!$parent.closest(".navbar-nav").length&&$('<div class="dropdown-backdrop"/>').insertAfter($(this)).on("click",clearMenus);var relatedTarget={relatedTarget:this};if($parent.trigger(e=$.Event("show.bs.dropdown",relatedTarget)),e.isDefaultPrevented())return;$parent.toggleClass("open").trigger("shown.bs.dropdown",relatedTarget),$this.focus()}return!1}},Dropdown.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var $this=$(this);if(e.preventDefault(),e.stopPropagation(),!$this.is(".disabled, :disabled")){var $parent=getParent($this),isActive=$parent.hasClass("open");if(!isActive||isActive&&27==e.keyCode)return 27==e.which&&$parent.find(toggle).focus(),$this.click();var desc=" li:not(.divider):visible a",$items=$parent.find("[role=menu]"+desc+", [role=listbox]"+desc);if($items.length){var index=$items.index($items.filter(":focus"));38==e.keyCode&&index>0&&index--,40==e.keyCode&&index<$items.length-1&&index++,~index||(index=0),$items.eq(index).focus()}}}};var old=$.fn.dropdown;$.fn.dropdown=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.dropdown");data||$this.data("bs.dropdown",data=new Dropdown(this)),"string"==typeof option&&data[option].call($this)})},$.fn.dropdown.Constructor=Dropdown,$.fn.dropdown.noConflict=function(){return $.fn.dropdown=old,this},$(document).on("click.bs.dropdown.data-api",clearMenus).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.bs.dropdown.data-api",toggle+", [role=menu], [role=listbox]",Dropdown.prototype.keydown)}(jQuery),+function($){"use strict";var Collapse=function(element,options){this.$element=$(element),this.options=$.extend({},Collapse.DEFAULTS,options),this.transitioning=null,this.options.parent&&(this.$parent=$(this.options.parent)),this.options.toggle&&this.toggle()};Collapse.DEFAULTS={toggle:!0},Collapse.prototype.dimension=function(){var hasWidth=this.$element.hasClass("width");return hasWidth?"width":"height"},Collapse.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var startEvent=$.Event("show.bs.collapse");if(this.$element.trigger(startEvent),!startEvent.isDefaultPrevented()){var actives=this.$parent&&this.$parent.find("> .panel > .in");if(actives&&actives.length){var hasData=actives.data("bs.collapse");if(hasData&&hasData.transitioning)return;actives.collapse("hide"),hasData||actives.data("bs.collapse",null)}var dimension=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[dimension](0),this.transitioning=1;var complete=function(){this.$element.removeClass("collapsing").addClass("collapse in")[dimension]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!$.support.transition)return complete.call(this);var scrollSize=$.camelCase(["scroll",dimension].join("-"));this.$element.one($.support.transition.end,$.proxy(complete,this)).emulateTransitionEnd(350)[dimension](this.$element[0][scrollSize])}}},Collapse.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var startEvent=$.Event("hide.bs.collapse");if(this.$element.trigger(startEvent),!startEvent.isDefaultPrevented()){var dimension=this.dimension();this.$element[dimension](this.$element[dimension]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var complete=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return $.support.transition?void this.$element[dimension](0).one($.support.transition.end,$.proxy(complete,this)).emulateTransitionEnd(350):complete.call(this)}}},Collapse.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var old=$.fn.collapse;$.fn.collapse=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.collapse"),options=$.extend({},Collapse.DEFAULTS,$this.data(),"object"==typeof option&&option);!data&&options.toggle&&"show"==option&&(option=!option),data||$this.data("bs.collapse",data=new Collapse(this,options)),"string"==typeof option&&data[option]()})},$.fn.collapse.Constructor=Collapse,$.fn.collapse.noConflict=function(){return $.fn.collapse=old,this},$(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(e){var href,$this=$(this),target=$this.attr("data-target")||e.preventDefault()||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,""),$target=$(target),data=$target.data("bs.collapse"),option=data?"toggle":$this.data(),parent=$this.attr("data-parent"),$parent=parent&&$(parent);data&&data.transitioning||($parent&&$parent.find('[data-toggle=collapse][data-parent="'+parent+'"]').not($this).addClass("collapsed"),$this[$target.hasClass("in")?"addClass":"removeClass"]("collapsed")),$target.collapse(option)})}(jQuery),+function($){"use strict";var dismiss='[data-dismiss="alert"]',Alert=function(el){$(el).on("click",dismiss,this.close)};Alert.prototype.close=function(e){function removeElement(){$parent.trigger("closed.bs.alert").remove()}var $this=$(this),selector=$this.attr("data-target");selector||(selector=$this.attr("href"),selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,""));var $parent=$(selector);e&&e.preventDefault(),$parent.length||($parent=$this.hasClass("alert")?$this:$this.parent()),$parent.trigger(e=$.Event("close.bs.alert")),e.isDefaultPrevented()||($parent.removeClass("in"),$.support.transition&&$parent.hasClass("fade")?$parent.one($.support.transition.end,removeElement).emulateTransitionEnd(150):removeElement())};var old=$.fn.alert;$.fn.alert=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.alert");data||$this.data("bs.alert",data=new Alert(this)),"string"==typeof option&&data[option].call($this)})},$.fn.alert.Constructor=Alert,$.fn.alert.noConflict=function(){return $.fn.alert=old,this},$(document).on("click.bs.alert.data-api",dismiss,Alert.prototype.close)}(jQuery),+function($){"use strict";function transitionEnd(){var el=document.createElement("bootstrap"),transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var name in transEndEventNames)if(void 0!==el.style[name])return{end:transEndEventNames[name]};return!1}$.fn.emulateTransitionEnd=function(duration){var called=!1,$el=this;$(this).one($.support.transition.end,function(){called=!0});var callback=function(){called||$($el).trigger($.support.transition.end)};return setTimeout(callback,duration),this},$(function(){$.support.transition=transitionEnd()})}(jQuery),+function($){"use strict";var Modal=function(element,options){this.options=options,this.$element=$(element),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,$.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};Modal.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},Modal.prototype.toggle=function(_relatedTarget){return this[this.isShown?"hide":"show"](_relatedTarget)},Modal.prototype.show=function(_relatedTarget){var that=this,e=$.Event("show.bs.modal",{relatedTarget:_relatedTarget});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',$.proxy(this.hide,this)),this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass("fade");that.$element.parent().length||that.$element.appendTo(document.body),that.$element.show().scrollTop(0),transition&&that.$element[0].offsetWidth,that.$element.addClass("in").attr("aria-hidden",!1),that.enforceFocus();var e=$.Event("shown.bs.modal",{relatedTarget:_relatedTarget});transition?that.$element.find(".modal-dialog").one($.support.transition.end,function(){that.$element.focus().trigger(e)}).emulateTransitionEnd(300):that.$element.focus().trigger(e)}))},Modal.prototype.hide=function(e){e&&e.preventDefault(),e=$.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),$(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),$.support.transition&&this.$element.hasClass("fade")?this.$element.one($.support.transition.end,$.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},Modal.prototype.enforceFocus=function(){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.focus()},this))},Modal.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",$.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},Modal.prototype.hideModal=function(){var that=this;this.$element.hide(),this.backdrop(function(){that.removeBackdrop(),that.$element.trigger("hidden.bs.modal")})},Modal.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},Modal.prototype.backdrop=function(callback){var animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;if(this.$backdrop=$('<div class="modal-backdrop '+animate+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",$.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),doAnimate&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!callback)return;doAnimate?this.$backdrop.one($.support.transition.end,callback).emulateTransitionEnd(150):callback()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one($.support.transition.end,callback).emulateTransitionEnd(150):callback()):callback&&callback()};var old=$.fn.modal;$.fn.modal=function(option,_relatedTarget){return this.each(function(){var $this=$(this),data=$this.data("bs.modal"),options=$.extend({},Modal.DEFAULTS,$this.data(),"object"==typeof option&&option);data||$this.data("bs.modal",data=new Modal(this,options)),"string"==typeof option?data[option](_relatedTarget):options.show&&data.show(_relatedTarget)})},$.fn.modal.Constructor=Modal,$.fn.modal.noConflict=function(){return $.fn.modal=old,this},$(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var $this=$(this),href=$this.attr("href"),$target=$($this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,"")),option=$target.data("bs.modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());$this.is("a")&&e.preventDefault(),$target.modal(option,this).one("hide",function(){$this.is(":visible")&&$this.focus()})}),$(document).on("show.bs.modal",".modal",function(){$(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){$(document.body).removeClass("modal-open")})}(jQuery),+function($){"use strict";var Tab=function(element){this.element=$(element)};Tab.prototype.show=function(){var $this=this.element,$ul=$this.closest("ul:not(.dropdown-menu)"),selector=$this.data("target");if(selector||(selector=$this.attr("href"),selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")),!$this.parent("li").hasClass("active")){var previous=$ul.find(".active:last a")[0],e=$.Event("show.bs.tab",{relatedTarget:previous});if($this.trigger(e),!e.isDefaultPrevented()){var $target=$(selector);this.activate($this.parent("li"),$ul),this.activate($target,$target.parent(),function(){$this.trigger({type:"shown.bs.tab",relatedTarget:previous})})}}},Tab.prototype.activate=function(element,container,callback){function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),element.addClass("active"),transition?(element[0].offsetWidth,element.addClass("in")):element.removeClass("fade"),element.parent(".dropdown-menu")&&element.closest("li.dropdown").addClass("active"),callback&&callback()}var $active=container.find("> .active"),transition=callback&&$.support.transition&&$active.hasClass("fade");transition?$active.one($.support.transition.end,next).emulateTransitionEnd(150):next(),$active.removeClass("in")};var old=$.fn.tab;$.fn.tab=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.tab");data||$this.data("bs.tab",data=new Tab(this)),"string"==typeof option&&data[option]()})},$.fn.tab.Constructor=Tab,$.fn.tab.noConflict=function(){return $.fn.tab=old,this},$(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),$(this).tab("show")})}(jQuery),+function($){"use strict";var Popover=function(element,options){this.init("popover",element,options)};if(!$.fn.tooltip)throw new Error("Popover requires tooltip.js");Popover.DEFAULTS=$.extend({},$.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype),Popover.prototype.constructor=Popover,Popover.prototype.getDefaults=function(){return Popover.DEFAULTS},Popover.prototype.setContent=function(){var $tip=this.tip(),title=this.getTitle(),content=this.getContent();$tip.find(".popover-title")[this.options.html?"html":"text"](title),$tip.find(".popover-content")[this.options.html?"string"==typeof content?"html":"append":"text"](content),$tip.removeClass("fade top bottom left right in"),$tip.find(".popover-title").html()||$tip.find(".popover-title").hide()},Popover.prototype.hasContent=function(){return this.getTitle()||this.getContent()},Popover.prototype.getContent=function(){var $e=this.$element,o=this.options;return $e.attr("data-content")||("function"==typeof o.content?o.content.call($e[0]):o.content)},Popover.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},Popover.prototype.tip=function(){return this.$tip||(this.$tip=$(this.options.template)),this.$tip};var old=$.fn.popover;$.fn.popover=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.popover"),options="object"==typeof option&&option;(data||"destroy"!=option)&&(data||$this.data("bs.popover",data=new Popover(this,options)),"string"==typeof option&&data[option]())})},$.fn.popover.Constructor=Popover,$.fn.popover.noConflict=function(){return $.fn.popover=old,this}}(jQuery),function(){function o(e){var i=function(e,t){return r("",e,t)},s=t;
e&&(t[e]||(t[e]={}),s=t[e]),s.define&&s.define.packaged||(n.original=s.define,s.define=n,s.define.packaged=!0),s.require&&s.require.packaged||(r.original=s.require,s.require=i,s.require.packaged=!0)}var e="ace",t=function(){return this}();if(e||"undefined"==typeof requirejs){var n=function(e,t,r){return"string"!=typeof e?void(n.original?n.original.apply(window,arguments):(console.error("dropping module because define wasn't a string."),console.trace())):(2==arguments.length&&(r=t),n.modules||(n.modules={},n.payloads={}),n.payloads[e]=r,n.modules[e]=null,void 0)},r=function(e,t,n){if("[object Array]"===Object.prototype.toString.call(t)){for(var i=[],o=0,u=t.length;u>o;++o){var a=s(e,t[o]);if(!a&&r.original)return r.original.apply(window,arguments);i.push(a)}n&&n.apply(null,i)}else{if("string"==typeof t){var f=s(e,t);return!f&&r.original?r.original.apply(window,arguments):(n&&n(),f)}if(r.original)return r.original.apply(window,arguments)}},i=function(e,t){if(-1!==t.indexOf("!")){var n=t.split("!");return i(e,n[0])+"!"+i(e,n[1])}if("."==t.charAt(0)){var r=e.split("/").slice(0,-1).join("/");for(t=r+"/"+t;-1!==t.indexOf(".")&&s!=t;){var s=t;t=t.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return t},s=function(e,t){t=i(e,t);var s=n.modules[t];if(!s){if(s=n.payloads[t],"function"==typeof s){var o={},u={id:t,uri:"",exports:o,packaged:!0},a=function(e,n){return r(t,e,n)},f=s(a,o,u);o=f||u.exports,n.modules[t]=o,delete n.payloads[t]}s=n.modules[t]=o||s}return s};o(e)}}(),ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/multi_select","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],function(e,t,n){e("./lib/fixoldbrowsers");var r=e("./lib/dom"),i=e("./lib/event"),s=e("./editor").Editor,o=e("./edit_session").EditSession,u=e("./undomanager").UndoManager,a=e("./virtual_renderer").VirtualRenderer,f=e("./multi_select").MultiSelect;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.require=e,t.edit=function(e){if("string"==typeof e){var n=e,e=document.getElementById(n);if(!e)throw new Error("ace.edit can't find div #"+n)}if(e.env&&e.env.editor instanceof s)return e.env.editor;var o=t.createEditSession(r.getInnerText(e));e.innerHTML="";var u=new s(new a(e));new f(u),u.setSession(o);var l={document:o,editor:u,onResize:u.resize.bind(u,null)};return i.addListener(window,"resize",l.onResize),u.on("destroy",function(){i.removeListener(window,"resize",l.onResize)}),e.env=u.env=l,u},t.createEditSession=function(e,t){var n=new o(e,t);return n.setUndoManager(new u),n},t.EditSession=o,t.UndoManager=u}),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],function(e,t,n){e("./regexp"),e("./es5-shim")}),ace.define("ace/lib/regexp",["require","exports","module"],function(e,t,n){function o(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":"")}function u(e,t,n){if(Array.prototype.indexOf)return e.indexOf(t,n);for(var r=n||0;r<e.length;r++)if(e[r]===t)return r;return-1}var r={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},i=void 0===r.exec.call(/()??/,"")[1],s=function(){var e=/^/g;return r.test.call(e,""),!e.lastIndex}();s&&i||(RegExp.prototype.exec=function(e){var n,a,t=r.exec.apply(this,arguments);if("string"==typeof e&&t){if(!i&&t.length>1&&u(t,"")>-1&&(a=RegExp(this.source,r.replace.call(o(this),"g","")),r.replace.call(e.slice(t.index),a,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(t[e]=void 0)})),this._xregexp&&this._xregexp.captureNames)for(var f=1;f<t.length;f++)n=this._xregexp.captureNames[f-1],n&&(t[n]=t[f]);!s&&this.global&&!t[0].length&&this.lastIndex>t.index&&this.lastIndex--}return t},s||(RegExp.prototype.test=function(e){var t=r.exec.call(this,e);return t&&this.global&&!t[0].length&&this.lastIndex>t.index&&this.lastIndex--,!!t}))}),ace.define("ace/lib/es5-shim",["require","exports","module"],function(e,t,n){function r(){}function w(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(t){}}function H(e){return e=+e,e!==e?e=0:0!==e&&e!==1/0&&e!==-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e}Function.prototype.bind||(Function.prototype.bind=function(t){var n=this;if("function"!=typeof n)throw new TypeError("Function.prototype.bind called on incompatible "+n);var i=u.call(arguments,1),s=function(){if(this instanceof s){var e=n.apply(this,i.concat(u.call(arguments)));return Object(e)===e?e:this}return n.apply(t,i.concat(u.call(arguments)))};return n.prototype&&(r.prototype=n.prototype,s.prototype=new r,r.prototype=null),s});var l,c,h,p,d,i=Function.prototype.call,s=Array.prototype,o=Object.prototype,u=s.slice,a=i.bind(o.toString),f=i.bind(o.hasOwnProperty);if((d=f(o,"__defineGetter__"))&&(l=i.bind(o.__defineGetter__),c=i.bind(o.__defineSetter__),h=i.bind(o.__lookupGetter__),p=i.bind(o.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function e(e){var t=new Array(e+2);return t[0]=t[1]=0,t}var n,t=[];return t.splice.apply(t,e(20)),t.splice.apply(t,e(26)),n=t.length,t.splice(5,0,"XXX"),n+1==t.length,n+1==t.length?!0:void 0}()){var v=Array.prototype.splice;Array.prototype.splice=function(e,t){return arguments.length?v.apply(this,[void 0===e?0:e,void 0===t?this.length-e:t].concat(u.call(arguments,2))):[]}}else Array.prototype.splice=function(e,t){var n=this.length;e>0?e>n&&(e=n):void 0==e?e=0:0>e&&(e=Math.max(n+e,0)),n>e+t||(t=n-e);var r=this.slice(e,e+t),i=u.call(arguments,2),s=i.length;if(e===n)s&&this.push.apply(this,i);else{var o=Math.min(t,n-e),a=e+o,f=a+s-o,l=n-a,c=n-o;if(a>f)for(var h=0;l>h;++h)this[f+h]=this[a+h];else if(f>a)for(h=l;h--;)this[f+h]=this[a+h];if(s&&e===c)this.length=c,this.push.apply(this,i);else for(this.length=c+s,h=0;s>h;++h)this[e+h]=i[h]}return r};Array.isArray||(Array.isArray=function(t){return"[object Array]"==a(t)});var m=Object("a"),g="a"!=m[0]||!(0 in m);if(Array.prototype.forEach||(Array.prototype.forEach=function(t){var n=F(this),r=g&&"[object String]"==a(this)?this.split(""):n,i=arguments[1],s=-1,o=r.length>>>0;if("[object Function]"!=a(t))throw new TypeError;for(;++s<o;)s in r&&t.call(i,r[s],s,n)}),Array.prototype.map||(Array.prototype.map=function(t){var n=F(this),r=g&&"[object String]"==a(this)?this.split(""):n,i=r.length>>>0,s=Array(i),o=arguments[1];if("[object Function]"!=a(t))throw new TypeError(t+" is not a function");for(var u=0;i>u;u++)u in r&&(s[u]=t.call(o,r[u],u,n));return s}),Array.prototype.filter||(Array.prototype.filter=function(t){var o,n=F(this),r=g&&"[object String]"==a(this)?this.split(""):n,i=r.length>>>0,s=[],u=arguments[1];if("[object Function]"!=a(t))throw new TypeError(t+" is not a function");for(var f=0;i>f;f++)f in r&&(o=r[f],t.call(u,o,f,n)&&s.push(o));return s}),Array.prototype.every||(Array.prototype.every=function(t){var n=F(this),r=g&&"[object String]"==a(this)?this.split(""):n,i=r.length>>>0,s=arguments[1];if("[object Function]"!=a(t))throw new TypeError(t+" is not a function");for(var o=0;i>o;o++)if(o in r&&!t.call(s,r[o],o,n))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t){var n=F(this),r=g&&"[object String]"==a(this)?this.split(""):n,i=r.length>>>0,s=arguments[1];if("[object Function]"!=a(t))throw new TypeError(t+" is not a function");for(var o=0;i>o;o++)if(o in r&&t.call(s,r[o],o,n))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var n=F(this),r=g&&"[object String]"==a(this)?this.split(""):n,i=r.length>>>0;if("[object Function]"!=a(t))throw new TypeError(t+" is not a function");if(!i&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var o,s=0;if(arguments.length>=2)o=arguments[1];else for(;;){if(s in r){o=r[s++];break}if(++s>=i)throw new TypeError("reduce of empty array with no initial value")}for(;i>s;s++)s in r&&(o=t.call(void 0,o,r[s],s,n));return o}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){var n=F(this),r=g&&"[object String]"==a(this)?this.split(""):n,i=r.length>>>0;if("[object Function]"!=a(t))throw new TypeError(t+" is not a function");if(!i&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var s,o=i-1;if(arguments.length>=2)s=arguments[1];else for(;;){if(o in r){s=r[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}do o in this&&(s=t.call(void 0,s,r[o],o,n));while(o--);return s}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(t){var n=g&&"[object String]"==a(this)?this.split(""):F(this),r=n.length>>>0;if(!r)return-1;var i=0;for(arguments.length>1&&(i=H(arguments[1])),i=i>=0?i:Math.max(0,r+i);r>i;i++)if(i in n&&n[i]===t)return i;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(t){var n=g&&"[object String]"==a(this)?this.split(""):F(this),r=n.length>>>0;if(!r)return-1;var i=r-1;for(arguments.length>1&&(i=Math.min(i,H(arguments[1]))),i=i>=0?i:r-Math.abs(i);i>=0;i--)if(i in n&&t===n[i])return i;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__||(t.constructor?t.constructor.prototype:o)}),!Object.getOwnPropertyDescriptor){var y="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(t,n){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError(y+t);if(f(t,n)){var r,i,s;if(r={enumerable:!0,configurable:!0},d){var u=t.__proto__;t.__proto__=o;var i=h(t,n),s=p(t,n);if(t.__proto__=u,i||s)return i&&(r.get=i),s&&(r.set=s),r}return r.value=t[n],r}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(t){return Object.keys(t)}),!Object.create){var b;b=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var e={};for(var t in e)e[t]=null;return e.constructor=e.hasOwnProperty=e.propertyIsEnumerable=e.isPrototypeOf=e.toLocaleString=e.toString=e.valueOf=e.__proto__=null,e},Object.create=function(t,n){var r;if(null===t)r=b();else{if("object"!=typeof t)throw new TypeError("typeof prototype["+typeof t+"] != 'object'");var i=function(){};i.prototype=t,r=new i,r.__proto__=t}return void 0!==n&&Object.defineProperties(r,n),r}}if(Object.defineProperty){var E=w({}),S="undefined"==typeof document||w(document.createElement("div"));if(!E||!S)var x=Object.defineProperty}if(!Object.defineProperty||x){var T="Property description must be an object: ",N="Object.defineProperty called on non-object: ",C="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(t,n,r){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError(N+t);if("object"!=typeof r&&"function"!=typeof r||null===r)throw new TypeError(T+r);if(x)try{return x.call(Object,t,n,r)}catch(i){}if(f(r,"value"))if(d&&(h(t,n)||p(t,n))){var s=t.__proto__;t.__proto__=o,delete t[n],t[n]=r.value,t.__proto__=s}else t[n]=r.value;else{if(!d)throw new TypeError(C);f(r,"get")&&l(t,n,r.get),f(r,"set")&&c(t,n,r.set)}return t}}Object.defineProperties||(Object.defineProperties=function(t,n){for(var r in n)f(n,r)&&Object.defineProperty(t,r,n[r]);return t}),Object.seal||(Object.seal=function(t){return t}),Object.freeze||(Object.freeze=function(t){return t});try{Object.freeze(function(){})}catch(k){Object.freeze=function(t){return function(n){return"function"==typeof n?n:t(n)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(t){return t}),Object.isSealed||(Object.isSealed=function(t){return!1}),Object.isFrozen||(Object.isFrozen=function(t){return!1}),Object.isExtensible||(Object.isExtensible=function(t){if(Object(t)===t)throw new TypeError;for(var n="";f(t,n);)n+="?";t[n]=!0;var r=f(t,n);return delete t[n],r}),!Object.keys){var L=!0,A=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],O=A.length;for(var M in{toString:null})L=!1;Object.keys=function I(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on a non-object");var I=[];for(var t in e)f(e,t)&&I.push(t);if(L)for(var n=0,r=O;r>n;n++){var i=A[n];f(e,i)&&I.push(i)}return I}}Date.now||(Date.now=function(){return(new Date).getTime()});var _="	\n\f\r   ᠎             　\u2028\u2029\ufeff";if(!String.prototype.trim||_.trim()){_="["+_+"]";var D=new RegExp("^"+_+_+"*"),P=new RegExp(_+_+"*$");String.prototype.trim=function(){return String(this).replace(D,"").replace(P,"")}}var F=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)}}),ace.define("ace/lib/dom",["require","exports","module"],function(e,t,n){if("undefined"!=typeof document){var r="http://www.w3.org/1999/xhtml";t.getDocumentHead=function(e){return e||(e=document),e.head||e.getElementsByTagName("head")[0]||e.documentElement},t.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||r,e):document.createElement(e)},t.hasCssClass=function(e,t){var n=e.className.split(/\s+/g);return-1!==n.indexOf(t)},t.addCssClass=function(e,n){t.hasCssClass(e,n)||(e.className+=" "+n)},t.removeCssClass=function(e,t){for(var n=e.className.split(/\s+/g);;){var r=n.indexOf(t);if(-1==r)break;n.splice(r,1)}e.className=n.join(" ")},t.toggleCssClass=function(e,t){for(var n=e.className.split(/\s+/g),r=!0;;){var i=n.indexOf(t);if(-1==i)break;r=!1,n.splice(i,1)}return r&&n.push(t),e.className=n.join(" "),r},t.setCssClass=function(e,n,r){r?t.addCssClass(e,n):t.removeCssClass(e,n)},t.hasCssString=function(e,t){var r,n=0;if(t=t||document,t.createStyleSheet&&(r=t.styleSheets)){for(;n<r.length;)if(r[n++].owningElement.id===e)return!0}else if(r=t.getElementsByTagName("style"))for(;n<r.length;)if(r[n++].id===e)return!0;return!1},t.importCssString=function(n,i,s){if(s=s||document,i&&t.hasCssString(i,s))return null;var o;s.createStyleSheet?(o=s.createStyleSheet(),o.cssText=n,i&&(o.owningElement.id=i)):(o=s.createElementNS?s.createElementNS(r,"style"):s.createElement("style"),o.appendChild(s.createTextNode(n)),i&&(o.id=i),t.getDocumentHead(s).appendChild(o))},t.importCssStylsheet=function(e,n){if(n.createStyleSheet)n.createStyleSheet(e);else{var r=t.createElement("link");r.rel="stylesheet",r.href=e,t.getDocumentHead(n).appendChild(r)}},t.getInnerWidth=function(e){return parseInt(t.computedStyle(e,"paddingLeft"),10)+parseInt(t.computedStyle(e,"paddingRight"),10)+e.clientWidth},t.getInnerHeight=function(e){return parseInt(t.computedStyle(e,"paddingTop"),10)+parseInt(t.computedStyle(e,"paddingBottom"),10)+e.clientHeight},void 0!==window.pageYOffset?(t.getPageScrollTop=function(){return window.pageYOffset},t.getPageScrollLeft=function(){return window.pageXOffset}):(t.getPageScrollTop=function(){return document.body.scrollTop},t.getPageScrollLeft=function(){return document.body.scrollLeft}),window.getComputedStyle?t.computedStyle=function(e,t){return t?(window.getComputedStyle(e,"")||{})[t]||"":window.getComputedStyle(e,"")||{}}:t.computedStyle=function(e,t){return t?e.currentStyle[t]:e.currentStyle},t.scrollbarWidth=function(e){var n=t.createElement("ace_inner");n.style.width="100%",n.style.minWidth="0px",n.style.height="200px",n.style.display="block";var r=t.createElement("ace_outer"),i=r.style;i.position="absolute",i.left="-10000px",i.overflow="hidden",i.width="200px",i.minWidth="0px",i.height="150px",i.display="block",r.appendChild(n);var s=e.documentElement;s.appendChild(r);var o=n.offsetWidth;i.overflow="scroll";var u=n.offsetWidth;return o==u&&(u=r.clientWidth),s.removeChild(r),o-u},t.setInnerHtml=function(e,t){var n=e.cloneNode(!1);return n.innerHTML=t,e.parentNode.replaceChild(n,e),n},"textContent"in document.documentElement?(t.setInnerText=function(e,t){e.textContent=t},t.getInnerText=function(e){return e.textContent}):(t.setInnerText=function(e,t){e.innerText=t},t.getInnerText=function(e){return e.innerText}),t.getParentWindow=function(e){return e.defaultView||e.parentWindow}}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){function o(e,t,n){var o=s(t);if(!i.isMac&&u){if((u[91]||u[92])&&(o|=8),u.altGr){if(3==(3&o))return;u.altGr=0}if(18===n||17===n){var f=t.location||t.keyLocation;if(17===n&&1===f)a=t.timeStamp;else if(18===n&&3===o&&2===f){var l=-a;a=t.timeStamp,l+=a,3>l&&(u.altGr=!0)}}}if(n in r.MODIFIER_KEYS){switch(r.MODIFIER_KEYS[n]){case"Alt":o=2;break;case"Shift":o=4;break;case"Ctrl":o=1;break;default:o=8}n=-1}return 8&o&&(91===n||93===n)&&(n=-1),o||13!==n||!t.location&&3!==t.keyLocation||(e(t,o,-n),!t.defaultPrevented)?o||n in r.FUNCTION_KEYS||n in r.PRINTABLE_KEYS?e(t,o,n):!1:void 0}var r=e("./keys"),i=e("./useragent");t.addListener=function(e,t,n){if(e.addEventListener)return e.addEventListener(t,n,!1);if(e.attachEvent){var r=function(){n.call(e,window.event)};n._wrapper=r,e.attachEvent("on"+t,r)}},t.removeListener=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):void(e.detachEvent&&e.detachEvent("on"+t,n._wrapper||n))},t.stopEvent=function(e){return t.stopPropagation(e),t.preventDefault(e),!1},t.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},t.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},t.getButton=function(e){return"dblclick"==e.type?0:"contextmenu"==e.type||e.ctrlKey&&i.isMac?2:e.preventDefault?e.button:{1:0,2:2,4:1}[e.button]},t.capture=function(e,n,r){function i(e){n&&n(e),r&&r(e),t.removeListener(document,"mousemove",n,!0),t.removeListener(document,"mouseup",i,!0),t.removeListener(document,"dragstart",i,!0)}return t.addListener(document,"mousemove",n,!0),t.addListener(document,"mouseup",i,!0),t.addListener(document,"dragstart",i,!0),i},t.addMouseWheelListener=function(e,n){"onmousewheel"in e?t.addListener(e,"mousewheel",function(e){var t=8;void 0!==e.wheelDeltaX?(e.wheelX=-e.wheelDeltaX/t,e.wheelY=-e.wheelDeltaY/t):(e.wheelX=0,e.wheelY=-e.wheelDelta/t),n(e)}):"onwheel"in e?t.addListener(e,"wheel",function(e){var t=.35;switch(e.deltaMode){case e.DOM_DELTA_PIXEL:e.wheelX=e.deltaX*t||0,e.wheelY=e.deltaY*t||0;break;case e.DOM_DELTA_LINE:case e.DOM_DELTA_PAGE:e.wheelX=5*(e.deltaX||0),e.wheelY=5*(e.deltaY||0)}n(e)}):t.addListener(e,"DOMMouseScroll",function(e){e.axis&&e.axis==e.HORIZONTAL_AXIS?(e.wheelX=5*(e.detail||0),e.wheelY=0):(e.wheelX=0,e.wheelY=5*(e.detail||0)),n(e)})},t.addMultiMouseDownListener=function(e,n,r,s){var u,a,f,o=0,l={2:"dblclick",3:"tripleclick",4:"quadclick"};t.addListener(e,"mousedown",function(e){if(0!==t.getButton(e)?o=0:e.detail>1?(o++,o>4&&(o=1)):o=1,i.isIE){var c=Math.abs(e.clientX-u)>5||Math.abs(e.clientY-a)>5;(!f||c)&&(o=1),f&&clearTimeout(f),f=setTimeout(function(){f=null},n[o-1]||600),1==o&&(u=e.clientX,a=e.clientY)}if(r[s]("mousedown",e),o>4)o=0;else if(o>1)return r[s](l[o],e)}),i.isOldIE&&t.addListener(e,"dblclick",function(e){o=2,f&&clearTimeout(f),f=setTimeout(function(){f=null},n[o-1]||600),r[s]("mousedown",e),r[s](l[o],e)})};var s=!i.isMac||!i.isOpera||"KeyboardEvent"in window?function(e){return 0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)}:function(e){return 0|(e.metaKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.ctrlKey?8:0)};t.getModifierString=function(e){return r.KEY_MODS[s(e)]};var u=null,a=0;if(t.addCommandKeyListener=function(e,n){var r=t.addListener;if(i.isOldGecko||i.isOpera&&!("KeyboardEvent"in window)){var s=null;r(e,"keydown",function(e){s=e.keyCode}),r(e,"keypress",function(e){return o(n,e,s)})}else{var a=null;r(e,"keydown",function(e){u[e.keyCode]=!0;var t=o(n,e,e.keyCode);return a=e.defaultPrevented,t}),r(e,"keypress",function(e){a&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&(t.stopEvent(e),a=null)}),r(e,"keyup",function(e){u[e.keyCode]=null}),u||(u=Object.create(null),r(window,"focus",function(e){u=Object.create(null)}))}},window.postMessage&&!i.isOldIE){var f=1;t.nextTick=function(e,n){n=n||window;var r="zero-timeout-message-"+f;t.addListener(n,"message",function i(s){s.data==r&&(t.stopPropagation(s),t.removeListener(n,"message",i),e())}),n.postMessage(r,"*")}}t.nextFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame,t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(e){setTimeout(e,17)}}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,t,n){var r=e("./oop"),i=function(){var t,n,e={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,"super":8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}};for(n in e.FUNCTION_KEYS)t=e.FUNCTION_KEYS[n].toLowerCase(),e[t]=parseInt(n,10);for(n in e.PRINTABLE_KEYS)t=e.PRINTABLE_KEYS[n].toLowerCase(),e[t]=parseInt(n,10);return r.mixin(e,e.MODIFIER_KEYS),r.mixin(e,e.PRINTABLE_KEYS),r.mixin(e,e.FUNCTION_KEYS),e.enter=e["return"],e.escape=e.esc,e.del=e["delete"],e[173]="-",function(){for(var t=["cmd","ctrl","alt","shift"],n=Math.pow(2,t.length);n--;)e.KEY_MODS[n]=t.filter(function(t){return n&e.KEY_MODS[t]}).join("-")+"-"}(),e}();r.mixin(t,i),t.keyCodeToString=function(e){var t=i[e];return"string"!=typeof t&&(t=String.fromCharCode(e)),t.toLowerCase()}}),ace.define("ace/lib/oop",["require","exports","module"],function(e,t,n){t.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(e,t){for(var n in t)e[n]=t[n];return e},t.implement=function(e,n){t.mixin(e,n)}}),ace.define("ace/lib/useragent",["require","exports","module"],function(e,t,n){if(t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS},"object"==typeof navigator){var r=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),i=navigator.userAgent;t.isWin="win"==r,t.isMac="mac"==r,t.isLinux="linux"==r,t.isIE="Microsoft Internet Explorer"==navigator.appName||navigator.appName.indexOf("MSAppHost")>=0?parseFloat((i.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((i.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=window.controllers&&"Gecko"===window.navigator.product,t.isOldGecko=t.isGecko&&parseInt((i.match(/rv\:(\d+)/)||[])[1],10)<4,t.isOpera=window.opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),t.isWebKit=parseFloat(i.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(i.split(" Chrome/")[1])||void 0,t.isAIR=i.indexOf("AdobeAIR")>=0,t.isIPad=i.indexOf("iPad")>=0,t.isTouchPad=i.indexOf("TouchPad")>=0}}),ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config"],function(e,t,n){e("./lib/fixoldbrowsers");var r=e("./lib/oop"),i=e("./lib/dom"),s=e("./lib/lang"),o=e("./lib/useragent"),u=e("./keyboard/textinput").TextInput,a=e("./mouse/mouse_handler").MouseHandler,f=e("./mouse/fold_handler").FoldHandler,l=e("./keyboard/keybinding").KeyBinding,c=e("./edit_session").EditSession,h=e("./search").Search,p=e("./range").Range,d=e("./lib/event_emitter").EventEmitter,v=e("./commands/command_manager").CommandManager,m=e("./commands/default_commands").commands,g=e("./config"),y=function(e,t){var n=e.getContainerElement();this.container=n,this.renderer=e,this.commands=new v(o.isMac?"mac":"win",m),this.textInput=new u(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.keyBinding=new l(this),this.$mouseHandler=new a(this),new f(this),this.$blockScrolling=0,this.$search=(new h).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=s.delayedCall(function(){this._signal("input",{}),this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(e,t){t._$emitInputEvent.schedule(31)}),this.setSession(t||new c("")),g.resetOptions(this),g._signal("editor",this)};(function(){r.implement(this,d),this.$initOperationListeners=function(){function e(e){return e[e.length-1]}this.selections=[],this.commands.on("exec",function(t){this.startOperation(t);var n=t.command;if("fileJump"==n.aceCommandGroup){var r=this.prevOp;r&&"fileJump"==r.command.aceCommandGroup||(this.lastFileJumpPos=e(this.selections))}else this.lastFileJumpPos=null}.bind(this),!0),this.commands.on("afterExec",function(e){var t=e.command;"fileJump"==t.aceCommandGroup&&this.lastFileJumpPos&&!this.curOp.selectionChanged&&this.selection.fromJSON(this.lastFileJumpPos),this.endOperation(e)}.bind(this),!0),this.$opResetTimer=s.delayedCall(this.endOperation.bind(this)),this.on("change",function(){this.curOp||this.startOperation(),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||this.startOperation(),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(e){if(this.curOp){if(!e||this.curOp.command)return;this.prevOp=this.curOp}e||(this.previousCommand=null,e={}),this.$opResetTimer.schedule(),this.curOp={command:e.command||{},args:e.args,scrollTop:this.renderer.scrollTop};var t=this.curOp.command;t&&t.scrollIntoView&&this.$blockScrolling++,this.selections.push(this.selection.toJSON())},this.endOperation=function(){if(this.curOp){var e=this.curOp.command;if(e&&e.scrollIntoView){switch(this.$blockScrolling--,e.scrollIntoView){case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var t=this.selection.getRange(),n=this.renderer.layerConfig;(t.start.row>=n.lastRow||t.end.row<=n.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==e.scrollIntoView&&this.renderer.animateScrolling(this.curOp.scrollTop)}this.prevOp=this.curOp,this.curOp=null}},this.$historyTracker=function(e){if(this.$mergeUndoDeltas){var t=this.prevOp,n=["backspace","del","insertstring"],r=t.command&&e.command.name==t.command.name;if("insertstring"==e.command.name){var i=e.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),r=r&&this.mergeNextCommand&&(!/\s/.test(i)||/\s/.test(t.args)),this.mergeNextCommand=!0}else r=r&&-1!==n.indexOf(e.command.name);"always"!=this.$mergeUndoDeltas&&Date.now()-this.sequenceStartTime>2e3&&(r=!1),r?this.session.mergeUndoDeltas=!0:-1!==n.indexOf(e.command.name)&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(e){if(e)if("string"==typeof e){this.$keybindingId=e;var t=this;g.loadModule(["keybinding",e],function(n){t.$keybindingId==e&&t.keyBinding.setKeyboardHandler(n&&n.handler)})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(e);else this.keyBinding.setKeyboardHandler(null)},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(e){if(this.session!=e){var t=this.session;if(t){this.session.removeEventListener("change",this.$onDocumentChange),this.session.removeEventListener("changeMode",this.$onChangeMode),this.session.removeEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.session.removeEventListener("changeTabSize",this.$onChangeTabSize),this.session.removeEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.session.removeEventListener("changeWrapMode",this.$onChangeWrapMode),this.session.removeEventListener("onChangeFold",this.$onChangeFold),this.session.removeEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.session.removeEventListener("changeBackMarker",this.$onChangeBackMarker),this.session.removeEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.session.removeEventListener("changeAnnotation",this.$onChangeAnnotation),this.session.removeEventListener("changeOverwrite",this.$onCursorChange),this.session.removeEventListener("changeScrollTop",this.$onScrollTopChange),this.session.removeEventListener("changeScrollLeft",this.$onScrollLeftChange);var n=this.session.getSelection();n.removeEventListener("changeCursor",this.$onCursorChange),n.removeEventListener("changeSelection",this.$onSelectionChange)}this.session=e,e&&(this.$onDocumentChange=this.onDocumentChange.bind(this),e.addEventListener("change",this.$onDocumentChange),this.renderer.setSession(e),this.$onChangeMode=this.onChangeMode.bind(this),e.addEventListener("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),e.addEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),e.addEventListener("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),e.addEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),e.addEventListener("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),e.addEventListener("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.addEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.addEventListener("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.addEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.addEventListener("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.addEventListener("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.addEventListener("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.addEventListener("changeScrollLeft",this.$onScrollLeftChange),this.selection=e.getSelection(),this.selection.addEventListener("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.addEventListener("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.$blockScrolling+=1,this.onCursorChange(),this.$blockScrolling-=1,this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),
this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()),this._signal("changeSession",{session:e,oldSession:t}),t&&t._signal("changeEditor",{oldEditor:this}),e&&e._signal("changeEditor",{editor:this})}},this.getSession=function(){return this.session},this.setValue=function(e,t){return this.session.doc.setValue(e),t?1==t?this.navigateFileEnd():-1==t&&this.navigateFileStart():this.selectAll(),e},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(e){this.renderer.onResize(e)},this.setTheme=function(e,t){this.renderer.setTheme(e,t)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(e){this.renderer.setStyle(e)},this.unsetStyle=function(e){this.renderer.unsetStyle(e)},this.getFontSize=function(){return this.getOption("fontSize")||i.computedStyle(this.container,"fontSize")},this.setFontSize=function(e){this.setOption("fontSize",e)},this.$highlightBrackets=function(){if(this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null),!this.$highlightPending){var e=this;this.$highlightPending=!0,setTimeout(function(){e.$highlightPending=!1;var t=e.session.findMatchingBracket(e.getCursorPosition());if(t)var n=new p(t.row,t.column,t.row,t.column+1);else if(e.session.$mode.getMatching)var n=e.session.$mode.getMatching(e.session);n&&(e.session.$bracketHighlight=e.session.addMarker(n,"ace_bracket","text"))},50)}},this.focus=function(){var e=this;setTimeout(function(){e.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus"))},this.onBlur=function(){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur"))},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(e){var r,t=e.data,n=t.range;r=n.start.row==n.end.row&&"insertLines"!=t.action&&"removeLines"!=t.action?n.end.row:1/0,this.renderer.updateLines(n.start.row,r),this._signal("change",e),this.$cursorChange()},this.onTokenizerUpdate=function(e){var t=e.data;this.renderer.updateLines(t.first,t.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$blockScrolling||this.renderer.scrollCursorIntoView(),this.$highlightBrackets(),this.$updateHighlightActiveLine(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var t,e=this.getSession();if(this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(t=this.getCursorPosition()),this.renderer.$maxLines&&1===this.session.getLength()&&!(this.renderer.$minLines>1)&&(t=!1)),e.$highlightLineMarker&&!t)e.removeMarker(e.$highlightLineMarker.id),e.$highlightLineMarker=null;else if(!e.$highlightLineMarker&&t){var n=new p(t.row,t.column,t.row,1/0);n.id=e.addMarker(n,"ace_active-line","screenLine"),e.$highlightLineMarker=n}else t&&(e.$highlightLineMarker.start.row=t.row,e.$highlightLineMarker.end.row=t.row,e.$highlightLineMarker.start.column=t.column,e._signal("changeBackMarker"))},this.onSelectionChange=function(e){var t=this.session;if(t.$selectionMarker&&t.removeMarker(t.$selectionMarker),t.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var n=this.selection.getRange(),r=this.getSelectionStyle();t.$selectionMarker=t.addMarker(n,"ace_selection",r)}var i=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(i),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var e=this.session,t=this.getSelectionRange();if(!t.isEmpty()&&!t.isMultiLine()){var n=t.start.column-1,r=t.end.column+1,i=e.getLine(t.start.row),s=i.length,o=i.substring(Math.max(n,0),Math.min(r,s));if(!(n>=0&&/^[\w\d]/.test(o)||s>=r&&/[\w\d]$/.test(o))&&(o=i.substring(t.start.column,t.end.column),/^[\w\d]+$/.test(o))){var u=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:o});return u}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(e){this.renderer.updateText(),this._emit("changeMode",e)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var e=this.getSelectedText();return this._signal("copy",e),e},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(e){if(!this.$readOnly){var t={text:e};this._signal("paste",t),this.insert(t.text,!0)}},this.execCommand=function(e,t){this.commands.exec(e,this,t)},this.insert=function(e,t){var n=this.session,r=n.getMode(),i=this.getCursorPosition();if(this.getBehavioursEnabled()&&!t){var s=r.transformAction(n.getState(i.row),"insertion",this,n,e);s&&(e!==s.text&&(this.session.mergeUndoDeltas=!1,this.$mergeNextCommand=!1),e=s.text)}if("	"==e&&(e=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()){var o=new p.fromPoints(i,i);o.end.column+=e.length,this.session.remove(o)}}else{var o=this.getSelectionRange();i=this.session.remove(o),this.clearSelection()}if("\n"==e||"\r\n"==e){var u=n.getLine(i.row);if(i.column>u.search(/\S|$/)){var a=u.substr(i.column).search(/\S|$/);n.doc.removeInLine(i.row,i.column,i.column+a)}}this.clearSelection();var f=i.column,l=n.getState(i.row),u=n.getLine(i.row),c=r.checkOutdent(l,u,e);n.insert(i,e);if(s&&s.selection&&(2==s.selection.length?this.selection.setSelectionRange(new p(i.row,f+s.selection[0],i.row,f+s.selection[1])):this.selection.setSelectionRange(new p(i.row+s.selection[0],s.selection[1],i.row+s.selection[2],s.selection[3]))),n.getDocument().isNewLine(e)){var d=r.getNextLineIndent(l,u.slice(0,i.column),n.getTabString());n.insert({row:i.row+1,column:0},d)}c&&r.autoOutdent(l,n,i.row)},this.onTextInput=function(e){this.keyBinding.onTextInput(e)},this.onCommandKey=function(e,t,n){this.keyBinding.onCommandKey(e,t,n)},this.setOverwrite=function(e){this.session.setOverwrite(e)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(e){this.setOption("scrollSpeed",e)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(e){this.setOption("dragDelay",e)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(e){this.setOption("selectionStyle",e)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(e){this.setOption("highlightActiveLine",e)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(e){this.setOption("highlightSelectedWord",e)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(e){this.renderer.setAnimatedScroll(e)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(e){this.renderer.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(e){this.renderer.setDisplayIndentGuides(e)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(e){this.renderer.setShowPrintMargin(e)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(e){this.renderer.setPrintMarginColumn(e)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(e){this.setOption("readOnly",e)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(e){this.setOption("behavioursEnabled",e)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(e){this.setOption("wrapBehavioursEnabled",e)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(e){this.setOption("showFoldWidgets",e)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(e){this.selection.isEmpty()&&("left"==e?this.selection.selectLeft():this.selection.selectRight());var t=this.getSelectionRange();if(this.getBehavioursEnabled()){var n=this.session,r=n.getState(t.start.row),i=n.getMode().transformAction(r,"deletion",this,n,t);if(0===t.end.column){var s=n.getTextRange(t);if("\n"==s[s.length-1]){var o=n.getLine(t.end.row);/^\s+$/.test(o)&&(t.end.column=o.length)}}i&&(t=i)}this.session.remove(t),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var e=this.getSelectionRange();e.start.column==e.end.column&&e.start.row==e.end.row&&(e.end.column=0,e.end.row++),this.session.remove(e),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var e=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(e)},this.transposeLetters=function(){if(this.selection.isEmpty()){var e=this.getCursorPosition(),t=e.column;if(0!==t){var r,i,n=this.session.getLine(e.row);t<n.length?(r=n.charAt(t)+n.charAt(t-1),i=new p(e.row,t-1,e.row,t+1)):(r=n.charAt(t-1)+n.charAt(t-2),i=new p(e.row,t-2,e.row,t)),this.session.replace(i,r)}}},this.toLowerCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toLowerCase()),this.selection.setSelectionRange(e)},this.toUpperCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toUpperCase()),this.selection.setSelectionRange(e)},this.indent=function(){var e=this.session,t=this.getSelectionRange();if(t.start.row<t.end.row){var n=this.$getSelectedRows();return void e.indentRows(n.first,n.last,"	")}if(t.start.column<t.end.column){var r=e.getTextRange(t);if(!/^\s+$/.test(r)){var n=this.$getSelectedRows();return void e.indentRows(n.first,n.last,"	")}}var i=e.getLine(t.start.row),o=t.start,u=e.getTabSize(),a=e.documentToScreenColumn(o.row,o.column);if(this.session.getUseSoftTabs())var f=u-a%u,l=s.stringRepeat(" ",f);else{for(var f=a%u;" "==i[t.start.column]&&f;)t.start.column--,f--;this.selection.setSelectionRange(t),l="	"}return this.insert(l)},this.blockIndent=function(){var e=this.$getSelectedRows();this.session.indentRows(e.first,e.last,"	")},this.blockOutdent=function(){var e=this.session.getSelection();this.session.outdentRows(e.getRange())},this.sortLines=function(){var e=this.$getSelectedRows(),t=this.session,n=[];for(i=e.first;i<=e.last;i++)n.push(t.getLine(i));n.sort(function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0});for(var r=new p(0,0,0,0),i=e.first;i<=e.last;i++){var s=t.getLine(i);r.start.row=i,r.end.row=i,r.end.column=s.length,t.replace(r,n[i-e.first])}},this.toggleCommentLines=function(){var e=this.session.getState(this.getCursorPosition().row),t=this.$getSelectedRows();this.session.getMode().toggleCommentLines(e,this.session,t.first,t.last)},this.toggleBlockComment=function(){var e=this.getCursorPosition(),t=this.session.getState(e.row),n=this.getSelectionRange();this.session.getMode().toggleBlockComment(t,this.session,n,e)},this.getNumberAt=function(e,t){var n=/[\-]?[0-9]+(?:\.[0-9]+)?/g;n.lastIndex=0;for(var r=this.session.getLine(e);n.lastIndex<t;){var i=n.exec(r);if(i.index<=t&&i.index+i[0].length>=t){var s={value:i[0],start:i.index,end:i.index+i[0].length};return s}}return null},this.modifyNumber=function(e){var t=this.selection.getCursor().row,n=this.selection.getCursor().column,r=new p(t,n-1,t,n),i=this.session.getTextRange(r);if(!isNaN(parseFloat(i))&&isFinite(i)){var s=this.getNumberAt(t,n);if(s){var o=s.value.indexOf(".")>=0?s.start+s.value.indexOf(".")+1:s.end,u=s.start+s.value.length-o,a=parseFloat(s.value);a*=Math.pow(10,u),e*=o!==s.end&&o>n?Math.pow(10,s.end-n-1):Math.pow(10,s.end-n),a+=e,a/=Math.pow(10,u);var f=a.toFixed(u),l=new p(t,s.start,t,s.end);this.session.replace(l,f),this.moveCursorTo(t,Math.max(s.start+1,n+f.length-s.value.length))}}},this.removeLines=function(){var t,e=this.$getSelectedRows();t=0===e.first||e.last+1<this.session.getLength()?new p(e.first,0,e.last+1,0):new p(e.first-1,this.session.getLine(e.first-1).length,e.last,this.session.getLine(e.last).length),this.session.remove(t),this.clearSelection()},this.duplicateSelection=function(){var e=this.selection,t=this.session,n=e.getRange(),r=e.isBackwards();if(n.isEmpty()){var i=n.start.row;t.duplicateLines(i,i)}else{var s=r?n.start:n.end,o=t.insert(s,t.getTextRange(n),!1);n.start=s,n.end=o,e.setSelectionRange(n,r)}},this.moveLinesDown=function(){this.$moveLines(function(e,t){return this.session.moveLinesDown(e,t)})},this.moveLinesUp=function(){this.$moveLines(function(e,t){return this.session.moveLinesUp(e,t)})},this.moveText=function(e,t,n){return this.session.moveText(e,t,n)},this.copyLinesUp=function(){this.$moveLines(function(e,t){return this.session.duplicateLines(e,t),0})},this.copyLinesDown=function(){this.$moveLines(function(e,t){return this.session.duplicateLines(e,t)})},this.$moveLines=function(e){var t=this.selection;if(!t.inMultiSelectMode||this.inVirtualSelectionMode){var n=t.toOrientedRange(),r=this.$getSelectedRows(n),i=e.call(this,r.first,r.last);n.moveBy(i,0),t.fromOrientedRange(n)}else{var s=t.rangeList.ranges;t.rangeList.detach(this.session);for(var o=s.length;o--;){for(var u=o,r=s[o].collapseRows(),a=r.end.row,f=r.start.row;o--&&(r=s[o].collapseRows(),f-r.end.row<=1);)f=r.end.row;o++;for(var i=e.call(this,f,a);u>=o;)s[u].moveBy(i,0),u--}t.fromOrientedRange(t.ranges[0]),t.rangeList.attach(this.session)}},this.$getSelectedRows=function(){var e=this.getSelectionRange().collapseRows();return{first:this.session.getRowFoldStart(e.start.row),last:this.session.getRowFoldEnd(e.end.row)}},this.onCompositionStart=function(e){this.renderer.showComposition(this.getCursorPosition())},this.onCompositionUpdate=function(e){this.renderer.setCompositionText(e)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(e){return e>=this.getFirstVisibleRow()&&e<=this.getLastVisibleRow()},this.isRowFullyVisible=function(e){return e>=this.renderer.getFirstFullyVisibleRow()&&e<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(e,t){var n=this.renderer,r=this.renderer.layerConfig,i=e*Math.floor(r.height/r.lineHeight);this.$blockScrolling++,t===!0?this.selection.$moveSelection(function(){this.moveCursorBy(i,0)}):t===!1&&(this.selection.moveCursorBy(i,0),this.selection.clearSelection()),this.$blockScrolling--;var s=n.scrollTop;n.scrollBy(0,i*r.lineHeight),null!=t&&n.scrollCursorIntoView(null,.5),n.animateScrolling(s)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(e){this.renderer.scrollToRow(e)},this.scrollToLine=function(e,t,n,r){this.renderer.scrollToLine(e,t,n,r)},this.centerSelection=function(){var e=this.getSelectionRange(),t={row:Math.floor(e.start.row+(e.end.row-e.start.row)/2),column:Math.floor(e.start.column+(e.end.column-e.start.column)/2)};this.renderer.alignCursor(t,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.$blockScrolling+=1,this.selection.selectAll(),this.$blockScrolling-=1},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(e,t){this.selection.moveCursorTo(e,t)},this.moveCursorToPosition=function(e){this.selection.moveCursorToPosition(e)},this.jumpToMatching=function(e){var t=this.getCursorPosition(),n=this.session.getBracketRange(t);if(!n){if(n=this.find({needle:/[{}()\[\]]/g,preventScroll:!0,start:{row:t.row,column:t.column-1}}),!n)return;var r=n.start;r.row==t.row&&Math.abs(r.column-t.column)<2&&(n=this.session.getBracketRange(r))}r=n&&n.cursor||r,r&&(e?n&&n.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(r.row,r.column):this.selection.moveTo(r.row,r.column))},this.gotoLine=function(e,t,n){this.selection.clearSelection(),this.session.unfold({row:e-1,column:t||0}),this.$blockScrolling+=1,this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(e-1,t||0),this.$blockScrolling-=1,this.isRowFullyVisible(e-1)||this.scrollToLine(e-1,!0,n)},this.navigateTo=function(e,t){this.selection.moveTo(e,t)},this.navigateUp=function(e){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(-e||-1,0)},this.navigateDown=function(e){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(e||1,0)},this.navigateLeft=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorLeft();else{var t=this.getSelectionRange().start;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateRight=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorRight();else{var t=this.getSelectionRange().end;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(e,t){t&&this.$search.set(t);var n=this.$search.find(this.session),r=0;return n?(this.$tryReplace(n,e)&&(r=1),null!==n&&(this.selection.setSelectionRange(n),this.renderer.scrollSelectionIntoView(n.start,n.end)),r):r},this.replaceAll=function(e,t){t&&this.$search.set(t);var n=this.$search.findAll(this.session),r=0;if(!n.length)return r;this.$blockScrolling+=1;var i=this.getSelectionRange();this.selection.moveTo(0,0);for(var s=n.length-1;s>=0;--s)this.$tryReplace(n[s],e)&&r++;return this.selection.setSelectionRange(i),this.$blockScrolling-=1,r},this.$tryReplace=function(e,t){var n=this.session.getTextRange(e);return t=this.$search.replace(n,t),null!==t?(e.end=this.session.replace(e,t),e):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(e,t,n){t||(t={}),"string"==typeof e||e instanceof RegExp?t.needle=e:"object"==typeof e&&r.mixin(t,e);var i=this.selection.getRange();null==t.needle&&(e=this.session.getTextRange(i)||this.$search.$options.needle,e||(i=this.session.getWordRange(i.start.row,i.start.column),e=this.session.getTextRange(i)),this.$search.set({needle:e})),this.$search.set(t),t.start||this.$search.set({start:i});var s=this.$search.find(this.session);return t.preventScroll?s:s?(this.revealRange(s,n),s):(t.backwards?i.start=i.end:i.end=i.start,void this.selection.setRange(i))},this.findNext=function(e,t){this.find({skipCurrent:!0,backwards:!1},e,t)},this.findPrevious=function(e,t){this.find(e,{skipCurrent:!0,backwards:!0},t)},this.revealRange=function(e,t){this.$blockScrolling+=1,this.session.unfold(e),this.selection.setSelectionRange(e),this.$blockScrolling-=1;var n=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(e.start,e.end,.5),t!==!1&&this.renderer.animateScrolling(n)},this.undo=function(){this.$blockScrolling++,this.session.getUndoManager().undo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.$blockScrolling++,this.session.getUndoManager().redo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.renderer.destroy(),this._signal("destroy",this)},this.setAutoScrollEditorIntoView=function(e){if(e){var t,n=this,r=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var i=this.$scrollAnchor;i.style.cssText="position:absolute",this.container.insertBefore(i,this.container.firstChild);var s=this.on("changeSelection",function(){r=!0}),o=this.renderer.on("beforeRender",function(){r&&(t=n.renderer.container.getBoundingClientRect())}),u=this.renderer.on("afterRender",function(){if(r&&t&&n.isFocused()){var e=n.renderer,s=e.$cursorLayer.$pixelPos,o=e.layerConfig,u=s.top-o.offset;r=s.top>=0&&u+t.top<0?!0:s.top<o.height&&s.top+t.top+o.lineHeight>window.innerHeight?!1:null,null!=r&&(i.style.top=u+"px",i.style.left=s.left+"px",i.style.height=o.lineHeight+"px",i.scrollIntoView(r)),r=t=null}});this.setAutoScrollEditorIntoView=function(e){e||(delete this.setAutoScrollEditorIntoView,this.removeEventListener("changeSelection",s),this.renderer.removeEventListener("afterRender",u),this.renderer.removeEventListener("beforeRender",o))}}},this.$resetCursorStyle=function(){var e=this.$cursorStyle||"ace",t=this.renderer.$cursorLayer;t&&(t.setSmoothBlinking("smooth"==e),t.isBlinking=!this.$readOnly&&"wide"!=e)}}).call(y.prototype),g.defineOptions(y.prototype,"editor",{selectionStyle:{set:function(e){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:e})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(e){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(e){this.$resetCursorStyle()},initialValue:!1},cursorStyle:{set:function(e){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},autoScrollEditorIntoView:{set:function(e){this.setAutoScrollEditorIntoView(e)}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",showLineNumbers:"renderer",showGutter:"renderer",displayIndentGuides:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",tabSize:"session",wrap:"session",foldStyle:"session",mode:"session"}),t.Editor=y}),ace.define("ace/lib/lang",["require","exports","module"],function(e,t,n){t.last=function(e){return e[e.length-1]},t.stringReverse=function(e){return e.split("").reverse().join("")},t.stringRepeat=function(e,t){for(var n="";t>0;)1&t&&(n+=e),(t>>=1)&&(e+=e);return n};var r=/^\s\s*/,i=/\s\s*$/;t.stringTrimLeft=function(e){return e.replace(r,"")},t.stringTrimRight=function(e){return e.replace(i,"")},t.copyObject=function(e){var t={};for(var n in e)t[n]=e[n];return t},t.copyArray=function(e){for(var t=[],n=0,r=e.length;r>n;n++)e[n]&&"object"==typeof e[n]?t[n]=this.copyObject(e[n]):t[n]=e[n];return t},t.deepCopy=function(e){if("object"!=typeof e||!e)return e;var n=e.constructor;if(n===RegExp)return e;var r=n();for(var i in e)"object"==typeof e[i]?r[i]=t.deepCopy(e[i]):r[i]=e[i];return r},t.arrayToMap=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=1;return t},t.createMap=function(e){var t=Object.create(null);for(var n in e)t[n]=e[n];return t},t.arrayRemove=function(e,t){for(var n=0;n<=e.length;n++)t===e[n]&&e.splice(n,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(e){return e.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(e,t){var n=[];return e.replace(t,function(e){n.push({offset:arguments[arguments.length-2],length:e.length})}),n},t.deferredCall=function(e){var t=null,n=function(){t=null,e()},r=function(e){return r.cancel(),t=setTimeout(n,e||0),r};return r.schedule=r,r.call=function(){return this.cancel(),e(),r},r.cancel=function(){return clearTimeout(t),t=null,r},r.isPending=function(){return t},r},t.delayedCall=function(e,t){var n=null,r=function(){n=null,e()},i=function(e){null==n&&(n=setTimeout(r,e||t))};return i.delay=function(e){n&&clearTimeout(n),n=setTimeout(r,e||t)},i.schedule=i,i.call=function(){this.cancel(),e()},i.cancel=function(){n&&clearTimeout(n),n=null},i.isPending=function(){return n},i}}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang"],function(e,t,n){var r=e("../lib/event"),i=e("../lib/useragent"),s=e("../lib/dom"),o=e("../lib/lang"),u=i.isChrome<18,a=i.isIE,f=function(e,t){function b(e){if(!h){if(k)t=0,r=e?0:n.value.length-1;else var t=e?2:1,r=2;try{n.setSelectionRange(t,r)}catch(i){}}}function w(){h||(n.value=f,i.isWebKit&&y.schedule())}function q(){setTimeout(function(){p&&(n.style.cssText=p,p=""),null==t.renderer.$keepTextAreaAtCursor&&(t.renderer.$keepTextAreaAtCursor=!0,t.renderer.$moveTextAreaToCursor())},0)}var n=s.createElement("textarea");n.className="ace_text-input",i.isTouchPad&&n.setAttribute("x-palm-disable-auto-cap",!0),n.wrap="off",n.autocorrect="off",n.autocapitalize="off",n.spellcheck=!1,n.style.opacity="0",e.insertBefore(n,e.firstChild);var f="",l=!1,c=!1,h=!1,p="",d=!0;try{var v=document.activeElement===n}catch(m){}r.addListener(n,"blur",function(){t.onBlur(),v=!1}),r.addListener(n,"focus",function(){v=!0,t.onFocus(),b()}),this.focus=function(){n.focus()},this.blur=function(){n.blur()},this.isFocused=function(){return v};var g=o.delayedCall(function(){v&&b(d)}),y=o.delayedCall(function(){h||(n.value=f,v&&b())});i.isWebKit||t.addEventListener("changeSelection",function(){t.selection.isEmpty()!=d&&(d=!d,g.schedule())}),w(),v&&t.onFocus();var E=function(e){return 0===e.selectionStart&&e.selectionEnd===e.value.length};if(!n.setSelectionRange&&n.createTextRange&&(n.setSelectionRange=function(e,t){var n=this.createTextRange();n.collapse(!0),n.moveStart("character",e),n.moveEnd("character",t),n.select()},E=function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return t&&t.parentElement()==e?t.text==e.value:!1}),i.isOldIE){var S=!1,x=function(e){if(!S){var t=n.value;if(!h&&t&&t!=f)return e&&t==f[0]?T.schedule():(A(t),S=!0,w(),S=!1,void 0)}},T=o.delayedCall(x);r.addListener(n,"propertychange",x);var N={13:1,27:1};r.addListener(n,"keyup",function(e){return h&&(!n.value||N[e.keyCode])&&setTimeout(F,0),(n.value.charCodeAt(0)||0)<129?T.call():void(h?j():B())}),r.addListener(n,"keydown",function(e){T.schedule(50)})}var C=function(e){l?l=!1:E(n)?(t.selectAll(),b()):k&&b(t.selection.isEmpty())},k=null;this.setInputHandler=function(e){k=e},this.getInputHandler=function(){return k};var L=!1,A=function(e){k&&(e=k(e),k=null),c?(b(),e&&t.onPaste(e),c=!1):e==f.charAt(0)?L?t.execCommand("del",{source:"ace"}):t.execCommand("backspace",{source:"ace"}):(e.substring(0,2)==f?e=e.substr(2):e.charAt(0)==f.charAt(0)?e=e.substr(1):e.charAt(e.length-1)==f.charAt(0)&&(e=e.slice(0,-1)),e.charAt(e.length-1)==f.charAt(0)&&(e=e.slice(0,-1)),e&&t.onTextInput(e)),L&&(L=!1)},O=function(e){if(!h){var t=n.value;A(t),w()}},M=function(e,t){var n=e.clipboardData||window.clipboardData;if(n&&!u){var r=a?"Text":"text/plain";return t?n.setData(r,t)!==!1:n.getData(r)}},_=function(e,i){var s=t.getCopyText();return s?void(M(e,s)?(i?t.onCut():t.onCopy(),r.preventDefault(e)):(l=!0,n.value=s,n.select(),setTimeout(function(){l=!1,w(),b(),i?t.onCut():t.onCopy()}))):r.preventDefault(e)},D=function(e){_(e,!0)},P=function(e){_(e,!1)},H=function(e){var s=M(e);"string"==typeof s?(s&&t.onPaste(s),i.isIE&&setTimeout(b),r.preventDefault(e)):(n.value="",c=!0)};r.addCommandKeyListener(n,t.onCommandKey.bind(t)),r.addListener(n,"select",C),r.addListener(n,"input",O),r.addListener(n,"cut",D),r.addListener(n,"copy",P),r.addListener(n,"paste",H),(!("oncut"in n)||!("oncopy"in n)||!("onpaste"in n))&&r.addListener(e,"keydown",function(e){if((!i.isMac||e.metaKey)&&e.ctrlKey)switch(e.keyCode){case 67:P(e);break;case 86:H(e);break;case 88:D(e)}});var B=function(e){!h&&t.onCompositionStart&&(h={},t.onCompositionStart(),setTimeout(j,0),t.on("mousedown",F),t.selection.isEmpty()||(t.insert(""),t.session.markUndoGroup(),t.selection.clearSelection()),t.session.markUndoGroup())},j=function(){if(h&&t.onCompositionUpdate){var e=n.value.replace(/\x01/g,"");if(h.lastValue!==e&&(t.onCompositionUpdate(e),h.lastValue&&t.undo(),h.lastValue=e,h.lastValue)){var r=t.selection.getRange();t.insert(h.lastValue),t.session.markUndoGroup(),h.range=t.selection.getRange(),t.selection.setRange(r),t.selection.clearSelection()}}},F=function(e){if(t.onCompositionEnd){var r=h;h=!1;var i=setTimeout(function(){i=null;var e=n.value.replace(/\x01/g,"");h||(e==r.lastValue?w():!r.lastValue&&e&&(w(),A(e)))});k=function(n){return i&&clearTimeout(i),n=n.replace(/\x01/g,""),n==r.lastValue?"":(r.lastValue&&i&&t.undo(),n)},t.onCompositionEnd(),t.removeListener("mousedown",F),"compositionend"==e.type&&r.range&&t.selection.setRange(r.range)}},I=o.delayedCall(j,50);
if(r.addListener(n,"compositionstart",B),i.isGecko?r.addListener(n,"text",function(){I.schedule()}):(r.addListener(n,"keyup",function(){I.schedule()}),r.addListener(n,"keydown",function(){I.schedule()})),r.addListener(n,"compositionend",F),this.getElement=function(){return n},this.setReadOnly=function(e){n.readOnly=e},this.onContextMenu=function(e){L=!0,p||(p=n.style.cssText),n.style.cssText="z-index:100000;"+(i.isIE?"opacity:0.1;":""),b(t.selection.isEmpty()),t._emit("nativecontextmenu",{target:t,domEvent:e});var o=t.container.getBoundingClientRect(),u=s.computedStyle(t.container),a=o.top+(parseInt(u.borderTopWidth)||0),f=o.left+(parseInt(o.borderLeftWidth)||0),l=o.bottom-a-n.clientHeight,c=function(e){n.style.left=e.clientX-f-2+"px",n.style.top=Math.min(e.clientY-a-2,l)+"px"};c(e),"mousedown"==e.type&&(t.renderer.$keepTextAreaAtCursor&&(t.renderer.$keepTextAreaAtCursor=null),i.isWin&&r.capture(t.container,c,q))},this.onContextMenuClose=q,!i.isGecko||i.isMac){var R=function(e){t.textInput.onContextMenu(e),q()};r.addListener(t.renderer.scroller,"contextmenu",R),r.addListener(n,"contextmenu",R)}};t.TextInput=f}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/config"],function(e,t,n){var r=e("../lib/event"),i=e("../lib/useragent"),s=e("./default_handlers").DefaultHandlers,o=e("./default_gutter_handler").GutterHandler,u=e("./mouse_event").MouseEvent,a=e("./dragdrop_handler").DragdropHandler,f=e("../config"),l=function(e){this.editor=e,new s(this),new o(this),new a(this);var t=function(t){e.focus()},n=e.renderer.getMouseEventTarget();r.addListener(n,"click",this.onMouseEvent.bind(this,"click")),r.addListener(n,"mousemove",this.onMouseMove.bind(this,"mousemove")),r.addMultiMouseDownListener(n,[400,300,250],this,"onMouseEvent"),e.renderer.scrollBarV&&(r.addMultiMouseDownListener(e.renderer.scrollBarV.inner,[400,300,250],this,"onMouseEvent"),r.addMultiMouseDownListener(e.renderer.scrollBarH.inner,[400,300,250],this,"onMouseEvent"),i.isIE&&(r.addListener(e.renderer.scrollBarV.element,"mousedown",t),r.addListener(e.renderer.scrollBarH.element,"mousemove",t))),r.addMouseWheelListener(e.container,this.onMouseWheel.bind(this,"mousewheel"));var u=e.renderer.$gutter;r.addListener(u,"mousedown",this.onMouseEvent.bind(this,"guttermousedown")),r.addListener(u,"click",this.onMouseEvent.bind(this,"gutterclick")),r.addListener(u,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick")),r.addListener(u,"mousemove",this.onMouseEvent.bind(this,"guttermousemove")),r.addListener(n,"mousedown",t),r.addListener(u,"mousedown",function(t){return e.focus(),r.preventDefault(t)})};(function(){this.onMouseEvent=function(e,t){this.editor._emit(e,new u(t,this.editor))},this.onMouseMove=function(e,t){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;n&&n.length&&this.editor._emit(e,new u(t,this.editor))},this.onMouseWheel=function(e,t){var n=new u(t,this.editor);n.speed=2*this.$scrollSpeed,n.wheelX=t.wheelX,n.wheelY=t.wheelY,this.editor._emit(e,n)},this.setState=function(e){this.state=e},this.captureMouse=function(e,t){this.x=e.x,this.y=e.y,this.isMousePressed=!0;var n=this.editor.renderer;n.$keepTextAreaAtCursor&&(n.$keepTextAreaAtCursor=null);var s=this,o=function(e){return e?i.isWebKit&&!e.which&&s.releaseMouse?s.releaseMouse():(s.x=e.clientX,s.y=e.clientY,t&&t(e),s.mouseEvent=new u(e,s.editor),s.$mouseMoved=!0,void 0):void 0},a=function(e){clearInterval(l),f(),s[s.state+"End"]&&s[s.state+"End"](e),s.state="",null==n.$keepTextAreaAtCursor&&(n.$keepTextAreaAtCursor=!0,n.$moveTextAreaToCursor()),s.isMousePressed=!1,s.$onCaptureMouseMove=s.releaseMouse=null,e&&s.onMouseEvent("mouseup",e)},f=function(){s[s.state]&&s[s.state](),s.$mouseMoved=!1};if(i.isOldIE&&"dblclick"==e.domEvent.type)return setTimeout(function(){a(e)});s.$onCaptureMouseMove=o,s.releaseMouse=r.capture(this.editor.container,o,a);var l=setInterval(f,20)},this.releaseMouse=null}).call(l.prototype),f.defineOptions(l.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:150},dragEnabled:{initialValue:!0},focusTimout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=l}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,n){function u(e){e.$clickSelection=null;var t=e.editor;t.setDefaultHandler("mousedown",this.onMouseDown.bind(e)),t.setDefaultHandler("dblclick",this.onDoubleClick.bind(e)),t.setDefaultHandler("tripleclick",this.onTripleClick.bind(e)),t.setDefaultHandler("quadclick",this.onQuadClick.bind(e)),t.setDefaultHandler("mousewheel",this.onMouseWheel.bind(e));var n=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];n.forEach(function(t){e[t]=this[t]},this),e.selectByLines=this.extendSelectionBy.bind(e,"getLineRange"),e.selectByWords=this.extendSelectionBy.bind(e,"getWordRange")}function a(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}function f(e,t){if(e.start.row==e.end.row)var n=2*t.column-e.start.column-e.end.column;else if(e.start.row!=e.end.row-1||e.start.column||e.end.column)var n=2*t.row-e.start.row-e.end.row;else var n=t.column-4;return 0>n?{cursor:e.start,anchor:e.end}:{cursor:e.end,anchor:e.start}}var o=(e("../lib/dom"),e("../lib/event"),e("../lib/useragent"),0);(function(){this.onMouseDown=function(e){var t=e.inSelection(),n=e.getDocumentPosition();this.mousedownEvent=e;var r=this.editor,i=e.getButton();if(0!==i){var s=r.getSelectionRange(),o=s.isEmpty();return o&&r.selection.moveToPosition(n),void r.textInput.onContextMenu(e.domEvent)}return!t||r.isFocused()||(r.focus(),!this.$focusTimout||this.$clickSelection||r.inMultiSelectMode)?(this.captureMouse(e),!t||this.$clickSelection||e.getShiftKey()||r.inMultiSelectMode?this.startSelect(n):t&&(this.mousedownEvent.time=Date.now(),this.startSelect(n)),e.preventDefault()):(this.mousedownEvent.time=Date.now(),this.setState("focusWait"),this.captureMouse(e),void 0)},this.startSelect=function(e){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var t=this.editor,n=this.mousedownEvent.getShiftKey();n?t.selection.selectToPosition(e):this.$clickSelection||t.selection.moveToPosition(e),t.renderer.scroller.setCapture&&t.renderer.scroller.setCapture(),t.setStyle("ace_selecting"),this.setState("select")},this.select=function(){var e,t=this.editor,n=t.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var r=this.$clickSelection.comparePoint(n);if(-1==r)e=this.$clickSelection.end;else if(1==r)e=this.$clickSelection.start;else{var i=f(this.$clickSelection,n);n=i.cursor,e=i.anchor}t.selection.setSelectionAnchor(e.row,e.column)}t.selection.selectToPosition(n),t.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(e){var t,n=this.editor,r=n.renderer.screenToTextCoordinates(this.x,this.y),i=n.selection[e](r.row,r.column);if(this.$clickSelection){var s=this.$clickSelection.comparePoint(i.start),o=this.$clickSelection.comparePoint(i.end);if(-1==s&&0>=o)t=this.$clickSelection.end,(i.end.row!=r.row||i.end.column!=r.column)&&(r=i.start);else if(1==o&&s>=0)t=this.$clickSelection.start,(i.start.row!=r.row||i.start.column!=r.column)&&(r=i.end);else if(-1==s&&1==o)r=i.end,t=i.start;else{var u=f(this.$clickSelection,r);r=u.cursor,t=u.anchor}n.selection.setSelectionAnchor(t.row,t.column)}n.selection.selectToPosition(r),n.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var e=a(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),t=Date.now();(e>o||t-this.mousedownEvent.time>this.$focusTimout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(e){var t=e.getDocumentPosition(),n=this.editor,r=n.session,i=r.getBracketRange(t);i?(i.isEmpty()&&(i.start.column--,i.end.column++),this.setState("select")):(i=n.selection.getWordRange(t.row,t.column),this.setState("selectByWords")),this.$clickSelection=i,this[this.state]&&this[this.state](e)},this.onTripleClick=function(e){var t=e.getDocumentPosition(),n=this.editor;this.setState("selectByLines"),this.$clickSelection=n.selection.getLineRange(t.row),this[this.state]&&this[this.state](e)},this.onQuadClick=function(e){var t=this.editor;t.selectAll(),this.$clickSelection=t.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(e){if(!e.getAccelKey()){e.getShiftKey()&&e.wheelY&&!e.wheelX&&(e.wheelX=e.wheelY,e.wheelY=0);var t=e.domEvent.timeStamp,n=t-(this.$lastScrollTime||0),r=this.editor,i=r.renderer.isScrollableBy(e.wheelX*e.speed,e.wheelY*e.speed);return i||200>n?(this.$lastScrollTime=t,r.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.stop()):void 0}}}).call(u.prototype),t.DefaultHandlers=u}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(e,t,n){function u(e){function l(){var r=u.getDocumentPosition().row,s=n.$annotations[r];if(!s)return c();var o=t.session.getLength();if(r==o){var a=t.renderer.pixelToScreenCoordinates(0,u.y).row,l=u.$pos;if(a>t.session.documentToScreenRow(l.row,l.column))return c()}if(f!=s)if(f=s.text.join("<br/>"),i.setHtml(f),i.show(),t.on("mousewheel",c),e.$tooltipFollowsMouse)h(u);else{var p=n.$cells[t.session.documentToScreenRow(r,0)].element,d=p.getBoundingClientRect(),v=i.getElement().style;v.left=d.right+"px",v.top=d.bottom+"px"}}function c(){o&&(o=clearTimeout(o)),f&&(i.hide(),f=null,t.removeEventListener("mousewheel",c))}function h(e){i.setPosition(e.x,e.y)}var t=e.editor,n=t.renderer.$gutterLayer,i=new a(t.container);e.editor.setDefaultHandler("guttermousedown",function(r){if(t.isFocused()&&0==r.getButton()){var i=n.getRegion(r);if("foldWidgets"!=i){var s=r.getDocumentPosition().row,o=t.session.selection;if(r.getShiftKey())o.selectTo(s,0);else{if(2==r.domEvent.detail)return t.selectAll(),r.preventDefault();e.$clickSelection=t.selection.getLineRange(s)}return e.setState("selectByLines"),e.captureMouse(r),r.preventDefault()}}});var o,u,f;e.editor.setDefaultHandler("guttermousemove",function(t){var n=t.domEvent.target||t.domEvent.srcElement;return r.hasCssClass(n,"ace_fold-widget")?c():(f&&e.$tooltipFollowsMouse&&h(t),u=t,void(o||(o=setTimeout(function(){o=null,u&&!e.isMousePressed?l():c()},50))))}),s.addListener(t.renderer.$gutter,"mouseout",function(e){u=null,f&&!o&&(o=setTimeout(function(){o=null,c()},50))}),t.on("changeSession",c)}function a(e){o.call(this,e)}var r=e("../lib/dom"),i=e("../lib/oop"),s=e("../lib/event"),o=e("../tooltip").Tooltip;i.inherits(a,o),function(){this.setPosition=function(e,t){var n=window.innerWidth||document.documentElement.clientWidth,r=window.innerHeight||document.documentElement.clientHeight,i=this.getWidth(),s=this.getHeight();e+=15,t+=15,e+i>n&&(e-=e+i-n),t+s>r&&(t-=20+s),o.prototype.setPosition.call(this,e,t)}}.call(a.prototype),t.GutterHandler=u}),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(e,t,n){function s(e){this.isOpen=!1,this.$element=null,this.$parentNode=e}var i=(e("./lib/oop"),e("./lib/dom"));(function(){this.$init=function(){return this.$element=i.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(e){i.setInnerText(this.getElement(),e)},this.setHtml=function(e){this.getElement().innerHTML=e},this.setPosition=function(e,t){this.getElement().style.left=e+"px",this.getElement().style.top=t+"px"},this.setClassName=function(e){i.addCssClass(this.getElement(),e)},this.show=function(e,t,n){null!=e&&this.setText(e),null!=t&&null!=n&&this.setPosition(t,n),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth}}).call(s.prototype),t.Tooltip=s}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){var r=e("../lib/event"),i=e("../lib/useragent"),s=t.MouseEvent=function(e,t){this.domEvent=e,this.editor=t,this.x=this.clientX=e.clientX,this.y=this.clientY=e.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){r.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){r.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var e=this.editor,t=e.getSelectionRange();if(t.isEmpty())this.$inSelection=!1;else{var n=this.getDocumentPosition();this.$inSelection=t.contains(n.row,n.column)}return this.$inSelection},this.getButton=function(){return r.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=i.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(s.prototype)}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,n){function f(e){function T(e,n){var r=Date.now(),i=!n||e.row!=n.row,s=!n||e.column!=n.column;if(!S||i||s)t.$blockScrolling+=1,t.moveCursorToPosition(e),t.$blockScrolling-=1,S=r,x={x:p,y:d};else{var o=l(x.x,x.y,p,d);o>a?S=null:r-S>=u&&(t.renderer.scrollCursorIntoView(),S=null)}}function N(e,n){var r=Date.now(),i=t.renderer.layerConfig.lineHeight,s=t.renderer.layerConfig.characterWidth,u=t.renderer.scroller.getBoundingClientRect(),a={x:{left:p-u.left,right:u.right-p},y:{top:d-u.top,bottom:u.bottom-d}},f=Math.min(a.x.left,a.x.right),l=Math.min(a.y.top,a.y.bottom),c={row:e.row,column:e.column};2>=f/s&&(c.column+=a.x.left<a.x.right?-3:2),1>=l/i&&(c.row+=a.y.top<a.y.bottom?-1:1);var h=e.row!=c.row,v=e.column!=c.column,m=!n||e.row!=n.row;h||v&&!m?E?r-E>=o&&t.renderer.scrollCursorIntoView(c):E=r:E=null}function C(){var e=g;g=t.renderer.screenToTextCoordinates(p,d),T(g,e),N(g,e)}function k(){m=t.selection.toOrientedRange(),h=t.session.addMarker(m,"ace_selection",t.getSelectionStyle()),t.clearSelection(),t.isFocused()&&t.renderer.$cursorLayer.setBlinking(!1),clearInterval(v),v=setInterval(C,20),y=0,i.addListener(document,"mousemove",O)}function L(){clearInterval(v),t.session.removeMarker(h),h=null,t.$blockScrolling+=1,t.selection.fromOrientedRange(m),t.$blockScrolling-=1,t.isFocused()&&!w&&t.renderer.$cursorLayer.setBlinking(!t.getReadOnly()),m=null,y=0,E=null,S=null,i.removeListener(document,"mousemove",O)}function O(){null==A&&(A=setTimeout(function(){null!=A&&h&&L()},20))}function M(e){var t=e.types;return!t||Array.prototype.some.call(t,function(e){return"text/plain"==e||"Text"==e})}function _(e){var t=["copy","copymove","all","uninitialized"],n=["move","copymove","linkmove","all","uninitialized"],r=s.isMac?e.altKey:e.ctrlKey,i="uninitialized";try{i=e.dataTransfer.effectAllowed.toLowerCase()}catch(e){}var o="none";return r&&t.indexOf(i)>=0?o="copy":n.indexOf(i)>=0?o="move":t.indexOf(i)>=0&&(o="copy"),o}var t=e.editor,n=r.createElement("img");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",s.isOpera&&(n.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;");var f=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];f.forEach(function(t){e[t]=this[t]},this),t.addEventListener("mousedown",this.onMouseDown.bind(e));var h,p,d,v,m,g,b,w,E,S,x,c=t.container,y=0;this.onDragStart=function(e){if(this.cancelDrag||!c.draggable){var r=this;return setTimeout(function(){r.startSelect(),r.captureMouse(e)},0),e.preventDefault()}m=t.getSelectionRange();var i=e.dataTransfer;i.effectAllowed=t.getReadOnly()?"copy":"copyMove",s.isOpera&&(t.container.appendChild(n),n._top=n.offsetTop),i.setDragImage&&i.setDragImage(n,0,0),s.isOpera&&t.container.removeChild(n),i.clearData(),i.setData("Text",t.session.getTextRange()),w=!0,this.setState("drag")},this.onDragEnd=function(e){if(c.draggable=!1,w=!1,this.setState(null),!t.getReadOnly()){var n=e.dataTransfer.dropEffect;!b&&"move"==n&&t.session.remove(t.getSelectionRange()),t.renderer.$cursorLayer.setBlinking(!0)}this.editor.unsetStyle("ace_dragging")},this.onDragEnter=function(e){return!t.getReadOnly()&&M(e.dataTransfer)?(h||k(),y++,e.dataTransfer.dropEffect=b=_(e),i.preventDefault(e)):void 0},this.onDragOver=function(e){return!t.getReadOnly()&&M(e.dataTransfer)?(h||(k(),y++),null!==A&&(A=null),p=e.clientX,d=e.clientY,e.dataTransfer.dropEffect=b=_(e),i.preventDefault(e)):void 0},this.onDragLeave=function(e){return y--,0>=y&&h?(L(),b=null,i.preventDefault(e)):void 0},this.onDrop=function(e){if(h){var n=e.dataTransfer;if(w)switch(b){case"move":m=m.contains(g.row,g.column)?{start:g,end:g}:t.moveText(m,g);break;case"copy":m=t.moveText(m,g,!0)}else{var r=n.getData("Text");m={start:g,end:t.session.insert(g,r)},t.focus(),b=null}return L(),i.preventDefault(e)}},i.addListener(c,"dragstart",this.onDragStart.bind(e)),i.addListener(c,"dragend",this.onDragEnd.bind(e)),i.addListener(c,"dragenter",this.onDragEnter.bind(e)),i.addListener(c,"dragover",this.onDragOver.bind(e)),i.addListener(c,"dragleave",this.onDragLeave.bind(e)),i.addListener(c,"drop",this.onDrop.bind(e));var A=null}function l(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}var r=e("../lib/dom"),i=e("../lib/event"),s=e("../lib/useragent"),o=200,u=200,a=5;(function(){this.dragWait=function(){var e=Date.now()-this.mousedownEvent.time;e>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var e=this.editor.container;e.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(e){this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly()),this.editor.unsetStyle("ace_dragging"),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var e=this.editor.container;e.draggable=!0,this.editor.renderer.$cursorLayer.setBlinking(!1),this.editor.setStyle("ace_dragging"),this.setState("dragReady")},this.onMouseDrag=function(e){var t=this.editor.container;if(s.isIE&&"dragReady"==this.state){var n=l(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);n>3&&t.dragDrop()}if("dragWait"===this.state){var n=l(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);n>0&&(t.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(e){if(this.$dragEnabled){this.mousedownEvent=e;var t=this.editor,n=e.inSelection(),r=e.getButton(),i=e.domEvent.detail||1;if(1===i&&0===r&&n){if(e.editor.inMultiSelectMode&&(e.getAccelKey()||e.getShiftKey()))return;this.mousedownEvent.time=Date.now();var o=e.domEvent.target||e.domEvent.srcElement;if("unselectable"in o&&(o.unselectable="on"),t.getDragDelay()){if(s.isWebKit){this.cancelDrag=!0;var u=t.container;u.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(e,this.onMouseDrag.bind(this)),e.defaultPrevented=!0}}}}).call(f.prototype),t.DragdropHandler=f}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/event_emitter"],function(e,t,n){"no use strict";function f(r){if(a.packaged=r||e.packaged||n.packaged||u.define&&define.packaged,!u.document)return"";for(var i={},s="",o=document.getElementsByTagName("script"),f=0;f<o.length;f++){var c=o[f],h=c.src||c.getAttribute("src");if(h){for(var p=c.attributes,d=0,v=p.length;v>d;d++){var m=p[d];0===m.name.indexOf("data-ace-")&&(i[l(m.name.replace(/^data-ace-/,""))]=m.value)}var g=h.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);g&&(s=g[1])}}s&&(i.base=i.base||s,i.packaged=!0),i.basePath=i.base,i.workerPath=i.workerPath||i.base,i.modePath=i.modePath||i.base,i.themePath=i.themePath||i.base,delete i.base;for(var y in i)"undefined"!=typeof i[y]&&t.set(y,i[y])}function l(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}var r=e("./lib/lang"),i=e("./lib/oop"),s=e("./lib/net"),o=e("./lib/event_emitter").EventEmitter,u=function(){return this}(),a={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{}};t.get=function(e){if(!a.hasOwnProperty(e))throw new Error("Unknown config key: "+e);return a[e]},t.set=function(e,t){if(!a.hasOwnProperty(e))throw new Error("Unknown config key: "+e);a[e]=t},t.all=function(){return r.copyObject(a)},i.implement(t,o),t.moduleUrl=function(e,t){if(a.$moduleUrls[e])return a.$moduleUrls[e];var n=e.split("/");t=t||n[n.length-2]||"";var r="snippets"==t?"/":"-",i=n[n.length-1];if("-"==r){var s=new RegExp("^"+t+"[\\-_]|[\\-_]"+t+"$","g");i=i.replace(s,"")}(!i||i==t)&&n.length>1&&(i=n[n.length-2]);var o=a[t+"Path"];return null==o?o=a.basePath:"/"==r&&(t=r=""),o&&"/"!=o.slice(-1)&&(o+="/"),o+t+r+i+this.get("suffix")},t.setModuleUrl=function(e,t){return a.$moduleUrls[e]=t},t.$loading={},t.loadModule=function(n,r){var i,o;Array.isArray(n)&&(o=n[0],n=n[1]);try{i=e(n)}catch(u){}if(i&&!t.$loading[n])return r&&r(i);if(t.$loading[n]||(t.$loading[n]=[]),t.$loading[n].push(r),!(t.$loading[n].length>1)){var a=function(){e([n],function(e){t._emit("load.module",{name:n,module:e});var r=t.$loading[n];t.$loading[n]=null,r.forEach(function(t){t&&t(e)})})};return t.get("packaged")?void s.loadScript(t.moduleUrl(n,o),a):a()}},t.init=f;var c={setOptions:function(e){Object.keys(e).forEach(function(t){this.setOption(t,e[t])},this)},getOptions:function(e){var t={};return e?Array.isArray(e)||(t=e,e=Object.keys(t)):e=Object.keys(this.$options),e.forEach(function(e){t[e]=this.getOption(e)},this),t},setOption:function(e,t){if(this["$"+e]!==t){var n=this.$options[e];return n?n.forwardTo?this[n.forwardTo]&&this[n.forwardTo].setOption(e,t):(n.handlesSet||(this["$"+e]=t),void(n&&n.set&&n.set.call(this,t))):void("undefined"!=typeof console&&console.warn&&console.warn('misspelled option "'+e+'"'))}},getOption:function(e){var t=this.$options[e];return t?t.forwardTo?this[t.forwardTo]&&this[t.forwardTo].getOption(e):t&&t.get?t.get.call(this):this["$"+e]:void("undefined"!=typeof console&&console.warn&&console.warn('misspelled option "'+e+'"'))}},h={};t.defineOptions=function(e,t,n){return e.$options||(h[t]=e.$options={}),Object.keys(n).forEach(function(t){var r=n[t];"string"==typeof r&&(r={forwardTo:r}),r.name||(r.name=t),e.$options[r.name]=r,"initialValue"in r&&(e["$"+r.name]=r.initialValue)}),i.implement(e,c),this},t.resetOptions=function(e){Object.keys(e.$options).forEach(function(t){var n=e.$options[t];"value"in n&&e.setOption(t,n.value)})},t.setDefaultValue=function(e,n,r){var i=h[e]||(h[e]={});i[n]&&(i.forwardTo?t.setDefaultValue(i.forwardTo,n,r):i[n].value=r)},t.setDefaultValues=function(e,n){Object.keys(n).forEach(function(r){t.setDefaultValue(e,r,n[r])})}}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,n){var r=e("./dom");t.get=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){4===n.readyState&&t(n.responseText)},n.send(null)},t.loadScript=function(e,t){var n=r.getDocumentHead(),i=document.createElement("script");i.src=e,n.appendChild(i),i.onload=i.onreadystatechange=function(e,n){(n||!i.readyState||"loaded"==i.readyState||"complete"==i.readyState)&&(i=i.onload=i.onreadystatechange=null,n||t())}},t.qualifyURL=function(e){var t=document.createElement("a");return t.href=e,t.href}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(e,t,n){var r={},i=function(){this.propagationStopped=!0},s=function(){this.defaultPrevented=!0};r._emit=r._dispatchEvent=function(e,t){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[e]||[],r=this._defaultHandlers[e];if(n.length||r){"object"==typeof t&&t||(t={}),t.type||(t.type=e),t.stopPropagation||(t.stopPropagation=i),t.preventDefault||(t.preventDefault=s),n=n.slice();for(var o=0;o<n.length&&(n[o](t,this),!t.propagationStopped);o++);return r&&!t.defaultPrevented?r(t,this):void 0}},r._signal=function(e,t){var n=(this._eventRegistry||{})[e];if(n){n=n.slice();for(var r=0;r<n.length;r++)n[r](t,this)}},r.once=function(e,t){var n=this;t&&this.addEventListener(e,function r(){n.removeEventListener(e,r),t.apply(null,arguments)})},r.setDefaultHandler=function(e,t){var n=this._defaultHandlers;if(n||(n=this._defaultHandlers={_disabled_:{}}),n[e]){var r=n[e],i=n._disabled_[e];i||(n._disabled_[e]=i=[]),i.push(r);var s=i.indexOf(t);-1!=s&&i.splice(s,1)}n[e]=t},r.removeDefaultHandler=function(e,t){var n=this._defaultHandlers;if(n){var r=n._disabled_[e];if(n[e]==t){n[e];r&&this.setDefaultHandler(e,r.pop())}else if(r){var s=r.indexOf(t);-1!=s&&r.splice(s,1)}}},r.on=r.addEventListener=function(e,t,n){this._eventRegistry=this._eventRegistry||{};var r=this._eventRegistry[e];return r||(r=this._eventRegistry[e]=[]),-1==r.indexOf(t)&&r[n?"unshift":"push"](t),t},r.off=r.removeListener=r.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];if(n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}},r.removeAllListeners=function(e){this._eventRegistry&&(this._eventRegistry[e]=[])},t.EventEmitter=r}),ace.define("ace/mouse/fold_handler",["require","exports","module"],function(e,t,n){function r(e){e.on("click",function(t){var n=t.getDocumentPosition(),r=e.session,i=r.getFoldAt(n.row,n.column,1);i&&(t.getAccelKey()?r.removeFold(i):r.expandFold(i),t.stop())}),e.on("gutterclick",function(t){var n=e.renderer.$gutterLayer.getRegion(t);if("foldWidgets"==n){var r=t.getDocumentPosition().row,i=e.session;i.foldWidgets&&i.foldWidgets[r]&&e.session.onFoldWidgetClick(r,t),e.isFocused()||e.focus(),t.stop()}}),e.on("gutterdblclick",function(t){var n=e.renderer.$gutterLayer.getRegion(t);if("foldWidgets"==n){var r=t.getDocumentPosition().row,i=e.session,s=i.getParentFoldRangeData(r,!0),o=s.range||s.firstRange;if(o){r=o.start.row;var u=i.getFoldAt(r,i.getLine(r).length,1);u?i.removeFold(u):(i.addFold("...",o),e.renderer.scrollCursorIntoView({row:o.start.row,column:0}))}t.stop()}})}t.FoldHandler=r}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,n){var r=e("../lib/keys"),i=e("../lib/event"),s=function(e){this.$editor=e,this.$data={},this.$handlers=[],this.setDefaultHandler(e.commands)};(function(){this.setDefaultHandler=function(e){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=e,this.addKeyboardHandler(e,0),this.$data={editor:this.$editor}},this.setKeyboardHandler=function(e){var t=this.$handlers;if(t[t.length-1]!=e){for(;t[t.length-1]&&t[t.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(t[t.length-1]);this.addKeyboardHandler(e,1)}},this.addKeyboardHandler=function(e,t){if(e){"function"==typeof e&&!e.handleKeyboard&&(e.handleKeyboard=e);var n=this.$handlers.indexOf(e);-1!=n&&this.$handlers.splice(n,1),void 0==t?this.$handlers.push(e):this.$handlers.splice(t,0,e),-1==n&&e.attach&&e.attach(this.$editor)}},this.removeKeyboardHandler=function(e){var t=this.$handlers.indexOf(e);return-1==t?!1:(this.$handlers.splice(t,1),e.detach&&e.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.$callKeyboardHandlers=function(e,t,n,r){for(var s,o=!1,u=this.$editor.commands,a=this.$handlers.length;a--&&(s=this.$handlers[a].handleKeyboard(this.$data,e,t,n,r),!(s&&s.command&&(o="null"==s.command?!0:u.exec(s.command,this.$editor,s.args,r),o&&r&&-1!=e&&1!=s.passEvent&&1!=s.command.passEvent&&i.stopEvent(r),o))););return o},this.onCommandKey=function(e,t,n){var i=r.keyCodeToString(n);this.$callKeyboardHandlers(t,i,n,e)},this.onTextInput=function(e){var t=this.$callKeyboardHandlers(-1,e);t||this.$editor.commands.exec("insertstring",this.$editor,e)}}).call(s.prototype),t.KeyBinding=s}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,n){var r=e("./lib/oop"),i=e("./lib/lang"),s=e("./config"),o=e("./lib/event_emitter").EventEmitter,u=e("./selection").Selection,a=e("./mode/text").Mode,f=e("./range").Range,l=e("./document").Document,c=e("./background_tokenizer").BackgroundTokenizer,h=e("./search_highlight").SearchHighlight,p=function(e,t){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==typeof e&&e.getLine||(e=new l(e)),this.setDocument(e),this.selection=new u(this),s.resetOptions(this),this.setMode(t),s._signal("session",this)};(function(){function g(e){return 4352>e?!1:e>=4352&&4447>=e||e>=4515&&4519>=e||e>=4602&&4607>=e||e>=9001&&9002>=e||e>=11904&&11929>=e||e>=11931&&12019>=e||e>=12032&&12245>=e||e>=12272&&12283>=e||e>=12288&&12350>=e||e>=12353&&12438>=e||e>=12441&&12543>=e||e>=12549&&12589>=e||e>=12593&&12686>=e||e>=12688&&12730>=e||e>=12736&&12771>=e||e>=12784&&12830>=e||e>=12832&&12871>=e||e>=12880&&13054>=e||e>=13056&&19903>=e||e>=19968&&42124>=e||e>=42128&&42182>=e||e>=43360&&43388>=e||e>=44032&&55203>=e||e>=55216&&55238>=e||e>=55243&&55291>=e||e>=63744&&64255>=e||e>=65040&&65049>=e||e>=65072&&65106>=e||e>=65108&&65126>=e||e>=65128&&65131>=e||e>=65281&&65376>=e||e>=65504&&65510>=e}r.implement(this,o),this.setDocument=function(e){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=e,e.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(e){if(!e)return this.$docRowCache=[],void(this.$screenRowCache=[]);var t=this.$docRowCache.length,n=this.$getRowCacheIndex(this.$docRowCache,e)+1;t>n&&(this.$docRowCache.splice(n,t),this.$screenRowCache.splice(n,t))},this.$getRowCacheIndex=function(e,t){for(var n=0,r=e.length-1;r>=n;){var i=n+r>>1,s=e[i];if(t>s)n=i+1;else{if(!(s>t))return i;r=i-1}}return n-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(e){var t=e.data;this.$resetRowCache(t.start.row)},this.onChange=function(e){var t=e.data;this.$modified=!0,this.$resetRowCache(t.range.start.row);var n=this.$updateInternalDataOnChange(e);!this.$fromUndo&&this.$undoManager&&!t.ignore&&(this.$deltasDoc.push(t),n&&0!=n.length&&this.$deltasFold.push({action:"removeFolds",folds:n}),this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(t),this._signal("change",e)},this.setValue=function(e){this.doc.setValue(e),this.selection.moveTo(0,0),this.$resetRowCache(0),this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(e){return this.bgTokenizer.getState(e);
},this.getTokens=function(e){return this.bgTokenizer.getTokens(e)},this.getTokenAt=function(e,t){var r,n=this.bgTokenizer.getTokens(e),i=0;if(null==t)s=n.length-1,i=this.getLine(e).length;else for(var s=0;s<n.length&&(i+=n[s].value.length,!(i>=t));s++);return r=n[s],r?(r.index=s,r.start=i-r.value.length,r):null},this.setUndoManager=function(e){if(this.$undoManager=e,this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.$informUndoManager&&this.$informUndoManager.cancel(),e){var t=this;this.$syncInformUndoManager=function(){t.$informUndoManager.cancel(),t.$deltasFold.length&&(t.$deltas.push({group:"fold",deltas:t.$deltasFold}),t.$deltasFold=[]),t.$deltasDoc.length&&(t.$deltas.push({group:"doc",deltas:t.$deltasDoc}),t.$deltasDoc=[]),t.$deltas.length>0&&e.execute({action:"aceupdate",args:[t.$deltas,t],merge:t.mergeUndoDeltas}),t.mergeUndoDeltas=!1,t.$deltas=[]},this.$informUndoManager=i.delayedCall(this.$syncInformUndoManager)}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?i.stringRepeat(" ",this.getTabSize()):"	"},this.setUseSoftTabs=function(e){this.setOption("useSoftTabs",e)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(e){this.setOption("tabSize",e)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(e){return this.$useSoftTabs&&e.column%this.$tabSize===0},this.$overwrite=!1,this.setOverwrite=function(e){this.setOption("overwrite",e)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(e,t){this.$decorations[e]||(this.$decorations[e]=""),this.$decorations[e]+=" "+t,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(e,t){this.$decorations[e]=(this.$decorations[e]||"").replace(" "+t,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(e){this.$breakpoints=[];for(var t=0;t<e.length;t++)this.$breakpoints[e[t]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(e,t){void 0===t&&(t="ace_breakpoint"),t?this.$breakpoints[e]=t:delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(e){delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.addMarker=function(e,t,n,r){var i=this.$markerId++,s={range:e,type:n||"line",renderer:"function"==typeof n?n:null,clazz:t,inFront:!!r,id:i};return r?(this.$frontMarkers[i]=s,this._signal("changeFrontMarker")):(this.$backMarkers[i]=s,this._signal("changeBackMarker")),i},this.addDynamicMarker=function(e,t){if(e.update){var n=this.$markerId++;return e.id=n,e.inFront=!!t,t?(this.$frontMarkers[n]=e,this._signal("changeFrontMarker")):(this.$backMarkers[n]=e,this._signal("changeBackMarker")),e}},this.removeMarker=function(e){var t=this.$frontMarkers[e]||this.$backMarkers[e];if(t){var n=t.inFront?this.$frontMarkers:this.$backMarkers;t&&(delete n[e],this._signal(t.inFront?"changeFrontMarker":"changeBackMarker"))}},this.getMarkers=function(e){return e?this.$frontMarkers:this.$backMarkers},this.highlight=function(e){if(!this.$searchHighlight){var t=new h(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(t)}this.$searchHighlight.setRegexp(e)},this.highlightLines=function(e,t,n,r){"number"!=typeof t&&(n=t,t=e),n||(n="ace_step");var i=new f(e,0,t,1/0);return i.id=this.addMarker(i,n,"fullLine",r),i},this.setAnnotations=function(e){this.$annotations=e,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r?\n)/m);t?this.$autoNewLine=t[1]:this.$autoNewLine="\n"},this.getWordRange=function(e,t){var n=this.getLine(e),r=!1;if(t>0&&(r=!!n.charAt(t-1).match(this.tokenRe)),r||(r=!!n.charAt(t).match(this.tokenRe)),r)var i=this.tokenRe;else if(/^\s+$/.test(n.slice(t-1,t+1)))var i=/\s/;else var i=this.nonTokenRe;var s=t;if(s>0){do s--;while(s>=0&&n.charAt(s).match(i));s++}for(var o=t;o<n.length&&n.charAt(o).match(i);)o++;return new f(e,s,e,o)},this.getAWordRange=function(e,t){for(var n=this.getWordRange(e,t),r=this.getLine(n.end.row);r.charAt(n.end.column).match(/[ \t]/);)n.end.column+=1;return n},this.setNewLineMode=function(e){this.doc.setNewLineMode(e)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(e){this.setOption("useWorker",e)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(e){var t=e.data;this.bgTokenizer.start(t.first),this._signal("tokenizerUpdate",e)},this.$modes={},this.$mode=null,this.$modeId=null,this.setMode=function(e,t){if(e&&"object"==typeof e){if(e.getTokenizer)return this.$onChangeMode(e);var n=e,r=n.path}else r=e||"ace/mode/text";return this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new a),this.$modes[r]&&!n?(this.$onChangeMode(this.$modes[r]),void(t&&t())):(this.$modeId=r,s.loadModule(["mode",r],function(e){return this.$modeId!==r?t&&t():this.$modes[r]&&!n?this.$onChangeMode(this.$modes[r]):void(e&&e.Mode&&(e=new e.Mode(n),n||(this.$modes[r]=e,e.$id=r),this.$onChangeMode(e),t&&t()))}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0),void 0)},this.$onChangeMode=function(e,t){if(t||(this.$modeId=e.$id),this.$mode!==e){this.$mode=e,this.$stopWorker(),this.$useWorker&&this.$startWorker();var n=e.getTokenizer();if(void 0!==n.addEventListener){var r=this.onReloadTokenizer.bind(this);n.addEventListener("update",r)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(n);else{this.bgTokenizer=new c(n);var i=this;this.bgTokenizer.addEventListener("update",function(e){i._signal("tokenizerUpdate",e)})}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=e.tokenRe,this.nonTokenRe=e.nonTokenRe,t||(this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(e.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode"))}},this.$stopWorker=function(){this.$worker&&this.$worker.terminate(),this.$worker=null},this.$startWorker=function(){if("undefined"==typeof Worker||e.noWorker)this.$worker=null;else try{this.$worker=this.$mode.createWorker(this)}catch(t){console.log("Could not load worker"),console.log(t),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(e){this.$scrollTop===e||isNaN(e)||(this.$scrollTop=e,this._signal("changeScrollTop",e))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(e){this.$scrollLeft===e||isNaN(e)||(this.$scrollLeft=e,this._signal("changeScrollLeft",e))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var e=0;return this.lineWidgets.forEach(function(t){t&&t.screenWidth>e&&(e=t.screenWidth)}),this.lineWidgetWidth=e},this.$computeWidth=function(e){if(this.$modified||e){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var t=this.doc.getAllLines(),n=this.$rowLengthCache,r=0,i=0,s=this.$foldData[i],o=s?s.start.row:1/0,u=t.length,a=0;u>a;a++){if(a>o){if(a=s.end.row+1,a>=u)break;s=this.$foldData[i++],o=s?s.start.row:1/0}null==n[a]&&(n[a]=this.$getStringScreenWidth(t[a])[0]),n[a]>r&&(r=n[a])}this.screenWidth=r}},this.getLine=function(e){return this.doc.getLine(e)},this.getLines=function(e,t){return this.doc.getLines(e,t)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(e){return this.doc.getTextRange(e||this.selection.getRange())},this.insert=function(e,t){return this.doc.insert(e,t)},this.remove=function(e){return this.doc.remove(e)},this.undoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var n=null,r=e.length-1;-1!=r;r--){var i=e[r];"doc"==i.group?(this.doc.revertDeltas(i.deltas),n=this.$getUndoSelection(i.deltas,!0,n)):i.deltas.forEach(function(e){this.addFolds(e.folds)},this)}return this.$fromUndo=!1,n&&this.$undoSelect&&!t&&this.selection.setSelectionRange(n),n}},this.redoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var n=null,r=0;r<e.length;r++){var i=e[r];"doc"==i.group&&(this.doc.applyDeltas(i.deltas),n=this.$getUndoSelection(i.deltas,!1,n))}return this.$fromUndo=!1,n&&this.$undoSelect&&!t&&this.selection.setSelectionRange(n),n}},this.setUndoSelect=function(e){this.$undoSelect=e},this.$getUndoSelection=function(e,t,n){function r(e){var n="insertText"===e.action||"insertLines"===e.action;return t?!n:n}var s,o,i=e[0],u=!1;r(i)?(s=f.fromPoints(i.range.start,i.range.end),u=!0):(s=f.fromPoints(i.range.start,i.range.start),u=!1);for(var a=1;a<e.length;a++)i=e[a],r(i)?(o=i.range.start,-1==s.compare(o.row,o.column)&&s.setStart(i.range.start),o=i.range.end,1==s.compare(o.row,o.column)&&s.setEnd(i.range.end),u=!0):(o=i.range.start,-1==s.compare(o.row,o.column)&&(s=f.fromPoints(i.range.start,i.range.start)),u=!1);if(null!=n){0===f.comparePoints(n.start,s.start)&&(n.start.column+=s.end.column-s.start.column,n.end.column+=s.end.column-s.start.column);var l=n.compareRange(s);1==l?s.setStart(n.start):-1==l&&s.setEnd(n.end)}return s},this.replace=function(e,t){return this.doc.replace(e,t)},this.moveText=function(e,t,n){var r=this.getTextRange(e),i=this.getFoldsInRange(e),s=f.fromPoints(t,t);if(!n){this.remove(e);var o=e.start.row-e.end.row,u=o?-e.end.column:e.start.column-e.end.column;u&&(s.start.row==e.end.row&&s.start.column>e.end.column&&(s.start.column+=u),s.end.row==e.end.row&&s.end.column>e.end.column&&(s.end.column+=u)),o&&s.start.row>=e.end.row&&(s.start.row+=o,s.end.row+=o)}if(s.end=this.insert(s.start,r),i.length){var a=e.start,l=s.start,o=l.row-a.row,u=l.column-a.column;this.addFolds(i.map(function(e){return e=e.clone(),e.start.row==a.row&&(e.start.column+=u),e.end.row==a.row&&(e.end.column+=u),e.start.row+=o,e.end.row+=o,e}))}return s},this.indentRows=function(e,t,n){n=n.replace(/\t/g,this.getTabString());for(var r=e;t>=r;r++)this.insert({row:r,column:0},n)},this.outdentRows=function(e){for(var t=e.collapseRows(),n=new f(0,0,0,0),r=this.getTabSize(),i=t.start.row;i<=t.end.row;++i){var s=this.getLine(i);n.start.row=i,n.end.row=i;for(var o=0;r>o&&" "==s.charAt(o);++o);r>o&&"	"==s.charAt(o)?(n.start.column=o,n.end.column=o+1):(n.start.column=0,n.end.column=o),this.remove(n)}},this.$moveLines=function(e,t,n){if(e=this.getRowFoldStart(e),t=this.getRowFoldEnd(t),0>n){var r=this.getRowFoldStart(e+n);if(0>r)return 0;var i=r-e}else if(n>0){var r=this.getRowFoldEnd(t+n);if(r>this.doc.getLength()-1)return 0;var i=r-t}else{e=this.$clipRowToDocument(e),t=this.$clipRowToDocument(t);var i=t-e+1}var s=new f(e,0,t,Number.MAX_VALUE),o=this.getFoldsInRange(s).map(function(e){return e=e.clone(),e.start.row+=i,e.end.row+=i,e}),u=0==n?this.doc.getLines(e,t):this.doc.removeLines(e,t);return this.doc.insertLines(e+i,u),o.length&&this.addFolds(o),i},this.moveLinesUp=function(e,t){return this.$moveLines(e,t,-1)},this.moveLinesDown=function(e,t){return this.$moveLines(e,t,1)},this.duplicateLines=function(e,t){return this.$moveLines(e,t,0)},this.$clipRowToDocument=function(e){return Math.max(0,Math.min(e,this.doc.getLength()-1))},this.$clipColumnToRow=function(e,t){return 0>t?0:Math.min(this.doc.getLine(e).length,t)},this.$clipPositionToDocument=function(e,t){if(t=Math.max(0,t),0>e)e=0,t=0;else{var n=this.doc.getLength();e>=n?(e=n-1,t=this.doc.getLine(n-1).length):t=Math.min(this.doc.getLine(e).length,t)}return{row:e,column:t}},this.$clipRangeToDocument=function(e){e.start.row<0?(e.start.row=0,e.start.column=0):e.start.column=this.$clipColumnToRow(e.start.row,e.start.column);var t=this.doc.getLength()-1;return e.end.row>t?(e.end.row=t,e.end.column=this.doc.getLine(t).length):e.end.column=this.$clipColumnToRow(e.end.row,e.end.column),e},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(e){if(e!=this.$useWrapMode){if(this.$useWrapMode=e,this.$modified=!0,this.$resetRowCache(0),e){var t=this.getLength();this.$wrapData=Array(t),this.$updateWrapData(0,t-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(e,t){(this.$wrapLimitRange.min!==e||this.$wrapLimitRange.max!==t)&&(this.$wrapLimitRange={min:e,max:t},this.$modified=!0,this._signal("changeWrapMode"))},this.adjustWrapLimit=function(e,t){var n=this.$wrapLimitRange;n.max<0&&(n={min:t,max:t});var r=this.$constrainWrapLimit(e,n.min,n.max);return r!=this.$wrapLimit&&r>1?(this.$wrapLimit=r,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},this.$constrainWrapLimit=function(e,t,n){return t&&(e=Math.max(t,e)),n&&(e=Math.min(n,e)),e},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(e){this.setWrapLimitRange(e,e)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(e){var n,t=this.$useWrapMode,r=e.data.action,i=e.data.range.start.row,s=e.data.range.end.row,o=e.data.range.start,u=e.data.range.end,a=null;if(-1!=r.indexOf("Lines")?(s="insertLines"==r?i+e.data.lines.length:i,n=e.data.lines?e.data.lines.length:s-i):n=s-i,this.$updating=!0,0!=n)if(-1!=r.indexOf("remove")){this[t?"$wrapData":"$rowLengthCache"].splice(i,n);var f=this.$foldData;a=this.getFoldsInRange(e.data.range),this.removeFolds(a);var l=this.getFoldLine(u.row),c=0;if(l){l.addRemoveChars(u.row,u.column,o.column-u.column),l.shiftRow(-n);var h=this.getFoldLine(i);h&&h!==l&&(h.merge(l),l=h),c=f.indexOf(l)+1}for(c;c<f.length;c++){var l=f[c];l.start.row>=u.row&&l.shiftRow(-n)}s=i}else{var p=Array(n);p.unshift(i,0);var d=t?this.$wrapData:this.$rowLengthCache;d.splice.apply(d,p);var f=this.$foldData,l=this.getFoldLine(i),c=0;if(l){var v=l.range.compareInside(o.row,o.column);0==v?(l=l.split(o.row,o.column),l.shiftRow(n),l.addRemoveChars(s,0,u.column-o.column)):-1==v&&(l.addRemoveChars(i,0,u.column-o.column),l.shiftRow(n)),c=f.indexOf(l)+1}for(c;c<f.length;c++){var l=f[c];l.start.row>=i&&l.shiftRow(n)}}else{n=Math.abs(e.data.range.start.column-e.data.range.end.column),-1!=r.indexOf("remove")&&(a=this.getFoldsInRange(e.data.range),this.removeFolds(a),n=-n);var l=this.getFoldLine(i);l&&l.addRemoveChars(i,o.column,n)}return t&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,t?this.$updateWrapData(i,s):this.$updateRowLengthCache(i,s),a},this.$updateRowLengthCache=function(e,t,n){this.$rowLengthCache[e]=null,this.$rowLengthCache[t]=null},this.$updateWrapData=function(e,t){var o,a,n=this.doc.getAllLines(),r=this.getTabSize(),i=this.$wrapData,s=this.$wrapLimit,f=e;for(t=Math.min(t,n.length-1);t>=f;)a=this.getFoldLine(f,a),a?(o=[],a.walk(function(e,t,r,i){var s;if(null!=e){s=this.$getDisplayTokens(e,o.length),s[0]=u;for(var a=1;a<s.length;a++)s[a]=l}else s=this.$getDisplayTokens(n[t].substring(i,r),o.length);o=o.concat(s)}.bind(this),a.end.row,n[a.end.row].length+1),i[a.start.row]=this.$computeWrapSplits(o,s,r),f=a.end.row+1):(o=this.$getDisplayTokens(n[f]),i[f]=this.$computeWrapSplits(o,s,r),f++)};var t=1,n=2,u=3,l=4,p=9,d=10,v=11,m=12;this.$computeWrapSplits=function(e,t){function a(t){var r=e.slice(i,t),o=r.length;r.join("").replace(/12/g,function(){o-=1}).replace(/2/g,function(){o-=1}),s+=o,n.push(s),i=t}if(0==e.length)return[];for(var n=[],r=e.length,i=0,s=0,o=this.$wrapAsCode;r-i>t;){var f=i+t;if(e[f-1]>=d&&e[f]>=d)a(f);else if(e[f]!=u&&e[f]!=l){for(var c=Math.max(f-(o?10:t-(t>>2)),i-1);f>c&&e[f]<u;)f--;if(o){for(;f>c&&e[f]<u;)f--;for(;f>c&&e[f]==p;)f--}else for(;f>c&&e[f]<d;)f--;f>c?a(++f):(f=i+t,a(f))}else{for(f;f!=i-1&&e[f]!=u;f--);if(f>i){a(f);continue}for(f=i+t;f<e.length&&e[f]==l;f++);if(f==e.length)break;a(f)}}return n},this.$getDisplayTokens=function(e,r){var s,i=[];r=r||0;for(var o=0;o<e.length;o++){var u=e.charCodeAt(o);if(9==u){s=this.getScreenTabSize(i.length+r),i.push(v);for(var a=1;s>a;a++)i.push(m)}else 32==u?i.push(d):u>39&&48>u||u>57&&64>u?i.push(p):u>=4352&&g(u)?i.push(t,n):i.push(t)}return i},this.$getStringScreenWidth=function(e,t,n){if(0==t)return[0,0];null==t&&(t=1/0),n=n||0;var r,i;for(i=0;i<e.length&&(r=e.charCodeAt(i),n+=9==r?this.getScreenTabSize(n):r>=4352&&g(r)?2:1,!(n>t));i++);return[n,i]},this.lineWidgets=null,this.getRowLength=function(e){if(this.lineWidgets)var t=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0;else t=0;return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1+t:1+t},this.getRowLineCount=function(e){return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1:1},this.getScreenLastRowColumn=function(e){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE);return this.documentToScreenColumn(t.row,t.column)},this.getDocumentLastRowColumn=function(e,t){var n=this.documentToScreenRow(e,t);return this.getScreenLastRowColumn(n)},this.getDocumentLastRowColumnPosition=function(e,t){var n=this.documentToScreenRow(e,t);return this.screenToDocumentPosition(n,Number.MAX_VALUE/10)},this.getRowSplitData=function(e){return this.$useWrapMode?this.$wrapData[e]:void 0},this.getScreenTabSize=function(e){return this.$tabSize-e%this.$tabSize},this.screenToDocumentRow=function(e,t){return this.screenToDocumentPosition(e,t).row},this.screenToDocumentColumn=function(e,t){return this.screenToDocumentPosition(e,t).column},this.screenToDocumentPosition=function(e,t){if(0>e)return{row:0,column:0};var n,s,r=0,i=0,o=0,u=0,a=this.$screenRowCache,f=this.$getRowCacheIndex(a,e),l=a.length;if(l&&f>=0)var o=a[f],r=this.$docRowCache[f],c=e>a[l-1];else var c=!l;for(var h=this.getLength()-1,p=this.getNextFoldLine(r),d=p?p.start.row:1/0;e>=o&&(u=this.getRowLength(r),!(o+u>e||r>=h));)o+=u,r++,r>d&&(r=p.end.row+1,p=this.getNextFoldLine(r,p),d=p?p.start.row:1/0),c&&(this.$docRowCache.push(r),this.$screenRowCache.push(o));if(p&&p.start.row<=r)n=this.getFoldDisplayLine(p),r=p.start.row;else{if(e>=o+u||r>h)return{row:h,column:this.getLine(h).length};n=this.getLine(r),p=null}if(this.$useWrapMode){var v=this.$wrapData[r];if(v){var m=Math.floor(e-o);s=v[m],m>0&&v.length&&(i=v[m-1]||v[v.length-1],n=n.substring(i))}}return i+=this.$getStringScreenWidth(n,t)[1],this.$useWrapMode&&i>=s&&(i=s-1),p?p.idxToPosition(i):{row:r,column:i}},this.documentToScreenPosition=function(e,t){if("undefined"==typeof t)var n=this.$clipPositionToDocument(e.row,e.column);else n=this.$clipPositionToDocument(e,t);e=n.row,t=n.column;var r=0,i=null,s=null;s=this.getFoldAt(e,t,1),s&&(e=s.start.row,t=s.start.column);var o,u=0,a=this.$docRowCache,f=this.$getRowCacheIndex(a,e),l=a.length;if(l&&f>=0)var u=a[f],r=this.$screenRowCache[f],c=e>a[l-1];else var c=!l;for(var h=this.getNextFoldLine(u),p=h?h.start.row:1/0;e>u;){if(u>=p){if(o=h.end.row+1,o>e)break;h=this.getNextFoldLine(o,h),p=h?h.start.row:1/0}else o=u+1;r+=this.getRowLength(u),u=o,c&&(this.$docRowCache.push(u),this.$screenRowCache.push(r))}var d="";if(h&&u>=p?(d=this.getFoldDisplayLine(h,e,t),i=h.start.row):(d=this.getLine(e).substring(0,t),i=e),this.$useWrapMode){var v=this.$wrapData[i];if(v){for(var m=0;d.length>=v[m];)r++,m++;d=d.substring(v[m-1]||0,d.length)}}return{row:r,column:this.$getStringScreenWidth(d)[0]}},this.documentToScreenColumn=function(e,t){return this.documentToScreenPosition(e,t).column},this.documentToScreenRow=function(e,t){return this.documentToScreenPosition(e,t).row},this.getScreenLength=function(){var e=0,t=null;if(this.$useWrapMode)for(var i=this.$wrapData.length,s=0,r=0,t=this.$foldData[r++],o=t?t.start.row:1/0;i>s;){var u=this.$wrapData[s];e+=u?u.length+1:1,s++,s>o&&(s=t.end.row+1,t=this.$foldData[r++],o=t?t.start.row:1/0)}else{e=this.getLength();for(var n=this.$foldData,r=0;r<n.length;r++)t=n[r],e-=t.end.row-t.start.row}return this.lineWidgets&&(e+=this.$getWidgetScreenLength()),e},this.$setFontMetrics=function(e){}}).call(p.prototype),e("./edit_session/folding").Folding.call(p.prototype),e("./edit_session/bracket_match").BracketMatch.call(p.prototype),s.defineOptions(p.prototype,"session",{wrap:{set:function(e){if(e&&"off"!=e?"free"==e?e=!0:"printMargin"==e?e=-1:"string"==typeof e&&(e=parseInt(e,10)||!1):e=!1,this.$wrap!=e){if(e){var t="number"==typeof e?e:null;this.setWrapLimitRange(t,t),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1);this.$wrap=e}},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(e){e="auto"==e?"text"!=this.$mode.type:"text"!=e,e!=this.$wrapAsCode&&(this.$wrapAsCode=e,this.$useWrapMode&&(this.$modified=!0,this.$resetRowCache(0),this.$updateWrapData(0,this.getLength()-1)))},initialValue:"auto"},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(e){this.$useWorker=e,this.$stopWorker(),e&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(e){isNaN(e)||this.$tabSize===e||(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=e,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},overwrite:{set:function(e){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(e){this.doc.setNewLineMode(e)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(e){this.setMode(e)},get:function(){return this.$modeId}}}),t.EditSession=p}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,n){var r=e("./lib/oop"),i=e("./lib/lang"),s=e("./lib/event_emitter").EventEmitter,o=e("./range").Range,u=function(e){this.session=e,this.doc=e.getDocument(),this.clearSelection(),this.lead=this.selectionLead=this.doc.createAnchor(0,0),this.anchor=this.selectionAnchor=this.doc.createAnchor(0,0);var t=this;this.lead.on("change",function(e){t._emit("changeCursor"),t.$isEmpty||t._emit("changeSelection"),!t.$keepDesiredColumnOnChange&&e.old.column!=e.value.column&&(t.$desiredColumn=null)}),this.selectionAnchor.on("change",function(){t.$isEmpty||t._emit("changeSelection")})};(function(){r.implement(this,s),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return this.isEmpty()?!1:this.getRange().isMultiLine()},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(e,t){this.anchor.setPosition(e,t),this.$isEmpty&&(this.$isEmpty=!1,this._emit("changeSelection"))},this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.shiftSelection=function(e){if(this.$isEmpty)return void this.moveCursorTo(this.lead.row,this.lead.column+e);var t=this.getSelectionAnchor(),n=this.getSelectionLead(),r=this.isBackwards();(!r||0!==t.column)&&this.setSelectionAnchor(t.row,t.column+e),(r||0!==n.column)&&this.$moveSelection(function(){this.moveCursorTo(n.row,n.column+e)})},this.isBackwards=function(){var e=this.anchor,t=this.lead;return e.row>t.row||e.row==t.row&&e.column>t.column},this.getRange=function(){var e=this.anchor,t=this.lead;return this.isEmpty()?o.fromPoints(t,t):this.isBackwards()?o.fromPoints(t,e):o.fromPoints(e,t)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){var e=this.doc.getLength()-1;this.setSelectionAnchor(0,0),this.moveCursorTo(e,this.doc.getLine(e).length)},this.setRange=this.setSelectionRange=function(e,t){t?(this.setSelectionAnchor(e.end.row,e.end.column),this.selectTo(e.start.row,e.start.column)):(this.setSelectionAnchor(e.start.row,e.start.column),this.selectTo(e.end.row,e.end.column)),this.getRange().isEmpty()&&(this.$isEmpty=!0),this.$desiredColumn=null},this.$moveSelection=function(e){var t=this.lead;this.$isEmpty&&this.setSelectionAnchor(t.row,t.column),e.call(this)},this.selectTo=function(e,t){this.$moveSelection(function(){this.moveCursorTo(e,t)})},this.selectToPosition=function(e){this.$moveSelection(function(){this.moveCursorToPosition(e)})},this.moveTo=function(e,t){this.clearSelection(),this.moveCursorTo(e,t)},this.moveToPosition=function(e){this.clearSelection(),this.moveCursorToPosition(e)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(e,t){if("undefined"==typeof t){var n=e||this.lead;e=n.row,t=n.column}return this.session.getWordRange(e,t)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var e=this.getCursor(),t=this.session.getAWordRange(e.row,e.column);this.setSelectionRange(t)},this.getLineRange=function(e,t){var r,n="number"==typeof e?e:this.lead.row,i=this.session.getFoldLine(n);return i?(n=i.start.row,r=i.end.row):r=n,t===!0?new o(n,0,r,this.session.getLine(r).length):new o(n,0,r+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.moveCursorLeft=function(){var t,e=this.lead.getPosition();if(t=this.session.getFoldAt(e.row,e.column,-1))this.moveCursorTo(t.start.row,t.start.column);else if(0==e.column)e.row>0&&this.moveCursorTo(e.row-1,this.doc.getLine(e.row-1).length);else{var n=this.session.getTabSize();this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(e.column-n,e.column).split(" ").length-1==n?this.moveCursorBy(0,-n):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var t,e=this.lead.getPosition();if(t=this.session.getFoldAt(e.row,e.column,1))this.moveCursorTo(t.end.row,t.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var n=this.session.getTabSize(),e=this.lead;this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(e.column,e.column+n).split(" ").length-1==n?this.moveCursorBy(0,n):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var e=this.lead.row,t=this.lead.column,n=this.session.documentToScreenRow(e,t),r=this.session.screenToDocumentPosition(n,0),i=this.session.getDisplayLine(e,null,r.row,r.column),s=i.match(/^\s*/);s[0].length!=t&&!this.session.$useEmacsStyleLineStart&&(r.column+=s[0].length),this.moveCursorToPosition(r)},this.moveCursorLineEnd=function(){var e=this.lead,t=this.session.getDocumentLastRowColumnPosition(e.row,e.column);if(this.lead.column==t.column){var n=this.session.getLine(t.row);if(t.column==n.length){var r=n.search(/\s+$/);r>0&&(t.column=r)}}this.moveCursorTo(t.row,t.column)},this.moveCursorFileEnd=function(){var e=this.doc.getLength()-1,t=this.doc.getLine(e).length;this.moveCursorTo(e,t)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var i,e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),r=n.substring(t);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var s=this.session.getFoldAt(e,t,1);return s?void this.moveCursorTo(s.end.row,s.end.column):((i=this.session.nonTokenRe.exec(r))&&(t+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,r=n.substring(t)),t>=n.length?(this.moveCursorTo(e,n.length),this.moveCursorRight(),e<this.doc.getLength()-1&&this.moveCursorWordRight(),void 0):((i=this.session.tokenRe.exec(r))&&(t+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),void this.moveCursorTo(e,t)))},this.moveCursorLongWordLeft=function(){var n,e=this.lead.row,t=this.lead.column;if(n=this.session.getFoldAt(e,t,-1))return void this.moveCursorTo(n.start.row,n.start.column);var r=this.session.getFoldStringAt(e,t,-1);null==r&&(r=this.doc.getLine(e).substring(0,t));var o,s=i.stringReverse(r);return this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,(o=this.session.nonTokenRe.exec(s))&&(t-=this.session.nonTokenRe.lastIndex,s=s.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),0>=t?(this.moveCursorTo(e,0),this.moveCursorLeft(),e>0&&this.moveCursorWordLeft(),void 0):((o=this.session.tokenRe.exec(s))&&(t-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),void this.moveCursorTo(e,t))},this.$shortWordEndIndex=function(e){var t,r,n=0,i=/\s/,s=this.session.tokenRe;if(s.lastIndex=0,t=this.session.tokenRe.exec(e))n=this.session.tokenRe.lastIndex;else{for(;(r=e[n])&&i.test(r);)n++;if(1>n)for(s.lastIndex=0;(r=e[n])&&!s.test(r);)if(s.lastIndex=0,n++,i.test(r)){if(n>2){n--;break}for(;(r=e[n])&&i.test(r);)n++;if(n>2)break}}return s.lastIndex=0,n},this.moveCursorShortWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),r=n.substring(t),i=this.session.getFoldAt(e,t,1);if(i)return this.moveCursorTo(i.end.row,i.end.column);if(t==n.length){var s=this.doc.getLength();do e++,r=this.doc.getLine(e);while(s>e&&/^\s*$/.test(r));/^\s+/.test(r)||(r=""),t=0}var o=this.$shortWordEndIndex(r);this.moveCursorTo(e,t+o)},this.moveCursorShortWordLeft=function(){var n,e=this.lead.row,t=this.lead.column;if(n=this.session.getFoldAt(e,t,-1))return this.moveCursorTo(n.start.row,n.start.column);var r=this.session.getLine(e).substring(0,t);if(0==t){do e--,r=this.doc.getLine(e);while(e>0&&/^\s*$/.test(r));t=r.length,/\s+$/.test(r)||(r="")}var s=i.stringReverse(r),o=this.$shortWordEndIndex(s);return this.moveCursorTo(e,t-o)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(e,t){var n=this.session.documentToScreenPosition(this.lead.row,this.lead.column);0===t&&(this.$desiredColumn?n.column=this.$desiredColumn:this.$desiredColumn=n.column);var r=this.session.screenToDocumentPosition(n.row+e,n.column);0!==e&&0===t&&r.row===this.lead.row&&r.column===this.lead.column&&this.session.lineWidgets&&this.session.lineWidgets[r.row]&&r.row++,this.moveCursorTo(r.row,r.column+t,0===t)},this.moveCursorToPosition=function(e){this.moveCursorTo(e.row,e.column)},this.moveCursorTo=function(e,t,n){var r=this.session.getFoldAt(e,t,1);r&&(e=r.start.row,t=r.start.column),this.$keepDesiredColumnOnChange=!0,this.lead.setPosition(e,t),this.$keepDesiredColumnOnChange=!1,n||(this.$desiredColumn=null)},this.moveCursorToScreen=function(e,t,n){var r=this.session.screenToDocumentPosition(e,t);this.moveCursorTo(r.row,r.column,n)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(e){this.setSelectionRange(e,e.cursor==e.start),this.$desiredColumn=e.desiredColumn||this.$desiredColumn;
},this.toOrientedRange=function(e){var t=this.getRange();return e?(e.start.column=t.start.column,e.start.row=t.start.row,e.end.column=t.end.column,e.end.row=t.end.row):e=t,e.cursor=this.isBackwards()?e.start:e.end,e.desiredColumn=this.$desiredColumn,e},this.getRangeOfMovements=function(e){var t=this.getCursor();try{e.call(null,this);var n=this.getCursor();return o.fromPoints(t,n)}catch(r){return o.fromPoints(t,t)}finally{this.moveCursorToPosition(t)}},this.toJSON=function(){if(this.rangeCount)var e=this.ranges.map(function(e){var t=e.clone();return t.isBackwards=e.cursor==e.start,t});else{var e=this.getRange();e.isBackwards=this.isBackwards()}return e},this.fromJSON=function(e){if(void 0==e.start){if(this.rangeList){this.toSingleRange(e[0]);for(var t=e.length;t--;){var n=o.fromPoints(e[t].start,e[t].end);e.isBackwards&&(n.cursor=n.start),this.addRange(n,!0)}return}e=e[0]}this.rangeList&&this.toSingleRange(e),this.setSelectionRange(e,e.isBackwards)},this.isEqual=function(e){if((e.length||this.rangeCount)&&e.length!=this.rangeCount)return!1;if(!e.length||!this.ranges)return this.getRange().isEqual(e);for(var t=this.ranges.length;t--;)if(!this.ranges[t].isEqual(e[t]))return!1;return!0}}).call(u.prototype),t.Selection=u}),ace.define("ace/range",["require","exports","module"],function(e,t,n){var r=function(e,t){return e.row-t.row||e.column-t.column},i=function(e,t,n,r){this.start={row:e,column:t},this.end={row:n,column:r}};(function(){this.isEqual=function(e){return this.start.row===e.start.row&&this.end.row===e.end.row&&this.start.column===e.start.column&&this.end.column===e.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(e,t){return 0==this.compare(e,t)},this.compareRange=function(e){var t,n=e.end,r=e.start;return t=this.compare(n.row,n.column),1==t?(t=this.compare(r.row,r.column),1==t?2:0==t?1:0):-1==t?-2:(t=this.compare(r.row,r.column),-1==t?-1:1==t?42:0)},this.comparePoint=function(e){return this.compare(e.row,e.column)},this.containsRange=function(e){return 0==this.comparePoint(e.start)&&0==this.comparePoint(e.end)},this.intersects=function(e){var t=this.compareRange(e);return-1==t||0==t||1==t},this.isEnd=function(e,t){return this.end.row==e&&this.end.column==t},this.isStart=function(e,t){return this.start.row==e&&this.start.column==t},this.setStart=function(e,t){"object"==typeof e?(this.start.column=e.column,this.start.row=e.row):(this.start.row=e,this.start.column=t)},this.setEnd=function(e,t){"object"==typeof e?(this.end.column=e.column,this.end.row=e.row):(this.end.row=e,this.end.column=t)},this.inside=function(e,t){return 0==this.compare(e,t)?this.isEnd(e,t)||this.isStart(e,t)?!1:!0:!1},this.insideStart=function(e,t){return 0==this.compare(e,t)?this.isEnd(e,t)?!1:!0:!1},this.insideEnd=function(e,t){return 0==this.compare(e,t)?this.isStart(e,t)?!1:!0:!1},this.compare=function(e,t){return this.isMultiLine()||e!==this.start.row?e<this.start.row?-1:e>this.end.row?1:this.start.row===e?t>=this.start.column?0:-1:this.end.row===e?t<=this.end.column?0:1:0:t<this.start.column?-1:t>this.end.column?1:0},this.compareStart=function(e,t){return this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.compareEnd=function(e,t){return this.end.row==e&&this.end.column==t?1:this.compare(e,t)},this.compareInside=function(e,t){return this.end.row==e&&this.end.column==t?1:this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.clipRows=function(e,t){if(this.end.row>t)var n={row:t+1,column:0};else if(this.end.row<e)var n={row:e,column:0};if(this.start.row>t)var r={row:t+1,column:0};else if(this.start.row<e)var r={row:e,column:0};return i.fromPoints(r||this.start,n||this.end)},this.extend=function(e,t){var n=this.compare(e,t);if(0==n)return this;if(-1==n)var r={row:e,column:t};else var s={row:e,column:t};return i.fromPoints(r||this.start,s||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return i.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new i(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new i(this.start.row,0,this.end.row,0)},this.toScreenRange=function(e){var t=e.documentToScreenPosition(this.start),n=e.documentToScreenPosition(this.end);return new i(t.row,t.column,n.row,n.column)},this.moveBy=function(e,t){this.start.row+=e,this.start.column+=t,this.end.row+=e,this.end.column+=t}}).call(i.prototype),i.fromPoints=function(e,t){return new i(e.row,e.column,t.row,t.column)},i.comparePoints=r,i.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},t.Range=i}),ace.define("ace/mode/text",["require","exports","module","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,n){var r=e("../tokenizer").Tokenizer,i=e("./text_highlight_rules").TextHighlightRules,s=e("./behaviour").Behaviour,o=e("../unicode"),u=e("../lib/lang"),a=e("../token_iterator").TokenIterator,f=e("../range").Range,l=function(){this.HighlightRules=i,this.$behaviour=new s};(function(){this.tokenRe=new RegExp("^["+o.packages.L+o.packages.Mn+o.packages.Mc+o.packages.Nd+o.packages.Pc+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+o.packages.L+o.packages.Mn+o.packages.Mc+o.packages.Nd+o.packages.Pc+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=new this.HighlightRules,this.$tokenizer=new r(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(e,t,n,r){function w(e){for(var t=n;r>=t;t++)e(i.getLine(t),t)}var i=t.doc,s=!0,o=!0,a=1/0,f=t.getTabSize(),l=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var p=this.lineCommentStart.map(u.escapeRegExp).join("|"),c=this.lineCommentStart[0];else var p=u.escapeRegExp(this.lineCommentStart),c=this.lineCommentStart;p=new RegExp("^(\\s*)(?:"+p+") ?"),l=t.getUseSoftTabs();var m=function(e,t){var n=e.match(p);if(n){var r=n[1].length,s=n[0].length;!b(e,r,s)&&" "==n[0][s-1]&&s--,i.removeInLine(t,r,s)}},y=c+" ",v=function(e,t){(!s||/\S/.test(e))&&(b(e,a,a)?i.insertInLine({row:t,column:a},y):i.insertInLine({row:t,column:a},c))},g=function(e,t){return p.test(e)},b=function(e,t,n){for(var r=0;t--&&" "==e.charAt(t);)r++;if(r%f!=0)return!1;for(var r=0;" "==e.charAt(n++);)r++;return f>2?r%f!=f-1:r%f==0}}else{if(!this.blockComment)return!1;var c=this.blockComment.start,h=this.blockComment.end,p=new RegExp("^(\\s*)(?:"+u.escapeRegExp(c)+")"),d=new RegExp("(?:"+u.escapeRegExp(h)+")\\s*$"),v=function(e,t){g(e,t)||(!s||/\S/.test(e))&&(i.insertInLine({row:t,column:e.length},h),i.insertInLine({row:t,column:a},c))},m=function(e,t){var n;(n=e.match(d))&&i.removeInLine(t,e.length-n[0].length,e.length),(n=e.match(p))&&i.removeInLine(t,n[1].length,n[0].length)},g=function(e,n){if(p.test(e))return!0;for(var r=t.getTokens(n),i=0;i<r.length;i++)if("comment"===r[i].type)return!0}}var E=1/0;w(function(e,t){var n=e.search(/\S/);-1!==n?(a>n&&(a=n),o&&!g(e,t)&&(o=!1)):E>e.length&&(E=e.length)}),a==1/0&&(a=E,s=!1,o=!1),l&&a%f!=0&&(a=Math.floor(a/f)*f),w(o?m:v)},this.toggleBlockComment=function(e,t,n,r){var i=this.blockComment;if(i){!i.start&&i[0]&&(i=i[0]);var c,h,s=new a(t,r.row,r.column),o=s.getCurrentToken(),l=(t.selection,t.selection.toOrientedRange());if(o&&/comment/.test(o.type)){for(var p,d;o&&/comment/.test(o.type);){var v=o.value.indexOf(i.start);if(-1!=v){var m=s.getCurrentTokenRow(),g=s.getCurrentTokenColumn()+v;p=new f(m,g,m,g+i.start.length);break}o=s.stepBackward()}for(var s=new a(t,r.row,r.column),o=s.getCurrentToken();o&&/comment/.test(o.type);){var v=o.value.indexOf(i.end);if(-1!=v){var m=s.getCurrentTokenRow(),g=s.getCurrentTokenColumn()+v;d=new f(m,g,m,g+i.end.length);break}o=s.stepForward()}d&&t.remove(d),p&&(t.remove(p),c=p.start.row,h=-i.start.length)}else h=i.start.length,c=n.start.row,t.insert(n.end,i.end),t.insert(n.start,i.start);l.start.row==c&&(l.start.column+=h),l.end.row==c&&(l.end.column+=h),t.selection.fromOrientedRange(l)}},this.getNextLineIndent=function(e,t,n){return this.$getIndent(t)},this.checkOutdent=function(e,t,n){return!1},this.autoOutdent=function(e,t,n){},this.$getIndent=function(e){return e.match(/^\s*/)[0]},this.createWorker=function(e){return null},this.createModeDelegates=function(e){this.$embeds=[],this.$modes={};for(var t in e)e[t]&&(this.$embeds.push(t),this.$modes[t]=new e[t]);for(var n=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],t=0;t<n.length;t++)(function(e){var r=n[t],i=e[r];e[n[t]]=function(){return this.$delegator(r,arguments,i)}})(this)},this.$delegator=function(e,t,n){var r=t[0];"string"!=typeof r&&(r=r[0]);for(var i=0;i<this.$embeds.length;i++)if(this.$modes[this.$embeds[i]]){var s=r.split(this.$embeds[i]);if(!s[0]&&s[1]){t[0]=s[1];var o=this.$modes[this.$embeds[i]];return o[e].apply(o,t)}}var u=n.apply(this,t);return n?u:void 0},this.transformAction=function(e,t,n,r,i){if(this.$behaviour){var s=this.$behaviour.getBehaviours();for(var o in s)if(s[o][t]){var u=s[o][t].apply(this,arguments);if(u)return u}}},this.getKeywords=function(e){if(!this.completionKeywords){var t=this.$tokenizer.rules,n=[];for(var r in t)for(var i=t[r],s=0,o=i.length;o>s;s++)if("string"==typeof i[s].token)/keyword|support|storage/.test(i[s].token)&&n.push(i[s].regex);else if("object"==typeof i[s].token)for(var u=0,a=i[s].token.length;a>u;u++)if(/keyword|support|storage/.test(i[s].token[u])){var r=i[s].regex.match(/\(.+?\)/g)[u];n.push(r.substr(1,r.length-2))}this.completionKeywords=n}return e?n.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(e,t,n,r){var i=this.$keywordList||this.$createKeywordList();return i.map(function(e){return{name:e,value:e,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(l.prototype),t.Mode=l}),ace.define("ace/tokenizer",["require","exports","module"],function(e,t,n){var r=1e3,i=function(e){this.states=e,this.regExps={},this.matchMappings={};for(var t in this.states){for(var n=this.states[t],r=[],i=0,s=this.matchMappings[t]={defaultToken:"text"},o="g",u=[],a=0;a<n.length;a++){var f=n[a];if(f.defaultToken&&(s.defaultToken=f.defaultToken),f.caseInsensitive&&(o="gi"),null!=f.regex){f.regex instanceof RegExp&&(f.regex=f.regex.toString().slice(1,-1));var l=f.regex,c=new RegExp("(?:("+l+")|(.))").exec("a").length-2;if(Array.isArray(f.token))if(1==f.token.length||1==c)f.token=f.token[0];else{if(c-1!=f.token.length)throw new Error("number of classes and regexp groups in '"+f.token+"'\n'"+f.regex+"' doesn't match\n"+(c-1)+"!="+f.token.length);f.tokenArray=f.token,f.token=null,f.onMatch=this.$arrayTokens}else"function"==typeof f.token&&!f.onMatch&&(c>1?f.onMatch=this.$applyToken:f.onMatch=f.token);c>1&&(/\\\d/.test(f.regex)?l=f.regex.replace(/\\([0-9]+)/g,function(e,t){return"\\"+(parseInt(t,10)+i+1)}):(c=1,l=this.removeCapturingGroups(f.regex)),!f.splitRegex&&"string"!=typeof f.token&&u.push(f)),s[i]=a,i+=c,r.push(l),f.onMatch||(f.onMatch=null)}}u.forEach(function(e){e.splitRegex=this.createSplitterRegexp(e.regex,o)},this),this.regExps[t]=new RegExp("("+r.join(")|(")+")|($)",o)}};(function(){this.$setMaxTokenCount=function(e){r=0|e},this.$applyToken=function(e){var t=this.splitRegex.exec(e).slice(1),n=this.token.apply(this,t);if("string"==typeof n)return[{type:n,value:e}];for(var r=[],i=0,s=n.length;s>i;i++)t[i]&&(r[r.length]={type:n[i],value:t[i]});return r},this.$arrayTokens=function(e){if(!e)return[];var t=this.splitRegex.exec(e);if(!t)return"text";for(var n=[],r=this.tokenArray,i=0,s=r.length;s>i;i++)t[i+1]&&(n[n.length]={type:r[i],value:t[i+1]});return n},this.removeCapturingGroups=function(e){var t=e.replace(/\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g,function(e,t){return t?"(?:":e});return t},this.createSplitterRegexp=function(e,t){if(-1!=e.indexOf("(?=")){var n=0,r=!1,i={};e.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(e,t,s,o,u,a){return r?r="]"!=u:u?r=!0:o?(n==i.stack&&(i.end=a+1,i.stack=-1),n--):s&&(n++,1!=s.length&&(i.stack=n,i.start=a)),e}),null!=i.end&&/^\)*$/.test(e.substr(i.end))&&(e=e.substring(0,i.start)+e.substr(i.end))}return new RegExp(e,(t||"").replace("g",""))},this.getLineTokens=function(e,t){if(t&&"string"!=typeof t){var n=t.slice(0);t=n[0]}else var n=[];var i=t||"start",s=this.states[i];s||(i="start",s=this.states[i]);var o=this.matchMappings[i],u=this.regExps[i];u.lastIndex=0;for(var a,f=[],l=0,c={type:null,value:""};a=u.exec(e);){var h=o.defaultToken,p=null,d=a[0],v=u.lastIndex;if(v-d.length>l){var m=e.substring(l,v-d.length);c.type==h?c.value+=m:(c.type&&f.push(c),c={type:h,value:m})}for(var g=0;g<a.length-2;g++)if(void 0!==a[g+1]){p=s[o[g]],h=p.onMatch?p.onMatch(d,i,n):p.token,p.next&&(i="string"==typeof p.next?p.next:p.next(i,n),s=this.states[i],s||(window.console&&console.error&&console.error(i,"doesn't exist"),i="start",s=this.states[i]),o=this.matchMappings[i],l=v,u=this.regExps[i],u.lastIndex=v);break}if(d)if("string"==typeof h)p&&p.merge===!1||c.type!==h?(c.type&&f.push(c),c={type:h,value:d}):c.value+=d;else if(h){c.type&&f.push(c),c={type:null,value:""};for(var g=0;g<h.length;g++)f.push(h[g])}if(l==e.length)break;if(l=v,f.length>r){for(;l<e.length;)c.type&&f.push(c),c={value:e.substring(l,l+=2e3),type:"overflow"};i="start",n=[];break}}return c.type&&f.push(c),n.length>1&&n[0]!==i&&n.unshift(i),{tokens:f,state:n.length?n:i}}}).call(i.prototype),t.Tokenizer=i}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(e,t,n){var r=e("../lib/lang"),i=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(e,t){if(t)for(var n in e){for(var r=e[n],i=0;i<r.length;i++){var s=r[i];s.next&&("string"!=typeof s.next?s.nextState&&0!==s.nextState.indexOf(t)&&(s.nextState=t+s.nextState):0!==s.next.indexOf(t)&&(s.next=t+s.next))}this.$rules[t+n]=r}else for(var n in e)this.$rules[n]=e[n]},this.getRules=function(){return this.$rules},this.embedRules=function(e,t,n,i,s){var o="function"==typeof e?(new e).getRules():e;if(i)for(var u=0;u<i.length;u++)i[u]=t+i[u];else{i=[];for(var a in o)i.push(t+a)}if(this.addRules(o,t),n)for(var f=Array.prototype[s?"push":"unshift"],u=0;u<i.length;u++)f.apply(this.$rules[i[u]],r.deepCopy(n));this.$embeds||(this.$embeds=[]),this.$embeds.push(t)},this.getEmbeds=function(){return this.$embeds};var e=function(e,t){return("start"!=e||t.length)&&t.unshift(this.nextState,e),this.nextState},t=function(e,t){return t.shift(),t.shift()||"start"};this.normalizeRules=function(){function i(s){var o=r[s];o.processed=!0;for(var u=0;u<o.length;u++){var a=o[u];!a.regex&&a.start&&(a.regex=a.start,a.next||(a.next=[]),a.next.push({defaultToken:a.token},{token:a.token+".end",regex:a.end||a.start,next:"pop"}),a.token=a.token+".start",a.push=!0);var f=a.next||a.push;if(f&&Array.isArray(f)){var l=a.stateName;l||(l=a.token,"string"!=typeof l&&(l=l[0]||""),r[l]&&(l+=n++)),r[l]=f,a.next=l,i(l)}else"pop"==f&&(a.next=t);if(a.push&&(a.nextState=a.next||a.push,a.next=e,delete a.push),a.rules)for(var c in a.rules)r[c]?r[c].push&&r[c].push.apply(r[c],a.rules[c]):r[c]=a.rules[c];if(a.include||"string"==typeof a)var h=a.include||a,p=r[h];else Array.isArray(a)&&(p=a);if(p){var d=[u,1].concat(p);a.noEscape&&(d=d.filter(function(e){return!e.next})),o.splice.apply(o,d),u--,p=null}a.keywordMap&&(a.token=this.createKeywordMapper(a.keywordMap,a.defaultToken||"text",a.caseInsensitive),delete a.defaultToken)}}var n=0,r=this.$rules;Object.keys(r).forEach(i,this)},this.createKeywordMapper=function(e,t,n,r){var i=Object.create(null);return Object.keys(e).forEach(function(t){var s=e[t];n&&(s=s.toLowerCase());for(var o=s.split(r||"|"),u=o.length;u--;)i[o[u]]=t}),Object.getPrototypeOf(i)&&(i.__proto__=null),this.$keywordList=Object.keys(i),e=null,n?function(e){return i[e.toLowerCase()]||t}:function(e){return i[e]||t}},this.getKeywords=function(){return this.$keywords}}).call(i.prototype),t.TextHighlightRules=i}),ace.define("ace/mode/behaviour",["require","exports","module"],function(e,t,n){var r=function(){this.$behaviours={}};(function(){this.add=function(e,t,n){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[e]:this.$behaviours[e]={}}this.$behaviours[e][t]=n},this.addBehaviours=function(e){for(var t in e)for(var n in e[t])this.add(t,n,e[t][n])},this.remove=function(e){this.$behaviours&&this.$behaviours[e]&&delete this.$behaviours[e]},this.inherit=function(e,t){if("function"==typeof e)var n=(new e).getBehaviours(t);else var n=e.getBehaviours(t);this.addBehaviours(n)},this.getBehaviours=function(e){if(!e)return this.$behaviours;for(var t={},n=0;n<e.length;n++)this.$behaviours[e[n]]&&(t[e[n]]=this.$behaviours[e[n]]);return t}}).call(r.prototype),t.Behaviour=r}),ace.define("ace/unicode",["require","exports","module"],function(e,t,n){function r(e){var n=/\w{4}/g;for(var r in e)t.packages[r]=e[r].replace(n,"\\u$&")}t.packages={},r({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",Ll:"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",Lu:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",Lt:"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",Lm:"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",Lo:"01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",Mn:"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",Mc:"0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",Me:"0488048906DE20DD-20E020E2-20E4A670-A672",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nd:"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nl:"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",No:"00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",
P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",Pd:"002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",Ps:"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",Pe:"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",Pi:"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",Pf:"00BB2019201D203A2E032E052E0A2E0D2E1D2E21",Pc:"005F203F20402054FE33FE34FE4D-FE4FFF3F",Po:"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",S:"0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",Sm:"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",Sc:"002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",Sk:"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",So:"00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",Z:"002000A01680180E2000-200A20282029202F205F3000",Zs:"002000A01680180E2000-200A202F205F3000",Zl:"2028",Zp:"2029",C:"0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",Cc:"0000-001F007F-009F",Cf:"00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",Co:"E000-F8FF",Cs:"D800-DFFF",Cn:"03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"})}),ace.define("ace/token_iterator",["require","exports","module"],function(e,t,n){var r=function(e,t,n){this.$session=e,this.$row=t,this.$rowTokens=e.getTokens(t);var r=e.getTokenAt(t,n);this.$tokenIndex=r?r.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){this.$tokenIndex+=1;for(var e;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,e||(e=this.$session.getLength()),this.$row>=e)return this.$row=e-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var e=this.$rowTokens,t=this.$tokenIndex,n=e[t].start;if(void 0!==n)return n;for(n=0;t>0;)t-=1,n+=e[t].value.length;return n}}).call(r.prototype),t.TokenIterator=r}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,n){var r=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,s=e("./range").Range,o=e("./anchor").Anchor,u=function(e){this.$lines=[],0===e.length?this.$lines=[""]:Array.isArray(e)?this._insertLines(0,e):this.insert({row:0,column:0},e)};(function(){r.implement(this,i),this.setValue=function(e){var t=this.getLength();this.remove(new s(0,0,t,this.getLine(t-1).length)),this.insert({row:0,column:0},e)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(e,t){return new o(this,e,t)},0==="aaa".split(/a/).length?this.$split=function(e){return e.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(e){return e.split(/\r\n|\r|\n/)},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=t?t[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(e){this.$newLineMode!==e&&(this.$newLineMode=e,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(e){return"\r\n"==e||"\r"==e||"\n"==e},this.getLine=function(e){return this.$lines[e]||""},this.getLines=function(e,t){return this.$lines.slice(e,t+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(e){if(e.start.row==e.end.row)return this.getLine(e.start.row).substring(e.start.column,e.end.column);var t=this.getLines(e.start.row,e.end.row);t[0]=(t[0]||"").substring(e.start.column);var n=t.length-1;return e.end.row-e.start.row==n&&(t[n]=t[n].substring(0,e.end.column)),t.join(this.getNewLineCharacter())},this.$clipPosition=function(e){var t=this.getLength();return e.row>=t?(e.row=Math.max(0,t-1),e.column=this.getLine(t-1).length):e.row<0&&(e.row=0),e},this.insert=function(e,t){if(!t||0===t.length)return e;e=this.$clipPosition(e),this.getLength()<=1&&this.$detectNewLine(t);var n=this.$split(t),r=n.splice(0,1)[0],i=0==n.length?null:n.splice(n.length-1,1)[0];return e=this.insertInLine(e,r),null!==i&&(e=this.insertNewLine(e),e=this._insertLines(e.row,n),e=this.insertInLine(e,i||"")),e},this.insertLines=function(e,t){return e>=this.getLength()?this.insert({row:e,column:0},"\n"+t.join("\n")):this._insertLines(Math.max(e,0),t)},this._insertLines=function(e,t){if(0==t.length)return{row:e,column:0};for(;t.length>61440;){var n=this._insertLines(e,t.slice(0,61440));t=t.slice(61440),e=n.row}var r=[e,0];r.push.apply(r,t),this.$lines.splice.apply(this.$lines,r);var i=new s(e,0,e+t.length,0),o={action:"insertLines",range:i,lines:t};return this._signal("change",{data:o}),i.end},this.insertNewLine=function(e){e=this.$clipPosition(e);var t=this.$lines[e.row]||"";this.$lines[e.row]=t.substring(0,e.column),this.$lines.splice(e.row+1,0,t.substring(e.column,t.length));var n={row:e.row+1,column:0},r={action:"insertText",range:s.fromPoints(e,n),text:this.getNewLineCharacter()};return this._signal("change",{data:r}),n},this.insertInLine=function(e,t){if(0==t.length)return e;var n=this.$lines[e.row]||"";this.$lines[e.row]=n.substring(0,e.column)+t+n.substring(e.column);var r={row:e.row,column:e.column+t.length},i={action:"insertText",range:s.fromPoints(e,r),text:t};return this._signal("change",{data:i}),r},this.remove=function(e){if(e instanceof s||(e=s.fromPoints(e.start,e.end)),e.start=this.$clipPosition(e.start),e.end=this.$clipPosition(e.end),e.isEmpty())return e.start;var t=e.start.row,n=e.end.row;if(e.isMultiLine()){var r=0==e.start.column?t:t+1,i=n-1;e.end.column>0&&this.removeInLine(n,0,e.end.column),i>=r&&this._removeLines(r,i),r!=t&&(this.removeInLine(t,e.start.column,this.getLine(t).length),this.removeNewLine(e.start.row))}else this.removeInLine(t,e.start.column,e.end.column);return e.start},this.removeInLine=function(e,t,n){if(t!=n){var r=new s(e,t,e,n),i=this.getLine(e),o=i.substring(t,n),u=i.substring(0,t)+i.substring(n,i.length);this.$lines.splice(e,1,u);var a={action:"removeText",range:r,text:o};return this._signal("change",{data:a}),r.start}},this.removeLines=function(e,t){return 0>e||t>=this.getLength()?this.remove(new s(e,0,t+1,0)):this._removeLines(e,t)},this._removeLines=function(e,t){var n=new s(e,0,t+1,0),r=this.$lines.splice(e,t-e+1),i={action:"removeLines",range:n,nl:this.getNewLineCharacter(),lines:r};return this._signal("change",{data:i}),r},this.removeNewLine=function(e){var t=this.getLine(e),n=this.getLine(e+1),r=new s(e,t.length,e+1,0),i=t+n;this.$lines.splice(e,2,i);var o={action:"removeText",range:r,text:this.getNewLineCharacter()};this._signal("change",{data:o})},this.replace=function(e,t){if(e instanceof s||(e=s.fromPoints(e.start,e.end)),0==t.length&&e.isEmpty())return e.start;if(t==this.getTextRange(e))return e.end;if(this.remove(e),t)var n=this.insert(e.start,t);else n=e.start;return n},this.applyDeltas=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=s.fromPoints(n.range.start,n.range.end);"insertLines"==n.action?this.insertLines(r.start.row,n.lines):"insertText"==n.action?this.insert(r.start,n.text):"removeLines"==n.action?this._removeLines(r.start.row,r.end.row-1):"removeText"==n.action&&this.remove(r)}},this.revertDeltas=function(e){for(var t=e.length-1;t>=0;t--){var n=e[t],r=s.fromPoints(n.range.start,n.range.end);"insertLines"==n.action?this._removeLines(r.start.row,r.end.row-1):"insertText"==n.action?this.remove(r):"removeLines"==n.action?this._insertLines(r.start.row,n.lines):"removeText"==n.action&&this.insert(r.start,n.text)}},this.indexToPosition=function(e,t){for(var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,i=t||0,s=n.length;s>i;i++)if(e-=n[i].length+r,0>e)return{row:i,column:e+n[i].length+r};return{row:s-1,column:n[s-1].length}},this.positionToIndex=function(e,t){for(var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,i=0,s=Math.min(e.row,n.length),o=t||0;s>o;++o)i+=n[o].length+r;return i+e.column}}).call(u.prototype),t.Document=u}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){var r=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,s=t.Anchor=function(e,t,n){this.$onChange=this.onChange.bind(this),this.attach(e),"undefined"==typeof n?this.setPosition(t.row,t.column):this.setPosition(t,n)};(function(){r.implement(this,i),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(e){var t=e.data,n=t.range;if((n.start.row!=n.end.row||n.start.row==this.row)&&!(n.start.row>this.row||n.start.row==this.row&&n.start.column>this.column)){var r=this.row,i=this.column,s=n.start,o=n.end;"insertText"===t.action?s.row===r&&s.column<=i?s.column===i&&this.$insertRight||(s.row===o.row?i+=o.column-s.column:(i-=s.column,r+=o.row-s.row)):s.row!==o.row&&s.row<r&&(r+=o.row-s.row):"insertLines"===t.action?(s.row!==r||0!==i||!this.$insertRight)&&s.row<=r&&(r+=o.row-s.row):"removeText"===t.action?s.row===r&&s.column<i?i=o.column>=i?s.column:Math.max(0,i-(o.column-s.column)):s.row!==o.row&&s.row<r?(o.row===r&&(i=Math.max(0,i-o.column)+s.column),r-=o.row-s.row):o.row===r&&(r-=o.row-s.row,i=Math.max(0,i-o.column)+s.column):"removeLines"==t.action&&s.row<=r&&(o.row<=r?r-=o.row-s.row:(r=s.row,i=0)),this.setPosition(r,i,!0)}},this.setPosition=function(e,t,n){var r;if(r=n?{row:e,column:t}:this.$clipPositionToDocument(e,t),this.row!=r.row||this.column!=r.column){var i={row:this.row,column:this.column};this.row=r.row,this.column=r.column,this._signal("change",{old:i,value:r})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(e){this.document=e||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(e,t){var n={};return e>=this.document.getLength()?(n.row=Math.max(0,this.document.getLength()-1),n.column=this.document.getLine(n.row).length):0>e?(n.row=0,n.column=0):(n.row=e,n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,t))),0>t&&(n.column=0),n}}).call(s.prototype)}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){var r=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,s=function(e,t){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=e;var n=this;this.$worker=function(){if(n.running){for(var e=new Date,t=n.currentLine,r=-1,i=n.doc;n.lines[t];)t++;var s=t,o=i.getLength(),u=0;for(n.running=!1;o>t;){n.$tokenizeRow(t),r=t;do t++;while(n.lines[t]);if(u++,u%5==0&&new Date-e>20)return n.running=setTimeout(n.$worker,20),void(n.currentLine=t)}n.currentLine=t,r>=s&&n.fireUpdateEvent(s,r)}}};(function(){r.implement(this,i),this.setTokenizer=function(e){this.tokenizer=e,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(e){this.doc=e,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(e,t){var n={first:e,last:t};this._signal("update",{data:n})},this.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(e){var t=e.range,n=t.start.row,r=t.end.row-n;if(0===r)this.lines[n]=null;else if("removeText"==e.action||"removeLines"==e.action)this.lines.splice(n,r+1,null),this.states.splice(n,r+1,null);else{var i=Array(r+1);i.unshift(n,1),this.lines.splice.apply(this.lines,i),this.states.splice.apply(this.states,i)}this.currentLine=Math.min(n,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(e){return this.lines[e]||this.$tokenizeRow(e)},this.getState=function(e){return this.currentLine==e&&this.$tokenizeRow(e),this.states[e]||"start"},this.$tokenizeRow=function(e){var t=this.doc.getLine(e),n=this.states[e-1],r=this.tokenizer.getLineTokens(t,n,e);return this.states[e]+""!=r.state+""?(this.states[e]=r.state,this.lines[e+1]=null,this.currentLine>e+1&&(this.currentLine=e+1)):this.currentLine==e&&(this.currentLine=e+1),this.lines[e]=r.tokens}}).call(s.prototype),t.BackgroundTokenizer=s}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){var r=e("./lib/lang"),s=(e("./lib/oop"),e("./range").Range),o=function(e,t,n){this.setRegexp(e),this.clazz=t,this.type=n||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(e){this.regExp+""!=e+""&&(this.regExp=e,this.cache=[])},this.update=function(e,t,n,i){if(this.regExp)for(var o=i.firstRow,u=i.lastRow,a=o;u>=a;a++){var f=this.cache[a];null==f&&(f=r.getMatchOffsets(n.getLine(a),this.regExp),f.length>this.MAX_RANGES&&(f=f.slice(0,this.MAX_RANGES)),f=f.map(function(e){return new s(a,e.offset,a,e.offset+e.length)}),this.cache[a]=f.length?f:"");for(var l=f.length;l--;)t.drawSingleLineMarker(e,f[l].toScreenRange(n),this.clazz,i)}}}).call(o.prototype),t.SearchHighlight=o}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(e,t,n){function u(){this.getFoldAt=function(e,t,n){var r=this.getFoldLine(e);if(!r)return null;for(var i=r.folds,s=0;s<i.length;s++){var o=i[s];if(o.range.contains(e,t)){if(1==n&&o.range.isEnd(e,t))continue;if(-1==n&&o.range.isStart(e,t))continue;return o}}},this.getFoldsInRange=function(e){var t=e.start,n=e.end,r=this.$foldData,i=[];t.column+=1,n.column-=1;for(var s=0;s<r.length;s++){var o=r[s].range.compareRange(e);if(2!=o){if(-2==o)break;for(var u=r[s].folds,a=0;a<u.length;a++){var f=u[a];if(o=f.range.compareRange(e),-2==o)break;if(2!=o){if(42==o)break;i.push(f)}}}}return t.column-=1,n.column+=1,i},this.getFoldsInRangeList=function(e){if(Array.isArray(e)){var t=[];e.forEach(function(e){t=t.concat(this.getFoldsInRange(e))},this)}else var t=this.getFoldsInRange(e);return t},this.getAllFolds=function(){for(var e=[],t=this.$foldData,n=0;n<t.length;n++)for(var r=0;r<t[n].folds.length;r++)e.push(t[n].folds[r]);return e},this.getFoldStringAt=function(e,t,n,r){if(r=r||this.getFoldLine(e),!r)return null;for(var s,o,i={end:{column:0}},u=0;u<r.folds.length;u++){o=r.folds[u];var a=o.range.compareEnd(e,t);if(-1==a){s=this.getLine(o.start.row).substring(i.end.column,o.start.column);break}if(0===a)return null;i=o}return s||(s=this.getLine(o.start.row).substring(i.end.column)),-1==n?s.substring(0,t-i.end.column):1==n?s.substring(t-i.end.column):s},this.getFoldLine=function(e,t){var n=this.$foldData,r=0;for(t&&(r=n.indexOf(t)),-1==r&&(r=0),r;r<n.length;r++){var i=n[r];if(i.start.row<=e&&i.end.row>=e)return i;if(i.end.row>e)return null}return null},this.getNextFoldLine=function(e,t){var n=this.$foldData,r=0;for(t&&(r=n.indexOf(t)),-1==r&&(r=0),r;r<n.length;r++){var i=n[r];if(i.end.row>=e)return i}return null},this.getFoldedRowCount=function(e,t){for(var n=this.$foldData,r=t-e+1,i=0;i<n.length;i++){var s=n[i],o=s.end.row,u=s.start.row;if(o>=t){t>u&&(u>=e?r-=t-u:r=0);break}o>=e&&(r-=u>=e?o-u:o-e+1)}return r},this.$addFoldLine=function(e){return this.$foldData.push(e),this.$foldData.sort(function(e,t){return e.start.row-t.start.row}),e},this.addFold=function(e,t){var o,n=this.$foldData,r=!1;e instanceof s?o=e:(o=new s(t,e),o.collapseChildren=t.collapseChildren),this.$clipRangeToDocument(o.range);var u=o.start.row,a=o.start.column,f=o.end.row,l=o.end.column;if(f>u||u==f&&l-2>=a){var c=this.getFoldAt(u,a,1),h=this.getFoldAt(f,l,-1);if(c&&h==c)return c.addSubFold(o);if(c&&!c.range.isStart(u,a)||h&&!h.range.isEnd(f,l))throw new Error("A fold can't intersect already existing fold"+o.range+c.range);var p=this.getFoldsInRange(o.range);p.length>0&&(this.removeFolds(p),p.forEach(function(e){o.addSubFold(e)}));for(var d=0;d<n.length;d++){var v=n[d];if(f==v.start.row){v.addFold(o),r=!0;break}if(u==v.end.row){if(v.addFold(o),r=!0,!o.sameRow){var m=n[d+1];if(m&&m.start.row==f){v.merge(m);break}}break}if(f<=v.start.row)break}return r||(v=this.$addFoldLine(new i(this.$foldData,o))),this.$useWrapMode?this.$updateWrapData(v.start.row,v.start.row):this.$updateRowLengthCache(v.start.row,v.start.row),this.$modified=!0,this._emit("changeFold",{data:o,action:"add"}),o}throw new Error("The range has to be at least 2 characters width")},this.addFolds=function(e){e.forEach(function(e){this.addFold(e)},this)},this.removeFold=function(e){var t=e.foldLine,n=t.start.row,r=t.end.row,i=this.$foldData,s=t.folds;if(1==s.length)i.splice(i.indexOf(t),1);else if(t.range.isEnd(e.end.row,e.end.column))s.pop(),t.end.row=s[s.length-1].end.row,t.end.column=s[s.length-1].end.column;else if(t.range.isStart(e.start.row,e.start.column))s.shift(),t.start.row=s[0].start.row,t.start.column=s[0].start.column;else if(e.sameRow)s.splice(s.indexOf(e),1);else{var o=t.split(e.start.row,e.start.column);s=o.folds,s.shift(),o.start.row=s[0].start.row,o.start.column=s[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(n,r):this.$updateRowLengthCache(n,r)),this.$modified=!0,this._emit("changeFold",{data:e,action:"remove"})},this.removeFolds=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);t.forEach(function(e){this.removeFold(e)},this),this.$modified=!0},this.expandFold=function(e){this.removeFold(e),e.subFolds.forEach(function(t){e.restoreRange(t),this.addFold(t)},this),e.collapseChildren>0&&this.foldAll(e.start.row+1,e.end.row,e.collapseChildren-1),e.subFolds=[]},this.expandFolds=function(e){e.forEach(function(e){this.expandFold(e)},this)},this.unfold=function(e,t){var n,i;if(null==e?(n=new r(0,0,this.getLength(),0),t=!0):n="number"==typeof e?new r(e,0,e,this.getLine(e).length):"row"in e?r.fromPoints(e,e):e,i=this.getFoldsInRangeList(n),t)this.removeFolds(i);else for(var s=i;s.length;)this.expandFolds(s),s=this.getFoldsInRangeList(n);return i.length?i:void 0},this.isRowFolded=function(e,t){return!!this.getFoldLine(e,t)},this.getRowFoldEnd=function(e,t){var n=this.getFoldLine(e,t);return n?n.end.row:e},this.getRowFoldStart=function(e,t){var n=this.getFoldLine(e,t);return n?n.start.row:e},this.getFoldDisplayLine=function(e,t,n,r,i){null==r&&(r=e.start.row,i=0),null==t&&(t=e.end.row,n=this.getLine(t).length);var s=this.doc,o="";return e.walk(function(e,t,n,u){if(!(r>t)){if(t==r){if(i>n)return;u=Math.max(i,u)}o+=null!=e?e:s.getLine(t).substring(u,n)}},t,n),o},this.getDisplayLine=function(e,t,n,r){var i=this.getFoldLine(e);if(!i){var s;return s=this.doc.getLine(e),s.substring(r||0,t||s.length)}return this.getFoldDisplayLine(i,e,t,n,r)},this.$cloneFoldData=function(){var e=[];return e=this.$foldData.map(function(t){var n=t.folds.map(function(e){return e.clone()});return new i(e,n)})},this.toggleFold=function(e){var r,i,t=this.selection,n=t.getRange();if(n.isEmpty()){var s=n.start;if(r=this.getFoldAt(s.row,s.column))return void this.expandFold(r);(i=this.findMatchingBracket(s))?1==n.comparePoint(i)?n.end=i:(n.start=i,n.start.column++,n.end.column--):(i=this.findMatchingBracket({row:s.row,column:s.column+1}))?(1==n.comparePoint(i)?n.end=i:n.start=i,n.start.column++):n=this.getCommentFoldRange(s.row,s.column)||n}else{var o=this.getFoldsInRange(n);if(e&&o.length)return void this.expandFolds(o);1==o.length&&(r=o[0])}if(r||(r=this.getFoldAt(n.start.row,n.start.column)),r&&r.range.toString()==n.toString())return void this.expandFold(r);var u="...";if(!n.isMultiLine()){if(u=this.getTextRange(n),u.length<4)return;u=u.trim().substring(0,2)+".."}this.addFold(u,n)},this.getCommentFoldRange=function(e,t,n){var i=new o(this,e,t),s=i.getCurrentToken();if(s&&/^comment|string/.test(s.type)){var u=new r,a=new RegExp(s.type.replace(/\..*/,"\\."));if(1!=n){do s=i.stepBackward();while(s&&a.test(s.type));i.stepForward()}if(u.start.row=i.getCurrentTokenRow(),u.start.column=i.getCurrentTokenColumn()+2,i=new o(this,e,t),-1!=n){do s=i.stepForward();while(s&&a.test(s.type));s=i.stepBackward()}else s=i.getCurrentToken();return u.end.row=i.getCurrentTokenRow(),u.end.column=i.getCurrentTokenColumn()+s.value.length-2,u}},this.foldAll=function(e,t,n){void 0==n&&(n=1e5);var r=this.foldWidgets;if(r){t=t||this.getLength(),e=e||0;for(var i=e;t>i;i++)if(null==r[i]&&(r[i]=this.getFoldWidget(i)),"start"==r[i]){var s=this.getFoldWidgetRange(i);if(s&&s.isMultiLine()&&s.end.row<=t&&s.start.row>=e){i=s.end.row;try{var o=this.addFold("...",s);o&&(o.collapseChildren=n)}catch(u){}}}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(e){if(!this.$foldStyles[e])throw new Error("invalid fold style: "+e+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=e){this.$foldStyle=e,"manual"==e&&this.unfold();var t=this.$foldMode;this.$setFolding(null),this.$setFolding(t)}},this.$setFolding=function(e){return this.$foldMode!=e?(this.$foldMode=e,this.removeListener("change",this.$updateFoldWidgets),this._emit("changeAnnotation"),e&&"manual"!=this.$foldStyle?(this.foldWidgets=[],this.getFoldWidget=e.getFoldWidget.bind(e,this,this.$foldStyle),this.getFoldWidgetRange=e.getFoldWidgetRange.bind(e,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),void 0):void(this.foldWidgets=null)):void 0},this.getParentFoldRangeData=function(e,t){var n=this.foldWidgets;if(!n||t&&n[e])return{};for(var i,r=e-1;r>=0;){var s=n[r];if(null==s&&(s=n[r]=this.getFoldWidget(r)),"start"==s){var o=this.getFoldWidgetRange(r);if(i||(i=o),o&&o.end.row>=e)break}r--}return{range:-1!==r&&o,firstRange:i}},this.onFoldWidgetClick=function(e,t){t=t.domEvent;var n={children:t.shiftKey,all:t.ctrlKey||t.metaKey,siblings:t.altKey},r=this.$toggleFoldWidget(e,n);if(!r){var i=t.target||t.srcElement;i&&/ace_fold-widget/.test(i.className)&&(i.className+=" ace_invalid");
}},this.$toggleFoldWidget=function(e,t){if(this.getFoldWidget){var n=this.getFoldWidget(e),r=this.getLine(e),i="end"===n?-1:1,s=this.getFoldAt(e,-1===i?0:r.length,i);if(s)return void(t.children||t.all?this.removeFold(s):this.expandFold(s));var o=this.getFoldWidgetRange(e,!0);if(o&&!o.isMultiLine()&&(s=this.getFoldAt(o.start.row,o.start.column,1),s&&o.isEqual(s.range)))return void this.removeFold(s);if(t.siblings){var u=this.getParentFoldRangeData(e);if(u.range)var a=u.range.start.row+1,f=u.range.end.row;this.foldAll(a,f,t.all?1e4:0)}else t.children?(f=o?o.end.row:this.getLength(),this.foldAll(e+1,o.end.row,t.all?1e4:0)):o&&(t.all&&(o.collapseChildren=1e4),this.addFold("...",o));return o}},this.toggleFoldWidget=function(e){var t=this.selection.getCursor().row;t=this.getRowFoldStart(t);var n=this.$toggleFoldWidget(t,{});if(!n){var r=this.getParentFoldRangeData(t,!0);if(n=r.range||r.firstRange){t=n.start.row;var i=this.getFoldAt(t,this.getLine(t).length,1);i?this.removeFold(i):this.addFold("...",n)}}},this.updateFoldWidgets=function(e){var t=e.data,n=t.range,r=n.start.row,i=n.end.row-r;if(0===i)this.foldWidgets[r]=null;else if("removeText"==t.action||"removeLines"==t.action)this.foldWidgets.splice(r,i+1,null);else{var s=Array(i+1);s.unshift(r,1),this.foldWidgets.splice.apply(this.foldWidgets,s)}}}var r=e("../range").Range,i=e("./fold_line").FoldLine,s=e("./fold").Fold,o=e("../token_iterator").TokenIterator;t.Folding=u}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,n){function i(e,t){this.foldData=e,Array.isArray(t)?this.folds=t:t=this.folds=[t];var n=t[t.length-1];this.range=new r(t[0].start.row,t[0].start.column,n.end.row,n.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(e){e.setFoldLine(this)},this)}var r=e("../range").Range;(function(){this.shiftRow=function(e){this.start.row+=e,this.end.row+=e,this.folds.forEach(function(t){t.start.row+=e,t.end.row+=e})},this.addFold=function(e){if(e.sameRow){if(e.start.row<this.startRow||e.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(e),this.folds.sort(function(e,t){return-e.range.compareEnd(t.start.row,t.start.column)}),this.range.compareEnd(e.start.row,e.start.column)>0?(this.end.row=e.end.row,this.end.column=e.end.column):this.range.compareStart(e.end.row,e.end.column)<0&&(this.start.row=e.start.row,this.start.column=e.start.column)}else if(e.start.row==this.end.row)this.folds.push(e),this.end.row=e.end.row,this.end.column=e.end.column;else{if(e.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(e),this.start.row=e.start.row,this.start.column=e.start.column}e.foldLine=this},this.containsRow=function(e){return e>=this.start.row&&e<=this.end.row},this.walk=function(e,t,n){var s,o,u,r=0,i=this.folds,a=!0;null==t&&(t=this.end.row,n=this.end.column);for(var f=0;f<i.length;f++){if(s=i[f],o=s.range.compareStart(t,n),-1==o)return void e(null,t,n,r,a);if(u=e(null,s.start.row,s.start.column,r,a),u=!u&&e(s.placeholder,s.start.row,s.start.column,r),u||0==o)return;a=!s.sameRow,r=s.end.column}e(null,t,n,r,a)},this.getNextFoldTo=function(e,t){for(var n,r,i=0;i<this.folds.length;i++){if(n=this.folds[i],r=n.range.compareEnd(e,t),-1==r)return{fold:n,kind:"after"};if(0==r)return{fold:n,kind:"inside"}}return null},this.addRemoveChars=function(e,t,n){var i,s,r=this.getNextFoldTo(e,t);if(r)if(i=r.fold,"inside"==r.kind&&i.start.column!=t&&i.start.row!=e)window.console&&window.console.log(e,t,i);else if(i.start.row==e){s=this.folds;var o=s.indexOf(i);for(0==o&&(this.start.column+=n),o;o<s.length;o++){if(i=s[o],i.start.column+=n,!i.sameRow)return;i.end.column+=n}this.end.column+=n}},this.split=function(e,t){var n=this.getNextFoldTo(e,t).fold,r=this.folds,s=this.foldData;if(!n)return null;var o=r.indexOf(n),u=r[o-1];this.end.row=u.end.row,this.end.column=u.end.column,r=r.splice(o,r.length-o);var a=new i(s,r);return s.splice(s.indexOf(this)+1,0,a),a},this.merge=function(e){for(var t=e.folds,n=0;n<t.length;n++)this.addFold(t[n]);var r=this.foldData;r.splice(r.indexOf(e),1)},this.toString=function(){var e=[this.range.toString()+": ["];return this.folds.forEach(function(t){e.push("  "+t.toString())}),e.push("]"),e.join("\n")},this.idxToPosition=function(e){for(var n,t=0,r=0;r<this.folds.length;r++){var n=this.folds[r];if(e-=n.start.column-t,0>e)return{row:n.start.row,column:n.start.column+e};if(e-=n.placeholder.length,0>e)return n.start;t=n.end.column}return{row:this.end.row,column:this.end.column+e}}}).call(i.prototype),t.FoldLine=i}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range","ace/range_list","ace/lib/oop"],function(e,t,n){function u(e,t){e.row-=t.row,0==e.row&&(e.column-=t.column)}function a(e,t){u(e.start,t),u(e.end,t)}function f(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row}function l(e,t){f(e.start,t),f(e.end,t)}var i=(e("../range").Range,e("../range_list").RangeList),s=e("../lib/oop"),o=t.Fold=function(e,t){this.foldLine=null,this.placeholder=t,this.range=e,this.start=e.start,this.end=e.end,this.sameRow=e.start.row==e.end.row,this.subFolds=this.ranges=[]};s.inherits(o,i),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(e){this.foldLine=e,this.subFolds.forEach(function(t){t.setFoldLine(e)})},this.clone=function(){var e=this.range.clone(),t=new o(e,this.placeholder);return this.subFolds.forEach(function(e){t.subFolds.push(e.clone())}),t.collapseChildren=this.collapseChildren,t},this.addSubFold=function(e){if(!this.range.isEqual(e)){if(!this.range.containsRange(e))throw new Error("A fold can't intersect already existing fold"+e.range+this.range);a(e,this.start);for(var t=e.start.row,n=e.start.column,r=0,i=-1;r<this.subFolds.length&&(i=this.subFolds[r].range.compare(t,n),1==i);r++);var s=this.subFolds[r];if(0==i)return s.addSubFold(e);for(var t=e.range.end.row,n=e.range.end.column,o=r,i=-1;o<this.subFolds.length&&(i=this.subFolds[o].range.compare(t,n),1==i);o++);this.subFolds[o];if(0==i)throw new Error("A fold can't intersect already existing fold"+e.range+this.range);this.subFolds.splice(r,o-r,e);return e.setFoldLine(this.foldLine),e}},this.restoreRange=function(e){return l(e,this.start)}}.call(o.prototype)}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(e,t,n){var r=e("./range").Range,i=r.comparePoints,s=function(){this.ranges=[]};(function(){this.comparePoints=i,this.pointIndex=function(e,t,n){for(var r=this.ranges,s=n||0;s<r.length;s++){var o=r[s],u=i(e,o.end);if(!(u>0)){var a=i(e,o.start);return 0===u?t&&0!==a?-s-2:s:a>0||0===a&&!t?s:-s-1}}return-s-1},this.add=function(e){var t=!e.isEmpty(),n=this.pointIndex(e.start,t);0>n&&(n=-n-1);var r=this.pointIndex(e.end,t,n);return 0>r?r=-r-1:r++,this.ranges.splice(n,r-n,e)},this.addList=function(e){for(var t=[],n=e.length;n--;)t.push.call(t,this.add(e[n]));return t},this.substractPoint=function(e){var t=this.pointIndex(e);return t>=0?this.ranges.splice(t,1):void 0},this.merge=function(){var e=[],t=this.ranges;t=t.sort(function(e,t){return i(e.start,t.start)});for(var r,n=t[0],s=1;s<t.length;s++){r=n,n=t[s];var o=i(r.end,n.start);0>o||(0!=o||r.isEmpty()||n.isEmpty())&&(i(r.end,n.end)<0&&(r.end.row=n.end.row,r.end.column=n.end.column),t.splice(s,1),e.push(n),n=r,s--)}return this.ranges=t,e},this.contains=function(e,t){return this.pointIndex({row:e,column:t})>=0},this.containsPoint=function(e){return this.pointIndex(e)>=0},this.rangeAtPoint=function(e){var t=this.pointIndex(e);return t>=0?this.ranges[t]:void 0},this.clipRows=function(e,t){var n=this.ranges;if(n[0].start.row>t||n[n.length-1].start.row<e)return[];var r=this.pointIndex({row:e,column:0});0>r&&(r=-r-1);var i=this.pointIndex({row:t,column:0},r);0>i&&(i=-i-1);for(var s=[],o=r;i>o;o++)s.push(n[o]);return s},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(e){this.session&&this.detach(),this.session=e,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(e){var t=e.data.range;if("i"==e.data.action[0])var n=t.start,r=t.end;else var r=t.start,n=t.end;for(var i=n.row,s=r.row,o=s-i,u=-n.column+r.column,a=this.ranges,f=0,l=a.length;l>f;f++){var c=a[f];if(!(c.end.row<i)){if(c.start.row>i)break;if(c.start.row==i&&c.start.column>=n.column&&(c.start.column!=n.column||!this.$insertRight)&&(c.start.column+=u,c.start.row+=o),c.end.row==i&&c.end.column>=n.column){if(c.end.column==n.column&&this.$insertRight)continue;c.end.column==n.column&&u>0&&l-1>f&&c.end.column>c.start.column&&c.end.column==a[f+1].start.column&&(c.end.column-=u),c.end.column+=u,c.end.row+=o}}}if(0!=o&&l>f)for(;l>f;f++){var c=a[f];c.start.row+=o,c.end.row+=o}}}).call(s.prototype),t.RangeList=s}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,n){function s(){this.findMatchingBracket=function(e,t){if(0==e.column)return null;var n=t||this.getLine(e.row).charAt(e.column-1);if(""==n)return null;var r=n.match(/([\(\[\{])|([\)\]\}])/);return r?r[1]?this.$findClosingBracket(r[1],e):this.$findOpeningBracket(r[2],e):null},this.getBracketRange=function(e){var r,t=this.getLine(e.row),n=!0,s=t.charAt(e.column-1),o=s&&s.match(/([\(\[\{])|([\)\]\}])/);if(o||(s=t.charAt(e.column),e={row:e.row,column:e.column+1},o=s&&s.match(/([\(\[\{])|([\)\]\}])/),n=!1),!o)return null;if(o[1]){var u=this.$findClosingBracket(o[1],e);if(!u)return null;r=i.fromPoints(e,u),n||(r.end.column++,r.start.column--),r.cursor=r.end}else{var u=this.$findOpeningBracket(o[2],e);if(!u)return null;r=i.fromPoints(u,e),n||(r.start.column++,r.end.column--),r.cursor=r.start}return r},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{"},this.$findOpeningBracket=function(e,t,n){var i=this.$brackets[e],s=1,o=new r(this,t.row,t.column),u=o.getCurrentToken();if(u||(u=o.stepForward()),u){n||(n=new RegExp("(\\.?"+u.type.replace(".","\\.").replace("rparen",".paren")+")+"));for(var a=t.column-o.getCurrentTokenColumn()-2,f=u.value;;){for(;a>=0;){var l=f.charAt(a);if(l==i){if(s-=1,0==s)return{row:o.getCurrentTokenRow(),column:a+o.getCurrentTokenColumn()}}else l==e&&(s+=1);a-=1}do u=o.stepBackward();while(u&&!n.test(u.type));if(null==u)break;f=u.value,a=f.length-1}return null}},this.$findClosingBracket=function(e,t,n){var i=this.$brackets[e],s=1,o=new r(this,t.row,t.column),u=o.getCurrentToken();if(u||(u=o.stepForward()),u){n||(n=new RegExp("(\\.?"+u.type.replace(".","\\.").replace("lparen",".paren")+")+"));for(var a=t.column-o.getCurrentTokenColumn();;){for(var f=u.value,l=f.length;l>a;){var c=f.charAt(a);if(c==i){if(s-=1,0==s)return{row:o.getCurrentTokenRow(),column:a+o.getCurrentTokenColumn()}}else c==e&&(s+=1);a+=1}do u=o.stepForward();while(u&&!n.test(u.type));if(null==u)break;a=0}return null}}}var r=e("../token_iterator").TokenIterator,i=e("../range").Range;t.BracketMatch=s}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){var r=e("./lib/lang"),i=e("./lib/oop"),s=e("./range").Range,o=function(){this.$options={}};(function(){this.set=function(e){return i.mixin(this.$options,e),this},this.getOptions=function(){return r.copyObject(this.$options)},this.setOptions=function(e){this.$options=e},this.find=function(e){var t=this.$matchIterator(e,this.$options);if(!t)return!1;var n=null;return t.forEach(function(e,t,r){if(e.start)n=e;else{var i=e.offset+(r||0);n=new s(t,i,t,i+e.length)}return!0}),n},this.findAll=function(e){var t=this.$options;if(!t.needle)return[];this.$assembleRegExp(t);var n=t.range,i=n?e.getLines(n.start.row,n.end.row):e.doc.getAllLines(),o=[],u=t.re;if(t.$isMultiLine){var l,a=u.length,f=i.length-a;e:for(var c=u.offset||0;f>=c;c++){for(var h=0;a>h;h++)if(-1==i[c+h].search(u[h]))continue e;var p=i[c],d=i[c+a-1],v=p.length-p.match(u[0])[0].length,m=d.match(u[a-1])[0].length;l&&l.end.row===c&&l.end.column>v||(o.push(l=new s(c,v,c+a-1,m)),a>2&&(c=c+a-2))}}else for(var g=0;g<i.length;g++)for(var y=r.getMatchOffsets(i[g],u),h=0;h<y.length;h++){var b=y[h];o.push(new s(g,b.offset,g,b.offset+b.length))}if(n){for(var w=n.start.column,E=n.start.column,g=0,h=o.length-1;h>g&&o[g].start.column<w&&o[g].start.row==n.start.row;)g++;for(;h>g&&o[h].end.column>E&&o[h].end.row==n.end.row;)h--;for(o=o.slice(g,h+1),g=0,h=o.length;h>g;g++)o[g].start.row+=n.start.row,o[g].end.row+=n.start.row}return o},this.replace=function(e,t){var n=this.$options,r=this.$assembleRegExp(n);if(n.$isMultiLine)return t;if(r){var i=r.exec(e);if(!i||i[0].length!=e.length)return null;if(t=e.replace(r,t),n.preserveCase){t=t.split("");for(var s=Math.min(e.length,e.length);s--;){var o=e[s];o&&o.toLowerCase()!=o?t[s]=t[s].toUpperCase():t[s]=t[s].toLowerCase()}t=t.join("")}return t}},this.$matchIterator=function(e,t){var n=this.$assembleRegExp(t);if(!n)return!1;var o,i=this,u=t.backwards;if(t.$isMultiLine)var a=n.length,f=function(t,r,i){var u=t.search(n[0]);if(-1!=u){for(var f=1;a>f;f++)if(t=e.getLine(r+f),-1==t.search(n[f]))return;var l=t.match(n[a-1])[0].length,c=new s(r,u,r+a-1,l);return 1==n.offset?(c.start.row--,c.start.column=Number.MAX_VALUE):i&&(c.start.column+=i),o(c)?!0:void 0}};else if(u)var f=function(e,t,i){for(var s=r.getMatchOffsets(e,n),u=s.length-1;u>=0;u--)if(o(s[u],t,i))return!0};else var f=function(e,t,i){for(var s=r.getMatchOffsets(e,n),u=0;u<s.length;u++)if(o(s[u],t,i))return!0};return{forEach:function(n){o=n,i.$lineIterator(e,t).forEach(f)}}},this.$assembleRegExp=function(e,t){if(e.needle instanceof RegExp)return e.re=e.needle;var n=e.needle;if(!e.needle)return e.re=!1;e.regExp||(n=r.escapeRegExp(n)),e.wholeWord&&(n="\\b"+n+"\\b");var i=e.caseSensitive?"g":"gi";if(e.$isMultiLine=!t&&/[\n\r]/.test(n),e.$isMultiLine)return e.re=this.$assembleMultilineRegExp(n,i);try{var s=new RegExp(n,i)}catch(o){s=!1}return e.re=s},this.$assembleMultilineRegExp=function(e,t){for(var n=e.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),r=[],i=0;i<n.length;i++)try{r.push(new RegExp(n[i],t))}catch(s){return!1}return""==n[0]?(r.shift(),r.offset=1):r.offset=0,r},this.$lineIterator=function(e,t){var n=1==t.backwards,r=0!=t.skipCurrent,i=t.range,s=t.start;s||(s=i?i[n?"end":"start"]:e.selection.getRange()),s.start&&(s=s[r!=n?"end":"start"]);var o=i?i.start.row:0,u=i?i.end.row:e.getLength()-1,a=n?function(n){var r=s.row,i=e.getLine(r).substring(0,s.column);if(!n(i,r)){for(r--;r>=o;r--)if(n(e.getLine(r),r))return;if(0!=t.wrap)for(r=u,o=s.row;r>=o;r--)if(n(e.getLine(r),r))return}}:function(n){var r=s.row,i=e.getLine(r).substr(s.column);if(!n(i,r,s.column)){for(r+=1;u>=r;r++)if(n(e.getLine(r),r))return;if(0!=t.wrap)for(r=o,u=s.row;u>=r;r++)if(n(e.getLine(r),r))return}};return{forEach:a}}}).call(o.prototype),t.Search=o}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,n){var r=e("../lib/oop"),i=e("../keyboard/hash_handler").HashHandler,s=e("../lib/event_emitter").EventEmitter,o=function(e,t){i.call(this,t,e),this.byName=this.commands,this.setDefaultHandler("exec",function(e){return e.command.exec(e.editor,e.args||{})})};r.inherits(o,i),function(){r.implement(this,s),this.exec=function(e,t,n){if("string"==typeof e&&(e=this.commands[e]),!e)return!1;if(t&&t.$readOnly&&!e.readOnly)return!1;var r={editor:t,command:e,args:n},i=this._emit("exec",r);return this._signal("afterExec",r),i===!1?!1:!0},this.toggleRecording=function(e){return this.$inReplay?void 0:(e&&e._emit("changeStatus"),this.recording?(this.macro.pop(),this.removeEventListener("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(e){this.macro.push([e.command,e.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0))},this.replay=function(e){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(e);try{this.$inReplay=!0,this.macro.forEach(function(t){"string"==typeof t?this.exec(t,e):this.exec(t[0],e,t[1])},this)}finally{this.$inReplay=!1}}},this.trimMacro=function(e){return e.map(function(e){return"string"!=typeof e[0]&&(e[0]=e[0].name),e[1]||(e=e[0]),e})}}.call(o.prototype),t.CommandManager=o}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){function s(e,t){if(this.platform=t||(i.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.__defineGetter__&&this.__defineSetter__&&"undefined"!=typeof console&&console.error){var n=!1,r=function(){n||(n=!0,console.error("commmandKeyBinding has too many m's. use commandKeyBinding"))};this.__defineGetter__("commmandKeyBinding",function(){return r(),this.commandKeyBinding}),this.__defineSetter__("commmandKeyBinding",function(e){return r(),this.commandKeyBinding=e})}else this.commmandKeyBinding=this.commandKeyBinding;this.addCommands(e)}var r=e("../lib/keys"),i=e("../lib/useragent");(function(){this.addCommand=function(e){this.commands[e.name]&&this.removeCommand(e),this.commands[e.name]=e,e.bindKey&&this._buildKeyHash(e)},this.removeCommand=function(e){var t="string"==typeof e?e:e.name;e=this.commands[t],delete this.commands[t];var n=this.commandKeyBinding;for(var r in n)for(var i in n[r])n[r][i]==e&&delete n[r][i]},this.bindKey=function(e,t){if(e){if("function"==typeof t)return void this.addCommand({exec:t,bindKey:e,name:t.name||e});var n=this.commandKeyBinding;e.split("|").forEach(function(e){var r=this.parseKeys(e,t),i=r.hashId;(n[i]||(n[i]={}))[r.key]=t},this)}},this.addCommands=function(e){e&&Object.keys(e).forEach(function(t){var n=e[t];if(n){if("string"==typeof n)return this.bindKey(n,t);"function"==typeof n&&(n={exec:n}),"object"==typeof n&&(n.name||(n.name=t),this.addCommand(n))}},this)},this.removeCommands=function(e){Object.keys(e).forEach(function(t){this.removeCommand(e[t])},this)},this.bindKeys=function(e){Object.keys(e).forEach(function(t){this.bindKey(t,e[t])},this)},this._buildKeyHash=function(e){var t=e.bindKey;if(t){var n="string"==typeof t?t:t[this.platform];this.bindKey(n,e)}},this.parseKeys=function(e){-1!=e.indexOf(" ")&&(e=e.split(/\s+/).pop());var t=e.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(e){return e}),n=t.pop(),i=r[n];if(r.FUNCTION_KEYS[i])n=r.FUNCTION_KEYS[i].toLowerCase();else{if(!t.length)return{key:n,hashId:-1};if(1==t.length&&"shift"==t[0])return{key:n.toUpperCase(),hashId:-1}}for(var s=0,o=t.length;o--;){var u=r.KEY_MODS[t[o]];if(null==u)return"undefined"!=typeof console&&console.error("invalid modifier "+t[o]+" in "+e),!1;s|=u}return{key:n,hashId:s}},this.findKeyCommand=function(t,n){var r=this.commandKeyBinding;return r[t]&&r[t][n]},this.handleKeyboard=function(e,t,n,r){return{command:this.findKeyCommand(t,n)}}}).call(s.prototype),t.HashHandler=s}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config"],function(e,t,n){function s(e,t){return{win:e,mac:t}}var r=e("../lib/lang"),i=e("../config");t.commands=[{name:"showSettingsMenu",bindKey:s("Ctrl-,","Command-,"),exec:function(e){i.loadModule("ace/ext/settings_menu",function(t){t.init(e),e.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",bindKey:s("Alt-E","Ctrl-E"),exec:function(e){i.loadModule("ace/ext/error_marker",function(t){t.showErrorMarker(e,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:s("Alt-Shift-E","Ctrl-Shift-E"),exec:function(e){i.loadModule("ace/ext/error_marker",function(t){t.showErrorMarker(e,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",bindKey:s("Ctrl-A","Command-A"),exec:function(e){e.selectAll()},readOnly:!0},{name:"centerselection",bindKey:s(null,"Ctrl-L"),exec:function(e){e.centerSelection()},readOnly:!0},{name:"gotoline",bindKey:s("Ctrl-L","Command-L"),exec:function(e){var t=parseInt(prompt("Enter line number:"),10);isNaN(t)||e.gotoLine(t)},readOnly:!0},{name:"fold",bindKey:s("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(e){e.session.toggleFold(!1)},scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:s("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(e){e.session.toggleFold(!0)},scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:s("F2","F2"),exec:function(e){e.session.toggleFoldWidget()},scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:s("Alt-F2","Alt-F2"),exec:function(e){e.session.toggleFoldWidget(!0)},scrollIntoView:"center",readOnly:!0},{name:"foldall",bindKey:s("Ctrl-Alt-0","Ctrl-Command-Option-0"),exec:function(e){e.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",bindKey:s("Alt-0","Command-Option-0"),exec:function(e){e.session.foldAll(),e.session.unfold(e.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",bindKey:s("Alt-Shift-0","Command-Option-Shift-0"),exec:function(e){e.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",bindKey:s("Ctrl-K","Command-G"),exec:function(e){e.findNext()},readOnly:!0},{name:"findprevious",bindKey:s("Ctrl-Shift-K","Command-Shift-G"),exec:function(e){e.findPrevious()},readOnly:!0},{name:"selectOrFindNext",bindKey:s("ALt-K","Ctrl-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findNext()},readOnly:!0},{name:"selectOrFindPrevious",bindKey:s("Alt-Shift-K","Ctrl-Shift-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findPrevious()},readOnly:!0},{name:"find",bindKey:s("Ctrl-F","Command-F"),exec:function(e){i.loadModule("ace/ext/searchbox",function(t){t.Search(e)})},readOnly:!0},{name:"overwrite",bindKey:"Insert",exec:function(e){e.toggleOverwrite()},readOnly:!0},{name:"selecttostart",bindKey:s("Ctrl-Shift-Home","Command-Shift-Up"),exec:function(e){e.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",bindKey:s("Ctrl-Home","Command-Home|Command-Up"),exec:function(e){e.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",bindKey:s("Shift-Up","Shift-Up"),exec:function(e){e.getSelection().selectUp()},multiSelectAction:"forEach",readOnly:!0},{name:"golineup",bindKey:s("Up","Up|Ctrl-P"),exec:function(e,t){e.navigateUp(t.times)},multiSelectAction:"forEach",readOnly:!0},{name:"selecttoend",bindKey:s("Ctrl-Shift-End","Command-Shift-Down"),exec:function(e){e.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",bindKey:s("Ctrl-End","Command-End|Command-Down"),exec:function(e){e.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",bindKey:s("Shift-Down","Shift-Down"),exec:function(e){e.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",bindKey:s("Down","Down|Ctrl-N"),exec:function(e,t){e.navigateDown(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",bindKey:s("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(e){e.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",bindKey:s("Ctrl-Left","Option-Left"),exec:function(e){e.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",bindKey:s("Alt-Shift-Left","Command-Shift-Left"),exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",bindKey:s("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(e){e.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",bindKey:s("Shift-Left","Shift-Left"),exec:function(e){e.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",bindKey:s("Left","Left|Ctrl-B"),exec:function(e,t){e.navigateLeft(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",bindKey:s("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(e){e.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",bindKey:s("Ctrl-Right","Option-Right"),exec:function(e){e.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",bindKey:s("Alt-Shift-Right","Command-Shift-Right"),exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",bindKey:s("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(e){e.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",bindKey:s("Shift-Right","Shift-Right"),exec:function(e){e.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",bindKey:s("Right","Right|Ctrl-F"),exec:function(e,t){e.navigateRight(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",bindKey:"Shift-PageDown",exec:function(e){e.selectPageDown()},readOnly:!0},{name:"pagedown",bindKey:s(null,"Option-PageDown"),exec:function(e){e.scrollPageDown()},readOnly:!0},{name:"gotopagedown",bindKey:s("PageDown","PageDown|Ctrl-V"),exec:function(e){e.gotoPageDown()},readOnly:!0},{name:"selectpageup",bindKey:"Shift-PageUp",exec:function(e){e.selectPageUp()},readOnly:!0},{name:"pageup",bindKey:s(null,"Option-PageUp"),exec:function(e){e.scrollPageUp()},readOnly:!0},{name:"gotopageup",bindKey:"PageUp",exec:function(e){e.gotoPageUp()},readOnly:!0},{name:"scrollup",bindKey:s("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",bindKey:s("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",bindKey:"Shift-Home",exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",bindKey:"Shift-End",exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",bindKey:s("Ctrl-Alt-E","Command-Option-E"),exec:function(e){e.commands.toggleRecording(e)},readOnly:!0},{name:"replaymacro",bindKey:s("Ctrl-Shift-E","Command-Shift-E"),exec:function(e){e.commands.replay(e)},readOnly:!0},{name:"jumptomatching",bindKey:s("Ctrl-P","Ctrl-Shift-P"),exec:function(e){e.jumpToMatching()},multiSelectAction:"forEach",readOnly:!0},{name:"selecttomatching",bindKey:s("Ctrl-Shift-P",null),exec:function(e){e.jumpToMatching(!0)},multiSelectAction:"forEach",readOnly:!0},{name:"cut",exec:function(e){var t=e.getSelectionRange();e._emit("cut",t),e.selection.isEmpty()||(e.session.remove(t),e.clearSelection())},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"removeline",bindKey:s("Ctrl-D","Command-D"),exec:function(e){e.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",bindKey:s("Ctrl-Shift-D","Command-Shift-D"),exec:function(e){e.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",bindKey:s("Ctrl-Alt-S","Command-Alt-S"),exec:function(e){e.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",bindKey:s("Ctrl-/","Command-/"),exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",bindKey:s("Ctrl-Shift-/","Command-Shift-/"),exec:function(e){e.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",bindKey:s("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(e){e.modifyNumber(1)},multiSelectAction:"forEach"},{name:"modifyNumberDown",bindKey:s("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(e){e.modifyNumber(-1)},multiSelectAction:"forEach"},{name:"replace",bindKey:s("Ctrl-H","Command-Option-F"),exec:function(e){i.loadModule("ace/ext/searchbox",function(t){t.Search(e,!0)})}},{name:"undo",bindKey:s("Ctrl-Z","Command-Z"),exec:function(e){e.undo()}},{name:"redo",bindKey:s("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(e){e.redo()}},{name:"copylinesup",bindKey:s("Alt-Shift-Up","Command-Option-Up"),exec:function(e){e.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",bindKey:s("Alt-Up","Option-Up"),exec:function(e){e.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",bindKey:s("Alt-Shift-Down","Command-Option-Down"),exec:function(e){e.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",bindKey:s("Alt-Down","Option-Down"),exec:function(e){e.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",bindKey:s("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(e){e.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",bindKey:s("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e){e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",bindKey:s("Shift-Delete",null),exec:function(e){return e.selection.isEmpty()?void e.remove("left"):!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",bindKey:s("Alt-Backspace","Command-Backspace"),exec:function(e){e.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",bindKey:s("Alt-Delete","Ctrl-K"),exec:function(e){e.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",bindKey:s("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(e){e.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",bindKey:s("Ctrl-Delete","Alt-Delete"),exec:function(e){e.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",bindKey:s("Shift-Tab","Shift-Tab"),exec:function(e){e.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",bindKey:s("Tab","Tab"),exec:function(e){e.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",bindKey:s("Ctrl-[","Ctrl-["),exec:function(e){e.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",bindKey:s("Ctrl-]","Ctrl-]"),exec:function(e){e.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",exec:function(e,t){e.insert(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",exec:function(e,t){e.insert(r.stringRepeat(t.text||"",t.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",bindKey:s(null,"Ctrl-O"),exec:function(e){e.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",bindKey:s("Ctrl-T","Ctrl-T"),exec:function(e){e.transposeLetters()},multiSelectAction:function(e){e.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",bindKey:s("Ctrl-U","Ctrl-U"),exec:function(e){e.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",bindKey:s("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(e){e.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"}]}),ace.define("ace/undomanager",["require","exports","module"],function(e,t,n){var r=function(){this.reset()};(function(){this.execute=function(e){var t=e.args[0];this.$doc=e.args[1],
e.merge&&this.hasUndo()&&(this.dirtyCounter--,t=this.$undoStack.pop().concat(t)),this.$undoStack.push(t),this.$redoStack=[],this.dirtyCounter<0&&(this.dirtyCounter=NaN),this.dirtyCounter++},this.undo=function(e){var t=this.$undoStack.pop(),n=null;return t&&(n=this.$doc.undoChanges(t,e),this.$redoStack.push(t),this.dirtyCounter--),n},this.redo=function(e){var t=this.$redoStack.pop(),n=null;return t&&(n=this.$doc.redoChanges(t,e),this.$undoStack.push(t),this.dirtyCounter++),n},this.reset=function(){this.$undoStack=[],this.$redoStack=[],this.dirtyCounter=0},this.hasUndo=function(){return this.$undoStack.length>0},this.hasRedo=function(){return this.$redoStack.length>0},this.markClean=function(){this.dirtyCounter=0},this.isClean=function(){return 0===this.dirtyCounter}}).call(r.prototype),t.UndoManager=r}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/lib/useragent","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter"],function(e,t,n){var r=e("./lib/oop"),i=e("./lib/dom"),s=e("./config"),o=e("./lib/useragent"),u=e("./layer/gutter").Gutter,a=e("./layer/marker").Marker,f=e("./layer/text").Text,l=e("./layer/cursor").Cursor,c=e("./scrollbar").HScrollBar,h=e("./scrollbar").VScrollBar,p=e("./renderloop").RenderLoop,d=e("./layer/font_metrics").FontMetrics,v=e("./lib/event_emitter").EventEmitter,m='.ace_editor {position: relative;overflow: hidden;font-family: \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;font-size: 12px;line-height: normal;direction: ltr;}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_content {position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: text;min-width: 100%;}.ace_dragging, .ace_dragging * {cursor: move !important;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;text-indent: -1em;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;}.ace_text-input.ace_composition {background: #f8f8f8;color: #111;z-index: 1000;opacity: 1;text-indent: 0;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;white-space: pre;height: 100%;width: 100%;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;/* setting pointer-events: auto; on node under the mouse, which changesduring scroll, will break mouse wheel scrolling in Safari */pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;}.ace_text-layer {font: inherit !important;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;border-left: 2px solid}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0px;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {-moz-transition: opacity 0.18s;-webkit-transition: opacity 0.18s;-o-transition: opacity 0.18s;-ms-transition: opacity 0.18s;transition: opacity 0.18s;}.ace_editor.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_line .ace_fold {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;-moz-border-radius: 2px;-webkit-border-radius: 2px;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;display: block;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);-moz-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);-webkit-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);-moz-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);-webkit-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}/*** Dark version for fold widgets*/.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {-moz-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);-webkit-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {-moz-transition: opacity 0.4s ease 0.05s;-webkit-transition: opacity 0.4s ease 0.05s;-o-transition: opacity 0.4s ease 0.05s;-ms-transition: opacity 0.4s ease 0.05s;transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {-moz-transition: opacity 0.05s ease 0.05s;-webkit-transition: opacity 0.05s ease 0.05s;-o-transition: opacity 0.05s ease 0.05s;-ms-transition: opacity 0.05s ease 0.05s;transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}';i.importCssString(m,"ace_editor");var g=function(e,t){var n=this;this.container=e||i.createElement("div"),this.$keepTextAreaAtCursor=!o.isOldIE,i.addCssClass(this.container,"ace_editor"),this.setTheme(t),this.$gutter=i.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.scroller=i.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=i.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new u(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new a(this.content);var r=this.$textLayer=new f(this.content);this.canvas=r.element,this.$markerFront=new a(this.content),this.$cursorLayer=new l(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new h(this.container,this),this.scrollBarH=new c(this.container,this),this.scrollBarV.addEventListener("scroll",function(e){n.$scrollAnimation||n.session.setScrollTop(e.data-n.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(e){n.$scrollAnimation||n.session.setScrollLeft(e.data-n.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new d(this.container,500),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.addEventListener("changeCharacterSize",function(e){n.updateCharacterSize(),n.onResize(!0,n.gutterWidth,n.$size.width,n.$size.height),n._signal("changeCharacterSize",e)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$loop=new p(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),s.resetOptions(this),s._emit("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,r.implement(this,v),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin()},this.setSession=function(e){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=e,e&&(this.scrollMargin.top&&e.getScrollTop()<=0&&e.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(e),this.$markerBack.setSession(e),this.$markerFront.setSession(e),this.$gutterLayer.setSession(e),this.$textLayer.setSession(e),this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(e,t){void 0===t&&(t=1/0),this.$changedLines?(this.$changedLines.firstRow>e&&(this.$changedLines.firstRow=e),this.$changedLines.lastRow<t&&(this.$changedLines.lastRow=t)):this.$changedLines={firstRow:e,lastRow:t},this.$changedLines.firstRow>this.layerConfig.lastRow||this.$changedLines.lastRow<this.layerConfig.firstRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar()},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(e){e?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(e,t,n,r){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=e?1:0;var i=this.container;r||(r=i.clientHeight||i.scrollHeight),n||(n=i.clientWidth||i.scrollWidth);var s=this.$updateCachedSize(e,t,n,r);return this.$size.scrollerHeight&&(n||r)?(e&&(this.$gutterLayer.$padding=null),e?this.$renderChanges(s|this.$changes,!0):this.$loop.schedule(s|this.$changes),this.resizing&&(this.resizing=0),void 0):this.resizing=0}},this.$updateCachedSize=function(e,t,n,r){r-=this.$extraHeight||0;var i=0,s=this.$size,o={width:s.width,height:s.height,scrollerHeight:s.scrollerHeight,scrollerWidth:s.scrollerWidth};return r&&(e||s.height!=r)&&(s.height=r,i|=this.CHANGE_SIZE,s.scrollerHeight=s.height,this.$horizScroll&&(s.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",i|=this.CHANGE_SCROLL),n&&(e||s.width!=n)&&(i|=this.CHANGE_SIZE,s.width=n,null==t&&(t=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=t,this.scrollBarH.element.style.left=this.scroller.style.left=t+"px",s.scrollerWidth=Math.max(0,n-t-this.scrollBarV.getWidth()),this.scrollBarH.element.style.right=this.scroller.style.right=this.scrollBarV.getWidth()+"px",this.scroller.style.bottom=this.scrollBarH.getHeight()+"px",(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||e)&&(i|=this.CHANGE_FULL)),s.$dirty=!n||!r,i&&this._signal("resize",o),i},this.onGutterResize=function(){var e=this.$showGutter?this.$gutter.offsetWidth:0;e!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,e,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):(this.$computeLayerConfig(),this.$loop.schedule(this.CHANGE_MARKER))},this.adjustWrapLimit=function(){var e=this.$size.scrollerWidth-2*this.$padding,t=Math.floor(e/this.characterWidth);return this.session.adjustWrapLimit(t,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(e){this.setOption("animatedScroll",e)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(e){this.setOption("showInvisibles",e)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(e){this.setOption("displayIndentGuides",e)},this.setShowPrintMargin=function(e){this.setOption("showPrintMargin",e)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(e){this.setOption("printMarginColumn",e)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(e){return this.setOption("showGutter",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updateGutterLineHighlight=function(){var e=this.$cursorLayer.$pixelPos,t=this.layerConfig.lineHeight;if(this.session.getUseWrapMode()){var n=this.session.selection.getCursor();n.column=0,e=this.$cursorLayer.getPixelPosition(n,!0),t*=this.session.getRowLength(n.row)}this.$gutterLineHighlight.style.top=e.top-this.layerConfig.offset+"px",this.$gutterLineHighlight.style.height=t+"px"},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var e=i.createElement("div");e.className="ace_layer ace_print-margin-layer",this.$printMarginEl=i.createElement("div"),this.$printMarginEl.className="ace_print-margin",e.appendChild(this.$printMarginEl),this.content.insertBefore(e,this.content.firstChild)}var t=this.$printMarginEl.style;t.left=this.characterWidth*this.$printMarginColumn+this.$padding+"px",t.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.content},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(this.$keepTextAreaAtCursor){var e=this.layerConfig,t=this.$cursorLayer.$pixelPos.top,n=this.$cursorLayer.$pixelPos.left;t-=e.offset;var r=this.lineHeight;if(!(0>t||t>e.height-r)){var i=this.characterWidth;if(this.$composition){var s=this.textarea.value.replace(/^\x01+/,"");i*=this.session.$getStringScreenWidth(s)[0]+2,r+=2,t-=1}n-=this.scrollLeft,n>this.$size.scrollerWidth-i&&(n=this.$size.scrollerWidth-i),n-=this.scrollBar.width,this.textarea.style.height=r+"px",this.textarea.style.width=i+"px",this.textarea.style.right=Math.max(0,this.$size.scrollerWidth-n-i)+"px",this.textarea.style.bottom=Math.max(0,this.$size.height-t-r)+"px"}}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var e=Math.floor((this.layerConfig.height+this.layerConfig.offset)/this.layerConfig.lineHeight);return this.layerConfig.firstRow-1+e},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(e){this.$padding=e,this.$textLayer.setPadding(e),this.$cursorLayer.setPadding(e),this.$markerFront.setPadding(e),this.$markerBack.setPadding(e),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(e,t,n,r){var i=this.scrollMargin;i.top=0|e,i.bottom=0|t,i.right=0|r,i.left=0|n,i.v=i.top+i.bottom,i.h=i.left+i.right,i.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-i.top),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(e){this.setOption("hScrollBarAlwaysVisible",e)},this.getVScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(e){this.setOption("vScrollBarAlwaysVisible",e)},this.$updateScrollBarV=function(){this.scrollBarV.setScrollHeight(this.layerConfig.maxHeight+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(e,t){if(this.$changes&&(e|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!e&&!t)return void(this.$changes|=e);if(this.$size.$dirty)return this.$changes|=e,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender");var n=this.layerConfig;return(e&this.CHANGE_FULL||e&this.CHANGE_SIZE||e&this.CHANGE_TEXT||e&this.CHANGE_LINES||e&this.CHANGE_SCROLL||e&this.CHANGE_H_SCROLL)&&(e|=this.$computeLayerConfig(),n=this.layerConfig,this.$updateScrollBarV(),e&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),this.$gutterLayer.element.style.marginTop=-n.offset+"px",this.content.style.marginTop=-n.offset+"px",this.content.style.width=n.width+2*this.$padding+"px",this.content.style.height=n.minHeight+"px"),e&this.CHANGE_H_SCROLL&&(this.content.style.marginLeft=-this.scrollLeft+"px",this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),e&this.CHANGE_FULL?(this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),this._signal("afterRender"),void 0):e&this.CHANGE_SCROLL?(e&this.CHANGE_TEXT||e&this.CHANGE_LINES?this.$textLayer.update(n):this.$textLayer.scrollLines(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),this.$moveTextAreaToCursor(),this._signal("afterRender"),void 0):(e&this.CHANGE_TEXT?(this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n)):e&this.CHANGE_LINES?(this.$updateLines()||e&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(n):(e&this.CHANGE_TEXT||e&this.CHANGE_GUTTER)&&this.$showGutter&&this.$gutterLayer.update(n),e&this.CHANGE_CURSOR&&(this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight()),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(n),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(n),this._signal("afterRender"),void 0)},this.$autosize=function(){var e=this.session.getScreenLength()*this.lineHeight,t=this.$maxLines*this.lineHeight,n=Math.max((this.$minLines||1)*this.lineHeight,Math.min(t,e))+this.scrollMargin.v+(this.$extraHeight||0),r=e>t;if(n!=this.desiredHeight||this.$size.height!=this.desiredHeight||r!=this.$vScroll){r!=this.$vScroll&&(this.$vScroll=r,this.scrollBarV.setVisible(r));var i=this.container.clientWidth;this.container.style.height=n+"px",this.$updateCachedSize(!0,this.$gutterWidth,i,n),this.desiredHeight=n}},this.$computeLayerConfig=function(){this.$maxLines&&this.lineHeight>1&&this.$autosize();var e=this.session,t=this.$size,n=t.height<=2*this.lineHeight,r=this.session.getScreenLength(),i=r*this.lineHeight,s=this.scrollTop%this.lineHeight,o=t.scrollerHeight+this.lineHeight,u=this.$getLongestLine(),a=!n&&(this.$hScrollBarAlwaysVisible||t.scrollerWidth-u-2*this.$padding<0),f=this.$horizScroll!==a;f&&(this.$horizScroll=a,this.scrollBarH.setVisible(a)),!this.$maxLines&&this.$scrollPastEnd&&this.scrollTop>i-t.scrollerHeight&&(i+=Math.min((t.scrollerHeight-this.lineHeight)*this.$scrollPastEnd,this.scrollTop-i+t.scrollerHeight));var l=!n&&(this.$vScrollBarAlwaysVisible||t.scrollerHeight-i<0),c=this.$vScroll!==l;c&&(this.$vScroll=l,this.scrollBarV.setVisible(l)),this.session.setScrollTop(Math.max(-this.scrollMargin.top,Math.min(this.scrollTop,i-t.scrollerHeight+this.scrollMargin.bottom))),this.session.setScrollLeft(Math.max(-this.scrollMargin.left,Math.min(this.scrollLeft,u+2*this.$padding-t.scrollerWidth+this.scrollMargin.right)));var v,m,h=Math.ceil(o/this.lineHeight)-1,p=Math.max(0,Math.round((this.scrollTop-s)/this.lineHeight)),d=p+h,g=this.lineHeight;p=e.screenToDocumentRow(p,0);var y=e.getFoldLine(p);y&&(p=y.start.row),v=e.documentToScreenRow(p,0),m=e.getRowLength(p)*g,d=Math.min(e.screenToDocumentRow(d,0),e.getLength()-1),o=t.scrollerHeight+e.getRowLength(d)*g+m,s=this.scrollTop-v*g;var b=0;return this.layerConfig.width!=u&&(b=this.CHANGE_H_SCROLL),(f||c)&&(b=this.$updateCachedSize(!0,this.gutterWidth,t.width,t.height),this._signal("scrollbarVisibilityChanged"),c&&(u=this.$getLongestLine())),this.layerConfig={width:u,padding:this.$padding,firstRow:p,firstRowScreen:v,lastRow:d,lineHeight:g,characterWidth:this.characterWidth,minHeight:o,maxHeight:i,offset:s,gutterOffset:Math.max(0,Math.ceil((s+t.height-t.scrollerHeight)/g)),height:this.$size.scrollerHeight},b},this.$updateLines=function(){var e=this.$changedLines.firstRow,t=this.$changedLines.lastRow;this.$changedLines=null;var n=this.layerConfig;if(!(e>n.lastRow+1||t<n.firstRow))return t===1/0?(this.$showGutter&&this.$gutterLayer.update(n),void this.$textLayer.update(n)):(this.$textLayer.updateLines(n,e,t),!0)},this.$getLongestLine=function(){var e=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(e+=1),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(e*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(e,t){this.$gutterLayer.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){this.$gutterLayer.removeGutterDecoration(e,t)},this.updateBreakpoints=function(e){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(e){this.$gutterLayer.setAnnotations(e),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(e,t,n){this.scrollCursorIntoView(e,n),this.scrollCursorIntoView(t,n)},this.scrollCursorIntoView=function(e,t,n){if(0!==this.$size.scrollerHeight){var r=this.$cursorLayer.getPixelPosition(e),i=r.left,s=r.top,o=n&&n.top||0,u=n&&n.bottom||0,a=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;a+o>s?(t&&(s-=t*this.$size.scrollerHeight),0===s&&(s=-this.scrollMargin.top),this.session.setScrollTop(s)):a+this.$size.scrollerHeight-u<s+this.lineHeight&&(t&&(s+=t*this.$size.scrollerHeight),this.session.setScrollTop(s+this.lineHeight-this.$size.scrollerHeight));var f=this.scrollLeft;f>i?(i<this.$padding+2*this.layerConfig.characterWidth&&(i=-this.scrollMargin.left),this.session.setScrollLeft(i)):f+this.$size.scrollerWidth<i+this.characterWidth?this.session.setScrollLeft(Math.round(i+this.characterWidth-this.$size.scrollerWidth)):f<=this.$padding&&i-f<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(e){this.session.setScrollTop(e*this.lineHeight)},this.alignCursor=function(e,t){"number"==typeof e&&(e={row:e,column:0});var n=this.$cursorLayer.getPixelPosition(e),r=this.$size.scrollerHeight-this.lineHeight,i=n.top-r*(t||0);return this.session.setScrollTop(i),i},this.STEPS=8,this.$calcSteps=function(e,t){var n=0,r=this.STEPS,i=[],s=function(e,t,n){
return n*(Math.pow(e-1,3)+1)+t};for(n=0;r>n;++n)i.push(s(n/this.STEPS,e,t-e));return i},this.scrollToLine=function(e,t,n,r){var i=this.$cursorLayer.getPixelPosition({row:e,column:0}),s=i.top;t&&(s-=this.$size.scrollerHeight/2);var o=this.scrollTop;this.session.setScrollTop(s),n!==!1&&this.animateScrolling(o,r)},this.animateScrolling=function(e,t){var n=this.scrollTop;if(this.$animatedScroll){var r=this;if(e!=n){if(this.$scrollAnimation){var i=this.$scrollAnimation.steps;if(i.length&&(e=i[0],e==n))return}var s=r.$calcSteps(e,n);this.$scrollAnimation={from:e,to:n,steps:s},clearInterval(this.$timer),r.session.setScrollTop(s.shift()),r.session.$scrollTop=n,this.$timer=setInterval(function(){s.length?(r.session.setScrollTop(s.shift()),r.session.$scrollTop=n):null!=n?(r.session.$scrollTop=-1,r.session.setScrollTop(n),n=null):(r.$timer=clearInterval(r.$timer),r.$scrollAnimation=null,t&&t())},10)}}},this.scrollToY=function(e){this.scrollTop!==e&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=e)},this.scrollToX=function(e){this.scrollLeft!==e&&(this.scrollLeft=e),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(e,t){this.session.setScrollTop(t),this.session.setScrollLeft(t)},this.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t),e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)},this.isScrollableBy=function(e,t){return 0>t&&this.session.getScrollTop()>=1-this.scrollMargin.top?!0:t>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight-(this.$size.scrollerHeight-this.lineHeight)*this.$scrollPastEnd<-1+this.scrollMargin.bottom?!0:0>e&&this.session.getScrollLeft()>=1-this.scrollMargin.left?!0:e>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right?!0:void 0},this.pixelToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),r=(e+this.scrollLeft-n.left-this.$padding)/this.characterWidth,i=Math.floor((t+this.scrollTop-n.top)/this.lineHeight),s=Math.round(r);return{row:i,column:s,side:r-s>0?1:-1}},this.screenToTextCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),r=Math.round((e+this.scrollLeft-n.left-this.$padding)/this.characterWidth),i=(t+this.scrollTop-n.top)/this.lineHeight;return this.session.screenToDocumentPosition(i,Math.max(r,0))},this.textToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),r=this.session.documentToScreenPosition(e,t),i=this.$padding+Math.round(r.column*this.characterWidth),s=r.row*this.lineHeight;return{pageX:n.left+i-this.scrollLeft,pageY:n.top+s-this.scrollTop}},this.visualizeFocus=function(){i.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){i.removeCssClass(this.container,"ace_focus")},this.showComposition=function(e){this.$composition||(this.$composition={keepTextAreaAtCursor:this.$keepTextAreaAtCursor,cssText:this.textarea.style.cssText}),this.$keepTextAreaAtCursor=!0,i.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor()},this.setCompositionText=function(e){this.$moveTextAreaToCursor()},this.hideComposition=function(){this.$composition&&(i.removeCssClass(this.textarea,"ace_composition"),this.$keepTextAreaAtCursor=this.$composition.keepTextAreaAtCursor,this.textarea.style.cssText=this.$composition.cssText,this.$composition=null)},this.setTheme=function(e,t){function o(r){if(n.$themeId!=e)return t&&t();if(r.cssClass){i.importCssString(r.cssText,r.cssClass,n.container.ownerDocument),n.theme&&i.removeCssClass(n.container,n.theme.cssClass);var s="padding"in r?r.padding:"padding"in(n.theme||{})?4:n.$padding;n.$padding&&s!=n.$padding&&n.setPadding(s),n.$theme=r.cssClass,n.theme=r,i.addCssClass(n.container,r.cssClass),i.setCssClass(n.container,"ace_dark",r.isDark),n.$size&&(n.$size.width=0,n.$updateSizeAsync()),n._dispatchEvent("themeLoaded",{theme:r}),t&&t()}}var n=this;if(this.$themeId=e,n._dispatchEvent("themeChange",{theme:e}),e&&"string"!=typeof e)o(e);else{var r=e||this.$options.theme.initialValue;s.loadModule(["theme",r],o)}},this.getTheme=function(){return this.$themeId},this.setStyle=function(e,t){i.setCssClass(this.container,e,t!==!1)},this.unsetStyle=function(e){i.removeCssClass(this.container,e)},this.setCursorStyle=function(e){this.content.style.cursor!=e&&(this.content.style.cursor=e)},this.setMouseCursor=function(e){this.content.style.cursor=e},this.destroy=function(){this.$textLayer.destroy(),this.$cursorLayer.destroy()}}).call(g.prototype),s.defineOptions(g.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(e){this.$textLayer.setShowInvisibles(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(e){"number"==typeof e&&(this.$printMarginColumn=e),this.$showPrintMargin=!!e,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(e){this.$gutter.style.display=e?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(e){i.setCssClass(this.$gutter,"ace_fade-fold-widgets",e)},initialValue:!1},showFoldWidgets:{set:function(e){this.$gutterLayer.setShowFoldWidgets(e)},initialValue:!0},showLineNumbers:{set:function(e){this.$gutterLayer.setShowLineNumbers(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(e){this.$textLayer.setDisplayIndentGuides(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(e){return this.$gutterLineHighlight?(this.$gutterLineHighlight.style.display=e?"":"none",void(this.$cursorLayer.$pixelPos&&this.$updateGutterLineHighlight())):(this.$gutterLineHighlight=i.createElement("div"),this.$gutterLineHighlight.className="ace_gutter-active-line",this.$gutter.appendChild(this.$gutterLineHighlight),void 0)},initialValue:!1,value:!0},hScrollBarAlwaysVisible:{set:function(e){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(e){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(e){"number"==typeof e&&(e+="px"),this.container.style.fontSize=e,this.updateFontSize()},initialValue:12},fontFamily:{set:function(e){this.container.style.fontFamily=e,this.updateFontSize()}},maxLines:{set:function(e){this.updateFull()}},minLines:{set:function(e){this.updateFull()}},scrollPastEnd:{set:function(e){e=+e||0,this.$scrollPastEnd!=e&&(this.$scrollPastEnd=e,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(e){this.$gutterLayer.$fixedWidth=!!e,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(e){this.setTheme(e)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0}}),t.VirtualRenderer=g}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter"],function(e,t,n){var r=e("../lib/dom"),i=e("../lib/oop"),s=e("../lib/lang"),o=e("../lib/event_emitter").EventEmitter,u=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_gutter-layer",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$cells=[]};(function(){i.implement(this,o),this.setSession=function(e){this.session&&this.session.removeEventListener("change",this.$updateAnnotations),this.session=e,e.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(e,t)},this.setAnnotations=function(e){this.$annotations=[];for(var t=0;t<e.length;t++){var n=e[t],r=n.row,i=this.$annotations[r];i||(i=this.$annotations[r]={text:[]});var o=n.text;o=o?s.escapeHTML(o):n.html||"",-1===i.text.indexOf(o)&&i.text.push(o);var u=n.type;"error"==u?i.className=" ace_error":"warning"==u&&" ace_error"!=i.className?i.className=" ace_warning":"info"==u&&!i.className&&(i.className=" ace_info")}},this.$updateAnnotations=function(e){if(this.$annotations.length){var t=e.data,n=t.range,r=n.start.row,i=n.end.row-r;if(0!==i)if("removeText"==t.action||"removeLines"==t.action)this.$annotations.splice(r,i+1,null);else{var s=new Array(i+1);s.unshift(r,1),this.$annotations.splice.apply(this.$annotations,s)}}},this.update=function(e){for(var t=this.session,n=e.firstRow,i=Math.min(e.lastRow+e.gutterOffset,t.getLength()-1),s=t.getNextFoldLine(n),o=s?s.start.row:1/0,u=this.$showFoldWidgets&&t.foldWidgets,a=t.$breakpoints,f=t.$decorations,l=t.$firstLineNumber,c=0,h=t.gutterRenderer||this.$renderer,p=null,d=-1,v=n;;){if(v>o&&(v=s.end.row+1,s=t.getNextFoldLine(v,s),o=s?s.start.row:1/0),v>i){for(;this.$cells.length>d+1;)p=this.$cells.pop(),this.element.removeChild(p.element);break}p=this.$cells[++d],p||(p={element:null,textNode:null,foldWidget:null},p.element=r.createElement("div"),p.textNode=document.createTextNode(""),p.element.appendChild(p.textNode),this.element.appendChild(p.element),this.$cells[d]=p);var m="ace_gutter-cell ";a[v]&&(m+=a[v]),f[v]&&(m+=f[v]),this.$annotations[v]&&(m+=this.$annotations[v].className),p.element.className!=m&&(p.element.className=m);var g=t.getRowLength(v)*e.lineHeight+"px";if(g!=p.element.style.height&&(p.element.style.height=g),u){var y=u[v];null==y&&(y=u[v]=t.getFoldWidget(v))}if(y){p.foldWidget||(p.foldWidget=r.createElement("span"),p.element.appendChild(p.foldWidget));var m="ace_fold-widget ace_"+y;m+="start"==y&&v==o&&v<s.end.row?" ace_closed":" ace_open",p.foldWidget.className!=m&&(p.foldWidget.className=m);var g=e.lineHeight+"px";p.foldWidget.style.height!=g&&(p.foldWidget.style.height=g)}else p.foldWidget&&(p.element.removeChild(p.foldWidget),p.foldWidget=null);var b=c=h?h.getText(t,v):v+l;b!=p.textNode.data&&(p.textNode.data=b),v++}this.element.style.height=e.minHeight+"px",(this.$fixedWidth||t.$useWrapMode)&&(c=t.getLength()+l);var w=h?h.getWidth(t,c,e):c.toString().length*e.characterWidth,E=this.$padding||this.$computePadding();w+=E.left+E.right,w!==this.gutterWidth&&!isNaN(w)&&(this.gutterWidth=w,this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._emit("changeGutterWidth",w))},this.$fixedWidth=!1,this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(e){this.$renderer=!e&&{getWidth:function(){return""},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(e){e?r.addCssClass(this.element,"ace_folding-enabled"):r.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=e,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var e=r.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=parseInt(e.paddingLeft)+1||0,this.$padding.right=parseInt(e.paddingRight)||0,this.$padding},this.getRegion=function(e){var t=this.$padding||this.$computePadding(),n=this.element.getBoundingClientRect();return e.x<t.left+n.left?"markers":this.$showFoldWidgets&&e.x>n.right-t.right?"foldWidgets":void 0}}).call(u.prototype),t.Gutter=u}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,n){var r=e("../range").Range,i=e("../lib/dom"),s=function(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_marker-layer",e.appendChild(this.element)};(function(){this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setMarkers=function(e){this.markers=e},this.update=function(e){var e=e||this.config;if(e){this.config=e;var t=[];for(var n in this.markers){var r=this.markers[n];if(r.range){var s=r.range.clipRows(e.firstRow,e.lastRow);if(!s.isEmpty())if(s=s.toScreenRange(this.session),r.renderer){var o=this.$getTop(s.start.row,e),u=this.$padding+s.start.column*e.characterWidth;r.renderer(t,s,u,o,e)}else"fullLine"==r.type?this.drawFullLineMarker(t,s,r.clazz,e):"screenLine"==r.type?this.drawScreenLineMarker(t,s,r.clazz,e):s.isMultiLine()?"text"==r.type?this.drawTextMarker(t,s,r.clazz,e):this.drawMultiLineMarker(t,s,r.clazz,e):this.drawSingleLineMarker(t,s,r.clazz+" ace_start",e)}else r.update(t,this,this.session,e)}this.element=i.setInnerHtml(this.element,t.join(""))}},this.$getTop=function(e,t){return(e-t.firstRowScreen)*t.lineHeight},this.drawTextMarker=function(e,t,n,i,s){var o=t.start.row,u=new r(o,t.start.column,o,this.session.getScreenLastRowColumn(o));for(this.drawSingleLineMarker(e,u,n+" ace_start",i,1,s),o=t.end.row,u=new r(o,0,o,t.end.column),this.drawSingleLineMarker(e,u,n,i,0,s),o=t.start.row+1;o<t.end.row;o++)u.start.row=o,u.end.row=o,u.end.column=this.session.getScreenLastRowColumn(o),this.drawSingleLineMarker(e,u,n,i,1,s)},this.drawMultiLineMarker=function(e,t,n,r,i){var s=this.$padding,o=r.lineHeight,u=this.$getTop(t.start.row,r),a=s+t.start.column*r.characterWidth;i=i||"",e.push("<div class='",n," ace_start' style='","height:",o,"px;","right:0;","top:",u,"px;","left:",a,"px;",i,"'></div>"),u=this.$getTop(t.end.row,r);var f=t.end.column*r.characterWidth;e.push("<div class='",n,"' style='","height:",o,"px;","width:",f,"px;","top:",u,"px;","left:",s,"px;",i,"'></div>"),o=(t.end.row-t.start.row-1)*r.lineHeight,0>o||(u=this.$getTop(t.start.row+1,r),e.push("<div class='",n,"' style='","height:",o,"px;","right:0;","top:",u,"px;","left:",s,"px;",i,"'></div>"))},this.drawSingleLineMarker=function(e,t,n,r,i,s){var o=r.lineHeight,u=(t.end.column+(i||0)-t.start.column)*r.characterWidth,a=this.$getTop(t.start.row,r),f=this.$padding+t.start.column*r.characterWidth;e.push("<div class='",n,"' style='","height:",o,"px;","width:",u,"px;","top:",a,"px;","left:",f,"px;",s||"","'></div>")},this.drawFullLineMarker=function(e,t,n,r,i){var s=this.$getTop(t.start.row,r),o=r.lineHeight;t.start.row!=t.end.row&&(o+=this.$getTop(t.end.row,r)-s),e.push("<div class='",n,"' style='","height:",o,"px;","top:",s,"px;","left:0;right:0;",i||"","'></div>")},this.drawScreenLineMarker=function(e,t,n,r,i){var s=this.$getTop(t.start.row,r),o=r.lineHeight;e.push("<div class='",n,"' style='","height:",o,"px;","top:",s,"px;","left:0;right:0;",i||"","'></div>")}}).call(s.prototype),t.Marker=s}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,n){var r=e("../lib/oop"),i=e("../lib/dom"),s=e("../lib/lang"),u=(e("../lib/useragent"),e("../lib/event_emitter").EventEmitter),a=function(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_text-layer",e.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this)};(function(){r.implement(this,u),this.EOF_CHAR="¶",this.EOL_CHAR_LF="¬",this.EOL_CHAR_CRLF="¤",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="→",this.SPACE_CHAR="·",this.$padding=0,this.$updateEolChar=function(){var e="\n"==this.session.doc.getNewLineCharacter()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;return this.EOL_CHAR!=e?(this.EOL_CHAR=e,!0):void 0},this.setPadding=function(e){this.$padding=e,this.element.style.padding="0 "+e+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(e){this.$fontMetrics=e,this.$fontMetrics.on("changeCharacterSize",function(e){this._signal("changeCharacterSize",e)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(e){this.session=e,this.$computeTabString()},this.showInvisibles=!1,this.setShowInvisibles=function(e){return this.showInvisibles==e?!1:(this.showInvisibles=e,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(e){return this.displayIndentGuides==e?!1:(this.displayIndentGuides=e,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var e=this.session.getTabSize();this.tabSize=e;for(var t=this.$tabStrings=[0],n=1;e+1>n;n++)this.showInvisibles?t.push("<span class='ace_invisible ace_invisible_tab'>"+this.TAB_CHAR+s.stringRepeat(" ",n-1)+"</span>"):t.push(s.stringRepeat(" ",n));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var r="ace_indent-guide",i="",o="";if(this.showInvisibles){r+=" ace_invisible",i=" ace_invisible_space",o=" ace_invisible_tab";var u=s.stringRepeat(this.SPACE_CHAR,this.tabSize),a=this.TAB_CHAR+s.stringRepeat(" ",this.tabSize-1)}else var u=s.stringRepeat(" ",this.tabSize),a=u;this.$tabStrings[" "]="<span class='"+r+i+"'>"+u+"</span>",this.$tabStrings["	"]="<span class='"+r+o+"'>"+a+"</span>"}},this.updateLines=function(e,t,n){(this.config.lastRow!=e.lastRow||this.config.firstRow!=e.firstRow)&&this.scrollLines(e),this.config=e;for(var r=Math.max(t,e.firstRow),s=Math.min(n,e.lastRow),o=this.element.childNodes,u=0,a=e.firstRow;r>a;a++){var f=this.session.getFoldLine(a);if(f){if(f.containsRow(r)){r=f.start.row;break}a=f.end.row}u++}for(var a=r,f=this.session.getNextFoldLine(a),l=f?f.start.row:1/0;a>l&&(a=f.end.row+1,f=this.session.getNextFoldLine(a,f),l=f?f.start.row:1/0),!(a>s);){var c=o[u++];if(c){var h=[];this.$renderLine(h,a,!this.$useLineGroups(),a==l?f:!1),c.style.height=e.lineHeight*this.session.getRowLength(a)+"px",i.setInnerHtml(c,h.join(""))}a++}},this.scrollLines=function(e){var t=this.config;if(this.config=e,!t||t.lastRow<e.firstRow)return this.update(e);if(e.lastRow<t.firstRow)return this.update(e);var n=this.element;if(t.firstRow<e.firstRow)for(var r=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);r>0;r--)n.removeChild(n.firstChild);if(t.lastRow>e.lastRow)for(var r=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);r>0;r--)n.removeChild(n.lastChild);if(e.firstRow<t.firstRow){var i=this.$renderLinesFragment(e,e.firstRow,t.firstRow-1);n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i)}if(e.lastRow>t.lastRow){var i=this.$renderLinesFragment(e,t.lastRow+1,e.lastRow);n.appendChild(i)}},this.$renderLinesFragment=function(e,t,n){for(var r=this.element.ownerDocument.createDocumentFragment(),s=t,o=this.session.getNextFoldLine(s),u=o?o.start.row:1/0;s>u&&(s=o.end.row+1,o=this.session.getNextFoldLine(s,o),u=o?o.start.row:1/0),!(s>n);){var a=i.createElement("div"),f=[];if(this.$renderLine(f,s,!1,s==u?o:!1),a.innerHTML=f.join(""),this.$useLineGroups())a.className="ace_line_group",r.appendChild(a),a.style.height=e.lineHeight*this.session.getRowLength(s)+"px";else for(;a.firstChild;)r.appendChild(a.firstChild);s++}return r},this.update=function(e){this.config=e;for(var t=[],n=e.firstRow,r=e.lastRow,s=n,o=this.session.getNextFoldLine(s),u=o?o.start.row:1/0;s>u&&(s=o.end.row+1,o=this.session.getNextFoldLine(s,o),u=o?o.start.row:1/0),!(s>r);)this.$useLineGroups()&&t.push("<div class='ace_line_group' style='height:",e.lineHeight*this.session.getRowLength(s),"px'>"),this.$renderLine(t,s,!1,s==u?o:!1),this.$useLineGroups()&&t.push("</div>"),s++;this.element=i.setInnerHtml(this.element,t.join(""))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(e,t,n,r){var i=this,o=/\t|&|<|( +)|([\x00-\x1f\x80-\xa0\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]/g,u=function(e,n,r,o,u){if(n)return i.showInvisibles?"<span class='ace_invisible ace_invisible_space'>"+s.stringRepeat(i.SPACE_CHAR,e.length)+"</span>":s.stringRepeat(" ",e.length);if("&"==e)return"&#38;";if("<"==e)return"&#60;";if("	"==e){var a=i.session.getScreenTabSize(t+o);return t+=a-1,i.$tabStrings[a]}if("　"==e){var f=i.showInvisibles?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",l=i.showInvisibles?i.SPACE_CHAR:"";return t+=1,"<span class='"+f+"' style='width:"+2*i.config.characterWidth+"px'>"+l+"</span>"}return r?"<span class='ace_invisible ace_invisible_space ace_invalid'>"+i.SPACE_CHAR+"</span>":(t+=1,"<span class='ace_cjk' style='width:"+2*i.config.characterWidth+"px'>"+e+"</span>")},a=r.replace(o,u);if(this.$textToken[n.type])e.push(a);else{var f="ace_"+n.type.replace(/\./g," ace_"),l="";"fold"==n.type&&(l=" style='width:"+n.value.length*this.config.characterWidth+"px;' "),e.push("<span class='",f,"'",l,">",a,"</span>")}return t+r.length},this.renderIndentGuide=function(e,t,n){var r=t.search(this.$indentGuideRe);return 0>=r||r>=n?t:" "==t[0]?(r-=r%this.tabSize,e.push(s.stringRepeat(this.$tabStrings[" "],r/this.tabSize)),t.substr(r)):"	"==t[0]?(e.push(s.stringRepeat(this.$tabStrings["	"],r)),t.substr(r)):t},this.$renderWrappedLine=function(e,t,n,r){for(var i=0,s=0,o=n[0],u=0,a=0;a<t.length;a++){var f=t[a],l=f.value;if(0==a&&this.displayIndentGuides){if(i=l.length,l=this.renderIndentGuide(e,l,o),!l)continue;i-=l.length}if(i+l.length<o)u=this.$renderToken(e,u,f,l),i+=l.length;else{for(;i+l.length>=o;)u=this.$renderToken(e,u,f,l.substring(0,o-i)),l=l.substring(o-i),i=o,r||e.push("</div>","<div class='ace_line' style='height:",this.config.lineHeight,"px'>"),s++,u=0,o=n[s]||Number.MAX_VALUE;0!=l.length&&(i+=l.length,u=this.$renderToken(e,u,f,l))}}},this.$renderSimpleLine=function(e,t){var n=0,r=t[0],i=r.value;this.displayIndentGuides&&(i=this.renderIndentGuide(e,i)),i&&(n=this.$renderToken(e,n,r,i));for(var s=1;s<t.length;s++)r=t[s],i=r.value,n=this.$renderToken(e,n,r,i)},this.$renderLine=function(e,t,n,r){if(!r&&0!=r&&(r=this.session.getFoldLine(t)),r)var i=this.$getFoldLineTokens(t,r);else var i=this.session.getTokens(t);if(n||e.push("<div class='ace_line' style='height:",this.config.lineHeight*(this.$useLineGroups()?1:this.session.getRowLength(t)),"px'>"),i.length){var s=this.session.getRowSplitData(t);s&&s.length?this.$renderWrappedLine(e,i,s,n):this.$renderSimpleLine(e,i)}this.showInvisibles&&(r&&(t=r.end.row),e.push("<span class='ace_invisible ace_invisible_eol'>",t==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,"</span>")),n||e.push("</div>")},this.$getFoldLineTokens=function(e,t){function i(e,t,n){for(var i=0,s=0;s+e[i].value.length<t;)if(s+=e[i].value.length,i++,i==e.length)return;if(s!=t){var o=e[i].value.substring(t-s);o.length>n-t&&(o=o.substring(0,n-t)),r.push({type:e[i].type,value:o}),s=t+o.length,i+=1}for(;n>s&&i<e.length;){var o=e[i].value;o.length+s>n?r.push({type:e[i].type,value:o.substring(0,n-s)}):r.push(e[i]),s+=o.length,i+=1}}var n=this.session,r=[],s=n.getTokens(e);return t.walk(function(e,t,o,u,a){null!=e?r.push({type:"fold",value:e}):(a&&(s=n.getTokens(t)),s.length&&i(s,u,o))},t.end.row,this.session.getLine(t.end.row).length),r},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$measureNode&&this.$measureNode.parentNode.removeChild(this.$measureNode),delete this.$measureNode}}).call(a.prototype),t.Text=a}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,n){var i,r=e("../lib/dom"),s=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_cursor-layer",e.appendChild(this.element),void 0===i&&(i="opacity"in this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),r.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateVisibility.bind(this)};(function(){this.$updateVisibility=function(e){for(var t=this.cursors,n=t.length;n--;)t[n].style.visibility=e?"":"hidden"},this.$updateOpacity=function(e){for(var t=this.cursors,n=t.length;n--;)t[n].style.opacity=e?"":"0"},this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setBlinking=function(e){e!=this.isBlinking&&(this.isBlinking=e,this.restartTimer())},this.setBlinkInterval=function(e){e!=this.blinkInterval&&(this.blinkInterval=e,this.restartTimer())},this.setSmoothBlinking=function(e){e!=this.smoothBlinking&&!i&&(this.smoothBlinking=e,r.setCssClass(this.element,"ace_smooth-blinking",e),this.$updateCursors(!0),this.$updateCursors=(e?this.$updateOpacity:this.$updateVisibility).bind(this),this.restartTimer())},this.addCursor=function(){var e=r.createElement("div");return e.className="ace_cursor",this.element.appendChild(e),this.cursors.push(e),e},this.removeCursor=function(){if(this.cursors.length>1){var e=this.cursors.pop();return e.parentNode.removeChild(e),e}},this.hideCursor=function(){this.isVisible=!1,r.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,r.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var e=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.smoothBlinking&&r.removeCssClass(this.element,"ace_smooth-blinking"),e(!0),this.isBlinking&&this.blinkInterval&&this.isVisible){this.smoothBlinking&&setTimeout(function(){r.addCssClass(this.element,"ace_smooth-blinking")}.bind(this));var t=function(){this.timeoutId=setTimeout(function(){e(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){e(!0),t()},this.blinkInterval),t()}},this.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0};e||(e=this.session.selection.getCursor());var n=this.session.documentToScreenPosition(e),r=this.$padding+n.column*this.config.characterWidth,i=(n.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:r,top:i}},this.update=function(e){this.config=e;var t=this.session.$selectionMarkers,n=0,r=0;(void 0===t||0===t.length)&&(t=[{cursor:null}]);for(var n=0,i=t.length;i>n;n++){var s=this.getPixelPosition(t[n].cursor,!0);if(!((s.top>e.height+e.offset||s.top<0)&&n>1)){var o=(this.cursors[r++]||this.addCursor()).style;o.left=s.left+"px",o.top=s.top+"px",o.width=e.characterWidth+"px",o.height=e.lineHeight+"px"}}for(;this.cursors.length>r;)this.removeCursor();var u=this.session.getOverwrite();this.$setOverwrite(u),this.$pixelPos=s,this.restartTimer()},this.$setOverwrite=function(e){e!=this.overwrite&&(this.overwrite=e,e?r.addCssClass(this.element,"ace_overwrite-cursors"):r.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(s.prototype),t.Cursor=s}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){var r=e("./lib/oop"),i=e("./lib/dom"),s=e("./lib/event"),o=e("./lib/event_emitter").EventEmitter,u=function(e){this.element=i.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=i.createElement("div"),this.inner.className="ace_scrollbar-inner",this.element.appendChild(this.inner),e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,s.addListener(this.element,"scroll",this.onScroll.bind(this)),s.addListener(this.element,"mousedown",s.preventDefault)};(function(){r.implement(this,o),this.setVisible=function(e){this.element.style.display=e?"":"none",this.isVisible=e}}).call(u.prototype);var a=function(e,t){u.call(this,e),this.scrollTop=0,t.$scrollbarWidth=this.width=i.scrollbarWidth(e.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px"};r.inherits(a,u),function(){this.classSuffix="-v",this.onScroll=function(){this.skipEvent||(this.scrollTop=this.element.scrollTop,this._emit("scroll",{data:this.scrollTop})),this.skipEvent=!1},this.getWidth=function(){return this.isVisible?this.width:0},this.setHeight=function(e){this.element.style.height=e+"px"},this.setInnerHeight=function(e){this.inner.style.height=e+"px"},this.setScrollHeight=function(e){this.inner.style.height=e+"px"},this.setScrollTop=function(e){this.scrollTop!=e&&(this.skipEvent=!0,this.scrollTop=this.element.scrollTop=e)}}.call(a.prototype);var f=function(e,t){u.call(this,e),this.scrollLeft=0,this.height=t.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};r.inherits(f,u),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(e){this.element.style.width=e+"px"},this.setInnerWidth=function(e){this.inner.style.width=e+"px"},this.setScrollWidth=function(e){this.inner.style.width=e+"px"},this.setScrollLeft=function(e){this.scrollLeft!=e&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=e)}}.call(f.prototype),t.ScrollBar=a,t.ScrollBarV=a,t.ScrollBarH=f,t.VScrollBar=a,t.HScrollBar=f}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,n){var r=e("./lib/event"),i=function(e,t){this.onRender=e,this.pending=!1,this.changes=0,this.window=t||window};(function(){this.schedule=function(e){if(this.changes=this.changes|e,!this.pending&&this.changes){this.pending=!0;var t=this;r.nextFrame(function(){t.pending=!1;for(var e;e=t.changes;)t.changes=0,t.onRender(e)},this.window)}}}).call(i.prototype),t.RenderLoop=i}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event_emitter"],function(e,t,n){var r=e("../lib/oop"),i=e("../lib/dom"),s=e("../lib/lang"),o=e("../lib/event_emitter").EventEmitter,u=0,a=t.FontMetrics=function(e,t){this.el=i.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=i.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=i.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),e.appendChild(this.el),u||this.$testFractionalRect(),this.$measureNode.innerHTML=s.stringRepeat("X",u),this.$characterSize={width:0,height:0},this.checkForSizeChanges()};(function(){r.implement(this,o),this.$characterSize={width:0,height:0},this.$testFractionalRect=function(){var e=i.createElement("div");this.$setMeasureNodeStyles(e.style),e.style.width="0.2px",document.documentElement.appendChild(e);var t=e.getBoundingClientRect().width;u=t>0&&1>t?1:100,e.parentNode.removeChild(e)},this.$setMeasureNodeStyles=function(e,t){e.width=e.height="auto",e.left=e.top="-100px",e.visibility="hidden",e.position="fixed",e.whiteSpace="pre",e.font="inherit",e.overflow=t?"hidden":"visible"},this.checkForSizeChanges=function(){var e=this.$measureSizes();if(e&&(this.$characterSize.width!==e.width||this.$characterSize.height!==e.height)){this.$measureNode.style.fontWeight="bold";var t=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=e,this.charSizes=Object.create(null),this.allowBoldFonts=t&&t.width===e.width&&t.height===e.height,this._emit("changeCharacterSize",{data:e})}},this.$pollSizeChanges=function(){
if(this.$pollSizeChangesTimer)return this.$pollSizeChangesTimer;var e=this;return this.$pollSizeChangesTimer=setInterval(function(){e.checkForSizeChanges()},500)},this.setPolling=function(e){e?this.$pollSizeChanges():this.$pollSizeChangesTimer&&this.$pollSizeChangesTimer},this.$measureSizes=function(){if(1===u)var e=this.$measureNode.getBoundingClientRect(),t={height:e.height,width:e.width};else var t={height:this.$measureNode.clientHeight,width:this.$measureNode.clientWidth/u};return 0===t.width||0===t.height?null:t},this.$measureCharWidth=function(e){this.$main.innerHTML=s.stringRepeat(e,u);var t=this.$main.getBoundingClientRect();return t.width/u},this.getCharacterWidth=function(e){var t=this.charSizes[e];return void 0===t&&(this.charSizes[e]=this.$measureCharWidth(e)/this.$characterSize.width),t},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)}}).call(a.prototype)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t,n){function h(e,t,n){return c.$options.wrap=!0,c.$options.needle=t,c.$options.backwards=-1==n,c.find(e)}function v(e,t){return e.row==t.row&&e.column==t.column}function m(e){e.$multiselectOnSessionChange||(e.$onAddRange=e.$onAddRange.bind(e),e.$onRemoveRange=e.$onRemoveRange.bind(e),e.$onMultiSelect=e.$onMultiSelect.bind(e),e.$onSingleSelect=e.$onSingleSelect.bind(e),e.$multiselectOnSessionChange=t.onSessionChange.bind(e),e.$multiselectOnSessionChange(e),e.on("changeSession",e.$multiselectOnSessionChange),e.on("mousedown",o),e.commands.addCommands(f.defaultCommands),g(e))}function g(e){function r(t){n&&(e.renderer.setMouseCursor(""),n=!1)}var t=e.textInput.getElement(),n=!1;u.addListener(t,"keydown",function(t){18!=t.keyCode||t.ctrlKey||t.shiftKey||t.metaKey?n&&r():n||(e.renderer.setMouseCursor("crosshair"),n=!0)}),u.addListener(t,"keyup",r),u.addListener(t,"blur",r)}var r=e("./range_list").RangeList,i=e("./range").Range,s=e("./selection").Selection,o=e("./mouse/multi_select_handler").onMouseDown,u=e("./lib/event"),a=e("./lib/lang"),f=e("./commands/multi_select_commands");t.commands=f.defaultCommands.concat(f.multiSelectCommands);var l=e("./search").Search,c=new l,p=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(p.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(e,t){if(e){if(!this.inMultiSelectMode&&0==this.rangeCount){var n=this.toOrientedRange();if(this.rangeList.add(n),this.rangeList.add(e),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),t||this.fromOrientedRange(e);this.rangeList.removeAll(),this.rangeList.add(n),this.$onAddRange(n)}e.cursor||(e.cursor=e.end);var r=this.rangeList.add(e);return this.$onAddRange(e),r.length&&this.$onRemoveRange(r),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),t||this.fromOrientedRange(e)}},this.toSingleRange=function(e){e=e||this.ranges[0];var t=this.rangeList.removeAll();t.length&&this.$onRemoveRange(t),e&&this.fromOrientedRange(e)},this.substractPoint=function(e){var t=this.rangeList.substractPoint(e);return t?(this.$onRemoveRange(t),t[0]):void 0},this.mergeOverlappingRanges=function(){var e=this.rangeList.merge();e.length?this.$onRemoveRange(e):this.ranges[0]&&this.fromOrientedRange(this.ranges[0])},this.$onAddRange=function(e){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(e),this._signal("addRange",{range:e})},this.$onRemoveRange=function(e){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var t=this.rangeList.ranges.pop();e.push(t),this.rangeCount=0}for(var n=e.length;n--;){var r=this.ranges.indexOf(e[n]);this.ranges.splice(r,1)}this._signal("removeRange",{ranges:e}),0==this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),t=t||this.ranges[0],t&&!t.isEqual(this.getRange())&&this.fromOrientedRange(t)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new r,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=i.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{var n=this.getRange(),r=this.isBackwards(),s=n.start.row,o=n.end.row;if(s==o){if(r)var u=n.end,a=n.start;else var u=n.start,a=n.end;return this.addRange(i.fromPoints(a,a)),void this.addRange(i.fromPoints(u,u))}var f=[],l=this.getLineRange(s,!0);l.start.column=n.start.column,f.push(l);for(var c=s+1;o>c;c++)f.push(this.getLineRange(c,!0));l=this.getLineRange(o,!0),l.end.column=n.end.column,f.push(l),f.forEach(this.addRange,this)}},this.toggleBlockSelection=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=i.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{var r=this.session.documentToScreenPosition(this.selectionLead),s=this.session.documentToScreenPosition(this.selectionAnchor),o=this.rectangularRangeBlock(r,s);o.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(e,t,n){var r=[],s=e.column<t.column;if(s)var o=e.column,u=t.column;else var o=t.column,u=e.column;var a=e.row<t.row;if(a)var f=e.row,l=t.row;else var f=t.row,l=e.row;0>o&&(o=0),0>f&&(f=0),f==l&&(n=!0);for(var c=f;l>=c;c++){var h=i.fromPoints(this.session.screenToDocumentPosition(c,o),this.session.screenToDocumentPosition(c,u));if(h.isEmpty()){if(p&&v(h.end,p))break;var p=h.end}h.cursor=s?h.start:h.end,r.push(h)}if(a&&r.reverse(),!n){for(var d=r.length-1;r[d].isEmpty()&&d>0;)d--;if(d>0)for(var m=0;r[m].isEmpty();)m++;for(var g=d;g>=m;g--)r[g].isEmpty()&&r.splice(g,1)}return r}}.call(s.prototype);var d=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(e){e.cursor||(e.cursor=e.end);var t=this.getSelectionStyle();return e.marker=this.session.addMarker(e,"ace_selection",t),this.session.$selectionMarkers.push(e),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,e},this.removeSelectionMarker=function(e){if(e.marker){this.session.removeMarker(e.marker);var t=this.session.$selectionMarkers.indexOf(e);-1!=t&&this.session.$selectionMarkers.splice(t,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(e){for(var t=this.session.$selectionMarkers,n=e.length;n--;){var r=e[n];if(r.marker){this.session.removeMarker(r.marker);var i=t.indexOf(r);-1!=i&&t.splice(i,1)}}this.session.selectionMarkerCount=t.length},this.$onAddRange=function(e){this.addSelectionMarker(e.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(e){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(f.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(e){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(f.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(e){var t=e.command,n=e.editor;if(n.multiSelect){if(t.multiSelectAction)"forEach"==t.multiSelectAction?r=n.forEachSelection(t,e.args):"forEachLine"==t.multiSelectAction?r=n.forEachSelection(t,e.args,!0):"single"==t.multiSelectAction?(n.exitMultiSelectMode(),r=t.exec(n,e.args||{})):r=t.multiSelectAction(n,e.args||{});else{var r=t.exec(n,e.args||{});n.multiSelect.addRange(n.multiSelect.toOrientedRange()),n.multiSelect.mergeOverlappingRanges()}return r}},this.forEachSelection=function(e,t,n){if(!this.inVirtualSelectionMode){var u,r=this.session,i=this.selection,o=i.rangeList,a=i._eventRegistry;i._eventRegistry={};var f=new s(r);this.inVirtualSelectionMode=!0;for(var l=o.ranges.length;l--;){if(n)for(;l>0&&o.ranges[l].start.row==o.ranges[l-1].end.row;)l--;f.fromOrientedRange(o.ranges[l]),f.id=o.ranges[l].marker,this.selection=r.selection=f;var c=e.exec(this,t||{});void 0!==u&&(u=c),f.toOrientedRange(o.ranges[l])}f.detach(),this.selection=r.selection=i,this.inVirtualSelectionMode=!1,i._eventRegistry=a,i.mergeOverlappingRanges();var h=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),h&&h.from==h.to&&this.renderer.animateScrolling(h.from),u}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var e="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var t=this.multiSelect.rangeList.ranges,n=[],r=0;r<t.length;r++)n.push(this.session.getTextRange(t[r]));var i=this.session.getDocument().getNewLineCharacter();e=n.join(i),e.length==(n.length-1)*i.length&&(e="")}else this.selection.isEmpty()||(e=this.session.getTextRange(this.getSelectionRange()));return e},this.onPaste=function(e){if(!this.$readOnly){var t={text:e};if(this._signal("paste",t),e=t.text,!this.inMultiSelectMode||this.inVirtualSelectionMode)return this.insert(e);var n=e.split(/\r\n|\r|\n/),r=this.selection.rangeList.ranges;if(n.length>r.length||n.length<2||!n[1])return this.commands.exec("insertstring",this,e);for(var i=r.length;i--;){var s=r[i];s.isEmpty()||this.session.remove(s),this.session.insert(s.start,n[i])}}},this.findAll=function(e,t,n){t=t||{},t.needle=e||t.needle,this.$search.set(t);var r=this.$search.findAll(this.session);if(!r.length)return 0;this.$blockScrolling+=1;var i=this.multiSelect;n||i.toSingleRange(r[0]);for(var s=r.length;s--;)i.addRange(r[s],!0);return this.$blockScrolling-=1,r.length},this.selectMoreLines=function(e,t){var n=this.selection.toOrientedRange(),r=n.cursor==n.end,s=this.session.documentToScreenPosition(n.cursor);this.selection.$desiredColumn&&(s.column=this.selection.$desiredColumn);var o=this.session.screenToDocumentPosition(s.row+e,s.column);if(n.isEmpty())var a=o;else var u=this.session.documentToScreenPosition(r?n.end:n.start),a=this.session.screenToDocumentPosition(u.row+e,u.column);if(r){var f=i.fromPoints(o,a);f.cursor=f.start}else{var f=i.fromPoints(a,o);f.cursor=f.end}if(f.desiredColumn=s.column,this.selection.inMultiSelectMode){if(t)var l=n.cursor}else this.selection.addRange(n);this.selection.addRange(f),l&&this.selection.substractPoint(l)},this.transposeSelections=function(e){for(var t=this.session,n=t.multiSelect,r=n.ranges,i=r.length;i--;){var s=r[i];if(s.isEmpty()){var o=t.getWordRange(s.start.row,s.start.column);s.start.row=o.start.row,s.start.column=o.start.column,s.end.row=o.end.row,s.end.column=o.end.column}}n.mergeOverlappingRanges();for(var u=[],i=r.length;i--;){var s=r[i];u.unshift(t.getTextRange(s))}0>e?u.unshift(u.pop()):u.push(u.shift());for(var i=r.length;i--;){var s=r[i],o=s.clone();t.replace(s,u[i]),s.start.row=o.start.row,s.start.column=o.start.column}},this.selectMore=function(e,t){var n=this.session,r=n.multiSelect,i=r.toOrientedRange();i.isEmpty()&&(i=n.getWordRange(i.start.row,i.start.column),i.cursor=-1==e?i.start:i.end,this.multiSelect.addRange(i));var s=n.getTextRange(i),o=h(n,s,e);o&&(o.cursor=-1==e?o.start:o.end,this.$blockScrolling+=1,this.session.unfold(o),this.multiSelect.addRange(o),this.$blockScrolling-=1,this.renderer.scrollCursorIntoView(null,.5)),t&&this.multiSelect.substractPoint(i.cursor)},this.alignCursors=function(){var e=this.session,t=e.multiSelect,n=t.ranges;if(n.length){var h=-1,p=n.filter(function(e){return e.cursor.row==h?!0:void(h=e.cursor.row)});t.$onRemoveRange(p);var d=0,v=1/0,m=n.map(function(t){var n=t.cursor,r=e.getLine(n.row),i=r.substr(n.column).search(/\S/g);return-1==i&&(i=0),n.column>d&&(d=n.column),v>i&&(v=i),i});n.forEach(function(t,n){var r=t.cursor,s=d-r.column,o=m[n]-v;s>o?e.insert(r,a.stringRepeat(" ",s-o)):e.remove(new i(r.row,r.column,r.row,r.column-s+o)),t.start.column=t.end.column=d,t.start.row=t.end.row=r.row,t.cursor=t.end}),t.fromOrientedRange(n[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var r=this.selection.getRange(),s=r.start.row,o=r.end.row,u=s==o;if(u){var l,f=this.session.getLength();do l=this.session.getLine(o);while(/[=:]/.test(l)&&++o<f);do l=this.session.getLine(s);while(/[=:]/.test(l)&&--s>0);0>s&&(s=0),o>=f&&(o=f-1)}var c=this.session.doc.removeLines(s,o);c=this.$reAlignText(c,u),this.session.doc.insert({row:s,column:0},c.join("\n")+"\n"),u||(r.start.column=0,r.end.column=c[c.length-1].length),this.selection.setRange(r)}},this.$reAlignText=function(e,t){function u(e){return a.stringRepeat(" ",e)}function f(e){return e[2]?u(i)+e[2]+u(s-e[2].length+o)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}function l(e){return e[2]?u(i+s-e[2].length)+e[2]+u(o," ")+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}function c(e){return e[2]?u(i)+e[2]+u(o)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}var i,s,o,n=!0,r=!0;return e.map(function(e){var t=e.match(/(\s*)(.*?)(\s*)([=:].*)/);return t?null==i?(i=t[1].length,s=t[2].length,o=t[3].length,t):(i+s+o!=t[1].length+t[2].length+t[3].length&&(r=!1),i!=t[1].length&&(n=!1),i>t[1].length&&(i=t[1].length),s<t[2].length&&(s=t[2].length),o>t[3].length&&(o=t[3].length),t):[e]}).map(t?f:n?r?l:f:c)}}).call(d.prototype),t.onSessionChange=function(e){var t=e.session;t.multiSelect||(t.$selectionMarkers=[],t.selection.$initRangeList(),t.multiSelect=t.selection),this.multiSelect=t.multiSelect;var n=e.oldSession;n&&(n.multiSelect.removeEventListener("addRange",this.$onAddRange),n.multiSelect.removeEventListener("removeRange",this.$onRemoveRange),n.multiSelect.removeEventListener("multiSelect",this.$onMultiSelect),n.multiSelect.removeEventListener("singleSelect",this.$onSingleSelect)),t.multiSelect.on("addRange",this.$onAddRange),t.multiSelect.on("removeRange",this.$onRemoveRange),t.multiSelect.on("multiSelect",this.$onMultiSelect),t.multiSelect.on("singleSelect",this.$onSingleSelect),this.inMultiSelectMode!=t.selection.inMultiSelectMode&&(t.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},t.MultiSelect=m,e("./config").defineOptions(d.prototype,"editor",{enableMultiselect:{set:function(e){m(this),e?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",o)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",o))},value:!0}})}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event"],function(e,t,n){function i(e,t){return e.row==t.row&&e.column==t.column}function s(e){var t=e.domEvent,n=t.altKey,s=t.shiftKey,o=e.getAccelKey(),u=e.getButton();if(e.editor.inMultiSelectMode&&2==u)return void e.editor.textInput.onContextMenu(e.domEvent);if(!o&&!n)return void(0===u&&e.editor.inMultiSelectMode&&e.editor.exitMultiSelectMode());var a=e.editor,f=a.selection,l=a.inMultiSelectMode,c=e.getDocumentPosition(),h=f.getCursor(),p=e.inSelection()||f.isEmpty()&&i(c,h),d=e.x,v=e.y,m=function(e){d=e.clientX,v=e.clientY},g=function(){var e=a.renderer.pixelToScreenCoordinates(d,v),t=y.screenToDocumentPosition(e.row,e.column);i(w,e)&&i(t,f.selectionLead)||(w=e,a.selection.moveToPosition(t),a.renderer.scrollCursorIntoView(),a.removeSelectionMarkers(x),x=f.rectangularRangeBlock(w,b),x.forEach(a.addSelectionMarker,a),a.updateSelectionMarkers())},y=a.session,b=a.renderer.pixelToScreenCoordinates(d,v),w=b;if(!o||n||s||0!==u){if(n&&0===u){e.stop(),l&&!o?f.toSingleRange():!l&&o&&f.addRange();var x=[];s?(b=y.documentToScreenPosition(f.lead),g()):f.moveToPosition(c);var T=function(e){clearInterval(C),a.removeSelectionMarkers(x);for(var t=0;t<x.length;t++)f.addRange(x[t])},N=g;r.capture(a.container,m,T);var C=setInterval(function(){N()},20);return e.preventDefault()}}else{if(!l&&p)return;if(!l){var E=f.toOrientedRange();a.addSelectionMarker(E)}var S=f.rangeList.rangeAtPoint(c);a.$blockScrolling++,a.once("mouseup",function(){var e=f.toOrientedRange();S&&e.isEmpty()&&i(S.cursor,e.cursor)?f.substractPoint(e.cursor):(E&&(a.removeSelectionMarker(E),f.addRange(E)),f.addRange(e)),a.$blockScrolling--})}}var r=e("../lib/event");t.onMouseDown=s}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},readonly:!0},{name:"addCursorBelow",exec:function(e){e.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},readonly:!0},{name:"addCursorAboveSkipCurrent",exec:function(e){e.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},readonly:!0},{name:"addCursorBelowSkipCurrent",exec:function(e){e.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},readonly:!0},{name:"selectMoreBefore",exec:function(e){e.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},readonly:!0},{name:"selectMoreAfter",exec:function(e){e.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},readonly:!0},{name:"selectNextBefore",exec:function(e){e.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},readonly:!0},{name:"selectNextAfter",exec:function(e){e.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},readonly:!0},{name:"splitIntoLines",exec:function(e){e.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readonly:!0},{name:"alignCursors",exec:function(e){e.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"}}],t.multiSelectCommands=[{name:"singleSelection",bindKey:"esc",exec:function(e){e.exitMultiSelectMode()},readonly:!0,isAvailable:function(e){return e&&e.inMultiSelectMode}}];var r=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new r(t.multiSelectCommands)}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(e,t,n){var r=e("../lib/oop"),i=e("../lib/net"),s=e("../lib/event_emitter").EventEmitter,o=e("../config"),u=function(t,n,r,i){if(this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),o.get("packaged")||!e.toUrl)i=i||o.moduleUrl(n,"worker");else{var s=this.$normalizePath;i=i||s(e.toUrl("ace/worker/worker.js",null,"_"));var u={};t.forEach(function(t){u[t]=s(e.toUrl(t,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}try{this.$worker=new Worker(i)}catch(a){if(!(a instanceof window.DOMException))throw a;var f=this.$workerBlob(i),l=window.URL||window.webkitURL,c=l.createObjectURL(f);this.$worker=new Worker(c),l.revokeObjectURL(c)}this.$worker.postMessage({init:!0,tlns:u,module:n,classname:r}),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){r.implement(this,s),this.onMessage=function(e){var t=e.data;switch(t.type){case"log":window.console&&console.log&&console.log.apply(console,t.data);break;case"event":this._signal(t.name,{data:t.data});break;case"call":var n=this.callbacks[t.id];n&&(n(t.data),delete this.callbacks[t.id])}},this.$normalizePath=function(e){return location.host?(e=e.replace(/^[a-z]+:\/\/[^\/]+/,""),e=location.protocol+"//"+location.host+("/"==e.charAt(0)?"":location.pathname.replace(/\/[^\/]*$/,""))+"/"+e.replace(/^[\/]+/,"")):e},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc.removeEventListener("change",this.changeListener),this.$doc=null},this.send=function(e,t){this.$worker.postMessage({command:e,args:t})},this.call=function(e,t,n){if(n){var r=this.callbackId++;this.callbacks[r]=n,t.push(r)}this.send(e,t)},this.emit=function(e,t){try{this.$worker.postMessage({event:e,data:{data:t.data}})}catch(n){}},this.attachToDocument=function(e){this.$doc&&this.terminate(),this.$doc=e,this.call("setValue",[e.getValue()]),e.on("change",this.changeListener)},this.changeListener=function(e){this.deltaQueue?this.deltaQueue.push(e.data):(this.deltaQueue=[e.data],setTimeout(this.$sendDeltaQueue,0))},this.$sendDeltaQueue=function(){var e=this.deltaQueue;e&&(this.deltaQueue=null,e.length>20&&e.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:e}))},this.$workerBlob=function(e){var t="importScripts('"+i.qualifyURL(e)+"');";try{return new Blob([t],{type:"application/javascript"})}catch(n){var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,s=new r;return s.append(t),s.getBlob("application/javascript")}}}).call(u.prototype);var a=function(e,t,n){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.callbackId=1,this.callbacks={},this.messageBuffer=[];var r=null,i=!1,u=Object.create(s),a=this;this.$worker={},this.$worker.terminate=function(){},this.$worker.postMessage=function(e){a.messageBuffer.push(e),r&&(i?setTimeout(f):f())},this.setEmitSync=function(e){i=e};var f=function(){var e=a.messageBuffer.shift();e.command?r[e.command].apply(r,e.args):e.event&&u._signal(e.event,e.data)};u.postMessage=function(e){a.onMessage({data:e})},u.callback=function(e,t){this.postMessage({type:"call",id:t,data:e})},u.emit=function(e,t){this.postMessage({type:"event",name:e,data:t})},o.loadModule(["worker",t],function(e){for(r=new e[n](u);a.messageBuffer.length;)f()})};a.prototype=u.prototype,t.UIWorkerClient=a,t.WorkerClient=u}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,n){var r=e("./range").Range,i=e("./lib/event_emitter").EventEmitter,s=e("./lib/oop"),o=function(e,t,n,r,i,s){var o=this;this.length=t,this.session=e,this.doc=e.getDocument(),this.mainClass=i,this.othersClass=s,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=r,this.$onCursorChange=function(){setTimeout(function(){o.onCursorChange()})},this.$pos=n;var u=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=u.length,this.setup(),e.selection.on("changeCursor",this.$onCursorChange)};(function(){s.implement(this,i),this.setup=function(){var e=this,t=this.doc,n=this.session,i=this.$pos;this.pos=t.createAnchor(i.row,i.column),this.markerId=n.addMarker(new r(i.row,i.column,i.row,i.column+this.length),this.mainClass,null,!1),this.pos.on("change",function(t){n.removeMarker(e.markerId),e.markerId=n.addMarker(new r(t.value.row,t.value.column,t.value.row,t.value.column+e.length),e.mainClass,null,!1)}),this.others=[],this.$others.forEach(function(n){var r=t.createAnchor(n.row,n.column);e.others.push(r)}),n.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var e=this.session,t=this;this.othersActive=!0,this.others.forEach(function(n){n.markerId=e.addMarker(new r(n.row,n.column,n.row,n.column+t.length),t.othersClass,null,!1),n.on("change",function(i){e.removeMarker(n.markerId),n.markerId=e.addMarker(new r(i.value.row,i.value.column,i.value.row,i.value.column+t.length),t.othersClass,null,!1)})})}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var e=0;e<this.others.length;e++)this.session.removeMarker(this.others[e].markerId)}},this.onUpdate=function(e){var t=e.data,n=t.range;if(n.start.row===n.end.row&&n.start.row===this.pos.row&&!this.$updating){this.$updating=!0;var i="insertText"===t.action?n.end.column-n.start.column:n.start.column-n.end.column;if(n.start.column>=this.pos.column&&n.start.column<=this.pos.column+this.length+1){var s=n.start.column-this.pos.column;if(this.length+=i,!this.session.$fromUndo){if("insertText"===t.action)for(var o=this.others.length-1;o>=0;o--){var u=this.others[o],a={row:u.row,column:u.column+s};u.row===n.start.row&&n.start.column<u.column&&(a.column+=i),this.doc.insert(a,t.text)}else if("removeText"===t.action)for(var o=this.others.length-1;o>=0;o--){var u=this.others[o],a={row:u.row,column:u.column+s};u.row===n.start.row&&n.start.column<u.column&&(a.column+=i),this.doc.remove(new r(a.row,a.column,a.row,a.column-i))}n.start.column===this.pos.column&&"insertText"===t.action?setTimeout(function(){this.pos.setPosition(this.pos.row,this.pos.column-i);for(var e=0;e<this.others.length;e++){var t=this.others[e],r={row:t.row,column:t.column-i};t.row===n.start.row&&n.start.column<t.column&&(r.column+=i),t.setPosition(r.row,r.column)}}.bind(this),0):n.start.column===this.pos.column&&"removeText"===t.action&&setTimeout(function(){for(var e=0;e<this.others.length;e++){var t=this.others[e];t.row===n.start.row&&n.start.column<t.column&&t.setPosition(t.row,t.column-i)}}.bind(this),0)}this.pos._emit("change",{value:this.pos});for(var o=0;o<this.others.length;o++)this.others[o]._emit("change",{value:this.others[o]})}this.$updating=!1}},this.onCursorChange=function(e){if(!this.$updating){var t=this.session.selection.getCursor();t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",e)):(this.hideOtherMarkers(),this._emit("cursorLeave",e))}},this.detach=function(){this.session.removeMarker(this.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.pos.detach();for(var e=0;e<this.others.length;e++)this.others[e].detach();this.session.setUndoSelect(!0)},this.cancel=function(){if(-1===this.$undoStackDepth)throw Error("Canceling placeholders only supported with undo manager attached to session.");for(var e=this.session.getUndoManager(),t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth,n=0;t>n;n++)e.undo(!0)}}).call(o.prototype),t.PlaceHolder=o}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,n){var r=e("../../range").Range,i=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(e,t,n){var r=e.getLine(n);return this.foldingStartMarker.test(r)?"start":"markbeginend"==t&&this.foldingStopMarker&&this.foldingStopMarker.test(r)?"end":""},this.getFoldWidgetRange=function(e,t,n){return null},this.indentationBlock=function(e,t,n){var i=/\S/,s=e.getLine(t),o=s.search(i);if(-1!=o){for(var u=n||s.length,a=e.getLength(),f=t,l=t;++t<a;){var c=e.getLine(t).search(i);if(-1!=c){if(o>=c)break;l=t}}if(l>f){var h=e.getLine(l).length;return new r(f,u,l,h)}}},this.openingBracketBlock=function(e,t,n,i,s){var o={row:n,column:i+1},u=e.$findClosingBracket(t,o,s);if(u){var a=e.foldWidgets[u.row];return null==a&&(a=e.getFoldWidget(u.row)),"start"==a&&u.row>o.row&&(u.row--,u.column=e.getLine(u.row).length),r.fromPoints(o,u)}},this.closingBracketBlock=function(e,t,n,i,s){var o={row:n,column:i},u=e.$findOpeningBracket(t,o);if(u)return u.column++,o.column--,r.fromPoints(u,o)}}).call(i.prototype)}),ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!1,t.cssClass="ace-tm",t.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;border-radius: 2px;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}';var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(e,t,n){function o(e,t,n){for(var r=0,i=e.length-1;i>=r;){var s=r+i>>1,o=n(t,e[s]);if(o>0)r=s+1;else{if(!(0>o))return s;i=s-1}}return-(r+1)}function u(e,t,n){var r=e.getAnnotations().sort(s.comparePoints);if(r.length){var i=o(r,{row:t,column:-1},s.comparePoints);0>i&&(i=-i-1),i>=r.length-1?i=n>0?0:r.length-1:0===i&&0>n&&(i=r.length-1);var u=r[i];if(u&&n){if(u.row===t){do u=r[i+=n];while(u&&u.row===t);if(!u)return r.slice()}var a=[];t=u.row;do a[0>n?"unshift":"push"](u),u=r[i+=n];while(u&&u.row==t);return a.length&&a}}}var r=e("ace/line_widgets").LineWidgets,i=e("ace/lib/dom"),s=e("ace/range").Range;t.showErrorMarker=function(e,t){var n=e.session;n.widgetManager||(n.widgetManager=new r(n),n.widgetManager.attach(e));var s=e.getCursorPosition(),o=s.row,a=n.lineWidgets&&n.lineWidgets[o];a?a.destroy():o-=t;var l,f=u(n,o,t);if(f){var c=f[0];s.column=(c.pos&&"number"!=typeof c.column?c.pos.sc:c.column)||0,s.row=c.row,l=e.renderer.$gutterLayer.$annotations[s.row]}else{if(a)return;l={text:["Looks good!"],className:"ace_ok"}}e.session.unfold(s.row),e.selection.moveToPosition(s);var h={row:s.row,fixedWidth:!0,coverGutter:!0,el:i.createElement("div")},p=h.el.appendChild(i.createElement("div")),d=h.el.appendChild(i.createElement("div"));d.className="error_widget_arrow "+l.className;var v=e.renderer.$cursorLayer.getPixelPosition(s).left;d.style.left=v+e.renderer.gutterWidth-5+"px",h.el.className="error_widget_wrapper",p.className="error_widget "+l.className,p.innerHTML=l.text.join("<br>"),p.appendChild(i.createElement("div"));var m=function(e,t,n){
return 0!==t||"esc"!==n&&"return"!==n?void 0:(h.destroy(),{command:"null"})};h.destroy=function(){e.$mouseHandler.isMousePressed||(e.keyBinding.removeKeyboardHandler(m),n.widgetManager.removeLineWidget(h),e.off("changeSelection",h.destroy),e.off("changeSession",h.destroy),e.off("mouseup",h.destroy),e.off("change",h.destroy))},e.keyBinding.addKeyboardHandler(m),e.on("changeSelection",h.destroy),e.on("changeSession",h.destroy),e.on("mouseup",h.destroy),e.on("change",h.destroy),e.session.widgetManager.addLineWidget(h),h.el.onmousedown=e.focus.bind(e),e.renderer.scrollCursorIntoView(null,.5,{bottom:h.el.offsetHeight})},i.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/range"],function(e,t,n){function o(e){this.session=e,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.detach=this.detach.bind(this),this.session.on("change",this.updateOnChange)}var i=(e("./lib/oop"),e("./lib/dom"));e("./range").Range;(function(){this.getRowLength=function(e){var t;return t=this.lineWidgets?this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0:0,this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1+t:1+t},this.$getWidgetScreenLength=function(){var e=0;return this.lineWidgets.forEach(function(t){t&&t.rowCount&&(e+=t.rowCount)}),e},this.attach=function(e){e.widgetManager&&e.widgetManager!=this&&e.widgetManager.detach(),this.editor!=e&&(this.detach(),this.editor=e,this.editor.on("changeSession",this.detach),e.widgetManager=this,e.setOption("enableLineWidgets",!0),e.renderer.on("beforeRender",this.measureWidgets),e.renderer.on("afterRender",this.renderWidgets))},this.detach=function(e){if(!e||e.session!=this.session){var t=this.editor;if(t){t.off("changeSession",this.detach),this.editor=null,t.widgetManager=null,t.renderer.off("beforeRender",this.measureWidgets),t.renderer.off("afterRender",this.renderWidgets);var n=this.session.lineWidgets;n&&n.forEach(function(e){e&&e.el&&e.el.parentNode&&(e._inDocument=!1,e.el.parentNode.removeChild(e.el))})}}},this.updateOnChange=function(e){var t=this.session.lineWidgets;if(t){var n=e.data,r=n.range,i=r.start.row,s=r.end.row-i;if(0!==s)if("removeText"==n.action||"removeLines"==n.action){var o=t.splice(i+1,s);o.forEach(function(e){e&&this.removeLineWidget(e)},this),this.$updateRows()}else{var u=new Array(s);u.unshift(i,0),t.splice.apply(t,u),this.$updateRows()}}},this.$updateRows=function(){var e=this.session.lineWidgets;if(e){var t=!0;e.forEach(function(e,n){e&&(t=!1,e.row=n)}),t&&(this.session.lineWidgets=null)}},this.addLineWidget=function(e){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength())),this.session.lineWidgets[e.row]=e;var t=this.editor.renderer;return e.html&&!e.el&&(e.el=i.createElement("div"),e.el.innerHTML=e.html),e.el&&(i.addCssClass(e.el,"ace_lineWidgetContainer"),e.el.style.position="absolute",e.el.style.zIndex=5,t.container.appendChild(e.el),e._inDocument=!0),e.coverGutter||(e.el.style.zIndex=3),e.pixelHeight||(e.pixelHeight=e.el.offsetHeight),null==e.rowCount&&(e.rowCount=e.pixelHeight/t.layerConfig.lineHeight),this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows(),this.renderWidgets(null,t),e},this.removeLineWidget=function(e){if(e._inDocument=!1,e.el&&e.el.parentNode&&e.el.parentNode.removeChild(e.el),e.editor&&e.editor.destroy)try{e.editor.destroy()}catch(t){}this.session.lineWidgets&&(this.session.lineWidgets[e.row]=void 0),this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows()},this.onWidgetChanged=function(e){this.session._changedWidgets.push(e),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(e,t){var n=this.session._changedWidgets,r=t.layerConfig;if(n&&n.length){for(var i=1/0,s=0;s<n.length;s++){var o=n[s];o._inDocument||(o._inDocument=!0,t.container.appendChild(o.el)),o.h=o.el.offsetHeight,o.fixedWidth||(o.w=o.el.offsetWidth,o.screenWidth=Math.ceil(o.w/r.characterWidth));var u=o.h/r.lineHeight;o.coverLine&&(u-=this.session.getRowLineCount(o.row),0>u&&(u=0)),o.rowCount!=u&&(o.rowCount=u,o.row<i&&(i=o.row))}i!=1/0&&(this.session._emit("changeFold",{data:{start:{row:i}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(e,t){var n=t.layerConfig,r=this.session.lineWidgets;if(r){for(var i=Math.min(this.firstRow,n.firstRow),s=Math.max(this.lastRow,n.lastRow,r.length);i>0&&!r[i];)i--;this.firstRow=n.firstRow,this.lastRow=n.lastRow,t.$cursorLayer.config=n;for(var o=i;s>=o;o++){var u=r[o];if(u&&u.el){u._inDocument||(u._inDocument=!0,t.container.appendChild(u.el));var a=t.$cursorLayer.getPixelPosition({row:o,column:0},!0).top;u.coverLine||(a+=n.lineHeight*this.session.getRowLineCount(u.row)),u.el.style.top=a-n.offset+"px";var f=u.coverGutter?0:t.gutterWidth;u.fixedWidth||(f-=t.scrollLeft),u.el.style.left=f+"px",u.fixedWidth?u.el.style.right=t.scrollBar.getWidth()+"px":u.el.style.right=""}}}}}).call(o.prototype),t.LineWidgets=o}),function(){ace.require(["ace/ace"],function(a){a&&a.config.init(),window.ace||(window.ace={});for(var key in a)a.hasOwnProperty(key)&&(ace[key]=a[key])})}(),ace.define("ace/mode/javascript",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/javascript_highlight_rules","ace/mode/matching_brace_outdent","ace/range","ace/worker/worker_client","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(e,t,n){var r=e("../lib/oop"),i=e("./text").Mode,s=e("./javascript_highlight_rules").JavaScriptHighlightRules,o=e("./matching_brace_outdent").MatchingBraceOutdent,a=(e("../range").Range,e("../worker/worker_client").WorkerClient),f=e("./behaviour/cstyle").CstyleBehaviour,l=e("./folding/cstyle").FoldMode,c=function(){this.HighlightRules=s,this.$outdent=new o,this.$behaviour=new f,this.foldingRules=new l};r.inherits(c,i),function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.getNextLineIndent=function(e,t,n){var r=this.$getIndent(t),i=this.getTokenizer().getLineTokens(t,e),s=i.tokens,o=i.state;if(s.length&&"comment"==s[s.length-1].type)return r;if("start"==e||"no_regex"==e){var u=t.match(/^.*(?:\bcase\b.*\:|[\{\(\[])\s*$/);u&&(r+=n)}else if("doc-start"==e){if("start"==o||"no_regex"==o)return"";var u=t.match(/^\s*(\/?)\*/);u&&(u[1]&&(r+=" "),r+="* ")}return r},this.checkOutdent=function(e,t,n){return this.$outdent.checkOutdent(t,n)},this.autoOutdent=function(e,t,n){this.$outdent.autoOutdent(t,n)},this.createWorker=function(e){var t=new a(["ace"],"ace/mode/javascript_worker","JavaScriptWorker");return t.attachToDocument(e.getDocument()),t.on("jslint",function(t){e.setAnnotations(t.data)}),t.on("terminate",function(){e.clearAnnotations()}),t},this.$id="ace/mode/javascript"}.call(c.prototype),t.Mode=c}),ace.define("ace/mode/javascript_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(e,t,n){var r=e("../lib/oop"),i=e("./doc_comment_highlight_rules").DocCommentHighlightRules,s=e("./text_highlight_rules").TextHighlightRules,o=function(){var e=this.createKeywordMapper({"variable.language":"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|Namespace|QName|XML|XMLList|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|isNaN|parseFloat|parseInt|JSON|Math|this|arguments|prototype|window|document",keyword:"const|yield|import|get|set|break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|debugger|__parent__|__count__|escape|unescape|with|__proto__|class|enum|extends|super|export|implements|private|public|interface|package|protected|static","storage.type":"const|let|var|function","constant.language":"null|Infinity|NaN|undefined","support.function":"alert","constant.language.boolean":"true|false"},"identifier"),t="case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void",n="[a-zA-Z\\$_¡-￿][a-zA-Z\\d\\$_¡-￿]*\\b",r="\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|[0-2][0-7]{0,2}|3[0-6][0-7]?|37[0-7]?|[4-7][0-7]?|.)";this.$rules={no_regex:[{token:"comment",regex:"\\/\\/",next:"line_comment"},i.getStartRule("doc-start"),{token:"comment",regex:/\/\*/,next:"comment"},{token:"string",regex:"'(?=.)",next:"qstring"},{token:"string",regex:'"(?=.)',next:"qqstring"},{token:"constant.numeric",regex:/0[xX][0-9a-fA-F]+\b/},{token:"constant.numeric",regex:/[+-]?\d+(?:(?:\.\d*)?(?:[eE][+-]?\d+)?)?\b/},{token:["storage.type","punctuation.operator","support.function","punctuation.operator","entity.name.function","text","keyword.operator"],regex:"("+n+")(\\.)(prototype)(\\.)("+n+")(\\s*)(=)",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+n+")(\\.)("+n+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+n+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+n+")(\\.)("+n+")(\\s*)(=)(\\s*)(function)(\\s+)(\\w+)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","text","entity.name.function","text","paren.lparen"],regex:"(function)(\\s+)("+n+")(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","punctuation.operator","text","storage.type","text","paren.lparen"],regex:"("+n+")(\\s*)(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["text","text","storage.type","text","paren.lparen"],regex:"(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:"keyword",regex:"(?:"+t+")\\b",next:"start"},{token:["punctuation.operator","support.function"],regex:/(\.)(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\b(?=\()/},{token:["punctuation.operator","support.function.dom"],regex:/(\.)(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName)|ById)|Attribute(?:Node)?)|blur)\b(?=\()/},{token:["punctuation.operator","support.constant"],regex:/(\.)(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\b/},{token:["storage.type","punctuation.operator","support.function.firebug"],regex:/(console)(\.)(warn|info|log|error|time|timeEnd|assert)\b/},{token:e,regex:n},{token:"keyword.operator",regex:/--|\+\+|[!$%&*+\-~]|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|!|&&|\|\||\?\:|\*=|%=|\+=|\-=|&=|\^=/,next:"start"},{token:"punctuation.operator",regex:/\?|\:|\,|\;|\./,next:"start"},{token:"paren.lparen",regex:/[\[({]/,next:"start"},{token:"paren.rparen",regex:/[\])}]/},{token:"keyword.operator",regex:/\/=?/,next:"start"},{token:"comment",regex:/^#!.*$/}],start:[i.getStartRule("doc-start"),{token:"comment",regex:"\\/\\*",next:"comment_regex_allowed"},{token:"comment",regex:"\\/\\/",next:"line_comment_regex_allowed"},{token:"string.regexp",regex:"\\/",next:"regex"},{token:"text",regex:"\\s+|^$",next:"start"},{token:"empty",regex:"",next:"no_regex"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"string.regexp",regex:"/[sxngimy]*",next:"no_regex"},{token:"invalid",regex:/\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/},{token:"constant.language.escape",regex:/\(\?[:=!]|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/},{token:"constant.language.delimiter",regex:/\|/},{token:"constant.language.escape",regex:/\[\^?/,next:"regex_character_class"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp"}],regex_character_class:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"constant.language.escape",regex:"]",next:"regex"},{token:"constant.language.escape",regex:"-"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp.charachterclass"}],function_arguments:[{token:"variable.parameter",regex:n},{token:"punctuation.operator",regex:"[, ]+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],comment_regex_allowed:[{token:"comment",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}],comment:[{token:"comment",regex:"\\*\\/",next:"no_regex"},{defaultToken:"comment"}],line_comment_regex_allowed:[{token:"comment",regex:"$|^",next:"start"},{defaultToken:"comment"}],line_comment:[{token:"comment",regex:"$|^",next:"no_regex"},{defaultToken:"comment"}],qqstring:[{token:"constant.language.escape",regex:r},{token:"string",regex:"\\\\$",next:"qqstring"},{token:"string",regex:'"|$',next:"no_regex"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:r},{token:"string",regex:"\\\\$",next:"qstring"},{token:"string",regex:"'|$",next:"no_regex"},{defaultToken:"string"}]},this.embedRules(i,"doc-",[i.getEndRule("no_regex")])};r.inherits(o,s),t.JavaScriptHighlightRules=o}),ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(e,t,n){var r=e("../lib/oop"),i=e("./text_highlight_rules").TextHighlightRules,s=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},{token:"comment.doc.tag",regex:"\\bTODO\\b"},{defaultToken:"comment.doc"}]}};r.inherits(s,i),s.getStartRule=function(e){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:e}},s.getEndRule=function(e){return{token:"comment.doc",regex:"\\*\\/",next:e}},t.DocCommentHighlightRules=s}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(e,t,n){var r=e("../range").Range,i=function(){};(function(){this.checkOutdent=function(e,t){return/^\s+$/.test(e)?/^\s*\}/.test(t):!1},this.autoOutdent=function(e,t){var n=e.getLine(t),i=n.match(/^(\s*\})/);if(!i)return 0;var s=i[1].length,o=e.findMatchingBracket({row:t,column:s});if(!o||o.row==t)return 0;var u=this.$getIndent(e.getLine(o.row));e.replace(new r(t,0,t,s-1),u)},this.$getIndent=function(e){return e.match(/^\s*/)[0]}}).call(i.prototype),t.MatchingBraceOutdent=i}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,n){var f,r=e("../../lib/oop"),i=e("../behaviour").Behaviour,s=e("../../token_iterator").TokenIterator,o=e("../../lib/lang"),u=["text","paren.rparen","punctuation.operator"],a=["text","paren.rparen","punctuation.operator","comment"],l={},c=function(e){var t=-1;return e.multiSelect&&(t=e.selection.id,l.rangeCount!=e.multiSelect.rangeCount&&(l={rangeCount:e.multiSelect.rangeCount})),l[t]?f=l[t]:void(f=l[t]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""})},h=function(){this.add("braces","insertion",function(e,t,n,r,i){var s=n.getCursorPosition(),u=r.doc.getLine(s.row);if("{"==i){c(n);var a=n.getSelectionRange(),l=r.doc.getTextRange(a);if(""!==l&&"{"!==l&&n.getWrapBehavioursEnabled())return{text:"{"+l+"}",selection:!1};if(h.isSaneInsertion(n,r))return/[\]\}\)]/.test(u[s.column])||n.inMultiSelectMode?(h.recordAutoInsert(n,r,"}"),{text:"{}",selection:[1,1]}):(h.recordMaybeInsert(n,r,"{"),{text:"{",selection:[1,1]})}else if("}"==i){c(n);var p=u.substring(s.column,s.column+1);if("}"==p){var d=r.$findOpeningBracket("}",{column:s.column+1,row:s.row});if(null!==d&&h.isAutoInsertedClosing(s,u,i))return h.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else{if("\n"==i||"\r\n"==i){c(n);var v="";h.isMaybeInsertedClosing(s,u)&&(v=o.stringRepeat("}",f.maybeInsertedBrackets),h.clearMaybeInsertedClosing());var p=u.substring(s.column,s.column+1);if("}"===p){var m=r.findMatchingBracket({row:s.row,column:s.column+1},"}");if(!m)return null;var g=this.$getIndent(r.getLine(m.row))}else{if(!v)return void h.clearMaybeInsertedClosing();var g=this.$getIndent(u)}var y=g+r.getTabString();return{text:"\n"+y+"\n"+g+v,selection:[1,y.length,1,y.length]}}h.clearMaybeInsertedClosing()}}),this.add("braces","deletion",function(e,t,n,r,i){var s=r.doc.getTextRange(i);if(!i.isMultiLine()&&"{"==s){c(n);var o=r.doc.getLine(i.start.row),u=o.substring(i.end.column,i.end.column+1);if("}"==u)return i.end.column++,i;f.maybeInsertedBrackets--}}),this.add("parens","insertion",function(e,t,n,r,i){if("("==i){c(n);var s=n.getSelectionRange(),o=r.doc.getTextRange(s);if(""!==o&&n.getWrapBehavioursEnabled())return{text:"("+o+")",selection:!1};if(h.isSaneInsertion(n,r))return h.recordAutoInsert(n,r,")"),{text:"()",selection:[1,1]}}else if(")"==i){c(n);var u=n.getCursorPosition(),a=r.doc.getLine(u.row),f=a.substring(u.column,u.column+1);if(")"==f){var l=r.$findOpeningBracket(")",{column:u.column+1,row:u.row});if(null!==l&&h.isAutoInsertedClosing(u,a,i))return h.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(e,t,n,r,i){var s=r.doc.getTextRange(i);if(!i.isMultiLine()&&"("==s){c(n);var o=r.doc.getLine(i.start.row),u=o.substring(i.start.column+1,i.start.column+2);if(")"==u)return i.end.column++,i}}),this.add("brackets","insertion",function(e,t,n,r,i){if("["==i){c(n);var s=n.getSelectionRange(),o=r.doc.getTextRange(s);if(""!==o&&n.getWrapBehavioursEnabled())return{text:"["+o+"]",selection:!1};if(h.isSaneInsertion(n,r))return h.recordAutoInsert(n,r,"]"),{text:"[]",selection:[1,1]}}else if("]"==i){c(n);var u=n.getCursorPosition(),a=r.doc.getLine(u.row),f=a.substring(u.column,u.column+1);if("]"==f){var l=r.$findOpeningBracket("]",{column:u.column+1,row:u.row});if(null!==l&&h.isAutoInsertedClosing(u,a,i))return h.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(e,t,n,r,i){var s=r.doc.getTextRange(i);if(!i.isMultiLine()&&"["==s){c(n);var o=r.doc.getLine(i.start.row),u=o.substring(i.start.column+1,i.start.column+2);if("]"==u)return i.end.column++,i}}),this.add("string_dquotes","insertion",function(e,t,n,r,i){if('"'==i||"'"==i){c(n);var s=i,o=n.getSelectionRange(),u=r.doc.getTextRange(o);if(""!==u&&"'"!==u&&'"'!=u&&n.getWrapBehavioursEnabled())return{text:s+u+s,selection:!1};var a=n.getCursorPosition(),f=r.doc.getLine(a.row),l=f.substring(a.column-1,a.column);if("\\"==l)return null;for(var v,p=r.getTokens(o.start.row),d=0,m=-1,g=0;g<p.length&&(v=p[g],"string"==v.type?m=-1:0>m&&(m=v.value.indexOf(s)),!(v.value.length+d>o.start.column));g++)d+=p[g].value.length;if(!v||0>m&&"comment"!==v.type&&("string"!==v.type||o.start.column!==v.value.length+d-1&&v.value.lastIndexOf(s)===v.value.length-1)){if(!h.isSaneInsertion(n,r))return;return{text:s+s,selection:[1,1]}}if(v&&"string"===v.type){var y=f.substring(a.column,a.column+1);if(y==s)return{text:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(e,t,n,r,i){var s=r.doc.getTextRange(i);if(!i.isMultiLine()&&('"'==s||"'"==s)){c(n);var o=r.doc.getLine(i.start.row),u=o.substring(i.start.column+1,i.start.column+2);if(u==s)return i.end.column++,i}})};h.isSaneInsertion=function(e,t){var n=e.getCursorPosition(),r=new s(t,n.row,n.column);if(!this.$matchTokenType(r.getCurrentToken()||"text",u)){var i=new s(t,n.row,n.column+1);if(!this.$matchTokenType(i.getCurrentToken()||"text",u))return!1}return r.stepForward(),r.getCurrentTokenRow()!==n.row||this.$matchTokenType(r.getCurrentToken()||"text",a)},h.$matchTokenType=function(e,t){return t.indexOf(e.type||e)>-1},h.recordAutoInsert=function(e,t,n){var r=e.getCursorPosition(),i=t.doc.getLine(r.row);this.isAutoInsertedClosing(r,i,f.autoInsertedLineEnd[0])||(f.autoInsertedBrackets=0),f.autoInsertedRow=r.row,f.autoInsertedLineEnd=n+i.substr(r.column),f.autoInsertedBrackets++},h.recordMaybeInsert=function(e,t,n){var r=e.getCursorPosition(),i=t.doc.getLine(r.row);this.isMaybeInsertedClosing(r,i)||(f.maybeInsertedBrackets=0),f.maybeInsertedRow=r.row,f.maybeInsertedLineStart=i.substr(0,r.column)+n,f.maybeInsertedLineEnd=i.substr(r.column),f.maybeInsertedBrackets++},h.isAutoInsertedClosing=function(e,t,n){return f.autoInsertedBrackets>0&&e.row===f.autoInsertedRow&&n===f.autoInsertedLineEnd[0]&&t.substr(e.column)===f.autoInsertedLineEnd},h.isMaybeInsertedClosing=function(e,t){return f.maybeInsertedBrackets>0&&e.row===f.maybeInsertedRow&&t.substr(e.column)===f.maybeInsertedLineEnd&&t.substr(0,e.column)==f.maybeInsertedLineStart},h.popAutoInsertedClosing=function(){f.autoInsertedLineEnd=f.autoInsertedLineEnd.substr(1),f.autoInsertedBrackets--},h.clearMaybeInsertedClosing=function(){f&&(f.maybeInsertedBrackets=0,f.maybeInsertedRow=-1)},r.inherits(h,i),t.CstyleBehaviour=h}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(e,t,n){var r=e("../../lib/oop"),i=e("../../range").Range,s=e("./fold_mode").FoldMode,o=t.FoldMode=function(e){e&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+e.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+e.end)))};r.inherits(o,s),function(){this.foldingStartMarker=/(\{|\[)[^\}\]]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{]*(\}|\])|^[\s\*]*(\*\/)/,this.getFoldWidgetRange=function(e,t,n,r){var i=e.getLine(n),s=i.match(this.foldingStartMarker);if(s){var o=s.index;if(s[1])return this.openingBracketBlock(e,s[1],n,o);var u=e.getCommentFoldRange(n,o+s[0].length,1);return u&&!u.isMultiLine()&&(r?u=this.getSectionRange(e,n):"all"!=t&&(u=null)),u}if("markbegin"!==t){var s=i.match(this.foldingStopMarker);if(s){var o=s.index+s[0].length;return s[1]?this.closingBracketBlock(e,s[1],n,o):e.getCommentFoldRange(n,o,-1)}}},this.getSectionRange=function(e,t){var n=e.getLine(t),r=n.search(/\S/),s=t,o=n.length;t+=1;for(var u=t,a=e.getLength();++t<a;){n=e.getLine(t);var f=n.search(/\S/);if(-1!==f){if(r>f)break;var l=this.getFoldWidgetRange(e,"all",t);if(l){if(l.start.row<=s)break;if(l.isMultiLine())t=l.end.row;else if(r==f)break}u=t}}return new i(s,o,u,e.getLine(u).length)}}.call(o.prototype)}),ace.define("ace/mode/ftl",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/ftl_highlight_rules"],function(e,t,n){var r=e("../lib/oop"),i=e("./text").Mode,s=e("./ftl_highlight_rules").FtlHighlightRules,o=function(){this.HighlightRules=s};r.inherits(o,i),function(){this.$id="ace/mode/ftl"}.call(o.prototype),t.Mode=o}),ace.define("ace/mode/ftl_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/html_highlight_rules","ace/mode/text_highlight_rules"],function(e,t,n){var r=e("../lib/oop"),i=e("./html_highlight_rules").HtmlHighlightRules,s=e("./text_highlight_rules").TextHighlightRules,o=function(){var e="\\?|substring|cap_first|uncap_first|capitalize|chop_linebreak|date|time|datetime|ends_with|html|groups|index_of|j_string|js_string|json_string|last_index_of|length|lower_case|left_pad|right_pad|contains|matches|number|replace|rtf|url|split|starts_with|string|trim|upper_case|word_list|xhtml|xml",t="c|round|floor|ceiling",n="iso_[a-z_]+",r="first|last|seq_contains|seq_index_of|seq_last_index_of|reverse|size|sort|sort_by|chunk",i="keys|values",s="children|parent|root|ancestors|node_name|node_type|node_namespace",o="byte|double|float|int|long|short|number_to_date|number_to_time|number_to_datetime|eval|has_content|interpret|is_[a-z_]+|namespacenew",u=e+t+n+r+i+s+o,a="default|exists|if_exists|web_safe",f="data_model|error|globals|lang|locale|locals|main|namespace|node|current_node|now|output_encoding|template_name|url_escaping_charset|vars|version",l="gt|gte|lt|lte|as|in|using",c="true|false",h="encoding|parse|locale|number_format|date_format|time_format|datetime_format|time_zone|url_escaping_charset|classic_compatible|strip_whitespace|strip_text|strict_syntax|ns_prefixes|attributes";this.$rules={start:[{token:"constant.character.entity",regex:/&[^;]+;/},{token:"support.function",regex:"\\?("+u+")"},{token:"support.function.deprecated",regex:"\\?("+a+")"},{token:"language.variable",regex:"\\.(?:"+f+")"},{token:"constant.language",regex:"\\b("+c+")\\b"},{token:"keyword.operator",regex:"\\b(?:"+l+")\\b"},{token:"entity.other.attribute-name",regex:h},{token:"string",regex:/['"]/,next:"qstring"},{token:function(e){return e.match("^[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?$")?"constant.numeric":"variable"},regex:/[\w.+\-]+/},{token:"keyword.operator",regex:"!|\\.|\\$|%|&|\\*|\\-\\-|\\-|\\+\\+|\\+|~|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|&&|\\|\\||\\?\\:|\\*=|%=|\\+=|\\-=|&=|\\^="},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"text",regex:"\\s+"}],qstring:[{token:"constant.character.escape",regex:'\\\\[nrtvef\\\\"$]'},{token:"string",regex:/['"]/,next:"start"},{defaultToken:"string"}]}};r.inherits(o,s);var u=function(){i.call(this);var e="assign|attempt|break|case|compress|default|elseif|else|escape|fallback|function|flush|ftl|global|if|import|include|list|local|lt|macro|nested|noescape|noparse|nt|recover|recurse|return|rt|setting|stop|switch|t|visit",t=[{token:"comment",regex:"<#--",next:"ftl-dcomment"},{token:"string.interpolated",regex:"\\${",push:"ftl-start"},{token:"keyword.function",regex:"</?#("+e+")",push:"ftl-start"},{token:"keyword.other",regex:"</?@[a-zA-Z\\.]+",push:"ftl-start"}],n=[{token:"keyword",regex:"/?>",next:"pop"},{token:"string.interpolated",regex:"}",next:"pop"}];for(var r in this.$rules)this.$rules[r].unshift.apply(this.$rules[r],t);this.embedRules(o,"ftl-",n,["start"]),this.addRules({"ftl-dcomment":[{token:"comment",regex:".*?-->",next:"pop"},{token:"comment",regex:".+"}]}),this.normalizeRules()};r.inherits(u,i),t.FtlHighlightRules=u}),ace.define("ace/mode/html_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/css_highlight_rules","ace/mode/javascript_highlight_rules","ace/mode/xml_highlight_rules"],function(e,t,n){var r=e("../lib/oop"),i=e("../lib/lang"),s=e("./css_highlight_rules").CssHighlightRules,o=e("./javascript_highlight_rules").JavaScriptHighlightRules,u=e("./xml_highlight_rules").XmlHighlightRules,a=i.createMap({a:"anchor",button:"form",form:"form",img:"image",input:"form",label:"form",option:"form",script:"script",select:"form",textarea:"form",style:"style",table:"table",tbody:"table",td:"table",tfoot:"table",th:"table",tr:"table"}),f=function(){u.call(this),this.addRules({attributes:[{include:"tag_whitespace"},{token:"entity.other.attribute-name.xml",regex:"[-_a-zA-Z0-9:]+"},{token:"keyword.operator.attribute-equals.xml",regex:"=",push:[{include:"tag_whitespace"},{token:"string.unquoted.attribute-value.html",regex:"[^<>='\"`\\s]+",next:"pop"},{token:"empty",
regex:"",next:"pop"}]},{include:"attribute_value"}],tag:[{token:function(e,t){var n=a[t];return["meta.tag.punctuation."+("<"==e?"":"end-")+"tag-open.xml","meta.tag"+(n?"."+n:"")+".tag-name.xml"]},regex:"(</?)([-_a-zA-Z0-9:]+)",next:"tag_stuff"}],tag_stuff:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start"}]}),this.embedTagRules(s,"css-","style"),this.embedTagRules(o,"js-","script"),this.constructor===f&&this.normalizeRules()};r.inherits(f,u),t.HtmlHighlightRules=f}),ace.define("ace/mode/css_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/text_highlight_rules"],function(e,t,n){var r=e("../lib/oop"),s=(e("../lib/lang"),e("./text_highlight_rules").TextHighlightRules),o=t.supportType="animation-fill-mode|alignment-adjust|alignment-baseline|animation-delay|animation-direction|animation-duration|animation-iteration-count|animation-name|animation-play-state|animation-timing-function|animation|appearance|azimuth|backface-visibility|background-attachment|background-break|background-clip|background-color|background-image|background-origin|background-position|background-repeat|background-size|background|baseline-shift|binding|bleed|bookmark-label|bookmark-level|bookmark-state|bookmark-target|border-bottom|border-bottom-color|border-bottom-left-radius|border-bottom-right-radius|border-bottom-style|border-bottom-width|border-collapse|border-color|border-image|border-image-outset|border-image-repeat|border-image-slice|border-image-source|border-image-width|border-left|border-left-color|border-left-style|border-left-width|border-radius|border-right|border-right-color|border-right-style|border-right-width|border-spacing|border-style|border-top|border-top-color|border-top-left-radius|border-top-right-radius|border-top-style|border-top-width|border-width|border|bottom|box-align|box-decoration-break|box-direction|box-flex-group|box-flex|box-lines|box-ordinal-group|box-orient|box-pack|box-shadow|box-sizing|break-after|break-before|break-inside|caption-side|clear|clip|color-profile|color|column-count|column-fill|column-gap|column-rule|column-rule-color|column-rule-style|column-rule-width|column-span|column-width|columns|content|counter-increment|counter-reset|crop|cue-after|cue-before|cue|cursor|direction|display|dominant-baseline|drop-initial-after-adjust|drop-initial-after-align|drop-initial-before-adjust|drop-initial-before-align|drop-initial-size|drop-initial-value|elevation|empty-cells|fit|fit-position|float-offset|float|font-family|font-size|font-size-adjust|font-stretch|font-style|font-variant|font-weight|font|grid-columns|grid-rows|hanging-punctuation|height|hyphenate-after|hyphenate-before|hyphenate-character|hyphenate-lines|hyphenate-resource|hyphens|icon|image-orientation|image-rendering|image-resolution|inline-box-align|left|letter-spacing|line-height|line-stacking-ruby|line-stacking-shift|line-stacking-strategy|line-stacking|list-style-image|list-style-position|list-style-type|list-style|margin-bottom|margin-left|margin-right|margin-top|margin|mark-after|mark-before|mark|marks|marquee-direction|marquee-play-count|marquee-speed|marquee-style|max-height|max-width|min-height|min-width|move-to|nav-down|nav-index|nav-left|nav-right|nav-up|opacity|orphans|outline-color|outline-offset|outline-style|outline-width|outline|overflow-style|overflow-x|overflow-y|overflow|padding-bottom|padding-left|padding-right|padding-top|padding|page-break-after|page-break-before|page-break-inside|page-policy|page|pause-after|pause-before|pause|perspective-origin|perspective|phonemes|pitch-range|pitch|play-during|pointer-events|position|presentation-level|punctuation-trim|quotes|rendering-intent|resize|rest-after|rest-before|rest|richness|right|rotation-point|rotation|ruby-align|ruby-overhang|ruby-position|ruby-span|size|speak-header|speak-numeral|speak-punctuation|speak|speech-rate|stress|string-set|table-layout|target-name|target-new|target-position|target|text-align-last|text-align|text-decoration|text-emphasis|text-height|text-indent|text-justify|text-outline|text-shadow|text-transform|text-wrap|top|transform-origin|transform-style|transform|transition-delay|transition-duration|transition-property|transition-timing-function|transition|unicode-bidi|vertical-align|visibility|voice-balance|voice-duration|voice-family|voice-pitch-range|voice-pitch|voice-rate|voice-stress|voice-volume|volume|white-space-collapse|white-space|widows|width|word-break|word-spacing|word-wrap|z-index",u=t.supportFunction="rgb|rgba|url|attr|counter|counters",a=t.supportConstant="absolute|after-edge|after|all-scroll|all|alphabetic|always|antialiased|armenian|auto|avoid-column|avoid-page|avoid|balance|baseline|before-edge|before|below|bidi-override|block-line-height|block|bold|bolder|border-box|both|bottom|box|break-all|break-word|capitalize|caps-height|caption|center|central|char|circle|cjk-ideographic|clone|close-quote|col-resize|collapse|column|consider-shifts|contain|content-box|cover|crosshair|cubic-bezier|dashed|decimal-leading-zero|decimal|default|disabled|disc|disregard-shifts|distribute-all-lines|distribute-letter|distribute-space|distribute|dotted|double|e-resize|ease-in|ease-in-out|ease-out|ease|ellipsis|end|exclude-ruby|fill|fixed|georgian|glyphs|grid-height|groove|hand|hanging|hebrew|help|hidden|hiragana-iroha|hiragana|horizontal|icon|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space|ideographic|inactive|include-ruby|inherit|initial|inline-block|inline-box|inline-line-height|inline-table|inline|inset|inside|inter-ideograph|inter-word|invert|italic|justify|katakana-iroha|katakana|keep-all|last|left|lighter|line-edge|line-through|line|linear|list-item|local|loose|lower-alpha|lower-greek|lower-latin|lower-roman|lowercase|lr-tb|ltr|mathematical|max-height|max-size|medium|menu|message-box|middle|move|n-resize|ne-resize|newspaper|no-change|no-close-quote|no-drop|no-open-quote|no-repeat|none|normal|not-allowed|nowrap|nw-resize|oblique|open-quote|outset|outside|overline|padding-box|page|pointer|pre-line|pre-wrap|pre|preserve-3d|progress|relative|repeat-x|repeat-y|repeat|replaced|reset-size|ridge|right|round|row-resize|rtl|s-resize|scroll|se-resize|separate|slice|small-caps|small-caption|solid|space|square|start|static|status-bar|step-end|step-start|steps|stretch|strict|sub|super|sw-resize|table-caption|table-cell|table-column-group|table-column|table-footer-group|table-header-group|table-row-group|table-row|table|tb-rl|text-after-edge|text-before-edge|text-bottom|text-size|text-top|text|thick|thin|transparent|underline|upper-alpha|upper-latin|upper-roman|uppercase|use-script|vertical-ideographic|vertical-text|visible|w-resize|wait|whitespace|z-index|zero",f=t.supportConstantColor="aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow",l=t.supportConstantFonts="arial|century|comic|courier|garamond|georgia|helvetica|impact|lucida|symbol|system|tahoma|times|trebuchet|utopia|verdana|webdings|sans-serif|serif|monospace",c=t.numRe="\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))",h=t.pseudoElements="(\\:+)\\b(after|before|first-letter|first-line|moz-selection|selection)\\b",p=t.pseudoClasses="(:)\\b(active|checked|disabled|empty|enabled|first-child|first-of-type|focus|hover|indeterminate|invalid|last-child|last-of-type|link|not|nth-child|nth-last-child|nth-last-of-type|nth-of-type|only-child|only-of-type|required|root|target|valid|visited)\\b",d=function(){var e=this.createKeywordMapper({"support.function":u,"support.constant":a,"support.type":o,"support.constant.color":f,"support.constant.fonts":l},"text",!0);this.$rules={start:[{token:"comment",regex:"\\/\\*",push:"comment"},{token:"paren.lparen",regex:"\\{",push:"ruleset"},{token:"string",regex:"@.*?{",push:"media"},{token:"keyword",regex:"#[a-z0-9-_]+"},{token:"variable",regex:"\\.[a-z0-9-_]+"},{token:"string",regex:":[a-z0-9-_]+"},{token:"constant",regex:"[a-z0-9-_]+"},{caseInsensitive:!0}],media:[{token:"comment",regex:"\\/\\*",push:"comment"},{token:"paren.lparen",regex:"\\{",push:"ruleset"},{token:"string",regex:"\\}",next:"pop"},{token:"keyword",regex:"#[a-z0-9-_]+"},{token:"variable",regex:"\\.[a-z0-9-_]+"},{token:"string",regex:":[a-z0-9-_]+"},{token:"constant",regex:"[a-z0-9-_]+"},{caseInsensitive:!0}],comment:[{token:"comment",regex:"\\*\\/",next:"pop"},{defaultToken:"comment"}],ruleset:[{token:"paren.rparen",regex:"\\}",next:"pop"},{token:"comment",regex:"\\/\\*",push:"comment"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:["constant.numeric","keyword"],regex:"("+c+")(ch|cm|deg|em|ex|fr|gd|grad|Hz|in|kHz|mm|ms|pc|pt|px|rad|rem|s|turn|vh|vm|vw|%)"},{token:"constant.numeric",regex:c},{token:"constant.numeric",regex:"#[a-f0-9]{6}"},{token:"constant.numeric",regex:"#[a-f0-9]{3}"},{token:["punctuation","entity.other.attribute-name.pseudo-element.css"],regex:h},{token:["punctuation","entity.other.attribute-name.pseudo-class.css"],regex:p},{token:["support.function","string","support.function"],regex:"(url\\()(.*)(\\))"},{token:e,regex:"\\-?[a-zA-Z_][a-zA-Z0-9_\\-]*"},{caseInsensitive:!0}]},this.normalizeRules()};r.inherits(d,s),t.CssHighlightRules=d}),ace.define("ace/mode/javascript_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(e,t,n){var r=e("../lib/oop"),i=e("./doc_comment_highlight_rules").DocCommentHighlightRules,s=e("./text_highlight_rules").TextHighlightRules,o=function(){var e=this.createKeywordMapper({"variable.language":"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|Namespace|QName|XML|XMLList|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|isNaN|parseFloat|parseInt|JSON|Math|this|arguments|prototype|window|document",keyword:"const|yield|import|get|set|break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|debugger|__parent__|__count__|escape|unescape|with|__proto__|class|enum|extends|super|export|implements|private|public|interface|package|protected|static","storage.type":"const|let|var|function","constant.language":"null|Infinity|NaN|undefined","support.function":"alert","constant.language.boolean":"true|false"},"identifier"),t="case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void",n="[a-zA-Z\\$_¡-￿][a-zA-Z\\d\\$_¡-￿]*\\b",r="\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|[0-2][0-7]{0,2}|3[0-6][0-7]?|37[0-7]?|[4-7][0-7]?|.)";this.$rules={no_regex:[{token:"comment",regex:"\\/\\/",next:"line_comment"},i.getStartRule("doc-start"),{token:"comment",regex:/\/\*/,next:"comment"},{token:"string",regex:"'(?=.)",next:"qstring"},{token:"string",regex:'"(?=.)',next:"qqstring"},{token:"constant.numeric",regex:/0[xX][0-9a-fA-F]+\b/},{token:"constant.numeric",regex:/[+-]?\d+(?:(?:\.\d*)?(?:[eE][+-]?\d+)?)?\b/},{token:["storage.type","punctuation.operator","support.function","punctuation.operator","entity.name.function","text","keyword.operator"],regex:"("+n+")(\\.)(prototype)(\\.)("+n+")(\\s*)(=)",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+n+")(\\.)("+n+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+n+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+n+")(\\.)("+n+")(\\s*)(=)(\\s*)(function)(\\s+)(\\w+)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","text","entity.name.function","text","paren.lparen"],regex:"(function)(\\s+)("+n+")(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","punctuation.operator","text","storage.type","text","paren.lparen"],regex:"("+n+")(\\s*)(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["text","text","storage.type","text","paren.lparen"],regex:"(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:"keyword",regex:"(?:"+t+")\\b",next:"start"},{token:["punctuation.operator","support.function"],regex:/(\.)(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\b(?=\()/},{token:["punctuation.operator","support.function.dom"],regex:/(\.)(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName)|ById)|Attribute(?:Node)?)|blur)\b(?=\()/},{token:["punctuation.operator","support.constant"],regex:/(\.)(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\b/},{token:["storage.type","punctuation.operator","support.function.firebug"],regex:/(console)(\.)(warn|info|log|error|time|timeEnd|assert)\b/},{token:e,regex:n},{token:"keyword.operator",regex:/--|\+\+|[!$%&*+\-~]|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|!|&&|\|\||\?\:|\*=|%=|\+=|\-=|&=|\^=/,next:"start"},{token:"punctuation.operator",regex:/\?|\:|\,|\;|\./,next:"start"},{token:"paren.lparen",regex:/[\[({]/,next:"start"},{token:"paren.rparen",regex:/[\])}]/},{token:"keyword.operator",regex:/\/=?/,next:"start"},{token:"comment",regex:/^#!.*$/}],start:[i.getStartRule("doc-start"),{token:"comment",regex:"\\/\\*",next:"comment_regex_allowed"},{token:"comment",regex:"\\/\\/",next:"line_comment_regex_allowed"},{token:"string.regexp",regex:"\\/",next:"regex"},{token:"text",regex:"\\s+|^$",next:"start"},{token:"empty",regex:"",next:"no_regex"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"string.regexp",regex:"/[sxngimy]*",next:"no_regex"},{token:"invalid",regex:/\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/},{token:"constant.language.escape",regex:/\(\?[:=!]|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/},{token:"constant.language.delimiter",regex:/\|/},{token:"constant.language.escape",regex:/\[\^?/,next:"regex_character_class"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp"}],regex_character_class:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"constant.language.escape",regex:"]",next:"regex"},{token:"constant.language.escape",regex:"-"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp.charachterclass"}],function_arguments:[{token:"variable.parameter",regex:n},{token:"punctuation.operator",regex:"[, ]+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],comment_regex_allowed:[{token:"comment",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}],comment:[{token:"comment",regex:"\\*\\/",next:"no_regex"},{defaultToken:"comment"}],line_comment_regex_allowed:[{token:"comment",regex:"$|^",next:"start"},{defaultToken:"comment"}],line_comment:[{token:"comment",regex:"$|^",next:"no_regex"},{defaultToken:"comment"}],qqstring:[{token:"constant.language.escape",regex:r},{token:"string",regex:"\\\\$",next:"qqstring"},{token:"string",regex:'"|$',next:"no_regex"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:r},{token:"string",regex:"\\\\$",next:"qstring"},{token:"string",regex:"'|$",next:"no_regex"},{defaultToken:"string"}]},this.embedRules(i,"doc-",[i.getEndRule("no_regex")])};r.inherits(o,s),t.JavaScriptHighlightRules=o}),ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(e,t,n){var r=e("../lib/oop"),i=e("./text_highlight_rules").TextHighlightRules,s=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},{token:"comment.doc.tag",regex:"\\bTODO\\b"},{defaultToken:"comment.doc"}]}};r.inherits(s,i),s.getStartRule=function(e){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:e}},s.getEndRule=function(e){return{token:"comment.doc",regex:"\\*\\/",next:e}},t.DocCommentHighlightRules=s}),ace.define("ace/mode/xml_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(e,t,n){var r=e("../lib/oop"),i=e("./text_highlight_rules").TextHighlightRules,s=function(e){this.$rules={start:[{token:"string.cdata.xml",regex:"<\\!\\[CDATA\\[",next:"cdata"},{token:["punctuation.xml-decl.xml","keyword.xml-decl.xml"],regex:"(<\\?)(xml)(?=[\\s])",next:"xml_decl",caseInsensitive:!0},{token:["punctuation.instruction.xml","keyword.instruction.xml"],regex:"(<\\?)([-_a-zA-Z0-9]+)",next:"processing_instruction"},{token:"comment.xml",regex:"<\\!--",next:"comment"},{token:["xml-pe.doctype.xml","xml-pe.doctype.xml"],regex:"(<\\!)(DOCTYPE)(?=[\\s])",next:"doctype",caseInsensitive:!0},{include:"tag"},{token:"text.end-tag-open.xml",regex:"</"},{token:"text.tag-open.xml",regex:"<"},{include:"reference"},{defaultToken:"text.xml"}],xml_decl:[{token:"entity.other.attribute-name.decl-attribute-name.xml",regex:"(?:[-_a-zA-Z0-9]+:)?[-_a-zA-Z0-9]+"},{token:"keyword.operator.decl-attribute-equals.xml",regex:"="},{include:"whitespace"},{include:"string"},{token:"punctuation.xml-decl.xml",regex:"\\?>",next:"start"}],processing_instruction:[{token:"punctuation.instruction.xml",regex:"\\?>",next:"start"},{defaultToken:"instruction.xml"}],doctype:[{include:"whitespace"},{include:"string"},{token:"xml-pe.doctype.xml",regex:">",next:"start"},{token:"xml-pe.xml",regex:"[-_a-zA-Z0-9:]+"},{token:"punctuation.int-subset",regex:"\\[",push:"int_subset"}],int_subset:[{token:"text.xml",regex:"\\s+"},{token:"punctuation.int-subset.xml",regex:"]",next:"pop"},{token:["punctuation.markup-decl.xml","keyword.markup-decl.xml"],regex:"(<\\!)([-_a-zA-Z0-9]+)",push:[{token:"text",regex:"\\s+"},{token:"punctuation.markup-decl.xml",regex:">",next:"pop"},{include:"string"}]}],cdata:[{token:"string.cdata.xml",regex:"\\]\\]>",next:"start"},{token:"text.xml",regex:"\\s+"},{token:"text.xml",regex:"(?:[^\\]]|\\](?!\\]>))+"}],comment:[{token:"comment.xml",regex:"-->",next:"start"},{defaultToken:"comment.xml"}],reference:[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}],attr_reference:[{token:"constant.language.escape.reference.attribute-value.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}],tag:[{token:["meta.tag.punctuation.tag-open.xml","meta.tag.punctuation.end-tag-open.xml","meta.tag.tag-name.xml"],regex:"(?:(<)|(</))((?:[-_a-zA-Z0-9]+:)?[-_a-zA-Z0-9]+)",next:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start"}]}],tag_whitespace:[{token:"text.tag-whitespace.xml",regex:"\\s+"}],whitespace:[{token:"text.whitespace.xml",regex:"\\s+"}],string:[{token:"string.xml",regex:"'",push:[{token:"string.xml",regex:"'",next:"pop"},{defaultToken:"string.xml"}]},{token:"string.xml",regex:'"',push:[{token:"string.xml",regex:'"',next:"pop"},{defaultToken:"string.xml"}]}],attributes:[{token:"entity.other.attribute-name.xml",regex:"(?:[-_a-zA-Z0-9]+:)?[-_a-zA-Z0-9]+"},{token:"keyword.operator.attribute-equals.xml",regex:"="},{include:"tag_whitespace"},{include:"attribute_value"}],attribute_value:[{token:"string.attribute-value.xml",regex:"'",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"attr_reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"attr_reference"},{defaultToken:"string.attribute-value.xml"}]}]},this.constructor===s&&this.normalizeRules()};(function(){this.embedTagRules=function(e,t,n){this.$rules.tag.unshift({token:["meta.tag.punctuation.tag-open.xml","meta.tag."+n+".tag-name.xml"],regex:"(<)("+n+"(?=\\s|>|$))",next:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:t+"start"}]}),this.$rules[n+"-end"]=[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start",onMatch:function(e,t,n){return n.splice(0),this.token}}],this.embedRules(e,t,[{token:["meta.tag.punctuation.end-tag-open.xml","meta.tag."+n+".tag-name.xml"],regex:"(</)("+n+"(?=\\s|>|$))",next:n+"-end"},{token:"string.cdata.xml",regex:"<\\!\\[CDATA\\["},{token:"string.cdata.xml",regex:"\\]\\]>"}])}}).call(i.prototype),r.inherits(s,i),t.XmlHighlightRules=s}),ace.define("ace/theme/twilight",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!0,t.cssClass="ace-twilight",t.cssText=".ace-twilight .ace_gutter {background: #232323;color: #E2E2E2}.ace-twilight .ace_print-margin {width: 1px;background: #232323}.ace-twilight {background-color: #141414;color: #F8F8F8}.ace-twilight .ace_cursor {color: #A7A7A7}.ace-twilight .ace_marker-layer .ace_selection {background: rgba(221, 240, 255, 0.20)}.ace-twilight.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #141414;border-radius: 2px}.ace-twilight .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-twilight .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgba(255, 255, 255, 0.25)}.ace-twilight .ace_marker-layer .ace_active-line {background: rgba(255, 255, 255, 0.031)}.ace-twilight .ace_gutter-active-line {background-color: rgba(255, 255, 255, 0.031)}.ace-twilight .ace_marker-layer .ace_selected-word {border: 1px solid rgba(221, 240, 255, 0.20)}.ace-twilight .ace_invisible {color: rgba(255, 255, 255, 0.25)}.ace-twilight .ace_keyword,.ace-twilight .ace_meta {color: #CDA869}.ace-twilight .ace_constant,.ace-twilight .ace_constant.ace_character,.ace-twilight .ace_constant.ace_character.ace_escape,.ace-twilight .ace_constant.ace_other,.ace-twilight .ace_heading,.ace-twilight .ace_markup.ace_heading,.ace-twilight .ace_support.ace_constant {color: #CF6A4C}.ace-twilight .ace_invalid.ace_illegal {color: #F8F8F8;background-color: rgba(86, 45, 86, 0.75)}.ace-twilight .ace_invalid.ace_deprecated {text-decoration: underline;font-style: italic;color: #D2A8A1}.ace-twilight .ace_support {color: #9B859D}.ace-twilight .ace_fold {background-color: #AC885B;border-color: #F8F8F8}.ace-twilight .ace_support.ace_function {color: #DAD085}.ace-twilight .ace_list,.ace-twilight .ace_markup.ace_list,.ace-twilight .ace_storage {color: #F9EE98}.ace-twilight .ace_entity.ace_name.ace_function,.ace-twilight .ace_meta.ace_tag,.ace-twilight .ace_variable {color: #AC885B}.ace-twilight .ace_string {color: #8F9D6A}.ace-twilight .ace_string.ace_regexp {color: #E9C062}.ace-twilight .ace_comment {font-style: italic;color: #5F5A60}.ace-twilight .ace_variable {color: #7587A6}.ace-twilight .ace_xml-pe {color: #494949}.ace-twilight .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWMQERFpYLC1tf0PAAgOAnPnhxyiAAAAAElFTkSuQmCC) right repeat-y}";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),function(factory){"use strict";"function"==typeof define&&define.amd?define(["jquery"],factory):factory(window.jQuery)}(function($){"use strict";var counter=0;$.ajaxTransport("iframe",function(options){if(options.async){var form,iframe,addParamChar,initialIframeSrc=options.initialIframeSrc||"javascript:false;";return{send:function(_,completeCallback){form=$('<form style="display:none;"></form>'),form.attr("accept-charset",options.formAcceptCharset),addParamChar=/\?/.test(options.url)?"&":"?","DELETE"===options.type?(options.url=options.url+addParamChar+"_method=DELETE",options.type="POST"):"PUT"===options.type?(options.url=options.url+addParamChar+"_method=PUT",options.type="POST"):"PATCH"===options.type&&(options.url=options.url+addParamChar+"_method=PATCH",options.type="POST"),counter+=1,iframe=$('<iframe src="'+initialIframeSrc+'" name="iframe-transport-'+counter+'"></iframe>').bind("load",function(){var fileInputClones,paramNames=$.isArray(options.paramName)?options.paramName:[options.paramName];iframe.unbind("load").bind("load",function(){var response;try{if(response=iframe.contents(),!response.length||!response[0].firstChild)throw new Error}catch(e){response=void 0}completeCallback(200,"success",{iframe:response}),$('<iframe src="'+initialIframeSrc+'"></iframe>').appendTo(form),window.setTimeout(function(){form.remove()},0)}),form.prop("target",iframe.prop("name")).prop("action",options.url).prop("method",options.type),options.formData&&$.each(options.formData,function(index,field){$('<input type="hidden"/>').prop("name",field.name).val(field.value).appendTo(form)}),options.fileInput&&options.fileInput.length&&"POST"===options.type&&(fileInputClones=options.fileInput.clone(),options.fileInput.after(function(index){return fileInputClones[index]}),options.paramName&&options.fileInput.each(function(index){$(this).prop("name",paramNames[index]||options.paramName)}),form.append(options.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),options.fileInput.removeAttr("form")),form.submit(),fileInputClones&&fileInputClones.length&&options.fileInput.each(function(index,input){var clone=$(fileInputClones[index]);$(input).prop("name",clone.prop("name")).attr("form",clone.attr("form")),clone.replaceWith(input)})}),form.append(iframe).appendTo(document.body)},abort:function(){iframe&&iframe.unbind("load").prop("src",initialIframeSrc),form&&form.remove()}}}}),$.ajaxSetup({converters:{"iframe text":function(iframe){return iframe&&$(iframe[0].body).text()},"iframe json":function(iframe){return iframe&&$.parseJSON($(iframe[0].body).text())},"iframe html":function(iframe){return iframe&&$(iframe[0].body).html()},"iframe xml":function(iframe){var xmlDoc=iframe&&iframe[0];return xmlDoc&&$.isXMLDoc(xmlDoc)?xmlDoc:$.parseXML(xmlDoc.XMLDocument&&xmlDoc.XMLDocument.xml||$(xmlDoc.body).html())},"iframe script":function(iframe){return iframe&&$.globalEval($(iframe[0].body).text())}}})}),function(factory){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],factory):factory(window.jQuery)}(function($){"use strict";$.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||$('<input type="file">').prop("disabled")),$.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),$.support.xhrFormDataFileUpload=!!window.FormData,$.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),$.widget("blueimp.fileupload",{options:{dropZone:$(document),pasteZone:$(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(message,context){return message=this.messages[message]||message.toString(),context&&$.each(context,function(key,value){message=message.replace("{"+key+"}",value)}),message},formData:function(form){return form.serializeArray()},add:function(e,data){return e.isDefaultPrevented()?!1:void((data.autoUpload||data.autoUpload!==!1&&$(this).fileupload("option","autoUpload"))&&data.process().done(function(){data.submit()}))},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:$.support.blobSlice&&function(){var slice=this.slice||this.webkitSlice||this.mozSlice;return slice.apply(this,arguments);
},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(now,loaded,interval){var timeDiff=now-this.timestamp;return(!this.bitrate||!interval||timeDiff>interval)&&(this.bitrate=(loaded-this.loaded)*(1e3/timeDiff)*8,this.loaded=loaded,this.timestamp=now),this.bitrate}},_isXHRUpload:function(options){return!options.forceIframeTransport&&(!options.multipart&&$.support.xhrFileUpload||$.support.xhrFormDataFileUpload)},_getFormData:function(options){var formData;return"function"===$.type(options.formData)?options.formData(options.form):$.isArray(options.formData)?options.formData:"object"===$.type(options.formData)?(formData=[],$.each(options.formData,function(name,value){formData.push({name:name,value:value})}),formData):[]},_getTotal:function(files){var total=0;return $.each(files,function(index,file){total+=file.size||1}),total},_initProgressObject:function(obj){var progress={loaded:0,total:0,bitrate:0};obj._progress?$.extend(obj._progress,progress):obj._progress=progress},_initResponseObject:function(obj){var prop;if(obj._response)for(prop in obj._response)obj._response.hasOwnProperty(prop)&&delete obj._response[prop];else obj._response={}},_onProgress:function(e,data){if(e.lengthComputable){var loaded,now=Date.now?Date.now():(new Date).getTime();if(data._time&&data.progressInterval&&now-data._time<data.progressInterval&&e.loaded!==e.total)return;data._time=now,loaded=Math.floor(e.loaded/e.total*(data.chunkSize||data._progress.total))+(data.uploadedBytes||0),this._progress.loaded+=loaded-data._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(now,this._progress.loaded,data.bitrateInterval),data._progress.loaded=data.loaded=loaded,data._progress.bitrate=data.bitrate=data._bitrateTimer.getBitrate(now,loaded,data.bitrateInterval),this._trigger("progress",$.Event("progress",{delegatedEvent:e}),data),this._trigger("progressall",$.Event("progressall",{delegatedEvent:e}),this._progress)}},_initProgressListener:function(options){var that=this,xhr=options.xhr?options.xhr():$.ajaxSettings.xhr();xhr.upload&&($(xhr.upload).bind("progress",function(e){var oe=e.originalEvent;e.lengthComputable=oe.lengthComputable,e.loaded=oe.loaded,e.total=oe.total,that._onProgress(e,options)}),options.xhr=function(){return xhr})},_isInstanceOf:function(type,obj){return Object.prototype.toString.call(obj)==="[object "+type+"]"},_initXHRData:function(options){var formData,that=this,file=options.files[0],multipart=options.multipart||!$.support.xhrFileUpload,paramName="array"===$.type(options.paramName)?options.paramName[0]:options.paramName;options.headers=$.extend({},options.headers),options.contentRange&&(options.headers["Content-Range"]=options.contentRange),multipart&&!options.blob&&this._isInstanceOf("File",file)||(options.headers["Content-Disposition"]='attachment; filename="'+encodeURI(file.name)+'"'),multipart?$.support.xhrFormDataFileUpload&&(options.postMessage?(formData=this._getFormData(options),options.blob?formData.push({name:paramName,value:options.blob}):$.each(options.files,function(index,file){formData.push({name:"array"===$.type(options.paramName)&&options.paramName[index]||paramName,value:file})})):(that._isInstanceOf("FormData",options.formData)?formData=options.formData:(formData=new FormData,$.each(this._getFormData(options),function(index,field){formData.append(field.name,field.value)})),options.blob?formData.append(paramName,options.blob,file.name):$.each(options.files,function(index,file){(that._isInstanceOf("File",file)||that._isInstanceOf("Blob",file))&&formData.append("array"===$.type(options.paramName)&&options.paramName[index]||paramName,file,file.uploadName||file.name)})),options.data=formData):(options.contentType=file.type||"application/octet-stream",options.data=options.blob||file),options.blob=null},_initIframeSettings:function(options){var targetHost=$("<a></a>").prop("href",options.url).prop("host");options.dataType="iframe "+(options.dataType||""),options.formData=this._getFormData(options),options.redirect&&targetHost&&targetHost!==location.host&&options.formData.push({name:options.redirectParamName||"redirect",value:options.redirect})},_initDataSettings:function(options){this._isXHRUpload(options)?(this._chunkedUpload(options,!0)||(options.data||this._initXHRData(options),this._initProgressListener(options)),options.postMessage&&(options.dataType="postmessage "+(options.dataType||""))):this._initIframeSettings(options)},_getParamName:function(options){var fileInput=$(options.fileInput),paramName=options.paramName;return paramName?$.isArray(paramName)||(paramName=[paramName]):(paramName=[],fileInput.each(function(){for(var input=$(this),name=input.prop("name")||"files[]",i=(input.prop("files")||[1]).length;i;)paramName.push(name),i-=1}),paramName.length||(paramName=[fileInput.prop("name")||"files[]"])),paramName},_initFormSettings:function(options){options.form&&options.form.length||(options.form=$(options.fileInput.prop("form")),options.form.length||(options.form=$(this.options.fileInput.prop("form")))),options.paramName=this._getParamName(options),options.url||(options.url=options.form.prop("action")||location.href),options.type=(options.type||"string"===$.type(options.form.prop("method"))&&options.form.prop("method")||"").toUpperCase(),"POST"!==options.type&&"PUT"!==options.type&&"PATCH"!==options.type&&(options.type="POST"),options.formAcceptCharset||(options.formAcceptCharset=options.form.attr("accept-charset"))},_getAJAXSettings:function(data){var options=$.extend({},this.options,data);return this._initFormSettings(options),this._initDataSettings(options),options},_getDeferredState:function(deferred){return deferred.state?deferred.state():deferred.isResolved()?"resolved":deferred.isRejected()?"rejected":"pending"},_enhancePromise:function(promise){return promise.success=promise.done,promise.error=promise.fail,promise.complete=promise.always,promise},_getXHRPromise:function(resolveOrReject,context,args){var dfd=$.Deferred(),promise=dfd.promise();return context=context||this.options.context||promise,resolveOrReject===!0?dfd.resolveWith(context,args):resolveOrReject===!1&&dfd.rejectWith(context,args),promise.abort=dfd.promise,this._enhancePromise(promise)},_addConvenienceMethods:function(e,data){var that=this,getPromise=function(args){return $.Deferred().resolveWith(that,args).promise()};data.process=function(resolveFunc,rejectFunc){return(resolveFunc||rejectFunc)&&(data._processQueue=this._processQueue=(this._processQueue||getPromise([this])).pipe(function(){return data.errorThrown?$.Deferred().rejectWith(that,[data]).promise():getPromise(arguments)}).pipe(resolveFunc,rejectFunc)),this._processQueue||getPromise([this])},data.submit=function(){return"pending"!==this.state()&&(data.jqXHR=this.jqXHR=that._trigger("submit",$.Event("submit",{delegatedEvent:e}),this)!==!1&&that._onSend(e,this)),this.jqXHR||that._getXHRPromise()},data.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",that._trigger("fail",null,this),that._getXHRPromise(!1))},data.state=function(){return this.jqXHR?that._getDeferredState(this.jqXHR):this._processQueue?that._getDeferredState(this._processQueue):void 0},data.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===that._getDeferredState(this._processQueue)},data.progress=function(){return this._progress},data.response=function(){return this._response}},_getUploadedBytes:function(jqXHR){var range=jqXHR.getResponseHeader("Range"),parts=range&&range.split("-"),upperBytesPos=parts&&parts.length>1&&parseInt(parts[1],10);return upperBytesPos&&upperBytesPos+1},_chunkedUpload:function(options,testOnly){options.uploadedBytes=options.uploadedBytes||0;var jqXHR,upload,that=this,file=options.files[0],fs=file.size,ub=options.uploadedBytes,mcs=options.maxChunkSize||fs,slice=this._blobSlice,dfd=$.Deferred(),promise=dfd.promise();return this._isXHRUpload(options)&&slice&&(ub||fs>mcs)&&!options.data?testOnly?!0:ub>=fs?(file.error=options.i18n("uploadedBytes"),this._getXHRPromise(!1,options.context,[null,"error",file.error])):(upload=function(){var o=$.extend({},options),currentLoaded=o._progress.loaded;o.blob=slice.call(file,ub,ub+mcs,file.type),o.chunkSize=o.blob.size,o.contentRange="bytes "+ub+"-"+(ub+o.chunkSize-1)+"/"+fs,that._initXHRData(o),that._initProgressListener(o),jqXHR=(that._trigger("chunksend",null,o)!==!1&&$.ajax(o)||that._getXHRPromise(!1,o.context)).done(function(result,textStatus,jqXHR){ub=that._getUploadedBytes(jqXHR)||ub+o.chunkSize,currentLoaded+o.chunkSize-o._progress.loaded&&that._onProgress($.Event("progress",{lengthComputable:!0,loaded:ub-o.uploadedBytes,total:ub-o.uploadedBytes}),o),options.uploadedBytes=o.uploadedBytes=ub,o.result=result,o.textStatus=textStatus,o.jqXHR=jqXHR,that._trigger("chunkdone",null,o),that._trigger("chunkalways",null,o),fs>ub?upload():dfd.resolveWith(o.context,[result,textStatus,jqXHR])}).fail(function(jqXHR,textStatus,errorThrown){o.jqXHR=jqXHR,o.textStatus=textStatus,o.errorThrown=errorThrown,that._trigger("chunkfail",null,o),that._trigger("chunkalways",null,o),dfd.rejectWith(o.context,[jqXHR,textStatus,errorThrown])})},this._enhancePromise(promise),promise.abort=function(){return jqXHR.abort()},upload(),promise):!1},_beforeSend:function(e,data){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(data),this._initProgressObject(data),data._progress.loaded=data.loaded=data.uploadedBytes||0,data._progress.total=data.total=this._getTotal(data.files)||1,data._progress.bitrate=data.bitrate=0,this._active+=1,this._progress.loaded+=data.loaded,this._progress.total+=data.total},_onDone:function(result,textStatus,jqXHR,options){var total=options._progress.total,response=options._response;options._progress.loaded<total&&this._onProgress($.Event("progress",{lengthComputable:!0,loaded:total,total:total}),options),response.result=options.result=result,response.textStatus=options.textStatus=textStatus,response.jqXHR=options.jqXHR=jqXHR,this._trigger("done",null,options)},_onFail:function(jqXHR,textStatus,errorThrown,options){var response=options._response;options.recalculateProgress&&(this._progress.loaded-=options._progress.loaded,this._progress.total-=options._progress.total),response.jqXHR=options.jqXHR=jqXHR,response.textStatus=options.textStatus=textStatus,response.errorThrown=options.errorThrown=errorThrown,this._trigger("fail",null,options)},_onAlways:function(jqXHRorResult,textStatus,jqXHRorError,options){this._trigger("always",null,options)},_onSend:function(e,data){data.submit||this._addConvenienceMethods(e,data);var jqXHR,aborted,slot,pipe,that=this,options=that._getAJAXSettings(data),send=function(){return that._sending+=1,options._bitrateTimer=new that._BitrateTimer,jqXHR=jqXHR||((aborted||that._trigger("send",$.Event("send",{delegatedEvent:e}),options)===!1)&&that._getXHRPromise(!1,options.context,aborted)||that._chunkedUpload(options)||$.ajax(options)).done(function(result,textStatus,jqXHR){that._onDone(result,textStatus,jqXHR,options)}).fail(function(jqXHR,textStatus,errorThrown){that._onFail(jqXHR,textStatus,errorThrown,options)}).always(function(jqXHRorResult,textStatus,jqXHRorError){if(that._onAlways(jqXHRorResult,textStatus,jqXHRorError,options),that._sending-=1,that._active-=1,options.limitConcurrentUploads&&options.limitConcurrentUploads>that._sending)for(var nextSlot=that._slots.shift();nextSlot;){if("pending"===that._getDeferredState(nextSlot)){nextSlot.resolve();break}nextSlot=that._slots.shift()}0===that._active&&that._trigger("stop")})};return this._beforeSend(e,options),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(slot=$.Deferred(),this._slots.push(slot),pipe=slot.pipe(send)):(this._sequence=this._sequence.pipe(send,send),pipe=this._sequence),pipe.abort=function(){return aborted=[void 0,"abort","abort"],jqXHR?jqXHR.abort():(slot&&slot.rejectWith(options.context,aborted),send())},this._enhancePromise(pipe)):send()},_onAdd:function(e,data){var paramNameSet,paramNameSlice,fileSet,i,that=this,result=!0,options=$.extend({},this.options,data),files=data.files,filesLength=files.length,limit=options.limitMultiFileUploads,limitSize=options.limitMultiFileUploadSize,overhead=options.limitMultiFileUploadSizeOverhead,batchSize=0,paramName=this._getParamName(options),j=0;if(!limitSize||filesLength&&void 0!==files[0].size||(limitSize=void 0),(options.singleFileUploads||limit||limitSize)&&this._isXHRUpload(options))if(options.singleFileUploads||limitSize||!limit)if(!options.singleFileUploads&&limitSize)for(fileSet=[],paramNameSet=[],i=0;filesLength>i;i+=1)batchSize+=files[i].size+overhead,(i+1===filesLength||batchSize+files[i+1].size+overhead>limitSize||limit&&i+1-j>=limit)&&(fileSet.push(files.slice(j,i+1)),paramNameSlice=paramName.slice(j,i+1),paramNameSlice.length||(paramNameSlice=paramName),paramNameSet.push(paramNameSlice),j=i+1,batchSize=0);else paramNameSet=paramName;else for(fileSet=[],paramNameSet=[],i=0;filesLength>i;i+=limit)fileSet.push(files.slice(i,i+limit)),paramNameSlice=paramName.slice(i,i+limit),paramNameSlice.length||(paramNameSlice=paramName),paramNameSet.push(paramNameSlice);else fileSet=[files],paramNameSet=[paramName];return data.originalFiles=files,$.each(fileSet||files,function(index,element){var newData=$.extend({},data);return newData.files=fileSet?element:[element],newData.paramName=paramNameSet[index],that._initResponseObject(newData),that._initProgressObject(newData),that._addConvenienceMethods(e,newData),result=that._trigger("add",$.Event("add",{delegatedEvent:e}),newData)}),result},_replaceFileInput:function(input){var inputClone=input.clone(!0);$("<form></form>").append(inputClone)[0].reset(),input.after(inputClone).detach(),$.cleanData(input.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(i,el){return el===input[0]?inputClone[0]:el}),input[0]===this.element[0]&&(this.element=inputClone)},_handleFileTreeEntry:function(entry,path){var dirReader,that=this,dfd=$.Deferred(),errorHandler=function(e){e&&!e.entry&&(e.entry=entry),dfd.resolve([e])};return path=path||"",entry.isFile?entry._file?(entry._file.relativePath=path,dfd.resolve(entry._file)):entry.file(function(file){file.relativePath=path,dfd.resolve(file)},errorHandler):entry.isDirectory?(dirReader=entry.createReader(),dirReader.readEntries(function(entries){that._handleFileTreeEntries(entries,path+entry.name+"/").done(function(files){dfd.resolve(files)}).fail(errorHandler)},errorHandler)):dfd.resolve([]),dfd.promise()},_handleFileTreeEntries:function(entries,path){var that=this;return $.when.apply($,$.map(entries,function(entry){return that._handleFileTreeEntry(entry,path)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(dataTransfer){dataTransfer=dataTransfer||{};var items=dataTransfer.items;return items&&items.length&&(items[0].webkitGetAsEntry||items[0].getAsEntry)?this._handleFileTreeEntries($.map(items,function(item){var entry;return item.webkitGetAsEntry?(entry=item.webkitGetAsEntry(),entry&&(entry._file=item.getAsFile()),entry):item.getAsEntry()})):$.Deferred().resolve($.makeArray(dataTransfer.files)).promise()},_getSingleFileInputFiles:function(fileInput){fileInput=$(fileInput);var files,value,entries=fileInput.prop("webkitEntries")||fileInput.prop("entries");if(entries&&entries.length)return this._handleFileTreeEntries(entries);if(files=$.makeArray(fileInput.prop("files")),files.length)void 0===files[0].name&&files[0].fileName&&$.each(files,function(index,file){file.name=file.fileName,file.size=file.fileSize});else{if(value=fileInput.prop("value"),!value)return $.Deferred().resolve([]).promise();files=[{name:value.replace(/^.*\\/,"")}]}return $.Deferred().resolve(files).promise()},_getFileInputFiles:function(fileInput){return fileInput instanceof $&&1!==fileInput.length?$.when.apply($,$.map(fileInput,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(fileInput)},_onChange:function(e){var that=this,data={fileInput:$(e.target),form:$(e.target.form)};this._getFileInputFiles(data.fileInput).always(function(files){data.files=files,that.options.replaceFileInput&&that._replaceFileInput(data.fileInput),that._trigger("change",$.Event("change",{delegatedEvent:e}),data)!==!1&&that._onAdd(e,data)})},_onPaste:function(e){var items=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items,data={files:[]};items&&items.length&&($.each(items,function(index,item){var file=item.getAsFile&&item.getAsFile();file&&data.files.push(file)}),this._trigger("paste",$.Event("paste",{delegatedEvent:e}),data)!==!1&&this._onAdd(e,data))},_onDrop:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var that=this,dataTransfer=e.dataTransfer,data={};dataTransfer&&dataTransfer.files&&dataTransfer.files.length&&(e.preventDefault(),this._getDroppedFiles(dataTransfer).always(function(files){data.files=files,that._trigger("drop",$.Event("drop",{delegatedEvent:e}),data)!==!1&&that._onAdd(e,data)}))},_onDragOver:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var dataTransfer=e.dataTransfer;dataTransfer&&-1!==$.inArray("Files",dataTransfer.types)&&this._trigger("dragover",$.Event("dragover",{delegatedEvent:e}))!==!1&&(e.preventDefault(),dataTransfer.dropEffect="copy")},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),$.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(key,value){var reinit=-1!==$.inArray(key,this._specialOptions);reinit&&this._destroyEventHandlers(),this._super(key,value),reinit&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var options=this.options;void 0===options.fileInput?options.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):options.fileInput instanceof $||(options.fileInput=$(options.fileInput)),options.dropZone instanceof $||(options.dropZone=$(options.dropZone)),options.pasteZone instanceof $||(options.pasteZone=$(options.pasteZone))},_getRegExp:function(str){var parts=str.split("/"),modifiers=parts.pop();return parts.shift(),new RegExp(parts.join("/"),modifiers)},_isRegExpOption:function(key,value){return"url"!==key&&"string"===$.type(value)&&/^\/.*\/[igm]{0,3}$/.test(value)},_initDataAttributes:function(){var that=this,options=this.options,clone=$(this.element[0].cloneNode(!1));$.each(clone.data(),function(key,value){var dataAttributeName="data-"+key.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();clone.attr(dataAttributeName)&&(that._isRegExpOption(key,value)&&(value=that._getRegExp(value)),options[key]=value)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(data){var that=this;data&&!this.options.disabled&&(data.fileInput&&!data.files?this._getFileInputFiles(data.fileInput).always(function(files){data.files=files,that._onAdd(null,data)}):(data.files=$.makeArray(data.files),this._onAdd(null,data)))},send:function(data){if(data&&!this.options.disabled){if(data.fileInput&&!data.files){var jqXHR,aborted,that=this,dfd=$.Deferred(),promise=dfd.promise();return promise.abort=function(){return aborted=!0,jqXHR?jqXHR.abort():(dfd.reject(null,"abort","abort"),promise)},this._getFileInputFiles(data.fileInput).always(function(files){if(!aborted){if(!files.length)return void dfd.reject();data.files=files,jqXHR=that._onSend(null,data).then(function(result,textStatus,jqXHR){dfd.resolve(result,textStatus,jqXHR)},function(jqXHR,textStatus,errorThrown){dfd.reject(jqXHR,textStatus,errorThrown)})}}),this._enhancePromise(promise)}if(data.files=$.makeArray(data.files),data.files.length)return this._onSend(null,data)}return this._getXHRPromise(!1,data&&data.context)}})}),function(factory){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],factory):factory(window.jQuery)}(function($){"use strict";var originalAdd=$.blueimp.fileupload.prototype.options.add;$.widget("blueimp.fileupload",$.blueimp.fileupload,{options:{processQueue:[],add:function(e,data){var $this=$(this);data.process(function(){return $this.fileupload("process",data)}),originalAdd.call(this,e,data)}},processActions:{},_processFile:function(data,originalData){var that=this,dfd=$.Deferred().resolveWith(that,[data]),chain=dfd.promise();return this._trigger("process",null,data),$.each(data.processQueue,function(i,settings){var func=function(data){return originalData.errorThrown?$.Deferred().rejectWith(that,[originalData]).promise():that.processActions[settings.action].call(that,data,settings)};chain=chain.pipe(func,settings.always&&func)}),chain.done(function(){that._trigger("processdone",null,data),that._trigger("processalways",null,data)}).fail(function(){that._trigger("processfail",null,data),that._trigger("processalways",null,data)}),chain},_transformProcessQueue:function(options){var processQueue=[];$.each(options.processQueue,function(){var settings={},action=this.action,prefix=this.prefix===!0?action:this.prefix;$.each(this,function(key,value){"string"===$.type(value)&&"@"===value.charAt(0)?settings[key]=options[value.slice(1)||(prefix?prefix+key.charAt(0).toUpperCase()+key.slice(1):key)]:settings[key]=value}),processQueue.push(settings)}),options.processQueue=processQueue},processing:function(){return this._processing},process:function(data){var that=this,options=$.extend({},this.options,data);return options.processQueue&&options.processQueue.length&&(this._transformProcessQueue(options),0===this._processing&&this._trigger("processstart"),$.each(data.files,function(index){var opts=index?$.extend({},options):options,func=function(){return data.errorThrown?$.Deferred().rejectWith(that,[data]).promise():that._processFile(opts,data)};opts.index=index,that._processing+=1,that._processingQueue=that._processingQueue.pipe(func,func).always(function(){that._processing-=1,0===that._processing&&that._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=$.Deferred().resolveWith(this).promise()}})}),!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.io=e():t.io=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t,e){"object"===("undefined"==typeof t?"undefined":o(t))&&(e=t,t=void 0),e=e||{};var r,n=i(t),s=n.source,h=n.id,p=n.path,u=c[h]&&p in c[h].nsps,f=e.forceNew||e["force new connection"]||!1===e.multiplex||u;return f?r=a(s,e):(c[h]||(c[h]=a(s,e)),r=c[h]),n.query&&!e.query&&(e.query=n.query),r.socket(n.path,e)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=r(1),s=r(4),a=r(10);r(3)("socket.io-client"),t.exports=e=n;var c=e.managers={};e.protocol=s.protocol,e.connect=n,e.Manager=r(10),e.Socket=r(34)},function(t,e,r){(function(e){"use strict";function n(t,r){var n=t;r=r||e.location,null==t&&(t=r.protocol+"//"+r.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?r.protocol+t:r.host+t),/^(https?|wss?):\/\//.test(t)||(t="undefined"!=typeof r?r.protocol+"//"+t:"https://"+t),n=o(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var i=-1!==n.host.indexOf(":"),s=i?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+s+":"+n.port,n.href=n.protocol+"://"+s+(r&&r.port===n.port?"":":"+n.port),n}var o=r(2);r(3)("socket.io-client:url"),t.exports=n}).call(e,function(){return this}())},function(t,e){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,o=t.indexOf("["),i=t.indexOf("]");-1!=o&&-1!=i&&(t=t.substring(0,o)+t.substring(o,i).replace(/:/g,";")+t.substring(i,t.length));for(var s=r.exec(t||""),a={},c=14;c--;)a[n[c]]=s[c]||"";return-1!=o&&-1!=i&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(t,e){"use strict";t.exports=function(){return function(){}}},function(t,e,r){function n(){}function o(t){var r=""+t.type;return e.BINARY_EVENT!==t.type&&e.BINARY_ACK!==t.type||(r+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(r+=t.nsp+","),null!=t.id&&(r+=t.id),null!=t.data&&(r+=JSON.stringify(t.data)),r}function i(t,e){function r(t){var r=l.deconstructPacket(t),n=o(r.packet),i=r.buffers;i.unshift(n),e(i)}l.removeBlobs(t,r)}function s(){this.reconstructor=null}function a(t){var r=0,n={type:Number(t.charAt(0))};if(null==e.types[n.type])return p();if(e.BINARY_EVENT===n.type||e.BINARY_ACK===n.type){for(var o="";"-"!==t.charAt(++r)&&(o+=t.charAt(r),r!=t.length););if(o!=Number(o)||"-"!==t.charAt(r))throw new Error("Illegal attachments");n.attachments=Number(o)}if("/"===t.charAt(r+1))for(n.nsp="";++r;){var i=t.charAt(r);if(","===i)break;if(n.nsp+=i,r===t.length)break}else n.nsp="/";var s=t.charAt(r+1);if(""!==s&&Number(s)==s){for(n.id="";++r;){var i=t.charAt(r);if(null==i||Number(i)!=i){--r;break}if(n.id+=t.charAt(r),r===t.length)break}n.id=Number(n.id)}return t.charAt(++r)&&(n=c(n,t.substr(r))),n}function c(t,e){try{t.data=JSON.parse(e)}catch(t){return p()}return t}function h(t){this.reconPack=t,this.buffers=[]}function p(){return{type:e.ERROR,data:"parser error"}}var u=(r(3)("socket.io-parser"),r(5)),f=r(6),l=r(8),d=r(9);e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=n,e.Decoder=s,n.prototype.encode=function(t,r){if(t.type!==e.EVENT&&t.type!==e.ACK||!f(t.data)||(t.type=t.type===e.EVENT?e.BINARY_EVENT:e.BINARY_ACK),e.BINARY_EVENT===t.type||e.BINARY_ACK===t.type)i(t,r);else{var n=o(t);r([n])}},u(s.prototype),s.prototype.add=function(t){var r;if("string"==typeof t)r=a(t),e.BINARY_EVENT===r.type||e.BINARY_ACK===r.type?(this.reconstructor=new h(r),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",r)):this.emit("decoded",r);else{if(!d(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,this.emit("decoded",r))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},h.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=l.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},h.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(t,e,r){function n(t){return t?o(t):void 0}function o(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},n.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===e||n.fn===e){r.splice(o,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks["$"+t];if(r){r=r.slice(0);for(var n=0,o=r.length;o>n;++n)r[n].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,r){(function(e){function n(t){if(!t||"object"!=typeof t)return!1;if(o(t)){for(var r=0,i=t.length;i>r;r++)if(n(t[r]))return!0;return!1}if("function"==typeof e.Buffer&&e.Buffer.isBuffer&&e.Buffer.isBuffer(t)||"function"==typeof e.ArrayBuffer&&t instanceof ArrayBuffer||s&&t instanceof Blob||a&&t instanceof File)return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return n(t.toJSON(),!0);for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)&&n(t[c]))return!0;return!1}var o=r(7),i=Object.prototype.toString,s="function"==typeof e.Blob||"[object BlobConstructor]"===i.call(e.Blob),a="function"==typeof e.File||"[object FileConstructor]"===i.call(e.File);t.exports=n}).call(e,function(){return this}())},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){(function(t){function n(t,e){if(!t)return t;if(s(t)){var r={_placeholder:!0,num:e.length};return e.push(t),r}if(i(t)){for(var o=new Array(t.length),a=0;a<t.length;a++)o[a]=n(t[a],e);return o}if("object"==typeof t&&!(t instanceof Date)){var o={};for(var c in t)o[c]=n(t[c],e);return o}return t}function o(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(i(t))for(var r=0;r<t.length;r++)t[r]=o(t[r],e);else if("object"==typeof t)for(var n in t)t[n]=o(t[n],e);return t}var i=r(7),s=r(9),a=Object.prototype.toString,c="function"==typeof t.Blob||"[object BlobConstructor]"===a.call(t.Blob),h="function"==typeof t.File||"[object FileConstructor]"===a.call(t.File);e.deconstructPacket=function(t){var e=[],r=t.data,o=t;return o.data=n(r,e),o.attachments=e.length,{packet:o,buffers:e}},e.reconstructPacket=function(t,e){return t.data=o(t.data,e),t.attachments=void 0,t},e.removeBlobs=function(t,e){function r(t,a,p){if(!t)return t;if(c&&t instanceof Blob||h&&t instanceof File){n++;var u=new FileReader;u.onload=function(){p?p[a]=this.result:o=this.result,--n||e(o)},u.readAsArrayBuffer(t)}else if(i(t))for(var f=0;f<t.length;f++)r(t[f],f,t);else if("object"==typeof t&&!s(t))for(var l in t)r(t[l],l,t)}var n=0,o=t;r(o),n||e(o)}}).call(e,function(){return this}())},function(t,e){(function(e){function r(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}t.exports=r}).call(e,function(){return this}())},function(t,e,r){"use strict";function n(t,e){if(!(this instanceof n))return new n(t,e);t&&"object"===("undefined"==typeof t?"undefined":o(t))&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),
this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var r=e.parser||c;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this.autoConnect=e.autoConnect!==!1,this.autoConnect&&this.open()}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=r(11),s=r(34),a=r(5),c=r(4),h=r(36),p=r(37),u=(r(3)("socket.io-client:manager"),r(33)),f=r(38),l=Object.prototype.hasOwnProperty;t.exports=n,n.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)l.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},n.prototype.updateSocketIds=function(){for(var t in this.nsps)l.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},n.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},a(n.prototype),n.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},n.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},n.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},n.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},n.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},n.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},n.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},n.prototype.open=n.prototype.connect=function(t,e){if(~this.readyState.indexOf("open"))return this;this.engine=i(this.uri,this.opts);var r=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var o=h(r,"open",function(){n.onopen(),t&&t()}),s=h(r,"error",function(e){if(n.cleanup(),n.readyState="closed",n.emitAll("connect_error",e),t){var r=new Error("Connection error");r.data=e,t(r)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout,c=setTimeout(function(){o.destroy(),r.close(),r.emit("error","timeout"),n.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(c)}})}return this.subs.push(o),this.subs.push(s),this},n.prototype.onopen=function(){this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(h(t,"data",p(this,"ondata"))),this.subs.push(h(t,"ping",p(this,"onping"))),this.subs.push(h(t,"pong",p(this,"onpong"))),this.subs.push(h(t,"error",p(this,"onerror"))),this.subs.push(h(t,"close",p(this,"onclose"))),this.subs.push(h(this.decoder,"decoded",p(this,"ondecoded")))},n.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},n.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},n.prototype.ondata=function(t){this.decoder.add(t)},n.prototype.ondecoded=function(t){this.emit("packet",t)},n.prototype.onerror=function(t){this.emitAll("error",t)},n.prototype.socket=function(t,e){function r(){~u(o.connecting,n)||o.connecting.push(n)}var n=this.nsps[t];if(!n){n=new s(this,t,e),this.nsps[t]=n;var o=this;n.on("connecting",r),n.on("connect",function(){n.id=o.generateId(t)}),this.autoConnect&&r()}return n},n.prototype.destroy=function(t){var e=u(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},n.prototype.packet=function(t){var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(r){for(var n=0;n<r.length;n++)e.engine.write(r[n],t.options);e.encoding=!1,e.processPacketQueue()}))},n.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},n.prototype.cleanup=function(){for(var t=this.subs.length,e=0;t>e;e++){var r=this.subs.shift();r.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},n.prototype.close=n.prototype.disconnect=function(){this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},n.prototype.onclose=function(t){this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},n.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();this.reconnecting=!0;var r=setTimeout(function(){t.skipReconnect||(t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):t.onreconnect()}))},e);this.subs.push({destroy:function(){clearTimeout(r)}})}},n.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},function(t,e,r){t.exports=r(12),t.exports.parser=r(19)},function(t,e,r){(function(e){function n(t,r){if(!(this instanceof n))return new n(t,r);r=r||{},t&&"object"==typeof t&&(r=t,t=null),t?(t=h(t),r.hostname=t.host,r.secure="https"===t.protocol||"wss"===t.protocol,r.port=t.port,t.query&&(r.query=t.query)):r.host&&(r.hostname=h(r.host).host),this.secure=null!=r.secure?r.secure:e.location&&"https:"===location.protocol,r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.agent=r.agent||!1,this.hostname=r.hostname||(e.location?location.hostname:"localhost"),this.port=r.port||(e.location&&location.port?location.port:this.secure?443:80),this.query=r.query||{},"string"==typeof this.query&&(this.query=p.decode(this.query)),this.upgrade=!1!==r.upgrade,this.path=(r.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!r.forceJSONP,this.jsonp=!1!==r.jsonp,this.forceBase64=!!r.forceBase64,this.enablesXDR=!!r.enablesXDR,this.timestampParam=r.timestampParam||"t",this.timestampRequests=r.timestampRequests,this.transports=r.transports||["polling","websocket"],this.transportOptions=r.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=r.policyPort||843,this.rememberUpgrade=r.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=r.onlyBinaryUpgrades,this.perMessageDeflate=!1!==r.perMessageDeflate&&(r.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=r.pfx||null,this.key=r.key||null,this.passphrase=r.passphrase||null,this.cert=r.cert||null,this.ca=r.ca||null,this.ciphers=r.ciphers||null,this.rejectUnauthorized=void 0===r.rejectUnauthorized||r.rejectUnauthorized,this.forceNode=!!r.forceNode;var o="object"==typeof e&&e;o.global===o&&(r.extraHeaders&&Object.keys(r.extraHeaders).length>0&&(this.extraHeaders=r.extraHeaders),r.localAddress&&(this.localAddress=r.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function o(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}var i=r(13),s=r(5),a=(r(3)("engine.io-client:socket"),r(33)),c=r(19),h=r(2),p=r(27);t.exports=n,n.priorWebsocketSuccess=!1,s(n.prototype),n.protocol=c.protocol,n.Socket=n,n.Transport=r(18),n.transports=r(13),n.parser=r(19),n.prototype.createTransport=function(t){var e=o(this.query);e.EIO=c.protocol,e.transport=t;var r=this.transportOptions[t]||{};this.id&&(e.sid=this.id);var n=new i[t]({query:e,socket:this,agent:r.agent||this.agent,hostname:r.hostname||this.hostname,port:r.port||this.port,secure:r.secure||this.secure,path:r.path||this.path,forceJSONP:r.forceJSONP||this.forceJSONP,jsonp:r.jsonp||this.jsonp,forceBase64:r.forceBase64||this.forceBase64,enablesXDR:r.enablesXDR||this.enablesXDR,timestampRequests:r.timestampRequests||this.timestampRequests,timestampParam:r.timestampParam||this.timestampParam,policyPort:r.policyPort||this.policyPort,pfx:r.pfx||this.pfx,key:r.key||this.key,passphrase:r.passphrase||this.passphrase,cert:r.cert||this.cert,ca:r.ca||this.ca,ciphers:r.ciphers||this.ciphers,rejectUnauthorized:r.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:r.perMessageDeflate||this.perMessageDeflate,extraHeaders:r.extraHeaders||this.extraHeaders,forceNode:r.forceNode||this.forceNode,localAddress:r.localAddress||this.localAddress,requestTimeout:r.requestTimeout||this.requestTimeout,protocols:r.protocols||void 0});return n},n.prototype.open=function(){var t;if(this.rememberUpgrade&&n.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},n.prototype.setTransport=function(t){var e=this;this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},n.prototype.probe=function(t){function e(){if(u.onlyBinaryUpgrades){var t=!this.supportsBinary&&u.transport.supportsBinary;p=p||t}p||(h.send([{type:"ping",data:"probe"}]),h.once("packet",function(t){if(!p)if("pong"===t.type&&"probe"===t.data){if(u.upgrading=!0,u.emit("upgrading",h),!h)return;n.priorWebsocketSuccess="websocket"===h.name,u.transport.pause(function(){p||"closed"!==u.readyState&&(c(),u.setTransport(h),h.send([{type:"upgrade"}]),u.emit("upgrade",h),h=null,u.upgrading=!1,u.flush())})}else{var e=new Error("probe error");e.transport=h.name,u.emit("upgradeError",e)}}))}function r(){p||(p=!0,c(),h.close(),h=null)}function o(t){var e=new Error("probe error: "+t);e.transport=h.name,r(),u.emit("upgradeError",e)}function i(){o("transport closed")}function s(){o("socket closed")}function a(t){h&&t.name!==h.name&&r()}function c(){h.removeListener("open",e),h.removeListener("error",o),h.removeListener("close",i),u.removeListener("close",s),u.removeListener("upgrading",a)}var h=this.createTransport(t,{probe:1}),p=!1,u=this;n.priorWebsocketSuccess=!1,h.once("open",e),h.once("error",o),h.once("close",i),this.once("close",s),this.once("upgrading",a),h.open()},n.prototype.onOpen=function(){if(this.readyState="open",n.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause)for(var t=0,e=this.upgrades.length;e>t;t++)this.probe(this.upgrades[t])},n.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}},n.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},n.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!==e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},n.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},n.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},n.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},n.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},n.prototype.write=n.prototype.send=function(t,e,r){return this.sendPacket("message",t,e,r),this},n.prototype.sendPacket=function(t,e,r,n){if("function"==typeof e&&(n=e,e=void 0),"function"==typeof r&&(n=r,r=null),"closing"!==this.readyState&&"closed"!==this.readyState){r=r||{},r.compress=!1!==r.compress;var o={type:t,data:e,options:r};this.emit("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}},n.prototype.close=function(){function t(){n.onClose("forced close"),n.transport.close()}function e(){n.removeListener("upgrade",e),n.removeListener("upgradeError",e),t()}function r(){n.once("upgrade",e),n.once("upgradeError",e)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var n=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():t()}):this.upgrading?r():t()}return this},n.prototype.onError=function(t){n.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},n.prototype.onClose=function(t,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){var r=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),r.writeBuffer=[],r.prevBufferLen=0}},n.prototype.filterUpgrades=function(t){for(var e=[],r=0,n=t.length;n>r;r++)~a(this.transports,t[r])&&e.push(t[r]);return e}}).call(e,function(){return this}())},function(t,e,r){(function(t){function n(e){var r,n=!1,a=!1,c=!1!==e.jsonp;if(t.location){var h="https:"===location.protocol,p=location.port;p||(p=h?443:80),n=e.hostname!==location.hostname||p!==e.port,a=e.secure!==h}if(e.xdomain=n,e.xscheme=a,r=new o(e),"open"in r&&!e.forceJSONP)return new i(e);if(!c)throw new Error("JSONP disabled");return new s(e)}var o=r(14),i=r(16),s=r(30),a=r(31);e.polling=n,e.websocket=a}).call(e,function(){return this}())},function(t,e,r){(function(e){var n=r(15);t.exports=function(t){var r=t.xdomain,o=t.xscheme,i=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!r||n))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!o&&i)return new XDomainRequest}catch(t){}if(!r)try{return new(e[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}}).call(e,function(){return this}())},function(t,e){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},function(t,e,r){(function(e){function n(){}function o(t){if(c.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,e.location){var r="https:"===location.protocol,n=location.port;n||(n=r?443:80),this.xd=t.hostname!==e.location.hostname||n!==t.port,this.xs=t.secure!==r}}function i(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function s(){for(var t in i.requests)i.requests.hasOwnProperty(t)&&i.requests[t].abort()}var a=r(14),c=r(17),h=r(5),p=r(28);r(3)("engine.io-client:polling-xhr"),t.exports=o,t.exports.Request=i,p(o,c),o.prototype.supportsBinary=!0,o.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new i(t)},o.prototype.doWrite=function(t,e){var r="string"!=typeof t&&void 0!==t,n=this.request({method:"POST",data:t,isBinary:r}),o=this;n.on("success",e),n.on("error",function(t){o.onError("xhr post error",t)}),this.sendXhr=n},o.prototype.doPoll=function(){var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},h(i.prototype),i.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var r=this.xhr=new a(t),n=this;try{r.open(this.method,this.uri,this.async);try{if(this.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(var o in this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&r.setRequestHeader(o,this.extraHeaders[o])}}catch(t){}if("POST"===this.method)try{this.isBinary?r.setRequestHeader("Content-type","application/octet-stream"):r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{r.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in r&&(r.withCredentials=!0),this.requestTimeout&&(r.timeout=this.requestTimeout),this.hasXDR()?(r.onload=function(){n.onLoad()},r.onerror=function(){n.onError(r.responseText)}):r.onreadystatechange=function(){if(2===r.readyState){var t;try{t=r.getResponseHeader("Content-Type")}catch(t){}"application/octet-stream"===t&&(r.responseType="arraybuffer")}4===r.readyState&&(200===r.status||1223===r.status?n.onLoad():setTimeout(function(){n.onError(r.status)},0))},r.send(this.data)}catch(t){return void setTimeout(function(){n.onError(t)},0)}e.document&&(this.index=i.requestsCount++,i.requests[this.index]=this)},i.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},i.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},i.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},i.prototype.cleanup=function(t){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=n:this.xhr.onreadystatechange=n,t)try{this.xhr.abort()}catch(t){}e.document&&delete i.requests[this.index],this.xhr=null}},i.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch(t){}t="application/octet-stream"===e?this.xhr.response||this.xhr.responseText:this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},i.prototype.hasXDR=function(){return"undefined"!=typeof e.XDomainRequest&&!this.xs&&this.enablesXDR},i.prototype.abort=function(){this.cleanup()},i.requestsCount=0,i.requests={},e.document&&(e.attachEvent?e.attachEvent("onunload",s):e.addEventListener&&e.addEventListener("beforeunload",s,!1))}).call(e,function(){return this}())},function(t,e,r){function n(t){var e=t&&t.forceBase64;h&&!e||(this.supportsBinary=!1),o.call(this,t)}var o=r(18),i=r(27),s=r(19),a=r(28),c=r(29);r(3)("engine.io-client:polling"),t.exports=n;var h=function(){var t=r(14),e=new t({xdomain:!1});return null!=e.responseType}();a(n,o),n.prototype.name="polling",n.prototype.doOpen=function(){this.poll()},n.prototype.pause=function(t){function e(){r.readyState="paused",t()}var r=this;if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(n++,this.once("pollComplete",function(){--n||e()})),this.writable||(n++,this.once("drain",function(){--n||e()}))}else e()},n.prototype.poll=function(){this.polling=!0,this.doPoll(),this.emit("poll")},n.prototype.onData=function(t){var e=this,r=function(t,r,n){return"opening"===e.readyState&&e.onOpen(),"close"===t.type?(e.onClose(),!1):void e.onPacket(t)};s.decodePayload(t,this.socket.binaryType,r),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState&&this.poll())},n.prototype.doClose=function(){function t(){e.write([{type:"close"}])}var e=this;"open"===this.readyState?t():this.once("open",t)},n.prototype.write=function(t){var e=this;this.writable=!1;var r=function(){e.writable=!0,e.emit("drain")};s.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,r)})},n.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",r="";!1!==this.timestampRequests&&(t[this.timestampParam]=c()),this.supportsBinary||t.sid||(t.b64=1),t=i.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(r=":"+this.port),t.length&&(t="?"+t);var n=-1!==this.hostname.indexOf(":");return e+"://"+(n?"["+this.hostname+"]":this.hostname)+r+this.path+t}},function(t,e,r){function n(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}var o=r(19),i=r(5);t.exports=n,i(n.prototype),n.prototype.onError=function(t,e){var r=new Error(t);return r.type="TransportError",r.description=e,this.emit("error",r),this},n.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},n.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(t){var e=o.decodePacket(t,this.socket.binaryType);this.onPacket(e)},n.prototype.onPacket=function(t){this.emit("packet",t)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(t,e,r){(function(t){function n(t,r){var n="b"+e.packets[t.type]+t.data.data;return r(n)}function o(t,r,n){if(!r)return e.encodeBase64Packet(t,n);var o=t.data,i=new Uint8Array(o),s=new Uint8Array(1+o.byteLength);s[0]=v[t.type];for(var a=0;a<i.length;a++)s[a+1]=i[a];return n(s.buffer)}function i(t,r,n){if(!r)return e.encodeBase64Packet(t,n);var o=new FileReader;return o.onload=function(){t.data=o.result,e.encodePacket(t,r,!0,n)},o.readAsArrayBuffer(t.data)}function s(t,r,n){if(!r)return e.encodeBase64Packet(t,n);if(g)return i(t,r,n);var o=new Uint8Array(1);o[0]=v[t.type];var s=new w([o.buffer,t.data]);return n(s)}function a(t){try{t=d.decode(t,{strict:!1})}catch(t){return!1}return t}function c(t,e,r){for(var n=new Array(t.length),o=l(t.length,r),i=function(t,r,o){e(r,function(e,r){n[t]=r,o(e,n)})},s=0;s<t.length;s++)i(s,t[s],o)}var h,p=r(20),u=r(6),f=r(21),l=r(22),d=r(23);t&&t.ArrayBuffer&&(h=r(25));var y="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),m="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),g=y||m;e.protocol=3;var v=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},b=p(v),k={type:"error",data:"parser error"},w=r(26);e.encodePacket=function(e,r,i,a){"function"==typeof r&&(a=r,r=!1),"function"==typeof i&&(a=i,i=null);var c=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&c instanceof ArrayBuffer)return o(e,r,a);if(w&&c instanceof t.Blob)return s(e,r,a);if(c&&c.base64)return n(e,a);var h=v[e.type];return void 0!==e.data&&(h+=i?d.encode(String(e.data),{strict:!1}):String(e.data)),a(""+h)},e.encodeBase64Packet=function(r,n){var o="b"+e.packets[r.type];if(w&&r.data instanceof t.Blob){var i=new FileReader;return i.onload=function(){var t=i.result.split(",")[1];n(o+t)},i.readAsDataURL(r.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(r.data))}catch(t){for(var a=new Uint8Array(r.data),c=new Array(a.length),h=0;h<a.length;h++)c[h]=a[h];s=String.fromCharCode.apply(null,c)}return o+=t.btoa(s),n(o)},e.decodePacket=function(t,r,n){if(void 0===t)return k;if("string"==typeof t){if("b"===t.charAt(0))return e.decodeBase64Packet(t.substr(1),r);if(n&&(t=a(t),t===!1))return k;var o=t.charAt(0);return Number(o)==o&&b[o]?t.length>1?{type:b[o],data:t.substring(1)}:{type:b[o]}:k}var i=new Uint8Array(t),o=i[0],s=f(t,1);return w&&"blob"===r&&(s=new w([s])),{type:b[o],data:s}},e.decodeBase64Packet=function(t,e){var r=b[t.charAt(0)];if(!h)return{type:r,data:{base64:!0,data:t.substr(1)}};var n=h.decode(t.substr(1));return"blob"===e&&w&&(n=new w([n])),{type:r,data:n}},e.encodePayload=function(t,r,n){function o(t){return t.length+":"+t}function i(t,n){e.encodePacket(t,!!s&&r,!1,function(t){n(null,o(t))})}"function"==typeof r&&(n=r,r=null);var s=u(t);return r&&s?w&&!g?e.encodePayloadAsBlob(t,n):e.encodePayloadAsArrayBuffer(t,n):t.length?void c(t,i,function(t,e){return n(e.join(""))}):n("0:")},e.decodePayload=function(t,r,n){if("string"!=typeof t)return e.decodePayloadAsBinary(t,r,n);"function"==typeof r&&(n=r,r=null);var o;if(""===t)return n(k,0,1);for(var i,s,a="",c=0,h=t.length;h>c;c++){var p=t.charAt(c);if(":"===p){if(""===a||a!=(i=Number(a)))return n(k,0,1);if(s=t.substr(c+1,i),a!=s.length)return n(k,0,1);if(s.length){if(o=e.decodePacket(s,r,!1),k.type===o.type&&k.data===o.data)return n(k,0,1);var u=n(o,c+i,h);if(!1===u)return}c+=i,a=""}else a+=p}return""!==a?n(k,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,r){function n(t,r){e.encodePacket(t,!0,!0,function(t){return r(null,t)})}return t.length?void c(t,n,function(t,e){var n=e.reduce(function(t,e){var r;return r="string"==typeof e?e.length:e.byteLength,t+r.toString().length+r+2},0),o=new Uint8Array(n),i=0;return e.forEach(function(t){var e="string"==typeof t,r=t;if(e){for(var n=new Uint8Array(t.length),s=0;s<t.length;s++)n[s]=t.charCodeAt(s);r=n.buffer}e?o[i++]=0:o[i++]=1;for(var a=r.byteLength.toString(),s=0;s<a.length;s++)o[i++]=parseInt(a[s]);o[i++]=255;for(var n=new Uint8Array(r),s=0;s<n.length;s++)o[i++]=n[s]}),r(o.buffer)}):r(new ArrayBuffer(0))},e.encodePayloadAsBlob=function(t,r){function n(t,r){e.encodePacket(t,!0,!0,function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var n=new Uint8Array(t.length),o=0;o<t.length;o++)n[o]=t.charCodeAt(o);t=n.buffer,e[0]=0}for(var i=t instanceof ArrayBuffer?t.byteLength:t.size,s=i.toString(),a=new Uint8Array(s.length+1),o=0;o<s.length;o++)a[o]=parseInt(s[o]);if(a[s.length]=255,w){var c=new w([e.buffer,a.buffer,t]);r(null,c)}})}c(t,n,function(t,e){return r(new w(e))})},e.decodePayloadAsBinary=function(t,r,n){"function"==typeof r&&(n=r,r=null);for(var o=t,i=[];o.byteLength>0;){for(var s=new Uint8Array(o),a=0===s[0],c="",h=1;255!==s[h];h++){if(c.length>310)return n(k,0,1);c+=s[h]}o=f(o,2+c.length),c=parseInt(c);var p=f(o,0,c);if(a)try{p=String.fromCharCode.apply(null,new Uint8Array(p))}catch(t){var u=new Uint8Array(p);p="";for(var h=0;h<u.length;h++)p+=String.fromCharCode(u[h])}i.push(p),o=f(o,c)}var l=i.length;i.forEach(function(t,o){n(e.decodePacket(t,r,!0),o,l)})}}).call(e,function(){return this}())},function(t,e){t.exports=Object.keys||function(t){var e=[],r=Object.prototype.hasOwnProperty;for(var n in t)r.call(t,n)&&e.push(n);return e}},function(t,e){t.exports=function(t,e,r){var n=t.byteLength;if(e=e||0,r=r||n,t.slice)return t.slice(e,r);if(0>e&&(e+=n),0>r&&(r+=n),r>n&&(r=n),e>=n||e>=r||0===n)return new ArrayBuffer(0);for(var o=new Uint8Array(t),i=new Uint8Array(r-e),s=e,a=0;r>s;s++,a++)i[a]=o[s];return i.buffer}},function(t,e){function r(t,e,r){function o(t,n){if(o.count<=0)throw new Error("after called too many times");--o.count,t?(i=!0,e(t),e=r):0!==o.count||i||e(null,n)}var i=!1;return r=r||n,o.count=t,0===t?e():o}function n(){}t.exports=r},function(t,e,r){var n;(function(t,o){!function(i){function s(t){for(var e,r,n=[],o=0,i=t.length;i>o;)e=t.charCodeAt(o++),e>=55296&&56319>=e&&i>o?(r=t.charCodeAt(o++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--)):n.push(e);return n}function a(t){for(var e,r=t.length,n=-1,o="";++n<r;)e=t[n],e>65535&&(e-=65536,o+=k(e>>>10&1023|55296),e=56320|1023&e),o+=k(e);return o}function c(t,e){if(t>=55296&&57343>=t){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function h(t,e){return k(t>>e&63|128)}function p(t,e){if(0==(4294967168&t))return k(t);var r="";return 0==(4294965248&t)?r=k(t>>6&31|192):0==(4294901760&t)?(c(t,e)||(t=65533),r=k(t>>12&15|224),r+=h(t,6)):0==(4292870144&t)&&(r=k(t>>18&7|240),r+=h(t,12),r+=h(t,6)),r+=k(63&t|128)}function u(t,e){e=e||{};for(var r,n=!1!==e.strict,o=s(t),i=o.length,a=-1,c="";++a<i;)r=o[a],c+=p(r,n);return c}function f(){if(b>=v)throw Error("Invalid byte index");var t=255&g[b];if(b++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function l(t){var e,r,n,o,i;if(b>v)throw Error("Invalid byte index");if(b==v)return!1;if(e=255&g[b],b++,0==(128&e))return e;if(192==(224&e)){if(r=f(),i=(31&e)<<6|r,i>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&e)){if(r=f(),n=f(),i=(15&e)<<12|r<<6|n,i>=2048)return c(i,t)?i:65533;throw Error("Invalid continuation byte")}if(240==(248&e)&&(r=f(),n=f(),o=f(),i=(7&e)<<18|r<<12|n<<6|o,i>=65536&&1114111>=i))return i;throw Error("Invalid UTF-8 detected")}function d(t,e){e=e||{};var r=!1!==e.strict;g=s(t),v=g.length,b=0;for(var n,o=[];(n=l(r))!==!1;)o.push(n);return a(o)}var y="object"==typeof e&&e,m=("object"==typeof t&&t&&t.exports==y&&t,"object"==typeof o&&o);m.global!==m&&m.window!==m||(i=m);var g,v,b,k=String.fromCharCode,w={version:"2.1.2",encode:u,decode:d};n=function(){return w}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))}(this)}).call(e,r(24)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){!function(){"use strict";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(256),n=0;n<t.length;n++)r[t.charCodeAt(n)]=n;e.encode=function(e){var r,n=new Uint8Array(e),o=n.length,i="";for(r=0;o>r;r+=3)i+=t[n[r]>>2],i+=t[(3&n[r])<<4|n[r+1]>>4],i+=t[(15&n[r+1])<<2|n[r+2]>>6],i+=t[63&n[r+2]];return o%3===2?i=i.substring(0,i.length-1)+"=":o%3===1&&(i=i.substring(0,i.length-2)+"=="),i},e.decode=function(t){var e,n,o,i,s,a=.75*t.length,c=t.length,h=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var p=new ArrayBuffer(a),u=new Uint8Array(p);for(e=0;c>e;e+=4)n=r[t.charCodeAt(e)],o=r[t.charCodeAt(e+1)],i=r[t.charCodeAt(e+2)],s=r[t.charCodeAt(e+3)],u[h++]=n<<2|o>>4,u[h++]=(15&o)<<4|i>>2,u[h++]=(3&i)<<6|63&s;return p}}()},function(t,e){(function(e){function r(t){for(var e=0;e<t.length;e++){var r=t[e];if(r.buffer instanceof ArrayBuffer){var n=r.buffer;if(r.byteLength!==n.byteLength){var o=new Uint8Array(r.byteLength);o.set(new Uint8Array(n,r.byteOffset,r.byteLength)),
n=o.buffer}t[e]=n}}}function n(t,e){e=e||{};var n=new i;r(t);for(var o=0;o<t.length;o++)n.append(t[o]);return e.type?n.getBlob(e.type):n.getBlob()}function o(t,e){return r(t),new Blob(t,e||{})}var i=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,s=function(){try{var t=new Blob(["hi"]);return 2===t.size}catch(t){return!1}}(),a=s&&function(){try{var t=new Blob([new Uint8Array([1,2])]);return 2===t.size}catch(t){return!1}}(),c=i&&i.prototype.append&&i.prototype.getBlob;t.exports=function(){return s?a?e.Blob:o:c?n:void 0}()}).call(e,function(){return this}())},function(t,e){e.encode=function(t){var e="";for(var r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e},e.decode=function(t){for(var e={},r=t.split("&"),n=0,o=r.length;o>n;n++){var i=r[n].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}},function(t,e){t.exports=function(t,e){var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e){"use strict";function r(t){var e="";do e=s[t%a]+e,t=Math.floor(t/a);while(t>0);return e}function n(t){var e=0;for(p=0;p<t.length;p++)e=e*a+c[t.charAt(p)];return e}function o(){var t=r(+new Date);return t!==i?(h=0,i=t):t+"."+r(h++)}for(var i,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a=64,c={},h=0,p=0;a>p;p++)c[s[p]]=p;o.encode=r,o.decode=n,t.exports=o},function(t,e,r){(function(e){function n(){}function o(t){i.call(this,t),this.query=this.query||{},a||(e.___eio||(e.___eio=[]),a=e.___eio),this.index=a.length;var r=this;a.push(function(t){r.onData(t)}),this.query.j=this.index,e.document&&e.addEventListener&&e.addEventListener("beforeunload",function(){r.script&&(r.script.onerror=n)},!1)}var i=r(17),s=r(28);t.exports=o;var a,c=/\n/g,h=/\\n/g;s(o,i),o.prototype.supportsBinary=!1,o.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},o.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(e,r):(document.head||document.body).appendChild(e),this.script=e;var n="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);n&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},o.prototype.doWrite=function(t,e){function r(){n(),e()}function n(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(t){o.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+o.iframeId+'">';i=document.createElement(t)}catch(t){i=document.createElement("iframe"),i.name=o.iframeId,i.src="javascript:0"}i.id=o.iframeId,o.form.appendChild(i),o.iframe=i}var o=this;if(!this.form){var i,s=document.createElement("form"),a=document.createElement("textarea"),p=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=p,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),n(),t=t.replace(h,"\\\n"),this.area.value=t.replace(c,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===o.iframe.readyState&&r()}:this.iframe.onload=r}}).call(e,function(){return this}())},function(t,e,r){(function(e){function n(t){var e=t&&t.forceBase64;e&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=p&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(u=o),i.call(this,t)}var o,i=r(18),s=r(19),a=r(27),c=r(28),h=r(29),p=(r(3)("engine.io-client:websocket"),e.WebSocket||e.MozWebSocket);if("undefined"==typeof window)try{o=r(32)}catch(t){}var u=p;u||"undefined"!=typeof window||(u=o),t.exports=n,c(n,i),n.prototype.name="websocket",n.prototype.supportsBinary=!0,n.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,r={agent:this.agent,perMessageDeflate:this.perMessageDeflate};r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(r.headers=this.extraHeaders),this.localAddress&&(r.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?e?new u(t,e):new u(t):new u(t,e,r)}catch(t){return this.emit("error",t)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},n.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},n.prototype.write=function(t){function r(){n.emit("flush"),setTimeout(function(){n.writable=!0,n.emit("drain")},0)}var n=this;this.writable=!1;for(var o=t.length,i=0,a=o;a>i;i++)!function(t){s.encodePacket(t,n.supportsBinary,function(i){if(!n.usingBrowserWebSocket){var s={};if(t.options&&(s.compress=t.options.compress),n.perMessageDeflate){var a="string"==typeof i?e.Buffer.byteLength(i):i.length;a<n.perMessageDeflate.threshold&&(s.compress=!1)}}try{n.usingBrowserWebSocket?n.ws.send(i):n.ws.send(i,s)}catch(t){}--o||r()})}(t[i])},n.prototype.onClose=function(){i.prototype.onClose.call(this)},n.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},n.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",r="";this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(r=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=h()),this.supportsBinary||(t.b64=1),t=a.encode(t),t.length&&(t="?"+t);var n=-1!==this.hostname.indexOf(":");return e+"://"+(n?"["+this.hostname+"]":this.hostname)+r+this.path+t},n.prototype.check=function(){return!(!u||"__initialize"in u&&this.name===n.prototype.name)}}).call(e,function(){return this}())},function(t,e){},function(t,e){var r=[].indexOf;t.exports=function(t,e){if(r)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}},function(t,e,r){"use strict";function n(t,e,r){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,r&&r.query&&(this.query=r.query),this.io.autoConnect&&this.open()}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=r(4),s=r(5),a=r(35),c=r(36),h=r(37),p=(r(3)("socket.io-client:socket"),r(27));t.exports=e=n;var u={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=s.prototype.emit;s(n.prototype),n.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[c(t,"open",h(this,"onopen")),c(t,"packet",h(this,"onpacket")),c(t,"close",h(this,"onclose"))]}},n.prototype.open=n.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},n.prototype.send=function(){var t=a(arguments);return t.unshift("message"),this.emit.apply(this,t),this},n.prototype.emit=function(t){if(u.hasOwnProperty(t))return f.apply(this,arguments),this;var e=a(arguments),r={type:i.EVENT,data:e};return r.options={},r.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(this.acks[this.ids]=e.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),delete this.flags,this},n.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},n.prototype.onopen=function(){if("/"!==this.nsp)if(this.query){var t="object"===o(this.query)?p.encode(this.query):this.query;this.packet({type:i.CONNECT,query:t})}else this.packet({type:i.CONNECT})},n.prototype.onclose=function(t){this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},n.prototype.onpacket=function(t){if(t.nsp===this.nsp)switch(t.type){case i.CONNECT:this.onconnect();break;case i.EVENT:this.onevent(t);break;case i.BINARY_EVENT:this.onevent(t);break;case i.ACK:this.onack(t);break;case i.BINARY_ACK:this.onack(t);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",t.data)}},n.prototype.onevent=function(t){var e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?f.apply(this,e):this.receiveBuffer.push(e)},n.prototype.ack=function(t){var e=this,r=!1;return function(){if(!r){r=!0;var n=a(arguments);e.packet({type:i.ACK,id:t,data:n})}}},n.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e&&(e.apply(this,t.data),delete this.acks[t.id])},n.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},n.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)f.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},n.prototype.ondisconnect=function(){this.destroy(),this.onclose("io server disconnect")},n.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},n.prototype.close=n.prototype.disconnect=function(){return this.connected&&this.packet({type:i.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},n.prototype.compress=function(t){return this.flags=this.flags||{},this.flags.compress=t,this}},function(t,e){function r(t,e){var r=[];e=e||0;for(var n=e||0;n<t.length;n++)r[n-e]=t[n];return r}t.exports=r},function(t,e){"use strict";function r(t,e,r){return t.on(e,r),{destroy:function(){t.removeListener(e,r)}}}t.exports=r},function(t,e){var r=[].slice;t.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return e.apply(t,n.concat(r.call(arguments)))}}},function(t,e){function r(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=r,r.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-r:t+r}return 0|Math.min(t,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(t){this.ms=t},r.prototype.setMax=function(t){this.max=t},r.prototype.setJitter=function(t){this.jitter=t}}])}),angular.module("ui.ace",[]).constant("uiAceConfig",{}).directive("uiAce",["uiAceConfig",function(uiAceConfig){if(angular.isUndefined(window.ace))throw new Error("ui-ace need ace to work... (o rly?)");var setOptions=function(acee,session,opts){angular.isDefined(opts.showGutter)&&acee.renderer.setShowGutter(opts.showGutter),angular.isDefined(opts.useWrapMode)&&session.setUseWrapMode(opts.useWrapMode),angular.isDefined(opts.showInvisibles)&&acee.renderer.setShowInvisibles(opts.showInvisibles),angular.isDefined(opts.showIndentGuides)&&acee.renderer.setDisplayIndentGuides(opts.showIndentGuides),angular.isDefined(opts.useSoftTabs)&&session.setUseSoftTabs(opts.useSoftTabs),angular.isDefined(opts.disableSearch)&&opts.disableSearch&&acee.commands.addCommands([{name:"unfind",bindKey:{win:"Ctrl-F",mac:"Command-F"},exec:function(){return!1},readOnly:!0}]),angular.isFunction(opts.onLoad)&&opts.onLoad(acee),angular.isString(opts.theme)&&acee.setTheme("ace/theme/"+opts.theme),angular.isString(opts.mode)&&session.setMode("ace/mode/"+opts.mode)};return{restrict:"EA",require:"?ngModel",link:function(scope,elm,attrs,ngModel){var onChangeListener,onBlurListener,options=uiAceConfig.ace||{},opts=angular.extend({},options,scope.$eval(attrs.uiAce)),acee=window.ace.edit(elm[0]),session=acee.getSession(),executeUserCallback=function(){var callback=arguments[0],args=Array.prototype.slice.call(arguments,1);angular.isDefined(callback)&&scope.$apply(function(){if(!angular.isFunction(callback))throw new Error("ui-ace use a function as callback.");callback(args)})},listenerFactory={onChange:function(callback){return function(e){var newValue=session.getValue();newValue===scope.$eval(attrs.value)||scope.$$phase||scope.$root.$$phase||(angular.isDefined(ngModel)&&scope.$apply(function(){ngModel.$setViewValue(newValue)}),executeUserCallback(callback,e,acee))}},onBlur:function(callback){return function(){executeUserCallback(callback,acee)}}};attrs.$observe("readonly",function(value){acee.setReadOnly("true"===value)}),angular.isDefined(ngModel)&&(ngModel.$formatters.push(function(value){if(angular.isUndefined(value)||null===value)return"";if(angular.isObject(value)||angular.isArray(value))throw new Error("ui-ace cannot use an object or an array as a model");return value}),ngModel.$render=function(){session.setValue(ngModel.$viewValue)}),setOptions(acee,session,opts),scope.$watch(attrs.uiAce,function(){opts=angular.extend({},options,scope.$eval(attrs.uiAce)),session.removeListener("change",onChangeListener),onChangeListener=listenerFactory.onChange(opts.onChange),session.on("change",onChangeListener),acee.removeListener("blur",onBlurListener),onBlurListener=listenerFactory.onBlur(opts.onBlur),acee.on("blur",onBlurListener),setOptions(acee,session,opts)},!0),onChangeListener=listenerFactory.onChange(opts.onChange),session.on("change",onChangeListener),onBlurListener=listenerFactory.onBlur(opts.onBlur),acee.on("blur",onBlurListener),elm.on("$destroy",function(){acee.session.$stopWorker(),acee.destroy()}),scope.$watch(function(){return[elm[0].offsetWidth,elm[0].offsetHeight]},function(){acee.resize(),acee.renderer.updateFull()},!0)}}}]),function(){function M(a,c){a.prototype=ua(c.prototype),a.prototype.constructor=a,a.parent=c.prototype}function ua(a){function c(){}return c.prototype=a,new c}function ia(a,c,b){return"millisecond"===b?a.setMilliseconds(a.getMilliseconds()+1*c):"second"===b?a.setSeconds(a.getSeconds()+1*c):"minute"===b?a.setMinutes(a.getMinutes()+1*c):"hour"===b?a.setHours(a.getHours()+1*c):"day"===b?a.setDate(a.getDate()+1*c):"week"===b?a.setDate(a.getDate()+7*c):"month"===b?a.setMonth(a.getMonth()+1*c):"year"===b&&a.setFullYear(a.getFullYear()+1*c),a}function R(a,c){return x[c+"Duration"]*a}function G(a,c){var b=!1;for(0>a&&(b=!0,a*=-1),a=""+a,c=c?c:1;a.length<c;)a="0"+a;return b?"-"+a:a}function aa(a){if(!a)return a;a=a.replace(/^\s\s*/,"");for(var c=/\s/,b=a.length;c.test(a.charAt(--b)););return a.slice(0,b+1)}function va(a){a.roundRect=function(a,b,d,e,h,f,k,p){k&&(this.fillStyle=k),p&&(this.strokeStyle=p),"undefined"==typeof h&&(h=5),this.lineWidth=f,this.beginPath(),this.moveTo(a+h,b),this.lineTo(a+d-h,b),this.quadraticCurveTo(a+d,b,a+d,b+h),this.lineTo(a+d,b+e-h),this.quadraticCurveTo(a+d,b+e,a+d-h,b+e),this.lineTo(a+h,b+e),this.quadraticCurveTo(a,b+e,a,b+e-h),this.lineTo(a,b+h),this.quadraticCurveTo(a,b,a+h,b),this.closePath(),k&&this.fill(),p&&f>0&&this.stroke()}}function ja(a,c){return a-c}function wa(a,c){return a.x-c.x}function A(a){var c=((16711680&a)>>16).toString(16),b=((65280&a)>>8).toString(16);return a=((255&a)>>0).toString(16),c=2>c.length?"0"+c:c,b=2>b.length?"0"+b:b,a=2>a.length?"0"+a:a,"#"+c+b+a}function W(a,c,b){b=b||"normal";var d=a+"_"+c+"_"+b,e=ka[d];if(isNaN(e)){try{if(a="position:absolute; left:0px; top:-20000px; padding:0px;margin:0px;border:none;white-space:pre;line-height:normal;font-family:"+a+"; font-size:"+c+"px; font-weight:"+b+";",!O){var h=document.body;O=document.createElement("span"),O.innerHTML="";var f=document.createTextNode("Mpgyi");O.appendChild(f),h.appendChild(O)}O.style.display="",O.setAttribute("style",a),e=Math.round(O.offsetHeight),O.style.display="none"}catch(k){e=Math.ceil(1.1*c)}e=Math.max(e,c),ka[d]=e}return e}function K(a,c,b,d){if(a.addEventListener)a.addEventListener(c,b,d||!1);else{if(!a.attachEvent)return!1;a.attachEvent("on"+c,function(c){c=c||window.event,c.preventDefault=c.preventDefault||function(){c.returnValue=!1},c.stopPropagation=c.stopPropagation||function(){c.cancelBubble=!0},b.call(a,c)})}}function la(a,c,b){for(a*=P,c*=P,a=b.getImageData(a,c,2,2).data,c=!0,b=0;4>b;b++)if(a[b]!==a[b+4]|a[b]!==a[b+8]|a[b]!==a[b+12]){c=!1;break}return c?a[0]<<16|a[1]<<8|a[2]:0}function ma(a,c,b){var d;d=a?a+"FontStyle":"fontStyle";var e=a?a+"FontWeight":"fontWeight",h=a?a+"FontSize":"fontSize";return a=a?a+"FontFamily":"fontFamily",d=""+(c[d]?c[d]+" ":b&&b[d]?b[d]+" ":""),d+=c[e]?c[e]+" ":b&&b[e]?b[e]+" ":"",d+=c[h]?c[h]+"px ":b&&b[h]?b[h]+"px ":"",c=c[a]?c[a]+"":b&&b[a]?b[a]+"":"",!u&&c&&(c=c.split(",")[0],"'"!==c[0]&&'"'!==c[0]&&(c="'"+c+"'")),d+=c}function Q(a,c,b){return a in c?c[a]:b[a]}function X(a,c,b){if(u&&na){var d=a.getContext("2d");Y=d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1,P=ba/Y,a.width=c*P,a.height=b*P,ba!==Y&&(a.style.width=c+"px",a.style.height=b+"px",d.scale(P,P))}else a.width=c,a.height=b}function Z(a,c){var b=document.createElement("canvas");return b.setAttribute("class","canvasjs-chart-canvas"),X(b,a,c),u||"undefined"==typeof G_vmlCanvasManager||G_vmlCanvasManager.initElement(b),b}function I(a,c,b){this._defaultsKey=a;var d={};b&&ca[b]&&ca[b][a]&&(d=ca[b][a]),this._options=c?c:{},this.setOptions(this._options,d)}function w(a,c){c=c||{},w.parent.constructor.call(this,"Chart",c,c.theme?c.theme:"theme1");var b=this;if(this._containerId=a,this._objectsInitialized=!1,this.overlaidCanvasCtx=this.ctx=null,this._indexLabels=[],this._panTimerId=0,this._lastTouchEventType="",this.panEnabled=!1,this._defaultCursor="default",this.plotArea={canvas:null,ctx:null,x1:0,y1:0,x2:0,y2:0,width:0,height:0},this._dataInRenderedOrder=[],this._container=document.getElementById(this._containerId)){this._container.innerHTML="";var d=0,e=0,d=this._options.width?this.width:0<this._container.clientWidth?this._container.clientWidth:this.width,e=this._options.height?this.height:0<this._container.clientHeight?this._container.clientHeight:this.height;if(this.width=d,this.height=e,this._canvasJSContainer=document.createElement("div"),this._canvasJSContainer.setAttribute("class","canvasjs-chart-container"),this._canvasJSContainer.style.position="relative",u||(this._canvasJSContainer.style.height="0px"),this._container.appendChild(this._canvasJSContainer),this.canvas=Z(d,e),this.canvas.style.position="absolute",this.canvas.getContext){try{this.canvas.style.background=this.backgroundColor}catch(h){}this._canvasJSContainer.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.ctx.textBaseline="top",va(this.ctx),u?this.plotArea.ctx=this.ctx:(this.plotArea.canvas=Z(d,e),this.plotArea.canvas.style.position="absolute",this.plotArea.canvas.setAttribute("class","plotAreaCanvas"),this._canvasJSContainer.appendChild(this.plotArea.canvas),this.plotArea.ctx=this.plotArea.canvas.getContext("2d")),this.overlaidCanvas=Z(d,e),this.overlaidCanvas.style.position="absolute",this._canvasJSContainer.appendChild(this.overlaidCanvas),this.overlaidCanvasCtx=this.overlaidCanvas.getContext("2d"),this.overlaidCanvasCtx.textBaseline="top",this._eventManager=new S(this),this._toolBar=document.createElement("div"),this._toolBar.setAttribute("class","canvasjs-chart-toolbar"),this._toolBar.style.position="absolute",this._toolBar.style.top="0px",this._toolBar.style.right="0px",this._canvasJSContainer.appendChild(this._toolBar),this.zoomEnabled&&(this._zoomButton=document.createElement("button"),this._zoomButton.appendChild(document.createTextNode("Pan")),this._toolBar.appendChild(this._zoomButton),K(this._zoomButton,"click",function(){b.zoomEnabled?(b.zoomEnabled=!1,b.panEnabled=!0,b._zoomButton.innerHTML=b._cultureInfo.zoomText):(b.zoomEnabled=!0,b.panEnabled=!1,b._zoomButton.innerHTML=b._cultureInfo.panText),b.render()})),this.zoomEnabled&&(this._resetButton=document.createElement("button"),this._resetButton.appendChild(document.createTextNode("Reset")),this._toolBar.appendChild(this._resetButton),this.zoomEnabled=this._options.zoomEnabled?!0:!1,this.panEnabled=!1,this.overlaidCanvas.style.cursor=b._defaultCursor,K(this._resetButton,"click",function(){b._toolTip.hide(),b.zoomEnabled||b.panEnabled?(b.zoomEnabled=!0,b.panEnabled=!1,b._zoomButton.innerHTML=b._cultureInfo.panText,b._defaultCursor="default",b.overlaidCanvas.style.cursor=b._defaultCursor):(b.zoomEnabled=!1,b.panEnabled=!1),b.sessionVariables.axisX.internalMinimum=b._options.axisX&&b._options.axisX.minimum?b._options.axisX.minimum:null,b.sessionVariables.axisX.internalMaximum=b._options.axisX&&b._options.axisX.maximum?b._options.axisX.maximum:null,b.resetOverlayedCanvas(),b._toolBar.style.display="none",b.render()})),K(window,"resize",function(){var a=0,c=0;b._options.width?a=b.width:b.width=a=0<b._container.clientWidth?b._container.clientWidth:b.width,b._options.height?c=b.height:b.height=c=0<b._container.clientHeight?b._container.clientHeight:b.height,(b.canvas.width!==a*P||b.canvas.height!==c*P)&&(X(b.canvas,a,c),X(b.overlaidCanvas,a,c),X(b._eventManager.ghostCanvas,a,c),b.render())}),this._toolBar.style.display="none",this.bounds={x1:0,y1:0,x2:this.width,y2:this.height},K(this.overlaidCanvas,"click",function(a){b._mouseEventHandler(a)}),K(this.overlaidCanvas,"mousemove",function(a){b._mouseEventHandler(a)}),K(this.overlaidCanvas,"mouseup",function(a){b._mouseEventHandler(a)}),K(this.overlaidCanvas,"mousedown",function(a){b._mouseEventHandler(a)}),K(this.overlaidCanvas,"mouseout",function(a){b._mouseEventHandler(a)}),K(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerDown":"touchstart",function(a){b._touchEventHandler(a)}),K(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerMove":"touchmove",function(a){b._touchEventHandler(a)}),K(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerUp":"touchend",function(a){b._touchEventHandler(a)}),K(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerCancel":"touchcancel",function(a){b._touchEventHandler(a)}),this._toolTip=new L(this,this._options.toolTip,this.theme),this.layoutManager=new T(this),this.axisY2=this.axisY=this.axisX=this.data=null,this.renderCount=0,this.creditText&&this.creditHref&&(this._creditLink=document.createElement("a"),this._creditLink.setAttribute("class","canvasjs-chart-credit"),this._creditLink.setAttribute("style","outline:none;margin:0px;position:absolute;right:3px;top:"+(e-14)+"px;color:dimgrey;text-decoration:none;font-size:10px;font-family:Lucida Grande, Lucida Sans Unicode, Arial, sans-serif"),this._creditLink.setAttribute("tabIndex",-1),this._creditLink.setAttribute("href",this.creditHref),this._creditLink.innerHTML=this.creditText,this._creditLink.setAttribute("target","_blank"),this._canvasJSContainer.appendChild(this._creditLink)),this.sessionVariables={axisX:{internalMinimum:null,internalMaximum:null},axisY:{internalMinimum:null,internalMaximum:null},axisY2:{internalMinimum:null,internalMaximum:null}}}}else window.console&&window.console.log('CanvasJS Error: Chart Container with id "'+this._containerId+'" was not found')}function oa(a,c){for(var b=[],d=0;d<a.length;d++)if(0==d)b.push(a[0]);else{var e,h,f;f=d-1,e=0===f?0:f-1,h=f===a.length-1?f:f+1,b[b.length]={x:a[f].x+(a[h].x-a[e].x)/c/3,y:a[f].y+(a[h].y-a[e].y)/c/3},f=d,e=0===f?0:f-1,h=f===a.length-1?f:f+1,b[b.length]={x:a[f].x-(a[h].x-a[e].x)/c/3,y:a[f].y-(a[h].y-a[e].y)/c/3},b[b.length]=a[d]}return b}function T(a){this._rightOccupied=this._leftOccupied=this._bottomOccupied=this._topOccupied=0,this.chart=a}function F(a,c){F.parent.constructor.call(this,"TextBlock",c),this.ctx=a,this._isDirty=!0,this._wrappedText=null,this._lineHeight=W(this.fontFamily,this.fontSize,this.fontWeight)}function U(a,c){U.parent.constructor.call(this,"Title",c,a.theme),this.chart=a,this.canvas=a.canvas,this.ctx=this.chart.ctx,"undefined"==typeof this._options.fontSize&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.height=this.width=null,this.bounds={x1:null,y1:null,x2:null,y2:null}}function $(a,c,b){$.parent.constructor.call(this,"Legend",c,b),this.chart=a,this.canvas=a.canvas,this.ctx=this.chart.ctx,this.ghostCtx=this.chart._eventManager.ghostCtx,this.items=[],this.height=this.width=0,this.orientation=null,this.horizontalSpacing=10,this.dataSeries=[],this.bounds={x1:null,y1:null,x2:null,y2:null},"undefined"==typeof this._options.fontSize&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.lineHeight=W(this.fontFamily,this.fontSize,this.fontWeight)}function da(a,c){da.parent.constructor.call(this,c),this.chart=a,this.canvas=a.canvas,this.ctx=this.chart.ctx}function N(a,c,b,d,e){N.parent.constructor.call(this,"DataSeries",c,b),this.chart=a,this.canvas=a.canvas,this._ctx=a.canvas.ctx,this.index=d,this.maxWidthInX=this.noDataPointsInPlotArea=0,this.id=e,this.chart._eventManager.objectMap[e]={id:e,objectType:"dataSeries",dataSeriesIndex:d},this.dataPointIds=[],this.axisY=this.axisX=null,this.axisPlacement=this.getDefaultAxisPlacement(),"undefined"==typeof this._options.indexLabelFontSize&&(this.indexLabelFontSize=this.chart.getAutoFontSize(this.indexLabelFontSize))}function z(a,c,b,d){if(z.parent.constructor.call(this,"Axis",c,a.theme),this.chart=a,this.canvas=a.canvas,this.ctx=a.ctx,this.intervalStartPosition=this.maxHeight=this.maxWidth=0,this.labels=[],this._labels=null,this.dataInfo={min:1/0,max:-(1/0),viewPortMin:1/0,viewPortMax:-(1/0),minDiff:1/0},"axisX"===b?(this.sessionVariables=this.chart.sessionVariables[b],this._options.interval||(this.intervalType=null)):this.sessionVariables="left"===d||"top"===d?this.chart.sessionVariables.axisY:this.chart.sessionVariables.axisY2,"undefined"==typeof this._options.titleFontSize&&(this.titleFontSize=this.chart.getAutoFontSize(this.titleFontSize)),"undefined"==typeof this._options.labelFontSize&&(this.labelFontSize=this.chart.getAutoFontSize(this.labelFontSize)),this.type=b,"axisX"!==b||c&&"undefined"!=typeof c.gridThickness||(this.gridThickness=0),this._position=d,this.lineCoordinates={x1:null,y1:null,x2:null,y2:null,width:null},this.labelAngle=(this.labelAngle%360+360)%360,90<this.labelAngle&&270>=this.labelAngle?this.labelAngle-=180:180<this.labelAngle&&270>=this.labelAngle?this.labelAngle-=180:270<this.labelAngle&&360>=this.labelAngle&&(this.labelAngle-=360),this._options.stripLines&&0<this._options.stripLines.length)for(this.stripLines=[],c=0;c<this._options.stripLines.length;c++)this.stripLines.push(new ea(this.chart,this._options.stripLines[c],a.theme,++this.chart._eventManager.lastObjectId));this._absoluteMaximum=this._absoluteMinimum=this._titleTextBlock=null,this.hasOptionChanged("minimum")&&(this.sessionVariables.internalMinimum=this.minimum),this.hasOptionChanged("maximum")&&(this.sessionVariables.internalMaximum=this.maximum),this.trackChanges("minimum"),this.trackChanges("maximum")}function ea(a,c,b,d){ea.parent.constructor.call(this,"StripLine",c,b),this._thicknessType="pixel",this.id=d,null!==this.startValue&&null!==this.endValue&&(this.value=((this.startValue.getTime?this.startValue.getTime():this.startValue)+(this.endValue.getTime?this.endValue.getTime():this.endValue))/2,this.thickness=Math.max(this.endValue-this.startValue),this._thicknessType="value")}function L(a,c,b){L.parent.constructor.call(this,"ToolTip",c,b),this.chart=a,this.canvas=a.canvas,this.ctx=this.chart.ctx,this.currentDataPointIndex=this.currentSeriesIndex=-1,this._timerId=0,this._prevY=this._prevX=NaN,this._initialize()}function S(a){this.chart=a,this.lastObjectId=0,this.objectMap=[],this.rectangularRegionEventSubscriptions=[],this.previousDataPointEventObject=null,this.ghostCanvas=Z(this.chart.width,this.chart.height),this.ghostCtx=this.ghostCanvas.getContext("2d"),this.mouseoveredObjectMaps=[]}function pa(a,c){var b;c&&fa[c]&&(b=fa[c]),U.parent.constructor.call(this,"CultureInfo",b,a.theme),this.chart=a,this.canvas=a.canvas,this.ctx=this.chart.ctx}var u=!!document.createElement("canvas").getContext,qa={Chart:{width:500,height:400,zoomEnabled:!1,backgroundColor:"white",theme:"theme1",animationEnabled:u?!0:!1,colorSet:"colorSet1",culture:"en",creditHref:"http://canvasjs.com/",creditText:""},Title:{padding:0,text:null,verticalAlign:"top",horizontalAlign:"center",fontSize:20,fontFamily:"Calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,margin:5},Legend:{name:null,verticalAlign:"center",horizontalAlign:"right",fontSize:14,fontFamily:"calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",cursor:null,itemmouseover:null,itemmouseout:null,itemmousemove:null,itemclick:null},ToolTip:{enabled:!0,borderColor:null,shared:!1,animationEnabled:!0,content:null},Axis:{minimum:null,maximum:null,interval:null,intervalType:null,title:null,titleFontColor:"black",titleFontSize:20,titleFontFamily:"arial",titleFontWeight:"normal",titleFontStyle:"normal",labelAngle:0,labelFontFamily:"arial",labelFontColor:"black",labelFontSize:12,labelFontWeight:"normal",labelFontStyle:"normal",labelAutoFit:!1,labelWrap:!0,labelMaxWidth:null,prefix:"",suffix:"",includeZero:!0,tickLength:5,tickColor:"black",tickThickness:1,lineColor:"black",lineThickness:1,gridColor:"A0A0A0",gridThickness:0,interlacedColor:null,valueFormatString:null,margin:2,stripLines:[]},StripLine:{value:null,startValue:null,endValue:null,color:"orange",thickness:2,label:"",labelBackgroundColor:"#EEEEEE",labelFontFamily:"arial",labelFontColor:"orange",labelFontSize:12,labelFontWeight:"normal",labelFontStyle:"normal"},DataSeries:{name:null,dataPoints:null,label:"",bevelEnabled:!1,cursor:null,indexLabel:"",indexLabelPlacement:"outside",indexLabelOrientation:"horizontal",indexLabelFontColor:"black",indexLabelFontSize:12,indexLabelFontStyle:"normal",indexLabelFontFamily:"Arial",indexLabelFontWeight:"normal",indexLabelBackgroundColor:null,indexLabelLineColor:null,indexLabelLineThickness:1,indexLabelMaxWidth:null,indexLabelWrap:!0,lineThickness:2,color:null,startAngle:0,type:"column",xValueType:"number",axisYType:"primary",xValueFormatString:null,yValueFormatString:null,showInLegend:null,legendMarkerType:null,legendMarkerColor:null,legendText:null,markerType:"circle",markerColor:null,markerSize:null,markerBorderColor:null,markerBorderThickness:null,mouseover:null,mouseout:null,mousemove:null,click:null,toolTipContent:null,visible:!0},CultureInfo:{decimalSeparator:".",digitGroupSeparator:",",zoomText:"Zoom",panText:"Pan",resetText:"Reset",days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")},TextBlock:{x:0,y:0,width:null,height:null,maxWidth:null,maxHeight:null,padding:0,angle:0,text:"",horizontalAlign:"center",fontSize:12,fontFamily:"calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,textBaseline:"top"}},fa={en:{}},V={colorSet1:"#369EAD #C24642 #7F6084 #86B402 #A2D1CF #C8B631 #6DBCEB #52514E #4F81BC #A064A1 #F79647".split(" "),colorSet2:"#4F81BC #C0504E #9BBB58 #23BFAA #8064A1 #4AACC5 #F79647 #33558B".split(" "),colorSet3:"#8CA1BC #36845C #017E82 #8CB9D0 #708C98 #94838D #F08891 #0366A7 #008276 #EE7757 #E5BA3A #F2990B #03557B #782970".split(" ")
},ca={theme1:{Chart:{colorSet:V[0]},Title:{fontFamily:u?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",fontSize:33,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"top",margin:10},Axis:{titleFontSize:26,titleFontColor:"#666666",titleFontFamily:u?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",labelFontFamily:u?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",labelFontSize:18,labelFontColor:"grey",tickColor:"#BBBBBB",tickThickness:2,gridThickness:2,gridColor:"#BBBBBB",lineThickness:2,lineColor:"#BBBBBB"},Legend:{verticalAlign:"bottom",horizontalAlign:"center",fontFamily:u?"monospace, sans-serif,arial black":"calibri"},DataSeries:{indexLabelFontColor:"grey",indexLabelFontFamily:u?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",indexLabelFontSize:18,indexLabelLineThickness:1}},theme2:{Chart:{colorSet:"colorSet2"},Title:{fontFamily:"impact, charcoal, arial black, sans-serif",fontSize:32,fontColor:"#333333",verticalAlign:"top",margin:10},Axis:{titleFontSize:22,titleFontColor:"rgb(98,98,98)",titleFontFamily:u?"monospace, sans-serif,arial black":"arial",titleFontWeight:"bold",labelFontFamily:u?"monospace, Courier New, Courier":"arial",labelFontSize:16,labelFontColor:"grey",labelFontWeight:"bold",tickColor:"grey",tickThickness:2,gridThickness:2,gridColor:"grey",lineThickness:0},Legend:{verticalAlign:"bottom",horizontalAlign:"center",fontFamily:u?"monospace, sans-serif,arial black":"arial"},DataSeries:{indexLabelFontColor:"grey",indexLabelFontFamily:u?"Courier New, Courier, monospace":"arial",indexLabelFontWeight:"bold",indexLabelFontSize:18,indexLabelLineThickness:1}},theme3:{Chart:{colorSet:"colorSet1"},Title:{fontFamily:u?"Candara, Optima, Trebuchet MS, Helvetica Neue, Helvetica, Trebuchet MS, serif":"calibri",fontSize:32,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"top",margin:10},Axis:{titleFontSize:22,titleFontColor:"rgb(98,98,98)",titleFontFamily:u?"Verdana, Geneva, Calibri, sans-serif":"calibri",labelFontFamily:u?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",labelFontSize:18,labelFontColor:"grey",tickColor:"grey",tickThickness:2,gridThickness:2,gridColor:"grey",lineThickness:2,lineColor:"grey"},Legend:{verticalAlign:"bottom",horizontalAlign:"center",fontFamily:u?"monospace, sans-serif,arial black":"calibri"},DataSeries:{bevelEnabled:!0,indexLabelFontColor:"grey",indexLabelFontFamily:u?"Candara, Optima, Calibri, Verdana, Geneva, sans-serif":"calibri",indexLabelFontSize:18,indexLabelLineColor:"lightgrey",indexLabelLineThickness:2}}},x={numberDuration:1,yearDuration:314496e5,monthDuration:2592e6,weekDuration:6048e5,dayDuration:864e5,hourDuration:36e5,minuteDuration:6e4,secondDuration:1e3,millisecondDuration:1,dayOfWeekFromInt:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ")},ka={},O=null,ra=function(){var a=/D{1,4}|M{1,4}|Y{1,4}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|f{1,3}|t{1,2}|T{1,2}|K|z{1,3}|"[^"]*"|'[^']*'/g,c="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),b="Sun Mon Tue Wed Thu Fri Sat".split(" "),d="January February March April May June July August September October November December".split(" "),e="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),h=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,f=/[^-+\dA-Z]/g;return function(k,p,m){var g=m?m.days:c,r=m?m.months:d,l=m?m.shortDays:b,n=m?m.shortMonths:e;m="";var q=!1;if(k=k&&k.getTime?k:k?new Date(k):new Date,isNaN(k))throw SyntaxError("invalid date");"UTC:"===p.slice(0,4)&&(p=p.slice(4),q=!0),m=q?"getUTC":"get";var s=k[m+"Date"](),t=k[m+"Day"](),v=k[m+"Month"](),u=k[m+"FullYear"](),w=k[m+"Hours"](),C=k[m+"Minutes"](),y=k[m+"Seconds"](),E=k[m+"Milliseconds"](),x=q?0:k.getTimezoneOffset();return m=p.replace(a,function(a){switch(a){case"D":return s;case"DD":return G(s,2);case"DDD":return l[t];case"DDDD":return g[t];case"M":return v+1;case"MM":return G(v+1,2);case"MMM":return n[v];case"MMMM":return r[v];case"Y":return parseInt(String(u).slice(-2));case"YY":return G(String(u).slice(-2),2);case"YYY":return G(String(u).slice(-3),3);case"YYYY":return G(u,4);case"h":return w%12||12;case"hh":return G(w%12||12,2);case"H":return w;case"HH":return G(w,2);case"m":return C;case"mm":return G(C,2);case"s":return y;case"ss":return G(y,2);case"f":return String(E).slice(0,1);case"ff":return G(String(E).slice(0,2),2);case"fff":return G(String(E).slice(0,3),3);case"t":return 12>w?"a":"p";case"tt":return 12>w?"am":"pm";case"T":return 12>w?"A":"P";case"TT":return 12>w?"AM":"PM";case"K":return q?"UTC":(String(k).match(h)||[""]).pop().replace(f,"");case"z":return(x>0?"-":"+")+Math.floor(Math.abs(x)/60);case"zz":return(x>0?"-":"+")+G(Math.floor(Math.abs(x)/60),2);case"zzz":return(x>0?"-":"+")+G(Math.floor(Math.abs(x)/60),2)+G(Math.abs(x)%60,2);default:return a.slice(1,a.length-1)}})}}(),ga=function(a,c,b){if(null===a)return"";a=Number(a);var d=0>a?!0:!1;d&&(a*=-1);var e=b?b.decimalSeparator:".",h=b?b.digitGroupSeparator:",",f="";c=String(c);var f=1,k=b="",p=-1,m=[],g=[],r=0,l=0,n=0,q=!1,s=0,k=c.match(/"[^"]*"|'[^']*'|[eE][+-]*[0]+|[,]+[.]|\u2030|./g);c=null;for(var t=0;k&&t<k.length;t++)if(c=k[t],"."===c&&0>p)p=t;else{if("%"===c)f*=100;else{if("‰"===c){f*=1e3;continue}if(","===c[0]&&"."===c[c.length-1]){f/=Math.pow(1e3,c.length-1),p=t+c.length-1;continue}"E"!==c[0]&&"e"!==c[0]||"0"!==c[c.length-1]||(q=!0)}0>p?(m.push(c),"#"===c||"0"===c?r++:","===c&&n++):(g.push(c),"#"!==c&&"0"!==c||l++)}for(q&&(c=Math.floor(a),s=(0===c?"":String(c)).length-r,f/=Math.pow(10,s)),0>p&&(p=t),f=(a*f).toFixed(l),c=f.split("."),a=(c[0]+"").split(""),f=(c[1]+"").split(""),a&&"0"===a[0]&&a.shift(),t=q=k=l=p=0;0<m.length;)if(c=m.pop(),"#"===c||"0"===c)if(p++,p===r){var u=a;if(a=[],"0"===c)for(c=r-l-(u?u.length:0);c>0;)u.unshift("0"),c--;for(;0<u.length;)b=u.pop()+b,t++,0===t%q&&k===n&&0<u.length&&(b=h+b);d&&(b="-"+b)}else 0<a.length?(b=a.pop()+b,l++,t++):"0"===c&&(b="0"+b,l++,t++),0===t%q&&k===n&&0<a.length&&(b=h+b);else"E"!==c[0]&&"e"!==c[0]||"0"!==c[c.length-1]||!/[eE][+-]*[0]+/.test(c)?","===c?(k++,q=t,t=0,0<a.length&&(b=h+b)):b=1<c.length&&('"'===c[0]&&'"'===c[c.length-1]||"'"===c[0]&&"'"===c[c.length-1])?c.slice(1,c.length-1)+b:c+b:(c=0>s?c.replace("+","").replace("-",""):c.replace("-",""),b+=c.replace(/[0]+/,function(a){return G(s,a.length)}));for(d=0;0<g.length;)c=g.shift(),"#"===c||"0"===c?0<f.length&&0!==Number(f.join(""))?b+=(0===d++?e:"")+f.shift():"0"===c&&(b+=(0===d++?e:"")+"0"):1<c.length&&('"'===c[0]&&'"'===c[c.length-1]||"'"===c[0]&&"'"===c[c.length-1])?b+=(0===d++?e:"")+c.slice(1,c.length-1):"E"!==c[0]&&"e"!==c[0]||"0"!==c[c.length-1]||!/[eE][+-]*[0]+/.test(c)?b+=(0===d++?e:"")+c:(c=0>s?c.replace("+","").replace("-",""):c.replace("-",""),b+=c.replace(/[0]+/,function(a){return G(s,a.length)}));return b},sa=function(a){var c=0,b=0;return a=a||window.event,a.offsetX||0===a.offsetX?(c=a.offsetX,b=a.offsetY):a.layerX||0==a.layerX?(c=a.layerX,b=a.layerY):(c=a.pageX-a.target.offsetLeft,b=a.pageY-a.target.offsetTop),{x:c,y:b}},na=!0,ba=window.devicePixelRatio||1,Y=1,P=na?ba/Y:1;I.prototype.setOptions=function(a,c){if(qa[this._defaultsKey]){var d,b=qa[this._defaultsKey];for(d in b)this[d]=a&&d in a?a[d]:c&&d in c?c[d]:b[d]}},I.prototype.trackChanges=function(a){this._options._oldOptions||(this._options._oldOptions={}),this._options._oldOptions[a]=this._options[a]},I.prototype.isBeingTracked=function(a){return this._options._oldOptions||(this._options._oldOptions={}),this._options._oldOptions[a]?!0:!1},I.prototype.hasOptionChanged=function(a){return this._options._oldOptions||(this._options._oldOptions={}),this._options._oldOptions[a]!==this._options[a]},M(w,I),w.prototype._initialize=function(){this._selectedColorSet="undefined"!=typeof V[this.colorSet]?V[this.colorSet]:V.colorSet1,this.ctx.clearRect(0,0,this.width,this.height),this.ctx.beginPath(),this.axisY2=this.axisY=this.axisX=null,this._indexLabels=[],this._dataInRenderedOrder=[],this._events=[],this._eventManager&&this._eventManager.reset(),this.plotInfo={axisPlacement:null,axisXValueType:null,plotTypes:[]},this.layoutManager.reset(),this._cultureInfo=new pa(this,this._options.culture),this.data=[];for(var a=0,c=0;c<this._options.data.length;c++)if(a++,!this._options.data[c].type||0<=w._supportedChartTypes.indexOf(this._options.data[c].type)){var b=new N(this,this._options.data[c],this.theme,a-1,++this._eventManager.lastObjectId);null===b.name&&(b.name="DataSeries "+a),null===b.color?1<this._options.data.length?(b._colorSet=[this._selectedColorSet[b.index%this._selectedColorSet.length]],b.color=this._selectedColorSet[b.index%this._selectedColorSet.length]):b._colorSet="line"===b.type||"stepLine"===b.type||"spline"===b.type||"area"===b.type||"stepArea"===b.type||"splineArea"===b.type||"stackedArea"===b.type||"stackedArea100"===b.type?[this._selectedColorSet[0]]:this._selectedColorSet:b._colorSet=[b.color],null===b.markerSize&&(("line"===b.type||"stepLine"===b.type||"spline"===b.type)&&b.dataPoints&&b.dataPoints.length<this.width/16||"scatter"===b.type)&&(b.markerSize=8),"bubble"!==b.type&&"scatter"!==b.type||!b.dataPoints||b.dataPoints.sort(wa),this.data.push(b);var e,d=b.axisPlacement;if("normal"===d?"xySwapped"===this.plotInfo.axisPlacement?e='You cannot combine "'+b.type+'" with bar chart':"none"===this.plotInfo.axisPlacement?e='You cannot combine "'+b.type+'" with pie chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="normal"):"xySwapped"===d?"normal"===this.plotInfo.axisPlacement?e='You cannot combine "'+b.type+'" with line, area, column or pie chart':"none"===this.plotInfo.axisPlacement?e='You cannot combine "'+b.type+'" with pie chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="xySwapped"):"none"==d&&("normal"===this.plotInfo.axisPlacement?e='You cannot combine "'+b.type+'" with line, area, column or bar chart':"xySwapped"===this.plotInfo.axisPlacement?e='You cannot combine "'+b.type+'" with bar chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="none")),e&&window.console)return void window.console.log(e)}this._objectsInitialized=!0},w._supportedChartTypes="line stepLine spline column area stepArea splineArea bar bubble scatter stackedColumn stackedColumn100 stackedBar stackedBar100 stackedArea stackedArea100 pie doughnut".split(" "),w._supportedChartTypes.indexOf||(w._supportedChartTypes.indexOf=function(a,c){var b=this.length>>>0,d=Number(c)||0,d=0>d?Math.ceil(d):Math.floor(d);for(0>d&&(d+=b);b>d;d++)if(d in this&&this[d]===a)return d;return-1}),w.prototype.render=function(){this._initialize();for(var a=0;a<this.data.length;a++)("normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement)&&(this.data[a].axisYType&&"primary"!==this.data[a].axisYType?"secondary"===this.data[a].axisYType&&(this.axisY2||("normal"===this.plotInfo.axisPlacement?this.axisY2=new z(this,this._options.axisY2,"axisY","right"):"xySwapped"===this.plotInfo.axisPlacement&&(this.axisY2=new z(this,this._options.axisY2,"axisY","top"))),this.data[a].axisY=this.axisY2):(this.axisY||("normal"===this.plotInfo.axisPlacement?this.axisY=new z(this,this._options.axisY,"axisY","left"):"xySwapped"===this.plotInfo.axisPlacement&&(this.axisY=new z(this,this._options.axisY,"axisY","bottom"))),this.data[a].axisY=this.axisY),this.axisX||("normal"===this.plotInfo.axisPlacement?this.axisX=new z(this,this._options.axisX,"axisX","bottom"):"xySwapped"===this.plotInfo.axisPlacement&&(this.axisX=new z(this,this._options.axisX,"axisX","left"))),this.data[a].axisX=this.axisX);for(this._processData(),this._options.title&&(this._title=new U(this,this._options.title),this._title.render()),this.legend=new $(this,this._options.legend,this.theme),a=0;a<this.data.length;a++)this.data[a].showInLegend&&this.legend.dataSeries.push(this.data[a]);if(this.legend.render(),"normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement)this.layoutManager.getFreeSpace(),z.setLayoutAndRender(this.axisX,this.axisY,this.axisY2,this.plotInfo.axisPlacement,this.layoutManager.getFreeSpace());else{if("none"!==this.plotInfo.axisPlacement)return;this.preparePlotArea()}for(a=0;a<this.plotInfo.plotTypes.length;a++)for(var c=this.plotInfo.plotTypes[a],b=0;b<c.plotUnits.length;b++){var d=c.plotUnits[b];"line"===d.type?this.renderLine(d):"stepLine"===d.type?this.renderStepLine(d):"spline"===d.type?this.renderSpline(d):"column"===d.type?this.renderColumn(d):"bar"===d.type?this.renderBar(d):"area"===d.type?this.renderArea(d):"stepArea"===d.type?this.renderStepArea(d):"splineArea"===d.type?this.renderSplineArea(d):"stackedColumn"===d.type?this.renderStackedColumn(d):"stackedColumn100"===d.type?this.renderStackedColumn100(d):"stackedBar"===d.type?this.renderStackedBar(d):"stackedBar100"===d.type?this.renderStackedBar100(d):"stackedArea"===d.type?this.renderStackedArea(d):"stackedArea100"===d.type?this.renderStackedArea100(d):"bubble"===d.type?this.renderBubble(d):"scatter"===d.type?this.renderScatter(d):"pie"===d.type?this.renderPie(d):"doughnut"===d.type&&this.renderPie(d);for(var e=0;e<d.dataSeriesIndexes.length;e++)this._dataInRenderedOrder.push(this.data[d.dataSeriesIndexes[e]])}0<this._indexLabels.length&&this.renderIndexLabels(),this.attachPlotAreaEventHandlers(),this.zoomEnabled||this.panEnabled||"none"===this._toolBar.style.display||(this._toolBar.style.display="none"),this._toolTip._updateToolTip(),this.renderCount++},w.prototype.attachPlotAreaEventHandlers=function(){this.attachEvent({context:this,chart:this,mousedown:this._plotAreaMouseDown,mouseup:this._plotAreaMouseUp,mousemove:this._plotAreaMouseMove,cursor:this.zoomEnabled?"col-resize":"move",cursor:this.panEnabled?"move":"default",capture:!0,bounds:this.plotArea})},w.prototype.categoriseDataSeries=function(){for(var a="",c=0;c<this.data.length;c++)if(a=this.data[c],a.dataPoints&&0!==a.dataPoints.length&&a.visible&&0<=w._supportedChartTypes.indexOf(a.type)){for(var b=null,d=!1,e=null,h=!1,f=0;f<this.plotInfo.plotTypes.length;f++)if(this.plotInfo.plotTypes[f].type===a.type){d=!0,b=this.plotInfo.plotTypes[f];break}for(d||(b={type:a.type,totalDataSeries:0,plotUnits:[]},this.plotInfo.plotTypes.push(b)),f=0;f<b.plotUnits.length;f++)if(b.plotUnits[f].axisYType===a.axisYType){h=!0,e=b.plotUnits[f];break}h||(e={type:a.type,previousDataSeriesCount:0,index:b.plotUnits.length,plotType:b,axisYType:a.axisYType,axisY:"primary"===a.axisYType?this.axisY:this.axisY2,axisX:this.axisX,dataSeriesIndexes:[]},b.plotUnits.push(e)),b.totalDataSeries++,e.dataSeriesIndexes.push(c)}for(c=0;c<this.plotInfo.plotTypes.length;c++)for(b=this.plotInfo.plotTypes[c],f=a=0;f<b.plotUnits.length;f++)b.plotUnits[f].previousDataSeriesCount=a,a+=b.plotUnits[f].dataSeriesIndexes.length},w.prototype.assignIdToDataPoints=function(){for(var a=0;a<this.data.length;a++){var c=this.data[a];if(c.dataPoints)for(var b=c.dataPoints.length,d=0;b>d;d++)c.dataPointIds[d]=++this._eventManager.lastObjectId}},w.prototype._processData=function(){this.assignIdToDataPoints(),this.categoriseDataSeries();for(var a=0;a<this.plotInfo.plotTypes.length;a++)for(var c=this.plotInfo.plotTypes[a],b=0;b<c.plotUnits.length;b++){var d=c.plotUnits[b];"line"===d.type||"stepLine"===d.type||"spline"===d.type||"column"===d.type||"area"===d.type||"stepArea"===d.type||"splineArea"===d.type||"bar"===d.type||"bubble"===d.type||"scatter"===d.type?this._processMultiseriesPlotUnit(d):"stackedColumn"===d.type||"stackedBar"===d.type||"stackedArea"===d.type?this._processStackedPlotUnit(d):"stackedColumn100"!==d.type&&"stackedBar100"!==d.type&&"stackedArea100"!==d.type||this._processStacked100PlotUnit(d)}},w.prototype._processMultiseriesPlotUnit=function(a){if(a.dataSeriesIndexes&&!(1>a.dataSeriesIndexes.length))for(var d,e,c=a.axisY.dataInfo,b=a.axisX.dataInfo,h=!1,f=0;f<a.dataSeriesIndexes.length;f++){var k=this.data[a.dataSeriesIndexes[f]],p=0,m=!1,g=!1;if("normal"===k.axisPlacement||"xySwapped"===k.axisPlacement)var r=this.sessionVariables.axisX.internalMinimum?this.sessionVariables.axisX.internalMinimum:this._options.axisX&&this._options.axisX.minimum?this._options.axisX.minimum:-(1/0),l=this.sessionVariables.axisX.internalMaximum?this.sessionVariables.axisX.internalMaximum:this._options.axisX&&this._options.axisX.maximum?this._options.axisX.maximum:1/0;for((k.dataPoints[p].x&&k.dataPoints[p].x.getTime||"dateTime"===k.xValueType)&&(h=!0),p=0;p<k.dataPoints.length;p++){if("undefined"==typeof k.dataPoints[p].x&&(k.dataPoints[p].x=p),k.dataPoints[p].x.getTime?(h=!0,d=k.dataPoints[p].x.getTime()):d=k.dataPoints[p].x,e=k.dataPoints[p].y,d<b.min&&(b.min=d),d>b.max&&(b.max=d),e<c.min&&(c.min=e),e>c.max&&(c.max=e),p>0){var n=d-k.dataPoints[p-1].x;0>n&&(n*=-1),b.minDiff>n&&0!==n&&(b.minDiff=n)}if(!(r>d)||m){if(!m&&(m=!0,p>0)){p-=2;continue}if(d>l&&!g)g=!0;else if(d>l&&g)continue;k.dataPoints[p].label&&(a.axisX.labels[d]=k.dataPoints[p].label),d<b.viewPortMin&&(b.viewPortMin=d),d>b.viewPortMax&&(b.viewPortMax=d),e<c.viewPortMin&&(c.viewPortMin=e),e>c.viewPortMax&&(c.viewPortMax=e)}}this.plotInfo.axisXValueType=k.xValueType=h?"dateTime":"number"}},w.prototype._processStackedPlotUnit=function(a){if(a.dataSeriesIndexes&&!(1>a.dataSeriesIndexes.length)){for(var d,e,c=a.axisY.dataInfo,b=a.axisX.dataInfo,h=!1,f=[],k=[],p=0;p<a.dataSeriesIndexes.length;p++){var m=this.data[a.dataSeriesIndexes[p]],g=0,r=!1,l=!1;if("normal"===m.axisPlacement||"xySwapped"===m.axisPlacement)var n=this.sessionVariables.axisX.internalMinimum?this.sessionVariables.axisX.internalMinimum:this._options.axisX&&this._options.axisX.minimum?this._options.axisX.minimum:-(1/0),q=this.sessionVariables.axisX.internalMaximum?this.sessionVariables.axisX.internalMaximum:this._options.axisX&&this._options.axisX.maximum?this._options.axisX.maximum:1/0;for((m.dataPoints[g].x&&m.dataPoints[g].x.getTime||"dateTime"===m.xValueType)&&(h=!0),g=0;g<m.dataPoints.length;g++){if("undefined"==typeof m.dataPoints[g].x&&(m.dataPoints[g].x=g),m.dataPoints[g].x.getTime?(h=!0,d=m.dataPoints[g].x.getTime()):d=m.dataPoints[g].x,e=m.dataPoints[g].y,d<b.min&&(b.min=d),d>b.max&&(b.max=d),g>0){var s=d-m.dataPoints[g-1].x;0>s&&(s*=-1),b.minDiff>s&&0!==s&&(b.minDiff=s)}if(!(n>d)||r){if(!r&&(r=!0,g>0)){g-=2;continue}if(d>q&&!l)l=!0;else if(d>q&&l)continue;m.dataPoints[g].label&&(a.axisX.labels[d]=m.dataPoints[g].label),d<b.viewPortMin&&(b.viewPortMin=d),d>b.viewPortMax&&(b.viewPortMax=d),e>=0?f[d]=f[d]?f[d]+e:e:k[d]=k[d]?k[d]+e:e}}this.plotInfo.axisXValueType=m.xValueType=h?"dateTime":"number"}for(g in f)isNaN(g)||(a=f[g],a<c.min&&(c.min=a),a>c.max&&(c.max=a),g<b.viewPortMin||g>b.viewPortMax||(a<c.viewPortMin&&(c.viewPortMin=a),a>c.viewPortMax&&(c.viewPortMax=a)));for(g in k)isNaN(g)||(a=k[g],a<c.min&&(c.min=a),a>c.max&&(c.max=a),g<b.viewPortMin||g>b.viewPortMax||(a<c.viewPortMin&&(c.viewPortMin=a),a>c.viewPortMax&&(c.viewPortMax=a)))}},w.prototype._processStacked100PlotUnit=function(a){if(a.dataSeriesIndexes&&!(1>a.dataSeriesIndexes.length)){for(var d,e,c=a.axisY.dataInfo,b=a.axisX.dataInfo,h=!1,f=!1,k=!1,p=[],m=0;m<a.dataSeriesIndexes.length;m++){var g=this.data[a.dataSeriesIndexes[m]],r=0,l=!1,n=!1;if("normal"===g.axisPlacement||"xySwapped"===g.axisPlacement)var q=this.sessionVariables.axisX.internalMinimum?this.sessionVariables.axisX.internalMinimum:this._options.axisX&&this._options.axisX.minimum?this._options.axisX.minimum:-(1/0),s=this.sessionVariables.axisX.internalMaximum?this.sessionVariables.axisX.internalMaximum:this._options.axisX&&this._options.axisX.maximum?this._options.axisX.maximum:1/0;for((g.dataPoints[r].x&&g.dataPoints[r].x.getTime||"dateTime"===g.xValueType)&&(h=!0),r=0;r<g.dataPoints.length;r++){if("undefined"==typeof g.dataPoints[r].x&&(g.dataPoints[r].x=r),g.dataPoints[r].x.getTime?(h=!0,d=g.dataPoints[r].x.getTime()):d=g.dataPoints[r].x,e=g.dataPoints[r].y,d<b.min&&(b.min=d),d>b.max&&(b.max=d),r>0){var t=d-g.dataPoints[r-1].x;0>t&&(t*=-1),b.minDiff>t&&0!==t&&(b.minDiff=t)}if(!(q>d)||l){if(!l&&(l=!0,r>0)){r-=2;continue}if(d>s&&!n)n=!0;else if(d>s&&n)continue;g.dataPoints[r].label&&(a.axisX.labels[d]=g.dataPoints[r].label),d<b.viewPortMin&&(b.viewPortMin=d),d>b.viewPortMax&&(b.viewPortMax=d),e>=0?f=!0:k=!0,p[d]=p[d]?p[d]+Math.abs(e):Math.abs(e)}}this.plotInfo.axisXValueType=g.xValueType=h?"dateTime":"number"}f&&!k?(c.max=99,c.min=1):f&&k?(c.max=99,c.min=-99):!f&&k&&(c.max=-1,c.min=-99),c.viewPortMin=c.min,c.viewPortMax=c.max,a.dataPointYSums=p}},w.prototype.getDataPointAtXY=function(a,c,b){b=b||!1;for(var d=[],e=this._dataInRenderedOrder.length-1;e>=0;e--){var h=null;(h=this._dataInRenderedOrder[e].getDataPointAtXY(a,c,b))&&d.push(h)}for(a=null,c=!1,b=0;b<d.length;b++)if(("line"===d[b].dataSeries.type||"stepLine"===d[b].dataSeries.type||"area"===d[b].dataSeries.type||"stepArea"===d[b].dataSeries.type)&&(e=Q("markerSize",d[b].dataPoint,d[b].dataSeries)||8,d[b].distance<=e/2)){c=!0;break}for(b=0;b<d.length;b++)c&&"line"!==d[b].dataSeries.type&&"stepLine"!==d[b].dataSeries.type&&"area"!==d[b].dataSeries.type&&"stepArea"!==d[b].dataSeries.type||(a?d[b].distance<=a.distance&&(a=d[b]):a=d[b]);return a},w.prototype.getObjectAtXY=function(a,c,b){var d=null;if(b=this.getDataPointAtXY(a,c,b||!1))d=b.dataSeries.dataPointIds[b.dataPointIndex];else if(u)d=la(a,c,this._eventManager.ghostCtx);else for(b=0;b<this.legend.items.length;b++){var e=this.legend.items[b];a>=e.x1&&a<=e.x2&&c>=e.y1&&c<=e.y2&&(d=e.id)}return d},w.prototype.getAutoFontSize=function(a,c,b){return a/=400,Math.round(Math.min(this.width,this.height)*a)},w.prototype.resetOverlayedCanvas=function(){this.overlaidCanvasCtx.clearRect(0,0,this.width,this.height)},w.prototype.attachEvent=function(a){this._events.push(a)},w.prototype._touchEventHandler=function(a){if(a.changedTouches){var c=[],b=(c=a.changedTouches)?c[0]:a;switch(a.type){case"touchstart":case"MSPointerDown":c=["mousemove","mousedown"];break;case"touchmove":case"MSPointerMove":c=["mousemove"];break;case"touchend":case"MSPointerUp":c="touchstart"===this._lastTouchEventType||"MSPointerDown"===this._lastTouchEventType?["mouseup","click"]:["mouseup"];break;default:return}this._lastTouchEventType=a.type;for(var d=0;d<c.length;d++){var e=c[d],h=document.createEvent("MouseEvent");h.initMouseEvent(e,!0,!0,window,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,0,null),b.target.dispatchEvent(h),a.preventManipulation&&a.preventManipulation(),a.preventDefault&&a.preventDefault()}}},w.prototype._mouseEventHandler=function(a){a.preventManipulation&&a.preventManipulation(),a.preventDefault&&a.preventDefault(),"undefined"==typeof a.target&&a.srcElement&&(a.target=a.srcElement);var d,e,c=sa(a),b=a.type;if(a.which?e=3==a.which:a.button&&(e=2==a.button),!e){if(w.capturedEventParam)d=w.capturedEventParam,"mouseup"===b&&(w.capturedEventParam=null,d.chart.overlaidCanvas.releaseCapture?d.chart.overlaidCanvas.releaseCapture():document.body.removeEventListener("mouseup",d.chart._mouseEventHandler,!1)),d.hasOwnProperty(b)&&d[b].call(d.context,c.x,c.y);else if(this._events){for(e=0;e<this._events.length;e++)if(this._events[e].hasOwnProperty(b)){d=this._events[e];var h=d.bounds;if(c.x>=h.x1&&c.x<=h.x2&&c.y>=h.y1&&c.y<=h.y2){d[b].call(d.context,c.x,c.y),"mousedown"===b&&!0===d.capture?(w.capturedEventParam=d,this.overlaidCanvas.setCapture?this.overlaidCanvas.setCapture():document.body.addEventListener("mouseup",this._mouseEventHandler,!1)):"mouseup"===b&&(d.chart.overlaidCanvas.releaseCapture?d.chart.overlaidCanvas.releaseCapture():document.body.removeEventListener("mouseup",this._mouseEventHandler,!1));break}d=null}a.target.style.cursor=d&&d.cursor?d.cursor:this._defaultCursor}this._toolTip&&this._toolTip.enabled&&(b=this.plotArea,(c.x<b.x1||c.x>b.x2||c.y<b.y1||c.y>b.y2)&&this._toolTip.hide()),this.isDrag&&this.zoomEnabled||!this._eventManager||this._eventManager.mouseEventHandler(a)}},w.prototype._plotAreaMouseDown=function(a,c){this.isDrag=!0,this.dragStartPoint="none"!==this.plotInfo.axisPlacement?{x:a,y:c,xMinimum:this.axisX.minimum,xMaximum:this.axisX.maximum}:{x:a,y:c}},w.prototype._plotAreaMouseUp=function(a,c){var b,d;if(("normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement)&&this.isDrag){var e=0,e=this.axisX.lineCoordinates,e="xySwapped"===this.plotInfo.axisPlacement?c-this.dragStartPoint.y:this.dragStartPoint.x-a;if(Math.abs(this.axisX.maximum-this.axisX.minimum),2<Math.abs(e)){if(this.panEnabled)e=!1,d=0,this.axisX.sessionVariables.internalMinimum<this.axisX._absoluteMinimum?(d=this.axisX._absoluteMinimum-this.axisX.sessionVariables.internalMinimum,this.axisX.sessionVariables.internalMinimum+=d,this.axisX.sessionVariables.internalMaximum+=d,e=!0):this.axisX.sessionVariables.internalMaximum>this.axisX._absoluteMaximum&&(d=this.axisX.sessionVariables.internalMaximum-this.axisX._absoluteMaximum,this.axisX.sessionVariables.internalMaximum-=d,this.axisX.sessionVariables.internalMinimum-=d,e=!0),e&&this.render();else if(this.zoomEnabled){if(this.resetOverlayedCanvas(),!this.dragStartPoint)return;"xySwapped"===this.plotInfo.axisPlacement?(b=Math.min(this.dragStartPoint.y,c),d=Math.max(this.dragStartPoint.y,c),1<Math.abs(b-d)&&(e=this.axisX.lineCoordinates,d=this.axisX.maximum-(this.axisX.maximum-this.axisX.minimum)/e.height*(d-e.y1),e=this.axisX.maximum-(this.axisX.maximum-this.axisX.minimum)/e.height*(b-e.y1),d=Math.max(d,this.axisX.dataInfo.min),e=Math.min(e,this.axisX.dataInfo.max),Math.abs((e-d)/this.axisX.dataInfo.minDiff)>=.008*this.height&&(this.axisX.sessionVariables.internalMinimum=d,this.axisX.sessionVariables.internalMaximum=e,this.render()))):"normal"===this.plotInfo.axisPlacement&&(d=Math.min(this.dragStartPoint.x,a),b=Math.max(this.dragStartPoint.x,a),1<Math.abs(d-b)&&(e=this.axisX.lineCoordinates,d=(this.axisX.maximum-this.axisX.minimum)/e.width*(d-e.x1)+this.axisX.minimum,e=(this.axisX.maximum-this.axisX.minimum)/e.width*(b-e.x1)+this.axisX.minimum,d=Math.max(d,this.axisX.dataInfo.min),e=Math.min(e,this.axisX.dataInfo.max),Math.abs((e-d)/this.axisX.dataInfo.minDiff)>=.01*this.width&&(this.axisX.sessionVariables.internalMinimum=d,this.axisX.sessionVariables.internalMaximum=e,this.render())))}this.zoomEnabled&&"none"===this._toolBar.style.display&&(this._toolBar.style.display="inline",this._zoomButton.innerHTML=this._cultureInfo.panText,this._resetButton.innerHTML=this._cultureInfo.resetText)}}this.isDrag=!1},w.prototype._plotAreaMouseMove=function(a,c){if(this.isDrag&&"none"!==this.plotInfo.axisPlacement){var b=0,d=0,d=this.axisX.lineCoordinates;if("xySwapped"===this.plotInfo.axisPlacement?(b=c-this.dragStartPoint.y,d=Math.abs(this.axisX.maximum-this.axisX.minimum)/d.height*b):(b=this.dragStartPoint.x-a,d=Math.abs(this.axisX.maximum-this.axisX.minimum)/d.width*b),2<Math.abs(b)&&8>Math.abs(b)&&(this.panEnabled||this.zoomEnabled)?this._toolTip.hide():!this._toolTip.enabled||this.panEnabled||this.zoomEnabled||this._toolTip.mouseMoveHandler(a,c),2<Math.abs(b)&&(this.panEnabled||this.zoomEnabled))if(this.panEnabled){this.axisX.sessionVariables.internalMinimum=this.dragStartPoint.xMinimum+d,this.axisX.sessionVariables.internalMaximum=this.dragStartPoint.xMaximum+d,b=0,this.axisX.sessionVariables.internalMinimum<this.axisX._absoluteMinimum-R(this.axisX.interval,this.axisX.intervalType)?(b=this.axisX._absoluteMinimum-R(this.axisX.interval,this.axisX.intervalType)-this.axisX.sessionVariables.internalMinimum,this.axisX.sessionVariables.internalMinimum+=b,this.axisX.sessionVariables.internalMaximum+=b):this.axisX.sessionVariables.internalMaximum>this.axisX._absoluteMaximum+R(this.axisX.interval,this.axisX.intervalType)&&(b=this.axisX.sessionVariables.internalMaximum-(this.axisX._absoluteMaximum+R(this.axisX.interval,this.axisX.intervalType)),this.axisX.sessionVariables.internalMaximum-=b,this.axisX.sessionVariables.internalMinimum-=b);var e=this;clearTimeout(this._panTimerId),this._panTimerId=setTimeout(function(){e.render()},0)}else this.zoomEnabled&&(b=this.plotArea,this.resetOverlayedCanvas(),d=this.overlaidCanvasCtx.globalAlpha,this.overlaidCanvasCtx.globalAlpha=.7,this.overlaidCanvasCtx.fillStyle="#A0ABB8","xySwapped"===this.plotInfo.axisPlacement?this.overlaidCanvasCtx.fillRect(b.x1,this.dragStartPoint.y,b.x2-b.x1,c-this.dragStartPoint.y):"normal"===this.plotInfo.axisPlacement&&this.overlaidCanvasCtx.fillRect(this.dragStartPoint.x,b.y1,a-this.dragStartPoint.x,b.y2-b.y1),this.overlaidCanvasCtx.globalAlpha=d)}else this._toolTip.enabled&&this._toolTip.mouseMoveHandler(a,c)},w.prototype.preparePlotArea=function(){var a=this.plotArea,c=this.axisY?this.axisY:this.axisY2;!u&&(0<a.x1||0<a.y1)&&a.ctx.translate(a.x1,a.y1),this.axisX&&c?(a.x1=this.axisX.lineCoordinates.x1<this.axisX.lineCoordinates.x2?this.axisX.lineCoordinates.x1:c.lineCoordinates.x1,a.y1=this.axisX.lineCoordinates.y1<c.lineCoordinates.y1?this.axisX.lineCoordinates.y1:c.lineCoordinates.y1,a.x2=this.axisX.lineCoordinates.x2>c.lineCoordinates.x2?this.axisX.lineCoordinates.x2:c.lineCoordinates.x2,a.y2=this.axisX.lineCoordinates.y2>this.axisX.lineCoordinates.y1?this.axisX.lineCoordinates.y2:c.lineCoordinates.y2,a.width=a.x2-a.x1,a.height=a.y2-a.y1):(c=this.layoutManager.getFreeSpace(),a.x1=c.x1,a.x2=c.x2,a.y1=c.y1,a.y2=c.y2,a.width=c.width,a.height=c.height),u||(a.canvas.width=a.width,a.canvas.height=a.height,a.canvas.style.left=a.x1+"px",a.canvas.style.top=a.y1+"px",(0<a.x1||0<a.y1)&&a.ctx.translate(-a.x1,-a.y1))},w.prototype.getPixelCoordinatesOnPlotArea=function(a,c){return{x:this.axisX.getPixelCoordinatesOnAxis(a).x,y:this.axisY.getPixelCoordinatesOnAxis(c).y}},w.prototype.renderIndexLabels=function(){var a=this.plotArea.ctx;a.textBaseline="middle";for(var c=this.plotArea,b=0;b<this._indexLabels.length;b++){var e,h,f,d=this._indexLabels[b];a.fillStyle=Q("indexLabelFontColor",d.dataPoint,d.dataSeries),a.font=ma("indexLabel",d.dataPoint,d.dataSeries);var k=this.replaceKeywordsWithValue(Q("indexLabel",d.dataPoint,d.dataSeries),d.dataPoint,d.dataSeries),p=a.measureText(k).width,m=Q("indexLabelFontSize",d.dataPoint,d.dataSeries),g=Q("indexLabelPlacement",d.dataPoint,d.dataSeries),r=Q("indexLabelOrientation",d.dataPoint,d.dataSeries),l=f=0,n=0,q=0,s=0;d.point.x<c.x1||d.point.x>c.x2||d.point.y<c.y1||d.point.y>c.y2||("column"===d.chartType||"stackedColumn"===d.chartType||"stackedColumn100"===d.chartType||"bar"===d.chartType||"stackedBar"===d.chartType||"stackedBar100"===d.chartType?(Math.abs(d.bounds.x1,d.bounds.x2),Math.abs(d.bounds.y1,d.bounds.y2),"normal"===this.plotInfo.axisPlacement?("outside"===g?(l=c.y1,n=c.y2):"inside"===g&&(l=d.bounds.y1,n=d.bounds.y2),"horizontal"===r?(e=d.point.x-p/2,h=0<=d.dataPoint.y?Math.min(Math.max(d.point.y-m/2-5,l+m/2+5),n-m/2-5):Math.max(Math.min(d.point.y+m/2+5,n-m/2),l+m/2+5)):"vertical"===r&&(e=d.point.x,h=0<=d.dataPoint.y?Math.min(Math.max(d.point.y-5,l+p+5),n):Math.max(Math.min(d.point.y+p+5,n-5),l),f=-90)):"xySwapped"===this.plotInfo.axisPlacement&&("outside"===g?(q=c.x1,s=c.x2):"inside"===g&&(q=d.bounds.x1,s=d.bounds.x2),"horizontal"===r?(h=d.point.y,e=0<=d.dataPoint.y?Math.max(Math.min(d.point.x+5,s-p),q):Math.min(Math.max(d.point.x-p-5,q),s)):"vertical"===r&&(h=d.point.y+p/2,e=0<=d.dataPoint.y?Math.max(Math.min(d.point.x+m/2+5,s-m/2),q):Math.min(Math.max(d.point.x-m/2-5,q+m/2),s+m/2),f=-90))):"horizontal"===r?(e=d.point.x-p/2,h=0<=d.dataPoint.y?Math.max(d.point.y-m/2-5,c.y1+m/2):Math.min(d.point.y+m/2+5,c.y2-m/2)):"vertical"===r&&(e=d.point.x,h=0<=d.dataPoint.y?Math.max(d.point.y-5,c.y1+p):Math.min(d.point.y+p+5,c.y2),f=-90),a.save(),a.translate(e,h),a.rotate(Math.PI/180*f),a.fillText(k,0,0),a.restore())}},w.prototype.renderLine=function(a){var c=this.plotArea.ctx;if(!(0>=a.dataSeriesIndexes.length)){var b=this._eventManager.ghostCtx;c.save();var d=this.plotArea;c.beginPath(),c.rect(d.x1,d.y1,d.width,d.height),c.clip();for(var d=[],e=0;e<a.dataSeriesIndexes.length;e++){var h=a.dataSeriesIndexes[e],f=this.data[h];c.lineWidth=f.lineThickness;var k=f.dataPoints,p=f.id;this._eventManager.objectMap[p]={objectType:"dataSeries",
dataSeriesIndex:h},p=A(p),b.strokeStyle=p,b.lineWidth=0<f.lineThickness?Math.max(f.lineThickness,4):0,p=f._colorSet[0],c.strokeStyle=p;var r,l,m=!0,g=0;if(c.beginPath(),0<k.length){for(var n=!1,g=0;g<k.length;g++)if(r=k[g].x.getTime?k[g].x.getTime():k[g].x,!(r<a.axisX.dataInfo.viewPortMin||r>a.axisX.dataInfo.viewPortMax))if("number"!=typeof k[g].y)g>0&&(c.stroke(),u&&b.stroke()),n=!0;else{r=a.axisX.conversionParameters.reference+a.axisX.conversionParameters.pixelPerUnit*(r-a.axisX.conversionParameters.minimum)+.5<<0,l=a.axisY.conversionParameters.reference+a.axisY.conversionParameters.pixelPerUnit*(k[g].y-a.axisY.conversionParameters.minimum)+.5<<0;var q=f.dataPointIds[g];if(this._eventManager.objectMap[q]={id:q,objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:g,x1:r,y1:l},m||n?(c.beginPath(),c.moveTo(r,l),u&&(b.beginPath(),b.moveTo(r,l)),n=m=!1):(c.lineTo(r,l),u&&b.lineTo(r,l),0==g%500&&(c.stroke(),c.beginPath(),c.moveTo(r,l),u&&(b.stroke(),b.beginPath(),b.moveTo(r,l)))),0<k[g].markerSize||0<f.markerSize){var s=f.getMarkerProperties(g,r,l,c);d.push(s),(!f.maxWidthInX||s.size>f.maxWidthInX)&&(f.maxWidthInX=s.size/(1<a.axisX.conversionParameters.pixelPerUnit?a.axisX.conversionParameters.pixelPerUnit-1:a.axisX.conversionParameters.pixelPerUnit)),q=A(q),u&&d.push({x:r,y:l,ctx:b,type:s.type,size:s.size,color:q,borderColor:q,borderThickness:s.borderThickness})}(k[g].indexLabel||f.indexLabel)&&this._indexLabels.push({chartType:"line",dataPoint:k[g],dataSeries:f,point:{x:r,y:l},color:p})}c.stroke(),u&&b.stroke()}}H.drawMarkers(d),c.restore(),c.beginPath(),u&&b.beginPath()}},w.prototype.renderStepLine=function(a){var c=this.plotArea.ctx;if(!(0>=a.dataSeriesIndexes.length)){var b=this._eventManager.ghostCtx;c.save();var d=this.plotArea;c.beginPath(),c.rect(d.x1,d.y1,d.width,d.height),c.clip();for(var d=[],e=0;e<a.dataSeriesIndexes.length;e++){var h=a.dataSeriesIndexes[e],f=this.data[h];c.lineWidth=f.lineThickness;var k=f.dataPoints,p=f.id;this._eventManager.objectMap[p]={objectType:"dataSeries",dataSeriesIndex:h},p=A(p),b.strokeStyle=p,b.lineWidth=0<f.lineThickness?Math.max(f.lineThickness,4):0,p=f._colorSet[0],c.strokeStyle=p;var r,l,m=!0,g=0;if(c.beginPath(),0<k.length){for(var n=!1,g=0;g<k.length;g++)if(r=k[g].getTime?k[g].x.getTime():k[g].x,!(r<a.axisX.dataInfo.viewPortMin||r>a.axisX.dataInfo.viewPortMax))if("number"!=typeof k[g].y)g>0&&(c.stroke(),u&&b.stroke()),n=!0;else{var q=l;r=a.axisX.conversionParameters.reference+a.axisX.conversionParameters.pixelPerUnit*(r-a.axisX.conversionParameters.minimum)+.5<<0,l=a.axisY.conversionParameters.reference+a.axisY.conversionParameters.pixelPerUnit*(k[g].y-a.axisY.conversionParameters.minimum)+.5<<0;var s=f.dataPointIds[g];this._eventManager.objectMap[s]={id:s,objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:g,x1:r,y1:l},m||n?(c.beginPath(),c.moveTo(r,l),u&&(b.beginPath(),b.moveTo(r,l)),n=m=!1):(c.lineTo(r,q),u&&b.lineTo(r,q),c.lineTo(r,l),u&&b.lineTo(r,l),0==g%500&&(c.stroke(),c.beginPath(),c.moveTo(r,l),u&&(b.stroke(),b.beginPath(),b.moveTo(r,l)))),(0<k[g].markerSize||0<f.markerSize)&&(q=f.getMarkerProperties(g,r,l,c),d.push(q),(!f.maxWidthInX||q.size>f.maxWidthInX)&&(f.maxWidthInX=q.size/(1<a.axisX.conversionParameters.pixelPerUnit?a.axisX.conversionParameters.pixelPerUnit-1:a.axisX.conversionParameters.pixelPerUnit)),s=A(s),u&&d.push({x:r,y:l,ctx:b,type:q.type,size:q.size,color:s,borderColor:s,borderThickness:q.borderThickness})),(k[g].indexLabel||f.indexLabel)&&this._indexLabels.push({chartType:"stepLine",dataPoint:k[g],dataSeries:f,point:{x:r,y:l},color:p})}c.stroke(),u&&b.stroke()}}H.drawMarkers(d),c.restore(),c.beginPath(),u&&b.beginPath()}},w.prototype.renderSpline=function(a){function c(a){if(a=oa(a,2),0<a.length){b.beginPath(),u&&d.beginPath(),b.moveTo(a[0].x,a[0].y),u&&d.moveTo(a[0].x,a[0].y);for(var c=0;c<a.length-3;c+=3)b.bezierCurveTo(a[c+1].x,a[c+1].y,a[c+2].x,a[c+2].y,a[c+3].x,a[c+3].y),u&&d.bezierCurveTo(a[c+1].x,a[c+1].y,a[c+2].x,a[c+2].y,a[c+3].x,a[c+3].y),c>0&&0===c%3e3&&(b.stroke(),b.beginPath(),b.moveTo(a[c+3].x,a[c+3].y),u&&(d.stroke(),d.beginPath(),d.moveTo(a[c+3].x,a[c+3].y)));b.stroke(),u&&d.stroke()}}var b=this.plotArea.ctx;if(!(0>=a.dataSeriesIndexes.length)){var d=this._eventManager.ghostCtx;b.save();var e=this.plotArea;b.beginPath(),b.rect(e.x1,e.y1,e.width,e.height),b.clip();for(var e=[],h=0;h<a.dataSeriesIndexes.length;h++){var f=a.dataSeriesIndexes[h],k=this.data[f];b.lineWidth=k.lineThickness;var p=k.dataPoints,m=k.id;this._eventManager.objectMap[m]={objectType:"dataSeries",dataSeriesIndex:f},m=A(m),d.strokeStyle=m,d.lineWidth=0<k.lineThickness?Math.max(k.lineThickness,4):0,m=k._colorSet[0],b.strokeStyle=m;var r,l,g=0,n=[];if(b.beginPath(),0<p.length)for(g=0;g<p.length;g++)if(r=p[g].getTime?p[g].x.getTime():p[g].x,!(r<a.axisX.dataInfo.viewPortMin||r>a.axisX.dataInfo.viewPortMax))if("number"!=typeof p[g].y)g>0&&(c(n),n=[]);else{r=a.axisX.conversionParameters.reference+a.axisX.conversionParameters.pixelPerUnit*(r-a.axisX.conversionParameters.minimum)+.5<<0,l=a.axisY.conversionParameters.reference+a.axisY.conversionParameters.pixelPerUnit*(p[g].y-a.axisY.conversionParameters.minimum)+.5<<0;var q=k.dataPointIds[g];if(this._eventManager.objectMap[q]={id:q,objectType:"dataPoint",dataSeriesIndex:f,dataPointIndex:g,x1:r,y1:l},n[n.length]={x:r,y:l},0<p[g].markerSize||0<k.markerSize){var s=k.getMarkerProperties(g,r,l,b);e.push(s),(!k.maxWidthInX||s.size>k.maxWidthInX)&&(k.maxWidthInX=s.size/(1<a.axisX.conversionParameters.pixelPerUnit?a.axisX.conversionParameters.pixelPerUnit-1:a.axisX.conversionParameters.pixelPerUnit)),q=A(q),u&&e.push({x:r,y:l,ctx:d,type:s.type,size:s.size,color:q,borderColor:q,borderThickness:s.borderThickness})}(p[g].indexLabel||k.indexLabel)&&this._indexLabels.push({chartType:"spline",dataPoint:p[g],dataSeries:k,point:{x:r,y:l},color:m})}c(n)}H.drawMarkers(e),b.restore(),b.beginPath(),u&&d.beginPath()}};var J=function(a,c,b,d,e,h,f,k,p,m){var g=d-c>15&&e-b>15?8:.35*Math.min(d-c,e-b);a.beginPath(),a.moveTo(c,b),a.save(),a.fillStyle=h,a.fillRect(c,b,d-c,e-b),a.restore(),!0===f&&(a.save(),a.beginPath(),a.moveTo(c,b),a.lineTo(c+g,b+g),a.lineTo(d-g,b+g),a.lineTo(d,b),a.closePath(),f=a.createLinearGradient((d+c)/2,b+g,(d+c)/2,b),f.addColorStop(0,h),f.addColorStop(1,"rgba(255, 255, 255, .4)"),a.fillStyle=f,a.fill(),a.restore()),!0===k&&(a.save(),a.beginPath(),a.moveTo(c,e),a.lineTo(c+g,e-g),a.lineTo(d-g,e-g),a.lineTo(d,e),a.closePath(),f=a.createLinearGradient((d+c)/2,e-g,(d+c)/2,e),f.addColorStop(0,h),f.addColorStop(1,"rgba(255, 255, 255, .4)"),a.fillStyle=f,a.fill(),a.restore()),!0===p&&(a.save(),a.beginPath(),a.moveTo(c,b),a.lineTo(c+g,b+g),a.lineTo(c+g,e-g),a.lineTo(c,e),a.closePath(),f=a.createLinearGradient(c+g,(e+b)/2,c,(e+b)/2),f.addColorStop(0,h),f.addColorStop(1,"rgba(255, 255, 255, 0.1)"),a.fillStyle=f,a.fill(),a.restore()),!0===m&&(a.save(),a.beginPath(),a.moveTo(d,b),a.lineTo(d-g,b+g),a.lineTo(d-g,e-g),a.lineTo(d,e),f=a.createLinearGradient(d-g,(e+b)/2,d,(e+b)/2),f.addColorStop(0,h),f.addColorStop(1,"rgba(255, 255, 255, 0.1)"),a.fillStyle=f,f.addColorStop(0,h),f.addColorStop(1,"rgba(255, 255, 255, 0.1)"),a.fillStyle=f,a.fill(),a.closePath(),a.restore())};w.prototype.renderColumn=function(a){var c=this.plotArea.ctx;if(!(0>=a.dataSeriesIndexes.length)){var h,f,k,b=null,d=this.plotArea,e=0,p=a.axisY.conversionParameters.reference+a.axisY.conversionParameters.pixelPerUnit*(0-a.axisY.conversionParameters.minimum)<<0,e=.15*this.width,m=a.axisX.dataInfo.minDiff,g=.9*(d.width/Math.abs(a.axisX.maximum-a.axisX.minimum)*Math.abs(m)/a.plotType.totalDataSeries)<<0;for(g>e?g=e:1/0===m?g=e:1>g&&(g=1),c.save(),u&&this._eventManager.ghostCtx.save(),c.beginPath(),c.rect(d.x1,d.y1,d.width,d.height),c.clip(),u&&(this._eventManager.ghostCtx.rect(d.x1,d.y1,d.width,d.height),this._eventManager.ghostCtx.clip()),d=0;d<a.dataSeriesIndexes.length;d++){var m=a.dataSeriesIndexes[d],r=this.data[m],l=r.dataPoints;if(r.maxWidthInX=g/(1<a.axisX.conversionParameters.pixelPerUnit?a.axisX.conversionParameters.pixelPerUnit-1:a.axisX.conversionParameters.pixelPerUnit),0<l.length)for(var n=g>5&&r.bevelEnabled?!0:!1,e=0;e<l.length;e++)if(k=l[e].getTime?l[e].x.getTime():l[e].x,!(k<a.axisX.dataInfo.viewPortMin||k>a.axisX.dataInfo.viewPortMax)&&"number"==typeof l[e].y){h=a.axisX.conversionParameters.reference+a.axisX.conversionParameters.pixelPerUnit*(k-a.axisX.conversionParameters.minimum)+.5<<0,f=a.axisY.conversionParameters.reference+a.axisY.conversionParameters.pixelPerUnit*(l[e].y-a.axisY.conversionParameters.minimum)+.5<<0,h=h-a.plotType.totalDataSeries*g/2+(a.previousDataSeriesCount+d)*g<<0;var s,q=h+g<<0;0<=l[e].y?s=p:(s=f,f=p),f>s&&(s=f=s),b=l[e].color?l[e].color:r._colorSet[e%r._colorSet.length],J(c,h,f,q,s,b,n&&0<=l[e].y,0>l[e].y&&n,!1,!1),b=r.dataPointIds[e],this._eventManager.objectMap[b]={id:b,objectType:"dataPoint",dataSeriesIndex:m,dataPointIndex:e,x1:h,y1:f,x2:q,y2:s},b=A(b),u&&J(this._eventManager.ghostCtx,h,f,q,s,b,!1,!1,!1,!1),(l[e].indexLabel||r.indexLabel)&&this._indexLabels.push({chartType:"column",dataPoint:l[e],dataSeries:r,point:{x:h+(q-h)/2,y:0<=l[e].y?f:s},bounds:{x1:h,y1:Math.min(f,s),x2:q,y2:Math.max(f,s)},color:b})}}c.restore(),u&&this._eventManager.ghostCtx.restore()}},w.prototype.renderStackedColumn=function(a){var c=this.plotArea.ctx;if(!(0>=a.dataSeriesIndexes.length)){var k,b=null,d=this.plotArea,e=[],h=[],f=0,p=a.axisY.conversionParameters.reference+a.axisY.conversionParameters.pixelPerUnit*(0-a.axisY.conversionParameters.minimum)<<0,f=.15*this.width,m=a.axisX.dataInfo.minDiff,g=.9*(d.width/Math.abs(a.axisX.maximum-a.axisX.minimum)*Math.abs(m)/a.plotType.plotUnits.length)<<0;for(g>f?g=f:1/0===m?g=f:1>g&&(g=1),c.save(),u&&this._eventManager.ghostCtx.save(),c.beginPath(),c.rect(d.x1,d.y1,d.width,d.height),c.clip(),u&&(this._eventManager.ghostCtx.rect(d.x1,d.y1,d.width,d.height),this._eventManager.ghostCtx.clip()),m=0;m<a.dataSeriesIndexes.length;m++){var r=a.dataSeriesIndexes[m],l=this.data[r],n=l.dataPoints;if(l.maxWidthInX=g/(1<a.axisX.conversionParameters.pixelPerUnit?a.axisX.conversionParameters.pixelPerUnit-1:a.axisX.conversionParameters.pixelPerUnit),0<n.length){var q=g>5&&l.bevelEnabled?!0:!1;for(c.strokeStyle="#4572A7 ",f=0;f<n.length;f++)if(b=n[f].x.getTime?n[f].x.getTime():n[f].x,!(b<a.axisX.dataInfo.viewPortMin||b>a.axisX.dataInfo.viewPortMax)&&"number"==typeof n[f].y){d=a.axisX.conversionParameters.reference+a.axisX.conversionParameters.pixelPerUnit*(b-a.axisX.conversionParameters.minimum)+.5<<0,k=a.axisY.conversionParameters.reference+a.axisY.conversionParameters.pixelPerUnit*(n[f].y-a.axisY.conversionParameters.minimum)+.5<<0;var v,s=d-a.plotType.plotUnits.length*g/2+a.index*g<<0,t=s+g<<0;if(0<=n[f].y){var B=e[b]?e[b]:0;k-=B,v=p-B,e[b]=B+(v-k)}else B=h[b]?h[b]:0,v=k+B,k=p+B,h[b]=B+(v-k);b=n[f].color?n[f].color:l._colorSet[f%l._colorSet.length],J(c,s,k,t,v,b,q&&0<=n[f].y,0>n[f].y&&q,!1,!1),b=l.dataPointIds[f],this._eventManager.objectMap[b]={id:b,objectType:"dataPoint",dataSeriesIndex:r,dataPointIndex:f,x1:s,y1:k,x2:t,y2:v},b=A(b),u&&J(this._eventManager.ghostCtx,s,k,t,v,b,!1,!1,!1,!1),(n[f].indexLabel||l.indexLabel)&&this._indexLabels.push({chartType:"stackedColumn",dataPoint:n[f],dataSeries:l,point:{x:d,y:0<=n[f].y?k:v},bounds:{x1:s,y1:Math.min(k,v),x2:t,y2:Math.max(k,v)},color:b})}}}c.restore(),u&&this._eventManager.ghostCtx.restore()}},w.prototype.renderStackedColumn100=function(a){var c=this.plotArea.ctx;if(!(0>=a.dataSeriesIndexes.length)){var k,b=null,d=this.plotArea,e=[],h=[],f=0,p=a.axisY.conversionParameters.reference+a.axisY.conversionParameters.pixelPerUnit*(0-a.axisY.conversionParameters.minimum)<<0,f=.15*this.width,m=a.axisX.dataInfo.minDiff,g=.9*(d.width/Math.abs(a.axisX.maximum-a.axisX.minimum)*Math.abs(m)/a.plotType.plotUnits.length)<<0;for(g>f?g=f:1/0===m?g=f:1>g&&(g=1),c.save(),u&&this._eventManager.ghostCtx.save(),c.beginPath(),c.rect(d.x1,d.y1,d.width,d.height),c.clip(),u&&(this._eventManager.ghostCtx.rect(d.x1,d.y1,d.width,d.height),this._eventManager.ghostCtx.clip()),m=0;m<a.dataSeriesIndexes.length;m++){var r=a.dataSeriesIndexes[m],l=this.data[r],n=l.dataPoints;if(l.maxWidthInX=g/(1<a.axisX.conversionParameters.pixelPerUnit?a.axisX.conversionParameters.pixelPerUnit-1:a.axisX.conversionParameters.pixelPerUnit),0<n.length)for(var q=g>5&&l.bevelEnabled?!0:!1,f=0;f<n.length;f++)if(b=n[f].x.getTime?n[f].x.getTime():n[f].x,!(b<a.axisX.dataInfo.viewPortMin||b>a.axisX.dataInfo.viewPortMax)&&"number"==typeof n[f].y){d=a.axisX.conversionParameters.reference+a.axisX.conversionParameters.pixelPerUnit*(b-a.axisX.conversionParameters.minimum)+.5<<0,k=a.axisY.conversionParameters.reference+a.axisY.conversionParameters.pixelPerUnit*((0!==a.dataPointYSums[b]?100*(n[f].y/a.dataPointYSums[b]):0)-a.axisY.conversionParameters.minimum)+.5<<0;var v,s=d-a.plotType.plotUnits.length*g/2+a.index*g<<0,t=s+g<<0;if(0<=n[f].y){var B=e[b]?e[b]:0;k-=B,v=p-B,e[b]=B+(v-k)}else B=h[b]?h[b]:0,v=k+B,k=p+B,h[b]=B+(v-k);b=n[f].color?n[f].color:l._colorSet[f%l._colorSet.length],J(c,s,k,t,v,b,q&&0<=n[f].y,0>n[f].y&&q,!1,!1),b=l.dataPointIds[f],this._eventManager.objectMap[b]={id:b,objectType:"dataPoint",dataSeriesIndex:r,dataPointIndex:f,x1:s,y1:k,x2:t,y2:v},b=A(b),u&&J(this._eventManager.ghostCtx,s,k,t,v,b,!1,!1,!1,!1),(n[f].indexLabel||l.indexLabel)&&this._indexLabels.push({chartType:"stackedColumn100",dataPoint:n[f],dataSeries:l,point:{x:d,y:0<=n[f].y?k:v},bounds:{x1:s,y1:Math.min(k,v),x2:t,y2:Math.max(k,v)},color:b})}}c.restore(),u&&this._eventManager.ghostCtx.restore()}},w.prototype.renderBar=function(a){var c=this.plotArea.ctx;if(!(0>=a.dataSeriesIndexes.length)){var h,f,k,b=null,d=this.plotArea,e=0,p=a.axisY.conversionParameters.reference+a.axisY.conversionParameters.pixelPerUnit*(0-a.axisY.conversionParameters.minimum)<<0,e=.15*this.height,m=a.axisX.dataInfo.minDiff,g=.9*(d.height/Math.abs(a.axisX.maximum-a.axisX.minimum)*Math.abs(m)/a.plotType.totalDataSeries)<<0;for(g>e?g=e:1/0===m?g=e:1>g&&(g=1),c.save(),u&&this._eventManager.ghostCtx.save(),c.beginPath(),c.rect(d.x1,d.y1,d.width,d.height),c.clip(),u&&(this._eventManager.ghostCtx.rect(d.x1,d.y1,d.width,d.height),this._eventManager.ghostCtx.clip()),d=0;d<a.dataSeriesIndexes.length;d++){var m=a.dataSeriesIndexes[d],r=this.data[m],l=r.dataPoints;if(r.maxWidthInX=g/(1<a.axisX.conversionParameters.pixelPerUnit?a.axisX.conversionParameters.pixelPerUnit-1:a.axisX.conversionParameters.pixelPerUnit),0<l.length){var n=g>5&&r.bevelEnabled?!0:!1;for(c.strokeStyle="#4572A7 ",e=0;e<l.length;e++)if(k=l[e].getTime?l[e].x.getTime():l[e].x,!(k<a.axisX.dataInfo.viewPortMin||k>a.axisX.dataInfo.viewPortMax)&&"number"==typeof l[e].y){f=a.axisX.conversionParameters.reference+a.axisX.conversionParameters.pixelPerUnit*(k-a.axisX.conversionParameters.minimum)+.5<<0,h=a.axisY.conversionParameters.reference+a.axisY.conversionParameters.pixelPerUnit*(l[e].y-a.axisY.conversionParameters.minimum)+.5<<0,f=f-a.plotType.totalDataSeries*g/2+(a.previousDataSeriesCount+d)*g<<0;var s,q=f+g<<0;0<=l[e].y?s=p:(s=h,h=p),b=l[e].color?l[e].color:r._colorSet[e%r._colorSet.length],J(c,s,f,h,q,b,n,!1,!1,!1),b=r.dataPointIds[e],this._eventManager.objectMap[b]={id:b,objectType:"dataPoint",dataSeriesIndex:m,dataPointIndex:e,x1:s,y1:f,x2:h,y2:q},b=A(b),u&&J(this._eventManager.ghostCtx,s,f,h,q,b,!1,!1,!1,!1),this._indexLabels.push({chartType:"bar",dataPoint:l[e],dataSeries:r,point:{x:0<=l[e].y?h:s,y:f+(q-f)/2},bounds:{x1:Math.min(s,h),y1:f,x2:Math.max(s,h),y2:q},color:b})}}}c.restore(),u&&this._eventManager.ghostCtx.restore()}},w.prototype.renderStackedBar=function(a){var c=this.plotArea.ctx;if(!(0>=a.dataSeriesIndexes.length)){var k,b=null,d=this.plotArea,e=[],h=[],f=0,p=a.axisY.conversionParameters.reference+a.axisY.conversionParameters.pixelPerUnit*(0-a.axisY.conversionParameters.minimum)<<0,f=.15*this.width,m=a.axisX.dataInfo.minDiff,g=.9*(d.height/Math.abs(a.axisX.maximum-a.axisX.minimum)*Math.abs(m)/a.plotType.plotUnits.length)<<0;for(g>f?g=f:1/0===m?g=f:1>g&&(g=1),c.save(),u&&this._eventManager.ghostCtx.save(),c.beginPath(),c.rect(d.x1,d.y1,d.width,d.height),c.clip(),u&&(this._eventManager.ghostCtx.rect(d.x1,d.y1,d.width,d.height),this._eventManager.ghostCtx.clip()),m=0;m<a.dataSeriesIndexes.length;m++){var r=a.dataSeriesIndexes[m],l=this.data[r],n=l.dataPoints;if(l.maxWidthInX=g/(1<a.axisX.conversionParameters.pixelPerUnit?a.axisX.conversionParameters.pixelPerUnit-1:a.axisX.conversionParameters.pixelPerUnit),0<n.length){var q=g>5&&l.bevelEnabled?!0:!1;for(c.strokeStyle="#4572A7 ",f=0;f<n.length;f++)if(b=n[f].x.getTime?n[f].x.getTime():n[f].x,!(b<a.axisX.dataInfo.viewPortMin||b>a.axisX.dataInfo.viewPortMax)&&"number"==typeof n[f].y){d=a.axisX.conversionParameters.reference+a.axisX.conversionParameters.pixelPerUnit*(b-a.axisX.conversionParameters.minimum)+.5<<0,k=a.axisY.conversionParameters.reference+a.axisY.conversionParameters.pixelPerUnit*(n[f].y-a.axisY.conversionParameters.minimum)+.5<<0;var v,s=d-a.plotType.plotUnits.length*g/2+a.index*g<<0,t=s+g<<0;if(0<=n[f].y){var B=e[b]?e[b]:0;v=p+B,k+=B,e[b]=B+(k-v)}else B=h[b]?h[b]:0,v=k-B,k=p-B,h[b]=B+(k-v);b=n[f].color?n[f].color:l._colorSet[f%l._colorSet.length],J(c,v,s,k,t,b,q,!1,!1,!1),b=l.dataPointIds[f],this._eventManager.objectMap[b]={id:b,objectType:"dataPoint",dataSeriesIndex:r,dataPointIndex:f,x1:v,y1:s,x2:k,y2:t},b=A(b),u&&J(this._eventManager.ghostCtx,v,s,k,t,b,!1,!1,!1,!1),this._indexLabels.push({chartType:"stackedBar",dataPoint:n[f],dataSeries:l,point:{x:0<=n[f].y?k:v,y:d},bounds:{x1:Math.min(v,k),y1:s,x2:Math.max(v,k),y2:t},color:b})}}}c.restore(),u&&this._eventManager.ghostCtx.restore()}},w.prototype.renderStackedBar100=function(a){var c=this.plotArea.ctx;if(!(0>=a.dataSeriesIndexes.length)){var k,b=null,d=this.plotArea,e=[],h=[],f=0,p=a.axisY.conversionParameters.reference+a.axisY.conversionParameters.pixelPerUnit*(0-a.axisY.conversionParameters.minimum)<<0,f=.15*this.width,m=a.axisX.dataInfo.minDiff,g=.9*(d.height/Math.abs(a.axisX.maximum-a.axisX.minimum)*Math.abs(m)/a.plotType.plotUnits.length)<<0;for(g>f?g=f:1/0===m?g=f:1>g&&(g=1),c.save(),u&&this._eventManager.ghostCtx.save(),c.beginPath(),c.rect(d.x1,d.y1,d.width,d.height),c.clip(),u&&(this._eventManager.ghostCtx.rect(d.x1,d.y1,d.width,d.height),this._eventManager.ghostCtx.clip()),m=0;m<a.dataSeriesIndexes.length;m++){var r=a.dataSeriesIndexes[m],l=this.data[r],n=l.dataPoints;if(l.maxWidthInX=g/(1<a.axisX.conversionParameters.pixelPerUnit?a.axisX.conversionParameters.pixelPerUnit-1:a.axisX.conversionParameters.pixelPerUnit),0<n.length){var q=g>5&&l.bevelEnabled?!0:!1;for(c.strokeStyle="#4572A7 ",f=0;f<n.length;f++)if(b=n[f].x.getTime?n[f].x.getTime():n[f].x,!(b<a.axisX.dataInfo.viewPortMin||b>a.axisX.dataInfo.viewPortMax)&&"number"==typeof n[f].y){d=a.axisX.conversionParameters.reference+a.axisX.conversionParameters.pixelPerUnit*(b-a.axisX.conversionParameters.minimum)+.5<<0,k=a.axisY.conversionParameters.reference+a.axisY.conversionParameters.pixelPerUnit*((0!==a.dataPointYSums[b]?100*(n[f].y/a.dataPointYSums[b]):0)-a.axisY.conversionParameters.minimum)+.5<<0;var v,s=d-a.plotType.plotUnits.length*g/2+a.index*g<<0,t=s+g<<0;if(0<=n[f].y){var B=e[b]?e[b]:0;v=p+B,k+=B,e[b]=B+(k-v)}else B=h[b]?h[b]:0,v=k-B,k=p-B,h[b]=B+(k-v);b=n[f].color?n[f].color:l._colorSet[f%l._colorSet.length],J(c,v,s,k,t,b,q,!1,!1,!1),b=l.dataPointIds[f],this._eventManager.objectMap[b]={id:b,objectType:"dataPoint",dataSeriesIndex:r,dataPointIndex:f,x1:v,y1:s,x2:k,y2:t},b=A(b),u&&J(this._eventManager.ghostCtx,v,s,k,t,b,!1,!1,!1,!1),this._indexLabels.push({chartType:"stackedBar100",dataPoint:n[f],dataSeries:l,point:{x:0<=n[f].y?k:v,y:d},bounds:{x1:Math.min(v,k),y1:s,x2:Math.max(v,k),y2:t},color:b})}}}c.restore(),u&&this._eventManager.ghostCtx.restore()}},w.prototype.renderArea=function(a){function c(){B&&(0>=a.axisY.minimum&&0<=a.axisY.maximum?v=t:0>a.axisY.maximum?v=h.y1:0<a.axisY.minimum&&(v=e.y2),b.lineTo(n,v),b.lineTo(B.x,v),b.closePath(),b.fill(),u&&(d.lineTo(n,v),d.lineTo(B.x,v),d.closePath(),d.fill()),b.beginPath(),b.moveTo(n,q),d.beginPath(),d.moveTo(n,q),B={x:n,y:q})}var b=this.plotArea.ctx;if(!(0>=a.dataSeriesIndexes.length)){var d=this._eventManager.ghostCtx,e=a.axisX.lineCoordinates,h=a.axisY.lineCoordinates,f=[],k=this.plotArea;for(b.save(),u&&d.save(),b.beginPath(),b.rect(k.x1,k.y1,k.width,k.height),b.clip(),u&&(d.beginPath(),d.rect(k.x1,k.y1,k.width,k.height),d.clip()),k=0;k<a.dataSeriesIndexes.length;k++){var p=a.dataSeriesIndexes[k],m=this.data[p],g=m.dataPoints,f=m.id;this._eventManager.objectMap[f]={objectType:"dataSeries",dataSeriesIndex:p},f=A(f),d.fillStyle=f;var n,q,s,v,f=[],r=!0,l=0,t=a.axisY.conversionParameters.reference+a.axisY.conversionParameters.pixelPerUnit*(0-a.axisY.conversionParameters.minimum)+.5<<0,B=null;if(0<g.length){var w=m._colorSet[l%m._colorSet.length];b.fillStyle=w;for(var C=!0;l<g.length;l++)if(s=g[l].x.getTime?g[l].x.getTime():g[l].x,!(s<a.axisX.dataInfo.viewPortMin||s>a.axisX.dataInfo.viewPortMax))if("number"!=typeof g[l].y)c(),C=!0;else{n=a.axisX.conversionParameters.reference+a.axisX.conversionParameters.pixelPerUnit*(s-a.axisX.conversionParameters.minimum)+.5<<0,q=a.axisY.conversionParameters.reference+a.axisY.conversionParameters.pixelPerUnit*(g[l].y-a.axisY.conversionParameters.minimum)+.5<<0,r||C?(b.beginPath(),b.moveTo(n,q),B={x:n,y:q},u&&(d.beginPath(),d.moveTo(n,q)),C=r=!1):(b.lineTo(n,q),u&&d.lineTo(n,q),0==l%250&&c());var y=m.dataPointIds[l];this._eventManager.objectMap[y]={id:y,objectType:"dataPoint",dataSeriesIndex:p,dataPointIndex:l,x1:n,y1:q},0!==g[l].markerSize&&(0<g[l].markerSize||0<m.markerSize)&&(s=m.getMarkerProperties(l,n,q,b),f.push(s),(!m.maxWidthInX||s.size>m.maxWidthInX)&&(m.maxWidthInX=s.size/(1<a.axisX.conversionParameters.pixelPerUnit?a.axisX.conversionParameters.pixelPerUnit-1:a.axisX.conversionParameters.pixelPerUnit)),y=A(y),u&&f.push({x:n,y:q,ctx:d,type:s.type,size:s.size,color:y,borderColor:y,borderThickness:s.borderThickness})),(g[l].indexLabel||m.indexLabel)&&this._indexLabels.push({chartType:"area",dataPoint:g[l],dataSeries:m,point:{x:n,y:q},color:w})}c(),H.drawMarkers(f)}}b.restore(),u&&this._eventManager.ghostCtx.restore()}},w.prototype.renderSplineArea=function(a){function c(){var c=oa(v,2);if(0<c.length){b.beginPath(),b.moveTo(c[0].x,c[0].y),u&&(d.beginPath(),d.moveTo(c[0].x,c[0].y));for(var f=0;f<c.length-3;f+=3)b.bezierCurveTo(c[f+1].x,c[f+1].y,c[f+2].x,c[f+2].y,c[f+3].x,c[f+3].y),u&&d.bezierCurveTo(c[f+1].x,c[f+1].y,c[f+2].x,c[f+2].y,c[f+3].x,c[f+3].y);0>=a.axisY.minimum&&0<=a.axisY.maximum?s=q:0>a.axisY.maximum?s=h.y1:0<a.axisY.minimum&&(s=e.y2),t={x:c[0].x,y:c[0].y},b.lineTo(c[c.length-1].x,s),b.lineTo(t.x,s),b.closePath(),b.fill(),u&&(d.lineTo(c[c.length-1].x,s),d.lineTo(t.x,s),d.closePath(),d.fill())}}var b=this.plotArea.ctx;if(!(0>=a.dataSeriesIndexes.length)){var d=this._eventManager.ghostCtx,e=a.axisX.lineCoordinates,h=a.axisY.lineCoordinates,f=[],k=this.plotArea;for(b.save(),u&&d.save(),b.beginPath(),b.rect(k.x1,k.y1,k.width,k.height),b.clip(),u&&(d.beginPath(),d.rect(k.x1,k.y1,k.width,k.height),d.clip()),k=0;k<a.dataSeriesIndexes.length;k++){var p=a.dataSeriesIndexes[k],m=this.data[p],g=m.dataPoints,f=m.id;this._eventManager.objectMap[f]={objectType:"dataSeries",dataSeriesIndex:p},f=A(f),d.fillStyle=f;var l,n,s,f=[],r=0,q=a.axisY.conversionParameters.reference+a.axisY.conversionParameters.pixelPerUnit*(0-a.axisY.conversionParameters.minimum)+.5<<0,t=null,v=[];if(0<g.length){for(color=m._colorSet[r%m._colorSet.length],b.fillStyle=color;r<g.length;r++)if(l=g[r].x.getTime?g[r].x.getTime():g[r].x,!(l<a.axisX.dataInfo.viewPortMin||l>a.axisX.dataInfo.viewPortMax))if("number"!=typeof g[r].y)r>0&&(c(),v=[]);else{l=a.axisX.conversionParameters.reference+a.axisX.conversionParameters.pixelPerUnit*(l-a.axisX.conversionParameters.minimum)+.5<<0,n=a.axisY.conversionParameters.reference+a.axisY.conversionParameters.pixelPerUnit*(g[r].y-a.axisY.conversionParameters.minimum)+.5<<0;var B=m.dataPointIds[r];if(this._eventManager.objectMap[B]={id:B,objectType:"dataPoint",dataSeriesIndex:p,dataPointIndex:r,x1:l,y1:n},v[v.length]={x:l,y:n},0!==g[r].markerSize&&(0<g[r].markerSize||0<m.markerSize)){var w=m.getMarkerProperties(r,l,n,b);f.push(w),(!m.maxWidthInX||w.size>m.maxWidthInX)&&(m.maxWidthInX=w.size/(1<a.axisX.conversionParameters.pixelPerUnit?a.axisX.conversionParameters.pixelPerUnit-1:a.axisX.conversionParameters.pixelPerUnit)),B=A(B),u&&f.push({x:l,y:n,ctx:d,type:w.type,size:w.size,color:B,borderColor:B,borderThickness:w.borderThickness})}(g[r].indexLabel||m.indexLabel)&&this._indexLabels.push({chartType:"splineArea",dataPoint:g[r],dataSeries:m,point:{x:l,y:n},color:color})}c(),H.drawMarkers(f)}}b.restore(),u&&this._eventManager.ghostCtx.restore()}},w.prototype.renderStepArea=function(a){function c(){w&&(0>=a.axisY.minimum&&0<=a.axisY.maximum?v=t:0>a.axisY.maximum?v=h.y1:0<a.axisY.minimum&&(v=e.y2),b.lineTo(n,v),b.lineTo(w.x,v),b.closePath(),b.fill(),u&&(d.lineTo(n,v),d.lineTo(w.x,v),d.closePath(),d.fill()),b.beginPath(),b.moveTo(n,q),d.beginPath(),d.moveTo(n,q),w={x:n,y:q})}var b=this.plotArea.ctx;if(!(0>=a.dataSeriesIndexes.length)){var d=this._eventManager.ghostCtx,e=a.axisX.lineCoordinates,h=a.axisY.lineCoordinates,f=[],k=this.plotArea;for(b.save(),u&&d.save(),b.beginPath(),b.rect(k.x1,k.y1,k.width,k.height),b.clip(),u&&(d.beginPath(),d.rect(k.x1,k.y1,k.width,k.height),d.clip()),k=0;k<a.dataSeriesIndexes.length;k++){var p=a.dataSeriesIndexes[k],m=this.data[p],g=m.dataPoints,f=m.id;this._eventManager.objectMap[f]={objectType:"dataSeries",dataSeriesIndex:p},f=A(f),d.fillStyle=f;var n,q,s,v,f=[],r=!0,l=0,t=a.axisY.conversionParameters.reference+a.axisY.conversionParameters.pixelPerUnit*(0-a.axisY.conversionParameters.minimum)+.5<<0,w=null,x=!1;if(0<g.length){var C=m._colorSet[l%m._colorSet.length];for(b.fillStyle=C;l<g.length;l++)if(s=g[l].x.getTime?g[l].x.getTime():g[l].x,!(s<a.axisX.dataInfo.viewPortMin||s>a.axisX.dataInfo.viewPortMax)){var y=q;"number"!=typeof g[l].y?(c(),x=!0):(n=a.axisX.conversionParameters.reference+a.axisX.conversionParameters.pixelPerUnit*(s-a.axisX.conversionParameters.minimum)+.5<<0,q=a.axisY.conversionParameters.reference+a.axisY.conversionParameters.pixelPerUnit*(g[l].y-a.axisY.conversionParameters.minimum)+.5<<0,r||x?(b.beginPath(),b.moveTo(n,q),w={x:n,y:q},u&&(d.beginPath(),d.moveTo(n,q)),x=r=!1):(b.lineTo(n,y),u&&d.lineTo(n,y),b.lineTo(n,q),u&&d.lineTo(n,q),0==l%250&&(0>=a.axisY.minimum&&0<=a.axisY.maximum?v=t:0>a.axisY.maximum?v=h.y1:0<a.axisY.minimum&&(v=e.y2),b.lineTo(n,v),b.lineTo(w.x,v),b.closePath(),b.fill(),b.beginPath(),b.moveTo(n,q),u&&(d.lineTo(n,v),d.lineTo(w.x,v),d.closePath(),d.fill(),d.beginPath(),d.moveTo(n,q)),w={x:n,y:q})),y=m.dataPointIds[l],this._eventManager.objectMap[y]={id:y,objectType:"dataPoint",dataSeriesIndex:p,dataPointIndex:l,x1:n,y1:q},0!==g[l].markerSize&&(0<g[l].markerSize||0<m.markerSize)&&(s=m.getMarkerProperties(l,n,q,b),f.push(s),(!m.maxWidthInX||s.size>m.maxWidthInX)&&(m.maxWidthInX=s.size/(1<a.axisX.conversionParameters.pixelPerUnit?a.axisX.conversionParameters.pixelPerUnit-1:a.axisX.conversionParameters.pixelPerUnit)),y=A(y),u&&f.push({x:n,y:q,ctx:d,type:s.type,size:s.size,color:y,borderColor:y,borderThickness:s.borderThickness})),(g[l].indexLabel||m.indexLabel)&&this._indexLabels.push({chartType:"stepArea",dataPoint:g[l],dataSeries:m,point:{x:n,y:q},color:C}))}c(),H.drawMarkers(f)}}b.restore(),u&&this._eventManager.ghostCtx.restore()}},w.prototype.renderStackedArea=function(a){var c=this.plotArea.ctx;if(!(0>=a.dataSeriesIndexes.length)){var p,m,g,b=null,d=[],e=this.plotArea,h=[],f=[],k=0,r=a.axisY.conversionParameters.reference+a.axisY.conversionParameters.pixelPerUnit*(0-a.axisY.conversionParameters.minimum)<<0,l=this._eventManager.ghostCtx;for(u&&l.beginPath(),c.save(),u&&l.save(),c.beginPath(),c.rect(e.x1,e.y1,e.width,e.height),c.clip(),u&&(l.beginPath(),l.rect(e.x1,e.y1,e.width,e.height),l.clip()),xValuePresent=[],e=0;e<a.dataSeriesIndexes.length;e++){var n=a.dataSeriesIndexes[e],q=this.data[n],s=q.dataPoints;for(q.dataPointIndexes=[],k=0;k<s.length;k++)n=s[k].x.getTime?s[k].x.getTime():s[k].x,q.dataPointIndexes[n]=k,xValuePresent[n]||(f.push(n),xValuePresent[n]=!0);f.sort(ja)}for(e=0;e<a.dataSeriesIndexes.length;e++){var n=a.dataSeriesIndexes[e],q=this.data[n],s=q.dataPoints,t=!0,v=[],k=q.id;if(this._eventManager.objectMap[k]={objectType:"dataSeries",dataSeriesIndex:n},k=A(k),l.fillStyle=k,0<f.length){for(b=q._colorSet[0],c.fillStyle=b,k=0;k<f.length;k++){g=f[k];var w=null,w=0<=q.dataPointIndexes[g]?s[q.dataPointIndexes[g]]:{x:g,y:0};if(!(g<a.axisX.dataInfo.viewPortMin||g>a.axisX.dataInfo.viewPortMax)&&"number"==typeof w.y){p=a.axisX.conversionParameters.reference+a.axisX.conversionParameters.pixelPerUnit*(g-a.axisX.conversionParameters.minimum)+.5<<0,m=a.axisY.conversionParameters.reference+a.axisY.conversionParameters.pixelPerUnit*(w.y-a.axisY.conversionParameters.minimum)+.5<<0;var x=h[g]?h[g]:0;if(m-=x,v.push({x:p,y:r-x}),h[g]=r-m,t)c.beginPath(),c.moveTo(p,m),u&&(l.beginPath(),l.moveTo(p,m)),t=!1;else if(c.lineTo(p,m),u&&l.lineTo(p,m),0==k%250){for(;0<v.length;){var C=v.pop();c.lineTo(C.x,C.y),u&&l.lineTo(C.x,C.y)}c.closePath(),c.fill(),c.beginPath(),c.moveTo(p,m),u&&(l.closePath(),l.fill(),l.beginPath(),l.moveTo(p,m)),v.push({x:p,y:r-x})}if(0<=q.dataPointIndexes[g]){var y=q.dataPointIds[q.dataPointIndexes[g]];this._eventManager.objectMap[y]={id:y,objectType:"dataPoint",dataSeriesIndex:n,dataPointIndex:q.dataPointIndexes[g],x1:p,y1:m}}0<=q.dataPointIndexes[g]&&0!==w.markerSize&&(0<w.markerSize||0<q.markerSize)&&(g=q.getMarkerProperties(k,p,m,c),d.push(g),(!q.maxWidthInX||g.size>q.maxWidthInX)&&(q.maxWidthInX=g.size/(1<a.axisX.conversionParameters.pixelPerUnit?a.axisX.conversionParameters.pixelPerUnit-1:a.axisX.conversionParameters.pixelPerUnit)),markerColor=A(y),u&&d.push({x:p,y:m,ctx:l,type:g.type,size:g.size,color:markerColor,borderColor:markerColor,borderThickness:g.borderThickness})),(w.indexLabel||q.indexLabel)&&this._indexLabels.push({chartType:"stackedArea",dataPoint:w,dataSeries:q,point:{x:p,y:m},color:b})}}for(;0<v.length;)C=v.pop(),c.lineTo(C.x,C.y),u&&l.lineTo(C.x,C.y);c.closePath(),c.fill(),c.beginPath(),c.moveTo(p,m),u&&(l.closePath(),l.fill(),l.beginPath(),l.moveTo(p,m))}delete q.dataPointIndexes}H.drawMarkers(d),c.restore(),u&&l.restore()}},w.prototype.renderStackedArea100=function(a){var c=this.plotArea.ctx;if(!(0>=a.dataSeriesIndexes.length)){var p,m,g,b=null,d=this.plotArea,e=[],h=[],f=[],k=0,r=a.axisY.conversionParameters.reference+a.axisY.conversionParameters.pixelPerUnit*(0-a.axisY.conversionParameters.minimum)<<0,l=.15*this.width,n=a.axisX.dataInfo.minDiff,n=.9*d.width/Math.abs(a.axisX.maximum-a.axisX.minimum)*Math.abs(n)<<0,q=this._eventManager.ghostCtx;for(c.save(),u&&q.save(),c.beginPath(),c.rect(d.x1,d.y1,d.width,d.height),c.clip(),u&&(q.beginPath(),q.rect(d.x1,d.y1,d.width,d.height),q.clip()),xValuePresent=[],d=0;d<a.dataSeriesIndexes.length;d++){var s=a.dataSeriesIndexes[d],t=this.data[s],v=t.dataPoints;for(t.dataPointIndexes=[],k=0;k<v.length;k++)s=v[k].x.getTime?v[k].x.getTime():v[k].x,t.dataPointIndexes[s]=k,xValuePresent[s]||(f.push(s),xValuePresent[s]=!0);f.sort(ja)}for(d=0;d<a.dataSeriesIndexes.length;d++){var s=a.dataSeriesIndexes[d],t=this.data[s],v=t.dataPoints,w=!0,b=t.id;this._eventManager.objectMap[b]={objectType:"dataSeries",dataSeriesIndex:s},b=A(b),q.fillStyle=b,1==v.length&&(n=l),1>n?n=1:n>l&&(n=l);var x=[];if(0<f.length){for(b=t._colorSet[k%t._colorSet.length],c.fillStyle=b,k=0;k<f.length;k++){g=f[k];var C=null,C=0<=t.dataPointIndexes[g]?v[t.dataPointIndexes[g]]:{x:g,y:0};if(!(g<a.axisX.dataInfo.viewPortMin||g>a.axisX.dataInfo.viewPortMax)&&"number"==typeof C.y){m=0!==a.dataPointYSums[g]?100*(C.y/a.dataPointYSums[g]):0,p=a.axisX.conversionParameters.reference+a.axisX.conversionParameters.pixelPerUnit*(g-a.axisX.conversionParameters.minimum)+.5<<0,m=a.axisY.conversionParameters.reference+a.axisY.conversionParameters.pixelPerUnit*(m-a.axisY.conversionParameters.minimum)+.5<<0;var y=h[g]?h[g]:0;
if(m-=y,x.push({x:p,y:r-y}),h[g]=r-m,w)c.beginPath(),c.moveTo(p,m),u&&(q.beginPath(),q.moveTo(p,m)),w=!1;else if(c.lineTo(p,m),u&&q.lineTo(p,m),0==k%250){for(;0<x.length;){var E=x.pop();c.lineTo(E.x,E.y),u&&q.lineTo(E.x,E.y)}c.closePath(),c.fill(),c.beginPath(),c.moveTo(p,m),u&&(q.closePath(),q.fill(),q.beginPath(),q.moveTo(p,m)),x.push({x:p,y:r-y})}if(0<=t.dataPointIndexes[g]){var z=t.dataPointIds[t.dataPointIndexes[g]];this._eventManager.objectMap[z]={id:z,objectType:"dataPoint",dataSeriesIndex:s,dataPointIndex:t.dataPointIndexes[g],x1:p,y1:m}}0<=t.dataPointIndexes[g]&&0!==C.markerSize&&(0<C.markerSize||0<t.markerSize)&&(g=t.getMarkerProperties(k,p,m,c),e.push(g),(!t.maxWidthInX||g.size>t.maxWidthInX)&&(t.maxWidthInX=g.size/(1<a.axisX.conversionParameters.pixelPerUnit?a.axisX.conversionParameters.pixelPerUnit-1:a.axisX.conversionParameters.pixelPerUnit)),markerColor=A(z),u&&e.push({x:p,y:m,ctx:q,type:g.type,size:g.size,color:markerColor,borderColor:markerColor,borderThickness:g.borderThickness})),(C.indexLabel||t.indexLabel)&&this._indexLabels.push({chartType:"stackedArea100",dataPoint:C,dataSeries:t,point:{x:p,y:m},color:b})}}for(;0<x.length;)E=x.pop(),c.lineTo(E.x,E.y),u&&q.lineTo(E.x,E.y);c.closePath(),c.fill(),c.beginPath(),c.moveTo(p,m),u&&(q.closePath(),q.fill(),q.beginPath(),q.moveTo(p,m))}delete t.dataPointIndexes}H.drawMarkers(e),c.restore(),u&&q.restore()}},w.prototype.renderBubble=function(a){var c=this.plotArea.ctx,b=a.dataSeriesIndexes.length;if(!(0>=b)){var h,f,d=this.plotArea,e=0,k=.15*this.width,e=a.axisX.dataInfo.minDiff,b=.9*(d.width/Math.abs(a.axisX.maximum-a.axisX.minimum)*Math.abs(e)/b)<<0;c.save(),u&&this._eventManager.ghostCtx.save(),c.beginPath(),c.rect(d.x1,d.y1,d.width,d.height),c.clip(),u&&(this._eventManager.ghostCtx.rect(d.x1,d.y1,d.width,d.height),this._eventManager.ghostCtx.clip());for(var p=-(1/0),m=1/0,g=0;g<a.dataSeriesIndexes.length;g++)for(var r=a.dataSeriesIndexes[g],l=this.data[r],n=l.dataPoints,q=0,e=0;e<n.length;e++)h=h=n[e].getTime?n[e].x.getTime():n[e].x,h<a.axisX.dataInfo.viewPortMin||h>a.axisX.dataInfo.viewPortMax||"undefined"==typeof n[e].z||(q=n[e].z,q>p&&(p=q),m>q&&(m=q));for(var s=25*Math.PI,d=Math.max(Math.pow(.25*Math.min(d.height,d.width)/2,2)*Math.PI,s),g=0;g<a.dataSeriesIndexes.length;g++)if(r=a.dataSeriesIndexes[g],l=this.data[r],n=l.dataPoints,1==n.length&&(b=k),1>b?b=1:b>k&&(b=k),0<n.length)for(c.strokeStyle="#4572A7 ",e=0;e<n.length;e++)if(h=h=n[e].getTime?n[e].x.getTime():n[e].x,!(h<a.axisX.dataInfo.viewPortMin||h>a.axisX.dataInfo.viewPortMax)&&"number"==typeof n[e].y){h=a.axisX.conversionParameters.reference+a.axisX.conversionParameters.pixelPerUnit*(h-a.axisX.conversionParameters.minimum)+.5<<0,f=a.axisY.conversionParameters.reference+a.axisY.conversionParameters.pixelPerUnit*(n[e].y-a.axisY.conversionParameters.minimum)+.5<<0;var q=n[e].z,t=2*Math.max(Math.sqrt((s+(d-s)/(p-m)*(q-m))/Math.PI)<<0,1),q=l.getMarkerProperties(e,c);q.size=t,H.drawMarker(h,f,c,q.type,q.size,q.color,q.borderColor,q.borderThickness),(!l.maxWidthInX||q.size>l.maxWidthInX)&&(l.maxWidthInX=q.size/(1<a.axisX.conversionParameters.pixelPerUnit?a.axisX.conversionParameters.pixelPerUnit-1:a.axisX.conversionParameters.pixelPerUnit));var v=l.dataPointIds[e];this._eventManager.objectMap[v]={id:v,objectType:"dataPoint",dataSeriesIndex:r,dataPointIndex:e,x1:h,y1:f,size:t},t=A(v),u&&H.drawMarker(h,f,this._eventManager.ghostCtx,q.type,q.size,t,t,q.borderThickness)}c.restore(),u&&this._eventManager.ghostCtx.restore()}},w.prototype.renderScatter=function(a){var c=this.plotArea.ctx,b=a.dataSeriesIndexes.length;if(!(0>=b)){var h,f,d=this.plotArea,e=0,k=.15*this.width,e=a.axisX.dataInfo.minDiff,b=.9*(d.width/Math.abs(a.axisX.maximum-a.axisX.minimum)*Math.abs(e)/b)<<0;c.save(),u&&this._eventManager.ghostCtx.save(),c.beginPath(),c.rect(d.x1,d.y1,d.width,d.height),c.clip(),u&&(this._eventManager.ghostCtx.rect(d.x1,d.y1,d.width,d.height),this._eventManager.ghostCtx.clip());for(var p=0;p<a.dataSeriesIndexes.length;p++){var m=a.dataSeriesIndexes[p],g=this.data[m],r=g.dataPoints;if(1==r.length&&(b=k),1>b?b=1:b>k&&(b=k),0<r.length){c.strokeStyle="#4572A7 ",Math.pow(.3*Math.min(d.height,d.width)/2,2);for(var l=0,n=0,e=0;e<r.length;e++)if(h=h=r[e].getTime?r[e].x.getTime():r[e].x,!(h<a.axisX.dataInfo.viewPortMin||h>a.axisX.dataInfo.viewPortMax)&&"number"==typeof r[e].y){h=a.axisX.conversionParameters.reference+a.axisX.conversionParameters.pixelPerUnit*(h-a.axisX.conversionParameters.minimum)+.5<<0,f=a.axisY.conversionParameters.reference+a.axisY.conversionParameters.pixelPerUnit*(r[e].y-a.axisY.conversionParameters.minimum)+.5<<0;var q=g.getMarkerProperties(e,h,f,c);H.drawMarker(q.x,q.y,q.ctx,q.type,q.size,q.color,q.color,q.thickness),(!g.maxWidthInX||q.size>g.maxWidthInX)&&(g.maxWidthInX=q.size/(1<a.axisX.conversionParameters.pixelPerUnit?a.axisX.conversionParameters.pixelPerUnit-1:a.axisX.conversionParameters.pixelPerUnit)),Math.sqrt((l-h)*(l-h)+(n-f)*(n-f))<Math.min(q.size,5)||(l=g.dataPointIds[e],this._eventManager.objectMap[l]={id:l,objectType:"dataPoint",dataSeriesIndex:m,dataPointIndex:e,x1:h,y1:f},l=A(l),u&&H.drawMarker(q.x,q.y,this._eventManager.ghostCtx,q.type,q.size,l,l,q.borderThickness),l=h,n=f)}}}c.restore(),u&&this._eventManager.ghostCtx.restore()}};var ha=function(a,c,b,d,e,h,f){a.save(),"pie"===e?(a.beginPath(),a.moveTo(c.x,c.y),a.arc(c.x,c.y,b,h,f,!1),a.fillStyle=d,a.strokeStyle="white",a.lineWidth=2,a.closePath(),a.stroke(),a.fill()):"doughnut"===e&&(a.beginPath(),a.arc(c.x,c.y,b,h,f,!1),a.arc(c.x,c.y,.6*b,f,h,!0),a.closePath(),a.fillStyle=d,a.strokeStyle="white",a.lineWidth=2,a.stroke(),a.fill()),a.restore()};w.prototype.renderPie=function(a){function c(a){s.frame=0,s.maxFrames=a||1}function b(){if(g&&r){for(var a=0,b=0;b<r.length;b++)a+=Math.abs(r[b].y);for(var c=0,d=0,e=0,f=0,b=0;b<r.length;b++){var h=r[b],k=g.dataPointIds[b],l={id:k,objectType:"dataPoint",dataPointIndex:b,dataSeriesIndex:0};t.push(l);var p=h.indexLabel?h.indexLabel:g.indexLabel?g.indexLabel:h.label?h.label:g.label?g.label:"";m._eventManager.objectMap[k]=l,l.center={x:y.x,y:y.y},l.y=h.y,l.radius=E,l.indexLabelText=m.replaceKeywordsWithValue(p,h,g,b),l.indexLabelPlacement=g.indexLabelPlacement,l.indexLabelLineColor=h.indexLabelLineColor?h.indexLabelLineColor:g.indexLabelLineColor?g.indexLabelLineColor:h.color?h.color:g._colorSet[b%g._colorSet.length],l.indexLabelLineThickness=h.indexLabelLineThickness?h.indexLabelLineThickness:g.indexLabelLineThickness,l.indexLabelFontColor=h.indexLabelFontColor?h.indexLabelFontColor:g.indexLabelFontColor,l.indexLabelFontStyle=h.indexLabelFontStyle?h.indexLabelFontStyle:g.indexLabelFontStyle,l.indexLabelFontWeight=h.indexLabelFontWeight?h.indexLabelFontWeight:g.indexLabelFontWeight,l.indexLabelFontSize=h.indexLabelFontSize?h.indexLabelFontSize:g.indexLabelFontSize,l.indexLabelFontFamily=h.indexLabelFontFamily?h.indexLabelFontFamily:g.indexLabelFontFamily,l.indexLabelBackgroundColor=h.indexLabelBackgroundColor?h.indexLabelBackgroundColor:g.indexLabelBackgroundColor?g.indexLabelBackgroundColor:null,l.indexLabelMaxWidth=h.indexLabelMaxWidth?h.indexLabelMaxWidth:g.indexLabelMaxWidth?g.indexLabelMaxWidth:.33*n.width,l.indexLabelWrap=h.indexLabelWrap?h.indexLabelWrap:g.indexLabelWrap,l.startAngle=0===b?g.startAngle?g.startAngle/180*Math.PI:0:t[b-1].endAngle,l.startAngle=(l.startAngle+2*Math.PI)%(2*Math.PI),l.endAngle=l.startAngle+2*Math.PI/a*Math.abs(h.y),h=(l.endAngle+l.startAngle)/2,h=(h+2*Math.PI)%(2*Math.PI),l.midAngle=h,l.midAngle>Math.PI/2-x&&l.midAngle<Math.PI/2+x?((0===c||t[e].midAngle>l.midAngle)&&(e=b),c++):l.midAngle>3*Math.PI/2-x&&l.midAngle<3*Math.PI/2+x&&((0===d||t[f].midAngle>l.midAngle)&&(f=b),d++),l.hemisphere=h>Math.PI/2&&h<=3*Math.PI/2?"left":"right",l.indexLabelTextBlock=new F(m.plotArea.ctx,{fontSize:l.indexLabelFontSize,fontFamily:l.indexLabelFontFamily,fontColor:l.indexLabelFontColor,fontStyle:l.indexLabelFontStyle,fontWeight:l.indexLabelFontWeight,horizontalAlign:"left",backgroundColor:l.indexLabelBackgroundColor,maxWidth:l.indexLabelMaxWidth,maxHeight:l.indexLabelWrap?5*l.indexLabelFontSize:1.5*l.indexLabelFontSize,text:l.indexLabelText,padding:0,textBaseline:"top"}),l.indexLabelTextBlock.measureText()}for(h=a=0,k=!1,b=0;b<r.length;b++)l=t[(e+b)%r.length],c>1&&l.midAngle>Math.PI/2-x&&l.midAngle<Math.PI/2+x&&(c/2>=a&&!k?(l.hemisphere="right",a++):(l.hemisphere="left",k=!0));for(k=!1,b=0;b<r.length;b++)l=t[(f+b)%r.length],d>1&&l.midAngle>3*Math.PI/2-x&&l.midAngle<3*Math.PI/2+x&&(d/2>=h&&!k?(l.hemisphere="left",h++):(l.hemisphere="right",k=!0))}}function d(){var a=m.plotArea.ctx;if(null!==s&&s.frame<s.maxFrames){0===s.frame&&(s.prevMaxAngle=t[0].startAngle),a.clearRect(n.x1,n.y1,n.width,n.height);for(var a=s.prevMaxAngle+2*Math.PI/s.maxFrames,b=0;b<r.length;b++){var f=0===b?t[b].startAngle:h,h=f+(t[b].endAngle-t[b].startAngle),k=!1;h>a&&(h=a,k=!0);var l=r[b].color?r[b].color:g._colorSet[b%g._colorSet.length];if(h>f&&ha(m.plotArea.ctx,t[b].center,t[b].radius,l,g.type,f,h),k)break}s.frame++,s.prevMaxAngle=a,s.frame<s.maxFrames?m.requestAnimFrame.call(window,d):(c(u?15:4),e())}}function e(){var a=m.plotArea.ctx;if(null!==s&&s.frame<s.maxFrames){for(a.clearRect(n.x1,n.y1,n.width,n.height),a=0;a<r.length;a++){var b=t[a].startAngle,c=t[a].endAngle;if(c>b){var d=.07*E*Math.cos(t[a].midAngle),f=.07*E*Math.sin(t[a].midAngle),h=!1;r[a].exploded?(Math.abs(t[a].center.x-(y.x+d))>Math.abs(.5*d/s.maxFrames)||Math.abs(t[a].center.y-(y.y+f))>Math.abs(.5*f/s.maxFrames))&&(t[a].center.x+=d/s.maxFrames,t[a].center.y+=f/s.maxFrames,h=!0):(Math.abs(t[a].center.x-y.x)>Math.abs(.5*d/s.maxFrames)||Math.abs(t[a].center.y-y.y)>Math.abs(.5*f/s.maxFrames))&&(t[a].center.x-=d/s.maxFrames,t[a].center.y-=f/s.maxFrames,h=!0),h&&(d={},d.dataSeries=g,d.dataPoint=g.dataPoints[a],d.index=a,m._toolTip.highlightObjects([d])),ha(m.plotArea.ctx,t[a].center,t[a].radius,r[a].color?r[a].color:g._colorSet[a%g._colorSet.length],g.type,b,c)}}for(s.frame++,a=m.plotArea.ctx,a.fillStyle="black",a.strokeStyle="grey",a.textBaseline="middle",a.lineJoin="round",b=b=0;b<r.length;b++)c=t[b],c.indexLabelText&&(c.indexLabelTextBlock.y-=c.indexLabelTextBlock.height/2,d=0,d="left"===c.hemisphere?"outside"===g.indexLabelPlacement?-(c.indexLabelTextBlock.width+l):-c.indexLabelTextBlock.width/2:"outside"===g.indexLabelPlacement?l:-c.indexLabelTextBlock.width/2,c.indexLabelTextBlock.x+=d,c.indexLabelTextBlock.render(!0),c.indexLabelTextBlock.x-=d,c.indexLabelTextBlock.y+=c.indexLabelTextBlock.height/2,"outside"===c.indexLabelPlacement&&(d=c.center.x+E*Math.cos(c.midAngle),f=c.center.y+E*Math.sin(c.midAngle),a.strokeStyle=c.indexLabelLineColor,a.lineWidth=c.indexLabelLineThickness,a.beginPath(),a.moveTo(d,f),a.lineTo(c.indexLabelTextBlock.x,c.indexLabelTextBlock.y),a.lineTo(c.indexLabelTextBlock.x+("left"===c.hemisphere?-l:l),c.indexLabelTextBlock.y),a.stroke()),a.lineJoin="miter");s.frame<s.maxFrames&&m.requestAnimFrame.call(window,e)}}function h(a,b){var c=0,c=a.indexLabelTextBlock.y-a.indexLabelTextBlock.height/2,d=a.indexLabelTextBlock.y+a.indexLabelTextBlock.height/2,e=b.indexLabelTextBlock.y-b.indexLabelTextBlock.height/2,f=b.indexLabelTextBlock.y+b.indexLabelTextBlock.height/2;return c=b.indexLabelTextBlock.y>a.indexLabelTextBlock.y?e-d:c-f}function f(a){for(var b=null,c=1;c<r.length;c++){if(b=(a+c+t.length)%t.length,t[b].hemisphere!==t[a].hemisphere){b=null;break}if(t[b].indexLabelText&&b!==a&&(0>h(t[b],t[a])||("right"===t[a].hemisphere?t[b].indexLabelTextBlock.y>=t[a].indexLabelTextBlock.y:t[b].indexLabelTextBlock.y<=t[a].indexLabelTextBlock.y)))break;b=null}return b}function k(a,b){b=b||0;var c=0,d=y.y-1*z,e=y.y+1*z;if(a>=0&&a<r.length){var g=t[a];if(0>b&&g.indexLabelTextBlock.y<d||b>0&&g.indexLabelTextBlock.y>e)return 0;var l=b,m=0,n=0,n=m=m=0;for(0>l?g.indexLabelTextBlock.y-g.indexLabelTextBlock.height/2>d&&g.indexLabelTextBlock.y-g.indexLabelTextBlock.height/2+l<d&&(l=-(d-(g.indexLabelTextBlock.y-g.indexLabelTextBlock.height/2+l))):g.indexLabelTextBlock.y+g.indexLabelTextBlock.height/2<d&&g.indexLabelTextBlock.y+g.indexLabelTextBlock.height/2+l>e&&(l=g.indexLabelTextBlock.y+g.indexLabelTextBlock.height/2+l-e),l=g.indexLabelTextBlock.y+l,d=0,d="right"===g.hemisphere?y.x+Math.sqrt(Math.pow(z,2)-Math.pow(l-y.y,2)):y.x-Math.sqrt(Math.pow(z,2)-Math.pow(l-y.y,2)),n=y.x+E*Math.cos(g.midAngle),m=y.y+E*Math.sin(g.midAngle),m=Math.sqrt(Math.pow(d-n,2)+Math.pow(l-m,2)),n=Math.acos(E/z),m=Math.acos((z*z+E*E-m*m)/(2*E*z)),l=n>m?l-g.indexLabelTextBlock.y:0,d=null,e=1;e<r.length;e++){if(d=(a-e+t.length)%t.length,t[d].hemisphere!==t[a].hemisphere){d=null;break}if(t[d].indexLabelText&&t[d].hemisphere===t[a].hemisphere&&d!==a&&(0>h(t[d],t[a])||("right"===t[a].hemisphere?t[d].indexLabelTextBlock.y<=t[a].indexLabelTextBlock.y:t[d].indexLabelTextBlock.y>=t[a].indexLabelTextBlock.y)))break;d=null}n=d,m=f(a),e=d=0,0>l?(e="right"===g.hemisphere?n:m,c=l,null!==e&&(n=-l,l=g.indexLabelTextBlock.y-g.indexLabelTextBlock.height/2-(t[e].indexLabelTextBlock.y+t[e].indexLabelTextBlock.height/2),v>l-n&&(d=-n,q++,e=k(e,d),+e.toFixed(C)>+d.toFixed(C)&&(c=l>v?-(l-v):-(n-(e-d)))))):l>0&&(e="right"===g.hemisphere?m:n,c=l,null!==e&&(n=l,l=t[e].indexLabelTextBlock.y-t[e].indexLabelTextBlock.height/2-(g.indexLabelTextBlock.y+g.indexLabelTextBlock.height/2),v>l-n&&(d=n,q++,e=k(e,d),+e.toFixed(C)<+d.toFixed(C)&&(c=l>v?l-v:n-(d-e))))),c&&(l=g.indexLabelTextBlock.y+c,d=0,d="right"===g.hemisphere?y.x+Math.sqrt(Math.pow(z,2)-Math.pow(l-y.y,2)):y.x-Math.sqrt(Math.pow(z,2)-Math.pow(l-y.y,2)),g.midAngle>Math.PI/2-x&&g.midAngle<Math.PI/2+x?(e=(a-1+t.length)%t.length,e=t[e],n=t[(a+1+t.length)%t.length],"left"===g.hemisphere&&"right"===e.hemisphere&&d>e.indexLabelTextBlock.x?d=e.indexLabelTextBlock.x-15:"right"===g.hemisphere&&"left"===n.hemisphere&&d<n.indexLabelTextBlock.x&&(d=n.indexLabelTextBlock.x+15)):g.midAngle>3*Math.PI/2-x&&g.midAngle<3*Math.PI/2+x&&(e=(a-1+t.length)%t.length,e=t[e],n=t[(a+1+t.length)%t.length],"right"===g.hemisphere&&"left"===e.hemisphere&&d<e.indexLabelTextBlock.x?d=e.indexLabelTextBlock.x+15:"left"===g.hemisphere&&"right"===n.hemisphere&&d>n.indexLabelTextBlock.x&&(d=n.indexLabelTextBlock.x-15)),g.indexLabelTextBlock.y=l,g.indexLabelTextBlock.x=d,g.indexLabelAngle=Math.atan2(g.indexLabelTextBlock.y-y.y,g.indexLabelTextBlock.x-y.x))}return c}function p(){var a=m.plotArea.ctx;a.fillStyle="grey",a.strokeStyle="grey",a.font="16px Arial",a.textBaseline="middle";for(var b=0,e=a=0,a=0;10>a&&(1>a||e>0);a++){if(E-=e,e=0,"outside"===g.indexLabelPlacement){for(z=E*w,b=0;b<r.length;b++){var p=t[b];p.indexLabelTextBlock.x=y.x+z*Math.cos(p.midAngle),p.indexLabelTextBlock.y=y.y+z*Math.sin(p.midAngle),p.indexLabelAngle=p.midAngle,p.radius=E}for(var q,s,b=0;b<r.length;b++){var p=t[b],x=f(b);if(null!==x){q=t[b],s=t[x];var D=0,D=h(q,s)-v;if(0>D){for(var A=s=q=0;A<r.length;A++)A!==b&&t[A].hemisphere===p.hemisphere&&(t[A].indexLabelTextBlock.y<p.indexLabelTextBlock.y?q++:s++);A=D/(q+s||1)*s,q=-1*(D-A);var F=s=0;"right"===p.hemisphere?(s=k(b,A),q=-1*(D-s),F=k(x,q),+F.toFixed(C)<+q.toFixed(C)&&+s.toFixed(C)<=+A.toFixed(C)&&k(b,-(q-F))):(s=k(x,A),q=-1*(D-s),F=k(b,q),+F.toFixed(C)<+q.toFixed(C)&&+s.toFixed(C)<=+A.toFixed(C)&&k(x,-(q-F)))}}}}else for(b=0;b<r.length;b++)p=t[b],z="pie"===g.type?.7*E:.8*E,D=y.x+z*Math.cos(p.midAngle),A=y.y+z*Math.sin(p.midAngle),p.indexLabelTextBlock.x=D,p.indexLabelTextBlock.y=A;for(b=0;b<r.length;b++)p=t[b],p.indexLabelTextBlock.measureText(),D=D=0,"right"===p.hemisphere?(D=n.x2-(p.indexLabelTextBlock.x+p.indexLabelTextBlock.width+l),D*=-1):D=n.x1-(p.indexLabelTextBlock.x-p.indexLabelTextBlock.width-l),D>0&&(Math.abs(p.indexLabelTextBlock.y-p.indexLabelTextBlock.height/2-y.y)<E||Math.abs(p.indexLabelTextBlock.y+p.indexLabelTextBlock.height/2-y.y)<E)&&(D/=Math.abs(Math.cos(p.indexLabelAngle)),D>9&&(D*=.3),D>e&&(e=D)),D=D=0,0<p.indexLabelAngle&&p.indexLabelAngle<Math.PI?(D=n.y2-(p.indexLabelTextBlock.y+p.indexLabelTextBlock.height/2+5),D*=-1):D=n.y1-(p.indexLabelTextBlock.y-p.indexLabelTextBlock.height/2-5),D>0&&Math.abs(p.indexLabelTextBlock.x-y.x)<E&&(D/=Math.abs(Math.sin(p.indexLabelAngle)),D>9&&(D*=.3),D>e&&(e=D));for(b=function(a,b,c){for(var d=[],e=0;d.push(t[b]),b!==c;b=(b+1+r.length)%r.length);for(d.sort(function(a,b){return a.y-b.y}),b=0;b<d.length&&(c=d[b],a>e);b++)e+=c.indexLabelTextBlock.height,c.indexLabelTextBlock.text="",c.indexLabelText="",c.indexLabelTextBlock.measureText()},x=p=-1,A=F=0;A<r.length;A++)if(q=t[A],q.indexLabelText){var G=f(A);null!==G&&(s=t[G],D=0,D=h(q,s),0>D?(0>p&&(p=A),G!==p&&(x=G),F+=-D):F>0&&(b(F,p,x),x=p=-1,F=0))}F>0&&b(F,p,x)}c(m.animationEnabled&&0===m.renderCount?u?60:30:1),d()}var m=this;if(!(0>=a.dataSeriesIndexes.length)){var g=this.data[a.dataSeriesIndexes[0]],r=g.dataPoints,l=10,n=this.plotArea,q=0,s={frame:0,maxFrames:1},t=[],v=2,w=1.3,x=20/180*Math.PI,C=6,y={x:(n.x2+n.x1)/2,y:(n.y2+n.y1)/2},E="inside"===g.indexLabelPlacement?.95*Math.min(n.width,n.height)/2:.8*Math.min(n.width,n.height)/2,z=E*w;this.pieDoughnutClickHandler=function(a){s.frame===s.maxFrames&&(a=a.dataPoint,a.exploded=a.exploded?!1:!0,c(u?15:4),1<this.dataPoints.length&&e())},b(),p()}},w.prototype.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),T.prototype.registerSpace=function(a,c){"top"===a?this._topOccupied+=c.height:"bottom"===a?this._bottomOccupied+=c.height:"left"===a?this._leftOccupied+=c.width:"right"===a&&(this._rightOccupied+=c.width)},T.prototype.unRegisterSpace=function(a,c){"top"===a?this._topOccupied-=c.height:"bottom"===a?this._bottomOccupied-=c.height:"left"===a?this._leftOccupied-=c.width:"right"===a&&(this._rightOccupied-=c.width)},T.prototype.getFreeSpace=function(){return{x1:this._leftOccupied,y1:this._topOccupied,x2:this.chart.width-this._rightOccupied,y2:this.chart.height-this._bottomOccupied,width:this.chart.width-this._rightOccupied-this._leftOccupied,height:this.chart.height-this._bottomOccupied-this._topOccupied}},T.prototype.reset=function(){this._topOccupied=0,this._bottomOccupied=3,this._rightOccupied=this._leftOccupied=0},M(F,I),F.prototype.render=function(a){a&&this.ctx.save();var c=this.ctx.font;this.ctx.textBaseline=this.textBaseline;var b=0;this._isDirty&&this.measureText(this.ctx),this.ctx.translate(this.x,this.y+b),"middle"===this.textBaseline&&(b=-this._lineHeight/2),this.ctx.font=this._getFontString(),this.ctx.rotate(Math.PI/180*this.angle);var d=0,e=this.padding,h=null;for((0<this.borderThickness&&this.borderColor||this.backgroundColor)&&this.ctx.roundRect(0,b,this.width,this.height,this.cornerRadius,this.borderThickness,this.backgroundColor,this.borderColor),this.ctx.fillStyle=this.fontColor,b=0;b<this._wrappedText.lines.length;b++)h=this._wrappedText.lines[b],"right"===this.horizontalAlign?d=this.width-h.width-this.padding:"left"===this.horizontalAlign?d=this.padding:"center"===this.horizontalAlign&&(d=(this.width-2*this.padding)/2-h.width/2+this.padding),this.ctx.fillText(h.text,d,e),e+=h.height;this.ctx.font=c,a&&this.ctx.restore()},F.prototype.setText=function(a){this.text=a,this._isDirty=!0,this._wrappedText=null},F.prototype.measureText=function(){if(null===this.maxWidth)throw"Please set maxWidth and height for TextBlock";return this._wrapText(this.ctx),this._isDirty=!1,{width:this.width,height:this.height}},F.prototype._getLineWithWidth=function(a,c,b){if(a=String(a),!a)return{text:"",width:0};var d=b=0,e=a.length-1,h=1/0;for(this.ctx.font=this._getFontString();e>=d;){var h=Math.floor((d+e)/2),f=a.substr(0,h+1);if(b=this.ctx.measureText(f).width,c>b)d=h+1;else{if(!(b>c))break;e=h-1}}return b>c&&1<f.length&&(f=f.substr(0,f.length-1),b=this.ctx.measureText(f).width),c=!0,(f.length===a.length||" "===a[f.length])&&(c=!1),c&&(a=f.split(" "),1<a.length&&a.pop(),f=a.join(" "),b=this.ctx.measureText(f).width),{text:f,width:b}},F.prototype._wrapText=function(){var a=new String(aa(this.text)),c=[],b=this.ctx.font,d=0,e=0;for(this.ctx.font=this._getFontString();0<a.length;){var h=this.maxHeight-2*this.padding,f=this._getLineWithWidth(a,this.maxWidth-2*this.padding,!1);f.height=this._lineHeight,c.push(f),e=Math.max(e,f.width),d+=f.height,a=aa(a.slice(f.text.length,a.length)),h&&d>h&&(f=c.pop(),d-=f.height)}this._wrappedText={lines:c,width:e,height:d},this.width=e+2*this.padding,this.height=d+2*this.padding,this.ctx.font=b},F.prototype._getFontString=function(){return ma("",this,null)},M(U,I),U.prototype.render=function(){if(this.text){var f,k,a=this.chart.layoutManager.getFreeSpace(),c=0,b=0,d=0,e=0,h=0;"top"===this.verticalAlign||"bottom"===this.verticalAlign?(e=a.width-2*this.margin,h=.5*a.height-2*this.margin,d=0):"center"===this.verticalAlign&&("left"===this.horizontalAlign||"right"===this.horizontalAlign?(e=a.height-2*this.margin,h=.5*a.width-2*this.margin):"center"===this.horizontalAlign&&(e=a.width-2*this.margin,h=.5*a.height-2*this.margin));var h=new F(this.ctx,{fontSize:this.fontSize,fontFamily:this.fontFamily,fontColor:this.fontColor,fontStyle:this.fontStyle,fontWeight:this.fontWeight,horizontalAlign:this.horizontalAlign,verticalAlign:this.verticalAlign,borderColor:this.borderColor,borderThickness:this.borderThickness,backgroundColor:this.backgroundColor,maxWidth:e,maxHeight:h,cornerRadius:this.cornerRadius,text:this.text,padding:this.padding,textBaseline:"top"}),p=h.measureText();"top"===this.verticalAlign||"bottom"===this.verticalAlign?("top"===this.verticalAlign?(b=this.margin,k="top"):"bottom"===this.verticalAlign&&(b=a.y2-this.margin-p.height,k="bottom"),"left"===this.horizontalAlign?c=a.x1+this.margin:"center"===this.horizontalAlign?c=a.x1+(e/2-p.width/2)+this.margin:"right"===this.horizontalAlign&&(c=a.x2-this.margin-p.width),f=this.horizontalAlign,this.width=p.width,this.height=p.height):"center"===this.verticalAlign&&("left"===this.horizontalAlign?(c=a.x1+this.margin,b=a.y2-this.margin-(e/2-p.width/2),d=-90,k="left",this.width=p.height,this.height=p.width):"right"===this.horizontalAlign?(c=a.x2-this.margin,b=a.y1+this.margin+(e/2-p.width/2),d=90,k="right",this.width=p.height,this.height=p.width):"center"===this.horizontalAlign&&(b=a.y1+(a.height/2-p.height/2),c=a.x1+(a.width/2-p.width/2),k="center",this.width=p.width,this.height=p.height),f="center"),h.x=c,h.y=b,h.angle=d,h.horizontalAlign=f,h.render(!0),this.chart.layoutManager.registerSpace(k,{width:this.width+2*this.margin,height:this.height+2*this.margin}),this.bounds={x1:c,y1:b,x2:c+this.width,y2:b+this.height},this.ctx.textBaseline="top"}},M($,I),$.prototype.render=function(){var a=this.chart.layoutManager.getFreeSpace(),c=null,b=0,d=0,e=0,h=0,f=[],k=[];"top"===this.verticalAlign||"bottom"===this.verticalAlign?(this.orientation="horizontal",c=this.verticalAlign,e=.9*a.width,h=.5*a.height):"center"===this.verticalAlign&&(this.orientation="vertical",c=this.horizontalAlign,e=.5*a.width,h=.9*a.height);for(var p=0;p<this.dataSeries.length;p++){var m=this.dataSeries[p],g=m.legendMarkerType?m.legendMarkerType:"line"!==m.type&&"stepLine"!==m.type&&"spline"!==m.type&&"scatter"!==m.type&&"bubble"!==m.type||!m.markerType?N.getDefaultLegendMarker(m.type):m.markerType,r=m.legendText?m.legendText:m.name,l=m.legendMarkerColor?m.legendMarkerColor:m.markerColor?m.markerColor:m._colorSet[0],n=m.markerSize||"line"!==m.type&&"stepLine"!==m.type&&"spline"!==m.type?.6*this.lineHeight:0;if("pie"!==m.type&&"doughnut"!==m.type)g={markerType:g,markerColor:l,text:r,textBlock:null,chartType:m.type,markerSize:n,lineColor:m._colorSet[0],dataSeriesIndex:p,dataPointIndex:null},f.push(g);else for(var q=0;q<m.dataPoints.length;q++)n=m.dataPoints[q],g=n.legendMarkerType?n.legendMarkerType:m.legendMarkerType?m.legendMarkerType:N.getDefaultLegendMarker(m.type),r=n.legendText?n.legendText:m.legendText?m.legendText:n.name?n.name:"DataPoint: "+(q+1),l=n.markerColor?n.markerColor:m.markerColor?m.markerColor:n.color?n.color:m.color?m.color:m._colorSet[q%m._colorSet.length],n=0!==n.markerSize&&(0!==m.markerSize||n.markerSize)||"line"!==m.type&&"stepLine"!==m.type&&"spline"!==m.type?.6*this.lineHeight:0,g={markerType:g,markerColor:l,text:r,textBlock:null,chartType:m.type,markerSize:n,dataSeriesIndex:p,dataPointIndex:q},f.push(g)}if(0<f.length){for(m=null,p=q=0;p<f.length;p++)g=f[p],"horizontal"===this.orientation?(g.textBlock=new F(this.ctx,{x:0,y:0,maxWidth:e,maxHeight:this.lineHeight,angle:0,text:g.text,horizontalAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"top"}),g.textBlock.measureText(),(!m||m.width+g.textBlock.width+(0===m.width?0:this.horizontalSpacing)>e)&&(m={items:[],width:0},k.push(m),this.height=k.length*(g.textBlock.height+5)),g.textBlock.x=m.width,g.textBlock.y=0,m.width+=Math.round(g.textBlock.width+g.textBlock._lineHeight+(0===m.width?0:.5*g.textBlock._lineHeight))):(this.height+this.lineHeight<h?(m={items:[],width:0},k.push(m),this.height=k.length*this.lineHeight):(m=k[q],q=(q+1)%k.length),g.textBlock=new F(this.ctx,{x:0,y:0,maxWidth:e,maxHeight:1.5*this.fontSize,angle:0,text:g.text,horizontalAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"top"}),g.textBlock.measureText(),g.textBlock.x=m.width,g.textBlock.y=0,m.width+=g.textBlock.width+g.textBlock._lineHeight+(0===m.width?0:.5*g.textBlock._lineHeight)),m.items.push(g),this.width=Math.max(m.width,this.width);this.height=k.length*this.lineHeight}for("top"===this.verticalAlign?(d="left"===this.horizontalAlign?a.x1+2:"right"===this.horizontalAlign?a.x2-this.width-2:a.x1+a.width/2-this.width/2,b=a.y1):"center"===this.verticalAlign?(d="left"===this.horizontalAlign?a.x1+2:"right"===this.horizontalAlign?a.x2-this.width-2:a.x1+a.width/2-this.width/2,b=a.y1+a.height/2-this.height/2):"bottom"===this.verticalAlign&&(d="left"===this.horizontalAlign?a.x1+2:"right"===this.horizontalAlign?a.x2-this.width-2:a.x1+a.width/2-this.width/2,b=a.y2-this.height-5),this.items=f,p=0;p<this.items.length;p++)g=f[p],g.id=++this.chart._eventManager.lastObjectId,this.chart._eventManager.objectMap[g.id]={id:g.id,objectType:"legendItem",legendItemIndex:p,dataSeriesIndex:g.dataSeriesIndex,dataPointIndex:g.dataPointIndex};for(p=0;p<k.length;p++)for(m=k[p],a=0;a<m.items.length;a++)g=m.items[a],h=g.textBlock.x+d+(0===a?.2*n:.4*this.lineHeight+.2*n),f=b+p*this.lineHeight,e=h,this.chart.data[g.dataSeriesIndex].visible||(this.ctx.globalAlpha=.5),("line"===g.chartType||"stepLine"===g.chartType||"spline"===g.chartType)&&(this.ctx.strokeStyle=g.lineColor,this.ctx.lineWidth=Math.ceil(this.lineHeight/8),this.ctx.beginPath(),this.ctx.moveTo(h-.1*this.lineHeight,f+this.lineHeight/2),this.ctx.lineTo(h+.7*this.lineHeight,f+this.lineHeight/2),this.ctx.stroke(),e-=.1*this.lineHeight),H.drawMarker(h+n/2,f+this.lineHeight/2,this.ctx,g.markerType,n,g.markerColor,null,0),g.textBlock.x=h+Math.round(.9*this.lineHeight),g.textBlock.y=f,g.textBlock.render(!0),this.chart.data[g.dataSeriesIndex].visible||(this.ctx.globalAlpha=1),h=A(g.id),this.ghostCtx.fillStyle=h,this.ghostCtx.beginPath(),this.ghostCtx.fillRect(e,g.textBlock.y,g.textBlock.x+g.textBlock.width-e,g.textBlock.height),g.x1=this.chart._eventManager.objectMap[g.id].x1=e,g.y1=this.chart._eventManager.objectMap[g.id].y1=g.textBlock.y,g.x2=this.chart._eventManager.objectMap[g.id].x2=g.textBlock.x+g.textBlock.width,g.y2=this.chart._eventManager.objectMap[g.id].y2=g.textBlock.y+g.textBlock.height;this.chart.layoutManager.registerSpace(c,{width:this.width+2+2,height:this.height+5+5}),this.bounds={x1:d,y1:b,x2:d+this.width,y2:b+this.height}},M(da,I),da.prototype.render=function(){var a=this.chart.layoutManager.getFreeSpace();this.ctx.fillStyle="red",this.ctx.fillRect(a.x1,a.y1,a.x2,a.y2)},M(N,I),N.prototype.getDefaultAxisPlacement=function(){var a=this.type;return"column"===a||"line"===a||"stepLine"===a||"spline"===a||"area"===a||"stepArea"===a||"splineArea"===a||"stackedColumn"===a||"stackedLine"===a||"bubble"===a||"scatter"===a||"stackedArea"===a||"stackedColumn100"===a||"stackedLine100"===a||"stackedArea100"===a?"normal":"bar"===a||"stackedBar"===a||"stackedBar100"===a?"xySwapped":"pie"===a||"doughnut"===a?"none":(window.console.log("Unknown Chart Type: "+a),null)},N.getDefaultLegendMarker=function(a){return"column"===a||"stackedColumn"===a||"stackedLine"===a||"bar"===a||"stackedBar"===a||"stackedBar100"===a||"bubble"===a||"scatter"===a||"stackedColumn100"===a||"stackedLine100"===a||"stepArea"===a?"square":"line"===a||"stepLine"===a||"spline"===a||"pie"===a||"doughnut"===a?"circle":"area"===a||"splineArea"===a||"stackedArea"===a||"stackedArea100"===a?"triangle":(window.console.log("Unknown Chart Type: "+a),null)},N.prototype.getDataPointAtX=function(a,c){if(!this.dataPoints||0===this.dataPoints.length)return null;var b={dataPoint:null,distance:1/0,index:NaN},d=null,e=0,h=0,f=1,k=1/0,p=0,m=0,g=0;for("none"!==this.chart.plotInfo.axisPlacement&&(g=this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x,g=g>0?(this.dataPoints.length-1)/g*(a-this.dataPoints[0].x)>>0:0);;){if(h=f>0?g+e:g-e,h>=0&&h<this.dataPoints.length){var d=this.dataPoints[h],r=Math.abs(d.x-a);if(r<b.distance&&(b.dataPoint=d,b.distance=r,b.index=h),d=Math.abs(d.x-a),k>=d?k=d:f>0?p++:m++,p>1e3&&m>1e3)break}else if(0>g-e&&g+e>=this.dataPoints.length)break;-1===f?(e++,f=1):f=-1}return c||b.dataPoint.x!==a?c&&null!==b.dataPoint?b:null:b},N.prototype.getDataPointAtXY=function(a,c,b){if(!this.dataPoints||0===this.dataPoints.length)return null;b=b||!1;var d=[],e=0,h=0,f=1,k=!1,p=1/0,m=0,g=0,r=0;for("none"!==this.chart.plotInfo.axisPlacement&&(r=this.chart.axisX.getXValueAt({x:a,y:c}),h=this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x,r=h>0?(this.dataPoints.length-1)/h*(r-this.dataPoints[0].x)>>0:0);;){if(h=f>0?r+e:r-e,h>=0&&h<this.dataPoints.length){var l=this.chart._eventManager.objectMap[this.dataPointIds[h]],n=this.dataPoints[h];if(l){switch(this.type){case"column":case"stackedColumn":case"stackedColumn100":case"bar":case"stackedBar":case"stackedBar100":a>=l.x1&&a<=l.x2&&c>=l.y1&&c<=l.y2&&(d.push({dataPoint:n,dataPointIndex:h,dataSeries:this,distance:Math.min(Math.abs(l.x1-a),Math.abs(l.x2-a),Math.abs(l.y1-c),Math.abs(l.y2-c))}),k=!0);break;case"line":case"stepLine":case"spline":case"area":case"stepArea":case"stackedArea":case"stackedArea100":case"splineArea":case"scatter":var q=Q("markerSize",n,this)||4,s=b?20:q,t=Math.sqrt(Math.pow(l.x1-a,2)+Math.pow(l.y1-c,2));s>=t&&d.push({dataPoint:n,dataPointIndex:h,dataSeries:this,distance:t}),h=Math.abs(l.x1-a),p>=h?p=h:f>0?m++:g++,q/2>=t&&(k=!0);break;case"bubble":q=l.size,t=Math.sqrt(Math.pow(l.x1-a,2)+Math.pow(l.y1-c,2)),q/2>=t&&(d.push({dataPoint:n,dataPointIndex:h,dataSeries:this,distance:t}),k=!0);break;case"pie":case"doughnut":q=l.center,s="doughnut"===this.type?.6*l.radius:0,t=Math.sqrt(Math.pow(q.x-a,2)+Math.pow(q.y-c,2)),t<l.radius&&t>s&&(t=Math.atan2(c-q.y,a-q.x),0>t&&(t+=2*Math.PI),t=(180*(t/Math.PI)%360+360)%360,q=(180*(l.startAngle/Math.PI)%360+360)%360,s=(180*(l.endAngle/Math.PI)%360+360)%360,0===s&&1<l.endAngle&&(s=360),q>s&&(s+=360,q>t&&(t+=360)),t>q&&s>t&&(d.push({dataPoint:n,dataPointIndex:h,dataSeries:this,distance:0}),k=!0))}if(k||m>1e3&&g>1e3)break}}else if(0>r-e&&r+e>=this.dataPoints.length)break;-1===f?(e++,f=1):f=-1}for(a=null,c=0;c<d.length;c++)a?d[c].distance<=a.distance&&(a=d[c]):a=d[c];return a},N.prototype.getMarkerProperties=function(a,c,b,d){var e=this.dataPoints;return{x:c,y:b,ctx:d,type:e[a].markerType?e[a].markerType:this.markerType,size:e[a].markerSize?e[a].markerSize:this.markerSize,color:e[a].markerColor?e[a].markerColor:this.markerColor?this.markerColor:e[a].color?e[a].color:this.color?this.color:this._colorSet[a%this._colorSet.length],borderColor:e[a].markerBorderColor?e[a].markerBorderColor:this.markerBorderColor?this.markerBorderColor:null,borderThickness:e[a].markerBorderThickness?e[a].markerBorderThickness:this.markerBorderThickness?this.markerBorderThickness:null
}},M(z,I),z.prototype.createLabels=function(){var a,b,c=0,d=0,e=0,c=0;if("bottom"===this._position||"top"===this._position?(c=this.lineCoordinates.width/Math.abs(this.maximum-this.minimum)*this.interval,d=this.labelAutoFit?"undefined"==typeof this._options.labelMaxWidth?.9*c>>0:this.labelMaxWidth:"undefined"==typeof this._options.labelMaxWidth?.7*this.chart.width>>0:this.labelMaxWidth,e="undefined"==typeof this._options.labelWrap||this.labelWrap?.5*this.chart.height>>0:1.5*this.labelFontSize):("left"===this._position||"right"===this._position)&&(c=this.lineCoordinates.height/Math.abs(this.maximum-this.minimum)*this.interval,d=this.labelAutoFit?"undefined"==typeof this._options.labelMaxWidth?.3*this.chart.width>>0:this.labelMaxWidth:"undefined"==typeof this._options.labelMaxWidth?.5*this.chart.width>>0:this.labelMaxWidth,e="undefined"==typeof this._options.labelWrap||this.labelWrap?2*c>>0:1.5*this.labelFontSize),"axisX"===this.type&&"dateTime"===this.chart.plotInfo.axisXValueType)for(b=ia(new Date(this.maximum),this.interval,this.intervalType),c=this.intervalStartPosition;b>c;ia(c,this.interval,this.intervalType))a="axisX"===this.type&&this.labels[c]?this.labels[c]:ra(c,this.valueFormatString,this.chart._cultureInfo),a=new F(this.ctx,{x:0,y:0,maxWidth:d,maxHeight:e,angle:this.labelAngle,text:this.prefix+a+this.suffix,horizontalAlign:"left",fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"}),this._labels.push({position:c.getTime(),textBlock:a,effectiveHeight:null});else{if(b=this.maximum,this.labels&&this.labels.length){a=Math.ceil(this.interval);for(var h=Math.ceil(this.intervalStartPosition),f=!1,c=h;c<this.maximum;c+=a){if(!this.labels[c]){f=!1;break}f=!0}f&&(this.interval=a,this.intervalStartPosition=h)}for(c=this.intervalStartPosition;b>=c;c+=this.interval)a="axisX"===this.type&&this.labels[c]?this.labels[c]:ga(c,this.valueFormatString,this.chart._cultureInfo),a=new F(this.ctx,{x:0,y:0,maxWidth:d,maxHeight:e,angle:this.labelAngle,text:this.prefix+a+this.suffix,horizontalAlign:"left",fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle",borderThickness:0}),this._labels.push({position:c,textBlock:a,effectiveHeight:null})}for(c=0;c<this.stripLines.length;c++)b=this.stripLines[c],a=new F(this.ctx,{x:0,y:0,backgroundColor:b.labelBackgroundColor,maxWidth:d,maxHeight:e,angle:this.labelAngle,text:b.label,horizontalAlign:"left",fontSize:b.labelFontSize,fontFamily:b.labelFontFamily,fontWeight:b.labelFontWeight,fontColor:b.labelFontColor,fontStyle:b.labelFontStyle,textBaseline:"middle",borderThickness:0}),this._labels.push({position:b.value,textBlock:a,effectiveHeight:null,stripLine:b})},z.prototype.createLabelsAndCalculateWidth=function(){var a=0;if(this._labels=[],"left"===this._position||"right"===this._position)for(this.createLabels(),i=0;i<this._labels.length;i++){var c=this._labels[i].textBlock.measureText(),b=0,b=0===this.labelAngle?c.width:c.width*Math.cos(Math.PI/180*Math.abs(this.labelAngle))+c.height/2*Math.sin(Math.PI/180*Math.abs(this.labelAngle));b>a&&(a=b),this._labels[i].effectiveWidth=b}return(this.title?W(this.titleFontFamily,this.titleFontSize,this.titleFontWeight)+2:0)+a+this.tickLength+5},z.prototype.createLabelsAndCalculateHeight=function(){var a=0;this._labels=[];var c,b=0;if(this.createLabels(),"bottom"===this._position||"top"===this._position)for(b=0;b<this._labels.length;b++){c=this._labels[b].textBlock,c=c.measureText();var d=0,d=0===this.labelAngle?c.height:c.width*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+c.height/2*Math.cos(Math.PI/180*Math.abs(this.labelAngle));d>a&&(a=d),this._labels[b].effectiveHeight=d}return(this.title?W(this.titleFontFamily,this.titleFontSize,this.titleFontWeight)+2:0)+a+this.tickLength+5},z.setLayoutAndRender=function(a,c,b,d,e){var h,f,k,p=a.chart,m=p.ctx;if(a.calculateAxisParameters(),c&&c.calculateAxisParameters(),b&&b.calculateAxisParameters(),c&&b&&"undefined"==typeof c._options.maximum&&"undefined"==typeof c._options.minimum&&"undefined"==typeof c._options.interval&&"undefined"==typeof b._options.maximum&&"undefined"==typeof b._options.minimum&&"undefined"==typeof b._options.interval){k=(c.maximum-c.minimum)/c.interval;var g=(b.maximum-b.minimum)/b.interval;k>g?b.maximum=b.interval*k+b.minimum:g>k&&(c.maximum=c.interval*g+c.minimum)}if(g=c?c.margin:0,"normal"===d){a.lineCoordinates={};var r=Math.ceil(c?c.createLabelsAndCalculateWidth():0);h=Math.round(e.x1+r+g),a.lineCoordinates.x1=h,g=Math.ceil(b?b.createLabelsAndCalculateWidth():0),f=Math.round(e.x2-g>a.chart.width-10?a.chart.width-10:e.x2-g),a.lineCoordinates.x2=f,a.lineCoordinates.width=Math.abs(f-h);var l=Math.ceil(a.createLabelsAndCalculateHeight());d=Math.round(e.y2-l-a.margin),k=Math.round(e.y2-a.margin),a.lineCoordinates.y1=d,a.lineCoordinates.y2=d,a.boundingRect={x1:h,y1:d,x2:f,y2:k,width:f-h,height:k-d},c&&(h=Math.round(e.x1+c.margin),d=Math.round(10>e.y1?10:e.y1),f=Math.round(e.x1+r+c.margin),k=Math.round(e.y2-l-a.margin),c.lineCoordinates={x1:f,y1:d,x2:f,y2:k,height:Math.abs(k-d)},c.boundingRect={x1:h,y1:d,x2:f,y2:k,width:f-h,height:k-d}),b&&(h=Math.round(a.lineCoordinates.x2),d=Math.round(10>e.y1?10:e.y1),f=Math.round(h+g+b.margin),k=Math.round(e.y2-l-a.margin),b.lineCoordinates={x1:h,y1:d,x2:h,y2:k,height:Math.abs(k-d)},b.boundingRect={x1:h,y1:d,x2:f,y2:k,width:f-h,height:k-d}),a.calculateValueToPixelconversionParameters(),c&&c.calculateValueToPixelconversionParameters(),b&&b.calculateValueToPixelconversionParameters(),m.save(),m.rect(a.boundingRect.x1-40,a.boundingRect.y1,a.boundingRect.width+80,a.boundingRect.height),m.clip(),a.renderLabelsTicksAndTitle(),m.restore(),c&&c.renderLabelsTicksAndTitle(),b&&b.renderLabelsTicksAndTitle()}else{r=Math.ceil(a.createLabelsAndCalculateWidth()),c&&(c.lineCoordinates={},h=Math.round(e.x1+r+a.margin),f=Math.round(e.x2>c.chart.width-10?c.chart.width-10:e.x2),c.lineCoordinates.x1=h,c.lineCoordinates.x2=f,c.lineCoordinates.width=Math.abs(f-h)),b&&(b.lineCoordinates={},h=Math.round(e.x1+r+a.margin),f=Math.round(e.x2>b.chart.width-10?b.chart.width-10:e.x2),b.lineCoordinates.x1=h,b.lineCoordinates.x2=f,b.lineCoordinates.width=Math.abs(f-h));var l=Math.ceil(c?c.createLabelsAndCalculateHeight():0),n=Math.ceil(b?b.createLabelsAndCalculateHeight():0);c&&(d=Math.round(e.y2-l-c.margin),k=Math.round(e.y2-g>c.chart.height-10?c.chart.height-10:e.y2-g),c.lineCoordinates.y1=d,c.lineCoordinates.y2=d,c.boundingRect={x1:h,y1:d,x2:f,y2:k,width:f-h,height:l}),b&&(d=Math.round(e.y1+b.margin),k=e.y1+b.margin+n,b.lineCoordinates.y1=k,b.lineCoordinates.y2=k,b.boundingRect={x1:h,y1:d,x2:f,y2:k,width:f-h,height:n}),h=Math.round(e.x1+a.margin),d=Math.round(b?b.lineCoordinates.y2:10>e.y1?10:e.y1),f=Math.round(e.x1+r+a.margin),k=Math.round(c?c.lineCoordinates.y1:e.y2-g>a.chart.height-10?a.chart.height-10:e.y2-g),a.lineCoordinates={x1:f,y1:d,x2:f,y2:k,height:Math.abs(k-d)},a.boundingRect={x1:h,y1:d,x2:f,y2:k,width:f-h,height:k-d},a.calculateValueToPixelconversionParameters(),c&&c.calculateValueToPixelconversionParameters(),b&&b.calculateValueToPixelconversionParameters(),c&&c.renderLabelsTicksAndTitle(),b&&b.renderLabelsTicksAndTitle(),a.renderLabelsTicksAndTitle()}p.preparePlotArea(),e=a.chart.plotArea,m.save(),m.rect(e.x1,e.y1,Math.abs(e.x2-e.x1),Math.abs(e.y2-e.y1)),m.clip(),a.renderStripLinesOfThicknessType("value"),c&&c.renderStripLinesOfThicknessType("value"),b&&b.renderStripLinesOfThicknessType("value"),a.renderInterlacedColors(),c&&c.renderInterlacedColors(),b&&b.renderInterlacedColors(),m.restore(),a.renderGrid(),c&&c.renderGrid(),b&&b.renderGrid(),a.renderAxisLine(),c&&c.renderAxisLine(),b&&b.renderAxisLine(),a.renderStripLinesOfThicknessType("pixel"),c&&c.renderStripLinesOfThicknessType("pixel"),b&&b.renderStripLinesOfThicknessType("pixel")},z.prototype.renderLabelsTicksAndTitle=function(){var a=!1,c=0,b=1,d=0;if(0!==this.labelAngle&&360!==this.labelAngle&&(b=1.2),"undefined"==typeof this._options.interval){if("bottom"===this._position||"top"===this._position){for(e=0;e<this._labels.length;e++)h=this._labels[e],h.position<this.minimum||h.stripLine||(h=h.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)+h.textBlock.height*Math.sin(Math.PI/180*this.labelAngle),c+=h);c>this.lineCoordinates.width*b&&(a=!0)}if("left"===this._position||"right"===this._position){for(e=0;e<this._labels.length;e++)h=this._labels[e],h.position<this.minimum||h.stripLine||(h=h.textBlock.height*Math.cos(Math.PI/180*this.labelAngle)+h.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),c+=h);c>this.lineCoordinates.height*b&&(a=!0)}}if("bottom"===this._position){for(var h,e=0,e=0;e<this._labels.length;e++)h=this._labels[e],h.position<this.minimum||h.position>this.maximum||(c=this.getPixelCoordinatesOnAxis(h.position),(this.tickThickness&&!this._labels[e].stripLine||this._labels[e].stripLine&&"pixel"===this._labels[e].stripLine._thicknessType)&&(this._labels[e].stripLine?(b=this._labels[e].stripLine,this.ctx.lineWidth=b.thickness,this.ctx.strokeStyle=b.color):(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor),b=1===this.ctx.lineWidth%2?(c.x<<0)+.5:c.x<<0,this.ctx.beginPath(),this.ctx.moveTo(b,c.y<<0),this.ctx.lineTo(b,c.y+this.tickLength<<0),this.ctx.stroke()),(!a||0===d++%2||this._labels[e].stripLine)&&(0===h.textBlock.angle?(c.x-=h.textBlock.width/2,c.y+=this.tickLength+h.textBlock.fontSize/2):(c.x-=0>this.labelAngle?h.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0,c.y+=this.tickLength+Math.abs(0>this.labelAngle?h.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)-5:5)),h.textBlock.x=c.x,h.textBlock.y=c.y,h.textBlock.render(!0)));this.title&&(this._titleTextBlock=new F(this.ctx,{x:this.lineCoordinates.x1,y:this.boundingRect.y2-this.titleFontSize-5,maxWidth:this.lineCoordinates.width,maxHeight:1.5*this.titleFontSize,angle:0,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"}),this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.y=this.boundingRect.y2-this._titleTextBlock.height-2,this._titleTextBlock.render(!0))}else if("top"===this._position){for(e=0;e<this._labels.length;e++)h=this._labels[e],h.position<this.minimum||h.position>this.maximum||(c=this.getPixelCoordinatesOnAxis(h.position),(this.tickThickness&&!this._labels[e].stripLine||this._labels[e].stripLine&&"pixel"===this._labels[e].stripLine._thicknessType)&&(this._labels[e].stripLine?(b=this._labels[e].stripLine,this.ctx.lineWidth=b.thickness,this.ctx.strokeStyle=b.color):(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor),b=1===this.ctx.lineWidth%2?(c.x<<0)+.5:c.x<<0,this.ctx.beginPath(),this.ctx.moveTo(b,c.y<<0),this.ctx.lineTo(b,c.y-this.tickLength<<0),this.ctx.stroke()),(!a||0===d++%2||this._labels[e].stripLine)&&(0===h.textBlock.angle?(c.x-=h.textBlock.width/2,c.y-=this.tickLength+h.textBlock.height/2):(c.x-=0<this.labelAngle?h.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0,c.y-=this.tickLength+Math.abs(0<this.labelAngle?h.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)+5:5)),h.textBlock.x=c.x,h.textBlock.y=c.y,h.textBlock.render(!0)));this.title&&(this._titleTextBlock=new F(this.ctx,{x:this.lineCoordinates.x1,y:this.boundingRect.y1,maxWidth:this.lineCoordinates.width,maxHeight:1.5*this.titleFontSize,angle:0,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"}),this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.render(!0))}else if("left"===this._position){for(e=0;e<this._labels.length;e++)h=this._labels[e],h.position<this.minimum||h.position>this.maximum||(c=this.getPixelCoordinatesOnAxis(h.position),(this.tickThickness&&!this._labels[e].stripLine||this._labels[e].stripLine&&"pixel"===this._labels[e].stripLine._thicknessType)&&(this._labels[e].stripLine?(b=this._labels[e].stripLine,this.ctx.lineWidth=b.thickness,this.ctx.strokeStyle=b.color):(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor),b=1===this.ctx.lineWidth%2?(c.y<<0)+.5:c.y<<0,this.ctx.beginPath(),this.ctx.moveTo(c.x<<0,b),this.ctx.lineTo(c.x-this.tickLength<<0,b),this.ctx.stroke()),(!a||0===d++%2||this._labels[e].stripLine)&&(h.textBlock.x=c.x-h.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-this.tickLength-5,h.textBlock.y=0===this.labelAngle?c.y-h.textBlock.height/2+this.labelFontSize/2:c.y-h.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),h.textBlock.render(!0)));this.title&&(this._titleTextBlock=new F(this.ctx,{x:this.boundingRect.x1+5,y:this.lineCoordinates.y2,maxWidth:this.lineCoordinates.height,maxHeight:1.5*this.titleFontSize,angle:-90,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"}),this._titleTextBlock.measureText(),this._titleTextBlock.y=this.lineCoordinates.height/2+this._titleTextBlock.width/2+this.lineCoordinates.y1,this._titleTextBlock.render(!0))}else if("right"===this._position){for(e=0;e<this._labels.length;e++)h=this._labels[e],h.position<this.minimum||h.position>this.maximum||(c=this.getPixelCoordinatesOnAxis(h.position),(this.tickThickness&&!this._labels[e].stripLine||this._labels[e].stripLine&&"pixel"===this._labels[e].stripLine._thicknessType)&&(this._labels[e].stripLine?(b=this._labels[e].stripLine,this.ctx.lineWidth=b.thickness,this.ctx.strokeStyle=b.color):(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor),b=1===this.ctx.lineWidth%2?(c.y<<0)+.5:c.y<<0,this.ctx.beginPath(),this.ctx.moveTo(c.x<<0,b),this.ctx.lineTo(c.x+this.tickLength<<0,b),this.ctx.stroke()),(!a||0===d++%2||this._labels[e].stripLine)&&(h.textBlock.x=c.x+this.tickLength+5,h.textBlock.y=0===this.labelAngle?c.y-h.textBlock.height/2+this.labelFontSize/2:c.y,h.textBlock.render(!0)));this.title&&(this._titleTextBlock=new F(this.ctx,{x:this.boundingRect.x2-5,y:this.lineCoordinates.y2,maxWidth:this.lineCoordinates.height,maxHeight:1.5*this.titleFontSize,angle:90,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"}),this._titleTextBlock.measureText(),this._titleTextBlock.y=this.lineCoordinates.height/2-this._titleTextBlock.width/2+this.lineCoordinates.y1,this._titleTextBlock.render(!0))}},z.prototype.renderInterlacedColors=function(){var c,b,a=this.chart.plotArea.ctx,d=this.chart.plotArea,e=0;if(c=!0,"bottom"!==this._position&&"top"!==this._position||!this.interlacedColor){if(("left"===this._position||"right"===this._position)&&this.interlacedColor)for(a.fillStyle=this.interlacedColor,e=0;e<this._labels.length;e++)this._labels[e].stripLine||(c?(b=this.getPixelCoordinatesOnAxis(this._labels[e].position),c=e+1>=this._labels.length?this.getPixelCoordinatesOnAxis(this.maximum):this.getPixelCoordinatesOnAxis(this._labels[e+1].position),a.fillRect(d.x1,c.y,Math.abs(d.x1-d.x2),Math.abs(c.y-b.y)),c=!1):c=!0)}else for(a.fillStyle=this.interlacedColor,e=0;e<this._labels.length;e++)this._labels[e].stripLine||(c?(c=this.getPixelCoordinatesOnAxis(this._labels[e].position),b=e+1>=this._labels.length?this.getPixelCoordinatesOnAxis(this.maximum):this.getPixelCoordinatesOnAxis(this._labels[e+1].position),a.fillRect(c.x,d.y1,Math.abs(b.x-c.x),Math.abs(d.y1-d.y2)),c=!1):c=!0);a.beginPath()},z.prototype.renderStripLinesOfThicknessType=function(a){if(this.stripLines&&0<this.stripLines.length&&a)for(var c=this.chart.plotArea.ctx,b=0,b=0;b<this.stripLines.length;b++){var d=this.stripLines[b];if(d._thicknessType===a&&("pixel"!==a||!(d.value<this.minimum||d.value>this.maximum))){var e=this.getPixelCoordinatesOnAxis(d.value);c.strokeStyle=d.color,c.beginPath(),A(d.id);var h,f,k,p;c.lineWidth=Math.abs("pixel"===a?d.thickness:this.conversionParameters.pixelPerUnit*d.thickness),"bottom"===this._position||"top"===this._position?(h=f=1===c.lineWidth%2?(e.x<<0)+.5:e.x<<0,k=this.chart.plotArea.y1,p=this.chart.plotArea.y2):("left"===this._position||"right"===this._position)&&(k=p=1===c.lineWidth%2?(e.y<<0)+.5:e.y<<0,h=this.chart.plotArea.x1,f=this.chart.plotArea.x2),c.moveTo(h,k),c.lineTo(f,p),c.stroke()}}},z.prototype.renderGrid=function(){if(this.gridThickness&&0<this.gridThickness){var c,a=this.chart.ctx,b=this.chart.plotArea;if(a.lineWidth=this.gridThickness,a.strokeStyle=this.gridColor,"bottom"===this._position||"top"===this._position)for(d=0;d<this._labels.length&&!this._labels[d].stripLine;d++)this._labels[d].position<this.minimum||this._labels[d].position>this.maximum||(a.beginPath(),c=this.getPixelCoordinatesOnAxis(this._labels[d].position),c=1===a.lineWidth%2?(c.x<<0)+.5:c.x<<0,a.moveTo(c,b.y1<<0),a.lineTo(c,b.y2<<0),a.stroke());else if("left"===this._position||"right"===this._position)for(var d=0;d<this._labels.length&&!this._labels[d].stripLine;d++)this._labels[d].position<this.minimum||this._labels[d].position>this.maximum||(a.beginPath(),c=this.getPixelCoordinatesOnAxis(this._labels[d].position),c=1===a.lineWidth%2?(c.y<<0)+.5:c.y<<0,a.moveTo(b.x1<<0,c),a.lineTo(b.x2<<0,c),a.stroke())}},z.prototype.renderAxisLine=function(){var a=this.chart.ctx;if("bottom"===this._position||"top"===this._position){if(this.lineThickness){a.lineWidth=this.lineThickness,a.strokeStyle=this.lineColor?this.lineColor:"black";var c=1===this.lineThickness%2?(this.lineCoordinates.y1<<0)+.5:this.lineCoordinates.y1<<0;a.beginPath(),a.moveTo(this.lineCoordinates.x1,c),a.lineTo(this.lineCoordinates.x2,c),a.stroke()}}else"left"!==this._position&&"right"!==this._position||!this.lineThickness||(a.lineWidth=this.lineThickness,a.strokeStyle=this.lineColor,c=1===this.lineThickness%2?(this.lineCoordinates.x1<<0)+.5:this.lineCoordinates.x1<<0,a.beginPath(),a.moveTo(c,this.lineCoordinates.y1),a.lineTo(c,this.lineCoordinates.y2),a.stroke())},z.prototype.getPixelCoordinatesOnAxis=function(a){var c={},b=this.lineCoordinates.width,d=this.lineCoordinates.height;return("bottom"===this._position||"top"===this._position)&&(b/=Math.abs(this.maximum-this.minimum),c.x=this.lineCoordinates.x1+b*(a-this.minimum),c.y=this.lineCoordinates.y1),("left"===this._position||"right"===this._position)&&(b=d/Math.abs(this.maximum-this.minimum),c.y=this.lineCoordinates.y2-b*(a-this.minimum),c.x=this.lineCoordinates.x2),c},z.prototype.getXValueAt=function(a){if(!a)return null;var c=null;return"left"===this._position?c=(this.chart.axisX.maximum-this.chart.axisX.minimum)/this.chart.axisX.lineCoordinates.height*(this.chart.axisX.lineCoordinates.y2-a.y)+this.chart.axisX.minimum:"bottom"===this._position&&(c=(this.chart.axisX.maximum-this.chart.axisX.minimum)/this.chart.axisX.lineCoordinates.width*(a.x-this.chart.axisX.lineCoordinates.x1)+this.chart.axisX.minimum),c},z.prototype.calculateValueToPixelconversionParameters=function(a){a={pixelPerUnit:null,minimum:null,reference:null};var c=this.lineCoordinates.width,b=this.lineCoordinates.height;a.minimum=this.minimum,("bottom"===this._position||"top"===this._position)&&(a.pixelPerUnit=c/Math.abs(this.maximum-this.minimum),a.reference=this.lineCoordinates.x1),("left"===this._position||"right"===this._position)&&(a.pixelPerUnit=-1*b/Math.abs(this.maximum-this.minimum),a.reference=this.lineCoordinates.y2),this.conversionParameters=a},z.prototype.calculateAxisParameters=function(){var a=this.chart.layoutManager.getFreeSpace();"bottom"===this._position||"top"===this._position?(this.maxWidth=a.width,this.maxHeight=a.height):(this.maxWidth=a.height,this.maxHeight=a.width);var c,b,d,e,a="axisX"===this.type?500>this.maxWidth?8:Math.max(6,Math.floor(this.maxWidth/62)):Math.floor(this.maxWidth/40);if("axisX"===this.type?(c=null!==this.sessionVariables.internalMinimum?this.sessionVariables.internalMinimum:this.dataInfo.viewPortMin,b=null!==this.sessionVariables.internalMaximum?this.sessionVariables.internalMaximum:this.dataInfo.viewPortMax,0===b-c&&(b+=.4,c-=.4),d=1/0!==this.dataInfo.minDiff?this.dataInfo.minDiff:1):"axisY"===this.type&&(c="undefined"==typeof this._options.minimum?this.dataInfo.viewPortMin:this._options.minimum,b="undefined"==typeof this._options.maximum?this.dataInfo.viewPortMax:this._options.maximum,0===b-c?(b+=5,c-=5):(0!==b&&(b+=Math.abs(.05)),0!==c&&(c-=Math.abs(.05))),this.includeZero&&"undefined"==typeof this._options.minimum&&c>0&&(c=0),this.includeZero&&"undefined"==typeof this._options.maximum&&0>b&&(b=0)),"axisX"===this.type&&"dateTime"===this.chart.plotInfo.axisXValueType?(e=b-c,this.intervalType||(a>=e/1?(this.interval=1,this.intervalType="millisecond"):a>=e/2?(this.interval=2,this.intervalType="millisecond"):a>=e/5?(this.interval=5,this.intervalType="millisecond"):a>=e/10?(this.interval=10,this.intervalType="millisecond"):a>=e/20?(this.interval=20,this.intervalType="millisecond"):a>=e/50?(this.interval=50,this.intervalType="millisecond"):a>=e/100?(this.interval=100,this.intervalType="millisecond"):a>=e/200?(this.interval=200,this.intervalType="millisecond"):a>=e/250?(this.interval=250,this.intervalType="millisecond"):a>=e/300?(this.interval=300,this.intervalType="millisecond"):a>=e/400?(this.interval=400,this.intervalType="millisecond"):a>=e/500?(this.interval=500,this.intervalType="millisecond"):e/(1*x.secondDuration)<=a?(this.interval=1,this.intervalType="second"):e/(2*x.secondDuration)<=a?(this.interval=2,this.intervalType="second"):e/(5*x.secondDuration)<=a?(this.interval=5,this.intervalType="second"):e/(10*x.secondDuration)<=a?(this.interval=10,this.intervalType="second"):e/(15*x.secondDuration)<=a?(this.interval=15,this.intervalType="second"):e/(20*x.secondDuration)<=a?(this.interval=20,this.intervalType="second"):e/(30*x.secondDuration)<=a?(this.interval=30,this.intervalType="second"):e/(1*x.minuteDuration)<=a?(this.interval=1,this.intervalType="minute"):e/(2*x.minuteDuration)<=a?(this.interval=2,this.intervalType="minute"):e/(5*x.minuteDuration)<=a?(this.interval=5,this.intervalType="minute"):e/(10*x.minuteDuration)<=a?(this.interval=10,this.intervalType="minute"):e/(15*x.minuteDuration)<=a?(this.interval=15,this.intervalType="minute"):e/(20*x.minuteDuration)<=a?(this.interval=20,this.intervalType="minute"):e/(30*x.minuteDuration)<=a?(this.interval=30,this.intervalType="minute"):e/(1*x.hourDuration)<=a?(this.interval=1,this.intervalType="hour"):e/(2*x.hourDuration)<=a?(this.interval=2,this.intervalType="hour"):e/(3*x.hourDuration)<=a?(this.interval=3,this.intervalType="hour"):e/(6*x.hourDuration)<=a?(this.interval=6,this.intervalType="hour"):e/(1*x.dayDuration)<=a?(this.interval=1,this.intervalType="day"):e/(2*x.dayDuration)<=a?(this.interval=2,this.intervalType="day"):e/(4*x.dayDuration)<=a?(this.interval=4,this.intervalType="day"):e/(1*x.weekDuration)<=a?(this.interval=1,this.intervalType="week"):e/(2*x.weekDuration)<=a?(this.interval=2,this.intervalType="week"):e/(3*x.weekDuration)<=a?(this.interval=3,this.intervalType="week"):e/(1*x.monthDuration)<=a?(this.interval=1,this.intervalType="month"):e/(2*x.monthDuration)<=a?(this.interval=2,this.intervalType="month"):e/(3*x.monthDuration)<=a?(this.interval=3,this.intervalType="month"):e/(6*x.monthDuration)<=a?(this.interval=6,this.intervalType="month"):(this.interval=e/(1*x.yearDuration)<=a?1:e/(2*x.yearDuration)<=a?2:e/(4*x.yearDuration)<=a?4:Math.floor(z.getNiceNumber(e/(a-1),!0)/x.yearDuration),this.intervalType="year")),this.minimum=null!==this.sessionVariables.internalMinimum?this.sessionVariables.internalMinimum:c-d/2,this.maximum=this.sessionVariables.internalMaximum?this.sessionVariables.internalMaximum:b+d/2,this.valueFormatString||("year"===this.intervalType?this.valueFormatString="YYYY":"month"===this.intervalType?this.valueFormatString="MMM YYYY":"week"===this.intervalType?this.valueFormatString="MMM DD YYYY":"day"===this.intervalType?this.valueFormatString="MMM DD YYYY":"hour"===this.intervalType?this.valueFormatString="hh:mm TT":"minute"===this.intervalType?this.valueFormatString="hh:mm TT":"second"===this.intervalType?this.valueFormatString="hh:mm:ss TT":"millisecond"===this.intervalType&&(this.valueFormatString="fff'ms'")),this.intervalStartPosition=this.getLabelStartPoint(new Date(this.minimum),this.intervalType,this.interval)):(this.intervalType="number",e=z.getNiceNumber(b-c,!1),this.interval=this._options&&this._options.interval?this._options.interval:z.getNiceNumber(e/(a-1),!0),this.minimum=null!==this.sessionVariables.internalMinimum?this.sessionVariables.internalMinimum:Math.floor(c/this.interval)*this.interval,this.maximum=null!==this.sessionVariables.internalMaximum?this.sessionVariables.internalMaximum:Math.ceil(b/this.interval)*this.interval,"axisX"===this.type?(null===this.sessionVariables.internalMinimum&&(this.minimum=c-d/2),this.sessionVariables.internalMaximum||(this.maximum=b+d/2),this.intervalStartPosition=Math.floor((this.minimum+.2*this.interval)/this.interval)*this.interval):"axisY"===this.type&&(this.intervalStartPosition=this.minimum)),"axisX"===this.type&&(this._absoluteMinimum=this._options&&"undefined"!=typeof this._options.minimum?this._options.minimum:this.dataInfo.min-d/2,this._absoluteMaximum=this._options&&"undefined"!=typeof this._options.maximum?this._options.maximum:this.dataInfo.max+d/2),!this.valueFormatString&&(this.valueFormatString="#,##0.##",e=Math.abs(this.maximum-this.minimum),1>e&&(c=Math.floor(Math.abs(Math.log(e)/Math.LN10))+2,c>2)))for(b=0;c-2>b;b++)this.valueFormatString+="#"},z.getNiceNumber=function(a,c){var b=Math.floor(Math.log(a)/Math.LN10),d=a/Math.pow(10,b);return(c?1.5>d?1:3>d?2:7>d?5:10:1>=d?1:2>=d?2:5>=d?5:10)*Math.pow(10,b)},z.prototype.getLabelStartPoint=function(){var a=R(this.interval,this.intervalType),a=new Date(Math.floor(this.minimum/a)*a);return"millisecond"!==this.intervalType&&("second"===this.intervalType?0<a.getMilliseconds()&&(a.setSeconds(a.getSeconds()+1),a.setMilliseconds(0)):"minute"===this.intervalType?(0<a.getSeconds()||0<a.getMilliseconds())&&(a.setMinutes(a.getMinutes()+1),a.setSeconds(0),a.setMilliseconds(0)):"hour"===this.intervalType?(0<a.getMinutes()||0<a.getSeconds()||0<a.getMilliseconds())&&(a.setHours(a.getHours()+1),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)):"day"===this.intervalType?(0<a.getHours()||0<a.getMinutes()||0<a.getSeconds()||0<a.getMilliseconds())&&(a.setDate(a.getDate()+1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)):"week"===this.intervalType?(0<a.getDay()||0<a.getHours()||0<a.getMinutes()||0<a.getSeconds()||0<a.getMilliseconds())&&(a.setDate(a.getDate()+(7-a.getDay())),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)):"month"===this.intervalType?(1<a.getDate()||0<a.getHours()||0<a.getMinutes()||0<a.getSeconds()||0<a.getMilliseconds())&&(a.setMonth(a.getMonth()+1),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)):"year"===this.intervalType&&(0<a.getMonth()||1<a.getDate()||0<a.getHours()||0<a.getMinutes()||0<a.getSeconds()||0<a.getMilliseconds())&&(a.setFullYear(a.getFullYear()+1),a.setMonth(0),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0))),a},M(ea,I),M(L,I),L.prototype._initialize=function(){if(this.enabled){this.container=document.createElement("div"),this.container.setAttribute("class","canvasjs-chart-tooltip"),this.container.style.position="absolute",this.container.style.height="auto",this.container.style.boxShadow="1px 1px 2px 2px rgba(0,0,0,0.1)",this.container.style.zIndex="1000",this.container.style.display="none";var a;a='<div style=" width: auto;height: auto;min-width: 50px;',a+="line-height: 20px;",a+="padding: 5px;",a+="font-family: Calibri, Arial, Georgia, serif;",a+="font-weight: 400;",a+="font-style: "+(u?"italic;":"normal;"),a+="font-size: 14px;",a+="color: #000000;",a+="text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);",a+="text-align: left;",a+="border: 2px solid gray;",a+=u?"background: rgba(255,255,255,.9);":"background: rgb(255,255,255);",a+="text-indent: 0px;",a+="white-space: nowrap;",a+="border-radius: 10px;",u||(a+="filter: alpha(opacity = 90);",a+="filter: progid:DXImageTransform.Microsoft.Shadow(Strength=3, Direction=135, Color='#666666');"),a+='} "> Sample Tooltip</div>',this.container.innerHTML=a,this.contentDiv=this.container.firstChild,this.container.style.borderRadius=this.contentDiv.style.borderRadius,this.chart._canvasJSContainer.appendChild(this.container)}},L.prototype.mouseMoveHandler=function(a,c){this._lastUpdated&&40>(new Date).getTime()-this._lastUpdated||(this._lastUpdated=(new Date).getTime(),this._updateToolTip(a,c))},L.prototype._updateToolTip=function(a,c){if(this.enabled){if("undefined"==typeof a||"undefined"==typeof c){if(isNaN(this._prevX)||isNaN(this._prevY))return;a=this._prevX,c=this._prevY}else this._prevX=a,this._prevY=c;var b=null,d=null,e=[],h=0;if(this.shared&&"none"!==this.chart.plotInfo.axisPlacement){for(h="xySwapped"===this.chart.plotInfo.axisPlacement?(this.chart.axisX.maximum-this.chart.axisX.minimum)/this.chart.axisX.lineCoordinates.height*(this.chart.axisX.lineCoordinates.y2-c)+this.chart.axisX.minimum:(this.chart.axisX.maximum-this.chart.axisX.minimum)/this.chart.axisX.lineCoordinates.width*(a-this.chart.axisX.lineCoordinates.x1)+this.chart.axisX.minimum,b=[],d=0;d<this.chart.data.length;d++){var f=this.chart.data[d].getDataPointAtX(h,!0);f&&0<=f.index&&(f.dataSeries=this.chart.data[d],null!==f.dataPoint.y&&b.push(f))}if(0===b.length)return;for(b.sort(function(a,b){return a.distance-b.distance}),h=b[0],d=0;d<b.length;d++)b[d].dataPoint.x.valueOf()===h.dataPoint.x.valueOf()&&e.push(b[d]);b=null}else if((f=this.chart.getDataPointAtXY(a,c,!0))?(this.currentDataPointIndex=f.dataPointIndex,this.currentSeriesIndex=f.dataSeries.index):u?(f=la(a,c,this.chart._eventManager.ghostCtx),f>0&&"undefined"!=typeof this.chart._eventManager.objectMap[f]?(eventObject=this.chart._eventManager.objectMap[f],this.currentSeriesIndex=eventObject.dataSeriesIndex,this.currentDataPointIndex=0<=eventObject.dataPointIndex?eventObject.dataPointIndex:-1):this.currentDataPointIndex=-1):this.currentDataPointIndex=-1,0<=this.currentSeriesIndex){if(d=this.chart.data[this.currentSeriesIndex],f={},0<=this.currentDataPointIndex)b=d.dataPoints[this.currentDataPointIndex],f.dataSeries=d,f.dataPoint=b,f.index=this.currentDataPointIndex,f.distance=Math.abs(b.x-h);else{if("line"!==d.type&&"stepLine"!==d.type&&"spline"!==d.type&&"area"!==d.type&&"stepArea"!==d.type&&"splineArea"!==d.type&&"stackedArea"!==d.type&&"stackedArea100"!==d.type)return;h=(this.chart.axisX.maximum-this.chart.axisX.minimum)/this.chart.axisX.lineCoordinates.width*(a-this.chart.axisX.lineCoordinates.x1)+this.chart.axisX.minimum.valueOf(),f=d.getDataPointAtX(h,!0),f.dataSeries=d,this.currentDataPointIndex=f.index,b=f.dataPoint}null!==f.dataPoint.y&&e.push(f)}if(0<e.length){this.highlightObjects(e),h="",h=this.getToolTipInnerHTML({entries:e}),this.contentDiv.innerHTML=h,this.contentDiv.innerHTML=h,h=!1,"none"===this.container.style.display&&(h=!0,this.container.style.display="block");try{this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.borderColor?this.borderColor:e[0].dataPoint.color?e[0].dataPoint.color:e[0].dataSeries.color?e[0].dataSeries.color:e[0].dataSeries._colorSet[e[0].index%e[0].dataSeries._colorSet.length]}catch(k){}"pie"===e[0].dataSeries.type||"doughnut"===e[0].dataSeries.type||"bar"===e[0].dataSeries.type||"stackedBar"===e[0].dataSeries.type||"stackedBar100"===e[0].dataSeries.type?toolTipLeft=a-10-this.container.clientWidth:(toolTipLeft=this.chart.axisX.lineCoordinates.width/Math.abs(this.chart.axisX.maximum-this.chart.axisX.minimum)*Math.abs(e[0].dataPoint.x-this.chart.axisX.minimum)+this.chart.axisX.lineCoordinates.x1+.5-this.container.clientWidth<<0,
toolTipLeft-=10),toolTipLeft=0<toolTipLeft?toolTipLeft+"px":toolTipLeft+this.container.clientWidth+20+"px",e=1!==e.length||this.shared||"line"!==e[0].dataSeries.type&&"stepLine"!==e[0].dataSeries.type&&"spline"!==e[0].dataSeries.type&&"area"!==e[0].dataSeries.type&&"stepArea"!==e[0].dataSeries.type&&"splineArea"!==e[0].dataSeries.type&&"stackedArea"!==e[0].dataSeries.type&&"stackedArea100"!==e[0].dataSeries.type?"bar"===e[0].dataSeries.type||"stackedBar"===e[0].dataSeries.type||"stackedBar100"===e[0].dataSeries.type?e[0].dataSeries.axisX.lineCoordinates.y2-e[0].dataSeries.axisX.lineCoordinates.height/Math.abs(e[0].dataSeries.axisX.maximum-e[0].dataSeries.axisX.minimum)*Math.abs(e[0].dataPoint.x-e[0].dataSeries.axisX.minimum)+.5<<0:c:e[0].dataSeries.axisY.lineCoordinates.y2-e[0].dataSeries.axisY.lineCoordinates.height/Math.abs(e[0].dataSeries.axisY.maximum-e[0].dataSeries.axisY.minimum)*Math.abs(e[0].dataPoint.y-e[0].dataSeries.axisY.minimum)+.5<<0,e=-e+10,0<e+this.container.clientHeight+5&&(e-=e+this.container.clientHeight+5-0),this.container.style.left=toolTipLeft,this.container.style.bottom=e+"px",!this.animationEnabled||h?this.disableAnimation():this.enableAnimation()}}},L.prototype.highlightObjects=function(a){if(this.enabled){var c=this.chart.overlaidCanvasCtx;this.chart.resetOverlayedCanvas(),c.save();var b=this.chart.plotArea;for(c.rect(b.x1,b.y1,b.width,b.height),c.clip(),c.beginPath(),b=0;b<a.length;b++){var d=a[b];if((d=this.chart._eventManager.objectMap[d.dataSeries.dataPointIds[d.index]])&&d.objectType&&"dataPoint"===d.objectType){var e=this.chart.data[d.dataSeriesIndex],h=d.dataPointIndex;"line"===e.type||"stepLine"===e.type||"spline"===e.type||"scatter"===e.type||"area"===e.type||"stepArea"===e.type||"splineArea"===e.type||"stackedArea"===e.type||"stackedArea100"===e.type?(e=e.getMarkerProperties(h,d.x1,d.y1,this.chart.overlaidCanvasCtx),e.size=Math.max(1.5*e.size<<0,10),e.borderColor=e.borderColor||"#FFFFFF",e.borderThickness=e.borderThickness||Math.ceil(.1*e.size),H.drawMarkers([e])):"bubble"===e.type?(e=e.getMarkerProperties(h,d.x1,d.y1,this.chart.overlaidCanvasCtx),e.size=d.size,e.color="white",e.borderColor="white",c.globalAlpha=.3,H.drawMarkers([e]),c.globalAlpha=1):"column"===e.type||"stackedColumn"===e.type||"stackedColumn100"===e.type||"bar"===e.type||"stackedBar"===e.type||"stackedBar100"===e.type?(c.globalAlpha=.3,J(c,d.x1,d.y1,d.x2,d.y2,"white",!1,!1,!1,!1),c.globalAlpha=1):("pie"===e.type||"doughnut"===e.type)&&(c.globalAlpha=.3,ha(c,d.center,d.radius,"white",e.type,d.startAngle,d.endAngle),c.globalAlpha=1)}}c.globalAlpha=1,c.restore()}},L.prototype.getToolTipInnerHTML=function(a){a=a.entries;for(var c="",b=null,d=null,e=0,h="",f=!0,k=0;k<a.length;k++)if(a[k].dataSeries.toolTipContent||a[k].dataPoint.toolTipContent){f=!1;break}if(f&&this.content&&"function"==typeof this.content)c=this.content({entries:a});else if(1<a.length)for(k=0;k<a.length;k++)b=a[k].dataSeries,d=a[k].dataPoint,e=a[k].index,h="",0===k&&f&&!this.content&&(h+="undefined"!=typeof this.chart.axisX.labels[d.x]?this.chart.axisX.labels[d.x]:"{x}",h+="</br>"),"line"===b.type||"stepLine"===b.type||"spline"===b.type||"area"===b.type||"stepArea"===b.type||"splineArea"===b.type||"column"===b.type||"bar"===b.type||"scatter"===b.type||"stackedColumn"===b.type||"stackedColumn100"===b.type||"stackedBar"===b.type||"stackedBar100"===b.type||"stackedArea"===b.type||"stackedArea100"===b.type?h+=d.toolTipContent?d.toolTipContent:b.toolTipContent?b.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\"'color:{color};'\"'>{name}:</span>&nbsp;&nbsp;{y}":"bubble"===b.type?h+=d.toolTipContent?d.toolTipContent:b.toolTipContent?b.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\"'color:{color};'\"'>{name}:</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}":("pie"===b.type||"doughnut"===b.type)&&(h+=d.toolTipContent?d.toolTipContent:b.toolTipContent?b.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"&nbsp;&nbsp;{y}"),c+=this.chart.replaceKeywordsWithValue(h,d,b,e),k<a.length-1&&(c+="</br>");else b=a[0].dataSeries,d=a[0].dataPoint,e=a[0].index,"line"===b.type||"stepLine"===b.type||"spline"===b.type||"area"===b.type||"stepArea"===b.type||"splineArea"===b.type||"column"===b.type||"bar"===b.type||"scatter"===b.type||"stackedColumn"===b.type||"stackedColumn100"===b.type||"stackedBar"===b.type||"stackedBar100"===b.type||"stackedArea"===b.type||"stackedArea100"===b.type?h=d.toolTipContent?d.toolTipContent:b.toolTipContent?b.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\"'color:{color};'\"'>"+(d.label?"{label}":"{x}")+" :</span>&nbsp;&nbsp;{y}":"bubble"===b.type?h=d.toolTipContent?d.toolTipContent:b.toolTipContent?b.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\"'color:{color};'\"'>"+(d.label?"{label}":"{x}")+":</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}":("pie"===b.type||"doughnut"===b.type)&&(h=d.toolTipContent?d.toolTipContent:b.toolTipContent?b.toolTipContent:this.content&&"function"!=typeof this.content?this.content:(d.name?"{name}:&nbsp;&nbsp;":d.label?"{label}:&nbsp;&nbsp;":"")+"{y}"),c+=this.chart.replaceKeywordsWithValue(h,d,b,e);return c},L.prototype.enableAnimation=function(){this.container.style.WebkitTransition||(this.container.style.WebkitTransition="left .2s ease-out, bottom .2s ease-out",this.container.style.MozTransition="left .2s ease-out, bottom .2s ease-out",this.container.style.MsTransition="left .2s ease-out, bottom .2s ease-out",this.container.style.transition="left .2s ease-out, bottom .2s ease-out")},L.prototype.disableAnimation=function(){this.container.style.WebkitTransition&&(this.container.style.WebkitTransition="",this.container.style.MozTransition="",this.container.style.MsTransition="",this.container.style.transition="")},L.prototype.hide=function(){this.enabled&&(this.container.style.display="none",this.currentSeriesIndex=-1,this._prevY=this._prevX=NaN,this.chart.resetOverlayedCanvas())},w.prototype.replaceKeywordsWithValue=function(a,c,b,d){var e=this;return a.replace(/\{\s*[a-zA-Z]+\s*\}|"[^"]*"|'[^']*'/g,function(a){if('"'===a[0]&&'"'===a[a.length-1]||"'"===a[0]&&"'"===a[a.length-1])return a.slice(1,a.length-1);a=aa(a.slice(1,a.length-1));var f=null;if("color"===a)return c.color?c.color:b.color?b.color:b._colorSet[d%b._colorSet.length];if(c.hasOwnProperty(a))f=c;else{if(!b.hasOwnProperty(a))return"";f=b}return"x"===a?e.axisX&&"dateTime"===e.plotInfo.axisXValueType?ra(f[a],c.xValueFormatString?c.xValueFormatString:b.xValueFormatString?b.xValueFormatString:e.axisX&&e.axisX.valueFormatString?e.axisX.valueFormatString:"DD MMM YY",e._cultureInfo):ga(f[a],c.xValueFormatString?c.xValueFormatString:b.xValueFormatString?b.xValueFormatString:"#,##0.########",e._cultureInfo):"y"===a?ga(f[a],c.yValueFormatString?c.yValueFormatString:b.yValueFormatString?b.yValueFormatString:"#,##0.########",e._cultureInfo):f[a]})},S.prototype.reset=function(){this.lastObjectId=0,this.objectMap=[],this.rectangularRegionEventSubscriptions=[],this.previousDataPointEventObject=null,this.eventObjects=[],u&&(this.ghostCtx.clearRect(0,0,this.chart.width,this.chart.height),this.ghostCtx.beginPath())},S.prototype.getNewObjectTrackingId=function(){return++this.lastObjectId},S.prototype.mouseEventHandler=function(a){if("mousemove"===a.type||"click"===a.type){var c=[],b=sa(a),d=null;if((d=this.chart.getObjectAtXY(b.x,b.y,!1))&&"undefined"!=typeof this.objectMap[d])if(d=this.objectMap[d],"dataPoint"===d.objectType){var e=this.chart.data[d.dataSeriesIndex],h=e.dataPoints[d.dataPointIndex],f=d.dataPointIndex;d.eventParameter={x:b.x,y:b.y,dataPoint:h,dataSeries:e._options,dataPointIndex:f,dataSeriesIndex:e.index},d.eventContext={context:h,userContext:h,mouseover:"mouseover",mousemove:"mousemove",mouseout:"mouseout",click:"click"},c.push(d),d=this.objectMap[e.id],d.eventParameter={x:b.x,y:b.y,dataPoint:h,dataSeries:e._options,dataPointIndex:f,dataSeriesIndex:e.index},d.eventContext={context:e,userContext:e._options,mouseover:"mouseover",mousemove:"mousemove",mouseout:"mouseout",click:"click"},c.push(this.objectMap[e.id])}else"legendItem"===d.objectType&&(e=this.chart.data[d.dataSeriesIndex],h=e.dataPoints[d.dataPointIndex],d.eventParameter={x:b.x,y:b.y,dataSeries:e._options,dataPoint:h,dataPointIndex:d.dataPointIndex,dataSeriesIndex:d.dataSeriesIndex},d.eventContext={context:this.chart.legend,userContext:this.chart.legend._options,mouseover:"itemmouseover",mousemove:"itemmousemove",mouseout:"itemmouseout",click:"itemclick"},c.push(d));for(e=[],b=0;b<this.mouseoveredObjectMaps.length;b++){for(h=!0,d=0;d<c.length;d++)if(c[d].id===this.mouseoveredObjectMaps[b].id){h=!1;break}h?this.fireEvent(this.mouseoveredObjectMaps[b],"mouseout",a):e.push(this.mouseoveredObjectMaps[b])}for(this.mouseoveredObjectMaps=e,b=0;b<c.length;b++){for(e=!1,d=0;d<this.mouseoveredObjectMaps.length;d++)if(c[b].id===this.mouseoveredObjectMaps[d].id){e=!0;break}e||(this.fireEvent(c[b],"mouseover",a),this.mouseoveredObjectMaps.push(c[b])),"click"===a.type?this.fireEvent(c[b],"click",a):"mousemove"===a.type&&this.fireEvent(c[b],"mousemove",a)}}},S.prototype.fireEvent=function(a,c,b){if(a&&c){var d=a.eventParameter,e=a.eventContext,h=a.eventContext.userContext;h&&e&&h[e[c]]&&h[e[c]].call(h,d),"mouseout"!==c?h.cursor&&h.cursor!==b.target.style.cursor&&(b.target.style.cursor=h.cursor):(b.target.style.cursor=this.chart._defaultCursor,delete a.eventParameter,delete a.eventContext),"click"===c&&"dataPoint"===a.objectType&&this.chart.pieDoughnutClickHandler&&this.chart.pieDoughnutClickHandler.call(this.chart.data[a.dataSeriesIndex],d)}},M(pa,I);var H={drawMarker:function(a,c,b,d,e,h,f,k){if(b){var p=1;b.fillStyle=h?h:"#000000",b.strokeStyle=f?f:"#000000",b.lineWidth=k?k:0,"circle"===d?(b.moveTo(a,c),b.beginPath(),b.arc(a,c,e/2,0,2*Math.PI,!1),h&&b.fill(),k&&(f?b.stroke():(p=b.globalAlpha,b.globalAlpha=.15,b.strokeStyle="black",b.stroke(),b.globalAlpha=p))):"square"===d?(b.beginPath(),b.rect(a-e/2,c-e/2,e,e),h&&b.fill(),k&&(f?b.stroke():(p=b.globalAlpha,b.globalAlpha=.15,b.strokeStyle="black",b.stroke(),b.globalAlpha=p))):"triangle"===d?(b.beginPath(),b.moveTo(a-e/2,c+e/2),b.lineTo(a+e/2,c+e/2),b.lineTo(a,c-e/2),b.closePath(),h&&b.fill(),k&&(f?b.stroke():(p=b.globalAlpha,b.globalAlpha=.15,b.strokeStyle="black",b.stroke(),b.globalAlpha=p)),b.beginPath()):"cross"===d&&(b.strokeStyle=h,b.lineWidth=e/4,b.beginPath(),b.moveTo(a-e/2,c-e/2),b.lineTo(a+e/2,c+e/2),b.stroke(),b.moveTo(a+e/2,c-e/2),b.lineTo(a-e/2,c+e/2),b.stroke())}},drawMarkers:function(a){for(var c=0;c<a.length;c++){var b=a[c];H.drawMarker(b.x,b.y,b.ctx,b.type,b.size,b.color,b.borderColor,b.borderThickness)}}},ta={Chart:function(a,c){var b=new w(a,c,this);this.render=function(){b.render()},this.options=b._options},addColorSet:function(a,c){V[a]=c},addCultureInfo:function(a,c){fa[a]=c}};ta.Chart.version="v1.4.0 Beta 2",window.CanvasJS=ta}(),document.createElement("canvas").getContext||function(){function V(){return this.context_||(this.context_=new C(this))}function W(a,b,c){var g=M.call(arguments,2);return function(){return a.apply(b,g.concat(M.call(arguments)))}}function N(a){return String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function O(a){a.namespaces.g_vml_||a.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML"),a.namespaces.g_o_||a.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML"),a.styleSheets.ex_canvas_||(a=a.createStyleSheet(),a.owningElement.id="ex_canvas_",a.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}")}function X(a){var b=a.srcElement;switch(a.propertyName){case"width":b.getContext().clearRect(),b.style.width=b.attributes.width.nodeValue+"px",b.firstChild.style.width=b.clientWidth+"px";break;case"height":b.getContext().clearRect(),b.style.height=b.attributes.height.nodeValue+"px",b.firstChild.style.height=b.clientHeight+"px"}}function Y(a){a=a.srcElement,a.firstChild&&(a.firstChild.style.width=a.clientWidth+"px",a.firstChild.style.height=a.clientHeight+"px")}function D(){return[[1,0,0],[0,1,0],[0,0,1]]}function t(a,b){for(var c=D(),g=0;3>g;g++)for(var e=0;3>e;e++){for(var f=0,d=0;3>d;d++)f+=a[g][d]*b[d][e];c[g][e]=f}return c}function P(a,b){b.fillStyle=a.fillStyle,b.lineCap=a.lineCap,b.lineJoin=a.lineJoin,b.lineWidth=a.lineWidth,b.miterLimit=a.miterLimit,b.shadowBlur=a.shadowBlur,b.shadowColor=a.shadowColor,b.shadowOffsetX=a.shadowOffsetX,b.shadowOffsetY=a.shadowOffsetY,b.strokeStyle=a.strokeStyle,b.globalAlpha=a.globalAlpha,b.font=a.font,b.textAlign=a.textAlign,b.textBaseline=a.textBaseline,b.arcScaleX_=a.arcScaleX_,b.arcScaleY_=a.arcScaleY_,b.lineScale_=a.lineScale_}function Q(a){var b=a.indexOf("(",3),c=a.indexOf(")",b+1),b=a.substring(b+1,c).split(",");return(4!=b.length||"a"!=a.charAt(3))&&(b[3]=1),b}function E(a,b,c){return Math.min(c,Math.max(b,a))}function F(a,b,c){return 0>c&&c++,c>1&&c--,1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+6*(b-a)*(2/3-c):a}function G(a){if(a in H)return H[a];var b,c=1;if(a=String(a),"#"==a.charAt(0))b=a;else if(/^rgb/.test(a)){c=Q(a),b="#";for(var g,e=0;3>e;e++)g=-1!=c[e].indexOf("%")?Math.floor(255*(parseFloat(c[e])/100)):+c[e],b+=v[E(g,0,255)];c=+c[3]}else if(/^hsl/.test(a)){if(e=c=Q(a),b=parseFloat(e[0])/360%360,0>b&&b++,g=E(parseFloat(e[1])/100,0,1),e=E(parseFloat(e[2])/100,0,1),0==g)g=e=b=e;else{var f=.5>e?e*(1+g):e+g-e*g,d=2*e-f;g=F(d,f,b+1/3),e=F(d,f,b),b=F(d,f,b-1/3)}b="#"+v[Math.floor(255*g)]+v[Math.floor(255*e)]+v[Math.floor(255*b)],c=c[3]}else b=Z[a]||a;return H[a]={color:b,alpha:c}}function C(a){this.m_=D(),this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.fillStyle=this.strokeStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this.miterLimit=1*q,this.globalAlpha=1,this.font="10px sans-serif",this.textAlign="left",this.textBaseline="alphabetic",this.canvas=a;var b="width:"+a.clientWidth+"px;height:"+a.clientHeight+"px;overflow:hidden;position:absolute",c=a.ownerDocument.createElement("div");c.style.cssText=b,a.appendChild(c),b=c.cloneNode(!1),b.style.backgroundColor="red",b.style.filter="alpha(opacity=0)",a.appendChild(b),this.element_=c,this.lineScale_=this.arcScaleY_=this.arcScaleX_=1}function R(a,b,c,g){a.currentPath_.push({type:"bezierCurveTo",cp1x:b.x,cp1y:b.y,cp2x:c.x,cp2y:c.y,x:g.x,y:g.y}),a.currentX_=g.x,a.currentY_=g.y}function S(a,b){var c=G(a.strokeStyle),g=c.color,c=c.alpha*a.globalAlpha,e=a.lineScale_*a.lineWidth;1>e&&(c*=e),b.push("<g_vml_:stroke",' opacity="',c,'"',' joinstyle="',a.lineJoin,'"',' miterlimit="',a.miterLimit,'"',' endcap="',$[a.lineCap]||"square",'"',' weight="',e,'px"',' color="',g,'" />')}function T(a,b,c,g){var e=a.fillStyle,f=a.arcScaleX_,d=a.arcScaleY_,k=g.x-c.x,n=g.y-c.y;if(e instanceof w){var h=0,l=g=0,u=0,m=1;if("gradient"==e.type_){h=e.x1_/f,c=e.y1_/d;var p=s(a,e.x0_/f,e.y0_/d),h=s(a,h,c),h=180*Math.atan2(h.x-p.x,h.y-p.y)/Math.PI;0>h&&(h+=360),1e-6>h&&(h=0)}else p=s(a,e.x0_,e.y0_),g=(p.x-c.x)/k,l=(p.y-c.y)/n,k/=f*q,n/=d*q,m=x.max(k,n),u=2*e.r0_/m,m=2*e.r1_/m-u;f=e.colors_,f.sort(function(a,b){return a.offset-b.offset}),d=f.length,p=f[0].color,c=f[d-1].color,k=f[0].alpha*a.globalAlpha,a=f[d-1].alpha*a.globalAlpha;for(var n=[],r=0;d>r;r++){var t=f[r];n.push(t.offset*m+u+" "+t.color)}b.push('<g_vml_:fill type="',e.type_,'"',' method="none" focus="100%"',' color="',p,'"',' color2="',c,'"',' colors="',n.join(","),'"',' opacity="',a,'"',' g_o_:opacity2="',k,'"',' angle="',h,'"',' focusposition="',g,",",l,'" />')}else e instanceof I?k&&n&&b.push("<g_vml_:fill",' position="',-c.x/k*f*f,",",-c.y/n*d*d,'"',' type="tile"',' src="',e.src_,'" />'):(e=G(a.fillStyle),b.push('<g_vml_:fill color="',e.color,'" opacity="',e.alpha*a.globalAlpha,'" />'))}function s(a,b,c){return a=a.m_,{x:q*(b*a[0][0]+c*a[1][0]+a[2][0])-r,y:q*(b*a[0][1]+c*a[1][1]+a[2][1])-r}}function z(a,b,c){isFinite(b[0][0])&&isFinite(b[0][1])&&isFinite(b[1][0])&&isFinite(b[1][1])&&isFinite(b[2][0])&&isFinite(b[2][1])&&(a.m_=b,c&&(a.lineScale_=aa(ba(b[0][0]*b[1][1]-b[0][1]*b[1][0]))))}function w(a){this.type_=a,this.r1_=this.y1_=this.x1_=this.r0_=this.y0_=this.x0_=0,this.colors_=[]}function I(a,b){if(!a||1!=a.nodeType||"IMG"!=a.tagName)throw new A("TYPE_MISMATCH_ERR");if("complete"!=a.readyState)throw new A("INVALID_STATE_ERR");switch(b){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=b;break;default:throw new A("SYNTAX_ERR")}this.src_=a.src,this.width_=a.width,this.height_=a.height}function A(a){this.code=this[a],this.message=a+": DOM Exception "+this.code}var x=Math,k=x.round,J=x.sin,K=x.cos,ba=x.abs,aa=x.sqrt,q=10,r=q/2;navigator.userAgent.match(/MSIE ([\d.]+)?/);var M=Array.prototype.slice;O(document);var U={init:function(a){a=a||document,a.createElement("canvas"),a.attachEvent("onreadystatechange",W(this.init_,this,a))},init_:function(a){a=a.getElementsByTagName("canvas");for(var b=0;b<a.length;b++)this.initElement(a[b])},initElement:function(a){if(!a.getContext){a.getContext=V,O(a.ownerDocument),a.innerHTML="",a.attachEvent("onpropertychange",X),a.attachEvent("onresize",Y);var b=a.attributes;b.width&&b.width.specified?a.style.width=b.width.nodeValue+"px":a.width=a.clientWidth,b.height&&b.height.specified?a.style.height=b.height.nodeValue+"px":a.height=a.clientHeight}return a}};U.init();for(var v=[],d=0;16>d;d++)for(var B=0;16>B;B++)v[16*d+B]=d.toString(16)+B.toString(16);var Z={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"},H={},L={},$={butt:"flat",round:"round"},d=C.prototype;d.clearRect=function(){this.textMeasureEl_&&(this.textMeasureEl_.removeNode(!0),this.textMeasureEl_=null),this.element_.innerHTML=""},d.beginPath=function(){this.currentPath_=[]},d.moveTo=function(a,b){var c=s(this,a,b);this.currentPath_.push({type:"moveTo",x:c.x,y:c.y}),this.currentX_=c.x,this.currentY_=c.y},d.lineTo=function(a,b){var c=s(this,a,b);this.currentPath_.push({type:"lineTo",x:c.x,y:c.y}),this.currentX_=c.x,this.currentY_=c.y},d.bezierCurveTo=function(a,b,c,g,e,f){e=s(this,e,f),a=s(this,a,b),c=s(this,c,g),R(this,a,c,e)},d.quadraticCurveTo=function(a,b,c,g){a=s(this,a,b),c=s(this,c,g),g={x:this.currentX_+2/3*(a.x-this.currentX_),y:this.currentY_+2/3*(a.y-this.currentY_)},R(this,g,{x:g.x+(c.x-this.currentX_)/3,y:g.y+(c.y-this.currentY_)/3},c)},d.arc=function(a,b,c,g,e,f){c*=q;var d=f?"at":"wa",k=a+K(g)*c-r,n=b+J(g)*c-r;g=a+K(e)*c-r,e=b+J(e)*c-r,k!=g||f||(k+=.125),a=s(this,a,b),k=s(this,k,n),g=s(this,g,e),this.currentPath_.push({type:d,x:a.x,y:a.y,radius:c,xStart:k.x,yStart:k.y,xEnd:g.x,yEnd:g.y})},d.rect=function(a,b,c,g){this.moveTo(a,b),this.lineTo(a+c,b),this.lineTo(a+c,b+g),this.lineTo(a,b+g),this.closePath()},d.strokeRect=function(a,b,c,g){var e=this.currentPath_;this.beginPath(),this.moveTo(a,b),this.lineTo(a+c,b),this.lineTo(a+c,b+g),this.lineTo(a,b+g),this.closePath(),this.stroke(),this.currentPath_=e},d.fillRect=function(a,b,c,g){var e=this.currentPath_;this.beginPath(),this.moveTo(a,b),this.lineTo(a+c,b),this.lineTo(a+c,b+g),this.lineTo(a,b+g),this.closePath(),this.fill(),this.currentPath_=e},d.createLinearGradient=function(a,b,c,g){var e=new w("gradient");return e.x0_=a,e.y0_=b,e.x1_=c,e.y1_=g,e},d.createRadialGradient=function(a,b,c,g,e,f){var d=new w("gradientradial");return d.x0_=a,d.y0_=b,d.r0_=c,d.x1_=g,d.y1_=e,d.r1_=f,d},d.drawImage=function(a,b){var c,g,e,d,r,y,n,h;e=a.runtimeStyle.width,d=a.runtimeStyle.height,a.runtimeStyle.width="auto",a.runtimeStyle.height="auto";var l=a.width,u=a.height;if(a.runtimeStyle.width=e,a.runtimeStyle.height=d,3==arguments.length)c=arguments[1],g=arguments[2],r=y=0,n=e=l,h=d=u;else if(5==arguments.length)c=arguments[1],g=arguments[2],e=arguments[3],d=arguments[4],r=y=0,n=l,h=u;else{if(9!=arguments.length)throw Error("Invalid number of arguments");r=arguments[1],y=arguments[2],n=arguments[3],h=arguments[4],c=arguments[5],g=arguments[6],e=arguments[7],d=arguments[8]}var m=s(this,c,g),p=[];if(p.push(" <g_vml_:group",' coordsize="',10*q,",",10*q,'"',' coordorigin="0,0"',' style="width:',10,"px;height:",10,"px;position:absolute;"),1!=this.m_[0][0]||this.m_[0][1]||1!=this.m_[1][1]||this.m_[1][0]){var t=[];t.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",k(m.x/q),",","Dy=",k(m.y/q),"");var v=s(this,c+e,g),w=s(this,c,g+d);c=s(this,c+e,g+d),m.x=x.max(m.x,v.x,w.x,c.x),m.y=x.max(m.y,v.y,w.y,c.y),p.push("padding:0 ",k(m.x/q),"px ",k(m.y/q),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",t.join(""),", sizingmethod='clip');")}else p.push("top:",k(m.y/q),"px;left:",k(m.x/q),"px;");p.push(' ">','<g_vml_:image src="',a.src,'"',' style="width:',q*e,"px;"," height:",q*d,'px"',' cropleft="',r/l,'"',' croptop="',y/u,'"',' cropright="',(l-r-n)/l,'"',' cropbottom="',(u-y-h)/u,'"'," />","</g_vml_:group>"),this.element_.insertAdjacentHTML("BeforeEnd",p.join(""))},d.stroke=function(a){var b=[];b.push("<g_vml_:shape",' filled="',!!a,'"',' style="position:absolute;width:',10,"px;height:",10,'px;"',' coordorigin="0,0"',' coordsize="',10*q,",",10*q,'"',' stroked="',!a,'"',' path="');for(var c={x:null,y:null},d={x:null,y:null},e=0;e<this.currentPath_.length;e++){var f=this.currentPath_[e];switch(f.type){case"moveTo":b.push(" m ",k(f.x),",",k(f.y));break;case"lineTo":b.push(" l ",k(f.x),",",k(f.y));break;case"close":b.push(" x "),f=null;break;case"bezierCurveTo":b.push(" c ",k(f.cp1x),",",k(f.cp1y),",",k(f.cp2x),",",k(f.cp2y),",",k(f.x),",",k(f.y));break;case"at":case"wa":b.push(" ",f.type," ",k(f.x-this.arcScaleX_*f.radius),",",k(f.y-this.arcScaleY_*f.radius)," ",k(f.x+this.arcScaleX_*f.radius),",",k(f.y+this.arcScaleY_*f.radius)," ",k(f.xStart),",",k(f.yStart)," ",k(f.xEnd),",",k(f.yEnd))}f&&((null==c.x||f.x<c.x)&&(c.x=f.x),(null==d.x||f.x>d.x)&&(d.x=f.x),(null==c.y||f.y<c.y)&&(c.y=f.y),(null==d.y||f.y>d.y)&&(d.y=f.y))}b.push(' ">'),a?T(this,b,c,d):S(this,b),b.push("</g_vml_:shape>"),this.element_.insertAdjacentHTML("beforeEnd",b.join(""))},d.fill=function(){this.stroke(!0)},d.closePath=function(){this.currentPath_.push({type:"close"})},d.save=function(){var a={};P(this,a),this.aStack_.push(a),this.mStack_.push(this.m_),this.m_=t(D(),this.m_)},d.restore=function(){this.aStack_.length&&(P(this.aStack_.pop(),this),this.m_=this.mStack_.pop())},d.translate=function(a,b){z(this,t([[1,0,0],[0,1,0],[a,b,1]],this.m_),!1)},d.rotate=function(a){var b=K(a);a=J(a),z(this,t([[b,a,0],[-a,b,0],[0,0,1]],this.m_),!1)},d.scale=function(a,b){this.arcScaleX_*=a,this.arcScaleY_*=b,z(this,t([[a,0,0],[0,b,0],[0,0,1]],this.m_),!0)},d.transform=function(a,b,c,d,e,f){z(this,t([[a,b,0],[c,d,0],[e,f,1]],this.m_),!0)},d.setTransform=function(a,b,c,d,e,f){z(this,[[a,b,0],[c,d,0],[e,f,1]],!0)},d.drawText_=function(a,b,c,d,e){var f=this.m_;d=0;var h,r=1e3,t=0,n=[];if(h=this.font,L[h])h=L[h];else{var l=document.createElement("div").style;try{l.font=h}catch(u){}h=L[h]={style:l.fontStyle||"normal",variant:l.fontVariant||"normal",weight:l.fontWeight||"normal",size:l.fontSize||10,family:l.fontFamily||"sans-serif"}}var l=h,m=this.element_;h={};for(var p in l)h[p]=l[p];switch(p=parseFloat(m.currentStyle.fontSize),m=parseFloat(l.size),"number"==typeof l.size?h.size=l.size:-1!=l.size.indexOf("px")?h.size=m:-1!=l.size.indexOf("em")?h.size=p*m:-1!=l.size.indexOf("%")?h.size=p/100*m:-1!=l.size.indexOf("pt")?h.size=m/.75:h.size=p,h.size*=.981,p=h.style+" "+h.variant+" "+h.weight+" "+h.size+"px "+h.family,m=this.element_.currentStyle,l=this.textAlign.toLowerCase()){case"left":case"center":case"right":break;case"end":l="ltr"==m.direction?"right":"left";break;case"start":l="rtl"==m.direction?"right":"left";break;default:l="left"}switch(this.textBaseline){case"hanging":case"top":t=h.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":t=-h.size/2.25}switch(l){case"right":d=1e3,r=.05;break;case"center":d=r=500}b=s(this,b+0,c+t),n.push('<g_vml_:line from="',-d,' 0" to="',r,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!e,'" stroked="',!!e,'" style="position:absolute;width:1px;height:1px;">'),e?S(this,n):T(this,n,{x:-d,y:0},{x:r,y:h.size}),e=f[0][0].toFixed(3)+","+f[1][0].toFixed(3)+","+f[0][1].toFixed(3)+","+f[1][1].toFixed(3)+",0,0",b=k(b.x/q)+","+k(b.y/q),n.push('<g_vml_:skew on="t" matrix="',e,'" ',' offset="',b,'" origin="',d,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',N(a),'" style="v-text-align:',l,";font:",N(p),'" /></g_vml_:line>'),this.element_.insertAdjacentHTML("beforeEnd",n.join(""))},d.fillText=function(a,b,c,d){this.drawText_(a,b,c,d,!1)},d.strokeText=function(a,b,c,d){this.drawText_(a,b,c,d,!0)},d.measureText=function(a){this.textMeasureEl_||(this.element_.insertAdjacentHTML("beforeEnd",'<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>'),this.textMeasureEl_=this.element_.lastChild);var b=this.element_.ownerDocument;return this.textMeasureEl_.innerHTML="",this.textMeasureEl_.style.font=this.font,this.textMeasureEl_.appendChild(b.createTextNode(a)),{width:this.textMeasureEl_.offsetWidth}},d.clip=function(){},d.arcTo=function(){},d.createPattern=function(a,b){return new I(a,b)},w.prototype.addColorStop=function(a,b){b=G(b),this.colors_.push({offset:a,color:b.color,alpha:b.alpha})},d=A.prototype=Error(),d.INDEX_SIZE_ERR=1,d.DOMSTRING_SIZE_ERR=2,d.HIERARCHY_REQUEST_ERR=3,d.WRONG_DOCUMENT_ERR=4,d.INVALID_CHARACTER_ERR=5,d.NO_DATA_ALLOWED_ERR=6,d.NO_MODIFICATION_ALLOWED_ERR=7,d.NOT_FOUND_ERR=8,d.NOT_SUPPORTED_ERR=9,d.INUSE_ATTRIBUTE_ERR=10,d.INVALID_STATE_ERR=11,d.SYNTAX_ERR=12,d.INVALID_MODIFICATION_ERR=13,d.NAMESPACE_ERR=14,d.INVALID_ACCESS_ERR=15,d.VALIDATION_ERR=16,d.TYPE_MISMATCH_ERR=17,G_vmlCanvasManager=U,CanvasRenderingContext2D=C,CanvasGradient=w,CanvasPattern=I,DOMException=A}(),function(){var j={version:"0.9.0",name:"PluginDetect",addPlugin:function(p,q){p&&j.isString(p)&&q&&j.isFunc(q.getVersion)&&(p=p.replace(/\s/g,"").toLowerCase(),j.Plugins[p]=q,j.isDefined(q.getVersionDone)||(q.installed=null,q.version=null,q.version0=null,q.getVersionDone=null,q.pluginName=p))},uniqueName:function(){return j.name+"998"},openTag:"<",hasOwnPROP:{}.constructor.prototype.hasOwnProperty,hasOwn:function(s,t){var p;try{p=j.hasOwnPROP.call(s,t)}catch(q){}return!!p},rgx:{str:/string/i,num:/number/i,fun:/function/i,arr:/array/i},toString:{}.constructor.prototype.toString,isDefined:function(p){return"undefined"!=typeof p},isArray:function(p){return j.rgx.arr.test(j.toString.call(p))},isString:function(p){return j.rgx.str.test(j.toString.call(p))},isNum:function(p){return j.rgx.num.test(j.toString.call(p))},isStrNum:function(p){return j.isString(p)&&/\d/.test(p)},isFunc:function(p){return j.rgx.fun.test(j.toString.call(p))},getNumRegx:/[\d][\d\.\_,\-]*/,splitNumRegx:/[\.\_,\-]/g,getNum:function(q,r){var p=j.isStrNum(q)?(j.isDefined(r)?new RegExp(r):j.getNumRegx).exec(q):null;return p?p[0]:null},compareNums:function(w,u,t){var s,r,q,v=parseInt;if(j.isStrNum(w)&&j.isStrNum(u)){if(j.isDefined(t)&&t.compareNums)return t.compareNums(w,u);for(s=w.split(j.splitNumRegx),r=u.split(j.splitNumRegx),q=0;q<Math.min(s.length,r.length);q++){if(v(s[q],10)>v(r[q],10))return 1;if(v(s[q],10)<v(r[q],10))return-1}}return 0},formatNum:function(q,r){var p,s;if(!j.isStrNum(q))return null;for(j.isNum(r)||(r=4),r--,s=q.replace(/\s/g,"").split(j.splitNumRegx).concat(["0","0","0","0"]),p=0;4>p;p++)/^(0+)(.+)$/.test(s[p])&&(s[p]=RegExp.$2),(p>r||!/\d/.test(s[p]))&&(s[p]="0");return s.slice(0,4).join(",")},pd:{getPROP:function(s,q,p){try{s&&(p=s[q])}catch(r){}return p},findNavPlugin:function(u){if(u.dbug)return u.dbug;var A=null;if(window.navigator){var s,r,t,y,x,q,z={Find:j.isString(u.find)?new RegExp(u.find,"i"):u.find,Find2:j.isString(u.find2)?new RegExp(u.find2,"i"):u.find2,Avoid:u.avoid?j.isString(u.avoid)?new RegExp(u.avoid,"i"):u.avoid:0,Num:u.num?/\d/:0},p=navigator.mimeTypes,w=navigator.plugins;if(u.mimes&&p)for(y=j.isArray(u.mimes)?[].concat(u.mimes):j.isString(u.mimes)?[u.mimes]:[],s=0;s<y.length;s++){r=0;try{j.isString(y[s])&&/[^\s]/.test(y[s])&&(r=p[y[s]].enabledPlugin)}catch(v){}if(r&&(t=this.findNavPlugin_(r,z),t.obj&&(A=t.obj),A&&!j.dbug))return A}if(u.plugins&&w){for(x=j.isArray(u.plugins)?[].concat(u.plugins):j.isString(u.plugins)?[u.plugins]:[],s=0;s<x.length;s++){r=0;try{x[s]&&j.isString(x[s])&&(r=w[x[s]])}catch(v){}if(r&&(t=this.findNavPlugin_(r,z),t.obj&&(A=t.obj),A&&!j.dbug))return A}if(q=w.length,j.isNum(q))for(s=0;q>s;s++){r=0;try{r=w[s]}catch(v){}if(r&&(t=this.findNavPlugin_(r,z),t.obj&&(A=t.obj),A&&!j.dbug))return A}}}return A},findNavPlugin_:function(t,s){var r=t.description||"",q=t.name||"",p={};return(!s.Find.test(r)||s.Find2&&!s.Find2.test(q)||s.Num&&!s.Num.test(RegExp.leftContext+RegExp.rightContext))&&(!s.Find.test(q)||s.Find2&&!s.Find2.test(r)||s.Num&&!s.Num.test(RegExp.leftContext+RegExp.rightContext))||s.Avoid&&(s.Avoid.test(r)||s.Avoid.test(q))||(p.obj=t),p},getVersionDelimiter:",",findPlugin:function(r){var q,p={status:-3,plugin:0};return j.isString(r)?1==r.length?(this.getVersionDelimiter=r,p):(r=r.toLowerCase().replace(/\s/g,""),q=j.Plugins[r],q&&q.getVersion?(p.plugin=q,p.status=1,p):p):p}},AXO:function(){var q;try{q=new window.ActiveXObject}catch(p){}return q?null:window.ActiveXObject}(),getAXO:function(p){var r=null;try{r=new j.AXO(p);
}catch(q){j.errObj=q}return r&&(j.browser.ActiveXEnabled=!0),r},browser:{detectPlatform:function(){var q,p=window.navigator?navigator.platform||"":"";if(j.OS=100,p){var s=["Win",1,"Mac",2,"Linux",3,"FreeBSD",4,"iPhone",21.1,"iPod",21.2,"iPad",21.3,"Win.*CE",22.1,"Win.*Mobile",22.2,"Pocket\\s*PC",22.3,"",100];for(q=s.length-2;q>=0;q-=2)if(s[q]&&new RegExp(s[q],"i").test(p)){j.OS=s[q+1];break}}},detectIE:function(){var t,q,w,p,y,r=this,u=document,v=window.navigator?navigator.userAgent||"":"";r.ActiveXFilteringEnabled=!1,r.ActiveXEnabled=!1;try{r.ActiveXFilteringEnabled=!!window.external.msActiveXFilteringEnabled()}catch(s){}for(p=["Msxml2.XMLHTTP","Msxml2.DOMDocument","Microsoft.XMLDOM","TDCCtl.TDCCtl","Shell.UIHelper","HtmlDlgSafeHelper.HtmlDlgSafeHelper","Scripting.Dictionary"],y=["WMPlayer.OCX","ShockwaveFlash.ShockwaveFlash","AgControl.AgControl"],w=p.concat(y),t=0;t<w.length&&(!j.getAXO(w[t])||j.dbug);t++);if(r.ActiveXEnabled&&r.ActiveXFilteringEnabled)for(t=0;t<y.length;t++)if(j.getAXO(y[t])){r.ActiveXFilteringEnabled=!1;break}q=u.documentMode;try{u.documentMode=""}catch(s){}r.isIE=r.ActiveXEnabled,r.isIE=r.isIE||j.isNum(u.documentMode)||new Function("return/*@cc_on!@*/!1")();try{u.documentMode=q}catch(s){}r.verIE=null,r.isIE&&(r.verIE=(j.isNum(u.documentMode)&&u.documentMode>=7?u.documentMode:0)||(/^(?:.*?[^a-zA-Z])??(?:MSIE|rv\s*\:)\s*(\d+\.?\d*)/i.test(v)?parseFloat(RegExp.$1,10):7))},detectNonIE:function(){var p=this,s=window.navigator?navigator:{},r=p.isIE?"":s.userAgent||"",t=s.vendor||"",q=s.product||"";p.isGecko=/Gecko/i.test(q)&&/Gecko\s*\/\s*\d/i.test(r),p.verGecko=p.isGecko?j.formatNum(/rv\s*\:\s*([\.\,\d]+)/i.test(r)?RegExp.$1:"0.9"):null,p.isOpera=/(OPR\s*\/|Opera\s*\/\s*\d.*\s*Version\s*\/|Opera\s*[\/]?)\s*(\d+[\.,\d]*)/i.test(r),p.verOpera=p.isOpera?j.formatNum(RegExp.$2):null,p.isChrome=!p.isOpera&&/(Chrome|CriOS)\s*\/\s*(\d[\d\.]*)/i.test(r),p.verChrome=p.isChrome?j.formatNum(RegExp.$2):null,p.isSafari=!p.isOpera&&!p.isChrome&&(/Apple/i.test(t)||!t)&&/Safari\s*\/\s*(\d[\d\.]*)/i.test(r),p.verSafari=p.isSafari&&/Version\s*\/\s*(\d[\d\.]*)/i.test(r)?j.formatNum(RegExp.$1):null},init:function(){var p=this;p.detectPlatform(),p.detectIE(),p.detectNonIE()}},init:{hasRun:0,library:function(){window[j.name]=j;var q=this,p=document;j.win.init(),j.head=p.getElementsByTagName("head")[0]||p.getElementsByTagName("body")[0]||p.body||null,j.browser.init(),q.hasRun=1}},ev:{addEvent:function(r,q,p){r&&q&&p&&(r.addEventListener?r.addEventListener(q,p,!1):r.attachEvent?r.attachEvent("on"+q,p):r["on"+q]=this.concatFn(p,r["on"+q]))},removeEvent:function(r,q,p){r&&q&&p&&(r.removeEventListener?r.removeEventListener(q,p,!1):r.detachEvent&&r.detachEvent("on"+q,p))},concatFn:function(q,p){return function(){q(),"function"==typeof p&&p()}},handler:function(t,s,r,q,p){return function(){t(s,r,q,p)}},handlerOnce:function(s,r,q,p){return function(){var u=j.uniqueName();s[u]||(s[u]=1,s(r,q,p))}},handlerWait:function(s,u,r,q,p){var t=this;return function(){t.setTimeout(t.handler(u,r,q,p),s)}},setTimeout:function(q,p){j.win&&j.win.unload||setTimeout(q,p)},fPush:function(q,p){j.isArray(p)&&(j.isFunc(q)||j.isArray(q)&&q.length>0&&j.isFunc(q[0]))&&p.push(q)},call0:function(q){var p=j.isArray(q)?q.length:-1;p>0&&j.isFunc(q[0])?q[0](j,p>1?q[1]:0,p>2?q[2]:0,p>3?q[3]:0):j.isFunc(q)&&q(j)},callArray0:function(p){var r,q=this;if(j.isArray(p))for(;p.length;)r=p[0],p.splice(0,1),j.win&&j.win.unload&&p!==j.win.unloadHndlrs||q.call0(r)},call:function(q){var p=this;p.call0(q),p.ifDetectDoneCallHndlrs()},callArray:function(p){var q=this;q.callArray0(p),q.ifDetectDoneCallHndlrs()},allDoneHndlrs:[],ifDetectDoneCallHndlrs:function(){var p,q,r=this;if(r.allDoneHndlrs.length&&(!j.win||j.win.loaded&&!j.win.loadPrvtHndlrs.length&&!j.win.loadPblcHndlrs.length)){if(j.Plugins)for(p in j.Plugins)if(j.hasOwn(j.Plugins,p)&&(q=j.Plugins[p],q&&j.isFunc(q.getVersion)&&(3==q.OTF||q.DoneHndlrs&&q.DoneHndlrs.length||q.BIHndlrs&&q.BIHndlrs.length)))return;r.callArray0(r.allDoneHndlrs)}}},getVersion:function(u,r,q){var t,p,s=j.pd.findPlugin(u);return s.status<0?null:(t=s.plugin,1!=t.getVersionDone&&(t.getVersion(null,r,q),null===t.getVersionDone&&(t.getVersionDone=1)),p=t.version||t.version0,p=p?p.replace(j.splitNumRegx,j.pd.getVersionDelimiter):p)},hasMimeType:function(t){if(t&&window.navigator&&navigator.mimeTypes){var w,v,q,s,p=navigator.mimeTypes,r=j.isArray(t)?[].concat(t):j.isString(t)?[t]:[];for(s=r.length,q=0;s>q;q++){w=0;try{j.isString(r[q])&&/[^\s]/.test(r[q])&&(w=p[r[q]])}catch(u){}if(v=w?w.enabledPlugin:0,v&&(v.name||v.description))return w}}return null},getInfo:function(v,r,q){var u,s,p=null,t=j.pd.findPlugin(v);return t.status<0?p:(u=t.plugin,j.isFunc(u.getInfo)&&(null===u.getVersionDone&&(s=j.getVersion?j.getVersion(v,r,q):j.isMinVersion(v,"0",r,q)),p=u.getInfo()),p)},onDetectionDone:function(u,t,q,p){var v,s,r=j.pd.findPlugin(u);return-3==r.status?-1:(s=r.plugin,j.isArray(s.DoneHndlrs)||(s.DoneHndlrs=[]),1!=s.getVersionDone&&(v=j.getVersion?j.getVersion(u,q,p):j.isMinVersion(u,"0",q,p)),s.installed!=-.5&&.5!=s.installed?(j.ev.call(t),1):(j.ev.fPush(t,s.DoneHndlrs),0))},codebase:{isDisabled:function(){return j.browser.ActiveXEnabled&&j.isDefined(j.pd.getPROP(document.createElement("object"),"object"))?0:1},isMin:function(u,t){var p=0;return p},search:function(v){var r,B=this,q=(v.$$,0);if(r=v.searchHasRun||B.isDisabled()?1:0,v.searchHasRun=1,r)return v.version||null;B.init(v);var F,E,D,t,p,s=v.DIGITMAX,C=99999999,u=[0,0,0,0],G=[0,0,0,0],A=function(y,J){var I,H=[].concat(u);return H[y]=J,I=B.isActiveXObject(v,H.join(",")),I?(q=1,u[y]=J):G[y]=J,I};for(F=0;F<G.length;F++){for(u[F]=Math.floor(v.DIGITMIN[F])||0,t=u.join(","),p=u.slice(0,F).concat([C,C,C,C]).slice(0,u.length).join(","),D=0;D<s.length;D++)j.isArray(s[D])&&(s[D].push(0),s[D][F]>G[F]&&j.compareNums(p,v.Lower[D])>=0&&j.compareNums(t,v.Upper[D])<0&&(G[F]=Math.floor(s[D][F])));for(E=0;30>E;E++){if(G[F]-u[F]<=16){for(D=G[F];D>=u[F]+(F?1:0)&&!A(F,D);D--);break}A(F,Math.round((G[F]+u[F])/2))}if(!q)break;G[F]=u[F]}return q&&(v.version=B.convert(v,u.join(",")).v),v.version||null},emptyNode:function(p){try{p.innerHTML=""}catch(q){}},HTML:[],len:0,onUnload:function(r,q){var p,s,t=q.HTML;for(p=0;p<t.length;p++)s=t[p],s&&(t[p]=0,q.emptyNode(s.span()),s.span=0,s.spanObj=0,s=0);q.iframe=0},init:function(u){var t=this;if(!t.iframe){var q,s=j.DOM;q=s.iframe.insert(0,"$.codebase{ }"),t.iframe=q,s.iframe.write(q," "),s.iframe.close(q)}if(!u.init){u.init=1;var p,r;for(j.ev.fPush([t.onUnload,t],j.win.unloadHndlrs),u.tagA='<object width="1" height="1" style="display:none;" codebase="#version=',r=u.classID||u.$$.classID||"",u.tagB='" '+(/clsid\s*:/i.test(r)?'classid="':'type="')+r+'">'+j.openTag+"/object>",p=0;p<u.Lower.length;p++)u.Lower[p]=j.formatNum(u.Lower[p]),u.Upper[p]=j.formatNum(u.Upper[p])}},isActiveXObject:function(u,q){var t=this,p=0,r=(u.$$,(j.DOM.iframe.doc(t.iframe)||document).createElement("span"));return u.min&&j.compareNums(q,u.min)<=0?1:u.max&&j.compareNums(q,u.max)>=0?0:(r.innerHTML=u.tagA+q+u.tagB,j.pd.getPROP(r.firstChild,"object")&&(p=1),p?(u.min=q,t.HTML.push({spanObj:r,span:t.span})):(u.max=q,r.innerHTML=""),p)},span:function(){return this.spanObj},convert_:function(t,p,q,s){var r=t.convert[p];return r?j.isFunc(r)?j.formatNum(r(q.split(j.splitNumRegx),s).join(",")):q:r},convert:function(v,r,u){var q,p,s,t=this;if(r=j.formatNum(r),p={v:r,x:-1},r)for(q=0;q<v.Lower.length;q++)if(s=t.convert_(v,q,v.Lower[q]),s&&j.compareNums(r,u?s:v.Lower[q])>=0&&(!q||j.compareNums(r,u?t.convert_(v,q,v.Upper[q]):v.Upper[q])<0)){p.v=t.convert_(v,q,r,u),p.x=q;break}return p},z:0},win:{disable:function(){this.cancel=!0},cancel:!1,loaded:!1,unload:!1,hasRun:0,init:function(){var p=this;p.hasRun||(p.hasRun=1,/complete/i.test(document.readyState||"")?p.loaded=!0:j.ev.addEvent(window,"load",p.onLoad),j.ev.addEvent(window,"unload",p.onUnload))},loadPrvtHndlrs:[],loadPblcHndlrs:[],unloadHndlrs:[],onUnload:function(){var p=j.win;p.unload||(p.unload=!0,j.ev.removeEvent(window,"load",p.onLoad),j.ev.removeEvent(window,"unload",p.onUnload),j.ev.callArray(p.unloadHndlrs))},onLoad:function(){var p=j.win;p.loaded||p.unload||p.cancel||(p.loaded=!0,j.ev.callArray(p.loadPrvtHndlrs),j.ev.callArray(p.loadPblcHndlrs))}},DOM:{isEnabled:{objectTag:function(){var q=j.browser,p=q.isIE?0:1;return q.ActiveXEnabled&&(p=1),!!p},objectTagUsingActiveX:function(){var p=0;return j.browser.ActiveXEnabled&&(p=1),!!p},objectProperty:function(p){return p&&p.tagName&&j.browser.isIE?/applet/i.test(p.tagName)?!this.objectTag()||j.isDefined(j.pd.getPROP(document.createElement("object"),"object"))?1:0:j.isDefined(j.pd.getPROP(document.createElement(p.tagName),"object"))?1:0:0}},HTML:[],div:null,divID:"plugindetect",divWidth:500,getDiv:function(){return this.div||document.getElementById(this.divID)||null},initDiv:function(){var p,q=this;q.div||(p=q.getDiv(),p?q.div=p:(q.div=document.createElement("div"),q.div.id=q.divID,q.setStyle(q.div,q.getStyle.div()),q.insertDivInBody(q.div)),j.ev.fPush([q.onUnload,q],j.win.unloadHndlrs)),p=0},pluginSize:1,iframeWidth:40,iframeHeight:10,altHTML:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",emptyNode:function(q){var p=this;if(q&&/div|span/i.test(q.tagName||"")){j.browser.isIE&&p.setStyle(q,["display","none"]);try{q.innerHTML=""}catch(r){}}},removeNode:function(p){try{p&&p.parentNode&&p.parentNode.removeChild(p)}catch(q){}},onUnload:function(u,t){var r,q,s,v,w=t.HTML,p=w.length;if(p)for(q=p-1;q>=0;q--)v=w[q],v&&(w[q]=0,t.emptyNode(v.span()),t.removeNode(v.span()),v.span=0,v.spanObj=0,v.doc=0,v.objectProperty=0);r=t.getDiv(),t.emptyNode(r),t.removeNode(r),v=0,s=0,r=0,t.div=0},span:function(){var p=this;return p.spanObj||(p.spanObj=p.doc.getElementById(p.spanId)),p.spanObj||null},width:function(){var q,r,t=this,s=t.span(),p=-1;return q=s&&j.isNum(s.scrollWidth)?s.scrollWidth:p,r=s&&j.isNum(s.offsetWidth)?s.offsetWidth:p,s=0,r>0?r:q>0?q:Math.max(r,q)},obj:function(){var p=this.span();return p?p.firstChild||null:null},readyState:function(){var p=this;return j.browser.isIE&&j.isDefined(j.pd.getPROP(p.span(),"readyState"))?j.pd.getPROP(p.obj(),"readyState"):j.UNDEFINED},objectProperty:function(){var p,r=this,q=r.DOM;return q.isEnabled.objectProperty(r)&&(p=j.pd.getPROP(r.obj(),"object")),p},onLoadHdlr:function(p,q){q.loaded=1},getTagStatus:function(q,A,E,D,t,H,v){var F=this;if(!q||!q.span())return-2;var y=q.width(),r=q.obj()?1:0,s=q.readyState(),p=q.objectProperty();if(p)return 1.5;var u=/clsid\s*\:/i,C=E&&u.test(E.outerHTML||"")?E:D&&u.test(D.outerHTML||"")?D:0,w=E&&!u.test(E.outerHTML||"")?E:D&&!u.test(D.outerHTML||"")?D:0,z=q&&u.test(q.outerHTML||"")?C:w;if(!(A&&A.span()&&z&&z.span()))return-2;var x=z.width(),B=A.width(),G=z.readyState();return 0>y||0>x||B<=F.pluginSize?0:(v&&!q.pi&&j.isDefined(p)&&j.browser.isIE&&q.tagName==z.tagName&&q.time<=z.time&&y===x&&0===s&&0!==G&&(q.pi=1),B>x||!q.loaded||!A.loaded||!z.loaded?q.pi?-.1:0:y!=B&&r?y!=F.pluginSize||!r||j.isNum(s)&&4!==s?q.pi?-.5:-1:1:q.pi?-.5:-1)},setStyle:function(q,t){var p,s=q.style;if(s&&t)for(p=0;p<t.length;p+=2)try{s[t[p]]=t[p+1]}catch(r){}q=0,s=0},getStyle:{iframe:function(){return this.span()},span:function(r){var p,q=j.DOM;return p=r?this.plugin():[].concat(this.Default).concat(["display","inline","fontSize",q.pluginSize+3+"px","lineHeight",q.pluginSize+3+"px"])},div:function(){var p=j.DOM;return[].concat(this.Default).concat(["display","block","width",p.divWidth+"px","height",p.pluginSize+3+"px","fontSize",p.pluginSize+3+"px","lineHeight",p.pluginSize+3+"px","position","absolute","right","9999px","top","-9999px"])},plugin:function(q){var p=j.DOM;return"background-color:transparent;background-image:none;vertical-align:baseline;outline-style:none;border-style:none;padding:0px;margin:0px;visibility:"+(q?"hidden;":"visible;")+"display:inline;font-size:"+(p.pluginSize+3)+"px;line-height:"+(p.pluginSize+3)+"px;"},Default:["backgroundColor","transparent","backgroundImage","none","verticalAlign","baseline","outlineStyle","none","borderStyle","none","padding","0px","margin","0px","visibility","visible"]},insertDivInBody:function(v,t){var u="pd33993399",q=null,s=t?window.top.document:window.document,p=s.getElementsByTagName("body")[0]||s.body;if(!p)try{s.write('<div id="'+u+'">.'+j.openTag+"/div>"),q=s.getElementById(u)}catch(r){}p=s.getElementsByTagName("body")[0]||s.body,p&&(p.insertBefore(v,p.firstChild),q&&p.removeChild(q)),v=0},iframe:{onLoad:function(p,q){j.ev.callArray(p)},insert:function(r,q){var p,t,s=this,v=j.DOM,u=document.createElement("iframe");v.setStyle(u,v.getStyle.iframe()),u.width=v.iframeWidth,u.height=v.iframeHeight,v.initDiv(),p=v.getDiv(),p.appendChild(u);try{s.doc(u).open()}catch(w){}return u[j.uniqueName()]=[],t=j.ev.handlerOnce(j.isNum(r)&&r>0?j.ev.handlerWait(r,s.onLoad,u[j.uniqueName()],q):j.ev.handler(s.onLoad,u[j.uniqueName()],q)),j.ev.addEvent(u,"load",t),u.onload||(u.onload=t),j.ev.addEvent(s.win(u),"load",t),u},addHandler:function(q,p){q&&j.ev.fPush(p,q[j.uniqueName()])},close:function(p){try{this.doc(p).close()}catch(q){}},write:function(p,r){try{this.doc(p).write(r)}catch(q){}},win:function(p){try{return p.contentWindow}catch(q){}return null},doc:function(p){var r;try{r=p.contentWindow.document}catch(q){}try{r||(r=p.contentDocument)}catch(q){}return r||null}},insert:function(t,s,u,p,y,w,v){var F,E,C,B,A,D=this;if(v||(D.initDiv(),v=D.getDiv()),v&&(/div/i.test(v.tagName)&&(B=v.ownerDocument),/iframe/i.test(v.tagName)&&(B=D.iframe.doc(v))),B&&B.createElement||(B=document),j.isDefined(p)||(p=""),j.isString(t)&&/[^\s]/.test(t)){t=t.toLowerCase().replace(/\s/g,""),F=j.openTag+t+" ",F+='style="'+D.getStyle.plugin(w)+'" ';var r=1,q=1;for(A=0;A<s.length;A+=2)/[^\s]/.test(s[A+1])&&(F+=s[A]+'="'+s[A+1]+'" '),/width/i.test(s[A])&&(r=0),/height/i.test(s[A])&&(q=0);if(F+=(r?'width="'+D.pluginSize+'" ':"")+(q?'height="'+D.pluginSize+'" ':""),"embed"==t||"img"==t)F+=" />";else{for(F+=">",A=0;A<u.length;A+=2)/[^\s]/.test(u[A+1])&&(F+=j.openTag+'param name="'+u[A]+'" value="'+u[A+1]+'" />');F+=p+j.openTag+"/"+t+">"}}else t="",F=p;if(E={spanId:"",spanObj:null,span:D.span,loaded:null,tagName:t,outerHTML:F,DOM:D,time:(new Date).getTime(),width:D.width,obj:D.obj,readyState:D.readyState,objectProperty:D.objectProperty,doc:B},v&&v.parentNode)if(/iframe/i.test(v.tagName))D.iframe.addHandler(v,[D.onLoadHdlr,E]),E.loaded=0,E.spanId=j.name+"Span"+D.HTML.length,C='<span id="'+E.spanId+'" style="'+D.getStyle.span(1)+'">'+F+"</span>",D.iframe.write(v,C);else if(/div/i.test(v.tagName)){C=B.createElement("span"),D.setStyle(C,D.getStyle.span()),v.appendChild(C);try{C.innerHTML=F}catch(z){}E.spanObj=C}return C=0,v=0,D.HTML.push(E),E}},file:{any:"fileStorageAny999",valid:"fileStorageValid999",save:function(s,t,r){var p,q=this;s&&j.isDefined(r)&&(s[q.any]||(s[q.any]=[]),s[q.valid]||(s[q.valid]=[]),s[q.any].push(r),p=q.split(t,r),p&&s[q.valid].push(p))},getValidLength:function(p){return p&&p[this.valid]?p[this.valid].length:0},getAnyLength:function(p){return p&&p[this.any]?p[this.any].length:0},getValid:function(r,p){var q=this;return r&&r[q.valid]?q.get(r[q.valid],p):null},getAny:function(r,p){var q=this;return r&&r[q.any]?q.get(r[q.any],p):null},get:function(s,p){var r=s.length-1,q=j.isNum(p)?p:r;return 0>q||q>r?null:s[q]},split:function(t,q){var p,r,s=null;return t=t?t.replace(".","\\."):"",r=new RegExp("^(.*[^\\/])("+t+"\\s*)$"),j.isString(q)&&r.test(q)&&(p=RegExp.$1.split("/"),s={name:p[p.length-1],ext:RegExp.$2,full:q},p[p.length-1]="",s.path=p.join("/")),s}},Plugins:{}};j.init.library();var a={mimeType:["application/x-java-applet","application/x-java-vm","application/x-java-bean"],mimeType_dummy:"application/dummymimejavaapplet",classID:"clsid:8AD9C840-044E-11D1-B3E9-00805F499D93",classID_dummy:"clsid:8AD9C840-044E-11D1-B3E9-BA9876543210",navigator:{init:function(){var q=this,p=a;q.mimeObj=j.hasMimeType(p.mimeType),q.mimeObj&&(q.pluginObj=q.mimeObj.enabledPlugin)},a:function(){try{return window.navigator.javaEnabled()}catch(p){}return 1}(),javaEnabled:function(){return!!this.a},mimeObj:0,pluginObj:0},OTF:null,info:{pluginObj:null,getPluginObj:function(){var p=this;return null===p.pluginObj&&(p.pluginObj=a.navMime.pluginObj||a.navigator.pluginObj||0),p.pluginObj},getNavPluginName:function(){var p=this.getPluginObj();return p?p.name||"":""},getNavPluginDescription:function(){var p=this.getPluginObj();return p?p.description||"":""},Plugin2Status:0,setPlugin2Status:function(p){j.isNum(p)&&(this.Plugin2Status=p)},getPlugin2Status:function(){var r,s,p,t,q,u=this;return 0===u.Plugin2Status&&(s=/Next.*Generation.*Java.*Plug-?in|Java.*Plug-?in\s*2\s/i,p=/Classic.*Java.*Plug-?in/i,t=u.getNavPluginDescription(),q=u.getNavPluginName(),s.test(t)||s.test(q)?u.setPlugin2Status(1):p.test(t)||p.test(q)?u.setPlugin2Status(-1):j.browser.isIE&&/Sun|Oracle/i.test(u.getVendor())&&(r=u.isMinJre4Plugin2(),r>0?u.setPlugin2Status(1):0>r&&u.setPlugin2Status(-1))),u.Plugin2Status},isMinJre4Plugin2:function(p){var t,r=a,s="",q=r.applet.getResult()[0];return s=1==j.OS?"1,6,0,10":2==j.OS?"1,6,0,12":(3==j.OS,"1,6,0,10"),p||(p=(q&&!r.applet.isRange(q)?q:0)||r.version,t=r.applet.codebase,p=p||(t.min&&s?t.isMin(s)>0?s:"0,0,0,0":0)),p=j.formatNum(j.getNum(p)),p?j.compareNums(p,s)>=0?1:-1:0},BrowserForbidsPlugin2:function(){var p=j.browser;return j.OS>=20?0:p.isGecko&&j.compareNums(p.verGecko,"1,9,0,0")<0||p.isOpera&&j.compareNums(p.verOpera,"10,50,0,0")<0?1:0},BrowserRequiresPlugin2:function(){var p=j.browser;return j.OS>=20?0:p.isGecko&&j.compareNums(p.verGecko,"1,9,2,0")>=0||p.isChrome||1==j.OS&&p.isOpera&&j.compareNums(p.verOpera,"10,60,0,0")>=0?1:0},VENDORS:["Sun Microsystems Inc.","Apple Computer, Inc.","Oracle Corporation","IBM Corporation"],VENDORS_reg:[/Sun/i,/Apple/i,/Oracle/i,/IBM/i],getNavVendor:function(){var q,t=this,r=t.getNavPluginName(),s=t.getNavPluginDescription(),p="";if(r||s)for(q=0;q<t.VENDORS.length;q++)if(t.VENDORS_reg[q].test(r)||t.VENDORS_reg[q].test(s)){p=t.VENDORS[q];break}return p},OracleMin:"1,7,0,0",OracleOrSun:function(p){var q=this;return q.VENDORS[j.compareNums(j.formatNum(p),q.OracleMin)<0?0:2]},OracleOrApple:function(p){var q=this;return q.VENDORS[j.compareNums(j.formatNum(p),q.OracleMin)<0?1:2]},getVendor:function(){var s,p,r=this,q=a,t=q.vendor||q.applet.getResult()[1]||"";return t||(p=q.DTK.version,s=q.applet.codebase,p=p||s.version||(s.min?s.isMin(r.OracleMin)>0?r.OracleMin:"0,0,0,0":0),p?t=r.OracleOrSun(p):(t=r.getNavVendor()||"",t||q.version&&(2==j.OS?t=r.OracleOrApple(q.version):(1==j.OS||3==j.OS)&&(t=r.OracleOrSun(q.version))))),t},isPlugin2InstalledEnabled:function(){var u=this,t=a,p=-1,s=t.installed,w=u.getPlugin2Status(),v=u.BrowserRequiresPlugin2(),r=u.BrowserForbidsPlugin2(),q=u.isMinJre4Plugin2();return null!==s&&s>=-.1&&(w>=3?p=1:-3>=w||(2==w?p=1:-2==w||(v&&w>=0&&q>0?p=1:r&&0>=w&&0>q||(v?p=1:r||(w>0?p=1:0>w||0>q||(p=0)))))),p},result:{getDeploymentToolkitObj:function(){var p=a,r=p.info,q=p.DTK;return q.query(1),r.updateResult(),q.status&&q.HTML?q.HTML.obj():q.status}},updateResult:function(){var w,r=this,q=a,p=q.applet,y=q.installed,v=q.DTK,u=p.results,z=r.result;for(z.DeployTK_versions=[].concat(j.isArray(v.VERSIONS)?v.VERSIONS:[]),z.vendor=r.getVendor(),z.isPlugin2=r.isPlugin2InstalledEnabled(),z.OTF=q.OTF<3?0:3==q.OTF?1:2,z.JavaAppletObj=null,w=0;w<u.length;w++)if(u[w][0]&&p.HTML[w]&&p.HTML[w].obj()){z.JavaAppletObj=p.HTML[w].obj();break}var t=[null,null,null,null];for(w=0;w<u.length;w++)u[w][0]?t[w]=1:null!==u[w][0]?(q.NOTF&&q.NOTF.isAppletActive(w),p.active[w]>0?t[w]=0:p.allowed[w]>=1&&3!=q.OTF&&(p.isDisabled.single(w)||y==-.2||-1==y||p.active[w]<0||3==w&&/Microsoft/i.test(z.vendor))&&(t[w]=-1)):3==w&&u[0][0]?t[w]=0:p.isDisabled.single(w)&&(t[w]=-1);z.objectTag=t[1],z.appletTag=t[2],z.objectTagActiveX=t[3],z.name=r.getNavPluginName(),z.description=r.getNavPluginDescription(),z.All_versions=[].concat(z.DeployTK_versions.length?z.DeployTK_versions:j.isString(q.version)?[q.version]:[]);var s=z.All_versions;for(w=0;w<s.length;w++)s[w]=j.formatNum(j.getNum(s[w]));return z}},getInfo:function(){var p=this.info;return p.updateResult(),p.result},getVerifyTagsDefault:function(){return[1,this.applet.isDisabled.VerifyTagsDefault_1()?0:1,1]},getVersion:function(x,u,w){var s,q=this,p=q.applet,v=q.verify,y=q.navigator,t=null,z=null,r=null;return null===q.getVersionDone&&(q.OTF=0,y.init(),v&&v.init()),p.setVerifyTagsArray(w),j.file.save(q,".jar",u),0===q.getVersionDone?void(p.should_Insert_Query_Any()&&(s=p.insert_Query_Any(x),q.setPluginStatus(s[0],s[1],t,x))):(t&&!j.dbug||!q.navMime.query().version||(t=q.navMime.version),t&&!j.dbug||!q.navPlugin.query().version||(t=q.navPlugin.version),t&&!j.dbug||!q.DTK.query().version||(t=q.DTK.version),q.nonAppletDetectionOk(t)&&(r=t),q.setPluginStatus(r,z,t,x),p.should_Insert_Query_Any()&&(s=p.insert_Query_Any(x),s[0]&&(r=s[0],z=s[1])),void q.setPluginStatus(r,z,t,x))},nonAppletDetectionOk:function(q){var t=this,p=t.navigator,r=j.browser,s=1;return q&&p.javaEnabled()&&(r.isIE||p.mimeObj)||(s=0),s},setPluginStatus:function(v,w,p,u){var s,t=this,q=0,r=t.applet;p=p||t.version0,s=r.isRange(v),s&&(r.setRange(s,u)==v&&(q=s),v=0),t.OTF<3&&(t.installed=q?q>0?.7:-.1:v?1:p?-.2:-1),2==t.OTF&&t.NOTF&&!t.applet.getResult()[0]&&(t.installed=p?-.2:-1),3==t.OTF&&t.installed!=-.5&&.5!=t.installed&&(t.installed=t.NOTF.isJavaActive(1)>=1?.5:-.5),4!=t.OTF||t.installed!=-.5&&.5!=t.installed||(v?t.installed=1:q?t.installed=q>0?.7:-.1:t.NOTF.isJavaActive(1)>=1?p?(t.installed=1,v=p):t.installed=0:p?t.installed=-.2:t.installed=-1),p&&(t.version0=j.formatNum(j.getNum(p))),v&&!q&&(t.version=j.formatNum(j.getNum(v))),w&&j.isString(w)&&(t.vendor=w),t.vendor||(t.vendor=""),t.verify&&t.verify.isEnabled()?t.getVersionDone=0:1!=t.getVersionDone&&(t.OTF<2?t.getVersionDone=0:t.getVersionDone=t.applet.can_Insert_Query_Any()?0:1)},DTK:{hasRun:0,status:null,VERSIONS:[],version:"",HTML:null,Plugin2Status:null,classID:["clsid:CAFEEFAC-DEC7-0000-0001-ABCDEFFEDCBA","clsid:CAFEEFAC-DEC7-0000-0000-ABCDEFFEDCBA"],mimeType:["application/java-deployment-toolkit","application/npruntime-scriptable-plugin;DeploymentToolkit"],isDisabled:function(p){var q=this;return q.HTML?1:p||j.dbug?0:q.hasRun||!j.DOM.isEnabled.objectTagUsingActiveX()?1:0},query:function(B){var A,v,q,z=this,t=a,p=j.DOM.altHTML,u={},s=null,w=null,r=z.isDisabled(B);if(z.hasRun=1,r)return z;if(z.status=0,j.DOM.isEnabled.objectTagUsingActiveX())for(A=0;A<z.classID.length&&(z.HTML=j.DOM.insert("object",["classid",z.classID[A]],[],p),s=z.HTML.obj(),!j.pd.getPROP(s,"jvms"));A++);else v=j.hasMimeType(z.mimeType),v&&v.type&&(z.HTML=j.DOM.insert("object",["type",v.type],[],p),s=z.HTML.obj());if(s){try{Math.abs(t.info.getPlugin2Status())<2&&(z.Plugin2Status=s.isPlugin2())}catch(y){}null!==z.Plugin2Status&&(z.Plugin2Status?t.info.setPlugin2Status(2):(j.DOM.isEnabled.objectTagUsingActiveX()||t.info.getPlugin2Status()<=0)&&t.info.setPlugin2Status(-2));try{if(q=j.pd.getPROP(s,"jvms"),q&&(w=q.getLength(),j.isNum(w)))for(z.status=w>0?1:-1,A=0;w>A;A++)v=j.getNum(q.get(w-1-A).version),v&&(z.VERSIONS.push(v),u["a"+j.formatNum(v)]=1)}catch(y){}z.VERSIONS.length&&(z.version=j.formatNum(z.VERSIONS[0]))}return z}},navMime:{hasRun:0,mimetype:"",version:"",mimeObj:0,pluginObj:0,regexJPI:/^\s*application\/x-java-applet;jpi-version\s*=\s*(\d.*)$/i,isDisabled:function(){var p=this,q=a;return p.hasRun||!q.navigator.mimeObj?1:0},update:function(s){var p=this,r=s?s.enabledPlugin:0,q=s&&p.regexJPI.test(s.type||"")?j.formatNum(j.getNum(RegExp.$1)):0;q&&r&&(r.description||r.name)&&j.compareNums(q,p.version||j.formatNum("0"))>0&&(p.version=q,p.mimeObj=s,p.pluginObj=r,p.mimetype=s.type)},query:function(){var w,v,B,A,z,r,t=this,s=a,q=navigator.mimeTypes,p=t.isDisabled();if(t.hasRun=1,p)return t;if(r=q.length,j.isNum(r))for(w=0;r>w;w++){B=0;try{B=q[w]}catch(u){}t.update(B)}if(!t.version||j.dbug)for(z=j.isArray(s.mimeType)?s.mimeType:[s.mimeType],w=0;w<z.length;w++){B=0;try{B=q[z[w]]}catch(u){}if(A=B?B.enabledPlugin:0,r=A?A.length:null,j.isNum(r))for(v=0;r>v;v++){B=0;try{B=A[v]}catch(u){}t.update(B)}}return t}},navPlugin:{hasRun:0,version:"",getPlatformNum:function(){var q=a,p=0,r=/Java.*TM.*Platform[^\d]*(\d+)[\.,_]?(\d*)\s*U?(?:pdate)?\s*(\d*)/i,s=j.pd.findNavPlugin({find:r,mimes:q.mimeType,plugins:1});return s&&(r.test(s.name||"")||r.test(s.description||""))&&parseInt(RegExp.$1,10)>=5&&(p="1,"+RegExp.$1+","+(RegExp.$2?RegExp.$2:"0")+","+(RegExp.$3?RegExp.$3:"0")),p},getPluginNum:function(){var u,t,r,w,s=this,q=a,p=0,v=0;return r=/Java[^\d]*Plug-in/i,w=j.pd.findNavPlugin({find:r,num:1,mimes:q.mimeType,plugins:1,dbug:v}),w&&(u=s.checkPluginNum(w.description,r),t=s.checkPluginNum(w.name,r),p=u&&t?j.compareNums(u,t)>0?u:t:u||t),p||(r=/Java.*\d.*Plug-in/i,w=j.pd.findNavPlugin({find:r,mimes:q.mimeType,plugins:1,dbug:v}),w&&(u=s.checkPluginNum(w.description,r),t=s.checkPluginNum(w.name,r),p=u&&t?j.compareNums(u,t)>0?u:t:u||t)),p},checkPluginNum:function(s,r){var p,q;return p=r.test(s)?j.formatNum(j.getNum(s)):0,p&&j.compareNums(p,j.formatNum("10"))>=0&&(q=p.split(j.splitNumRegx),p=j.formatNum("1,"+(parseInt(q[0],10)-3)+",0,"+q[1])),p&&(j.compareNums(p,j.formatNum("1,3"))<0||j.compareNums(p,j.formatNum("2"))>=0)&&(p=0),p},query:function(){var r,t=this,s=a,p=0,q=t.hasRun||!s.navigator.mimeObj;return t.hasRun=1,q?t:((!p||j.dbug)&&(r=t.getPlatformNum(),r&&(p=r)),(!p||j.dbug)&&(r=t.getPluginNum(),r&&(p=r)),p&&(t.version=j.formatNum(p)),t)}},applet:{codebase:{isMin:function(p){return this.$$=a,j.codebase.isMin(this,p)},search:function(){return this.$$=a,j.codebase.search(this)},DIGITMAX:[[15,128],[6,0,512],0,[1,5,2,256],0,[1,4,1,1],[1,4,0,64],[1,3,2,32]],DIGITMIN:[1,0,0,0],Upper:["999","10","5,0,20","1,5,0,20","1,4,1,20","1,4,1,2","1,4,1","1,4"],Lower:["10","5,0,20","1,5,0,20","1,4,1,20","1,4,1,2","1,4,1","1,4","0"],convert:[function(r,q){return q?[parseInt(r[0],10)>1?"99":parseInt(r[1],10)+3+"",r[3],"0","0"]:["1",parseInt(r[0],10)-3+"","0",r[1]]},function(r,q){return q?[r[1],r[2],r[3]+"0","0"]:["1",r[0],r[1],r[2].substring(0,r[2].length-1||1)]},0,function(r,q){return q?[r[0],r[1],r[2],r[3]+"0"]:[r[0],r[1],r[2],r[3].substring(0,r[3].length-1||1)]},0,1,function(r,q){return q?[r[0],r[1],r[2],r[3]+"0"]:[r[0],r[1],r[2],r[3].substring(0,r[3].length-1||1)]},1]},results:[[null,null],[null,null],[null,null],[null,null]],getResult:function(){var p,q=this,s=q.results,r=[];for(p=s.length-1;p>=0&&(r=s[p],!r[0]);p--);return r=[].concat(r)},DummySpanTagHTML:0,HTML:[0,0,0,0],active:[0,0,0,0],DummyObjTagHTML:0,DummyObjTagHTML2:0,allowed:[1,1,1,1],VerifyTagsHas:function(q){var p,r=this;for(p=0;p<r.allowed.length;p++)if(r.allowed[p]===q)return 1;return 0},saveAsVerifyTagsArray:function(r){var p,q=this;if(j.isArray(r)){for(p=1;p<q.allowed.length;p++)r.length>p-1&&j.isNum(r[p-1])&&(r[p-1]<0&&(r[p-1]=0),r[p-1]>3&&(r[p-1]=3),q.allowed[p]=r[p-1]);q.allowed[0]=q.allowed[3]}},setVerifyTagsArray:function(r){var q=this,p=a;null===p.getVersionDone&&q.saveAsVerifyTagsArray(p.getVerifyTagsDefault()),j.dbug?q.saveAsVerifyTagsArray([3,3,3]):r&&q.saveAsVerifyTagsArray(r)},isDisabled:{single:function(q){var p=this;return p.all()?1:1==q?!j.DOM.isEnabled.objectTag():2==q?p.AppletTag():0===q?j.codebase.isDisabled():3==q?!j.DOM.isEnabled.objectTagUsingActiveX():1},all_:null,all:function(){var p,r=this,t=a,q=t.navigator,s=j.browser;return null===r.all_&&(p=s.isOpera&&j.compareNums(s.verOpera,"13,0,0,0")<0&&!q.javaEnabled()||r.AppletTag()&&!j.DOM.isEnabled.objectTag()||!q.mimeObj&&!s.isIE?1:0,r.all_=p),r.all_},AppletTag:function(){var q=a,p=q.navigator;return j.browser.isIE?!p.javaEnabled():0},VerifyTagsDefault_1:function(){var q=j.browser,p=1;return q.isIE&&!q.ActiveXEnabled&&(p=0),(q.isIE&&q.verIE<9||q.verGecko&&j.compareNums(q.verGecko,j.formatNum("2"))<0||q.isSafari&&(!q.verSafari||j.compareNums(q.verSafari,j.formatNum("4"))<0)||q.isOpera&&j.compareNums(q.verOpera,j.formatNum("11"))<0)&&(p=0),p}},can_Insert_Query:function(s){var q=this,r=q.results[0][0],p=q.getResult()[0];return q.HTML[s]||0===s&&null!==r&&!q.isRange(r)||0===s&&p&&!q.isRange(p)?0:!q.isDisabled.single(s)},can_Insert_Query_Any:function(){var p,q=this;for(p=0;p<q.results.length;p++)if(q.can_Insert_Query(p))return 1;return 0},should_Insert_Query:function(s){var r=this,t=r.allowed,q=a,p=r.getResult()[0];return p=p&&(s>0||!r.isRange(p)),r.can_Insert_Query(s)&&0!==t[s]?3==t[s]||2.8==t[s]&&!p?1:q.nonAppletDetectionOk(q.version0)||2!=t[s]&&(1!=t[s]||p)?0:1:0},should_Insert_Query_Any:function(){var p,q=this;for(p=0;p<q.allowed.length;p++)if(q.should_Insert_Query(p))return 1;return 0},query:function(t){var r,v,p=this,s=a,x=null,y=null,q=p.results,u=p.HTML[t];if(u&&u.obj()&&!q[t][0]&&!s.bridgeDisabled&&(r=u.obj(),v=u.readyState(),!j.isNum(v)||4==v)){try{x=j.getNum(r.getVersion()+""),y=r.getVendor()+"",r.statusbar((j.win.loaded," "))}catch(w){}!x||!j.isStrNum(x)||j.dbug&&s.OTF<3||(q[t]=[x,y],p.active[t]=2)}},isRange:function(p){return/^[<>]/.test(p||"")?">"==p.charAt(0)?1:-1:0},setRange:function(q,p){return(q?q>0?">":"<":"")+(j.isString(p)?p:"")},insertJavaTag:function(z,w,p,s,D){var t=a,v="A.class",A=j.file.getValid(t),y=A.name+A.ext,x=A.path,u=["archive",y,"code",v],E=(s?["width",s]:[]).concat(D?["height",D]:[]),r=["mayscript","true"],C=["scriptable","true","codebase_lookup","false"].concat(r),B=t.navigator,q=!j.browser.isIE&&B.mimeObj&&B.mimeObj.type?B.mimeObj.type:t.mimeType[0];return 1==z?j.browser.isIE?j.DOM.insert("object",["type",q].concat(E),["codebase",x].concat(u).concat(C),p,t,0,w):j.DOM.insert("object",["type",q].concat(E),["codebase",x].concat(u).concat(C),p,t,0,w):2==z?j.browser.isIE?j.DOM.insert("applet",["alt",p].concat(r).concat(u).concat(E),["codebase",x].concat(C),p,t,0,w):j.DOM.insert("applet",["codebase",x,"alt",p].concat(r).concat(u).concat(E),[].concat(C),p,t,0,w):3==z?j.browser.isIE?j.DOM.insert("object",["classid",t.classID].concat(E),["codebase",x].concat(u).concat(C),p,t,0,w):j.DOM.insert():4==z?j.DOM.insert("embed",["codebase",x].concat(u).concat(["type",q]).concat(C).concat(E),[],p,t,0,w):j.DOM.insert()},insertIframe:function(p){return j.DOM.iframe.insert(99,p)},insert_Query_Any:function(w){var t,s,q=this,r=a,y=j.DOM,u=q.results,x=q.HTML,p=y.altHTML,v=j.file.getValid(r);return q.should_Insert_Query(0)&&(r.OTF<2&&(r.OTF=2),u[0]=[0,0],t=w?q.codebase.isMin(w):q.codebase.search(),t&&(u[0][0]=w?q.setRange(t,w):t),q.active[0]=t?1.5:-1),v?(q.DummySpanTagHTML||(s=q.insertIframe("applet.DummySpanTagHTML"),q.DummySpanTagHTML=y.insert("",[],[],p,0,0,s),y.iframe.close(s)),q.should_Insert_Query(1)&&(r.OTF<2&&(r.OTF=2),s=q.insertIframe("applet.HTML[1]"),x[1]=q.insertJavaTag(1,s,p),y.iframe.close(s),u[1]=[0,0],q.query(1)),q.should_Insert_Query(2)&&(r.OTF<2&&(r.OTF=2),s=q.insertIframe("applet.HTML[2]"),x[2]=q.insertJavaTag(2,s,p),y.iframe.close(s),u[2]=[0,0],q.query(2)),q.should_Insert_Query(3)&&(r.OTF<2&&(r.OTF=2),s=q.insertIframe("applet.HTML[3]"),x[3]=q.insertJavaTag(3,s,p),y.iframe.close(s),u[3]=[0,0],q.query(3)),y.isEnabled.objectTag()&&(q.DummyObjTagHTML||!x[1]&&!x[2]||(s=q.insertIframe("applet.DummyObjTagHTML"),q.DummyObjTagHTML=y.insert("object",["type",r.mimeType_dummy],[],p,0,0,s),y.iframe.close(s)),!q.DummyObjTagHTML2&&x[3]&&(s=q.insertIframe("applet.DummyObjTagHTML2"),q.DummyObjTagHTML2=y.insert("object",["classid",r.classID_dummy],[],p,0,0,s),y.iframe.close(s))),r.NOTF.init(),q.getResult()):q.getResult()}},NOTF:{count:0,count2:0,countMax:25,intervalLength:250,init:function(){var q=this,p=a;p.OTF<3&&q.shouldContinueQuery()&&(p.OTF=3,j.ev.setTimeout(q.onIntervalQuery,q.intervalLength))},allHTMLloaded:function(){var q,r=a.applet,p=[r.DummySpanTagHTML,r.DummyObjTagHTML,r.DummyObjTagHTML2].concat(r.HTML);for(q=0;q<p.length;q++)if(p[q]&&null!==p[q].loaded&&!p[q].loaded)return 0;return 1},shouldContinueQuery:function(){var q,t=this,s=a,r=s.applet,p=0;if(t.allHTMLloaded()){if(t.count-t.count2>2)return p}else t.count2=t.count;for(q=0;q<r.results.length;q++)r.HTML[q]&&!r.results[q][0]&&(r.allowed[q]>=2||1==r.allowed[q]&&!r.getResult()[0])&&(!t.count||t.isAppletActive(q)>=0)&&(p=1);return p},isJavaActive:function(s){
var p,q,u=this,r=a,t=-9;for(p=0;p<r.applet.HTML.length;p++)q=u.isAppletActive(p,s),q>t&&(t=q);return t},isAppletActive:function(t,u){var z,y,v=this,q=a,A=q.navigator,p=q.applet,w=p.HTML[t],s=p.active,r=0,B=s[t];if(u||B>=1.5||!w||!w.span())return B;for(y=j.DOM.getTagStatus(w,p.DummySpanTagHTML,p.DummyObjTagHTML,p.DummyObjTagHTML2,v.count),z=0;z<s.length;z++)s[z]>0&&(r=1);return B=1!=y?y:j.browser.isIE||q.version0&&A.javaEnabled()&&A.mimeObj&&("object"==w.tagName||r)?1:0,s[t]=B,B},onIntervalQuery:function(){var p,q=a.NOTF;q.count++,3==a.OTF&&(p=q.queryAllApplets(),q.shouldContinueQuery()||q.queryCompleted(p)),3==a.OTF&&j.ev.setTimeout(q.onIntervalQuery,q.intervalLength)},queryAllApplets:function(){var q,p,s=a,r=s.applet;for(q=0;q<r.results.length;q++)r.query(q);return p=r.getResult()},queryCompleted:function(p){var r=this,q=a;q.OTF>=4||(q.OTF=4,r.isJavaActive(),q.setPluginStatus(p[0],p[1],0),j.ev.callArray(q.DoneHndlrs))}}};j.addPlugin("java",a)}(),function($){var selectedCert,that,css=".libersign-loader {font-size: 10px;margin: 10px auto;text-indent: -9999em;width: 9em;height: 9em;border-radius: 50%;background: #000;background: -moz-linear-gradient(left, #000 10%, rgba(255, 255, 255, 0) 42%);background: -webkit-linear-gradient(left, #000 10%, rgba(255, 255, 255, 0) 42%);background: -o-linear-gradient(left, #000 10%, rgba(255, 255, 255, 0) 42%);background: -ms-linear-gradient(left, #000 10%, rgba(255, 255, 255, 0) 42%);background: linear-gradient(to right, #000 10%, rgba(255, 255, 255, 0) 42%);position: relative;-webkit-animation: load3 1.4s infinite linear;animation: load3 1.4s infinite linear;-webkit-transform: translateZ(0);-ms-transform: translateZ(0);transform: translateZ(0)}.libersign-loader:before {width: 50%;height: 50%;background: #000;border-radius: 100% 0 0 0;position: absolute;top: 0;left: 0;content: ''}.libersign-loader:after {background: #fff;width: 75%;height: 75%;border-radius: 50%;content: '';margin: auto;position: absolute;top: 0;left: 0;bottom: 0;right: 0}@-webkit-keyframes load3 {0% {    -webkit-transform: rotate(0deg);    transform: rotate(0deg)}100% {    -webkit-transform: rotate(360deg);    transform: rotate(360deg)}}@keyframes load3 {0% {    -webkit-transform: rotate(0deg);    transform: rotate(0deg)}100% {    -webkit-transform: rotate(360deg);    transform: rotate(360deg)}}#libersign-cert-select span {right: 50px;top: -20px}#libersign-cert-select table {margin-bottom: 10px}#libersign-cert-select table thead tr th {padding: 1px}#libersign-cert-select table tbody {text-align: left;padding-left: 10px;cursor: pointer;background-color: rgba(83, 91, 133, .1)}#libersign-cert-select table tbody tr td {padding: 1px !important}#libersign-cert-select table tbody tr.active-line {background-color: rgba(119, 219, 123, .5)}#libersign-cert-select table tbody tr:not(.active-line):hover, #libersign-cert-select table tbody tr:not(.active-line):focus {background-color: rgba(141, 192, 219, .18)}",icons={fa:{warn:"fa-warning",star:"fa-star",emptyStar:"fa-star-o"},glyphicon:{warn:"glyphicon-warning-sign",star:"glyphicon-star",emptyStar:"glyphicon-star-empty"}},comment="",certsList=[],config={appletUrl:"/applets/",extensionUpdateUrl:"/libersign/",height:140,width:"100%",iconType:"fa"},isOpera=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,isIE=("undefined"!=typeof InstallTrigger,Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,!!document.documentMode),isChrome=(!isIE&&!!window.StyleMedia,!!window.chrome&&!!window.chrome.webstore),handleApplet=((isChrome||isOpera)&&!!window.CSS,function(){var that=$(this);window.cancelSignature=function(){that.trigger("libersign.cancel")},window.injectSignature=function(){for(var signatures=[],i=1;i<=config.signatureInformations.length;i++){var sign=that.find("applet")[0].returnSignature("hash_"+i);sign!=="hash_"+i&&signatures.push(sign)}that.trigger("libersign.sign",[signatures])},window.appletIsLoaded=function(){that.find(".libersign-loader").hide(),that.find("#libersign-applet-load").hide(),that.find("applet").attr("height",config.height),that.trigger("libersign.loaded")},window.giveCommentToApplet=function(){that.find("applet")[0].giveCommentToApplet(comment)};for(var applet='<applet codebase="'+config.appletUrl+'" code="org/adullact/parapheur/applets/splittedsign/Main.class" archive="SplittedSignatureApplet.jar" name="Signature i-Parapheur" width="'+config.width+'" height="0"><param name="permissions" value="all-permissions"/><param name="codebase_lookup" value="false" /><param name="display_cancel" value="true" /><param name="cancel_mode" value="javascript"/><param name="hash_count" value="'+config.signatureInformations.length+'"/>',i=0;i<config.signatureInformations.length;i++)applet+='<param name="hash_'+(i+1)+'" value="'+config.signatureInformations[i].hash+'">',applet+='<param name="pesid_'+(i+1)+'" value="'+config.signatureInformations[i].pesid+'">',applet+='<param name="pespolicyid_'+(i+1)+'" value="'+config.signatureInformations[i].pespolicyid+'">',applet+='<param name="pespolicydesc_'+(i+1)+'" value="'+config.signatureInformations[i].pespolicydesc+'">',applet+='<param name="pespolicyhash_'+(i+1)+'" value="'+config.signatureInformations[i].pespolicyhash+'">',applet+='<param name="pesspuri_'+(i+1)+'" value="'+config.signatureInformations[i].pesspuri+'">',applet+='<param name="pescity_'+(i+1)+'" value="'+config.signatureInformations[i].pescity+'">',applet+='<param name="pespostalcode_'+(i+1)+'" value="'+config.signatureInformations[i].pespostalcode+'">',applet+='<param name="pescountryname_'+(i+1)+'" value="'+config.signatureInformations[i].pescountryname+'">',applet+='<param name="pesclaimedrole_'+(i+1)+'" value="'+config.signatureInformations[i].pesclaimedrole+'">',applet+='<param name="p7s_'+(i+1)+'" value="'+config.signatureInformations[i].p7s+'">',applet+='<param name="pesencoding_'+(i+1)+'" value="'+config.signatureInformations[i].pesencoding+'">',applet+='<param name="format_'+(i+1)+'" value="'+config.signatureInformations[i].format+'">';return applet+='<param name="return_mode" value="form" />Vous devez activer Java 1.7 minimum pour pouvoir signer des documents.</applet>',that.append('<div class="libersign-loader"></div><span id="libersign-applet-load" class="text-info">Chargement de l\'applet de signature en cours...</span>'),applet}),handleSignature=function(){var that=$(this);that.css("text-align","center"),that.find("#libersign-cert-select").hide(),that.find(".libersign-loader").show(),that.find("#libersign-signing").text("Signature en cours..."),that.find("#libersign-signing").show();var handleMessage=function(ev){var message=ev.detail.progress;that.find("#libersign-signing").text(message)};window.addEventListener("libersignmessage",handleMessage),LiberSign.sign(selectedCert,config.signatureInformations).then(function(signatures){that.trigger("libersign.sign",[signatures]),that.find("#libersign-signing").hide(),that.find("#libersign-signed").show(),window.removeEventListener("libersignmessage",handleMessage)})["catch"](function(error){that.find(".libersign-loader").hide(),that.find("#libersign-signing").hide(),that.find("#libersign-error").show(),that.find("#libersign-message").text(error.exception||"Erreur inconnue. Merci de contacter votre administrateur."),window.removeEventListener("libersignmessage",handleMessage)})},handleLoadedCerts=function(){that=this,$(this).children().hide(),$(this).css("text-align","left");var favID=localStorage.getItem("libersign-fav"),favCertIndex=-1,certSelector='<div id="libersign-cert-select">';if(certsList.length>1&&(certSelector+='<span class="text-info">Sélectionnez un certificat de signature :</span>'),0===certsList.length?certSelector+='<span class="text-danger"><i class="'+config.iconType+" "+icons[config.iconType].warn+'"></i> Aucun certificat de signature détecté</span>':(certSelector+='<table class="table"><thead> <tr> <th></th> <th></th> <th>Nom</th> <th>Émetteur</th> <th>Date d\'expiration</th></tr></thead><tbody class="certificateList">',certsList.forEach(function(element,index){certSelector+=constructCertificateRow(element),favID===element.ID&&(favCertIndex=index)}),certSelector+="</tbody></table>"),certSelector+='<span style="float:right;"><button class="btn btn-warning" id="libersign-cancel"><i class="fa fa-times-circle-o"></i> Annuler</button>',certSelector+='<button class="btn btn-primary" id="libersign-confirm" disabled><i class="fa ls-signature"></i> Signer</button></span>',certSelector+='<span style="display:none;" class="libersign-nofav text-warning"><i class="'+config.iconType+" "+icons[config.iconType].warn+'"></i> Certificat favori introuvable</span></div>',$(this).append(certSelector),$(this).find("tbody > tr").click(clickOnRow),$(this).find("tbody > tr > .libersign-fav").click(clickOnFav),$(this).find("#libersign-cancel").click(clickCancel),$(this).find("#libersign-confirm").click(clickConfirm),$(this).find("#libersign-error-confirm").click(clickErrorMsg),$(this).find(".libersign-fav > span").tooltip(),-1!==favCertIndex){var certLine=$(this).find("tbody > tr").get(favCertIndex);$(certLine).trigger("click");var favLine=$(this).find("tbody > tr > .libersign-fav").get(favCertIndex);$(favLine).trigger("click")}else favID&&certsList.length>0&&$(this).find(".libersign-nofav").show();1===certsList.length&&$(this).find("tbody > tr").trigger("click")},constructCertificateRow=function(cert){var certSelector="",date=new Date(cert.NOTAFTER),day=("0"+date.getDate()).slice(-2),month=("0"+(date.getMonth()+1)).slice(-2),year=date.getFullYear();return certSelector+='<tr><td class="libersign-fav"><span title="Sélectionner en favori" class="'+config.iconType+" "+icons[config.iconType].emptyStar+'"></span></td>',certSelector+='<td style="text-align: center">',-1!=cert.verifiedWith.indexOf("RGS")?certSelector+='<span class="libersign-tooltip label label-success">RGS</span>':-1!=cert.verifiedWith.indexOf("EIDAS")?certSelector+='<span class="libersign-tooltip label label-default">eIDAS</span>':-1!=cert.verifiedWith.indexOf("ADULLACT")?certSelector+='<span class="libersign-tooltip label label-info">Adullact</span>':-1!=cert.verifiedWith.indexOf("LIBRICIEL")&&(certSelector+='<span class="libersign-tooltip label label-primary">Libriciel</span>'),certSelector+="</td><td>"+cert.CN+"</td>",certSelector+="<td>"+cert.ISSUERDN+"</td>",certSelector+="<td>"+day+"/"+month+"/"+year+"</td>",certSelector+="</tr>"},clickOnRow=function(){$(that).find("tbody > tr").removeClass("active-line"),$(that).find("#libersign-confirm").prop("disabled",!1),$(this).addClass("active-line"),selectedCert=certsList[$(this).index()]},clickOnFav=function(){$(that).find("tbody > tr > .libersign-fav > span").removeClass("text-warning").removeClass(icons[config.iconType].star).addClass(icons[config.iconType].emptyStar).attr("data-original-title","Sélectionner en favori"),$(this).find("span").removeClass(icons[config.iconType].emptyStar).addClass("text-warning").addClass(icons[config.iconType].star).attr("data-original-title","Certificat favori"),localStorage.setItem("libersign-fav",certsList[$(this).parent().index()].ID)},clickCancel=function(){$(that).trigger("libersign.cancel")},clickConfirm=function(){handleSignature.apply(that)},clickErrorMsg=function(){$(that).css("text-align","left"),$(that).find("#libersign-error").hide(),$(that).find("#libersign-cert-select").show()},handleError=function(){var that=this;$(that).trigger("libersign.loaded");var htmlError='<div class="text-danger"><i class="'+config.iconType+" "+icons[config.iconType].warn+"\"></i> Chargement de LiberSign impossible. Merci de vérifier l'installation.</div>";return config.installRedirect&&(htmlError+='<a onclick="$(this).trigger(\'libersign.cancel\');" href="'+config.installRedirect+"\" >Aide d'installation</a>"),htmlError},handleExtension=function(){var that=this;return LiberSign.setUpdateUrl(config.extensionUpdateUrl.replace(/\/?$/,"/")),LiberSign.getCertificates().then(function(certs){certsList=certs,handleLoadedCerts.apply(that)})["catch"](function(){$(that).children().hide(),$("#libersign-no-impl").show()}),setTimeout(function(){$(that).trigger("libersign.loaded")},0),'<div  class="libersign-loader"></div><span id="libersign-cert-load" class="text-info">Chargement des certificats disponibles en cours...</span><span id="libersign-signing" style="display:none;" class="text-info">Signature en cours...</span><span id="libersign-signed" style="display:none;" class="text-success">Document(s) signé(s). Envoi des informations de signature au serveur...</span><span id="libersign-error" style="display:none;" class="text-danger"><i class="'+config.iconType+" "+icons[config.iconType].warn+'"></i> Erreur lors de la signature.<br/><span id="libersign-message"></span><br/><button id="libersign-error-confirm" class="btn btn-default"><i class="fa fa-arrow-left"></i> Retour</button></span><span id="libersign-no-impl" style="display:none;" class="text-danger"><i class="'+config.iconType+" "+icons[config.iconType].warn+"\"></i> Installation de LiberSign incomplète. Merci d'installer l'application cliente</span>"},testForLiberSign=function(){return new Promise(function(resolve,reject){LiberSign.getVersion().then(function(){resolve()})["catch"](function(){reject()})})},methods={init:function(){return arguments[0]&&"object"==typeof arguments[0]&&(config=$.extend({},config,arguments[0])),this.filter("div").each(function(){var block=$(this),style=document.createElement("style");if(style.type="text/css",style.innerHTML=css,this.appendChild(style),block.css("text-align","center"),"object"==typeof LiberSign){var that=this;testForLiberSign().then(function(){block.append(handleExtension.apply(that))})["catch"](function(){block.append(handleError.apply(that))})}else if(isOpera||isChrome||!navigator.javaEnabled())block.append(handleError.apply(this));else{var divApplet=document.createElement("div");divApplet.innerHTML=handleApplet.apply(this),this.appendChild(divApplet)}}),this},comment:function(){return 0===arguments.length?new Error("libersign:comment function require 1 argument"):(comment=arguments[0],this)},destroy:function(){this.get(0).innerHTML=""}};$.fn.libersign=function(methodOrOptions){return methods[methodOrOptions]?methods[methodOrOptions].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof methodOrOptions&&methodOrOptions?void $.error("Method "+methodOrOptions+" does not exist on jQuery.libersign"):methods.init.apply(this,[methodOrOptions])}}(jQuery),AboutController.$inject=["$scope","modals"];var HelpExtensionController=function($scope,$modalInstance,title,message){$scope.title=title,$scope.message=message,$scope.navigator=navigator.browserInfo()[0],$scope.installFFExtension=function(){var params={LiberSign:{URL:$scope.properties["parapheur.extension.libersign.firefox.url"],toString:function(){return this.URL}}};InstallTrigger.install(params)},$scope.testExtension=function(){location.reload()},$scope.ok=function(){$modalInstance.close()}},ValidationController=function($scope,$modalInstance,titleModal,setPending,dossiers,bureau,$sce,cache){$scope.dossiers=dossiers,$scope.action={bureauCourant:bureau.id},1===dossiers.length&&($scope.action.annotPub=localStorage[dossiers[0].id+"-annotation-"+bureau.id]),"VISA"===dossiers[0].actionDemandee&&dossiers[0].$consecutiveSteps(),$scope.metaToDefine=[],dossiers.map(function(value){value.listeMetadatas&&($scope.metaToDefine=$scope.metaToDefine.concat(value.listeMetadatas.filter(function(item){return $scope.metaToDefine.indexOf(item)<0})))}),$scope.metaInfos={},cache.metadonnees.list(!1).then(function(list){list.forEach(function(meta){-1!==$scope.metaToDefine.indexOf(meta.id)&&($scope.metaInfos[meta.id]=meta)})}),$scope.metaValues={},$scope.dossiersToSign=[],$scope.signLoaded=!1;var numberSign=0,signLoaded=0,dossiersToVisa=[],dossiersToSeal=[],hasSignature=!1,hasVisa=!1,hasSeal=!1;$scope.progress=0;for(var i=0;i<dossiers.length;i++){var d=dossiers[i];"SIGNATURE"===d.actionDemandee?(numberSign++,d.$getSignInfo({bureauCourant:bureau.id},function(){signLoaded++,$scope.progress++,$scope.checkIfEverySignInfoIsRetrieved()},function(error){$scope.errorMessage=error.data.message}),$scope.dossiersToSign.push(d),$scope.max=$scope.dossiersToSign.length,$scope.lengthToSign=$scope.dossiersToSign.length,hasSignature=!0):"VISA"===d.actionDemandee?(dossiersToVisa.push(d),hasVisa=!0):(dossiersToSeal.push(d),hasSeal=!0)}$scope.titleModal=hasVisa?titleModal:hasSeal?"Cacheter les dossiers":"Signer les dossiers",hasSignature||($scope.progress=0,$scope.max=dossiers.length);var loadSignature=function(){$scope.signObj=[],$scope.signatures=[];for(var i=0;i<$scope.dossiersToSign.length;i++)$scope.signObj.push($scope.dossiersToSign[i].signatureInformations);$scope.readyToSign=!0};$scope.checkIfEverySignInfoIsRetrieved=function(){signLoaded===numberSign&&(loadSignature(),$scope.signLoaded=!0,$scope.progress=0,$scope.max=dossiers.length)},$scope.hasSignature=hasSignature,$scope.liberSignLoading=hasSignature,$scope.loaded=function(){$scope.$apply(function(){$scope.liberSignLoading=!1})},$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){if($scope.metaToDefine.length>0){var toUpdate=$scope.dossiers.length;$scope.dossiers.forEach(function(element){Object.keys($scope.metaValues).map(function(objectKey){element.metadatas["cu:"+objectKey]||(element.metadatas["cu:"+objectKey]={}),element.metadatas["cu:"+objectKey].value=$scope.metaValues[objectKey]}),element.$update($scope.action,function(){toUpdate--,0===toUpdate&&process()},function(error){console.log(error),toUpdate--,0===toUpdate&&process()})})}else process()};var process=function(){if(hasSignature){$scope.action.signatures=$scope.signatures;for(var j=0;j<$scope.dossiersToSign.length;j++){var actionDossier={annotPub:$scope.action.annotPub,annotPriv:$scope.action.annotPriv,bureauCourant:bureau.id,signature:$scope.action.signatures[j]};setPending&&($scope.dossiersToSign[j].locked=!0),$scope.dossiersToSign[j].$signature(actionDossier,function(){$scope.progress++,$scope.progress===$scope.max&&closemodal()})}}for(var i=0;i<dossiersToVisa.length;i++)setPending&&(dossiersToVisa[i].locked=!0),dossiersToVisa[i].$visa($scope.action,function(){$scope.progress++,$scope.progress===$scope.max&&closemodal()});for(var j=0;j<dossiersToSeal.length;j++)setPending&&(dossiersToSeal[j].locked=!0),dossiersToSeal[j].$seal($scope.action,function(){$scope.progress++,$scope.progress===$scope.max&&closemodal()})},closemodal=function(){1===dossiers.length&&(localStorage[dossiers[0].id+"-annotation-"+bureau.id]=""),$modalInstance.close()}},RemorseController=function($scope,$modalInstance,titleModal,setPending,dossiers,bureau){$scope.textModal=titleModal,$scope.dossiers=dossiers,$scope.action={bureauCourant:bureau.id},$scope.max=dossiers.length,$scope.progress=0,$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){for(var i=0;i<dossiers.length;i++)setPending&&($scope.dossiers[i].locked=!0),dossiers[i].$remorse($scope.action,function(){$scope.progress++,$scope.max===$scope.progress&&$modalInstance.close()})}},SecretariatController=function($scope,$modalInstance,titleModal,setPending,dossiers,bureau,$filter){if(bureau.isSecretaire?$scope.textModal=$filter("translate")("confirmationModal.reject_confirmation"):$scope.textModal=titleModal,$scope.dossiers=dossiers,$scope.action={bureauCourant:bureau.id},$scope.showAnnot=!0,1===dossiers.length){var tmpAnnot=localStorage[$scope.dossiers[0].id+"-annotation-"+bureau.id];void 0!==tmpAnnot&&($scope.action.annotPub=tmpAnnot)}$scope.max=dossiers.length,$scope.progress=0,$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){for(var i=0;i<dossiers.length;i++)setPending&&($scope.dossiers[i].locked=!0),dossiers[i].$secretariat($scope.action,function(){$scope.progress++,$scope.max===$scope.progress&&$modalInstance.close()})}},DeleteController=function($scope,$modalInstance,titleModal,setPending,dossiers,bureau){$scope.textModal=titleModal,$scope.dossiers=dossiers,$scope.action={bureauCourant:bureau.id},$scope.max=dossiers.length,$scope.progress=0,$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){for(var i=0;i<dossiers.length;i++)setPending&&($scope.dossiers[i].locked=!0),dossiers[i].$delete($scope.action,function(){$scope.progress++,$scope.max===$scope.progress&&$modalInstance.close()})}},MailController=function($scope,$modalInstance,titleModal,setPending,dossiers,bureau,Dossiers,Mails){$scope.titleModal=titleModal,$scope.dossiers=dossiers,$scope.action={dossiers:dossiers,annexesIncluded:!1,destinataires:"",includeFirstPage:!0,message:"",attachments:[]},$scope.hasAnnexes=!0,$scope.max=dossiers.length,$scope.progress=0,1===dossiers.length&&dossiers[0].$annexes(function(){$scope.action.attachments=angular.copy(dossiers[0].annexes),0===$scope.action.attachments.length&&($scope.hasAnnexes=!1)});for(var objet="",i=0;i<dossiers.length;i++)i>0&&(objet+=" - "),objet+=dossiers[i].title;$scope.action.objet=objet;var splitDestinataires=function(){$scope.action.destinataires=$scope.action.destinataires.split(";")};$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){splitDestinataires(),Mails.dossiers({},$scope.action),$modalInstance.close()}},MailSecController=function($scope,$modalInstance,titleModal,setPending,dossiers,bureau){$scope.titleModal=titleModal,$scope.dossiers=dossiers;for(var obj="",i=0;i<dossiers.length;i++)i>0&&(obj+="; "),obj+=dossiers[i].title;$scope.action={objet:obj,bureauCourant:bureau.id,destinataires:"",destinatairesCC:"",destinatairesCCI:"",showpass:!1,password:"",annexesIncluded:!1,includeFirstPage:!0},dossiers[0].$secureMailTemplate(function(data){$scope.action.message=angular.copy(data.secureMailTemplate)}),$scope.hasAnnexes=!0,1===dossiers.length&&dossiers[0].$annexes(function(){$scope.action.attachments=angular.copy(dossiers[0].annexes),0===$scope.action.attachments.length&&($scope.hasAnnexes=!1)}),$scope.max=dossiers.length,$scope.progress=0;var splitDestinataires=function(){$scope.action.destinataires=$scope.action.destinataires.split(";"),$scope.action.destinatairesCC=$scope.action.destinatairesCC.split(";"),$scope.action.destinatairesCCI=$scope.action.destinatairesCCI.split(";")};$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){splitDestinataires();for(var i=0;i<dossiers.length;i++)setPending&&($scope.dossiers[i].locked=!0),dossiers[i].$mailsec($scope.action,function(){$scope.progress++,$scope.max===$scope.progress&&$modalInstance.close()})}},ForceMailsecController=function($scope,$modalInstance,infos,bureau,dossier,usSpinnerService){$scope.infos=infos,$scope.action={annotation:""};var tmpAnnot=localStorage[dossier.id+"-annotation-"+bureau.id];void 0!==tmpAnnot&&($scope.action.annotPub=tmpAnnot),$scope.ok=function(){usSpinnerService.spin("spinner");var actionDossier={annotPub:$scope.action.annotation,annotPriv:"",bureauCourant:bureau.id};dossier.locked=!0,dossier.$visa(actionDossier,function(){usSpinnerService.stop("spinner"),$modalInstance.close()})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}},MailSecInfosController=function($scope,$modalInstance,titleModal,setPending,dossiers,bureau,$modal,modals,configuration,usSpinnerService,PastellMailsec,PastellConnector,$timeout,$route){$scope.titleModal=titleModal,$scope.dossier=dossiers[0],$scope.updating=!1,$scope.action={bureauCourant:bureau.id};var updatePastellMailsecEvents=function(callback){PastellConnector.infos({id:$scope.dossier.id},function(result){PastellMailsec.events({id:result.serverId,idDoc:result.mailId},function(r2){var events=r2.filter(function(v){return"5"===v.type}),sentDateEvent=r2.find(function(e){return"Le document a été envoyé"===e.message});$scope.dossier.infosMailSec={statut:"Envoyé",envoi:sentDateEvent.date,documentId:sentDateEvent.documentId,details:[]};var sendedMails={};events.forEach(function(value){if("envoi"===value.action){var mail=value.message.substring(23,value.message.length);sendedMails[mail]={email:mail,confirmed:!1,confirmationDate:void 0}}}),events.forEach(function(value){if("Consulté"===value.action){$scope.dossier.infosMailSec.statut="Partiellement confirmé";var mail=value.message.split(" ")[0];void 0!==sendedMails[mail]&&(sendedMails[mail].confirmed=!0,sendedMails[mail].confirmationDate=value.date)}}),$.each(sendedMails,function(index,value){$scope.dossier.infosMailSec.details.push(value)}),"reception"===r2[0].action&&($scope.dossier.infosMailSec.statut="confirmé",$timeout(function(){location.reload()},3e3)),callback&&callback()})},function(){callback&&callback(),$scope.error=!0})};"MAILSEC"===$scope.dossier.actionDemandee?$scope.dossier.$infosMailSec():"MAILSECPASTELL"===$scope.dossier.actionDemandee&&updatePastellMailsecEvents(),$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.update=function(){usSpinnerService.spin("spinner"),$scope.updating=!0,"MAILSEC"===$scope.dossier.actionDemandee?$scope.dossier.$infosMailSec(function(){usSpinnerService.stop("spinner"),$scope.updating=!1}):"MAILSECPASTELL"===$scope.dossier.actionDemandee&&updatePastellMailsecEvents(function(){usSpinnerService.stop("spinner"),$scope.updating=!1})},$scope.force=function(){$scope.animate=!1;var confirmation=$modal.open({templateUrl:"partials/modals/confirmForceModal.html",controller:ForceMailsecController,resolve:{infos:function(){return $scope.dossier.infosMailSec.details},bureau:function(){return bureau},dossier:function(){return dossiers[0]}}});confirmation.result.then(function(){$modalInstance.close()},function(){$scope.animate=!0})},$scope.remorse=function(){var title="Confirmer",message="Voulez-vous réellement annuler la transaction ?";"MAILSECPASTELL"===$scope.dossier.actionDemandee&&(title="Confirmer l'interruption de la récupération de l'état",message="Voulez-vous réellement interrompre la récupération de l'état du dossier ? Il vous sera par la suite possible de faire un nouvel envoi."),$scope.animate=!1,modals.launch("SimpleConfirmation",{title:title,message:message,ctrl:BaseController},function(){dossiers[0].$remorse({bureauCourant:bureau.id},function(){$modalInstance.close()})},function(){$scope.animate=!0})},$scope.ok=function(){for(var i=0;i<dossiers.length;i++)setPending&&($scope.dossiers[i].locked=!0),dossiers[i].$rejet($scope.action,function(){$scope.progress++,$scope.max===$scope.progress&&$modalInstance.close()})}},RejectController=function($scope,$modalInstance,titleModal,setPending,dossiers,bureau){if($scope.titleModal=titleModal,$scope.dossiers=dossiers,$scope.action={bureauCourant:bureau.id},1===dossiers.length){var tmpAnnot=localStorage[$scope.dossiers[0].id+"-annotation-"+bureau.id];void 0!==tmpAnnot&&($scope.action.annotPub=tmpAnnot)}$scope.max=dossiers.length,$scope.progress=0,$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){for(var i=0;i<dossiers.length;i++)setPending&&($scope.dossiers[i].locked=!0),dossiers[i].$rejet($scope.action,function(){$scope.progress++,$scope.max===$scope.progress&&$modalInstance.close()})}},AvisCompController=function($scope,$modalInstance,titleModal,setPending,dossiers,bureau,Bureaux){if($scope.titleModal=titleModal,$scope.dossiers=dossiers,$scope.action={bureauCourant:bureau.id,bureauCible:""},$scope.view={bureauCible:void 0},1===dossiers.length){var tmpAnnot=localStorage[$scope.dossiers[0].id+"-annotation-"+bureau.id];void 0!==tmpAnnot&&($scope.action.annotPub=tmpAnnot)}$scope.bureau=new Bureaux(bureau).$associes(function(data){$scope.bureau=data}),$scope.max=dossiers.length,$scope.progress=0,$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){for(var i=0;i<dossiers.length;i++)setPending&&($scope.dossiers[i].locked=!0),$scope.action.bureauCible=$scope.view.bureauCible.id,dossiers[i].$avis($scope.action,function(){$scope.progress++,$scope.max===$scope.progress&&$modalInstance.close()})}},CachetCompController=function($scope,$modalInstance,titleModal,setPending,dossiers,bureau,Bureaux){if($scope.titleModal=titleModal,$scope.dossiers=dossiers,$scope.action={bureauCourant:bureau.id},1===dossiers.length){var tmpAnnot=localStorage[$scope.dossiers[0].id+"-annotation-"+bureau.id];void 0!==tmpAnnot&&($scope.action.annotPub=tmpAnnot)}$scope.max=dossiers.length,$scope.progress=0,$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){for(var i=0;i<dossiers.length;i++)setPending&&($scope.dossiers[i].locked=!0),dossiers[i].$seal($scope.action,function(){$scope.progress++,$scope.max===$scope.progress&&$modalInstance.close()})}},ChangeSigController=function($scope,$modalInstance,titleModal,setPending,dossiers,bureau,Bureaux){if($scope.primaryIcon="fa-share",$scope.primaryLabel="Transférer",$scope.titleModal=titleModal,$scope.dossiers=dossiers,$scope.action={bureauCourant:bureau.id,bureauCible:""},$scope.view={bureauCible:void 0},1===dossiers.length){var tmpAnnot=localStorage[$scope.dossiers[0].id+"-annotation-"+bureau.id];void 0!==tmpAnnot&&($scope.action.annotPub=tmpAnnot)}$scope.bureau=new Bureaux(bureau).$associes(function(data){$scope.bureau=data}),$scope.max=dossiers.length,$scope.progress=0,$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){for(var i=0;i<dossiers.length;i++)setPending&&($scope.dossiers[i].locked=!0),$scope.action.bureauCible=$scope.view.bureauCible.id,dossiers[i].$transfertSignature($scope.action,function(){$scope.progress++,$scope.max===$scope.progress&&$modalInstance.close()})}},ChangeVisaController=function($scope,$modalInstance,titleModal,setPending,dossiers,bureau,Bureaux){if($scope.primaryIcon="fa-share",$scope.primaryLabel="Transférer",$scope.titleModal=titleModal,$scope.dossiers=dossiers,$scope.action={bureauCourant:bureau.id,bureauCible:""},$scope.view={bureauCible:void 0},1===dossiers.length){var tmpAnnot=localStorage[$scope.dossiers[0].id+"-annotation-"+bureau.id];void 0!==tmpAnnot&&($scope.action.annotPub=tmpAnnot)}$scope.bureau=new Bureaux(bureau).$associes(function(data){$scope.bureau=data}),$scope.max=dossiers.length,$scope.progress=0,$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){for(var i=0;i<dossiers.length;i++)setPending&&($scope.dossiers[i].locked=!0),$scope.action.bureauCible=$scope.view.bureauCible.id,"VISA"===dossiers[i].actionDemandee?dossiers[i].$transfertVisa($scope.action,function(){$scope.progress++,$scope.max===$scope.progress&&$modalInstance.close()}):"SIGNATURE"===dossiers[i].actionDemandee&&dossiers[i].$transfertSignature($scope.action,function(){$scope.progress++,$scope.max===$scope.progress&&$modalInstance.close()})}},ArchivageController=function($scope,$modalInstance,titleModal,setPending,dossiers,bureau){$scope.titleModal=titleModal,$scope.dossiers=dossiers,$scope.archivesNames=[],$scope.archivesAnnexes=[],$scope.annexesToInclude=[],$scope.checkboxAnnexes=[],$scope.annexesToInclude=[],$scope.setAllCheck=function(toSet){if(1===$scope.dossiers.length){$scope.checkboxAnnexes.length=0;for(var i=0;i<$scope.dossiers[0].annexes.length;i++)$scope.checkboxAnnexes[i]=toSet}else for(var j=0;j<$scope.dossiers.length;j++)$scope.checkboxAnnexes[j]=toSet},$scope.masterCheckbox=!1,$scope.$watch("checkboxAnnexes",function(){$scope.masterCheckbox=-1===$.inArray(!1,$scope.checkboxAnnexes)&&$scope.checkboxAnnexes.length>0,$scope.annexesToInclude=[];for(var i=0;i<$scope.checkboxAnnexes.length;i++)$scope.checkboxAnnexes[i]&&1===$scope.dossiers.length&&$scope.annexesToInclude.push($scope.dossiers[0].annexes[i].id)},!0),1===dossiers.length?dossiers[0].$annexes().then(function(){$scope.setAllCheck(!1)}):$scope.setAllCheck(!1),$scope.max=dossiers.length,$scope.progress=0,$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){for(var oneDossier=1===dossiers.length,i=0;i<dossiers.length;i++){setPending&&($scope.dossiers[i].locked=!0);var a={bureauCourant:bureau.id,name:$scope.archivesNames[i]||$scope.dossiers[i].title+".pdf"
};oneDossier?a.annexes=$scope.annexesToInclude:a.annexesIncluded=$scope.checkboxAnnexes[i],dossiers[i].$archive(a,function(){$scope.progress++,$scope.max===$scope.progress&&$modalInstance.close()})}}},PrintController=function($scope,$modalInstance,titleModal,setPending,dossiers){$scope.titleModal=titleModal,$scope.dossiers=dossiers,$scope.action={},$scope.annexesToInclude=[],$scope.checkboxAnnexes=[],$scope.includeFirstPage=!0,$scope.setAllCheck=function(toSet){if(1===$scope.dossiers.length){$scope.checkboxAnnexes.length=0;for(var i=0;i<$scope.dossiers[0].annexes.length;i++)$scope.checkboxAnnexes[i]=toSet}},$scope.$watch("checkboxAnnexes",function(){$scope.annexesToInclude=[];for(var i=0;i<$scope.checkboxAnnexes.length;i++)$scope.checkboxAnnexes[i]&&$scope.annexesToInclude.push($scope.dossiers[0].annexes[i].id)},!0),dossiers[0].$annexes().then(function(){$scope.setAllCheck(!1)}),$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){$modalInstance.close()}},JournalController=function($scope,$modalInstance,titleModal,setPending,dossiers,$sce){$scope.titleModal=titleModal,$scope.dossiers=dossiers,$scope.dossiers[0].events||$scope.dossiers[0].$evenements(function(){for(var i=0;i<$scope.dossiers[0].events.length;i++)$scope.dossiers[0].events[i].annotation=$sce.trustAsHtml($scope.dossiers[0].events[i].annotation.replace(/\n/g,"<br/>"))}),$scope.ok=function(){$modalInstance.close()}},PropertiesController=function($scope,$modalInstance,titleModal,setPending,dossiers){$scope.titleModal=titleModal,$scope.nodes=dossiers,$scope.nodes[0].properties||$scope.nodes[0].$properties(),$scope.ok=function(){$modalInstance.close()}},RazController=function($scope,$modalInstance,titleModal,setPending,dossiers,bureau){$scope.textModal=titleModal,$scope.dossiers=dossiers,$scope.action={bureauCourant:bureau.id},$scope.max=dossiers.length,$scope.progress=0,$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){for(var i=0;i<dossiers.length;i++)setPending&&($scope.dossiers[i].locked=!0),dossiers[i].$raz($scope.action,function(){$scope.progress++,$scope.max===$scope.progress&&$modalInstance.close()})}},MoveController=function($scope,$modalInstance,titleModal,setPending,dossiers,Bureaux){$scope.titleModal=titleModal,$scope.dossiers=dossiers,$scope.bureaux=Bureaux.listWithCache(),$scope.showSpinner=!1,$scope.action={bureau:""},$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){$scope.showSpinner=!0,setPending&&($scope.dossiers[0].locked=!0),dossiers[0].$transfert({bureau:$scope.action.bureau.id},function(){$scope.showSpinner=!1,dossiers[0].parent=$scope.action.bureau.id,$modalInstance.close()})}},BaseController=function($scope,$modalInstance,title,message){$scope.title=title,$scope.message=message,$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){$modalInstance.close()}},InputController=function($scope,$modalInstance,title,message){$scope.title=title,$scope.message=message,$scope.ctrl={value:""},$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){$modalInstance.close($scope.ctrl)}},AskPasswordController=function($scope,$modalInstance,title,message){$scope.title=title,$scope.message=message,$scope.newPass={},$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){$modalInstance.close($scope.newPass.newOne)}},TdTHeliosController=function($scope,$modalInstance,titleModal,setPending,dossiers,bureau){if($scope.titleModal=titleModal,$scope.dossiers=dossiers,$scope.action={bureauCourant:bureau.id},1===dossiers.length){var tmpAnnot=localStorage[$scope.dossiers[0].id+"-annotation-"+bureau.id];void 0!==tmpAnnot&&($scope.action.annotPub=tmpAnnot)}$scope.progress=0,$scope.max=dossiers.length,$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){for(var i=0;i<$scope.dossiers.length;i++)setPending&&($scope.dossiers[i].locked=!0),$scope.dossiers[i].$tdtHelios($scope.action,function(){$scope.progress++,$scope.progress===$scope.max&&$modalInstance.close()})}},TdTActesController=function($scope,Connecteurs,$modalInstance,titleModal,setPending,dossiers,bureau){if($scope.titleModal=titleModal,$scope.dossier=dossiers[0],$scope.action={bureauCourant:bureau.id},$scope.timestamp=(new Date).getTime(),1===dossiers.length){var tmpAnnot=localStorage[dossiers[0].id+"-annotation-"+bureau.id];void 0!==tmpAnnot&&($scope.action.annotPub=tmpAnnot)}$scope.actesInfo=Connecteurs.info(function(){$scope.orderedClassification=[],angular.forEach($scope.actesInfo.classification,function(value,key){1!==key.length&&this.push({group:key.split("-")[0]+" "+$scope.actesInfo.classification[key.split("-")[0]],value:value,key:key})},$scope.orderedClassification)}),$scope.$watch("action.numero",function(newValue){newValue&&($scope.action.numero=newValue.toUpperCase().replace(/[^A-Z0-9_\s]/g,"").substring(0,15))}),$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){setPending&&($scope.dossier.locked=!0),$scope.action.dateActe=new Date($scope.action.dateActe).getTime(),$scope.dossier.$tdtActes($scope.action,function(){$modalInstance.close()})}},NotificationsController=function($scope,Connecteurs,$modalInstance,titleModal,setPending,dossiers,bureau,Bureaux){$scope.titleModal=titleModal,$scope.dossier=dossiers[0],$scope.dossier.$notifications(),$scope.bureau=new Bureaux(bureau).$associes(function(data){$scope.bureau=data}),$scope.addToNotifications=function(bureauId){$scope.dossier.notifications.unshift({id:bureauId,mandatory:!1})},$scope.removeFromNotifications=function(notif){for(var i=0;i<$scope.dossier.notifications.length;i++)$scope.dossier.notifications[i].id===notif.id&&$scope.dossier.notifications.splice(i,1)},$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){$scope.dossier.$setNotifications({notifications:$scope.dossier.notifications},function(){$modalInstance.close()})}},MandatoryReadController=function($scope,Connecteurs,$modalInstance,titleModal,setPending,dossiers){$scope.titleModal=titleModal,$scope.dossier=dossiers[0],$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.getFileExtIcon=function(filename){var ext=/^.+\.([^.]+)$/.exec(filename);ext=null===ext?"":ext[1].toLowerCase();var iconName="fa-";switch(ext){case"pdf":iconName+="file-pdf-o";break;case"zip":iconName+="file-archive-o";break;case"xml":iconName+="file-code-o";break;case"png":case"jpg":case"jpeg":case"gif":iconName+="file-image-o";break;case"pptx":case"ppt":case"odp":iconName+="file-powerpoint-o";break;case"xlsx":case"xls":case"ods":iconName+="file-excel-o";break;case"docx":case"doc":case"odt":case"rtf":case"txt":case"htm":case"html":iconName+="file-word-o"}return iconName},$scope.ok=function(){$scope.dossier.isRead=!0,$scope.dossier.hasRead=!0,$scope.dossier.actions.push("SIGNATURE"),$scope.dossier.actions.push("AVIS_COMPLEMENTAIRE"),$scope.dossier.actions.push("TRANSFERT_ACTION"),$modalInstance.close()}},SignPapierConfirmController=function($scope,Connecteurs,$modalInstance,titleModal,setPending,dossiers,bureau){$scope.titleModal=titleModal,$scope.dossier=dossiers[0];var action={bureauCourant:bureau.id};$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){$scope.dossier.$signPapier(action,function(){$scope.dossier.isSignPapier=!0,$modalInstance.close()})}},SignPapierController=function($scope,$modalInstance,titleModal,setPending,dossiers,bureau){if($scope.titleModal=titleModal,$scope.dossiers=dossiers,$scope.action={bureauCourant:bureau.id},1===dossiers.length){var tmpAnnot=localStorage[$scope.dossiers[0].id+"-annotation-"+bureau.id];void 0!==tmpAnnot&&($scope.action.annotPub=tmpAnnot)}$scope.max=dossiers.length,$scope.progress=0,$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){for(var i=0;i<dossiers.length;i++)setPending&&($scope.dossiers[i].locked=!0),dossiers[i].$visa($scope.action,function(){$scope.progress++,$scope.max===$scope.progress&&$modalInstance.close()})}},ChainController=function($scope,$modalInstance,titleModal,setPending,dossiers,bureau,Types,navigationService,Dossiers,Metadonnees,Circuits,Bureaux,$http,configuration){$scope.titleModal=titleModal,$scope.dossiers=dossiers,$scope.dossier=dossiers[0],$scope.action={bureauCourant:bureau.id,type:$scope.dossier.type,sousType:$scope.dossier.sousType,metadatas:{},acteursVariables:[]},$scope.max=dossiers.length,$scope.progress=0,$scope.typo=Types.queryWithBureau({bureau:navigationService.bureauCourant.id}),$scope.upgrading=!1,$scope.getActionTooltip=function(etape){var tooltip="Fin de circuit";switch(etape.actionDemandee.toLowerCase()){case"visa":tooltip="Visa";break;case"signature":tooltip="Signature";break;case"mailsecpastell":tooltip="Mail sécurisé Pastell";break;case"mailsec":tooltip="Mail sécurisé S²LOW";break;case"tdt":tooltip="Télé-transmission";break;case"cachet":tooltip="Cachet serveur"}return tooltip},$scope.getIconClass=function(actionDemandee){var classes="";switch(actionDemandee.toLowerCase()){case"visa":classes+=" fa-check-square-o";break;case"signature":classes+=" ls-signature";break;case"mailsecpastell":classes+=" fa-envelope-o";break;case"mailsec":classes+=" fa-envelope";break;case"tdt":classes+=" fa-cloud-upload";break;case"cachet":classes+=" ls-stamp";break;default:classes+=" fa-flag-checkered"}return classes},$scope.$watch("action.sousType",function(){$scope.action.sousType?$scope.circuit=Circuits.getWithTypo({id:$scope.action.type,action:$scope.action.sousType,bureau:navigationService.bureauCourant.id},function(){angular.copy(new Bureaux(navigationService.bureauCourant),navigationService.bureauCourant),navigationService.bureauCourant.$associes(function(){for(var indexVariable=0,i=0;i<$scope.circuit.etapes.length;i++){var etape=$scope.circuit.etapes[i];"VARIABLE"===etape.transition?($scope.action.acteursVariables[i]=$scope.dossier.acteursVariables[indexVariable]||null,indexVariable++):$scope.action.acteursVariables[i]=null}$scope.metaInfos=Metadonnees.getWithTypo({id:$scope.action.type,action:$scope.action.sousType},function(){for(var i=0;i<$scope.metaInfos.length;i++){var meta=$scope.metaInfos[i],obj={};obj[meta.id]=meta,$scope.dossier.metadatas[meta.id]&&$scope.dossier.metadatas[meta.id].value.length>0?obj[meta.id].value=$scope.dossier.metadatas[meta.id].value:obj[meta.id]["default"]?obj[meta.id].value=obj[meta.id]["default"]:obj[meta.id].value="",angular.extend($scope.action.metadatas,obj)}$scope.circuit.hasSelectionScript&&$scope.updateCircuit()})}),"XAdES/enveloped"===$scope.circuit.sigFormat&&($scope.action.xPathSignature=".")}):($scope.circuit={},$scope.metaInfos=[])}),$scope.updateCircuit=function(callback){$scope.errorMessage=void 0,$scope.dossier.$merge($scope.action,function(){$scope.circuit=Dossiers.getCircuitWithTypo({id:$scope.dossier.id,type:$scope.action.type,sousType:$scope.action.sousType,bureauCourant:navigationService.bureauCourant.id},function(){"function"==typeof callback&&callback()},function(error){$scope.errorMessage=error.data.message,$scope.circuit.hasSelectionScript=!0})})},$scope.metaHasChange=!1,$scope.valuesMetaUndefined=function(idMeta){$scope.action.metadatas[idMeta].value=""===$scope.action.metadatas[idMeta].value?void 0:$scope.action.metadatas[idMeta].value},$scope.metaChanged=function(){$scope.metaHasChange=!0},$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){$scope.updateCircuit(function(){for(var i=0;i<dossiers.length;i++)setPending&&($scope.dossiers[i].locked=!0),$http.post(configuration.context+"/proxy/alfresco/parapheur/dossiers/"+$scope.dossiers[i].id+"/chain",$scope.action).then(function(){$scope.progress++,$scope.max===$scope.progress&&$modalInstance.close()})})}};ApercuController.$inject=["$scope","navigationService","Dossiers","Annotations","configuration","preferences","$sce","$location","modals","utils","$timeout","bestBureau","$http","$filter","viewService"],ArchivesController.$inject=["$scope","Metadonnees","Types","Archives","navigationService","viewService","preferences","utils","modals","$filter"],BureauController.$inject=["$scope","$rootScope","navigationService","prefs","bureaux"],DashboardController.$inject=["$rootScope","$scope","Metadonnees","Types","Dossiers","Delegations","navigationService","viewService","preferences","$location","modals","utils","configuration","corbeilleFromMail","$timeout","$filter","cache"];var DelegationController=function($scope,$location,$timeout,Delegations,Bureaux,navigationService){if($.isEmptyObject(navigationService.bureauCourant))return void $location.path("/bureaux");var timestamp=(new Date).getTime();$scope.bureau=new Bureaux(navigationService.bureauCourant),$scope.bureau.$associes(function(data){$scope.bureau=data}),$scope.searchObj={},$scope.saved=!1,$scope.loaded=!1;var handleDelegationView=function(){$scope.delegationEnabled=angular.copy(!!$scope.selectedDelegation.idCible),$scope.delegationActivated=!!$scope.selectedDelegation.idCible;var debut=$scope.selectedDelegation["date-debut-delegation"]?$scope.selectedDelegation["date-debut-delegation"]:0,fin=$scope.selectedDelegation["date-fin-delegation"]?$scope.selectedDelegation["date-fin-delegation"]:Number.MAX_VALUE;timestamp>debut&&fin>timestamp?$scope.when="present":timestamp>fin?$scope.when="past":$scope.when="future"};$scope.selectedDelegation=Delegations.get({id:$scope.bureau.id},function(){handleDelegationView(),$scope.selectedDelegation.idCible?$scope.selectedBureauForDelegation={id:$scope.selectedDelegation.idCible,title:$scope.selectedDelegation.titreCible}:$scope.selectedBureauForDelegation=void 0,$scope.selectedDelegation["date-debut-delegation"]||($scope.selectedDelegation["date-debut-delegation"]=Date.now()),$scope.loaded=!0}),$scope.checkDelegationPossible=function(checked,id){var indexInArray=$scope.bureau["delegations-possibles"].indexOf(id);checked&&-1==indexInArray?$scope.bureau["delegations-possibles"].push(id):checked||-1==indexInArray||$scope.bureau["delegations-possibles"].splice(indexInArray,1)},$scope.checkDelegation=function(item){if(item&&($scope.selectedDelegation.idCible=item.id),$scope.selectedDelegation.idCible&&($scope.selectedDelegation["date-debut-delegation"]||$scope.selectedDelegation["date-fin-delegation"])){if($scope.selectedDelegation["date-fin-delegation"]){var fin=new Date($scope.selectedDelegation["date-fin-delegation"]);$scope.selectedDelegation["date-fin-delegation"]=new Date(fin.getFullYear(),fin.getMonth(),fin.getDate(),23,59,0,0).getTime()}$scope.selectedDelegation.$willItLoop()}},$scope.save=function(){$scope.selectedDelegation,Delegations.update({id:$scope.bureau.id},$scope.selectedDelegation,function(){$scope.saved=!0,$timeout(function(){$scope.saved=!1},5e3),handleDelegationView()})}};DelegationController.$inject=["$scope","$location","$timeout","Delegations","Bureaux","navigationService"],LogoutController.$inject=["navigationService","$location"],NavbarController.$inject=["$rootScope","$route","$location","configuration","navigationService","preferences","viewService","notifications","utils","$http","$timeout","$filter"],MainController.$inject=["$rootScope"],NouveauController.$inject=["$scope","navigationService","configuration","Dossiers","Types","Circuits","Metadonnees","$location","$sce","modals","$timeout","$filter"],OptionsController.$inject=["$scope","$modal","$sce","$rootScope","preferences","configuration","viewService","Bureaux","Users","prefs","$translate"];var ColorationController=function($scope,preferences,$modalInstance,enabledColumns){$scope.tmp={},$scope.properties=enabledColumns;var initTmp=function(){$scope.tmp={value:"",comparator:"="}};initTmp(),$scope.coloration={test:[]},$scope.removeCondition=function(index){$scope.coloration.test.splice(index,1)},$scope.addToTest=function(){$scope.coloration.test.push(angular.copy($scope.tmp)),initTmp()},$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){$modalInstance.close($scope.coloration)}};StatsController.$inject=["$scope","Audits","Bureaux","$filter","Types"],AvanceAdminController.$inject=["$scope","Connecteurs","Horodate","Attestation","Modeles","Metadonnees","Calques","SubCalques","modals","cache","$filter","Cachets","$http","configuration","PastellMailsec","PastellConnector"];var EDIT=0,NEW=1;BureauxAdminController.$inject=["$scope","Bureaux","Delegations","utils","$modal","modals","$filter","cache"];var EditBureauCtrl=function($scope,$filter,$modalInstance,Delegations,cache,type,titleModal,selfobj){$scope.titleModal=titleModal,$scope.bureaux=selfobj.list,$scope.selectedBureau=selfobj.selected,$scope.orderedBureaux=selfobj.ordered,$scope.metadatas=selfobj.metadatas,$scope.queryForFilter=function(str){return function(obj){return selfobj.bureauFilter(obj,str)}},$scope.searchObj={},$scope.hasSearchUser=!1,$scope.editedOrderedBureaux=[],$scope.editedBureau={},$scope.selectedDelegation={},type===EDIT&&($scope.selectedDelegation=new Delegations($scope.selectedBureau.delegation),$scope.selectedDelegation["date-debut-delegation"]||($scope.selectedDelegation["date-debut-delegation"]=Date.now()),$scope.delegationEnabled=angular.copy(!!$scope.selectedDelegation.idCible),$scope.delegationActivated=!!$scope.selectedDelegation.idCible,$scope.delegationEnabled&&($scope.selectedBureauForDelegation={id:$scope.selectedDelegation.idCible,title:$scope.selectedDelegation.titreCible}),$scope.selectedDelegation["deleguer-presents"]=!0),$scope.type=type,angular.copy($scope.selectedBureau,$scope.editedBureau,!1),angular.copy($scope.orderedBureaux,$scope.editedOrderedBureaux,!1),$scope.bureauxExceptCurrent=angular.copy(selfobj.list);var i=$scope.bureauxExceptCurrent.length;if($scope.selectedBureau.id)for(;i--;)$scope.bureauxExceptCurrent[i].id===$scope.selectedBureau.id&&$scope.bureauxExceptCurrent.splice(i,1);$scope.listHandler={bureaux:[],subList:[],subListDelegationPossible:[],page:0,maxSize:10,total:0,init:function(){this.search("")},search:function(toSearch){this.subList=[],this.page=0,this.bureaux=$filter("filter")($scope.bureaux,{name:toSearch}),this.total=this.bureaux.length,this.getNewList()},pagine:function(toAddToPage){this.page+=toAddToPage,this.getNewList()},getNewList:function(){this.subListDelegationPossible=$filter("notSameId")(this.bureaux.slice(this.page*this.maxSize,this.page*this.maxSize+this.maxSize),$scope.editedBureau.id),this.subList=$filter("notChild")(this.subListDelegationPossible,$scope.editedBureau.id)},selectSuperieur:function(b){b?$scope.editedBureau.hierarchie=b.id:$scope.editedBureau.hierarchie=null,$scope.updateProfondeur(),this.getNewList()},selectDelegationPossible:function(b){$scope.editedBureau["delegations-possibles"].push(b.id),this.getNewList()},unselectDelegationPossible:function(id){var indexInArray=$scope.editedBureau["delegations-possibles"].indexOf(id);~indexInArray&&$scope.editedBureau["delegations-possibles"].splice(indexInArray,1),this.getNewList()},selectAllResults:function(){for(var filteredBureaux=$filter("notSameId")($filter("notSameId")(this.bureaux,$scope.editedBureau["delegations-possibles"]),$scope.editedBureau.id),i=0;i<filteredBureaux.length;i++)$scope.editedBureau["delegations-possibles"].push(filteredBureaux[i].id);this.getNewList()},unselectAll:function(){$scope.editedBureau["delegations-possibles"]=[],this.getNewList()}},$scope.editedBureau.id?$scope.editedBureau.$associesAsAdmin().then(function(data){$scope.editedBureau["delegations-possibles"]=data["delegations-possibles"],$scope.listHandler.init()}):$scope.listHandler.init();var users=[];$scope.listUsersHandler={users:[],subList:[],page:0,maxSize:10,total:0,init:function(){this.search("")},search:function(toSearch){this.subList=[],this.page=0,this.users=$filter("orderBy")($filter("filter")(users,toSearch),"lastName"),this.total=this.users.length,this.getNewList()},pagine:function(toAddToPage){this.page+=toAddToPage,this.getNewList()},getNewList:function(){this.subList=this.users.slice(this.page*this.maxSize,this.page*this.maxSize+this.maxSize)}},cache.users.list().then(function(list){users=list,$scope.listUsersHandler.init()}),$scope.userSelected=function(item){var toReturn=!1;return angular.forEach($scope.editedBureau.proprietaires,function(value,key){value.username===item.username&&(toReturn=!0)}),angular.forEach($scope.editedBureau.secretaires,function(value,key){value.username===item.username&&(toReturn=!0)}),toReturn},$scope.checkDelegationPossible=function(checked,id){var indexInArray=$scope.editedBureau["delegations-possibles"].indexOf(id);checked&&-1==indexInArray?$scope.editedBureau["delegations-possibles"].push(id):checked||-1==indexInArray||$scope.editedBureau["delegations-possibles"].splice(indexInArray,1)},$scope.removeFromProperty=function(array,id){var indexInArray=array.indexOf(id);~indexInArray&&array.splice(indexInArray,1)},$scope.selectAllDelagationsPossibles=function(value,filter){var listIds=[],objects=$filter("filter")($scope.bureaux,filter);if(filter){listIds=$scope.editedBureau["delegations-possibles"];for(var i=0;i<objects.length;i++){var index=listIds.indexOf(objects[i].id);~index?value||listIds.splice(index,1):value&&$scope.editedBureau.id!==objects[i].id&&(listIds[listIds.length]=objects[i].id)}}else if(value)for(var j=0;j<objects.length;j++)$scope.editedBureau.id!==objects[j].id&&(listIds[listIds.length]=objects[j].id);$scope.editedBureau["delegations-possibles"]=listIds},$scope.checkMetadataVisibility=function(event,id){var checked=event.currentTarget.checked,indexInArray=$scope.editedBureau["metadatas-visibility"].indexOf(id);checked&&-1==indexInArray?$scope.editedBureau["metadatas-visibility"].push(id):checked||-1==indexInArray||$scope.editedBureau["metadatas-visibility"].splice(indexInArray,1)},$scope.selectAllMetadatas=function(){$scope.editedBureau["metadatas-visibility"]=[];for(var i=0;i<$scope.metadatas.length;i++)$scope.editedBureau["metadatas-visibility"].push($scope.metadatas[i].id)},$scope.unselectAllMetadatas=function(){$scope.editedBureau["metadatas-visibility"]=[]},$scope.changeHabilitations=function(){$scope.editedBureau.hab_enabled?($scope.editedBureau.hab_enchainement=!0,$scope.editedBureau.hab_archivage=!1,$scope.editedBureau.hab_traiter=!0,$scope.editedBureau.hab_transmettre=!0,$scope.editedBureau.hab_secretariat=$scope.editedBureau.secretaires.length>0):($scope.editedBureau.hab_archivage=void 0,$scope.editedBureau.hab_traiter=void 0,$scope.editedBureau.hab_transmettre=void 0,$scope.editedBureau.hab_enchainement=void 0,$scope.editedBureau.hab_secretariat=void 0)},$scope.updateProfondeur=function(){null===$scope.editedBureau.hierarchie?$scope.editedBureau.profondeur=0:$scope.editedBureau.profondeur=$filter("filter")($scope.bureaux,{id:$scope.editedBureau.hierarchie})[0].profondeur+1},$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.isSaving=!1,$scope.ok=function(){$scope.isSaving=!0,selfobj.update($scope.editedBureau,$scope.selectedDelegation,function(){$scope.isSaving=!1,$modalInstance.close({editedBureau:$scope.editedBureau,selectedDelegation:$scope.selectedDelegation})})},$scope.checkDelegation=function(item){if(item&&($scope.selectedDelegation.idCible=item.id),$scope.selectedDelegation["date-fin-delegation"]){var fin=new Date($scope.selectedDelegation["date-fin-delegation"]);$scope.selectedDelegation["date-fin-delegation"]=new Date(fin.getFullYear(),fin.getMonth(),fin.getDate(),23,59,0,0).getTime()}$scope.selectedDelegation.idCible&&($scope.selectedDelegation["date-fin-delegation"]||$scope.selectedDelegation["date-debut-delegation"])&&$scope.selectedDelegation.$willItLoop()}};CircuitsAdminController.$inject=["$scope","Circuits","modals","$filter","cache"],DossiersAdminController.$inject=["$scope","$filter","modals","Dossiers","ngTableParams","usSpinnerService","cache"];var MoveDossierController=function($scope,$modalInstance,title,message){$scope.title=title,$scope.message=message,$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){$modalInstance.close()}};GroupesAdminController.$inject=["$scope","Groupes","utils","modals","usSpinnerService","cache","$filter"],InformationsAdminController.$inject=["$scope","$rootScope","$interval","$location","$http","$filter","configuration","Office","Tenants","Attestation","Xemelios","$modal"];var HealthController=function($scope,$modalInstance,$http,configuration,$rootScope){$scope.isTenant=1==$rootScope.isMTEnabled&&""!==configuration.tenant;var getHealth=function(){$http({method:"GET",url:configuration.context+"/proxy/alfresco/parapheur/exploit/health"}).then(function(data){$scope.health=data.data})};getHealth(),$scope.reload={launchCount:!1},$scope.messages={regenerate:{success:!1,error:!1}},$scope.regenerateCount=function(){$scope.reload.launchCount=!0,$scope.messages.success=!1,$scope.messages.error=!1,$http({method:"GET",url:configuration.context+"/proxy/alfresco/parapheur/corbeilles/regenerateCount"}).success(function(){$scope.reload.launchCount=!1,$scope.messages.success=!0}).error(function(error){console.warn(error),$scope.reload.launchCount=!1,$scope.messages.error=!0})},$scope.ok=function(){$modalInstance.close()}};NodeBrowserAdminController.$inject=["$scope","$http","configuration"],ScriptAdminController.$inject=["$scope","$http","configuration"],StatsAdminController.$inject=["$scope","Audits","cache","$filter","ngTableParams","$sce"],TenantAdminController.$inject=["$scope","$log","Tenants","modals"],TypologieAdminController.$inject=["$scope","$cacheFactory","Types","SousTypes","Circuits","modals","$filter","cache","usSpinnerService","Cachets","PastellConnector","Dossiers"];var OverrideS2lowController=function($scope,$modalInstance,titleModal,type,$sce,Connecteurs){$scope.titleModal=titleModal,$scope.testConfig=!1,$scope.saveConfig=!1,$scope.ready=!1,$scope.changed=!1;var isFileAdded=!1;$scope.filename=void 0;var testS2lowConfig=function(data){if($scope.testConfig){$scope.testConfig=!1;var toTest=angular.copy($scope.selectedType.overridedTdt);angular.extend(toTest,{cert:data.encodedFile,currentCertName:$scope.selectedType.overridedTdt.name||"",tdt:"s2low"}),Connecteurs.testConfig(toTest,function(response){angular.extend($scope.selectedType.overridedTdt,response),$scope.changed=!1,$scope.hasTest=!0,$scope.selectedType.overridedTdt.isPwdGoodForPkcs=$scope.selectedType.overridedTdt.isPwdGoodForPkcs.substring(0,2)})}},saveS2lowConfig=function(data){if($scope.saveConfig){$scope.saveConfig=!1;var toSave=angular.copy($scope.selectedType.overridedTdt);angular.extend(toSave,{cert:data.encodedFile,name:$scope.filename}),"ACTES"===$scope.selectedType.tdtProtocole?($scope.selectedType.$overrideActes(toSave),~$scope.selectedType.sigFormat.indexOf("PAdES")&&$scope.selectedType.$overridePades(toSave)):"HELIOS"===$scope.selectedType.tdtProtocole?$scope.selectedType.$overrideHelios(toSave):"aucun"!==$scope.selectedType.tdtProtocole||~$scope.selectedType.sigFormat.indexOf("PAdES")||$scope.selectedType.$overrideSig(toSave),("aucun"===$scope.selectedType.tdtProtocole&&~$scope.selectedType.sigFormat.indexOf("PAdES")||~$scope.selectedType.sigFormat.indexOf("AUTO"))&&$scope.selectedType.$overridePades(toSave),$modalInstance.close()}},canHandlePosition=!1;"ACTES"===type.tdtProtocole?type.$getOverrideActes(function(){var otdt=angular.copy(type.overridedTdt);~type.sigFormat.indexOf("PAdES")?type.$getOverridePades(function(){$scope.ready=!0,$scope.selectedType=angular.copy(type),angular.extend($scope.selectedType.overridedTdt,otdt),canHandlePosition=!0}):($scope.ready=!0,$scope.selectedType=angular.copy(type))}):"HELIOS"===type.tdtProtocole?type.$getOverrideHelios(function(){$scope.ready=!0,$scope.selectedType=angular.copy(type)}):"aucun"!==type.tdtProtocole||~type.sigFormat.indexOf("PAdES")?"aucun"===type.tdtProtocole&&~type.sigFormat.indexOf("PAdES")&&type.$getOverridePades(function(){$scope.ready=!0,type.tdtOverride="true",$scope.selectedType=angular.copy(type),canHandlePosition=!0}):type.$getOverrideSig(function(){if(~type.sigFormat.indexOf("AUTO")){var overridedTdt=type.overridedTdt;type.$getOverridePades(function(){$scope.ready=!0,type.tdtOverride="true",$.extend(type.overridedTdt,overridedTdt),$scope.selectedType=angular.copy(type),canHandlePosition=!0})}else $scope.ready=!0,$scope.selectedType=angular.copy(type)}),$scope.handlePosition=function(){return canHandlePosition?{"background-color":"white",width:$scope.selectedType.overridedTdt.stampWidth/2.83,height:$scope.selectedType.overridedTdt.stampHeight/2.83,top:(840-+$scope.selectedType.overridedTdt.stampCoordY-+$scope.selectedType.overridedTdt.stampHeight)/2.83+"px",left:$scope.selectedType.overridedTdt.stampCoordX/2.83+"px"}:{}},$scope.movePosition=function(event){$scope.selectedType.overridedTdt.stampCoordY=""+Math.floor(840-$scope.selectedType.overridedTdt.stampHeight/2-2.83*event.offsetY),$scope.selectedType.overridedTdt.stampCoordX=""+Math.floor(2.83*event.offsetX-$scope.selectedType.overridedTdt.stampWidth/2)},$scope.infoChanged=function(){$scope.changed=!0},$scope.wrongType=function(){$scope.$apply(function(){$scope.typeError=!0})},$scope.enableModeTest=function(){$scope.testConfig=!0,isFileAdded||testS2lowConfig({})},$scope.enableModeSave=function(){$scope.saveConfig=!0,isFileAdded||saveS2lowConfig({})},$scope.fileEncoded=function(data){$scope.$apply(function(){testS2lowConfig(data),saveS2lowConfig(data)})},$scope.certAdded=function(files){$scope.$apply(function(){$scope.filename=files[files.length-1].name,isFileAdded=!0})},$scope.ok=function(){$modalInstance.close()}},RemoveTypeController=function($scope,$modalInstance,title,message,object,Dossiers,$sce){$scope.title=title,$scope.message=message;var typeName=object.parent?object.parent:object.id,subTypeName=object.parent?object.id:"",dossiers=Dossiers.listAsAdmin({bureau:void 0,type:typeName,sousType:subTypeName,title:"",showOnlyCurrent:!1,showOnlyLate:!1},function(){dossiers.length>0&&($scope.error=$sce.trustAsHtml("Attention, il existe actuellement "+dossiers.length+" dossiers utilisant cette typologie.<br/>Ces dossiers seront bloqués dans leur état actuel si la typologie est supprimée."))});$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){$modalInstance.close()}};UtilisateursAdminController.$inject=["$scope","$rootScope","Users","utils","$modal","ngTableParams","$filter","modals","configuration","Tenants","cache","$location"];var EditUserCtrl=function($scope,$filter,$modalInstance,$http,ngTableParams,Users,Bureaux,utils,configuration,type,user,cache,viewService){var API_CHANGEPASS=configuration.ALFRESCO+"person/changepassword/"+user.username;$scope.type=type,$scope.bureauSuppressError=!1,$scope.originalUser={},$scope.newPass={newOne:"",confirm:""},$scope.respPass={},$scope.fileUploadFormat="certificat-pub",$scope.user=Users.get({id:user.id},function(data){$scope.originalUser=angular.copy(data),$scope.user.$getBureauxAdministres()}),$scope.date=(new Date).getTime(),$scope.bureaux=[],$scope.listHandler={bureaux:[],subListAdminFonctionnel:[],page:0,maxSize:10,total:0,init:function(){var that=this;cache.bureaux.list().then(function(bureaux){$scope.bureaux=bureaux,that.search("")})},search:function(toSearch){this.page=0,this.bureaux=$filter("filter")($scope.bureaux,toSearch),this.total=this.bureaux.length,this.getNewList()},pagine:function(toAddToPage){this.page+=toAddToPage,this.getNewList()},getNewList:function(){this.subListAdminFonctionnel=this.bureaux.slice(this.page*this.maxSize,this.page*this.maxSize+this.maxSize)},selectForAdminFonctionnel:function(b){$scope.user.bureauxAdministres.push(b.id),this.getNewList()},unselectForAdminFonctionnel:function(id){var indexInArray=$scope.user.bureauxAdministres.indexOf(id);~indexInArray&&$scope.user.bureauxAdministres.splice(indexInArray,1),this.getNewList()}},$scope.listHandler.init(),$scope.getBureaux=function(){$scope.user.$getBureaux(function(){buildTable()})};var buildTable=function(){$scope.tableParams?$scope.tableParams.reload():$scope.tableParams=new ngTableParams({page:1,count:100
},{counts:[],total:0,getData:function($defer,params){var orderedData=params.sorting()?$filter("orderBy")($scope.user.bureaux,params.orderBy()):$scope.user.bureaux;params.total($scope.user.bureaux.length),$defer.resolve(orderedData.slice((params.page()-1)*params.count(),params.page()*params.count()))}})};$scope.$watch("user.admin",function(newValue){"admin"===newValue?($scope.user.isAdmin=!0,$scope.user.isAdminFonctionnel=!1):"adminFonctionnel"===newValue?($scope.user.isAdmin=!1,$scope.user.isAdminFonctionnel=!0):($scope.user.isAdmin=!1,$scope.user.isAdminFonctionnel=!1),"adminFonctionnel"===newValue&&!$scope.allBureaux},!0),$scope.removeFromBureau=function(bureau){$scope.bureauSuppressError=!1,$scope.user.$deleteBureau({resourceId:bureau.id,isProprietaire:bureau.isProprietaire},function(){$scope.user.bureaux.splice($scope.user.bureaux.indexOf(bureau),1),buildTable()},function(){$scope.bureauSuppressError=!0})},$scope.changePassword=function(){$scope.respPass={},$scope.wrongPwd=!1;var pass=$scope.newPass.newOne.trim();if(pass.length>2&&$scope.newPass.newOne===$scope.newPass.confirm){var params={userName:$scope.user.username,newpw:$scope.newPass.newOne};$scope.originalUser.username===$scope.config.username&&(params.oldpw=$scope.newPass.oldOne),$http.post(API_CHANGEPASS,params).success(function(resp){resp.status&&401===resp.status.code?$scope.wrongPwd=!0:angular.copy(resp,$scope.respPass)}).error(function(){angular.copy({error:!0},$scope.respPass)})}},$scope.notifications={mode:"always",mail:void 0,cron:{},changed:!1,saved:!1,error:void 0,defaultPref:{enabled:!0,dailydigest:{enabled:!1},digest:{cron:"0 0/10 * * * ?"},mail:"",mode:"always"},extendDeep:function extendDeep(dst){return angular.forEach(arguments,function(obj){obj!==dst&&angular.forEach(obj,function(value,key){dst[key]&&dst[key].constructor&&dst[key].constructor===Object?extendDeep(dst[key],value):dst[key]=value})}),dst},init:function(){var that=this;$http.get(configuration.ALFRESCO+"people/"+user.username+"/preferences?pf=org.adullact.iparapheur.notifications").success(function(resp){try{resp.org.adullact.iparapheur.notifications&&that.extendDeep(that.defaultPref,resp.org.adullact.iparapheur.notifications)}catch(e){console.log(e)}finally{that.cron=viewService.extractCron(that.defaultPref.digest.cron),that.mail=that.defaultPref.mail,that.defaultPref.enabled?that.defaultPref.dailydigest.enabled?that.mode=viewService.getCronMode(that.defaultPref.digest.cron):that.mode="always":that.mode="never"}})},cronDidChange:function(){this.changed=!0},saveCronPrefs:function(success){var that=this;this.error=void 0,Users.saveNotificationsPreferences({id:user.id},{mode:that.mode,mail:that.mail,frequency:that.cron[that.mode]}).$promise.then(function(){that.changed=!1,that.saved=!0,success()},function(error){success(),that.error=error,that.changed=!1,that.saved=!1})}},$scope.notifications.init(),$scope.typeError=!1,$scope.setSignature=function(){$scope.fileUploadFormat="image"},$scope.deleteSignature=function(){void 0!==$scope.user.signature&&($scope.user.signature=""),$scope.user.signatureData=void 0,$scope.signatureFormat=void 0},$scope.setCertificat=function(){$scope.fileUploadFormat="certificat-pub"},$scope.deleteCertificat=function(){$scope.certificateUsedBy=void 0,$scope.typeError=!1,$scope.isEmptyOrNull($scope.user.certificat)||($scope.user.certificat={},$scope.user.hasCertificate=!1)},$scope.removeFromGroup=function(group){$scope.user.$removeFromGroup({resourceId:group},function(){$scope.user.groups.splice($scope.user.groups.indexOf(group),1)})},$scope.fileUploaded=function(resp){$scope.$apply(function(){if("image"===$scope.fileUploadFormat)$scope.user.signatureData=resp.encodedFile;else{var encodedFile=resp.encodedFile;Users.getCertificatDetails({id:$scope.user.id},{certificat:encodedFile},function(resp){$scope.isEmptyOrNull(resp)||($scope.user.certificat=resp.certificat,$scope.certificateUsedBy=resp.usedBy),$scope.user.certificat.content=encodedFile,$scope.user.hasCertificate=!0})}})},$scope.fileAdded=function(files){"image"===$scope.fileUploadFormat?$scope.signatureFormat=$filter("fileext")(files[0].name).toLowerCase():($scope.certificateUsedBy=void 0,$scope.typeError=!1)},$scope.wrongType=function(){$scope.$apply(function(){$scope.typeError=!0})},$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){"adminFonctionnel"===$scope.user.admin&&0===$scope.user.bureauxAdministres.length&&($scope.user.admin="aucun"),$scope.notifications.saveCronPrefs(function(){$modalInstance.close({user:$scope.user,originalUser:$scope.originalUser})})}},DeleteUserController=function($scope,$modalInstance,title,titleComplement,message,user){$scope.user=user,$scope.title=title,$scope.titleComplement=titleComplement,$scope.message=message,$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){$modalInstance.close()}};angular.module("appParapheur",["templates-parapheur","angularSpinner","ui.ace","localize","ngTable","pascalprecht.translate","http-throttler","ui.bootstrap","LocalStorageModule","ngAnimate","ngRoute","appParapheur.directives","ngResource","userModule","configurationModule","viewModule","socketIO","filters","utilsModule","cacheModule","ipModals"]).config(function($translateProvider){$translateProvider.useLoaderCache(!0),$translateProvider.useSanitizeValueStrategy("escaped"),$translateProvider.useStaticFilesLoader({files:[{prefix:urlContext+"/res/javascript/locales/",suffix:".json"}]}),$translateProvider.preferredLanguage("fr")}).config(["$routeProvider",function($routeProvider){var originalWhen=$routeProvider.when;$routeProvider.when=function(path,route){return route.resolve||(route.resolve={}),angular.extend(route.resolve,{prefs:["$q","preferences",function($q,preferences){var deferred=$q.defer();return preferences.initPreferences(function(prefs){deferred.resolve(prefs)}),deferred.promise}]}),originalWhen.call($routeProvider,path,route)},$routeProvider.when("/logout",{templateUrl:"templates/logout.html",controller:LogoutController}).when("/bureaux",{templateUrl:"templates/bureaux.html",controller:BureauController,resolve:{bureaux:["$q","$location","$rootScope","navigationService","Bureaux",function($q,$location,$rootScope,navigationService,Bureaux){var deferred=$q.defer();$(".pageContent").hide(),$rootScope.loadingBureaux=!0;var corbeilleDefined=!!navigationService.currentFilter.dossier,handle=function(listBureaux){1===listBureaux.length?"/bureaux"===$location.path()&&(corbeilleDefined||(listBureaux[0].isSecretaire?navigationService.currentFilter.dossier="secretariat":navigationService.currentFilter.dossier="a-traiter"),navigationService.currentPage=0,navigationService.hasNext=!1,$rootScope.currentBureau=listBureaux[0],navigationService.bureauCourant=listBureaux[0],$location.path("/dashboard")):deferred.resolve(listBureaux)};return $rootScope.orderedBureaux?(handle($rootScope.orderedBureaux),$(".pageContent").show(),$rootScope.loadingBureaux=!1):Bureaux.query(function(listBureaux){handle(listBureaux),$(".pageContent").show(),$rootScope.loadingBureaux=!1}),deferred.promise}]}}).when("/dashboard/:id/:corbeille",{templateUrl:"templates/dashboard.html",controller:DashboardController,resolve:{currentBureau:function($q,$route,$rootScope,navigationService,Bureaux){var deferred=$q.defer();return Bureaux.query(function(result){for(var idToFind=$route.current.params.id,i=0;i<result.length;i++)result[i].id===idToFind&&(navigationService.bureauCourant=result[i],$rootScope.currentBureau=result[i],deferred.resolve())}),deferred.promise},corbeilleFromMail:function($route){return $route.current.params.corbeille}}}).when("/dashboard/:id",{templateUrl:"templates/dashboard.html",controller:DashboardController,resolve:{currentBureau:function($q,$route,$rootScope,navigationService,Bureaux){var deferred=$q.defer();return Bureaux.query(function(result){for(var idToFind=$route.current.params.id,i=0;i<result.length;i++)result[i].id===idToFind&&(navigationService.bureauCourant=result[i],$rootScope.currentBureau=result[i],deferred.resolve())}),deferred.promise},corbeilleFromMail:function(){}}}).when("/dashboard",{templateUrl:"templates/dashboard.html",controller:DashboardController,resolve:{corbeilleFromMail:function(){}}}).when("/archives",{templateUrl:"templates/archives.html",controller:ArchivesController}).when("/options",{templateUrl:"templates/options.html",controller:OptionsController}).when("/stats",{templateUrl:"templates/stats.html",controller:StatsController}).when("/policy",{templateUrl:"templates/policy.html",controller:PolicyController}).when("/about",{templateUrl:"templates/about.html",controller:AboutController}).when("/apercu/:id",{templateUrl:"templates/apercu.html",controller:ApercuController,resolve:{bestBureau:function($q,$route,$rootScope,navigationService,Dossiers){var deferred=$q.defer();return navigationService.dossierToEdit=$route.current.params.id,navigationService.bureauCourant=Dossiers.bestBureau({id:navigationService.dossierToEdit},function(resp){var isEmpty=!0;for(var i in resp)resp.hasOwnProperty(i)&&i.indexOf("$")&&(isEmpty=!1);$rootScope.currentBureau=navigationService.bureauCourant,deferred.resolve({error:isEmpty})}),deferred.promise}}}).when("/apercu",{templateUrl:"templates/apercu.html",controller:ApercuController,resolve:{bestBureau:function($q){var deferred=$q.defer();return deferred.resolve({error:!1}),deferred.promise}}}).when("/nouveau",{templateUrl:"templates/nouveau.html",controller:NouveauController}).when("/delegation",{templateUrl:"templates/delegation.html",controller:DelegationController}).when("/admin",{redirectTo:"/admin/informations"}).when("/admin/informations",{templateUrl:"templates/admin/informations.html",controller:InformationsAdminController}).when("/admin/utilisateurs",{templateUrl:"templates/admin/utilisateurs.html",controller:UtilisateursAdminController}).when("/admin/groupes",{templateUrl:"templates/admin/groupes.html",controller:GroupesAdminController}).when("/admin/bureaux",{templateUrl:"templates/admin/bureaux.html",controller:BureauxAdminController}).when("/admin/circuits",{templateUrl:"templates/admin/circuits.html",controller:CircuitsAdminController}).when("/admin/typologie",{templateUrl:"templates/admin/typologie.html",controller:TypologieAdminController}).when("/admin/dossiers",{templateUrl:"templates/admin/dossiers.html",controller:DossiersAdminController}).when("/admin/stats",{templateUrl:"templates/admin/stats.html",controller:StatsAdminController}).when("/admin/avance",{templateUrl:"templates/admin/avance.html",controller:AvanceAdminController}).when("/admin/script",{templateUrl:"templates/admin/script.html",controller:ScriptAdminController}).when("/admin/tenants",{templateUrl:"templates/admin/tenants.html",controller:TenantAdminController}).when("/admin/nodebrowser",{templateUrl:"templates/admin/nodebrowser.html",controller:NodeBrowserAdminController}).otherwise({redirectTo:"/bureaux"})}]).factory("authentication",["$q",function($q){return{response:function(response){return 401===response.status&&(window.onbeforeunload=function(){},document.location.href=urlContext+"/dologin"),response||$q.when(response)},responseError:function(rejection){return 401===rejection.status&&-1===rejection.config.url.indexOf("pastell-connector")&&(window.onbeforeunload=function(){},document.location.href=urlContext+"/dologin"),$q.reject(rejection)}}}]).factory("alertRequest",["$q",function($q){var currentRequests=0,responseHandler=function(response){return currentRequests--,0===currentRequests&&(window.onbeforeunload=function(){}),response||$q.when(response)},responseHandlerError=function(rejection){return currentRequests--,0===currentRequests&&(window.onbeforeunload=function(){}),$q.reject(rejection)};return{request:function(config){return 0===currentRequests&&(window.onbeforeunload=function(event){return"ATTENTION ! Une requête est en cours..."}),currentRequests++,config},response:responseHandler,responseError:responseHandlerError}}]).config(["$httpProvider",function($httpProvider){$httpProvider.interceptors.push("authentication"),$httpProvider.interceptors.push("alertRequest")}]).config(["$compileProvider",function($compileProvider){$compileProvider.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|chrome-extension|data):/)}]);var baseModule=angular.module("baseModule",[]);baseModule.factory("baseService",["$window","$rootScope","$http",function($window,$rootScope,$http){var data={isInit:!1,isAdmin:isAdmin,ownOneParapheur:!1,fullName:void 0,loginName:void 0,currentBureau:void 0,currentFolder:void 0,isSecretaire:!1,signId:"",preferences:{isDefault:!0,language:"fr",pagesize:10,pagesizeArchives:10,displayDelegation:!0,enabledColumns:{c0:"titre",c1:"actionDemandee",c2:"type",c3:"parapheurCourant",c4:"dateLimite",c5:"dateEmission",c6:"banetteCourante"},enabledColumnsArchives:{c0:"titre",c1:"archivepar",c2:"type",c3:"dateCreation",c4:"telechargements"},dashletsPosition:{right:{c0:{name:"nom-dossier",show:"true"},c1:{name:"circuit",show:"true"},c2:{name:"details-dossier",show:"true"},c3:{name:"postit",show:"true"},c4:{name:"annotindex",show:"true"},c5:{name:"annoter",show:"true"},c6:{name:"annotations",show:"true"}},left:{c0:{name:"liste-dossiers",show:"true"}}},theme:"default",savedFilters:{},notifications:{enabled:!1,dailydigest:{enabled:!1},digest:{cron:"0 0/10 * * * ?"}},cron:{enabled:!1,values:["1","7","1"],canSelect:["notifs-hours","notifs-quotidien","notifs-hebdo"],selected:""}},urlContext:void 0,ajaxHelper:{BASEPREF:"/proxy/alfresco/api/people/",ENDPREF:"/preferences",URLPASS:"/proxy/alfresco/api/person/changepassword/",PATHFILTER:"org.adullact.iparapheur.savedFilters"},STORAGEKEY:"ParapheurUser"},BESTBUREAU="/proxy/alfresco/parapheur/api/getBestBureauForDossier",findBestBureau=function(nodeRef){$http.post(data.urlContext+BESTBUREAU,{username:data.loginName,dossier:nodeRef}).success(function(resp){data.isSecretaire=resp.secretaire,data.bureau&&data.setCurrentBureau(getBureau(resp.bureau)),$rootScope.$broadcast("bureauModule.findBestBureau.success")}).error(function(){$rootScope.$broadcast("bureauModule.findBestBureau.error")})},init=function(){data.isInit=!0,getPreferences()},getPreferences=function(){if(data.preferences.isDefault){var url=data.urlContext+data.ajaxHelper.BASEPREF+data.loginName+data.ajaxHelper.ENDPREF;$http.get(url).success(function(resp){if(resp.hasOwnProperty("org")&&resp.org.hasOwnProperty("adullact")&&resp.org.adullact.hasOwnProperty("iparapheur")){var prefs=resp.org.adullact.iparapheur;if(data.preferences.pagesize=void 0!==prefs.pagesize?prefs.pagesize:data.preferences.pagesize,data.preferences.pagesizeArchives=void 0!==prefs.pagesizeArchives?prefs.pagesizeArchives:data.preferences.pagesizeArchives,data.preferences.displayDelegation=void 0!==prefs.displayDelegation?prefs.displayDelegation:data.preferences.displayDelegation,data.preferences.theme=void 0!==prefs.theme?prefs.theme:data.preferences.theme,void 0!==prefs.enabledColumns)for(var i=0;6>i;i++)data.preferences.enabledColumns["c"+i]=prefs.enabledColumns["c"+i];if(void 0!==prefs.enabledColumnsArchives)for(i=0;5>i;i++)data.preferences.enabledColumnsArchives["c"+i]=prefs.enabledColumnsArchives["c"+i];void 0!==prefs.dashletsPosition&&(data.preferences.dashletsPosition=prefs.dashletsPosition),void 0!==prefs.savedFilters&&$.each(prefs.savedFilters,function(index,value){data.preferences.savedFilters[index]={},data.preferences.savedFilters[index].types=[],data.preferences.savedFilters[index].subtypes=[];try{$.extend(data.preferences.savedFilters[index],$.parseJSON(value))}catch(e){console.error("Can't handle filter "+index),console.error(value)}}),data.preferences.language=void 0!==prefs.language?prefs.language:data.preferences.language,prefs.hasOwnProperty("notifications")&&(prefs.notifications.hasOwnProperty("digest")&&prefs.notifications.digest.hasOwnProperty("cron")&&(data.preferences.notifications.digest.cron=prefs.notifications.digest.cron),prefs.notifications.hasOwnProperty("dailydigest")&&prefs.notifications.dailydigest.hasOwnProperty("enabled")&&(data.preferences.notifications.dailydigest.enabled=prefs.notifications.dailydigest.enabled,data.preferences.notifications.enabled=prefs.notifications.enabled),cronHandler.init())}data.preferences.isDefault=!1,$rootScope.$broadcast("userModule.getPreferences.success")}).error(function(){$rootScope.$broadcast("userModule.getPreferences.error")})}return data.preferences},updatePreferences=function(){return data.preferences.isDefault=!0,getPreferences()},savePreferences=function(){cronHandler.saveCronConfig();var url=data.urlContext+data.ajaxHelper.BASEPREF+data.loginName+data.ajaxHelper.ENDPREF;$.each(data.preferences.savedFilters,function(index,value){data.preferences.savedFilters[index]=JSON.stringify(value)}),$http.post(url,{"org.adullact.iparapheur":data.preferences}).success(function(){$.each(data.preferences.savedFilters,function(index){data.preferences.savedFilters[index]=$.parseJSON(data.preferences.savedFilters[index])}),$rootScope.$broadcast("userModule.savePreferences.success")}).error(function(){$rootScope.$broadcast("userModule.savePreferences.error")})},changePassword=function(oldPassword,newPassword){var params={userName:data.loginName,oldpw:oldPassword,newpw:newPassword},url=data.urlContext+data.ajaxHelper.URLPASS+data.loginName;$http.post(url,params).success(function(){$rootScope.$broadcast("userModule.changePassword.success")}).error(function(){$rootScope.$broadcast("userModule.changePassword.error")})},setCurrentBureau=function(bureau){data.currentBureau=bureau},saveFilter=function(filter,name){var savedFilters={},url=data.urlContext+data.ajaxHelper.BASEPREF+data.loginName+data.ajaxHelper.ENDPREF;delete filter.name,savedFilters[name]=JSON.stringify(filter),data.preferences.savedFilters[name]={},data.preferences.savedFilters[name].types=[],data.preferences.savedFilters[name].subtypes=[],$.extend(data.preferences.savedFilters[name],filter),$http.post(url,{"org.adullact.iparapheur.savedFilters":savedFilters}).success(function(){$rootScope.$broadcast("userModule.saveFilter.success")}).error(function(){$rootScope.$broadcast("userModule.saveFilter.error")})},removeFilter=function(name){var url=data.urlContext+data.ajaxHelper.BASEPREF+data.loginName+data.ajaxHelper.ENDPREF;"custom"!==name&&(delete data.preferences.savedFilters[name],$http["delete"](url+"?pf=org.adullact.iparapheur.savedFilters."+name).success(function(){$rootScope.$broadcast("userModule.removeFilter.success")}).error(function(){$rootScope.$broadcast("userModule.removeFilter.error")}))},saveDashletsPosition=function(dashRight,dashLeft){var url=data.ajaxHelper.BASEPREF+data.loginName+data.ajaxHelper.ENDPREF;delete data.preferences.dashletsPosition.right,delete data.preferences.dashletsPosition.left,$http["delete"](url).success(function(){data.preferences.dashletsPosition.right=dashRight,data.preferences.dashletsPosition.left=dashLeft,savePreferences(),$rootScope.$broadcast("userModule.saveDashletsPosition.success")}).error(function(){$rootScope.$broadcast("userModule.saveDashletsPosition.error")})},cronHandler={init:function(){this.toData(data.preferences.notifications.digest.cron),data.preferences.cron.enabled=data.preferences.notifications.dailydigest.enabled},toData:function(cron){var index,value,cronData=cron.split(" ");"?"!==cronData[5]?(index=2,value=cronData[5]):-1===cronData[2].indexOf("/")?(index=1,value=cronData[2]):-1!==cronData[2].indexOf("/")&&(index=0,value=cronData[2].split("/")[1]),data.preferences.cron.selected=data.preferences.cron.canSelect[index],data.preferences.cron.values[index]=value},toString:function(){var cronStr="0 0 ";return data.preferences.cron.selected===data.preferences.cron.canSelect[0]?cronStr+="0/"+data.preferences.cron.values[0]+" * * ?":data.preferences.cron.selected===data.preferences.cron.canSelect[1]?cronStr+=data.preferences.cron.values[1]+" * * ?":data.preferences.cron.selected===data.preferences.cron.canSelect[2]&&(cronStr+="7 ? * "+data.preferences.cron.values[2]),cronStr},saveCronConfig:function(){data.preferences.notifications.enabled=data.preferences.cron.enabled,data.preferences.notifications.dailydigest.enabled=data.preferences.cron.enabled,data.preferences.notifications.digest.cron=this.toString()}},setInfo=function(fullName,currentUserId,urlContext){data.fullName=fullName,data.loginName=currentUserId,data.urlContext=urlContext,init()};return setInfo(fullname,currentUserId,urlContext),$.extend(data,{showFilters:!1,findBestBureau:findBestBureau,setInfo:setInfo,setCurrentBureau:setCurrentBureau,getPreferences:getPreferences,updatePreferences:updatePreferences,savePreferences:savePreferences,changePassword:changePassword,saveFilter:saveFilter,removeFilter:removeFilter,saveDashletsPosition:saveDashletsPosition,initCron:cronHandler.init,toStringCron:cronHandler.toString,toDataCron:cronHandler.toData,saveCronConfig:cronHandler.saveCronConfig})}]).factory("i18nService",["$rootScope","baseService",function($rootScope,baseService){var isInit=!1,doI18n=function(){var lang=baseService.preferences.language;$.i18n.init({lng:lang,ns:{namespaces:["ns.special"],defaultNs:"ns.special"},resGetPath:urlContext+"/res/locales/__lng__/__ns__.json",useLocalStorage:!1},function(){$rootScope.$broadcast("i18n.init.success"),isInit=!0})};doI18n();var apply=function(element,attrs){var kind=attrs.kind,count=attrs.count?attrs.count:0,placement=attrs.placement?attrs.placement:"bottom",attr=attrs.attr?attrs.attr:"title";"tooltip"===kind?($(element).tooltip("destroy"),$(element).attr("title",$.t(attrs.i18n,{count:count})).tooltip({placement:placement})):"attr"===kind?$(element).attr(attr,$.t(attrs.i18n,{count:count})):$(element).html($.t(attrs.i18n,{count:count}))},applyI18n=function(element,attrs){isInit?apply(element,attrs):$rootScope.$on("i18n.init.success",function(){apply(element,attrs)})};return{isInit:isInit,apply:applyI18n}}]);var cacheModule=angular.module("cacheModule",[]);cacheModule.factory("cache",["$q","Bureaux","Metadonnees","Types","Groupes","Calques","Users",function($q,Bureaux,Metadonnees,Types,Groupes,Calques,Users){var bureauxList=[],metaList={"true":[],"false":[]},typesList=[],groupesList=[],calquesList=[],usersList=[];return{bureaux:{list:function(){var deferred=$q.defer();return 0===bureauxList.length?bureauxList=Bureaux.list(function(){deferred.resolve(bureauxList)}):deferred.resolve(bureauxList),deferred.promise}},metadonnees:{list:function(asAdmin){var deferred=$q.defer();return 0===metaList[asAdmin].length?metaList[asAdmin]=Metadonnees.list({asAdmin:asAdmin},function(){deferred.resolve(metaList[asAdmin])}):deferred.resolve(metaList[asAdmin]),deferred.promise},forceReload:function(){metaList={"true":[],"false":[]}}},calques:{list:function(){var deferred=$q.defer();return 0===calquesList.length?calquesList=Calques.list(function(){deferred.resolve(calquesList)}):deferred.resolve(calquesList),deferred.promise}},types:{list:function(){var deferred=$q.defer();return 0===typesList.length?typesList=Types.list(function(){deferred.resolve(typesList)}):deferred.resolve(typesList),deferred.promise}},groupes:{list:function(){var deferred=$q.defer();return 0===groupesList.length?groupesList=Groupes.list(function(){deferred.resolve(groupesList)}):deferred.resolve(groupesList),deferred.promise}},users:{list:function(){var deferred=$q.defer();return 0===usersList.length?usersList=Users.query({search:""},function(){deferred.resolve(usersList)}):deferred.resolve(usersList),deferred.promise}}}}]);var configurationModule=angular.module("configurationModule",[]);configurationModule.factory("configuration",["$http",function($http){var context=urlContext,isAdminCircuits=!1,isAdminFonctionnel=!1,adminFonctionnel=[],prop=properties,theme=userTheme,connexionType=connectionType,buildTheme=function(){for(var result=[],list=prop["parapheur.ihm.themes.disponibles"].split(","),i=0;i<list.length;i++){var name=list[i].split("/");name.length>1&&name[0]===tenantName?result.push(list[i]):1===name.length&&result.push(list[i])}return result},themes=buildTheme();$http.get(context+"/proxy/alfresco/parapheur/utilisateurs/infos").success(function(data){isAdminCircuits=data.isGestionnaire,adminFonctionnel=data.administres,data.administres&&data.administres.length>0&&(isAdminFonctionnel=!0),obj.id=data.id});var obj={theme:theme,properties:prop,fullname:fullname,username:currentUserId,connexionType:connexionType,tenant:tenantName,context:context,isAdmin:isAdmin,isAdminCircuits:function(){return isAdminCircuits},isAdminFonctionnel:function(){return isAdminFonctionnel},adminFonctionnel:function(){return adminFonctionnel},isAdminFonctionnelOf:function(id){return isAdminFonctionnel?-1!==adminFonctionnel.indexOf(id):!0},setProperties:function(p){prop=p},isSecretaire:!1,APIACCESS:context+"/proxy/alfresco/parapheur/api/",RESTACCESS:context+"/proxy/alfresco/parapheur/",ALFRESCO:context+"/proxy/alfresco/api/",themes:themes,signNode:signId?signId[signId.length-1]:""};return obj}]);var viewModule=angular.module("viewModule",[]);viewModule.factory("viewService",["preferences","Metadonnees",function(prefs,Metadonnees){Array.prototype.diff=function(a){return this.filter(function(i){return!(a.indexOf(i)>-1)})},Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(predicate){if(null==this)throw new TypeError('"this" is null or not defined');var o=Object(this),len=o.length>>>0;if("function"!=typeof predicate)throw new TypeError("predicate must be a function");for(var thisArg=arguments[1],k=0;len>k;){var kValue=o[k];if(predicate.call(thisArg,kValue,k,o))return kValue;k++}return void 0}});var possibleColumns=[{key:"cm:title",value:"title",i18n:"Name",disabled:!0},{value:"actionDemandee",i18n:"State"},{key:"ph:typeMetier",value:"type",i18n:"Type"},{value:"bureauName",i18n:"CurrentBureau"},{key:"ph:dateLimite",value:"dateLimite",i18n:"LimitDate"},{key:"cm:creator",value:"creator",i18n:"Creator"},{key:"cm:created",value:"dateEmission",i18n:"Emit"},{value:"banetteName",i18n:"CurrentBanette"},{value:"visual",i18n:"Visual"},{value:"emitby",i18n:"EmitBureau"}],possibleColumnsArchive=[{key:"cm:title",value:"title",i18n:"Name",disabled:!0},{key:"cm:creator",value:"creator",i18n:"ArchivedBy"},{key:"ph:typeMetier",value:"type",i18n:"Type"},{key:"cm:created",value:"created",i18n:"Created"},{value:"telechargements",i18n:"Download"}],getDashboardColumns=function(enCol,f){var enabled=[];return Metadonnees.list(function(data){var possibleColumnMeta=angular.copy(possibleColumns);if($.each(data,function(index,value){possibleColumnMeta.push({key:value.id,value:"cu:"+value.id,i18n:value.name,type:value.type})}),enCol){var i,count=0;for(i in enCol)enCol.hasOwnProperty(i)&&count++;for(var col=[],j=0;count>j;j++)col.push(enCol["c"+j]);$.each(col,function(index,value){value="titre"===value?"title":value,value="parapheurCourant"===value?"bureauName":value,$.each(possibleColumnMeta,function(vindex,walue){value===walue.value&&enabled.push(walue)})})}else enabled.push(possibleColumnMeta[0]);var disabled=possibleColumnMeta.diff(enabled);f({enabled:enabled,disabled:disabled})})},getArchiveColumns=function(enCol,f){var enabled=[];return Metadonnees.list({type:"",sousType:""}).$promise.then(function(data){var possibleColumnMeta=angular.copy(possibleColumnsArchive);$.each(data,function(index,value){possibleColumnMeta.push({key:value.id,value:value.id,i18n:value.name})}),enCol?$.each(enCol,function(index,value){value="titre"===value?"title":value,value="archivepar"===value?"creator":value,value="dateCreation"===value?"created":value,$.each(possibleColumnMeta,function(vindex,walue){value===walue.value&&enabled.push(walue)})}):enabled.push(possibleColumnMeta[0]);var disabled=possibleColumnMeta.diff(enabled);f({enabled:enabled,disabled:disabled})})},toSaveColumns=function(enCol){var toSave={},added=[];return $.each(enCol,function(index,value){~added.indexOf(value.value)||(toSave["c"+index]=value.value,added.push(value.value))}),toSave},extractCron=function(cronStr){var cronData=cronStr.split(" ");return{hourly:cronData[2].split("/")[1]&&"*"!==cronData[2].split("/")[1]?cronData[2].split("/")[1]:"1",daily:cronData[2].split("/")[0]&&"*"!==cronData[2].split("/")[0]?cronData[2].split("/")[0]:"7",weekly:cronData[5]&&"?"!==cronData[5]&&"null"!==cronData[5]?cronData[5]:"1"}},buildCron=function(type,value){return"hourly"===type?"0 0 0/"+value+" * * ?":"daily"===type?"0 0 "+value+" * * ?":"weekly"===type?"0 0 7 ? * "+value:"0 0 7 ? * 1"},getCronMode=function(cronStr){var cronData=cronStr.split(" ");return cronData[2].split("/")[1]?"hourly":"?"!==cronData[5]&&"null"!==cronData[5]?"weekly":"daily"},toPrefCron=function(digest,cron,selected){var cronStr=buildCron(selected,cron[selected]);return{enabled:"true"===digest,dailydigest:{enabled:"true"===digest},digest:{cron:cronStr}}},corbeillesList={};angular.copy({secretariat:"app.dashboard.filters.files.arelire","en-preparation":"app.dashboard.filters.files.enpreparation","a-traiter":"app.dashboard.filters.files.atraiter","a-archiver":"app.dashboard.filters.files.aarchiver",retournes:"app.dashboard.filters.files.retournes","en-cours":"app.dashboard.filters.files.encours","a-venir":"app.dashboard.filters.files.avenir",traites:"Traités",recuperables:"app.dashboard.filters.files.recuperables","en-retard":"app.dashboard.filters.files.enretard","a-imprimer":"app.dashboard.filters.files.aimprimer","dossiers-delegues":"app.dashboard.filters.files.delegues","no-corbeille":"app.dashboard.filters.files.allCorbeilles","no-bureau":"app.dashboard.filters.files.allBureaux"},corbeillesList);var corbeillesListFilter=[];corbeillesListFilter.push({key:"a-traiter",value:"À traiter"}),corbeillesListFilter.push({key:"en-preparation",value:"À transmettre"}),corbeillesListFilter.push({key:"a-venir",value:"À venir"}),corbeillesListFilter.push({key:"en-cours",value:"En cours"}),corbeillesListFilter.push({key:"dossiers-delegues",value:"En délégation"}),corbeillesListFilter.push({key:"a-archiver",value:"En fin de circuit"}),corbeillesListFilter.push({key:"en-retard",value:"En retard"}),corbeillesListFilter.push({key:"recuperables",value:"Récupérables"}),corbeillesListFilter.push({key:"retournes",value:"Rejetés"}),corbeillesListFilter.push({key:"traites",value:"Traités"}),corbeillesListFilter.push({key:"no-corbeille",value:"Toutes les bannettes"}),corbeillesListFilter.push({key:"no-bureau",value:"Tout i-Parapheur"});var corbeillesListSecretariat=corbeillesListFilter;corbeillesListSecretariat.unshift({key:"secretariat",value:"À relire"}),corbeillesListSecretariat.unshift({key:"a-imprimer",value:"À imprimer"});var getCorbeillesList=function(isSecretaire,showVenir){var corbeillesListFilter=[];return corbeillesListFilter.push({key:"a-traiter",value:"À traiter"}),corbeillesListFilter.push({key:"en-preparation",value:"À transmettre"}),showVenir&&corbeillesListFilter.push({key:"a-venir",value:"À venir"}),corbeillesListFilter.push({key:"en-cours",value:"En cours"}),corbeillesListFilter.push({key:"dossiers-delegues",value:"En délégation"}),corbeillesListFilter.push({key:"a-archiver",value:"En fin de circuit"}),corbeillesListFilter.push({key:"en-retard",value:"En retard"}),corbeillesListFilter.push({key:"recuperables",value:"Récupérables"}),corbeillesListFilter.push({key:"retournes",value:"Rejetés"}),corbeillesListFilter.push({key:"traites",value:"Traités"}),corbeillesListFilter.push({key:"no-corbeille",value:"Toutes les bannettes"}),corbeillesListFilter.push({key:"no-bureau",value:"Tout i-Parapheur"}),isSecretaire&&(corbeillesListFilter.unshift({key:"secretariat",value:"À relire"}),corbeillesListFilter.unshift({key:"a-imprimer",value:"À imprimer"})),corbeillesListFilter},flags={backdrop:!1};return{flags:flags,getDashboardColumns:getDashboardColumns,getArchiveColumns:getArchiveColumns,toSaveColumns:toSaveColumns,possibleColumns:possibleColumns,corbeillesList:corbeillesList,corbeillesListFilter:getCorbeillesList,extractCron:extractCron,buildCron:buildCron,getCronMode:getCronMode,toPrefCron:toPrefCron
}}]);var socket=angular.module("socketIO",[]);socket.factory("notifications",["$rootScope",function($rootScope){var socket=io.connect(window.location.origin,{secure:!0,"sync disconnect on unload":!0});return{on:function(eventName,callback){socket.on(eventName,function(){var args=arguments;$rootScope.$apply(function(){callback.apply(socket,args)})})},emit:function(eventName,data,callback){socket.emit(eventName,data,function(){var args=arguments;$rootScope.$apply(function(){callback&&callback.apply(socket,args)})})}}}]);var modals=angular.module("ipModals",[]);modals.factory("modals",["$modal","configuration","navigationService","$filter",function($modal,configuration,navigationService,$filter){var launchModalDossier=function(title,setPending,ctrl,modalFile,success,dossiers,fadeDis){var modalOpt={templateUrl:modalFile,controller:ctrl,backdrop:"static",resolve:{setPending:function(){return setPending},titleModal:function(){return title},dossiers:dossiers,bureau:function(){return navigationService.bureauCourant}}};fadeDis&&(modalOpt.size="signature");var modalInstance=$modal.open(modalOpt);modalInstance.result.then(function(result){"function"==typeof success&&success(result)},function(){})},launchModalType=function(title,ctrl,modalFile,success,type){var modalInstance=$modal.open({templateUrl:modalFile,controller:ctrl,backdrop:"static",resolve:{titleModal:function(){return title},type:function(){return type}}});modalInstance.result.then(function(result){"function"==typeof success&&success(result)},function(){})},launchModalBase=function(title,message,ctrl,modalFile,success,dismiss,object){var modalInstance=$modal.open({templateUrl:modalFile,controller:ctrl,backdrop:"static",resolve:{title:function(){return title},message:function(){return message},object:function(){return object}}});modalInstance.result.then(function(result){"function"==typeof success&&success(result)},function(){"function"==typeof dismiss&&dismiss()})},launch={};return launch.VALIDATION=function(dossier,success){launchModalDossier("Validation de dossiers",!0,ValidationController,"partials/modals/validationModal.html",success,dossier,!0)},launch.TDT_HELIOS=function(dossier,success){launchModalDossier("Envoi de dossier(s) - HELIOS",!0,TdTHeliosController,"partials/modals/tdtModal.html",success,dossier)},launch.TDT_ACTES=function(dossier,success){launchModalDossier("Envoi du dossier vers la plateforme S²LOW (Actes)",!0,TdTActesController,"partials/modals/actesModal.html",success,dossier)},launch.REMORD=function(dossier,success){launchModalDossier($filter("translate")("confirmationModal.get_back_confirmation"),!0,RemorseController,"partials/modals/confirmationModal.html",success,dossier)},launch.SUPPRESSION=function(dossier,success){launchModalDossier($filter("translate")("confirmationModal.delete_confirmation"),!0,DeleteController,"partials/modals/confirmationModal.html",success,dossier)},launch.EMAIL=function(dossier,success){launchModalDossier("Envoi de mail",!1,MailController,"partials/modals/mailModal.html",success,dossier)},launch.REJET=function(dossier,success){launchModalDossier("Rejet",!0,RejectController,"partials/modals/rejectModal.html",success,dossier)},launch.MAILSEC=function(dossier,success){launchModalDossier("Envoyer par Mail Sécurisé",!0,MailSecController,"partials/modals/mailsecModal.html",success,dossier)},launch.MAILSECINFOS=function(dossier,success){launchModalDossier("Etat du dossier sur la plate-forme de Mail Securisé",!0,MailSecInfosController,"partials/modals/mailsecInfosModal.html",success,dossier)},launch.SECRETARIAT=function(dossier,success){launchModalDossier($filter("translate")("confirmationModal.secretariat_confirmation"),!0,SecretariatController,"partials/modals/confirmationModal.html",success,dossier)},launch.ARCHIVAGE=function(dossier,success){launchModalDossier("Archivage",!0,ArchivageController,"partials/modals/archiveModal.html",success,dossier)},launch.PRINT=function(dossier,success){launchModalDossier("Imprimer le dossier",!1,PrintController,"partials/modals/printModal.html",success,dossier)},launch.JOURNAL=function(dossier,success){launchModalDossier("Journal d'événements",!1,JournalController,"partials/modals/journalModal.html",success,dossier)},launch.PROPERTIES=function(dossier,success){launchModalDossier("Propriétés du noeud",!1,PropertiesController,"partials/modals/propertiesModal.html",success,dossier)},launch.RAZ=function(dossier,success){launchModalDossier($filter("translate")("confirmationModal.recovery_confirmation"),!0,RazController,"partials/modals/confirmationModal.html",success,dossier)},launch.MOVE=function(dossier,success){launchModalDossier("Transfert du dossier",!1,MoveController,"partials/modals/moveModal.html",success,dossier)},launch.AVIS_COMPLEMENTAIRE=function(dossier,success){launchModalDossier("Demande d'avis complémentaire",!0,AvisCompController,"partials/modals/validationModal.html",success,dossier)},launch.TRANSFERT_SIGNATURE=function(dossier,success){launchModalDossier("Transférer le dossier à signer",!0,ChangeSigController,"partials/modals/validationModal.html",success,dossier)},launch.TRANSFERT_VISA=function(dossier,success){launchModalDossier("Transférer le dossier à viser",!0,ChangeVisaController,"partials/modals/validationModal.html",success,dossier)},launch.TRANSFERT=function(dossier,success){launchModalDossier("Transférer les dossiers",!0,ChangeVisaController,"partials/modals/validationModal.html",success,dossier)},launch.CACHET=function(dossier,success){launchModalDossier("Cachet serveur",!0,CachetCompController,"partials/modals/validationModal.html",success,dossier)},launch.NOTIFICATIONS=function(dossier,success){launchModalDossier("Notifier et ajouter un droit de consultation",!1,NotificationsController,"partials/modals/notificationModal.html",success,dossier)},launch.READ=function(dossier,success){launchModalDossier("Lecture du dossier obligatoire",!1,MandatoryReadController,"partials/modals/mandatoryReadModal.html",success,dossier)},launch.PAPIER=function(dossier,success){launchModalDossier("Confirmation de signature papier",!1,SignPapierConfirmController,"partials/modals/signPapierConfirmationModal.html",success,dossier)},launch.PAPIERSIGN=function(dossier,success){launchModalDossier("Confirmation de signature papier",!0,SignPapierController,"partials/modals/signPapierModal.html",success,dossier)},launch.CHAIN=function(dossier,success){launchModalDossier("Enchaîner un circuit",!0,ChainController,"partials/modals/chainModal.html",success,dossier)},launch.OverrideS2low=function(type,success){launchModalType("Surcharger le connecteur - "+type.id,OverrideS2lowController,"partials/modals/overrideS2low.html",success,type)},launch.SimpleConfirmation=function(infos,success,dismiss){launchModalBase(infos.title,infos.message,infos.ctrl,"partials/modals/simpleConfirmationModal.html",success,dismiss)},launch.SimpleInput=function(infos,success){launchModalBase(infos.title,infos.message,infos.ctrl,"partials/modals/inputModal.html",success)},launch.base=function(infos,success,dismiss){launchModalBase(infos.title,infos.message,infos.ctrl,infos.template,success,dismiss,infos.object)},{action:{VALIDATION:"VALIDATION",TDT_ACTES:"TDT_ACTES",TDT_HELIOS:"TDT_HELIOS",REMORD:"REMORD",SUPPRESSION:"SUPPRESSION",EMAIL:"EMAIL",REJET:"REJET",SECRETARIAT:"SECRETARIAT",ARCHIVAGE:"ARCHIVAGE",PRINT:"PRINT",JOURNAL:"JOURNAL",RAZ:"RAZ",CACHET:"CACHET"},launch:function(action,object,success,dismiss){~Object.keys(launch).indexOf(action)&&launch[action](object,success,dismiss)}}}]),$.arrayIntersect=function(a,b){return $.grep(a,function(i){return $.inArray(i,b)>-1})},$.fn.draghover=function(options){return this.each(function(){var collection=$(),self=$(this);self.on("dragenter",function(e){0===collection.length&&self.trigger("draghoverstart"),collection=collection.add(e.target)}),self.on("dragleave drop",function(e){collection=collection.not(e.target),0===collection.length&&self.trigger("draghoverend")})})},navigator.browserInfo=function(){var tem,N=navigator.appName,ua=navigator.userAgent;if(null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(ua)){var M=["Internet Explorer"];return M&&null!=(tem=ua.match(/rv:([0-9]{1,}[\.0-9]{0,})/))&&(M[2]=tem[1]),M=M?[M[0],M[2]]:[N,navigator.appVersion,"-?"]}var M=ua.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return M&&null!=(tem=ua.match(/version\/([\.\d]+)/i))&&(M[2]=tem[1]),M=M?[M[1],M[2]]:[N,navigator.appVersion,"-?"]};var userModule=angular.module("userModule",[]);userModule.factory("navigationService",["Bureaux","$rootScope",function(Bureaux,$rootScope){"use strict";var idStorage="ip-navigation",obj={isLoggedIn:!0,corbeille:"a-traiter",bureauCourant:{},dossierCourant:{},dash:{hasNext:!1,hasPrev:!1,currentChamp:"cm:created",ascBase:!1,skipped:[0],pendingNumber:[0],currentPage:0,filter:""},archives:{hasNext:!1,hasPrev:!1,currentChamp:"cm:created",ascBase:!1,skipped:[0],currentPage:0,filter:""},currentFilter:{types:[],subtypes:[],metadonnees:[]},currentFilterArchive:{},hasToSetDefaultFilter:!0,hasToReset:!1},tmpStr=localStorage[idStorage],tmp=void 0!==tmpStr?$.parseJSON(tmpStr):null;return null!==tmp&&($.extend(obj,tmp),obj.bureauCourant.id&&Bureaux.query(function(result){var i,idToFind=obj.bureauCourant.id;for(i=0;i<result.length;i++)if(result[i].id===idToFind){obj.bureauCourant=result[i],$rootScope.currentBureau=result[i];break}})),$(window).on("beforeunload",function(){obj.hasToReset?localStorage.removeItem(idStorage):localStorage[idStorage]=JSON.stringify(obj)}),obj}]).factory("preferences",["configuration","$http","$translate",function(configuration,$http,$translate){"use strict";var idStorage="ip-preferences",api={CHANGEPASS:configuration.ALFRESCO+"person/changepassword/"+configuration.username,PREFS:configuration.ALFRESCO+"people/"+configuration.username+"/preferences"},paths={base:"org.adullact.iparapheur",LANG:{path:"language"},THEME:{path:"theme"},DISDELEG:{path:"displayDelegation"},FILTERDEFAULT:{path:"filterDefault"},DASHLETS:{path:"dashletsPosition",remove:!0},VIEWXEM:{path:"viewXemelios"},PAGESIZE:{path:"pagesize"},COLDASH:{path:"enabledColumns",remove:!0},PAGESIZEARCH:{path:"pagesizeArchives"},COLARCH:{path:"enabledColumnsArchives",remove:!0},CRON:{path:"notifications",remove:!0},BUREAUXORDER:{path:"bureauxOrder"},COLORATION:{path:"coloration",remove:!0},FILTERS:{path:"savedFilters"},ASC:{path:"asc"},PROPSORT:{path:"propSort"}},prefs={isDefault:!0,language:"fr",pagesize:10,pagesizeArchives:10,displayDelegation:!0,propSort:"cm:title",filterDefault:"",asc:!0,enabledColumns:{c0:"title",c1:"actionDemandee",c2:"type",c3:"bureauName",c4:"dateLimite",c5:"dateEmission",c6:"banetteName"},enabledColumnsArchives:{c0:"title",c1:"creator",c2:"type",c3:"created",c4:"telechargements"},dashletsPosition:{right:{c0:{name:"nom-dossier",show:"true"},c1:{name:"circuit",show:"true"},c2:{name:"details-dossier",show:"true"},c3:{name:"postit",show:"true"},c4:{name:"annotindex",show:"true"},c5:{name:"annoter",show:"true"},c6:{name:"annotations",show:"true"}},left:{c0:{name:"liste-dossiers",show:"true"}}},theme:"default",savedFilters:{},notifications:{enabled:!0,dailydigest:{enabled:!1},digest:{cron:"0 0/10 * * * ?"},mail:"",mode:"always"},coloration:"[]"},init=!1,tmpStr=localStorage[idStorage],tmp=void 0!==tmpStr?$.parseJSON(tmpStr):null,extendDeep=function extendDeep(dst){return angular.forEach(arguments,function(obj){obj!==dst&&angular.forEach(obj,function(value,key){dst[key]&&dst[key].constructor&&dst[key].constructor===Object?extendDeep(dst[key],value):dst[key]=value})}),dst},correctDoubleColumn=function(){var orderedColumn={};Object.keys(prefs.enabledColumns).sort().forEach(function(key){orderedColumn[key]=prefs.enabledColumns[key]});var array=$.map(orderedColumn,function(value,index){return[value]}),uniqueCols=[];$.each(array,function(i,el){-1===$.inArray(el,uniqueCols)&&uniqueCols.push(el)}),prefs.enabledColumns={},$.each(uniqueCols,function(i,el){prefs.enabledColumns["c"+i]=el})},initPreferences=function(success){return prefs.isDefault&&!init?$http.get(api.PREFS).success(function(resp){try{var notifs=prefs.notifications;resp.org.adullact.iparapheur.notifications&&(extendDeep(prefs.notifications,resp.org.adullact.iparapheur.notifications),notifs=prefs.notifications),angular.extend(prefs,resp.org.adullact.iparapheur),prefs.notifications=notifs,prefs.isDefault=!1,$translate.use(prefs.language),correctDoubleColumn()}catch(e){console.log(e)}finally{"function"==typeof success&&success(prefs),init=!0}}):($translate.use(prefs.language),"function"==typeof success&&success(prefs)),prefs},ret={},changePassword=function(oldPassword,newPassword){angular.copy({},ret);var params={userName:configuration.username,oldpw:oldPassword,newpw:newPassword};return $http.post(api.CHANGEPASS,params).success(function(resp){angular.copy(resp,ret)}).error(function(){angular.copy({error:!0},ret)}),ret},removeProperty=function(key,success){$http["delete"](api.PREFS+"?pf="+paths.base+"."+key).success(function(){"function"==typeof success&&success()})},changeProperty=function(key,value,success){var change=function(){var params={};params[paths.base+"."+key.path]=value,prefs[key.path]=value,$http.post(api.PREFS,params).success(success)};key.remove?removeProperty(key.path,change):change()},saveFilter=function(name,value){var params={};params[paths.base]={},params[paths.base][paths.FILTERS.path]={},params[paths.base][paths.FILTERS.path][name.replace(/-/g,"")]=JSON.stringify(value),prefs.savedFilters[name.replace(/-/g,"")]=JSON.stringify(value),$http.post(api.PREFS,params)},removeFilter=function(key,success){delete prefs.savedFilters[key],$http["delete"](api.PREFS+"?pf="+paths.base+".savedFilters."+encodeURIComponent(key)).success(function(){"function"==typeof success&&success()})};return null!==tmp&&(init=!0,tmp.enabledColumns&&(prefs.enabledColumns={}),$.extend(prefs,tmp)),$(window).on("beforeunload",function(){localStorage[idStorage]=JSON.stringify(angular.copy(prefs))}),{paths:paths,changeProperty:changeProperty,initPreferences:initPreferences,changePassword:changePassword,saveFilter:saveFilter,removeFilter:removeFilter,removeProperty:removeProperty}}]);var utilsModule=angular.module("utilsModule",[]);utilsModule.factory("utils",[function(){return{diff:function(base,edited){var type=typeof edited;if("string"===type||"boolean"===type){if(base!==edited)return edited}else if(edited instanceof Array){if(!this.isArrayEqual(base,edited))return edited}else if("object"===type){if(!$.isEmptyObject(base)&&!$.isEmptyObject(edited)){for(var newObj={},keys=Object.keys(edited),i=0;i<keys.length;i++)if("$"!==keys[i].substring(0,1)){var obj=this.diff(base[keys[i]],edited[keys[i]]);obj=null===obj?"":obj,void 0!==obj&&(newObj[keys[i]]=obj)}return $.isEmptyObject(newObj)?void 0:newObj}if(!$.isEmptyObject(base)||!$.isEmptyObject(edited))return edited}return void 0},isArrayEqual:function(arr1,arr2){var equal=!0;if(null==arr1||null==arr2){if(arr1!==arr2)return!1}else if(arr1.length!==arr2.length)equal=!1;else if(0!=arr1.length)for(var i=0;i<arr1.length;i++)if(void 0!==this.diff(arr2[i],arr1[i])){equal=!1;break}return equal},reorderBureaux:function(bureaux){for(var max=0,min=Number.MAX_VALUE,assocsBureaux={},i=0;i<bureaux.length;i++){var profondeur=bureaux[i].profondeur;assocsBureaux[profondeur]||(assocsBureaux[profondeur]={}),profondeur>max&&(max=profondeur),min>profondeur&&(min=profondeur),assocsBureaux[profondeur][bureaux[i].id]=bureaux[i]}for(var j=max;j>min;j--)angular.forEach(assocsBureaux[j],function(value){assocsBureaux[j-1][value.hierarchie].child||(assocsBureaux[j-1][value.hierarchie].child=[]),assocsBureaux[j-1][value.hierarchie].child.push(value)});var ordered=[];return angular.forEach(assocsBureaux[min],function(value,key){ordered.push(value)}),ordered},reorderGroupes:function(nodes){for(var node,map={},roots=[],i=0;i<nodes.length;i+=1)node=nodes[i],node.subGroups=[],map[node.shortName]=i,void 0!=node.parent&&void 0!=nodes[map[node.parent]]?nodes[map[node.parent]].subGroups.push(node):roots.push(node);return roots},windowSize:function(){var myWidth=0,myHeight=0;return"number"==typeof window.innerWidth?(myWidth=window.innerWidth,myHeight=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(myWidth=document.documentElement.clientWidth,myHeight=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(myWidth=document.body.clientWidth,myHeight=document.body.clientHeight),{width:myWidth,height:myHeight}},generateFilter:function(filterObj){var filter={};if(filter.and=[],filterObj.dateFrom||filterObj.dateTo){var str="[";str+=filterObj.dateFrom?filterObj.dateFrom:"MIN",str+=filterObj.dateTo?" TO "+filterObj.dateTo+"]":" TO MAX]",filter.and.push({"cm:created":str})}if(void 0!==filterObj.title&&""!==filterObj.title&&filter.and.push({or:[{"cm:title":"*"+filterObj.title+"*"},{"cm:name":"*"+filterObj.title+"*"}]}),void 0!==filterObj.types){filter.and.push({or:[]});for(var i=0;i<filterObj.types.length;i++)filter.and[filter.and.length-1].or.push({"ph:typeMetier":filterObj.types[i]})}if(void 0!==filterObj.subtypes){filter.and.push({or:[]});for(var j=0;j<filterObj.subtypes.length;j++)filter.and[filter.and.length-1].or.push({"ph:soustypeMetier":filterObj.subtypes[j]})}var buildMeta={};if(void 0!==filterObj.metadonnees){for(var k=0;k<filterObj.metadonnees.length;k++)void 0===buildMeta[filterObj.metadonnees[k].id]&&(buildMeta[filterObj.metadonnees[k].id]=[]),buildMeta[filterObj.metadonnees[k].id].push(filterObj.metadonnees[k]);for(var key in buildMeta){var type=buildMeta[key][0].type;filter.and.push({or:[]});for(var l=0;l<buildMeta[key].length;l++){var metadonnee=buildMeta[key][l],obj={};"STRING"===type?obj[metadonnee.id]="*"+metadonnee.text+"*":"DATE"===type?(str="[",str+=void 0!==metadonnee.dateFrom?metadonnee.dateFrom:"MIN",str+=void 0!==metadonnee.dateTo?" TO "+metadonnee.dateTo+"]":" TO MAX]",obj[metadonnee.id]=str):obj[metadonnee.id]=metadonnee.text,filter.and[filter.and.length-1].or.push(obj)}}}return filter}}}]);var directives=angular.module("appParapheur.directives",["userModule","baseModule"]);directives.directive("checkStrength",function(){return{require:"ngModel",link:function(scope,elm,attrs,ctrl){var strengthBase=attrs.checkStrength?attrs.checkStrength:"ln6",minLength=parseInt(strengthBase.replace(/[^0-9\.]/g,""),10);ctrl.$parsers.unshift(function(p){var _regex=/[$-\/:-?{-~!"^_`\[\]]/g;if(strengthBase.indexOf("l")>-1){var _lowerLetters=/[a-z]+/.test(p);ctrl.$setValidity("_lowerletters",_lowerLetters)}if(strengthBase.indexOf("u")>-1){var _upperLetters=/[A-Z]+/.test(p);ctrl.$setValidity("_upperletters",_upperLetters)}if(strengthBase.indexOf("n")>-1){var _numbers=/[0-9]+/.test(p);ctrl.$setValidity("_numbers",_numbers)}if(strengthBase.indexOf("s")>-1){var _symbols=_regex.test(p);ctrl.$setValidity("_symbols",_symbols)}return ctrl.$setValidity("_length",p.length>=minLength),p})}}}).directive("uiMultiple",function(){return{restrict:"A",link:function(scope,element,attrs){var id=element[0].id;scope.$watch(attrs.uiMultiple,function(value){value?$("#"+id).attr("multiple","multiple"):$("#"+id).removeAttr("multiple")},!0)}}}).directive("fileupload",function($filter){return{scope:{fileAdded:"&",uploadSuccess:"&",uploadFinish:"&",uploadError:"&",wrongType:"&",signatureFormat:"&",protocol:"&",checkIfExist:"&",mainDocument:"&",existFile:"&"},link:function($scope,element,attrs){var oneFile=attrs.oneFile,iframeTransport=isBrowserIE,nbrFiles=0,fileAdd=function(event){event.data.data.submit().success(function(resp){nbrFiles--,"function"==typeof $scope.uploadSuccess&&$scope.uploadSuccess({data:resp,index:event.data.index}),"function"==typeof $scope.uploadFinish&&0===nbrFiles&&$scope.uploadFinish({data:resp,index:event.data.index})}).error(function(resp){nbrFiles--,"function"==typeof $scope.uploadError&&$scope.uploadError({data:resp,index:event.data.index}),"function"==typeof $scope.uploadFinish&&0===nbrFiles&&$scope.uploadFinish({data:resp,index:event.data.index})})};$(element).fileupload({forceIframeTransport:iframeTransport,sequentialUploads:!0,singleFileUploads:!0,dropZone:$(attrs.dropzone),dataType:"json",pasteZone:"",add:function(e,data){nbrFiles++;var document=0,ext=$filter("fileext")(data.files[0].name).toLowerCase();if("function"==typeof $scope.checkIfExist&&$scope.checkIfExist({name:data.files[0].name}))"function"==typeof $scope.existFile&&$scope.existFile({name:data.files[0].name});else{for(var types=attrs.fileupload.split("|"),isForSig=!1,validRegex="(?:",i=0;i<types.length;i++)i>0&&(validRegex+="|"),("image"===types[i]||"document"===types[i])&&(validRegex+="gif|jpg|jpeg|png","document"===types[i]&&(validRegex+="|")),"document"===types[i]&&(validRegex+="pptx|pdf|doc|odt|htm|html|rtf|txt|xls|ods|ppt|odp|docx|xlsx|xml"),"pdf"===types[i]&&(validRegex+="pdf"),"certificat"===types[i]&&(validRegex+="p12"),"certificat-pub"===types[i]&&(validRegex+="pem|cer|crt"),"signature"===types[i]&&(validRegex+="xml|sig|p7s",isForSig=!0),"zip"===types[i]&&(validRegex+="zip");validRegex+=")$";var isValidExtension=new RegExp(validRegex,"i").test(ext),isAuthorizedExtension=!0,protocol=$scope.protocol(),signatureFormat=$scope.signatureFormat(),isFormatCompatibleWithXml=!signatureFormat||0===signatureFormat.toUpperCase().indexOf("PKCS#1")||0===signatureFormat.toUpperCase().indexOf("XADES")||0===signatureFormat.toUpperCase().indexOf("PKCS#7"),isProtocolCompatibleWithXml=!protocol||0===protocol.toUpperCase().indexOf("HELIOS")||0===protocol.toUpperCase().indexOf("AUCUN"),isMainDocument=$scope.mainDocument(),isXmlAuthorized=isMainDocument&&isFormatCompatibleWithXml&&isProtocolCompatibleWithXml;isXmlAuthorized||"XML"!==ext.toUpperCase()||isForSig||(isAuthorizedExtension=!1);var isPades=!!signatureFormat&&0===signatureFormat.toUpperCase().indexOf("PADES"),isPdf="PDF"===ext.toUpperCase();isPades&&isMainDocument&&!isPdf&&0!==protocol.toUpperCase().indexOf("ACTES")&&(isAuthorizedExtension=!1),ext.length>0&&isValidExtension&&isAuthorizedExtension?($scope.$apply(function(){$scope.files=data.files}),"function"==typeof $scope.fileAdded&&(document=$scope.fileAdded({files:data.files})),0!==$(attrs.submitButton).length?(oneFile&&$(attrs.submitButton).unbind("click",fileAdd),$(attrs.submitButton).bind("click",{data:data,index:document},fileAdd)):data.submit().success(function(resp){nbrFiles--,"function"==typeof $scope.uploadSuccess&&$scope.uploadSuccess({data:resp,index:document}),"function"==typeof $scope.uploadFinish&&0===nbrFiles&&$scope.uploadFinish({data:resp,index:document})}).error(function(resp){nbrFiles--,"function"==typeof $scope.uploadError&&$scope.uploadError({data:resp,index:document}),"function"==typeof $scope.uploadFinish&&0===nbrFiles&&$scope.uploadFinish({data:resp,index:document})})):"function"==typeof $scope.wrongType&&$scope.wrongType({ext:ext,isValid:isValidExtension,isAuthorized:isAuthorizedExtension})}}})}}}).directive("integer",function(){return{require:"ngModel",link:function(scope,elm,attrs,ctrl){ctrl.$parsers.unshift(function(viewValue){return/^\-?\d*$/.test(viewValue)?(attrs.min||(attrs.min=0),attrs.max||(attrs.max=Number.MAX_VALUE),ctrl.$setValidity("integer",!0),parseInt(viewValue)>attrs.max||parseInt(viewValue)<attrs.min?void ctrl.$setValidity("value",!1):(ctrl.$setValidity("value",!0),viewValue)):void ctrl.$setValidity("integer",!1)})}}}).directive("phNegativePattern",function(){return{require:"ngModel",link:function(scope,elm,attrs,ctrl){ctrl.$parsers.unshift(function(viewValue){var reg=new RegExp(attrs.phNegativePattern);return reg.test(viewValue)?void ctrl.$setValidity("pattern",!1):(ctrl.$setValidity("pattern",!0),viewValue)})}}}).directive("decimal",function(){return{require:"ngModel",link:function(scope,elm,attrs,ctrl){ctrl.$parsers.unshift(function(viewValue){return viewValue=viewValue.replace(",","."),/^(\d+\.?\d*|\.\d+)$/.test(viewValue)?(ctrl.$setValidity("decimal",!0),viewValue):viewValue?void ctrl.$setValidity("decimal",!1):viewValue})}}}).directive("confirmWith",function(){return{require:"ngModel",link:function(scope,elm,attrs,ctrl){scope.$watch(attrs.confirmWith+".newOne",function(value){value===elm.val()?ctrl.$setValidity("confirm",!0):ctrl.$setValidity("confirm",!1)}),ctrl.$parsers.unshift(function(viewValue){return scope[attrs.confirmWith].newOne===elm.val()?(ctrl.$setValidity("confirm",!0),viewValue):void ctrl.$setValidity("confirm",!1)})}}}).directive("diffCurrent",function(){return{require:"ngModel",link:function(scope,elm,attrs,ctrl){scope.$watch(attrs.diffCurrent,function(value){var v=attrs.attr?value[attrs.attr]:value;v===elm.val()?ctrl.$setValidity("confirm",!1):ctrl.$setValidity("confirm",!0)},!0),ctrl.$parsers.unshift(function(viewValue){var v=attrs.attr?scope[attrs.diffCurrent][attrs.attr]:scope[attrs.diffCurrent];return v===viewValue?void ctrl.$setValidity("confirm",!1):(ctrl.$setValidity("confirm",!0),viewValue)})}}}).directive("diffArray",function(){return{require:"ngModel",link:function(scope,elm,attrs,ctrl){scope.$watch(attrs.diffArray,function(value){for(var validity=!0,i=0;i<value.length;i++)if(value[i][attrs.attr]===elm.val()){validity=!1;break}ctrl.$setValidity("isdiff",validity)},!0),ctrl.$parsers.unshift(function(viewValue){for(var value=scope[attrs.diffArray],validity=!0,toRet=viewValue,i=0;i<value.length;i++)if(value[i][attrs.attr]===viewValue){validity=!1,toRet=void 0;break}return ctrl.$setValidity("isdiff",validity),toRet})}}}).directive("requiredWhenChanged",function(){return{require:"ngModel",link:function(scope,elm,attrs,ctrl){var changed=!1;ctrl.$parsers.unshift(function(viewValue){return""===viewValue&&changed?void ctrl.$setValidity("required",!1):(ctrl.$setValidity("required",!0),changed=!0,viewValue)})}}}).directive("requiredIfShow",function(){return{require:"ngModel",link:function(scope,elm,attrs,ctrl){ctrl.$parsers.unshift(function(viewValue){return""===viewValue&&$(elm).is(":visible")?void ctrl.$setValidity("required",!1):(ctrl.$setValidity("required",!0),viewValue)})}}}).directive("ipDatepicker",function(){return{restrict:"A",require:"ngModel",scope:{ipId:"="},link:function(scope,element,attrs,ctrl){var returnFormat=attrs.returnFormat?attrs.returnFormat:"yy-mm-dd",viewFormat=attrs.viewFormat?attrs.viewFormat:"dd/mm/yy";ctrl.$formatters.push(function(value){if(value){var d=new Date(value);isNaN(d.getTime())&&(d=$.datepicker.parseDate("@",value,$.datepicker.regional[""])),value=$.datepicker.formatDate(viewFormat,d)}return value}),ctrl.$render=function(){if(ctrl.$viewValue){var d=new Date(ctrl.$viewValue);isNaN(d.getTime())&&(d=$.datepicker.parseDate("D M dd 00:00:00 CEST yy",ctrl.$viewValue,$.datepicker.regional[""])),$(element).attr("value",$.datepicker.formatDate(viewFormat,d)),$(element).datepicker("setDate",$.datepicker.formatDate(viewFormat,d))}else $.datepicker._clearDate($(element))},scope.ipId&&$(element).attr("id",scope.ipId);var onSelect=function(dateText){dateText&&scope.$apply(function(){if("timestamp"===returnFormat){var datetime=$(element).datepicker("getDate").valueOf()+1e5;ctrl.$setViewValue(datetime)}else ctrl.$setViewValue($.datepicker.formatDate(returnFormat,$(element).datepicker("getDate")))}),attrs.linked&&(attrs.from?($(element).datepicker("option","maxDate",$(attrs.linked).datepicker("getDate")),$(attrs.linked).datepicker("option","minDate",dateText)):($(element).datepicker("option","minDate",$(attrs.linked).datepicker("getDate")),$(attrs.linked).datepicker("option","maxDate",dateText)))},opt={onSelect:function(dateText){onSelect(dateText)}};attrs.minDate&&(opt.minDate=attrs.minDate),attrs.maxDate&&(opt.maxDate=attrs.maxDate),$(element).datepicker(opt),element.on("$destroy",function(){$(element).datepicker("destroy")})}}}),directives.directive("strengthResult",function(){return{terminal:!1,templateUrl:"partials/passwordStrength.html",transclude:!0,scope:{error:"="},link:function($scope,element,attrs){var strengthBase=attrs.strengthResult?attrs.strengthResult:"ln6";$scope.minLength=parseInt(strengthBase.replace(/[^0-9\.]/g,""),10)}}}).directive("focusMe",function($timeout){return{scope:{trigger:"@focusMe"},link:function(scope,element){scope.$watch("trigger",function(value){"true"===value&&$timeout(function(){element[0].focus()})})}}}).directive("copySize",function($timeout){return{link:function($scope,element,attrs){var resize=function(){$(element).children("thead").css({visibility:"hidden"}),$timeout(function(){var obj=$("#"+attrs.copySize),off=obj.offset();void 0!=off&&($(element).css({top:off.top}),$(element).width(obj.children("table").width()),$(element).children("thead").css({visibility:"visible"}),$(element).show())})};$timeout(function(){resize()}),$(window).resize(function(){resize()}),$(window).on("animBegin",function(){$(element).hide()})}}}).directive("libersign",function(){return{scope:{success:"&",cancel:"&",loaded:"&",signatures:"=",signatureInformations:"=",ready:"="},link:function($scope,element,attrs){$scope.$watch("ready",function(){$scope.ready&&$(element).libersign({signatureInformations:$scope.signatureInformations,extensionUpdateUrl:"/libersign/",installRedirect:"#/about"}).on("libersign.cancel",function(){$scope.cancel()}).on("libersign.sign",function(event,sign){angular.extend($scope.signatures,sign),$scope.success()}).on("libersign.loaded",function(){$scope.loaded()})}),element.on("$destroy",function(){$(element).libersign("destroy")})}}}).directive("i18n",function(i18nService){return{restrict:"A",link:function(scope,element,attrs){attrs.watchValue&&scope.$watch(attrs.watchValue,function(){i18nService.apply(element,attrs)},!0),i18nService.apply(element,attrs)}}}).directive("phLoad",["$parse",function($parse){return{restrict:"A",link:function(scope,elem,attrs){var fn=$parse(attrs.phLoad);elem.on("load",function(event){scope.$apply(function(){fn(scope,{$event:event})})})}}}]).directive("bnSlideShow",function(){function link($scope,element,attributes){var expression=attributes.bnSlideShow,duration=attributes.slideShowDuration||"fast";$scope.$eval(expression)||element.hide(),$scope.$watch(expression,function(newValue,oldValue){newValue!==oldValue&&(newValue?element.stop(!0,!0).slideDown(duration):element.stop(!0,!0).slideUp(duration,function(){attributes["delete"]&&$(element).remove()}))})}return{link:link,restrict:"A"}}).directive("bsTab",function(){return{link:function(scope,element,attrs){scope.$on("reinitTab",function(){$($(element).parent().parent().children()[0]).find("a").tab("show")}),$(element).click(function(e){e.preventDefault(),$(element).tab("show")})}}}).directive("spinner",function(){return{link:function(scope,element,attrs){var konami_keys=[38,38,40,40,37,39,37,39,66,65],konami_index=0;$(document).keydown(function(e){e.keyCode===konami_keys[konami_index++]?konami_index===konami_keys.length&&$("i").addClass("fa-spin"):konami_index=0})}}}).directive("ipSlide",function(){return{restrict:"A",link:function(scope,element,attrs){$(element).on("click",function(){var $elem=$(attrs.ipSlide);$elem.is(":visible")?($(window).trigger("animBegin"),$elem.slideUp({complete:function(){$(window).trigger("resize")}})):($(window).trigger("animBegin"),$elem.slideDown({complete:function(){$(window).trigger("resize")}}))})}}}).directive("notify",function(){return{restrict:"A",scope:{text:"="},link:function(scope,element){scope.$watch("text",function(){scope.text&&$(element).notify({message:{type:"bl",text:scope.text}}).show()})}}}).directive("bureau",function(navigationService,configuration,$rootScope){return{terminal:!1,templateUrl:"partials/bureau.html",transclude:!0,scope:{b:"=",onSelect:"&"},link:function($scope,element,attrs){$scope.isThumbnail="true"===attrs.isThumbnail,$scope.context=configuration.context;var corbeilleDefined=!!navigationService.currentFilter.dossier,goToDashboard=function(){corbeilleDefined||(navigationService.hasToSetDefaultFilter=!0,$scope.b.isSecretaire?navigationService.currentFilter.dossier="secretariat":navigationService.currentFilter.dossier="a-traiter"),
navigationService.dash.currentPage=0,navigationService.currentPage=0,navigationService.hasNext=!1,$scope.isThumbnail&&$scope.onSelect({bureau:$scope.b})};$scope.goToDashboard=function(){goToDashboard()},$scope.retard=function(){$scope.b.isSecretaire?navigationService.currentFilter.dossier="a-imprimer":navigationService.currentFilter.dossier="en-retard",navigationService.hasToSetDefaultFilter=!1,$scope.$emit("getDossiers"),corbeilleDefined=!0},$scope.delegue=function(){navigationService.currentFilter.dossier="dossiers-delegues",navigationService.hasToSetDefaultFilter=!1,$scope.$emit("getDossiers"),corbeilleDefined=!0},$scope.traiter=function(){$scope.b.isSecretaire?navigationService.currentFilter.dossier="secretariat":navigationService.currentFilter.dossier="a-traiter",navigationService.hasToSetDefaultFilter=!1,$scope.$emit("getDossiers"),corbeilleDefined=!0},$scope.archive=function(){navigationService.currentFilter.dossier="a-archiver",navigationService.hasToSetDefaultFilter=!1,$scope.$emit("getDossiers"),corbeilleDefined=!0},$scope.retournes=function(){$scope.b.isSecretaire?navigationService.currentFilter.dossier="a-imprimer":navigationService.currentFilter.dossier="retournes",navigationService.hasToSetDefaultFilter=!1,$scope.$emit("getDossiers"),corbeilleDefined=!0},$scope.preparation=function(){navigationService.currentFilter.dossier="en-preparation",navigationService.hasToSetDefaultFilter=!1,$scope.$emit("getDossiers"),corbeilleDefined=!0}},controller:function($scope){$scope.hasThemeIcon=!1,$scope.iconBureauLoaded=function(){$scope.$apply(function(){$scope.hasThemeIcon=!0})},$rootScope.config&&($scope.theme=$rootScope.config.theme,$scope.tenant=$rootScope.config.tenant)}}}).directive("ipInitial",function(){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,ctrl){ctrl.$render=function(){"checkbox"===$(element).attr("type")?$(element).attr("checked",attrs.ipInitial):$(element).val(attrs.ipInitial)}}}}).directive("bsModal",function($templateCache,$compile){return{terminal:!0,link:function(scope,element,attrs){var dialogElement,dialogBodyElement,dialogFooterElement,dialogScope,dialogBodyTemplate=element.contents();element.remove(),scope.$watch(attrs.when,function(show){show?(dialogScope=scope,angular.extend(dialogScope,{title:attrs.title,primaryLabel:attrs.primaryLabel||"OK",secondaryLabel:attrs.secondaryLabel||"Annuler",modalForm:attrs.modalForm||void 0,primaryAction:function(){scope.$eval(attrs.primaryAction)},secondaryAction:function(){scope.$eval(attrs.secondaryAction)}}),dialogElement=$($(document.createElement("div")).html($templateCache.get("dialog-template")).children()[0]),$("body").append(dialogElement),$compile(dialogElement)(dialogScope),dialogBodyElement=dialogElement.find(".modal-body"),dialogFooterElement=dialogElement.find(".modal-footer"),dialogBodyElement.append(dialogBodyTemplate),$compile(dialogBodyElement)(dialogScope),dialogElement.modal("show"),dialogElement.on("hidden.bs.modal",function(){dialogElement.find("form").removeClass(),dialogElement.find("form").addClass("ng-pristine ng-valid ng-valid-required"),dialogElement.find("input").removeClass("ng-dirty").addClass("ng-pristine"),scope[attrs.when]=!1,dialogElement.remove(),dialogElement=null}),attrs.checkDisabled&&scope.$watch(attrs.primaryDisabled,function(val){val?(dialogFooterElement.find(".btn-primary").removeAttr("disabled"),dialogFooterElement.find(".btn-primary").html(attrs.primaryLabel)):(dialogFooterElement.find(".btn-primary").attr("disabled",""),dialogFooterElement.find(".btn-primary").html(attrs.primaryWhenDisabled))})):show===!1&&dialogElement.modal("hide")})}}}).directive("bsPopover",["$parse","$compile","$http","$timeout","$q","$templateCache",function($parse,$compile,$http,$timeout,$q,$templateCache){return $("body").on("keyup",function(ev){27===ev.keyCode&&$(".popover.in").each(function(){$(this).popover("hide")})}),{restrict:"A",scope:!0,link:function(scope,element,attr,ctrl){var getter=$parse(attr.bsPopover),value=(getter.assign,getter(scope)),options={};angular.isObject(value)&&(options=value),$q.when(options.content||$templateCache.get(value)||$http.get(value,{cache:!0})).then(function(template){angular.isObject(template)&&(template=template.data),attr.unique&&element.on("show",function(ev){$(".popover.in").each(function(){var $this=$(this),popover=$this.data("popover");popover&&!popover.$element.is(element)&&$this.popover("hide")})}),attr.hide&&scope.$watch(attr.hide,function(newValue,oldValue){newValue?popover.hide():newValue!==oldValue&&popover.show()}),attr.show&&scope.$watch(attr.show,function(newValue,oldValue){newValue?$timeout(function(){popover.show()}):newValue!==oldValue&&popover.hide()}),element.popover(angular.extend({},options,{content:template,html:!0}));var popover=element.data("bs.popover");popover.hasContent=function(){return this.getTitle()||template},popover.getPosition=function(){var r=$.fn.popover.Constructor.prototype.getPosition.apply(this,arguments);return $compile(this.$tip)(scope),scope.$digest(),this.$tip.data("popover",this),r},scope.$popover=function(name){popover(name)},angular.forEach(["show","hide"],function(name){scope[name]=function(){popover[name]()}}),scope.dismiss=scope.hide,angular.forEach(["show","shown","hide","hidden"],function(name){element.on(name,function(ev){scope.$emit("popover-"+name,ev)})})})}}}]).directive("draggable",["$document",function($document){return{restrict:"A",link:function(scope,elm,attrs){function mousemove($event){var dy=$event.clientY-initialMouseY,my=startY+dy;if(newIndex=parseInt(attrs.index)+Math.round(dy/153),oldIndex!=newIndex){for(var old,newOne,etapes=scope.$eval(attrs.etapes),i=0;i<etapes.length;)etapes[i].index===newIndex&&(old=etapes[i]),etapes[i].index===oldIndex&&(newOne=etapes[i]),i++;old&&(old.index=oldIndex),newOne&&(newOne.index=newIndex),oldIndex=newIndex}return elm.attr("y",my),!1}function mouseup(){void 0!==newIndex&&attrs.index!=newIndex&&scope[attrs.dragged](attrs.index,newIndex),$document.unbind("mousemove",mousemove),$document.unbind("mouseup",mouseup)}var startY,initialMouseY,newIndex,oldIndex=attrs.index;elm.bind("mousedown",function($event){return startY=parseInt(elm.attr("y")),initialMouseY=$event.clientY,oldIndex=attrs.index,$document.bind("mousemove",mousemove),$document.bind("mouseup",mouseup),!1})}}}]).value("uiSortableConfig",{}).directive("uiSortable",["uiSortableConfig","$timeout","$log",function(uiSortableConfig,$timeout,$log){"use strict";return{require:"?ngModel",link:function(scope,element,attrs,ngModel){function combineCallbacks(first,second){return second&&"function"==typeof second?function(e,ui){first(e,ui),second(e,ui)}:first}var savedNodes,opts={},callbacks={receive:null,remove:null,start:null,stop:null,update:null};angular.extend(opts,uiSortableConfig),ngModel?(scope.$watch(attrs.ngModel+".length",function(){$timeout(function(){element.sortable("refresh")})}),callbacks.start=function(e,ui){ui.item.sortable={index:ui.item.index(),cancel:function(){ui.item.sortable._isCanceled=!0},isCanceled:function(){return ui.item.sortable._isCanceled},_isCanceled:!1}},callbacks.activate=function(){savedNodes=element.contents();var placeholder=element.sortable("option","placeholder");if(placeholder&&placeholder.element&&"function"==typeof placeholder.element){var phElement=placeholder.element();phElement.jquery||(phElement=angular.element(phElement));var excludes=element.find('[class="'+phElement.attr("class")+'"]');savedNodes=savedNodes.not(excludes)}},callbacks.update=function(e,ui){ui.item.sortable.received||(ui.item.sortable.dropindex=ui.item.index(),ui.item.sortable.droptarget=ui.item.parent(),element.sortable("cancel")),"clone"===element.sortable("option","helper")&&(savedNodes=savedNodes.not(savedNodes.last())),savedNodes.appendTo(element),ui.item.sortable.received&&!ui.item.sortable.isCanceled()&&scope.$apply(function(){ngModel.$modelValue.splice(ui.item.sortable.dropindex,0,ui.item.sortable.moved)})},callbacks.stop=function(e,ui){!ui.item.sortable.received&&"dropindex"in ui.item.sortable&&!ui.item.sortable.isCanceled()?scope.$apply(function(){ngModel.$modelValue.splice(ui.item.sortable.dropindex,0,ngModel.$modelValue.splice(ui.item.sortable.index,1)[0])}):"dropindex"in ui.item.sortable&&!ui.item.sortable.isCanceled()||"clone"===element.sortable("option","helper")||savedNodes.appendTo(element)},callbacks.receive=function(e,ui){ui.item.sortable.received=!0},callbacks.remove=function(e,ui){ui.item.sortable.isCanceled()||scope.$apply(function(){ui.item.sortable.moved=ngModel.$modelValue.splice(ui.item.sortable.index,1)[0]})},scope.$watch(attrs.uiSortable,function(newVal){angular.forEach(newVal,function(value,key){callbacks[key]&&("stop"===key&&(value=combineCallbacks(value,function(){scope.$apply()})),value=combineCallbacks(callbacks[key],value)),element.sortable("option",key,value)})},!0),angular.forEach(callbacks,function(value,key){opts[key]=combineCallbacks(value,opts[key])})):$log.info("ui.sortable: ngModel not provided!",element),element.sortable(opts)}}}]).directive("scrollbar",[function(){return{restrict:"A",link:function(scope,element,attr){$(element).mCustomScrollbar({advanced:{updateOnContentResize:!0}})}}}]).directive("pieChart",[function(){return{restrict:"A",scope:{pieTitle:"=",pieTooltip:"=",dataset:"="},link:function(scope,element,attr){var chart,id=$(element).attr("id");scope.$watch("dataset",function(){chart=new CanvasJS.Chart(id,{title:{text:scope.pieTitle,fontFamily:"arial black"},animationEnabled:!1,legend:{verticalAlign:"bottom",horizontalAlign:"center"},data:[{type:"pie",indexLabelFontFamily:"Garamond",indexLabelFontSize:20,indexLabelFontWeight:"bold",startAngle:0,indexLabelFontColor:"MistyRose",indexLabelLineColor:"darkgrey",indexLabelPlacement:"inside",toolTipContent:scope.pieTooltip,showInLegend:!0,indexLabel:"{percent}%",dataPoints:scope.dataset}]}),chart.render()},!0)}}}]).directive("chart",[function(){return{restrict:"A",scope:{datalength:"=",cumul:"=",dataset:"="},link:function(scope,element,attr){var chart,id=$(element).attr("id");scope.$watch("dataset",function(){var axisConf;axisConf=1==+scope.cumul?{valueFormatString:"DD/MM/YYYY",interval:1+scope.datalength/6,intervalType:"day"}:2===+scope.cumul?{valueFormatString:"DD/MM/YYYY",intervalType:"day"}:3===+scope.cumul?{valueFormatString:"MMM YYYY",interval:1+scope.datalength/6,intervalType:"month"}:{valueFormatString:"YYYY",intervalType:"year"},chart=new CanvasJS.Chart(id,{legend:{cursor:"pointer",itemclick:function(e){e.dataSeries.visible=!("undefined"==typeof e.dataSeries.visible||e.dataSeries.visible),chart.render()}},data:scope.dataset,toolTip:{shared:!0},axisX:axisConf,axisY:{title:"Nombre de dossiers"},axisY2:{title:"Temps de traitement (s)",stripLines:[{value:60,label:"1 minute"},{value:3600,label:"1 heure"},{value:86400,label:"1 jour"}]}}),chart.render()},!0)}}}]).directive("scrollTo",[function(){return{restrict:"A",scope:{scrollId:"@"},link:function(scope,element,attrs){$(element).click(function(){$(attrs.scrollTo).mCustomScrollbar("scrollTo","."+attrs.scrollId)})}}}]).directive("ngEnter",function(){return function(scope,element,attrs){element.bind("keydown keypress",function(event){13===event.which&&(scope.$apply(function(){scope.$eval(attrs.ngEnter)}),event.preventDefault())})}}).directive("abnTree",function($timeout,configuration){return{restrict:"E",templateUrl:"partials/abn_tree_template.html",scope:{treeData:"=",onSelect:"&",onClickCheck:"&",initialSelection:"=",search:"=",showCheck:"=",showDetail:"=",remove:"=",array:"=",checkRights:"=",identifier:"="},link:function(scope,element,attrs){$timeout(function(){$timeout(function(){var expand_level,for_each_branch,on_treeData_change,select_branch,selected_branch;return null==attrs.iconExpand&&(attrs.iconExpand="fa-plus-square-o"),null==attrs.iconCollapse&&(attrs.iconCollapse="fa-minus-square-o"),null==attrs.iconLeaf&&(attrs.iconLeaf="fa-sign-blank"),null==attrs.expandLevel&&(attrs.expandLevel="3"),expand_level=parseInt(attrs.expandLevel,10),scope.header=attrs.header,scope.treeData?(null==scope.treeData.length&&(null!=treeData.name?scope.treeData=[treeData]:alert("treeData should be an array of root branches")),for_each_branch=function(f){var do_f,root_branch,_i,_len,_ref,_results;for(do_f=function(branch,level){var child,_i,_len,_ref,_results;if(f(branch,level),null!=branch.child){for(_ref=branch.child,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)child=_ref[_i],_results.push(do_f(child,level+1));return _results}},_ref=scope.treeData,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)root_branch=_ref[_i],_results.push(do_f(root_branch,1));return _results},for_each_branch(function(b){return b.expanded=b.profondeur-1<expand_level}),selected_branch=null,select_branch=function(branch){if(branch!==selected_branch||!branch.selected){if(null!=selected_branch&&(selected_branch.selected=!1),branch.selected=!0,selected_branch=branch,null!=branch.onSelect)return $timeout(function(){return branch.onSelect(branch)});if(null!=scope.onSelect)return $timeout(function(){return scope.onSelect({branch:branch})})}},scope.isAdminFonctionnelOf=function(row){return configuration.isAdminFonctionnelOf(row.branch.id)},scope.user_clicks_branch=function(branch){return branch===selected_branch&&branch.selected?void 0:select_branch(branch)},scope.change_check_value=function(event,id){scope.onClickCheck({checked:event.currentTarget.checked,id:id})},scope.tree_rows=[],on_treeData_change=function(){scope.tree_rows=[];var add_branch_to_list,root_branch,_i,_len,_ref,_results;for(scope.tree_rows=[],for_each_branch(function(branch){branch.child&&branch.child.length>0}),add_branch_to_list=function(level,branch,visible){var child,child_visible,tree_icon,_i,_len,_ref,_results;if(null==branch.expanded&&(branch.expanded=!0),tree_icon=branch.child&&0!==branch.child.length?branch.expanded?attrs.iconCollapse:attrs.iconExpand:attrs.iconLeaf,scope.tree_rows.push({branch:branch,name:branch.name,tree_icon:tree_icon,visible:visible}),null!=branch.child){for(_ref=branch.child,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)child=_ref[_i],child_visible=visible&&branch.expanded,_results.push(add_branch_to_list(level+1,child,child_visible));return _results}},_ref=scope.treeData,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)root_branch=_ref[_i],_results.push(add_branch_to_list(1,root_branch,!0));return _results},null!=attrs.initialSelection&&for_each_branch(function(b){return b.name===attrs.initialSelection?select_branch(b):void 0}),scope.$on("expandAll",function(){for(var rows=scope.tree_rows,i=0;i<rows.length;i++)rows[i].branch.expanded=!0}),scope.$on("reduceAll",function(){for(var rows=scope.tree_rows,i=0;i<rows.length;i++)rows[i].branch.expanded=!1}),scope.$watch("treeData",on_treeData_change,!0)):void alert("no treeData defined for the tree!")},0)},0)}}}).directive("abnTreeGroups",function($timeout,configuration){return{restrict:"E",templateUrl:"partials/abn_tree_template_groups.html",scope:{treeData:"=",onSelect:"&",onDelete:"&",onClickCheck:"&",initialSelection:"=",search:"=",showCheck:"=",showDetail:"=",remove:"=",array:"=",identifier:"="},link:function(scope,element,attrs){$timeout(function(){$timeout(function(){var expand_level,for_each_branch,on_treeData_change,select_branch,selected_branch;return null==attrs.iconExpand&&(attrs.iconExpand="fa-plus-square-o"),null==attrs.iconCollapse&&(attrs.iconCollapse="fa-minus-square-o"),null==attrs.iconLeaf&&(attrs.iconLeaf="fa-sign-blank"),null==attrs.expandLevel&&(attrs.expandLevel="3"),expand_level=parseInt(attrs.expandLevel,10),scope.header=attrs.header,scope.treeData?(null==scope.treeData.length&&(null!=treeData.name?scope.treeData=[treeData]:alert("treeData should be an array of root branches")),for_each_branch=function(f){var do_f,root_branch,_i,_len,_ref,_results;for(do_f=function(branch,level){var child,_i,_len,_ref,_results;if(branch.profondeur=level,f(branch),null!=branch.subGroups){for(_ref=branch.subGroups,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)child=_ref[_i],_results.push(do_f(child,level+1));return _results}},_ref=scope.treeData,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)root_branch=_ref[_i],_results.push(do_f(root_branch,1));return _results},for_each_branch(function(b){return b.expanded=b.profondeur-1<expand_level}),selected_branch=null,select_branch=function(branch){if(branch!==selected_branch||!branch.selected){if(null!=selected_branch&&(selected_branch.selected=!1),branch.selected=!0,selected_branch=branch,null!=branch.onSelect)return $timeout(function(){return branch.onSelect(branch)});if(null!=scope.onSelect)return $timeout(function(){return scope.onSelect({branch:branch})})}},scope.user_clicks_branch=function(branch){return branch===selected_branch&&branch.selected?void 0:select_branch(branch)},scope.user_delete_branch=function(branch){return null!=scope.onDelete?$timeout(function(){return scope.onDelete({branch:branch})}):void 0},scope.change_check_value=function(event,id){scope.onClickCheck({checked:event.currentTarget.checked,id:id})},scope.tree_rows=[],on_treeData_change=function(){scope.show=!1,scope.tree_rows=[];var add_branch_to_list,root_branch,_i,_len,_ref,_results;for(scope.tree_rows=[],for_each_branch(function(b){}),add_branch_to_list=function(level,branch,visible){var child,child_visible,tree_icon,_i,_len,_ref,_results;if(null==branch.expanded&&(branch.expanded=!0),tree_icon=branch.subGroups&&0!==branch.subGroups.length?branch.expanded?attrs.iconCollapse:attrs.iconExpand:attrs.iconLeaf,scope.tree_rows.push({branch:branch,name:branch.name,tree_icon:tree_icon,visible:visible}),null!=branch.subGroups){for(_ref=branch.subGroups,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)child=_ref[_i],child_visible=visible&&branch.expanded,_results.push(add_branch_to_list(level+1,child,child_visible));return _results}},_ref=scope.treeData,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)root_branch=_ref[_i],_results.push(add_branch_to_list(1,root_branch,!0));return scope.show=!0,_results},null!=attrs.initialSelection&&for_each_branch(function(b){return b.name===attrs.initialSelection?select_branch(b):void 0}),scope.$watch("treeData",on_treeData_change,!0)):void alert("no treeData defined for the tree!")},0)},0)}}}).directive("abnTreeTypes",function($timeout,configuration){return{restrict:"E",templateUrl:"partials/abn_tree_template_types.html",scope:{treeData:"=",onSelect:"&",onDelete:"&",onCreate:"&",onClickCheck:"&",initialSelection:"=",search:"=",showCheck:"=",showDetail:"=",remove:"=",array:"="},link:function(scope,element,attrs){$timeout(function(){$timeout(function(){var expand_level,for_each_branch,on_treeData_change,select_branch,selected_branch,iconText;if(null==attrs.iconExpand&&(iconText="Déplier",attrs.iconExpand="fa-plus-square-o"),null==attrs.iconCollapse&&(iconText="Replier",attrs.iconCollapse="fa-minus-square-o"),null==attrs.iconLeaf&&(attrs.iconLeaf="fa-sign-blank"),null==attrs.expandLevel&&(attrs.expandLevel="3"),expand_level=parseInt(attrs.expandLevel,10),scope.header=attrs.header,!scope.treeData)return void alert("no treeData defined for the tree!");null==scope.treeData.length&&(null!=treeData.name?scope.treeData=[treeData]:alert("treeData should be an array of root branches")),for_each_branch=function(f){var do_f,root_branch,_i,_len,_ref,_results;for(do_f=function(branch,level){var child,_i,_len,_ref,_results;if(branch.profondeur=level,f(branch),null!=branch.sousTypes){for(_ref=branch.sousTypes,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)child=_ref[_i],_results.push(do_f(child,level+1));return _results}},_ref=scope.treeData,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)root_branch=_ref[_i],_results.push(do_f(root_branch,1));return _results},for_each_branch(function(b){return b.expanded=b.profondeur-1<expand_level}),selected_branch=null,select_branch=function(branch){if(branch!==selected_branch||!branch.selected){if(null!=selected_branch&&(selected_branch.selected=!1),branch.selected=!0,selected_branch=branch,null!=branch.onSelect)return $timeout(function(){return branch.onSelect(branch)});if(null!=scope.onSelect)return $timeout(function(){return scope.onSelect({branch:branch})})}},scope.user_clicks_branch=function(branch){return branch===selected_branch&&branch.selected?void 0:select_branch(branch)},scope.user_delete_branch=function(branch){return null!=scope.onDelete?$timeout(function(){return scope.onDelete({branch:branch})}):void 0},scope.user_create_branch=function(branch){return null!=scope.onCreate?$timeout(function(){return scope.onCreate({branch:branch})}):void 0};var trackId=1;return scope.track=function(branch){return branch.trackId||(branch.trackId=branch.id+" "+trackId++),branch.trackId},scope.change_check_value=function(event,id){scope.onClickCheck({checked:event.currentTarget.checked,id:id})},scope.filterType=function(row){return!!row.branch.sousTypes||-1!=row.branch.id.toLowerCase().indexOf(scope.search.toLowerCase())||-1!=row.branch.desc.toLowerCase().indexOf(scope.search.toLowerCase())||row.branch.parent&&-1!=row.branch.parent.toLowerCase().indexOf(scope.search.toLowerCase())},scope.tree_rows=[],on_treeData_change=function(){scope.show=!1,scope.tree_rows=[];var add_branch_to_list,root_branch,_i,_len,_ref,_results;for(scope.tree_rows=[],for_each_branch(function(b){}),add_branch_to_list=function(level,branch,visible){var child,child_visible,tree_icon,_i,_len,_ref,_results;if(null==branch.expanded,tree_icon=branch.sousTypes&&0!==branch.sousTypes.length?branch.expanded?attrs.iconCollapse:attrs.iconExpand:attrs.iconLeaf,scope.tree_rows.push({branch:branch,name:branch.name,tree_icon:tree_icon,visible:visible,icon_text:iconText}),null!=branch.sousTypes){for(_ref=branch.sousTypes,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)child=_ref[_i],child_visible=visible&&branch.expanded,_results.push(add_branch_to_list(level+1,child,child_visible));return _results}},_ref=scope.treeData,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)root_branch=_ref[_i],_results.push(add_branch_to_list(1,root_branch,!0));return scope.show=!0,_results},null!=attrs.initialSelection&&for_each_branch(function(b){return b.name===attrs.initialSelection?select_branch(b):void 0}),scope.$watch("treeData",on_treeData_change,!0)},0)},0)}}}).directive("annotorious",function(configuration,usSpinnerService){return{scope:{onCreated:"&",onUpdated:"&",onRemoved:"&",onLoad:"&",setPosition:"&",loadOn:"=",srcBase:"=",documentPageListen:"=",timestamp:"=",signatureMode:"=",forCachet:"=",versionNumber:"="},link:function(scope,element,attrs){window.anno=new Annotorious;var naturalWidth=0,naturalHeight=0,positionSignature=null,_create=function(annotation){annotation.author=configuration.fullname,annotation.date=new Date;var geo=annotation.shapes[0].geometry;annotation.isSignaturePosition=scope.signatureMode,annotation.forCachet=scope.forCachet,annotation.type="rect",annotation.rect={topLeft:{x:geo.x*naturalWidth,y:geo.y*naturalHeight},bottomRight:{x:(geo.x+geo.width)*naturalWidth,y:(geo.y+geo.height)*naturalHeight}},annotation.page=scope.documentPageListen.page,annotation.shapes[0].style={stroke:"rgba(0, 0, 0, 1)",hi_stroke:"rgba(0, 0, 0, 1)",Ce:2,xe:2,Ee:1,ye:1},scope.signatureMode?(annotation.shapes[0].style.fill="rgba(255, 0, 0, 0.1)",annotation.shapes[0].style.hi_fill="rgba(255, 0, 0, 0.15)"):(annotation.shapes[0].style.fill="rgba(0, 0, 255, 0.1)",annotation.shapes[0].style.hi_fill="rgba(0, 0, 255, 0.15)"),anno.removeAnnotation(annotation),anno.addAnnotation(annotation),"function"!=typeof scope.onCreated||scope.signatureMode||scope.onCreated({annotation:annotation}).then(function(obj){annotation.id=obj.id}),"function"==typeof scope.setPosition&&scope.signatureMode&&scope.setPosition({anno:anno,annotation:annotation})},_update=function(annotation){"function"==typeof scope.onUpdated&&scope.onUpdated({annotation:annotation})},_delete=function(annotation){"function"==typeof scope.onRemoved&&scope.onRemoved({annotation:annotation})};anno.addHandler("onAnnotationCreated",function(annotation){_create(annotation)}),anno.addHandler("onAnnotationUpdated",function(annotation){_update(annotation)}),anno.addHandler("onAnnotationRemoved",function(annotation){_delete(annotation)}),anno.addHandler("onEditorShown",function(event){scope.signatureMode?($(".annotorious-editor-text").hide(),scope.forCachet?($(".cachetModeInformation").show(),$(".signatureModeInformation").hide()):($(".cachetModeInformation").hide(),$(".signatureModeInformation").show())):($(".annotorious-editor-text").show(),$(".cachetModeInformation").hide(),$(".signatureModeInformation").hide())}),anno.addHandler("onMouseOverAnnotation",function(event){event.K&&event.K.isSignaturePosition?($(".commentaireField").parent().hide(),$(".annotorious-popup-text").hide(),$(".annotorious-popup-button-edit").hide(),scope.forCachet?($(".signaturePositionField").parent().hide(),$(".cachetPositionField").parent().show()):($(".signaturePositionField").parent().show(),$(".cachetPositionField").parent().hide())):event.K&&($(".commentaireField").parent().show(),$(".signaturePositionField").parent().hide(),$(".cachetPositionField").parent().hide(),$(".annotorious-popup-text").show(),$(".annotorious-popup-button-edit").show())}),annotorious.plugin.Parapheur=function(opt_config_options){},annotorious.plugin.Parapheur.prototype.onInitAnnotator=function(annotator){annotator.popup.addField(function(annotation){return'<em style="color: white;" class="commentaireField">Auteur: '+annotation.author+"</em>"}),annotator.popup.addField(function(annotation){return'<em style="color: lightgray; padding-left: 15px;" class="signaturePositionField">Position de signature</em>'}),annotator.popup.addField(function(annotation){return'<em style="color: lightgray; padding-left: 15px;" class="cachetPositionField">Position de cachet serveur</em>'}),annotator.popup.addField(function(annotation){return'<em style="color: white;" class="commentaireField">Création: '+$.datepicker.formatDate("dd/mm/yy",annotation.date)+"</em>"}),annotator.editor.addField(function(){return'<em class="signatureModeInformation" style="color: lightgray; padding-left: 15px;">Position de signature</em>'}),annotator.editor.addField(function(){return'<em class="cachetModeInformation" style="color: lightgray; padding-left: 15px;">Position de cachet serveur</em>'})};var isLoaded=!1;anno.addPlugin("Parapheur",{}),anno.setProperties({stroke:"rgba(0, 255, 0, 0.1)",fill:"rgba(0, 255, 0, 0.1)",hi_fill:"rgba(0, 255, 0, 0.15)"});var loadImg=function(){if(scope.srcBase){element.children().remove(),usSpinnerService.spin("spinnerLoading");var img=new Image;img.onload=function(){naturalWidth=this.naturalWidth,naturalHeight=this.naturalHeight,$(img).css("height","0%"),element.append(img),angular.element(img).addClass("annotatable"),anno.reset(),positionSignature=null,"function"==typeof scope.onLoad&&scope.onLoad({anno:anno,width:naturalWidth,height:naturalHeight}),scope.$emit("annotoriousLoaded"),usSpinnerService.stop("spinnerLoading")},img.onerror=function(){element.append('<span class="text-danger"><i class="fa fa-times"></i> Erreur lors de la récupération de la page '+(+scope.documentPageListen.page+1)+" du document.</span>"),usSpinnerService.stop("spinnerLoading")},img.src=scope.srcBase+ +scope.documentPageListen.page+"?version="+scope.versionNumber}};scope.$watch("loadOn",function(){isLoaded=!0,loadImg()}),scope.$watch("documentPageListen",function(){isLoaded&&loadImg()}),scope.$watch("signatureMode",function(){scope.signatureMode});var resize=function(){isLoaded&&(anno.reset(),"function"==typeof scope.onLoad&&scope.onLoad({anno:anno,width:naturalWidth,height:naturalHeight}))};window.onresize=function(){resize()},scope.$on("resizeAnnotation",function(){resize()})}}}).directive("isVisibleDash",function($timeout){return{scope:{listenOn:"=",isVisible:"="},link:function(scope,element,attrs){scope.$watch("listenOn",function(){$timeout(function(){scope.isVisible=element.children("li").children("div:hidden").length!==element.children("li").children("div").length},300)},!0)}}}).directive("imageonload",function(){return{scope:{imageonload:"&"},restrict:"A",link:function(scope,element,attrs){element.bind("load",function(){scope.imageonload()})}}}).directive("fixbottom",function(utils,$timeout){return{restrict:"C",link:function(scope,element,attrs){$timeout(function(){setHeight()});var setHeight=function(){var size=utils.windowSize(),position=$(element).offset();if(void 0!=position){var height=size.height-position.top,marginSize=+$(element).css("marginBottom").replace("px","");$(element).css("height",height-marginSize)}};scope.$on("fixbottom",function(){setHeight()}),window.onresize=function(){setHeight()}}}}).directive("dropzone",function(){return{restrict:"A",link:function(scope,element,attrs){$(window).draghover().on({draghoverend:function(){var dropZone=$(".dropzone");dropZone.removeClass("in hover show")}}),$(document).bind("dragover",function(e){var foundDropzone,dropZone=$(".dropzone");$(dropZone).bind("drop",function(e){dropZone.removeClass("in hover show")}),dropZone.addClass("show");var found=!1,node=e.target;do{if($(node).hasClass("dropzone")){found=!0,foundDropzone=$(node);break}node=node.parentNode}while(null!=node);dropZone.removeClass("in hover"),found&&foundDropzone.addClass("in hover")})}}}).directive("headertop",function(utils){return{restrict:"C",link:function(scope,element,attrs){var size=attrs.removeonsize,hasInit=!1,setClasses=function(){var ret=!1;return $(window).width()<=size&&hasClass?($(element).css("top",""),$(element).removeClass(attrs.classesList)):$(window).width()>size&&!hasClass?($(element).css("top",$("header").height()),$(element).addClass(attrs.classesList),ret=!0):hasClass&&!hasInit&&(hasInit=!0,ret=!0,$(element).css("top",$("header").height())),ret},hasClass=!0;hasClass=setClasses();var sem=!1;window.onresize=function(){sem||(sem=!0,hasClass=setClasses(),sem=!1)}}}}),angular.module("filters",[]).filter("bash",function($sce){return function(text){return text?(text=text.replace(/\n/g,"<br/>").replace(/ /g,"&nbsp;"),$sce.trustAsHtml(text)):""}}).filter("orderObjectById",function(){return function(items,reverse){var filtered=[];return angular.forEach(items,function(val,id){filtered.push({value:val,id:id})}),filtered.sort(function(a,b){return a.value.toLowerCase()>b.value.toLowerCase()?1:-1}),reverse&&filtered.reverse(),filtered}}).filter("texttodate",function(){return function(input){return input?new Date(input):""}}).filter("toUTC",function(){return function(input){if(input){var date=new Date(input);return new Date(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate(),date.getUTCHours(),date.getUTCMinutes(),date.getUTCSeconds())}return""}}).filter("endwith",function(){return function(input,suffix){return input?-1!==input.indexOf(suffix,input.length-suffix.length):!0}}).filter("contains",function(){return function(input,separator){return input?~input.indexOf(separator):!0}}).filter("encodeURIComponent",function(){return function(input){return encodeURIComponent(input)}}).filter("replaceChar",function(){return function(input,charFrom,charTo){return input?input.replace(charFrom,charTo):""}}).filter("capitalize",function(){return function(input){return input?input.charAt(0).toUpperCase()+input.slice(1).toLowerCase():""}}).filter("i18n",function(){return function(input){return input?$.t(input):""}}).filter("split",function(){return function(input,separator){return input?input.split(separator):""}}).filter("fileext",function(){return function(input){var ext=/^.+\.([^.]+)$/.exec(input);return null===ext?"":ext[1].toLowerCase()}}).filter("array2string",function(){return function(input,separator){var ret="";if(input&&input.length>0){ret+=input[0];for(var i=1;i<input.length;i++)ret+=separator+input[i]}return ret}}).filter("object2string",function(){return function(input,separator,property){var ret="";if(input){var keys=Object.keys(input);if(keys.length>0){ret+=input[keys[0]][property];for(var i=1;i<keys.length;i++)ret+=separator+input[keys[i]][property];
}}return ret}}).filter("mergeArrays",function(){return function(input,property){var ret=[];if(input&&input.length>0){ret=ret.concat(input[0][property]);for(var i=1;i<input.length;i++)ret=ret.concat(input[i][property])}return ret.filter(function(elem,pos,self){return self.indexOf(elem)==pos})}}).filter("intersectionOnProperty",function(){return function(input,property){var ret=[];if(input&&input.length>0){ret=input[0][property];for(var i=1;i<input.length;i++){var r=input[i][property];ret=$.arrayIntersect(ret,r)}}return ret}}).filter("getNameWithId",function(){return function(input,list){var found=!1,title="";return angular.forEach(list,function(value,key){value.id==input&&(title=value.title,found=!0)}),title||(title="Emetteur..."),title}}).filter("contains",function(){return function(input,string){var filters_str=string.split(" ");return"string"==typeof input?-1!==input.indexOf(string):input.filter(function(element,index,array){for(var contains_all=!0,i=0;i<filters_str.length;i++)if(-1===element.name.toLowerCase().indexOf(filters_str[i].toLowerCase())){contains_all=!1;break}return contains_all})}}).filter("findWithId",function(){return function(input,id){var ret={};return angular.forEach(input,function(value,key){value.id==id&&(ret=value)}),ret}}).filter("notSameId",function(){return function(input,id){var toRet=[];return angular.forEach(input,function(value,key){"[object Array]"==Object.prototype.toString.call(id)?-1===id.indexOf(value.id)&&toRet.push(value):value.id!=id&&toRet.push(value)}),toRet}}).filter("sameId",function(){return function(input,idArray){var toRet=[];return angular.forEach(input,function(value,key){idArray&&-1!==idArray.indexOf(value.id)&&toRet.push(value)}),toRet}}).filter("notSameIdInArray",function(){return function(input,idArray){var toRet=[],i=0;return angular.forEach(input,function(value,key){if(idArray){var contains=!1;angular.forEach(idArray,function(walue,jey){walue.id===value.id&&(contains=!0)}),contains||(toRet[i++]=value)}}),toRet}}).filter("notChild",function(){return function(input,id){var toRet=[],mapHierarchie={},checkParent=function(value){if(value&&value.hierarchie){if(value.hierarchie===id)return!1;checkParent(mapHierarchie[value.hierarchie])}return!0};return angular.forEach(input,function(value,key){mapHierarchie[value.id]=value}),angular.forEach(input,function(value,key){checkParent(value)&&toRet.push(value)}),toRet}}).filter("customfilter",function(){function isArray(value){return"[object Array]"===Object.prototype.toString.call(value)}return function(array,expression,comparator){if(!isArray(array))return array;var comparatorType=typeof comparator,predicates=[];predicates.check=function(value){for(var j=0;j<predicates.length;j++)if(!predicates[j](value))return!1;return!0},"function"!==comparatorType&&(comparator="boolean"===comparatorType&&comparator?function(obj,text){return console.log(obj),angular.equals(obj,text)}:function(obj,text){if(obj&&text&&"object"==typeof obj&&"object"==typeof text){for(var objKey in obj)if("$"!==objKey.charAt(0)&&hasOwnProperty.call(obj,objKey)&&comparator(obj[objKey],text[objKey]))return!0;return!1}return text=(""+text).toLowerCase(),(""+obj).toLowerCase().indexOf(text)>-1&&!(""+obj).match(/([A-Za-z0-9]{8}-[A-Za-z0-9]{4}-[A-Za-z0-9]{4}-[A-Za-z0-9]{4}-[A-Za-z0-9]{12})/g)});var search=function(obj,text){if("string"==typeof text&&"!"===text.charAt(0))return!search(obj,text.substr(1));switch(typeof obj){case"boolean":case"number":case"string":return comparator(obj,text);case"object":switch(typeof text){case"object":return comparator(obj,text);default:for(var objKey in obj)if("$"!==objKey.charAt(0)&&search(obj[objKey],text))return!0}return!1;case"array":for(var i=0;i<obj.length;i++)if(search(obj[i],text))return!0;return!1;default:return!1}};switch(typeof expression){case"boolean":case"number":case"string":expression={$:expression};case"object":for(var key in expression)!function(path){"undefined"!=typeof expression[path]&&predicates.push(function(value){return search("$"==path?value:value&&value[path],expression[path])})}(key);break;case"function":predicates.push(expression);break;default:return array}for(var filtered=[],j=0;j<array.length;j++){var value=array[j];predicates.check(value)&&filtered.push(value)}return filtered}}),angular.module("appParapheur").factory("Annotations",["$resource","configuration",function($resource,configuration){return $resource(configuration.context+"/proxy/alfresco/parapheur/dossiers/:idDossier/:idDocument/annotations/:id",{id:"@id",idDossier:"@idDossier",idDocument:"@idDocument"},{list:{method:"GET",isArray:!0},save:{method:"POST",extend:!0},remove:{method:"DELETE"},update:{method:"PUT"}})}]),angular.module("appParapheur").factory("Archives",["$resource","configuration",function($resource,configuration){return $resource(configuration.context+"/proxy/alfresco/parapheur/archives/:id",{id:"@id"},{list:{method:"GET",isArray:!0},destroy:{method:"DELETE",action:!0},rename:{method:"POST"}})}]),angular.module("appParapheur").factory("Attestation",["$resource","configuration",function($resource,configuration){return $resource(configuration.context+"/proxy/alfresco/parapheur/attestation",{},{set:{method:"PUT"},get:{method:"GET"}})}]),angular.module("appParapheur").factory("Audits",["$resource","configuration",function($resource,configuration){return $resource(configuration.context+"/proxy/alfresco/parapheur/audit/:type",{},{tempsTraitement:{method:"GET",params:{type:"tempsTraitement"}},crees:{method:"GET",params:{type:"dossiersCrees"}},emis:{method:"GET",params:{type:"dossiersEmis"}},emisRefuses:{method:"GET",params:{type:"dossiersEmisRefuses"}},instruits:{method:"GET",params:{type:"dossiersInstruits"}},refuses:{method:"GET",params:{type:"dossiersRefuses"}},traites:{method:"GET",params:{type:"dossiersTraites"}},retard:{method:"GET",params:{type:"dossiersEnRetard"}},causesRejet:{isArray:!0,method:"GET",params:{type:"causesRejet"}}})}]),angular.module("appParapheur").factory("Bureaux",["$resource","configuration",function($resource,configuration){return $resource(configuration.context+"/proxy/alfresco/parapheur/bureaux/:id/:action/:idaction",{id:"@id"},{list:{params:{asAdmin:"true"},method:"GET",isArray:!0},listWithCache:{params:{asAdmin:"true"},method:"GET",isArray:!0,cache:!0},query:{method:"GET",isArray:!0},update:{method:"PUT"},save:{method:"POST",extend:!0},remove:{method:"DELETE"},associes:{method:"GET",extend:!0,params:{action:"associes"}},associesAsAdmin:{method:"GET",extend:!0,params:{asAdmin:"true",action:"associes"}}})}]),angular.module("appParapheur").factory("Cachets",["$resource","configuration",function($resource,configuration){return $resource(configuration.context+"/proxy/alfresco/parapheur/seals/:id",{id:"@id"},{list:{method:"GET",isArray:!0},update:{method:"PUT"},save:{method:"POST",extend:!0},getMailforwarn:{method:"GET",params:{id:"mailforwarn"}},setMailforwarn:{method:"POST",params:{id:"mailforwarn"}}})}]),angular.module("appParapheur").factory("Calques",["$resource","configuration",function($resource,configuration){return $resource(configuration.context+"/proxy/alfresco/parapheur/calques/:id",{id:"@id"},{list:{method:"GET",isArray:!0},listWithCache:{method:"GET",isArray:!0,cache:!0},update:{method:"PUT"},save:{method:"POST",extend:!0}})}]),angular.module("appParapheur").factory("SubCalques",["$resource","configuration",function($resource,configuration){return $resource(configuration.context+"/proxy/alfresco/parapheur/calques/:idCalque/:type/:id",{id:"@id",type:"@type",idCalque:"@idCalque"},{list:{method:"GET",isArray:!0},save:{method:"POST",extend:!0}})}]),angular.module("appParapheur").factory("Circuits",["$resource","configuration",function($resource,configuration){return $resource(configuration.context+"/proxy/alfresco/parapheur/circuits/:id/:action/:idaction",{id:"@id"},{list:{method:"GET",isArray:!0},listWithCache:{method:"GET",isArray:!0,cache:!0},update:{method:"PUT",extend:!0},getWithTypo:{method:"GET",cache:!0,params:{bureau:"@bureau"}},save:{method:"POST",extend:!0}})}]),angular.module("appParapheur").factory("Connecteurs",["$resource","configuration",function($resource,configuration){return $resource(configuration.context+"/proxy/alfresco/parapheur/connecteurs/:tdt/:type/:action",{type:"@type",tdt:"@tdt"},{testConfig:{method:"POST",params:{action:"testConfig",type:""}},set:{method:"PUT"},get:{method:"GET"},info:{method:"GET",params:{tdt:"s2low",type:"actes",action:"info"}},classifications:{method:"GET",params:{tdt:"s2low",type:"actes",action:"classifications"}}})}]),angular.module("appParapheur").factory("Delegations",["$resource","configuration",function($resource,configuration){return $resource(configuration.context+"/proxy/alfresco/parapheur/delegations/:id/:action/:idaction",{id:"@id"},{list:{params:{asAdmin:"true"},method:"GET",isArray:!0},update:{method:"PUT"},willItLoop:{method:"POST",extend:!0,params:{action:"loop",idaction:"@idCible"}},titulaires:{method:"GET",params:{action:"titulaires"}}})}]),angular.module("appParapheur").factory("Dossiers",["$resource","configuration",function($resource,configuration){return $resource(configuration.context+"/proxy/alfresco/parapheur/dossiers/:id/:action/:idaction/:complementary",{id:"@id"},{list:{method:"GET",isArray:!0},listAsAdmin:{method:"GET",isArray:!0,params:{asAdmin:!0}},consecutiveSteps:{method:"GET",extend:!0,params:{action:"consecutiveSteps"}},attest:{method:"POST",action:!0,params:{action:"attest"}},visa:{method:"POST",action:!0,params:{action:"visa"}},signature:{method:"POST",action:!0,params:{action:"signature"}},seal:{method:"POST",action:!0,params:{action:"seal"}},getSignInfo:{method:"GET",extend:!0,params:{action:"getSignInfo"}},tdtHelios:{method:"POST",action:!0,params:{action:"tdtHelios"}},tdtActes:{method:"POST",action:!0,params:{action:"tdtActes"}},archive:{method:"POST",action:!0,params:{action:"archive"}},rejet:{method:"POST",action:!0,params:{action:"rejet"}},secretariat:{method:"POST",action:!0,params:{action:"secretariat"}},remorse:{method:"POST",action:!0,params:{action:"remorse"}},annexes:{method:"GET",extend:!0,params:{action:"annexes"}},getSecureMailTemplate:{method:"GET",cache:!0,extend:!0,params:{action:"getSecureMailTemplate"}},avis:{method:"POST",action:!0,params:{action:"avis"}},chain:{method:"POST",action:!0,params:{action:"chain"}},merge:{method:"POST",action:!0,params:{action:"merge"}},getCircuitWithTypo:{method:"POST",params:{action:"circuit"}},transfertSignature:{method:"POST",action:!0,params:{action:"transfertSignature"}},transfertVisa:{method:"POST",action:!0,params:{action:"transfertVisa"}},notifications:{method:"GET",extend:!0,params:{action:"notifications"}},setNotifications:{method:"PUT",action:!0,params:{action:"setNotifications"}},getCircuit:{method:"GET",extend:!0,params:{action:"circuit"}},update:{method:"PUT",extend:!0},setProperties:{method:"POST",action:!0,params:{action:"setProperties"}},setCircuit:{method:"POST",action:!0,params:{action:"setCircuit"}},removeDocument:{method:"POST",action:!0,params:{action:"removeDocument"}},evenements:{method:"GET",extend:!0,params:{action:"evenements"}},raz:{method:"POST",action:!0,params:{action:"raz"}},destroy:{method:"DELETE",action:!0,params:{action:"destroy"}},transfert:{method:"POST",action:!0,params:{action:"transfert"}},mailsec:{method:"POST",action:!0,params:{action:"mailsec"}},secureMailTemplate:{method:"GET",extend:!0,params:{action:"secureMailTemplate"}},infosMailSec:{method:"GET",extend:!0,params:{action:"infosMailSec"}},status:{method:"GET",extend:!0,params:{action:"status"}},properties:{method:"GET",extend:!0,params:{action:"properties"}},addSignature:{method:"POST",action:!0,params:{action:"addSignature"}},signPapier:{method:"POST",action:!0,params:{action:"signPapier"}},bestBureau:{method:"GET",params:{action:"bestBureau"}},unlock:{method:"POST",action:!0,params:{action:"unlock"}}})}]),angular.module("appParapheur").factory("Groupes",["$resource","configuration",function($resource,configuration){return $resource(configuration.context+"/proxy/alfresco/parapheur/groupes/:id/:user",{id:"@id",user:"@userToChange"},{list:{method:"GET",isArray:!0},listWithCache:{method:"GET",isArray:!0,cache:!0},getMembers:{method:"GET",extend:!0},addUser:{method:"POST",action:!0},removeUser:{method:"DELETE",action:!0},save:{method:"POST",extend:!0},saveSub:{method:"POST"}})}]),angular.module("appParapheur").factory("Horodate",["$resource","configuration",function($resource,configuration){return $resource(configuration.context+"/proxy/alfresco/parapheur/horodate",{},{set:{method:"PUT"},get:{method:"GET"}})}]),angular.module("appParapheur").factory("Mails",["$resource","configuration",function($resource,configuration){return $resource(configuration.context+"/proxy/alfresco/parapheur/mails/:type",{},{dossiers:{method:"POST",params:{type:"dossiers"}}})}]),angular.module("appParapheur").factory("Metadonnees",["$resource","configuration",function($resource,configuration){return $resource(configuration.context+"/proxy/alfresco/parapheur/metadonnees/:id/:action/:idaction",{id:"@id"},{list:{method:"GET",isArray:!0},listWithCache:{method:"GET",isArray:!0,cache:!0},getWithTypo:{method:"GET",cache:!0,isArray:!0},reload:{method:"GET",action:!0,params:{action:"reload"}},update:{method:"PUT"}})}]),angular.module("appParapheur").factory("Modeles",["$resource","configuration",function($resource,configuration){return $resource(configuration.context+"/proxy/alfresco/parapheur/modeles/:id/:action",{id:"@id"},{list:{method:"GET",isArray:!0},get:{method:"GET",extend:!0},set:{method:"PUT"},reload:{method:"GET",action:!0,params:{action:"reload"}}})}]),angular.module("appParapheur").factory("Office",["$resource","configuration",function($resource,configuration){return $resource(configuration.context+"/proxy/alfresco/parapheur/connecteurs/office/:action",{},{get:{method:"GET"},restart:{method:"GET",action:!0,params:{action:"restart"}},status:{method:"GET",params:{action:"status"}}})}]),angular.module("appParapheur").factory("PastellConnector",["$resource","configuration",function($resource,configuration){return $resource(configuration.context+"/proxy/alfresco/parapheur/pastell/mailsec/:action/:id",{id:"@id"},{list:{method:"GET",isArray:!0},save:{method:"POST",extend:!0},infos:{method:"GET",extend:!0,params:{action:"node"}}})}]),angular.module("appParapheur").factory("PastellMailsec",["$resource","configuration",function($resource,configuration){return $resource(configuration.context+"/proxy/pastell-connector/api/server/:id/:action/:idDoc/:action2",{id:"@id"},{get:{method:"GET"},list:{method:"GET",isArray:!0},update:{method:"PUT"},save:{method:"POST",extend:!0},listEntities:{method:"GET",isArray:!0,params:{action:"entities"}},listTypes:{method:"GET",isArray:!0,params:{action:"types"}},events:{method:"GET",isArray:!0,params:{action:"document",action2:"journal"}}})}]),angular.module("appParapheur").factory("SousTypes",["$resource","configuration",function($resource,configuration){return $resource(configuration.context+"/proxy/alfresco/parapheur/types/:parent/:id",{id:"@id",parent:"@parent"},{update:{method:"PUT"}})}]),angular.module("appParapheur").factory("Tenants",["$resource","configuration",function($resource,configuration){return $resource(configuration.context+"/proxy/alfresco/parapheur/mc/:tenantDomain/:action",{tenantDomain:"@tenantDomain"},{list:{method:"GET",isArray:!0},get:{method:"GET",extend:!0},isEnabled:{method:"GET",params:{action:"enabled"}},details:{method:"GET",extend:!0,params:{action:"details"}},update:{method:"PUT"},enable:{method:"POST",params:{action:"enable"}},changePassword:{method:"POST",params:{action:"changepassword"}},getPesProperties:{method:"GET",extend:!0,params:{action:"pes"}},updatePesProperties:{method:"POST",params:{action:"pes"}},reloadMail:{method:"GET",action:!0,params:{action:"reloadTenantEmails"}}})}]),angular.module("appParapheur").factory("Types",["$resource","configuration",function($resource,configuration){return $resource(configuration.context+"/proxy/alfresco/parapheur/types/:id/:action/:idaction",{id:"@id"},{list:{method:"GET",isArray:!0,params:{asAdmin:"true"}},listWithCache:{method:"GET",isArray:!0,cache:!0,params:{asAdmin:"true"}},query:{method:"GET",isArray:!0},queryWithBureau:{method:"GET",isArray:!0,params:{bureau:"@bureau"}},update:{method:"PUT"},getOverrideActes:{method:"GET",extend:!0,params:{action:"overrideActes"}},overrideActes:{method:"PUT",action:!0,params:{action:"overrideActes"}},getOverrideHelios:{method:"GET",extend:!0,params:{action:"overrideHelios"}},overrideHelios:{method:"PUT",action:!0,params:{action:"overrideHelios"}},getOverrideSig:{method:"GET",extend:!0,params:{action:"overrideSig"}},overrideSig:{method:"PUT",action:!0,params:{action:"overrideSig"}},getOverridePades:{method:"GET",extend:!0,params:{action:"overridePades"}},overridePades:{method:"PUT",action:!0,params:{action:"overridePades"}}})}]),angular.module("appParapheur").factory("Users",["$resource","configuration",function($resource,configuration){return $resource(configuration.context+"/proxy/alfresco/parapheur/utilisateurs/:id/:resource/:resourceId",{id:"@id"},{update:{method:"PUT"},listWithCache:{method:"GET",isArray:!0,cache:!0},save:{method:"POST",extend:!0},deleteBureau:{method:"DELETE",params:{resource:"bureaux",isProprietaire:!0}},saveBureau:{method:"POST",params:{resource:"bureaux",isProprietaire:!0}},getBureaux:{method:"GET",isArray:!0,extend:!0,extendParameter:"bureaux",params:{resource:"bureaux",administres:!1}},getBureauxAdministres:{method:"GET",isArray:!0,extend:!0,extendParameter:"bureauxAdministres",params:{resource:"bureaux",administres:!0}},getCertificatDetails:{method:"POST",isArray:!1,params:{resource:"certificats",resourceId:"details"}},removeFromGroup:{method:"DELETE",params:{resource:"groups"}},saveNotificationsPreferences:{method:"PUT",params:{resource:"notifications"}}})}]),angular.module("appParapheur").factory("Xemelios",["$resource","configuration",function($resource,configuration){return $resource(configuration.context+"/proxy/alfresco/parapheur/connecteurs/xemelios/:action",{},{get:{method:"GET"},restart:{method:"GET",action:!0,params:{action:"restart"}},status:{method:"GET",params:{action:"status"}}})}]),angular.module("templates-parapheur",["partials/abn_tree_template.html","partials/abn_tree_template_groups.html","partials/abn_tree_template_types.html","partials/adminNavbar.html","partials/bureau.html","partials/dashlets/actions.html","partials/dashlets/annotations.html","partials/dashlets/annoter.html","partials/dashlets/annotindex.html","partials/dashlets/circuit.html","partials/dashlets/details-dossier.html","partials/dashlets/liste-dossiers.html","partials/dashlets/nom-dossier.html","partials/dashlets/postit.html","partials/modal.html","partials/modals/actesModal.html","partials/modals/archiveModal.html","partials/modals/askPasswordModal.html","partials/modals/bureauxModal.html","partials/modals/chainModal.html","partials/modals/colorationModal.html","partials/modals/confirmForceModal.html","partials/modals/confirmationModal.html","partials/modals/extensionHelpModal.html","partials/modals/healthModal.html","partials/modals/inputModal.html","partials/modals/journalModal.html","partials/modals/mailModal.html","partials/modals/mailsecInfosModal.html","partials/modals/mailsecModal.html","partials/modals/mandatoryReadModal.html","partials/modals/moveModal.html","partials/modals/notificationModal.html","partials/modals/overrideS2low.html","partials/modals/pesPropertiesTenant.html","partials/modals/printModal.html","partials/modals/propertiesModal.html","partials/modals/readConfirmModal.html","partials/modals/rejectModal.html","partials/modals/signPapierConfirmationModal.html","partials/modals/signPapierModal.html","partials/modals/simpleConfirmationModal.html","partials/modals/tdtModal.html","partials/modals/utilisateursModal.html","partials/modals/validationModal.html","partials/passwordStrength.html","templates/about.html","templates/admin/avance.html","templates/admin/avance/archiland.html","templates/admin/avance/attestation.html","templates/admin/avance/cachet.html","templates/admin/avance/calque.html","templates/admin/avance/fasthelios.html","templates/admin/avance/horodatage.html","templates/admin/avance/mail.html","templates/admin/avance/metadonne.html","templates/admin/avance/model.html","templates/admin/avance/pastellmailsec.html","templates/admin/avance/slowactes.html","templates/admin/avance/slowhelios.html","templates/admin/avance/slowmailsec.html","templates/admin/avance/srcihelios.html","templates/admin/bureaux.html","templates/admin/circuits.html","templates/admin/dossiers.html","templates/admin/groupes.html","templates/admin/informations.html","templates/admin/nodebrowser.html","templates/admin/script.html","templates/admin/stats.html","templates/admin/tenants.html","templates/admin/typologie.html","templates/admin/utilisateurs.html","templates/admin/workers.html","templates/apercu.html","templates/archives.html","templates/bureaux.html","templates/dashboard.html","templates/delegation.html","templates/logout.html","templates/nouveau.html","templates/options.html","templates/options/archives.html","templates/options/dashboard.html","templates/options/informations.html","templates/options/langue.html","templates/options/notifications.html","templates/options/orderBureaux.html","templates/options/signature.html","templates/options/theme.html","templates/policy.html","templates/stats.html","templates/topbar.html"]),angular.module("partials/abn_tree_template.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/abn_tree_template.html",'<script type="text/ng-template"  id="popover_renderer">\n    <div ng-show="row.branch.proprietaires.length > 0" class="text-success">\n        {{\'Admin.Bureaux.Bu_Prop\' | translate}} :\n        <ul>\n            <li ng-repeat="user in row.branch.proprietaires">{{user.firstName}} {{user.lastName}} ({{user.username}})</li>\n        </ul>\n    </div>\n    <hr ng-show="row.branch.secretaires.length > 0 && row.branch.proprietaires.length > 0"/>\n    <div ng-show="row.branch.secretaires.length > 0" class="text-warning">\n        {{\'Admin.Bureaux.Bu_Sec\' | translate}} :\n        <ul>\n            <li ng-repeat="user in row.branch.secretaires">{{user.firstName}} {{user.lastName}} ({{user.username}})</li>\n        </ul>\n    </div>\n</script>\n\n<script type="text/ng-template"  id="popover_delegation">\n    <div class="text-muted">\n        <h4>{{\'Admin.Bureaux.Bu_Deleg\' | translate}} :</h4>\n        <div>\n            <span ng-if="row.branch.delegation[\'date-debut-delegation\']"><strong>{{\'Admin.Bureaux.Bu_Begin\' | translate}} :</strong> Le {{row.branch.delegation[\'date-debut-delegation\'] | date:\'fullDate\'}}</span><br>\n            <span ng-if="row.branch.delegation[\'date-fin-delegation\']"><strong>{{\'Admin.Bureaux.Bu_Fin\' | translate}} :</strong> Le {{row.branch.delegation[\'date-fin-delegation\'] | date:\'fullDate\'}}</span><br>\n            <span><strong>{{\'Admin.Bureaux.Bu_Target\' | translate}} :</strong> {{row.branch.delegation.titreCible}}</span><br>\n        </div>\n    </div>\n</script>\n\n<ul class="nav nav-list nav-pills nav-stacked abn-tree">\n    <li ng-show="header" class="nav-header">{{ header }}</li>\n    <li ng-hide="checkRights && !isAdminFonctionnelOf(row)" ng-repeat="row in tree_rows | filter:{visible:true} | filter:search track by row.branch.id" ng-class="\'level-\' + (row.branch.profondeur +1) + (row.branch.selected ? \' active\':\'\')" class="abn-tree-row abn-tree-animate">\n\n        <a ng-if="!showCheck" ng-click="user_clicks_branch(row.branch)">\n            <i ng-class="row.tree_icon" ng-click="row.branch.expanded = !row.branch.expanded" class="indented tree-icon fa"> </i>\n            <span class="indented tree-label">{{ row.branch.title }}</span>\n            <div ng-if="row.branch.proprietaires.length > 0 || row.branch.secretaires.length > 0" ng-show="showDetail" class="fa fa-user pull-right" popover-placement="right"\n               bs-popover="\'popover_renderer\'" data-trigger="hover">\n            </div>\n            <div ng-if="row.branch.delegation.idCible" ng-show="showDetail" ng-class="row.branch.selected ? \'\' : \'text-warning\'" class="fa fa-share icon2-tree" popover-placement="right"\n                 bs-popover="\'popover_delegation\'" data-trigger="hover">\n            </div>\n        </a>\n        <div ng-if="showCheck">\n            <input class="unvalidate" ng-show="showCheck" id="{{row.branch.id + identifier}}" name="{{row.branch.id + identifier}}" type="checkbox" ng-click="change_check_value($event, row.branch.id)" ng-checked="array.indexOf(row.branch.id) != -1" ng-disabled="row.branch.id == remove">\n            <i ng-class="row.tree_icon" ng-click="row.branch.expanded = !row.branch.expanded" class="indented tree-icon fa"> </i>\n            <label for="{{row.branch.id + identifier}}" style="font-weight: normal;"  class="indented tree-label">{{ row.branch.title }}</label>\n            <div ng-show="showDetail" class="fa fa-user pull-right" popover-placement="right"\n                 bs-popover="\'popover_renderer\'" data-trigger="hover">\n            </div>\n        </div>\n    </li>\n</ul>')}]),angular.module("partials/abn_tree_template_groups.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/abn_tree_template_groups.html",'<ul class="nav nav-list nav-pills nav-stacked abn-tree">\n    <li ng-show="header" class="nav-header">{{ header }}</li>\n    <li ng-show="show" ng-repeat="row in tree_rows | filter:{visible:true} | filter:search track by row.branch.id" ng-class="\'level-\' + (row.branch.profondeur) + (row.branch.selected ? \' active\':\'\')" class="abn-tree-row abn-tree-animate">\n\n        <a ng-if="!showCheck" ng-click="user_clicks_branch(row.branch)">\n            <i ng-class="row.tree_icon" ng-init="row.branch.expanded = true" ng-click="row.branch.expanded = !row.branch.expanded" class="indented tree-icon fa"> </i>\n            <span class="indented tree-label">{{row.branch.shortName}}</span>\n            <i ng-if="row.branch.shortName !== \'ALFRESCO_ADMINISTRATORS\' && row.branch.shortName !== \'GESTIONNAIRE_CIRCUITS_IPARAPHEUR\'" ng-click="user_delete_branch(row.branch)" tooltip="Supprimer" class="fa fa-trash-o" style="color:red; float:right;"></i>\n        </a>\n\n        <div ng-if="showCheck">\n            <input class="unvalidate" ng-show="showCheck" type="checkbox" name="{{row.branch.id + identifier}}" id="{{row.branch.id + identifier}}" ng-click="change_check_value($event, row.branch.id)" ng-checked="array.indexOf(row.branch.id) != -1" ng-disabled="row.branch.id == remove">\n            <i ng-class="row.tree_icon" ng-click="row.branch.expanded = !row.branch.expanded" class="indented tree-icon fa"> </i>\n            <label for="{{row.branch.id + identifier}}" style="font-weight: normal;" class="indented tree-label">{{ row.branch.shortName }}</label>\n        </div>\n    </li>\n</ul>')}]),angular.module("partials/abn_tree_template_types.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/abn_tree_template_types.html",'<ul class="well nav nav-list nav-pills nav-stacked abn-tree fixbottom">\n    <li ng-show="header" class="nav-header">{{ header }}</li>\n    <li ng-show="show"\n        ng-repeat="row in tree_rows | filter:{visible:true} | filter:filterType track by track(row.branch)"\n        ng-class="(row.branch.parent !== undefined ? \'subtype-row\' : \'level-\' + (row.branch.profondeur))  + (row.branch.selected ? \' active \':\'\')"\n        class="abn-tree-row abn-tree-animate">\n        <hr ng-if="row.branch.profondeur === 1 && $index > 0">\n        <a ng-click="user_clicks_branch(row.branch)" ng-init="row.branch.expanded = true">\n            <i class="fa fa-plus-square-o indented tree-icon" tooltip="Déplier" ng-if="!row.branch.expanded && row.branch.profondeur === 1" ng-click="row.branch.expanded = !row.branch.expanded"></i>\n            <i class="fa fa-minus-square-o indented tree-icon" tooltip="Replier" ng-if="row.branch.expanded && row.branch.profondeur === 1" ng-click="row.branch.expanded = !row.branch.expanded"></i>\n            <!--i ng-class="row.tree_icon" tooltip="{{row.icon_text}}" ng-init="row.branch.expanded = true" ng-click="row.branch.expanded = !row.branch.expanded" class="indented tree-icon fa"> </i-->\n            <span class="indented tree-label">{{row.branch.id}}</span>\n            <span style="float:right;">\n                <span style="margin:8px;" class="label label-success create-type" ng-click="user_create_branch(row.branch)" ng-if="row.branch.parent === undefined"">\n                    <i  class="fa fa-plus-circle"></i>\n                    Ajouter un sous-type\n                </span>\n                <i ng-click="user_delete_branch(row.branch)" ng-class="row.branch.selected ? \'text-inverse\' : \'text-danger\'" tooltip-placement="bottom" tooltip="{{\'Delete\' | translate}}" class="fa fa-trash-o"></i>\n            </span>\n\n            <p ng-if="row.branch.parent === undefined" ng-class="\'level-\' + (row.branch.profondeur)">\n                <span  class="indented" ng-class="row.branch.selected ? \'\':\'text-warning\'">{{row.branch.desc}}</span>\n            </p>\n        </a>\n    </li>\n</ul>')}]),angular.module("partials/adminNavbar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/adminNavbar.html",'<div ng-if="config.isAdmin || config.isAdminFonctionnel()" class="adminMenu label-info">\n   <span><i class="fa fa-bars"></i> Menu</span>\n</div>\n<h1 class="underscore">\n    <i class=\'fa fa-wrench\'></i>\n    {{\'adminNavbar.Administration\' | translate}}\n</h1>\n<div class="bs-sidebar affix" role="complementary">\n    <ul class="nav bs-sidenav">\n        <li ng-if="config.isAdmin" ng-class="{active:pagename() == \'/admin/informations\'}">\n            <a href="#/admin/informations"><i class="fa fa-tachometer"></i> {{\'adminNavbar.Server_information\' | translate}}</a>\n        </li>\n        <li ng-if="config.isAdmin" ng-class="{active:pagename() == \'/admin/utilisateurs\'}">\n            <a href="#/admin/utilisateurs"><i class="fa fa-user"></i> {{\'adminNavbar.Users\' | translate}}</a>\n        </li>\n        <li ng-if="config.isAdmin" ng-class="{active:pagename() == \'/admin/groupes\'}">\n            <a href="#/admin/groupes"><i class="fa fa-group"></i> {{\'adminNavbar.Groups\' | translate}}</a>\n        </li>\n        <li ng-if="config.isAdmin || config.isAdminFonctionnel()" ng-class="{active:pagename() == \'/admin/bureaux\'}">\n            <a href="#/admin/bureaux"><i class="fa fa-desktop"></i> {{\'adminNavbar.Desks\' | translate}}</a>\n        </li>\n        <li ng-if="config.isAdmin || config.isAdminCircuits()" ng-class="{active:pagename() == \'/admin/circuits\'}">\n            <a href="#/admin/circuits"><i class="fa fa-road"></i> {{\'adminNavbar.Circuits\' | translate}}</a>\n        </li>\n        <li ng-if="config.isAdmin" ng-class="{active:pagename() == \'/admin/typologie\'}">\n            <a href="#/admin/typologie"><i class="fa fa-book"></i> {{\'adminNavbar.Folders_typology\' | translate}}</a>\n        </li>\n        <li ng-if="config.isAdmin || config.isAdminFonctionnel()" ng-class="{active:pagename() == \'/admin/dossiers\'}">\n            <a href="#/admin/dossiers"><i class="fa fa-folder-open-o"></i> {{\'adminNavbar.Folders\' | translate}}</a>\n        </li>\n        <li ng-if="config.isAdmin" ng-class="{active:pagename() == \'/admin/stats\'}">\n            <a href="#/admin/stats"><i class="fa fa-bar-chart-o"></i> {{\'adminNavbar.Statistics\' | translate}}</a>\n        </li>\n        <li ng-if="config.isAdmin" ng-class="{active:pagename() == \'/admin/avance\'}">\n            <a href="#/admin/avance"><i class="fa fa-cog"></i> {{\'adminNavbar.Advanced\' | translate}}</a>\n        </li>\n        <li ng-if="config.isAdmin && !config.tenant && isMTEnabled" ng-class="{active:pagename() == \'/admin/tenants\'}">\n            <a href="#/admin/tenants"><i class="fa fa-building"></i> {{\'adminNavbar.Collectivities\' | translate}}</a>\n        </li>\n        <!--li ng-if="config.isAdmin && properties[\'parapheur.ihm.admin.mode.advanced\'] === \'true\'" ng-class="{active:pagename() == \'/admin/nodebrowser\'}">\n            <a href="#/admin/nodebrowser"><i class="fa fa-terminal"></i> Node Browser</a>\n        </li-->\n        <li ng-if="config.isAdmin && properties[\'parapheur.ihm.admin.mode.advanced\'] === \'true\'" ng-class="{active:pagename() == \'/admin/script\'}">\n            <a href="#/admin/script"><i class="fa fa-terminal"></i> {{\'adminNavbar.Script_execution\' | translate}}</a>\n        </li>\n    </ul>\n</div>');
}]),angular.module("partials/bureau.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/bureau.html",'<!-- Affichage d\'un bureau -->\n<a ng-if="isThumbnail" class="thumbnail bureau" name=\'{{b.name}}\' id="{{b.nodeRef}}" ng-click="goToDashboard()" href="#/dashboard" >\n    <div class="image-wrap">\n        <span ng-show="b[\'en-retard\'] > 0" ng-click="retard()" i18n="app.bureau.fileLate" placement="top" kind="tooltip" count="{{b[\'en-retard\']}}" class="label label-danger" >{{b[\'en-retard\']}}</span>\n        <span class="label label-info" ng-click="traiter()" i18n="{{(b.isSecretaire ? \'Dossiers en secretariat\' : \'Dossiers à traiter\') + \' : __count__\'}}" placement="top" kind="tooltip" count="{{b[\'a-traiter\'] !== undefined ? b[\'a-traiter\'] : b[\'secretariat\']}}" > {{b.isSecretaire ? b[\'secretariat\'] : b[\'a-traiter\']}}</span>\n        <span ng-show="b[\'en-preparation\'] > 0" ng-click="preparation()" class="label label-warning" placement="top" i18n="app.bureau.fileToTransmit" kind="tooltip" count="{{b[\'en-preparation\']}}" >{{b[\'en-preparation\']}}</span>\n        <span ng-show="b[\'a-archiver\'] > 0" ng-click="archive()" class="label label-success" placement="top" i18n="app.bureau.fileToArchive" kind="tooltip" count="{{b[\'a-archiver\']}}" >{{b[\'a-archiver\']}}</span>\n        <span ng-show="b.retournes > 0 || b[\'a-imprimer\'] > 0" ng-click="retournes()" class="label label-inverse" placement="top" i18n="{{(b.isSecretaire ? \'Dossiers à imprimer\' : \'Dossiers rejetés\') + \' : __count__\'}}" kind="tooltip" count="{{b[\'retournes\'] !== undefined ? b[\'retournes\'] : b[\'a-imprimer\']}}" >{{b.isSecretaire ? b[\'a-imprimer\'] : b[\'retournes\']}}</span>\n        <span ng-show="b[\'dossiers-delegues\'] > 0" style="top:30px; background-color: #6f5499;" ng-click="delegue()"\n              class="label label-info"\n              placement="top" i18n="app.bureau.fileDeleg" kind="tooltip" count="{{b[\'dossiers-delegues\']}}">{{b[\'dossiers-delegues\']}}</span>\n        <img alt="{{b.name}}" ng-cloak ng-show="!hasThemeIcon" ng-src="{{context}}/res/images/bureau_v3.svg">\n        <img alt="{{b.name}}" ng-cloak ng-show="hasThemeIcon" imageonload="iconBureauLoaded()" ng-src="{{context}}/themes/{{tenant ? tenant + \'/\' : \'\'}}{{theme}}.png">\n    </div>\n    <div class="nom-bureau">{{b.name}}</div>\n</a>\n<a ng-if="!isThumbnail" ng-click="goToDashboard()" href="#/dashboard" ng-disabled="flags.backdrop" id="currentBureauName">{{b.shortName}}\n    <div style="position:absolute;left:0; right:0;bottom:0;">\n        <div style="display:table; width:100%">\n            <div style="display:table-cell; width:20%;">\n                <span ng-show="b[\'en-retard\'] > 0" ng-click="retard()" i18n="app.bureau.fileLate" placement="bottom"\n                      kind="tooltip" watch-value="b[\'en-retard\']" count="{{b[\'en-retard\']}}" class="label label-danger">{{b[\'en-retard\']}}</span>\n            </div>\n            <div style="display:table-cell; width:20%;">\n                <span ng-show="b[\'a-archiver\'] > 0" ng-click="archive()" class="label label-success" placement="bottom"\n                      i18n="app.bureau.fileToArchive" kind="tooltip" watch-value="b[\'a-archiver\']"\n                      count="{{b[\'a-archiver\']}}">{{b[\'a-archiver\']}}</span>\n            </div>\n            <div style="display:table-cell; width:20%;">\n                <span ng-show="b[\'retournes\'] > 0 || b[\'a-imprimer\'] > 0" ng-click="retournes()"\n                      class="label label-inverse" placement="bottom"\n                      i18n="{{(b.isSecretaire ? \'Dossiers à imprimer\' : \'Dossiers rejetés\') + \' : __count__\'}}"\n                      kind="tooltip" watch-value="b.retournes"\n                      count="{{b[\'retournes\'] !== undefined ? b[\'retournes\'] : b[\'a-imprimer\']}}">{{b.isSecretaire ? b[\'a-imprimer\'] : b[\'retournes\']}}</span>\n            </div>\n            <div style="display:table-cell; width:20%;">\n                <span ng-show="b[\'en-preparation\'] > 0" ng-click="preparation()" class="label label-warning"\n                      placement="bottom" i18n="app.bureau.fileToTransmit" kind="tooltip"\n                      watch-value="b[\'en-preparation\']" count="{{b[\'en-preparation\']}}">{{b[\'en-preparation\']}}</span>\n            </div>\n            <div style="display:table-cell; width:20%;">\n                <span ng-if="!b.isSecretaire" class="label label-info" ng-click="traiter()" i18n="app.bureau.fileToDo"\n                      placement="bottom" kind="tooltip" watch-value="b[\'a-traiter\']" count="{{b[\'a-traiter\']}}">{{b[\'a-traiter\']}}</span>\n                <span ng-if="b.isSecretaire" class="label label-info" ng-click="traiter()"\n                      i18n="Dossiers en secretariat : __count__" placement="bottom" kind="tooltip"\n                      watch-value="b.secretariat" count="{{b.secretariat}}">{{b.secretariat}}</span>\n            </div>\n        </div>\n    </div>\n</a>\n\n')}]),angular.module("partials/dashlets/actions.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/dashlets/actions.html",'<div id="actions" style="margin-top: 15px;">\n    <a ng-if="currentBureau.isSecretaire" ng-show="inArray(\'SECRETARIAT\', dossier.actions) && !dossier.locked"\n       id="action-button-secretary" tooltip="{{\'actions.returnFolder\' | translate}}"\n       ng-click="launchModalWithRedirect(\'SECRETARIAT\')" class="actions fa fa-user fa-2x text-muted">\n    </a>\n    <a ng-show="(dossier.actionDemandee === \'MAILSEC\' || dossier.actionDemandee === \'MAILSECPASTELL\') && dossier.isSent && !dossier.locked"\n       tooltip="{{\'actions.showSecureMailInformations\' | translate}}" ng-click="launchModalWithRedirect(\'MAILSECINFOS\')"\n       id="action-button-infosMailSec" class="actions fa fa-info-circle fa-2x text-muted">\n    </a>\n    <a ng-show="inArray(\'MAILSEC\', dossier.actions) && !dossier.locked" ng-click="launchModalWithRedirect(\'MAILSEC\')"\n       tooltip="{{\'actions.sendBySecureMail\' | translate}}" id="action-button-emailSec"\n       class="actions fa fa-envelope fa-2x text-muted">\n    </a>\n    <a ng-show="inArray(\'CACHET\', dossier.actions) && !dossier.locked" ng-click="launchModalWithRedirect(\'CACHET\')"\n       id="action-button-cachet" tooltip="{{\'actions.seal\' | translate}}"\n       class="actions fa ls-stamp fa-2x text-muted">\n    </a>\n    <a ng-show="inArray(\'REMORD\', dossier.actions) && !((dossier.actionDemandee === \'MAILSEC\' || dossier.actionDemandee === \'MAILSECPASTELL\') && dossier.isSent) && !dossier.locked"\n       tooltip="{{\'actions.applyRemorseRight\' | translate}}" id="action-button-remorse"\n       ng-click="launchModalWithRedirect(\'REMORD\')" class="actions fa fa-reply fa-2x text-muted">\n    </a>\n    <a ng-show="inArray(\'REJET\', dossier.actions) && dossier.actionDemandee === \'SIGNATURE\' && dossier.readingMandatory && !dossier.hasRead && !dossier.locked"\n       ng-click="launchModal(\'READ\')" tooltip="{{\'actions.readingRequired\' | translate}}" id="action-button-read"\n       class="actions fa fa-key fa-2x text-muted">\n    </a>\n    <a ng-show="inArray(\'RAZ\', dossier.actions) && !dossier.locked" ng-click="launchModalWithRefresh(\'RAZ\')"\n       id="action-button-raz" tooltip="{{\'actions.correctAndReissue\' | translate}}"\n       class="actions fa fa-recycle fa-2x text-muted">\n    </a>\n    <a ng-show="inArray(\'EDITION\', dossier.actions) && !dossier.locked" id="action-button-pencil"\n       class="actions fa fa-pencil fa-2x text-muted" ng-click="editDossier()" tooltip="{{\'actions.edit\' | translate}}"\n       href="#/nouveau">\n    </a>\n    <a ng-show="((inArray(\'VISA\', dossier.actions) && dossier.actionDemandee === \'VISA\') || (inArray(\'SIGNATURE\', dossier.actions) && !dossier.isSignPapier && (!dossier.readingMandatory || (dossier.readingMandatory && dossier.hasRead)))) && !dossier.isSent && !dossier.locked"\n       tooltip="{{dossier.actionDemandee === \'VISA\' ? \'Viser\': \'Signer\'}}" ng-click="checkReadAndLaunchModalWithRedirect(\'VALIDATION\')"\n       id="action-button-sign" ng-class="dossier.actionDemandee === \'VISA\' ? \'fa-check-square-o\': \'ls-signature\'"\n       class="actions fa fa-2x text-muted">\n    </a>\n    <a ng-show="inArray(\'TDT_HELIOS\', dossier.actions) && !dossier.locked"\n       ng-click="launchModalWithRedirect(\'TDT_HELIOS\')" tooltip="{{\'actions.sendToHeliosTdt\' | translate}}"\n       id="action-button-tdt-helios" class="actions fa fa-cloud-upload fa-2x text-muted">\n    </a>\n    <a ng-show="inArray(\'TDT_ACTES\', dossier.actions) && !dossier.locked"\n       ng-click="launchModalWithRedirect(\'TDT_ACTES\')" tooltip="{{\'actions.sendToActesTdt\' | translate}}"\n       id="action-button-tdt-actes" class="actions fa fa-cloud-upload fa-2x text-muted">\n    </a>\n    <a ng-show="inArray(\'SIGNATURE\', dossier.actions) && !dossier.circuit.isDigitalSignatureMandatory && !dossier.isSignPapier && !dossier.locked"\n       ng-click="launchModal(\'PAPIER\')" id="action-button-papier" tooltip="{{\'actions.paperSignature\' | translate}}"\n       class="actions fa fa-file-text-o fa-2x text-muted">\n    </a>\n    <a ng-show="inArray(\'SIGNATURE\', dossier.actions) && dossier.isSignPapier && !dossier.locked"\n       ng-click="launchModalWithRedirect(\'PAPIERSIGN\')" id="action-button-papier-sign"\n       tooltip="{{\'actions.paperSignature\' | translate}}" class="actions fa fa-file-text fa-2x text-muted">\n    </a>\n    <a ng-show="inArray(\'REJET\', dossier.actions)  && !((dossier.actionDemandee === \'MAILSEC\' || dossier.actionDemandee === \'MAILSECPASTELL\') && dossier.isSent) && !dossier.locked"\n       tooltip="{{\'actions.reject\' | translate}}" ng-click="launchModalWithRedirect(\'REJET\')" id="action-button-reject"\n       class="actions fa fa-times fa-2x text-muted">\n    </a>\n    <a ng-show="inArray(\'ARCHIVAGE\', dossier.actions) && !dossier.locked" id="action-button-archive"\n       tooltip="{{\'actions.archive\' | translate}}" ng-click="launchModalWithRedirect(\'ARCHIVAGE\')"\n       class="actions fa fa-inbox fa-2x text-muted">\n    </a>\n    <a ng-show="inArray(\'SUPPRESSION\', dossier.actions) && !dossier.locked" id="action-button-delete"\n       tooltip="{{\'actions.delete\' | translate}}" ng-click="launchModalWithRedirect(\'SUPPRESSION\')"\n       class="actions fa fa-trash-o fa-2x text-muted">\n    </a>\n    <a ng-show="oneOrMoreAttestError() && !dossier.locked" id="action-button-refresh-attest"\n       tooltip="{{\'actions.refresh-attest\' | translate}}" ng-click="launchAttest()"\n       class="actions fa fa-search fa-2x text-muted">\n    </a>\n\n    <div class="btn-group" dropdown>\n        <span class="btn btn-default dropdown-toggle" id="dropdownActions">\n            <i class="fa fa-cogs"></i>\n            Actions\n            <i class="fa fa-caret-down"></i>\n        </span>\n        <ul class="dropdown-menu pull-right pointer" role="menu" aria-labelledby="dropdownActions">\n            <li ng-if="!currentBureau.isSecretaire"\n                ng-show="inArray(\'SECRETARIAT\', dossier.actions) && !dossier.locked">\n                <a ng-click="launchModalWithRedirect(\'SECRETARIAT\')" id="action-button-secretary">\n                    <i class="fa fa-fw fa-user"></i>\n                    {{\'actions.sendToSecretariat\' | translate}}\n                </a>\n            </li>\n            <li ng-show="inArray(\'EMAIL\', dossier.actions)">\n                <a ng-click="launchModal(\'PRINT\')" id="action-button-print" class="icon-print icon-large">\n                    <i class="fa fa-fw fa-print"></i>\n                    {{\'actions.print\' | translate}}\n                </a>\n            </li>\n            <li ng-show="inArray(\'EMAIL\', dossier.actions)">\n                <a ng-click="launchModal(\'EMAIL\')" id="action-button-email">\n                    <i class="fa fa-fw fa-paper-plane-o"></i>\n                    {{\'actions.sendByMail\' | translate}}\n                </a>\n            </li>\n            <li ng-show="inArray(\'ENCHAINER_CIRCUIT\', dossier.actions) && !dossier.locked">\n                <a ng-click="launchModalWithRefresh(\'CHAIN\')" id="action-button-chain">\n                    <i class="fa fa-fw fa-road"></i>\n                    {{\'actions.chainCircuit\' | translate}}\n                </a>\n            </li>\n            <li ng-show="inArray(\'AVIS_COMPLEMENTAIRE\', dossier.actions) && !dossier.locked">\n                <a id="action-button-notifs" ng-click="launchModal(\'NOTIFICATIONS\')">\n                    <i class="fa fa-fw fa-desktop"></i>\n                    {{\'actions.notifyAndAddConsultationCredentials\' | translate}}\n                </a>\n            </li>\n            <li ng-show="inArray(\'TRANSFERT_ACTION\', dossier.actions) && !dossier.locked && dossier.actionDemandee === \'SIGNATURE\'">\n                <a ng-click="launchModalWithRedirect(\'TRANSFERT_SIGNATURE\')" id="action-button-changeSign">\n                    <i class="fa fa-fw fa-share"></i>\n                    {{\'actions.transferFolderToSign\' | translate}}\n                </a>\n            </li>\n            <li ng-show="inArray(\'TRANSFERT_ACTION\', dossier.actions) && !dossier.locked && dossier.actionDemandee === \'VISA\'">\n                <a ng-click="launchModalWithRedirect(\'TRANSFERT_VISA\')" id="action-button-changeVisa">\n                    <i class="fa fa-fw fa-share"></i>\n                    {{\'actions.transferFolderToValid\' | translate}}\n                </a>\n            </li>\n            <li ng-show="inArray(\'AVIS_COMPLEMENTAIRE\', dossier.actions) && !dossier.locked">\n                <a ng-click="launchModalWithRedirect(\'AVIS_COMPLEMENTAIRE\')" id="action-button-avisComp">\n                    <i class="fa fa-fw fa-retweet"></i>\n                    {{\'actions.askingForAdditionalOpinion\' | translate}}\n                </a>\n            </li>\n            <li ng-show="inArray(\'JOURNAL\', dossier.actions)">\n                <a ng-click="launchModal(\'JOURNAL\')" id="action-button-journal">\n                    <i class="fa fa-fw fa-list-alt"></i>\n                    {{\'actions.eventLog\' | translate}}\n                </a>\n            </li>\n            <li ng-show="inArray(\'EDITION\', dossier.actions) && !dossier.locked && (dossier.circuit.sigFormat.indexOf(\'PKCS#7\') !== -1 || dossier.circuit.sigFormat.indexOf(\'XAdES/detached\') !== -1)"\n                style="height:26px;">\n                <a style="height:100%;">\n                    <form novalidate name="addSig"\n                          class="form-horizontal"\n                          fileupload="signature"\n                          one-file="true"\n                          submit-button=".launchUpload"\n                          wrong-type="apercu.signature.wrongTypeSig(ext)"\n                          fileinput="#addSignInput"\n                          file-added="apercu.signature.sigAdded(files)"\n                          upload-success="apercu.signature.sigUploaded(data, index)"\n                          action="{{context + \'/base64encode\'}}"\n                          method="POST"\n                          enctype="multipart/form-data">\n                        <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->\n                        <div class="fileupload-buttonbar">\n                            <!-- The fileinput-button span is used to style the file input field as button -->\n                            <span class="fileinput-button force-display pointer">\n                                <i class="fa fa-fw fa-certificate"></i>\n                                {{\'actions.addSignatureToFolder\' | translate}}\n                                <input id="addSignInput" type="file" name="file" ng-click="$event.stopPropagation()">\n                            </span>\n                        </div>\n                    </form>\n                </a>\n            </li>\n        </ul>\n\n    </div>\n    <div class="text text-danger" ng-if="apercu.signature.sigWrongType">\n        <i class="fa fa-times"></i> {{\'actions.expectedExentions\' | translate}} : .p7s / .sig\n    </div>\n    <div class="text text-success" ng-if="apercu.signature.isSigUploaded">\n        <i class="fa fa-check"></i> {{\'actions.signatureSaved\' | translate}}\n    </div>\n</div>')}]),angular.module("partials/dashlets/annotations.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/dashlets/annotations.html",'<div id="annotations" class="well dashlet" ng-show="hasAnnotPub">\n    <h3 ng-click="element.show = !element.show" class="pointer text-info">{{\'annotations.publicAnnotations\' | translate}}</h3>\n    <div class="dashlet-content" bn-slide-show="element.show">\n        <div ng-repeat="etape in dossier.circuit.etapes" ng-if="!!etape.annotPub">\n            <span ng-bind-html="etape.annotPub"></span>\n            <blockquote style="padding: 0;">\n                <small ng-if="etape.dateValidation != null">{{(\'annotations.-person-the-date-\' | translate).replace("-date-", (etape.dateValidation | date:(\'annotations.dateFormat\' | translate))).replace("-person-", etape.signataire)}}</small>\n                <small ng-if="etape.dateValidation == null">Par {{etape.signataire}}, étape courrante</small>\n            </blockquote>\n        </div>\n    </div>\n</div>')}]),angular.module("partials/dashlets/annoter.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/dashlets/annoter.html",'<div id="annoter" class="well dashlet" ng-show="dossier.actions.indexOf(\'REJET\') !== -1">\n    <h3 ng-click="element.show = !element.show" class="pointer text-info">{{\'annoter.annotate\' | translate}}</h3>\n    <div class="dashlet-content" bn-slide-show="element.show" >\n        <textarea style="resize: vertical; margin-bottom:10px;" ng-change="changedAnnotation(local.annot)" ng-model="local.annot" class="form-control" rows="3"></textarea>\n    </div>\n</div>')}]),angular.module("partials/dashlets/annotindex.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/dashlets/annotindex.html",'<div id="annotationsIndex" class="well dashlet" ng-show="apercu.annotations.hasAnnotation">\n    <h3 ng-click="element.show = !element.show" class="pointer text-info">{{\'annotindex.graphicalAnnotations\' | translate}}</h3>\n\n    <div class="dashlet-content" bn-slide-show="element.show">\n        <ul class="list-unstyled">\n            <li ng-repeat="(documentIndex, pages) in apercu.annotations.orderedList"\n                ng-show="apercu.annotations.docHasAnnot[documentIndex]">\n                <strong ng-show="isMultiDocument()" class="text-info wrap"\n                        ng-init="apercu.annotations.docHasAnnot[documentIndex] = false">{{getDocumentName(documentIndex)}}</strong>\n                <ul class="list-unstyled">\n                    <li ng-repeat="(page, value) in apercu.annotations.orderedList[documentIndex]"\n                        ng-if="value.length > 0">\n                        <span class="text-info">{{(\'annotindex.page-pagenumber-\' | translate).replace("-pagenumber-", (page *1 + 1))}}</span>\n                        <hr style="margin:0;">\n                        <ul class="list-unstyled">\n                            <li ng-repeat="annot in value" class="pointer" ng-click="apercu.annotations.select(documentIndex, page, annot)">\n                                <span ng-if="!annot.text" class="text-warning">{{\'annotindex.noComment\' | translate}}</span>\n                                <span ng-if="!!annot.text" class="text-overflow">{{annot.text}}</span>\n                                <blockquote style="padding:0;"\n                                            ng-init="apercu.annotations.docHasAnnot[documentIndex] = true">\n                                    <small>{{(\'annotindex.by-person-the-date-\' | translate).replace("-date-", (annot.date | date:(\'annotindex.dateFormat\' | translate))).replace("-person-", annot.author)}}</small>\n                                </blockquote>\n                            </li>\n                        </ul>\n                    </li>\n                </ul>\n            </li>\n        </ul>\n    </div>\n</div>')}]),angular.module("partials/dashlets/circuit.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/dashlets/circuit.html",'<script type="text/ng-template"  id="popover_signature">\n    <a href="{{context}}/proxy/alfresco/parapheur/api/getProp?dossier=workspace://SpacesStore/{{etape.id}}&property=ph:signature-etape&filename={{dossier.documents[0].name + \'-signature-iparapheur\'}}">{{\'circuit.download\' | translate}}</a>\n    <p>\n        <strong ng-if="etape.signatureInfo.signature_date">{{\'circuit.signatureDate\' | translate}} :</strong>\n        {{etape.signatureInfo.signature_date}}<br>\n        <strong>{{\'circuit.withCertificateOf\' | translate}} :</strong> {{etape.signatureInfo.subject_name}}<br>\n        <strong>{{\'circuit.issuedBy\' | translate}} :</strong> {{etape.signatureInfo.issuer_name}}<br>\n        <strong>{{\'circuit.certificateValidity\' | translate}} :</strong> {{(\'circuit.from-start-to-end-\' | translate).replace("-start-", etape.signatureInfo.certificate_valid_from).replace("-end-", etape.signatureInfo.certificate_valid_to)}}\n    </p>\n</script>\n\n<div id="circuit" class="well dashlet">\n    <h3 ng-click="element.show = !element.show" class="pointer text-info">{{\'circuit.validationCircuit\' | translate}}</h3>\n    <div class="dashlet-content" bn-slide-show="element.show">\n        <span ng-if="flags.noCircuit" class="text-danger">\n            <i class="fa fa-warning"></i>{{\'circuit.noCircuitDefinedForThisFolder\' | translate}}\n        </span>\n        <ol>\n            <li ng-repeat="etape in dossier.circuit.etapes">\n                <i class="fa fa-lg fa-fw" ng-class="getIconClass(etape, dossier.circuit.etapes[$index+1])" tooltip="{{getActionTooltip(etape)}}"></i>\n                <span style="position:absolute; left: 0; margin-left: 50px;" ng-if="etape.isCurrent && !dossier.circuit.etapes[$index-1].rejected">\n                    <i tooltip="Étape en cours" class="fa fa-lg fa-fw text-success fa-arrow-right" ></i>\n                </span>\n\n                <span class="label label-danger" style="position:absolute; left: -5px; margin-left: 50px; margin-top: 18px;" ng-if="etape.rejected && dossier.circuit.etapes[$index+1].isCurrent">\n                    Rejeté\n                </span>\n\n                <span ng-class="etape.approved ? (etape.rejected && dossier.circuit.etapes[$index+1].isCurrent ? \'text-danger\' : \'text-success\') : (etape.isCurrent && !dossier.circuit.etapes[$index-1].rejected) ? \'bold\' : \'\'">\n                    {{etape.parapheurName}}\n                    <span ng-if="etape.delegueName">\n                        <i class="fa fa-arrow-right"></i>\n                        <span tooltip="Par délégation">{{etape.delegueName}}</span>\n                    </span>\n\n                </span>\n                <i ng-if="etape.signatureEtape && (dossier.circuit.sigFormat.indexOf(\'PKCS#7\') !== -1 || dossier.circuit.sigFormat.indexOf(\'PKCS#1\') !== -1 || dossier.circuit.sigFormat === \'XAdES/detached\')"\n                     class="pointer fa fa-lg fa-fw ls-signature-o"  data-placement="left"\n                   bs-popover="\'popover_signature\'" data-trigger="click" title="{{\'circuit.signature_information\' | translate}}"></i>\n                <span tooltip="Télécharger le PES_Acquit" ng-if="etape.approved && !etape.rejected && etape.actionDemandee === \'TDT\' && dossier.protocole === \'HELIOS\'">\n                    <a target="_blank" href="{{context}}/proxy/alfresco/api/node/content%3bph%3anackHeliosXml/workspace/SpacesStore/{{dossier.id}}/PES_Acquit.xml"><i class="fa fa-arrow-circle-o-down fa-lg"></i></a>\n                </span>\n                <blockquote class="quote-circuit" ng-if="etape.approved">\n                    <small>{{(\'circuit.the-date-from-person-\' | translate).replace("-date-", (etape.dateValidation | date:(\'circuit.dateFormat\' | translate))).replace("-person-", etape.signataire)}}</small>\n                </blockquote>\n            </li>\n        </ol>\n    </div>\n</div>\n')}]),angular.module("partials/dashlets/details-dossier.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/dashlets/details-dossier.html",'<div id="details-dossier" class="well dashlet">\n    <h3 ng-click="element.show = !element.show" class="pointer text-info">{{\'details-dossier.folderDetails\' | translate}}</h3>\n    <div class="dashlet-content" bn-slide-show="element.show">\n        <ul>\n            <li>{{\'details-dossier.type\' | translate}} : {{dossier.type}}<span ng-if="!dossier.type" class="text-info"><i class="fa fa-info-circle"></i> {{\'details-dossier.undefined\' | translate}}</span></li>\n            <li>{{\'details-dossier.subtype\' | translate}} : {{dossier.sousType}}<span ng-if="!dossier.sousType" class="text-info"><i class="fa fa-info-circle"></i> {{\'details-dossier.undefined\' | translate}}</span></li>\n            <li>{{\'details-dossier.visibility\' | translate}} : {{dossier.visibility === "group" ? "groupe" : dossier.visibility}}</li>\n            <li><span ng-if="dossier.isRead">{{\'details-dossier.readFolder\' | translate}}</span><span ng-if="!dossier.isRead">{{\'details-dossier.unreadFolder\' | translate}}</span></li>\n            <li ng-if="dossier.actionDemandee === \'TDT\' && dossier.isSent">{{\'details-dossier.tdtStatus\' | translate}} : {{dossier.status}} <i class="pointer fa fa-refresh" ng-click="refreshStatus()"></i></li>\n            <li ng-repeat="(metaName, metaInfo) in dossier.metadatas" ng-if="metaInfo.editable === \'false\'">\n                {{metaInfo.realName}} :\n                <span ng-switch on="metaInfo.type">\n                    <span ng-switch-when="DOUBLE">\n                        {{metaInfo.value | number:2}}\n                    </span>\n                    <span ng-switch-when="DATE">\n                         {{metaInfo.value | date:\'dd/MM/yyyy\'}}\n                    </span>\n                    <span ng-switch-when="BOOLEAN">\n                         {{metaInfo.value === \'true\' ? \'Oui\' : \'Non\'}}\n                    </span>\n                    <span ng-switch-when="URL">\n                        <a target="_blank" ng-href="{{metaInfo.value}}">{{metaInfo.value}}</a>\n                    </span>\n                    <span ng-switch-default>\n                         {{metaInfo.value}}\n                    </span>\n                </span>\n            </li>\n        </ul>\n        <form name=\'metasForm\' ng-init="setFormScope(this)" ng-show="!empty(dossier.metadatas)" class="container-fluid" novalidate>\n            <div ng-switch on="metaInfo.type" ng-if="metaInfo.editable === \'true\'" class="control-group" ng-repeat="(metaName, metaInfo) in dossier.metadatas">\n                <div class="form-group col-md-12" ng-class="{true:\'mandatory-group\', false:\'\'}[metaInfo.mandatory === \'true\']" ng-switch-when="DATE" ng-hide="metaInfo.values">\n                    <label class="control-label" for="{{metaName}}">{{metaInfo.realName}}</label>\n                    <span class="fa fa-warning label label-danger" ng-show="{{metaInfo.mandatory === \'true\'}}"> {{\'details-dossier.required\' | translate}}</span>\n                    <div class="input-group">\n                        <input ng-change="metaChanged()" ng-cloak="" ip-id="metaName" return-format="timestamp" readonly="true" ip-datepicker type="text" ng-class="{true:\'\', false:\'unvalidate\'}[metaInfo.mandatory === \'true\']" ng-model="dossier.metadatas[metaName].value" class="form-control" ng-required="metaInfo.mandatory === \'true\' && !metaInfo.values">\n                        <span ng-click="dossier.metadatas[metaName].value = \'\'" class="pointer input-group-addon">X</span>\n                    </div>\n                </div>\n                <div class="form-group col-md-12"  ng-class="{true:\'mandatory-group\', false:\'\'}[metaInfo.mandatory === \'true\']" ng-switch-when="STRING" ng-hide="metaInfo.values">\n                    <label class="control-label" for="{{metaName}}">{{metaInfo.realName}}</label>\n                    <span class="fa fa-warning label label-danger" ng-show="{{metaInfo.mandatory === \'true\'}}"> {{\'details-dossier.required\' | translate}}</span>\n                    <input ng-cloak type="text" ng-change="metaChanged()" id="{{metaName}}" ng-model="dossier.metadatas[metaName].value" ng-class="{true:\'\', false:\'unvalidate\'}[metaInfo.mandatory === \'true\']" class="form-control" ng-required="metaInfo.mandatory === \'true\'  && !metaInfo.values">\n                </div>\n                <div class="form-group col-md-12"\n                     ng-class="{true:\'mandatory-group\', false:\'\'}[metaInfo.mandatory === \'true\']" ng-switch-when="URL"\n                     ng-hide="metaInfo.values">\n                    <label class="control-label" for="{{metaName}}">{{metaInfo.realName}}</label>\n                    <span class="fa fa-warning label label-danger" ng-show="{{metaInfo.mandatory === \'true\'}}"> {{\'details-dossier.required\' | translate}}</span>\n                    <input ng-cloak type="text" ng-change="metaChanged()" id="{{metaName}}"\n                           ng-model="dossier.metadatas[metaName].value"\n                           ng-class="{true:\'\', false:\'unvalidate\'}[metaInfo.mandatory === \'true\']" class="form-control"\n                           ng-required="metaInfo.mandatory === \'true\'  && !metaInfo.values">\n                </div>\n                <div class="form-group col-md-12"  ng-class="{true:\'mandatory-group\', false:\'\'}[metaInfo.mandatory === \'true\']" ng-switch-when="INTEGER" ng-hide="metaInfo.values">\n                    <label class="control-label" for="{{metaName}}">{{metaInfo.realName}}</label>\n                    <span class="fa fa-warning label label-danger" ng-show="{{metaInfo.mandatory === \'true\'}}"> {{\'details-dossier.required\' | translate}}</span>\n                    <input type="text" integer ng-change="metaChanged()" id="{{metaName}}" ng-model="dossier.metadatas[metaName].value" ng-class="{true:\'\', false:\'unvalidate\'}[metaInfo.mandatory === \'true\']" class="form-control" ng-required="metaInfo.mandatory === \'true\'  && !metaInfo.values">\n                </div>\n                <div class="form-group col-md-12"  ng-class="{true:\'mandatory-group\', false:\'\'}[metaInfo.mandatory === \'true\']" ng-switch-when="DOUBLE" ng-hide="metaInfo.values">\n                    <label class="control-label" for="{{metaName}}">{{metaInfo.realName}}</label>\n                    <span class="fa fa-warning label label-danger" ng-show="{{metaInfo.mandatory === \'true\'}}"> {{\'details-dossier.required\' | translate}}</span>\n                    <input type="text" decimal ng-change="metaChanged()" id="{{metaName}}" ng-model="dossier.metadatas[metaName].value" ng-class="{true:\'\', false:\'unvalidate\'}[metaInfo.mandatory === \'true\']" class="form-control" ng-required="metaInfo.mandatory === \'true\'  && !metaInfo.values">\n                </div>\n                <div class="form-group col-md-12"  ng-class="{true:\'mandatory-group\', false:\'\'}[metaInfo.mandatory === \'true\']" ng-switch-when="BOOLEAN">\n                    <label class="control-label" for="{{metaName}}">{{metaInfo.realName}}</label>\n                    <span class="fa fa-warning label label-danger" ng-show="{{metaInfo.mandatory === \'true\'}}"> {{\'details-dossier.required\' | translate}}</span>\n                    <select id="{{metaName}}"\n                            ng-options="el.value as el.text for el in apercu.options.getOptionsFromMeta(metaInfo)"\n                            ng-change="metaChanged()" ng-model="dossier.metadatas[metaName].value"\n                            ng-class="{true:\'\', false:\'unvalidate\'}[metaInfo.mandatory === \'true\']" class="form-control"\n                            ng-required="metaInfo.mandatory === \'true\'">\n\n                    </select>\n                </div>\n                <div class="form-group col-md-12" ng-show="metaInfo.values" ng-class="{true:\'mandatory-group\', false:\'\'}[metaInfo.mandatory === \'true\']">\n                    <label class="control-label" for="{{metaName}}">{{metaInfo.realName}}</label>\n                    <span class="fa fa-warning label label-warning float-right" ng-show="{{metaInfo.mandatory === \'true\'}}"> {{\'details-dossier.required\' | translate}}</span>\n                    <select id="{{metaName}}"\n                            ng-options="el.value as el.text for el in apercu.options.getOptionsFromMeta(metaInfo)"\n                            ng-change="metaChanged()" ng-change="valuesMetaUndefined(metaName)"\n                            ng-model="dossier.metadatas[metaName].value"\n                            ng-class="{true:\'\', false:\'unvalidate\'}[metaInfo.mandatory === \'true\']" class="form-control"\n                            ng-required="metaInfo.mandatory === \'true\'  && metaInfo.values">\n                    </select>\n                </div>\n            </div>\n        </form>\n        <span ng-if="metaSaved" class="text text-success"><i class="fa fa-check"></i> {{\'details-dossier.savedMetadatas\' | translate}}</span>\n        <span ng-if="metaSavedError" class="text text-danger"><i class="fa fa-warning"></i> {{metaSavedErrorMsg | translate}}</span>\n        <span ng-if="metasForm.$invalid" class="text text-danger"><i class="fa fa-warning"></i> Valeur de métadonnée invalide</span>\n        <span style="width:100%; word-wrap: break-word;white-space: normal;" ng-if="hasEditableMeta && !dossier.locked" ng-click="saveMetadatas()" type="button" class="btn btn-default force-display" ng-disabled="metasForm.$invalid"><i class="fa fa-save"></i> {{\'details-dossier.saveMetadatas\' | translate}}</span>\n\n        <form ng-if="!dossier.locked && dossier.documents.length > 0 && dossier.canAdd"\n              fileupload="document"\n              wrong-type="wrongType(ext, isValid, isAuthorized)"\n              fileinput="#docinput"\n              signature-format="getCurrentSignatureFormat()"\n              protocol="getCurrentProtocol()"\n              check-if-exist="isDocumentNameAlreadyExist(name)"\n              dropzone="body"\n              file-added="addDocument(files)"\n              upload-success="documentAdded(data, index)"\n              upload-finish="uploadFinished(data, index)"\n              upload-error="uploadError(data, index)"\n              action="{{addDocumentUrl}}"\n              method="POST"\n              enctype="multipart/form-data">\n            <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->\n            <div class="fileupload-buttonbar lg">\n                <!-- The fileinput-button span is used to style the file input field as button -->\n                    <span class="btn btn-default fileinput-button force-display col-md-12">\n                        <i class="icon-plus icon-white"></i>\n                        <span><i class="fa fa-paperclip"></i> {{\'details-dossier.addFile\' | translate}}</span>\n                        <input ui-multiple="dossier.documents.length > 0" id="docinput" type="file" name="file">\n                    </span>\n                <input type="hidden" name="reloadMainDocument" value="false">\n                <input type="hidden" name="isMainDocument" value="false">\n                <input type="hidden" name="browser" value="notIe">\n                <input type="hidden" name="dossier" value="{{dossier.id}}">\n            </div>\n        </form>\n    </div>\n</div>\n<div ng-show="typeError" class="alert alert-danger">\n    {{\'details-dossier.Error_The_file_type_isnt_handled_by_the_iParapheur\' | translate}}\n</div>\n<div ng-show="formatError" class="alert alert-danger">\n    {{\'details-dossier.Error_The_file_type_does_not_match_the_selected_type\' | translate}}\n</div>\n<div ng-show="!!uploadErrorMessage" class="alert alert-danger">\n    {{uploadErrorMessage}}\n</div>');
}]),angular.module("partials/dashlets/liste-dossiers.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/dashlets/liste-dossiers.html",'<div id="liste-dossiers" class="well dashlet">\n    <h3 ng-click="element.show = !element.show" class="pointer text-info">{{\'liste-dossier.customList\' | translate}}</h3>\n    <div class="dashlet-content" bn-slide-show="element.show">\n\n        <fieldset id="select-filter" class="filters">\n            <label class="">{{\'liste-dossier.availableFilters\' | translate}}</label>\n            <select ng-options="el.key as el.value group by el.group for el in apercu.options.filters()" ng-if="nav"\n                    ng-model="currentFilterName"\n                    ng-init="currentFilterName = nav.selected ? nav.selected : dashFilter.dossier"\n                    ng-change="changeFilter(currentFilterName)" class="form-control">\n            </select>\n        </fieldset>\n        <div class="navigation">\n            <span class="btn btn-default" ng-click="changePage(false)" ng-disabled="!nav.hasPrev" tooltip="Page précédente">\n                <i class="fa fa-chevron-left"></i>\n            </span>\n            <span class="btn btn-default" ng-click="changePage(true)" ng-disabled="!nav.hasNext" tooltip="Page suivante">\n                <i class="fa fa-chevron-right"></i>\n            </span>\n        </div>\n        <hr>\n        <ul id="dossiers-list" class="nav nav-pills nav-stacked list-circuits">\n            <li ng-repeat="dossierInfo in dossiers" ng-class="dossier.id === dossierInfo.id ? \'active\' : \'\'">\n                <a ng-class="dossierInfo.locked ? (dossier.id === dossierInfo.id ? \'active pending\' : \'pending\') : (dossier.id === dossierInfo.id ? \'active\' : \'\')" ng-click="selectNextDossier(dossierInfo)">{{dossierInfo.title}}</a>\n            </li>\n        </ul>\n        <span class="text text-info" ng-if="dossiers.length === 0">\n            <span style="height:20px; display:block;" ng-if="gettingDossier">\n                <span style="position: absolute; width: 0px; z-index: 2000000000; left: 50%;" us-spinner="{radius:6, width:4, length: 8}" ></span>\n            </span>\n            <span ng-if="!gettingDossier">\n                <i class="fa fa-info-circle"></i> {{\'liste-dossier.noFolderFound\' | translate}}\n            </span>\n        </span>\n    </div>\n</div>')}]),angular.module("partials/dashlets/nom-dossier.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/dashlets/nom-dossier.html",'<div id="nom-dossier" class="well dashlet">\n    <h3 ng-click="element.show = !element.show" class="wrap pointer text-info">{{dossier.title}}</h3>\n    <div bn-slide-show="element.show" class="dashlet-content">\n        <span ng-if="dossier.documents.length === 0" class="text-danger">\n            <i class="fa fa-warning"></i>  {{\'nom-dossier.noDocument\' | translate}}\n        </span>\n        <ul class="list-unstyled list-documents">\n            <li class="pointer" ng-init="dossier.documents[$index].state = \'\'" bn-slide-show="true"\n                ng-repeat="document in dossier.documents" ng-class="getDocumentListItemClass($index)">\n                <hr ng-if="isFirstAnnex($index)">\n                <div ng-style="dossier.isXemEnabled ? {display:\'inline-block\'} : {}">\n                    <a target="_blank" class="xemelios" ng-click="readDossier(0)"\n                       ng-if="$index === 0 && dossier.isXemEnabled && (document.name | fileext) === \'xml\'"\n                       ng-href="{{context}}/proxy/alfresco/parapheur/dossiers/{{dossier.id}}/{{document.id}}/xemelios">\n                        <img ng-src="{{context}}/res/images/xemelios.png">\n                    </a>\n\n                    <form ng-if="document.canDelete && $index == 0"\n                          signature-format="getSignatureFormat()"\n                          protocol="getProtocol()"\n                          wrong-type="wrongType(ext, isValid, isAuthorized)"\n                          file-added="beginReplace(files)"\n                          upload-success="documentAdded(data, index)"\n                          fileupload="document"\n                          main-document="true"\n                          fileinput="#replaceMain"\n                          action="{{addDocumentUrl}}" method="POST" enctype="multipart/form-data">\n                        <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->\n                        <div class="fileupload-buttonbar inline">\n                            <!-- The fileinput-button span is used to style the file input field as button -->\n                            <i class="fa fa-exchange fileinput-button force-display" tooltip="Remplacer">\n                                <input id="replaceMain" type="file" name="file">\n                            </i>\n                            <input type="hidden" name="isMainDocument" value="true">\n                            <input type="hidden" name="reloadMainDocument" value="true">\n                            <input type="hidden" name="browser" value="notIe">\n                            <input type="hidden" name="dossier" value="{{dossier.id}}">\n                        </div>\n                    </form>\n                </div>\n                <div ng-style="dossier.isXemEnabled ? {display:\'inline-block\'} : {}">\n                    <span>\n                        <i ng-if="document.isLocked" class="fa fa-info-circle text-info"\n                           tooltip="{{\'nom-dossier.visual_generating\' | translate}}"></i>\n                        <i ng-if="document.canDelete && $index > 0"\n                           ng-click="dossier.documents[$index].state = \'delete\'; removeDocument($index)"\n                           class="fa fa-trash deleteDocument"></i>\n                        <a tooltip="{{\'nom-dossier.download_pdf\' | translate}}"\n                           ng-if="(!isPdf($index)) && (document.visuelPdf) && (!dossier.isXemEnabled)"\n                           ng-href="{{context}}/proxy/alfresco/api/node/content%3bph%3avisuel-pdf/workspace/SpacesStore/{{document.id}}/{{document.name}}.pdf"\n                           download="{{document.name}}.pdf">\n                            <i class="fa fa-fw fa-lg fa-file-pdf-o"></i>\n                        </a>\n\n                        <!-- Main PDF document -->\n                        <span tooltip="{{\'nom-dossier.attest_error\' | translate}}" style="font-size:1.5em;"\n                              ng-if="isCurrentMainDocument($index) && document.attestState == -1"\n                              class="fa fa-times-circle-o text-danger"></span>\n                        <span tooltip="{{\'nom-dossier.attest_generating\' | translate}}" style="font-size:1.5em;"\n                              ng-if="isCurrentMainDocument($index) && document.attestState == 1"\n                              class="fa fa-clock-o text-warning"></span>\n                        <a tooltip="{{\'nom-dossier.download_attest\' | translate}}"\n                           ng-if="isCurrentMainDocument($index) && document.attestState == 2"\n                           ng-href="{{context}}/proxy/alfresco/api/node/content%3bph%3aattest-content/workspace/SpacesStore/{{document.id}}/attest.pdf"\n                           download="{{document.name}}-attest.pdf">\n                            <span class="fa fa-check-circle-o text-success" style="font-size:1.5em;"></span>\n                        </a>\n                        <a tooltip="{{\'nom-dossier.download_pdf\' | translate}}"\n                           ng-if="isPdf($index) && isCurrentMainDocument($index)"\n                           ng-href="{{context}}/proxy/alfresco/api/node/workspace/SpacesStore/{{document.id}}/content/{{document.name}}"\n                           download="{{document.name}}">\n                            <i class="fa fa-fw fa-lg fa-file-pdf-o"></i>\n                        </a>\n                        <a ng-if="isPdf($index) && isCurrentMainDocument($index)" style="word-wrap: break-word;"\n                           ng-click="selectDocument($index)" tooltip="{{\'nom-dossier.visualize\' | translate}}">\n                            {{document.name}}</a>\n\n                        <!-- Main non-PDF document -->\n                        <span ng-if="!isPdf($index) && isCurrentMainDocument($index)">\n                            <a tooltip="{{\'nom-dossier.download\' | translate}}"\n                               class="fa fa-lg fa-fw"\n                               ng-class="getFileExtIcon(document.name)"\n                               ng-href="{{context}}/proxy/alfresco/api/node/workspace/SpacesStore/{{document.id}}/content/{{document.name}}"\n                               download="{{document.name}}"></a>\n                            <a tooltip="{{\'nom-dossier.visualize\' | translate}}" class="wrap"\n                               ng-click="document.visuelPdf ? selectDocument($index) : showDossier($index)">\n                                {{document.name}}</a>\n                        </span>\n\n\n                        <!-- Annexes -->\n                        <a tooltip="{{\'nom-dossier.download\' | translate}}" ng-if="!isCurrentMainDocument($index)"\n                           class="wrap"\n                           ng-href="{{context}}/proxy/alfresco/api/node/workspace/SpacesStore/{{document.id}}/content/{{document.name}}"\n                           download="{{document.name}}">\n                            <i class="fa fa-lg fa-fw" ng-class="getFileExtIcon(document.name)"></i>\n                            {{document.name}}</a>\n                    </span>\n                </div>\n                <form ng-if="$index === 0 && extension(document.name) === \'xml\' && inArray(\'EDITION\', dossier.actions)"\n                      fileupload="pdf" wrong-type="wrongPDF(ext)" fileinput="#visuinput" file-added="updateVisu(files)"\n                      upload-success="updateVisuEnd(data, index)" ng-action="{{addVisuelUrl}}" method="POST"\n                      enctype="multipart/form-data">\n                    <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->\n                    <div class="fileupload-buttonbar">\n                        <!-- The fileinput-button span is used to style the file input field as button -->\n                        <span class="fileinput-button force-display pointer">\n                            <i class="fa fa-eye"></i>\n                            {{\'nom-dossier.replaceVisual\' | translate}}\n                            <input id="visuinput" type="file" name="file">\n                        </span>\n                        <input type="hidden" name="dossier" value="{{dossier.id}}">\n                        <input type="hidden" name="browser" value="notIe">\n                        <input type="hidden" name="document" value="{{document.id}}">\n                    </div>\n                </form>\n\n                <div bn-slide-show="dossier.documents[$index].state === \'delete\'"\n                     class="progress progress-striped active">\n                    <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="45"\n                         aria-valuemin="0" aria-valuemax="100" style="width: 100%">\n                        {{\'nom-dossier.deleting\' | translate}}\n                    </div>\n                </div>\n\n                <div bn-slide-show="dossier.documents[$index].state === \'saving\'"\n                     class="progress progress-striped active">\n                    <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="45" aria-valuemin="0"\n                         aria-valuemax="100" style="width: 100%">\n                        {{\'nom-dossier.saving\' | translate}}\n                    </div>\n                </div>\n\n                <div bn-slide-show="dossier.documents[$index].state === \'replace\'"\n                     class="progress progress-striped active">\n                    <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="45"\n                         aria-valuemin="0" aria-valuemax="100" style="width: 100%">\n                        {{\'nom-dossier.replacing\' | translate}}\n                    </div>\n                </div>\n                <div bn-slide-show="dossier.documents[$index].state === \'visuel\'"\n                     class="progress progress-striped active">\n                    <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="45"\n                         aria-valuemin="0" aria-valuemax="100" style="width: 100%">\n                        {{\'nom-dossier.updatingVisual\' | translate}}\n                    </div>\n                </div>\n\n                <div class="alert alert-error" ng-if="existLog">\n                    {{(\'nom-dossier.file-filename-AlreadyExists\' | translate).replace("-filename-", existDoc)}}\n                </div>\n                <div class="alert alert-error" ng-if="result">\n                    {{result.data.reponse | i18n}}\n                </div>\n            </li>\n        </ul>\n\n\n    </div>\n</div>')}]),angular.module("partials/dashlets/postit.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/dashlets/postit.html",'<div id="postit" class="postit" ng-show="!!dossier.circuit.annotPriv">\n    <h3>{{\'postit.privateAnnotation\' | translate}}</h3>\n    <div ng-bind-html="dossier.circuit.annotPriv">\n    </div>\n</div>')}]),angular.module("partials/modal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modal.html",'<!-- angular dialog template -->\n<script type="text/ng-template" id="dialog-template">\n    <div class="modal fade" data-backdrop="static" data-keyboard="false">\n        <div class="modal-dialog">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <button class="close" data-dismiss="modal"></button>\n                    <h3>{{title}}</h3>\n                </div>\n                <div class="modal-body">\n                </div>\n                <div class="modal-footer">\n                    <button class="btn" data-dismiss="modal" ng-click="secondaryAction()">{{secondaryLabel}}</button>\n                    <button id="modalConfirm" class="btn btn-primary" data-dismiss="modal" ng-disabled="!modalForm.$valid" ng-click="primaryAction()">{{primaryLabel}}</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</script>')}]),angular.module("partials/modals/actesModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/actesModal.html",'<div class="modal-header">\n    <h3>{{\'actesModal.sending_tdt_actes\' | translate}}</h3>\n</div>\n<div class="modal-body row">\n    <form novalidate name="modalForm">\n        <div class="row">\n            <div class="col-md-5">\n                <div class="form-group mandatory-group">\n                    <label class="control-label" for="nature">{{\'actesModal.nature\' | translate}}</label>\n                    <span class="label label-danger"><i class="fa fa-warning"></i> {{\'Mandatory\' | translate}}</span>\n                    <select class="form-control unvalidate" id="nature" ng-model="action.nature" ng-options="key as (key + \' \' + value) for (key, value) in actesInfo.nature" required="required">\n                    </select>\n                </div>\n                <div class="form-group mandatory-group">\n                    <label class="control-label" for="classification">{{\'actesModal.classification\' | translate}}</label>\n                    <span class="label label-danger"><i class="fa fa-warning"></i> {{\'Mandatory\' | translate}}</span>\n                    <select class="form-control unvalidate" id="classification" ng-model="action.classification" ng-options="classif.key as (classif.key + \' \' + classif.value) group by classif.group for classif in orderedClassification" required="required">\n                    </select>\n                </div>\n                <div class="form-group mandatory-group">\n                    <label class="control-label" for="numero">{{\'actesModal.acte_number\' | translate}} <i class="pointer fa fa-info-circle" tooltip="{{\'actesModal.acte_number_tooltip\' | translate}}"></i></label>\n                    <span class="label label-danger"><i class="fa fa-warning"></i> {{\'Mandatory\' | translate}}</span>\n                    <input class="form-control unvalidate" id="numero" ng-model="action.numero" required="required">\n                </div>\n                <div class="form-group mandatory-group">\n                    <label class="control-label" for="date">{{\'actesModal.decision_date\' | translate}}</label>\n                    <span class="label label-danger"><i class="fa fa-warning"></i> {{\'Mandatory\' | translate}}</span>\n                    <input ip-datepicker return-format="timestamp" readonly="true" class="form-control unvalidate" id="date" name="confirm" ng-model="action.dateActe" required="required">\n                </div>\n            </div>\n            <div class="col-md-7">\n                <label class="legendLabel col-xs-12">\n                    {{\'actesModal.public_annotation\' | translate}}\n                    <hr>\n                    <div>\n                        <textarea class="form-control annotation" ng-model="action.annotPub"></textarea>\n                        <i class="fa fa-3x fa-globe textarea-icon"></i>\n                    </div>\n                </label>\n                <label class="legendLabel col-xs-12">\n                    {{\'actesModal.private_annotation\' | translate}}\n                    <hr>\n                    <div>\n                        <textarea class="form-control annotationprivee" ng-model="action.annotPriv"></textarea>\n                        <i class="fa fa-3x fa-user-secret textarea-icon"></i>\n                    </div>\n                </label>\n            </div>\n        </div>\n        <div class="row">\n            <div class="col-md-12">\n                <label class="legendLabel col-xs-12 mandatory-group">\n                    {{\'actesModal.object\' | translate}}\n                    <span class="label label-danger"><i class="fa fa-warning"></i> {{\'Mandatory\' | translate}}</span>\n                    <hr>\n                    <textarea style="width:100%;" class="form-control unvalidate" ng-model="action.objet" required="required"></textarea>\n                </label>\n            </div>\n        </div>\n    </form>\n</div>\n\n<div class="modal-footer">\n    <button ng-disabled="spin" class="btn btn-warning" ng-click="cancel()">\n        <i class="fa fa-times-circle-o"></i>\n        {{\'Cancel\' | translate}}\n    </button>\n    <button ng-disabled="spin || !modalForm.$valid" class="btn btn-primary" ng-click="ok()">\n        <i class="fa fa-cloud-upload"></i>\n        {{\'actions.sendToActesTdt\' | translate}}\n    </button>\n</div>\n')}]),angular.module("partials/modals/archiveModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/archiveModal.html",'<div class="modal-header">\n    <h3>{{\'archiveModal.archiving\' | translate}}</h3>\n</div>\n<div class="modal-body row">\n    {{textModal}}\n    <table class="table table-bordered table-archive">\n        <thead>\n            <tr>\n                <th>{{\'archiveModal.folder_name\' | translate}}</th>\n                <th>{{\'archiveModal.archive_name\' | translate}}<br>{{\'archiveModal.archive_name_default\' | translate}}</th>\n                <th><label for="selectAllPJ"><input ng-model="masterCheckbox" ng-click="setAllCheck(!masterCheckbox)" id="selectAllPJ" type="checkbox" class="checkbox-inline unvalidate"> {{\'archiveModal.add_annexes\' | translate}}</label></th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr ng-repeat="dossier in dossiers">\n                <td><label for="name_{{$index}}"><i class="fa fa-file"></i>&nbsp;{{dossier.title}}</label></td>\n                <td><input type="text" ng-model="archivesNames[$index]" class="form-control unvalidate" id="name_{{$index}}" placeholder="{{dossier.title}}.pdf"></td>\n                <td ng-if="dossiers.length === 1 && dossiers[0].annexes.length === 0"><i class="fa fa-warning"></i>&nbsp;Aucune annexe</td>\n                <td ng-if="dossiers.length === 1 && dossiers[0].annexes.length > 0">\n                    <label for="annexe_{{$index}}" ng-repeat="annexe in dossiers[0].annexes">\n                        <input ng-init="checkboxAnnexes[$index] = dossiers[0].includeAnnexes" ng-model="checkboxAnnexes[$index]" class="unvalidate" type="checkbox" id="annexe_{{$index}}">\n                        {{annexe.name}}\n                    </label>\n                </td>\n                <td ng-if="dossiers.length > 1">\n                    <div class="checkbox" style="text-align: center;">\n                        <input style="float:none;" ng-init="checkboxAnnexes[$index] = dossiers[0].includeAnnexes" class="unvalidate" ng-model="checkboxAnnexes[$index]" type="checkbox">\n                    </div>\n                </td>\n            </tr>\n        </tbody>\n    </table>\n</div>\n\n<div class="modal-footer">\n    <progressbar class="progress-striped active progress-modal" value="progress" max="max" type="info">\n        <span style="color:black; white-space:nowrap;">{{\'archiveModal.handled_folders\' | translate}} : {{progress}} / {{max}}</span>\n    </progressbar>\n    <button class="btn btn-warning" ng-click="cancel()">\n        <i class="fa fa-times-circle-o"></i>\n        {{\'Back\' | translate}}\n    </button>\n    <button class="btn btn-primary" ng-click="ok()">\n        <i class="fa fa-check"></i>\n        Valider\n    </button>\n</div>')}]),angular.module("partials/modals/askPasswordModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/askPasswordModal.html",'<div class="modal-header">\n    <h3>{{title | translate}}</h3>\n</div>\n<div class="modal-body row">\n    <p class="text-info"><i class="fa fa-warning"></i> {{message | translate}}</p>\n\n    <form novalidate name="userPassword" class="form-horizontal" ng-submit="ok()">\n        <div class="col-md-6">\n            <div class="form-group">\n                <label for="password">{{\'Admin.Users.UserMod_New_Pass\' | translate}}</label>\n                <input check-strength="{{properties[\'parapheur.ihm.password.strength\']}}"\n                       class="form-control validation-control" type="password" id="password" name="password"\n                       ng-model="newPass.newOne" required="required">\n            </div>\n            <div class="form-group">\n                <label class="control-label" for="confirm">{{\'Admin.Users.UserMod_Confirm_Pass\' | translate}}</label>\n                <input class="form-control validation-control" type="password" id="confirm" name="confirm"\n                       ng-model="newPass.confirm" confirm-with="newPass" required="required">\n                <div class="input-help">\n                    <span class="error" ng-show="userPassword.confirm.$error.confirm">{{\'Admin.Users.UserMod_Error_Confirm\' | translate}}</span>\n                    <span class="error" ng-show="userPassword.confirm.$error.required">{{\'Admin.Users.UserMod_Required\' | translate}}</span>\n                </div>\n            </div>\n        </div>\n        <div strength-result="{{properties[\'parapheur.ihm.password.strength\']}}" error="userPassword.password.$error"\n             class="col-md-6" ng-if="userPassword.password.$error._length != undefined"></div>\n        <!-- Pour l\'envoi du formulaire avec touche entrée -->\n        <input type="submit" style="position: absolute; left: -9999px; width: 1px; height: 1px;"/>\n    </form>\n\n\n</div>\n\n<div class="modal-footer">\n    <button class="btn btn-warning" ng-click="cancel()">\n        <i class="fa fa-times-circle-o"></i>\n        {{\'Back\' | translate}}\n    </button>\n    <button type="submit" class="btn btn-primary" ng-disabled="!userPassword.$valid" ng-click="ok()">\n        <i class="fa fa-floppy-o"></i>\n        {{\'Save\' | translate}}\n    </button>\n</div>')}]),angular.module("partials/modals/bureauxModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/bureauxModal.html",'<div class="modal-header">\n    <h3>{{titleModal | translate}} {{selectedBureau.name}}</h3>\n</div>\n<div class="modal-body row">\n    <form novalidate name="modalForm" class="form-horizontal">\n        <ul class="nav nav-tabs">\n            <li class="active"><a href="#general" bs-tab><i class="fa fa-desktop"></i> {{\'Admin.Bureaux.BuMod_General\' | translate}}</a></li>\n            <li><a href="#acteurs" bs-tab><i class="fa fa-user"></i> {{\'Admin.Bureaux.BuMod_Actors\' | translate}}</a></li>\n            <li><a href="#habilitation" bs-tab><i class="fa fa-ban"></i> {{\'Admin.Bureaux.BuMod_Habil\' | translate}}</a></li>\n            <li><a href="#metadata" bs-tab><i class="fa fa-code"></i> {{\'Admin.Bureaux.BuMod_Meta\' | translate}}</a></li>\n            <li><a href="#restriction" bs-tab><i class="fa fa-link"></i> {{\'Admin.Bureaux.BuMod_Assoc\' | translate}}</a></li>\n            <li><a href="#delegation" bs-tab><i class="fa fa-share"></i> {{\'Admin.Bureaux.BuMod_Deleg\' | translate}}</a></li>\n        </ul>\n\n        <div class="span7 tab-content">\n            <div class=\'tab-pane active\' id=\'general\'>\n                <div class="col-md-6">\n                    <div class="form-group mandatory-group">\n                        <label for="name">{{\'Admin.Bureaux.Bu_Shortname\' | translate}}</label>\n                        <span class="label label-danger"><i\n                                class="fa fa-warning"></i> {{\'Mandatory\' | translate}}</span>\n                        <input class="form-control" ph-negative-pattern=\'.*(?:\\.+|[&"£*\\/<>?%|+;]+.*)$\' type="text"\n                               id="name" name="name" placeholder="{{selectedBureau.name}}" ng-model="editedBureau.name"\n                               diff-array="bureauxExceptCurrent" attr="name" required>\n                        <div class="input-help">\n                            <h4 ng-show="modalForm.name.$error.isdiff">{{\'Admin.Bureaux.BuMod_Isdiff\' | translate}}</h4>\n                            <h4 ng-show="modalForm.name.$error.pattern">{{\'Admin.Bureaux.BuMod_Pattern\' | translate}}</h4>\n                        </div>\n                    </div>\n                    <div class="form-group mandatory-group">\n                        <label for="title">{{\'Admin.Bureaux.Bu_Name\' | translate}}</label>\n                        <span class="label label-danger"><i\n                                class="fa fa-warning"></i> {{\'Mandatory\' | translate}}</span>\n                        <input class="form-control" type="text" id="title" name="title"\n                               placeholder="{{selectedBureau.title}}" ng-model="editedBureau.title" required>\n                    </div>\n                    <div class="form-group">\n                        <label class="control-label" for="description">{{\'Admin.Bureaux.Bu_Desc\' | translate}}</label>\n                        <input class="form-control unvalidate" type="text" id="description" name="description"\n                               placeholder="{{selectedBureau.description}}" ng-model="editedBureau.description">\n                    </div>\n                    <div class="checkbox">\n                        <label for="avenir">\n                            <input type="checkbox" class="unvalidate" id="avenir" name="avenir" ng-model="editedBureau[\'show-a-venir\']">\n                            {{\'Admin.Bureaux.BuMod_Show_Next\' | translate}}\n                        </label>\n                    </div>\n                </div>\n                <div class="col-md-6">\n                    <div class="well">\n                        <h3>{{\'Admin.Bureaux.BuMod_Sup\' | translate}}</h3>\n                        <p style="font-size: 16px;"><b>{{\'Admin.Bureaux.BuMod_Actual\' | translate}} :</b>\n                            <span ng-if="!!editedBureau.hierarchie">\n                                {{(bureaux | filter:{id:editedBureau.hierarchie})[0].name}} <i class="fa fa-times-circle text-danger pointer" ng-click="listHandler.selectSuperieur(bureau)"></i>\n                            </span>\n                            <span ng-if="!editedBureau.hierarchie">\n                                -- {{\'None\' | translate}} --\n                            </span>\n                        </p>\n                        <div>\n                            <div class="input-group">\n                                <span class="input-group-addon"><i class="fa fa-search fa-fw"></i></span>\n                                <input placeholder="Rechercher" ng-model="searchBureauSuperieur" ng-change="listHandler.search(searchBureauSuperieur)" class="form-control unvalidate" type="text">\n                            </div>\n\n                            <div style="height:15px;" ng-if="listHandler.total > 0 && listHandler.maxSize < listHandler.total">\n                                <span class="text-warning float-right">\n                                    {{listHandler.page*listHandler.maxSize +1}}-{{(listHandler.page+1)*listHandler.maxSize < listHandler.total ? (listHandler.page+1)*listHandler.maxSize : listHandler.total}} sur {{listHandler.total}}\n                                    <span class="btn btn-default fa fa-chevron-left force-display" ng-disabled="listHandler.page === 0" ng-click="listHandler.pagine(-1)"></span>\n                                    <span class="btn btn-default fa fa-chevron-right force-display" ng-disabled="listHandler.page+1 >= (listHandler.total/listHandler.maxSize)" ng-click="listHandler.pagine(1)"></span>\n                                </span>\n                            </div>\n                        </div>\n\n                        <span class="text-info" ng-if="listHandler.subList.length === 0"><i class="fa fa-info-circle"></i> {{\'Admin.Bureaux.BuMod_Result_None\' | translate}}</span>\n                        <ul class="list-unstyled nav nav-pills nav-stacked adminContent list-data">\n                            <li ng-repeat="bureau in listHandler.subList">\n                                <a ng-click="listHandler.selectSuperieur(editedBureau.hierarchie === bureau.id ? null : bureau)">\n                                    <i ng-class="editedBureau.hierarchie === bureau.id ? \'fa fa-arrow-right text-success\' : \'\'"></i><i ng-if="editedBureau.hierarchie !== bureau.id" style="width: 13px;display:inline-block;"></i> {{bureau.name}}\n                                </a>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n            <div class=\'tab-pane\' id=\'acteurs\'>\n                <h4>Attribuer des rôles à des utilisateurs</h4>\n                <div class="col-md-12" style="height:50px">\n                    <form>\n                        <div class="col-md-5">\n                            <div class="input-group">\n                                <span class="input-group-addon"><i class="fa fa-search fa-fw"></i></span>\n                                <input placeholder="Rechercher un utilisateur" ng-model="searchUser" ng-change="listUsersHandler.search(searchUser)" class="form-control unvalidate" type="text">\n                            </div>\n                        </div>\n                    </form>\n                </div>\n                <div class="col-md-4 margin-none">\n                    <div>\n                        <div>\n                            <legend style="margin-bottom:5px;">\n                                {{\'Admin.Bureaux.BuMod_Result\' | translate}}\n                            </legend>\n                            <div style="height:30px;" ng-if="listUsersHandler.maxSize < listUsersHandler.total">\n                                <span class="text-warning float-right">\n                                    {{listUsersHandler.page*listUsersHandler.maxSize +1}}-{{(listUsersHandler.page+1)*listUsersHandler.maxSize < listUsersHandler.total ? (listUsersHandler.page+1)*listUsersHandler.maxSize : listUsersHandler.total}} sur {{listUsersHandler.total}}\n                                    <span class="btn btn-default fa fa-chevron-left force-display" ng-disabled="listUsersHandler.page === 0" ng-click="listUsersHandler.pagine(-1)"></span>\n                                    <span class="btn btn-default fa fa-chevron-right force-display" ng-disabled="listUsersHandler.page+1 >= (listUsersHandler.total/listUsersHandler.maxSize)" ng-click="listUsersHandler.pagine(1)"></span>\n                                </span>\n                            </div>\n                        </div>\n\n                        <span class="text-info" ng-if="listUsersHandler.total == 0 || (listUsersHandler.subList.length === 0 && editedBureau.proprietaires.length === 0 && editedBureau.secretaires.length === 0)"><i class="fa fa-info-circle"></i> {{\'Admin.Bureaux.BuMod_Result_None\' | translate}}</span>\n                        <ul class="list-unstyled nav nav-pills nav-stacked adminContent list-data" style="margin-top:5px;">\n                            <li ng-repeat="user in listUsersHandler.subList" ng-switch on="userSelected(user)">\n                                <a ng-switch-when="false">\n                                    <i tooltip-placement="right" tooltip="Ajouter aux propriétaires" class="fa fa-plus-circle pointer text-success" ng-click="editedBureau.proprietaires.push(user)"></i>\n                                    <i tooltip-placement="right" tooltip="Ajouter aux secrétaires" class="fa fa-plus-circle pointer text-warning" ng-click="editedBureau.secretaires.push(user)"></i>\n                                    {{user.firstName}} {{user.lastName}} ({{user.username}})\n                                </a>\n                                <a class=disabled ng-switch-default>\n                                    {{user.firstName}} {{user.lastName}} ({{user.username}})\n                                </a>\n\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n                <div class="col-md-4">\n                    <legend class="text-success">\n                        {{\'Admin.Bureaux.Bu_Prop\' | translate}}\n                    </legend>\n\n                    <span ng-if="editedBureau.proprietaires.length === 0" class="text-success">\n                        <i class="fa fa-info-circle"></i> {{\'Admin.Bureaux.BuMod_None_Prop\' | translate}}\n                    </span>\n                    <ul>\n                        <li ng-repeat="user in editedBureau.proprietaires" class="text-success hover-li pointer" ng-click="editedBureau.proprietaires.splice($index, 1); listUsersHandler.getNewList();">\n                            <i class="fa fa-times-circle text-danger"></i>\n                            {{user.firstName}} {{user.lastName}} ({{user.username}})\n                        </li>\n                    </ul>\n                </div>\n                <div class="col-md-4">\n                    <legend class="text-warning">\n                        {{\'Admin.Bureaux.Bu_Sec\' | translate}}\n                    </legend>\n                    <span ng-if="editedBureau.secretaires.length === 0" class="text-warning">\n                        <i class="fa fa-info-circle"></i> {{\'Admin.Bureaux.BuMod_None_Sec\' | translate}}\n                    </span>\n                    <ul>\n                        <li ng-repeat="user in editedBureau.secretaires" class="text-warning hover-li pointer" ng-click="editedBureau.secretaires.splice($index, 1); listUsersHandler.getNewList();">\n                            <i class="fa fa-times-circle text-danger"></i>\n                            {{user.firstName}} {{user.lastName}} ({{user.username}})\n                        </li>\n                    </ul>\n                </div>\n            </div>\n\n            <div class=\'tab-pane\' id=\'habilitation\'>\n                <span class="text-info" ng-if="!editedBureau.hab_enabled"><i class="fa fa-info-circle"></i> {{\'Admin.Bureaux.BuMod_Habil_All\' | translate}}</span>\n                <div class="checkbox">\n                    <label for="hab_enabled">\n                        <input class="unvalidate" type="checkbox" id="hab_enabled" name="hab_enabled" ng-model="editedBureau.hab_enabled" ng-change="changeHabilitations()"> {{\'Admin.Bureaux.BuMod_Habil_Select\' | translate}}\n                    </label>\n                </div>\n                <div ng-show="editedBureau.hab_enabled" class="col-md-offset-1">\n                    <div class="checkbox">\n                        <label for="hab_transmettre">\n                            <input class="unvalidate" type="checkbox" id="hab_transmettre" name="hab_transmettre" ng-change="editedBureau.hab_traiter = editedBureau.hab_transmettre" ng-model="editedBureau.hab_transmettre"> {{\'Admin.Bureaux.BuMod_Habil_Create\' | translate}}\n                        </label>\n                    </div>\n                    <div class="checkbox">\n                        <label for="hab_traiter">\n                            <input class="unvalidate" type="checkbox" id="hab_traiter" name="hab_traiter" ng-model="editedBureau.hab_traiter" ng-disabled="editedBureau.hab_transmettre"> {{\'Admin.Bureaux.BuMod_Habil_Handle\' | translate}}\n                        </label>\n                    </div>\n                    <div class="checkbox">\n                        <label for="hab_archivage">\n                            <input class="unvalidate" type="checkbox" id="hab_archivage" name="hab_archivage" ng-model="editedBureau.hab_archivage"> {{\'Admin.Bureaux.BuMod_Habil_Archive\' | translate}}\n                        </label>\n                    </div>\n                    <div class="checkbox">\n                        <label for="hab_enchainement">\n                            <input class="unvalidate" type="checkbox" id="hab_enchainement" name="hab_enchainement" ng-model="editedBureau.hab_enchainement"> {{\'Admin.Bureaux.BuMod_Habil_Chain\' | translate}}\n                        </label>\n                    </div>\n                    <div class="checkbox">\n                        <label for="hab_secretariat">\n                            <input class="unvalidate" type="checkbox" id="hab_secretariat" name="hab_secretariat" ng-model="editedBureau.hab_secretariat"> {{\'Admin.Bureaux.BuMod_Habil_Send\' | translate}}\n                        </label>\n                    </div>\n                </div>\n            </div>\n            <div class=\'tab-pane\' id=\'metadata\'>\n                <div class="col-md-12">\n                    <span class="text text-info">\n                        <i class="fa fa-info-circle"></i> {{\'Admin.Bureaux.BuMod_Meta_Info\' | translate}}\n                    </span>\n\n                    <div class="well">\n\n                        <label>\n                            <input class="unvalidate" type="checkbox"  ng-click="\n                                editedBureau[\'metadatas-visibility\'].length === metadatas.length ?\n                                    unselectAllMetadatas() :\n                                    selectAllMetadatas()" ng-checked="editedBureau[\'metadatas-visibility\'].length === metadatas.length"/>\n                            Tout sélectionner / tout désélectionner\n                        </label>\n\n                        <div class="nav nav-list nav-pills nav-stacked">\n                            <ul>\n                                <li ng-repeat="metadata in metadatas">\n                                    <div class="checkbox">\n                                        <label for="{{metadata.id}}">\n                                            <input class="unvalidate" type="checkbox" id="{{metadata.id}}" name="{{metadata.id}}" ng-click="checkMetadataVisibility($event, metadata.id)" ng-checked="editedBureau[\'metadatas-visibility\'].indexOf(metadata.id) != -1"> {{metadata.name}}\n                                        </label>\n                                    </div>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\'tab-pane\' id=\'restriction\'>\n                <span class="text-info">\n                    <i class="fa fa-info-circle"></i> {{\'Admin.Bureaux.BuMod_Assoc_Info\' | translate}}\n                </span>\n                <div class="well row">\n                    <div class="col-md-6">\n                        <div>\n                            <input placeholder="Recherche" ng-model="searchBureauSuperieur" ng-change="listHandler.search(searchBureauSuperieur)" class="form-control unvalidate" type="text">\n                            <div class="row" style="margin-bottom: 5px; margin-top:5px;">\n                                <span class="btn btn-success col-md-5 force-display" ng-click="listHandler.selectAllResults()">\n                                    <i class="fa fa-plus-circle"></i>\n                                    {{\'Admin.Bureaux.BuMod_Assoc_All\' | translate}}\n                                </span>\n                                <span class="btn btn-danger col-md-5 col-md-offset-2 force-display" ng-click="listHandler.unselectAll()">\n                                    <i class="fa fa-times-circle"></i>\n                                    {{\'Admin.Bureaux.BuMod_Assoc_SelNone\' | translate}}\n                                </span>\n                            </div>\n                            <div style="height:15px;" ng-if="listHandler.maxSize < listHandler.total">\n                                <span class="text-warning float-right">\n                                    {{listHandler.page*listHandler.maxSize +1}}-{{(listHandler.page+1)*listHandler.maxSize < listHandler.total ? (listHandler.page+1)*listHandler.maxSize : listHandler.total}} {{\'On\' | translate}} {{listHandler.total}}\n                                    <span class="btn btn-default fa fa-chevron-left force-display" ng-disabled="listHandler.page === 0" ng-click="listHandler.pagine(-1)"></span>\n                                    <span class="btn btn-default fa fa-chevron-right force-display" ng-disabled="listHandler.page+1 >= (listHandler.total/listHandler.maxSize)" ng-click="listHandler.pagine(1)"></span>\n                                </span>\n                            </div>\n                        </div>\n\n                        <span class="text-info" ng-if="listHandler.total == 0 || (listHandler.subListDelegationPossible.length === 0 && editedBureau[\'delegations-possibles\'].length === 0)"><i class="fa fa-info-circle"></i> {{\'Admin.Bureaux.BuMod_Result_None\' | translate}}</span>\n                        <ul class="list-unstyled nav nav-pills nav-stacked adminContent list-data">\n                            <li ng-repeat="bureau in listHandler.subListDelegationPossible" ng-switch on="editedBureau[\'delegations-possibles\'].indexOf(bureau.id)">\n                                <a ng-click="listHandler.selectDelegationPossible(bureau)" ng-switch-when="-1">\n                                    <i tooltip-placement="right" tooltip="Sélectionner le bureau" class="fa fa-plus-circle text-success"></i> {{bureau.name}}\n                                </a>\n                                <a class="disabled" ng-switch-default>\n                                    {{bureau.name}}\n                                </a>\n                            </li>\n                        </ul>\n                    </div>\n                    <div class="col-md-6">\n                        <h3>{{\'Admin.Bureaux.BuMod_Assoc_Select\' | translate}}</h3>\n                        <span ng-if="editedBureau[\'delegations-possibles\'].length === 0" class="text-info"><i class="fa fa-info-circle"></i> {{\'Admin.Bureaux.BuMod_Assoc_None\' | translate}}</span>\n                        <ul class="list-unstyled pointer">\n                            <li class="hover-li" ng-click="listHandler.unselectDelegationPossible(bureau.id)" ng-repeat="bureau in (bureaux | sameId:editedBureau[\'delegations-possibles\'])">\n                                <i tooltip="Désélectionner le bureau" class="text-danger fa fa-times-circle"></i> {{bureau.name}}</li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\'tab-pane\' id=\'delegation\'>\n                <div class="col-md-4">\n                    <legend>\n                        {{\'Admin.Bureaux.BuMod_Deleg_State\' | translate}} :\n                        <span class="label label-success" ng-show="delegationEnabled">{{\'Admin.Bureaux.BuMod_Deleg_Enabled\' | translate}}</span>\n                        <span class="label label-danger" ng-show="!delegationEnabled">{{\'Admin.Bureaux.BuMod_Deleg_Disabled\' | translate}}</span>\n                    </legend>\n                </div>\n                <div class="col-md-8">\n                    <div>\n                        <label style="margin-bottom: 0px;" ng-class="delegationActivated ? \'text-danger\' : \'text-success\'" for="activatedDelegation">\n                            <i ng-if="!delegationActivated" class="fa fa-2x fa-toggle-off"></i>\n                            <i ng-if="delegationActivated" class="fa fa-2x fa-toggle-on"></i>\n                            <span ng-if="!delegationActivated">{{\'Admin.Bureaux.BuMod_Deleg_Enable\' | translate}}</span>\n                            <span ng-if="delegationActivated">Désactiver la délégation</span>\n                            <input style="display: none;" class="unvalidate" id="activatedDelegation" type="checkbox" ng-click="selectedDelegation.idCible = undefined" ng-model="delegationActivated">\n                        </label>\n                    </div>\n                    <div ng-show="delegationActivated">\n                        <div class="form-group">\n                            <label class="control-label" for="parapheurCible">{{\'Admin.Bureaux.Bu_Target\' | translate}}</label>\n                            <div class="input-group">\n                                <div class="right-inner-addon">\n                                    <i class="fa fa-question-circle" tooltip-placement="bottom" tooltip="Seuls les bureaux associés pourront être sélectionnés"></i>\n                                    <input id="parapheurCible" type="text" class="form-control unvalidate" ng-model="selectedBureauForDelegation" placeholder="{{\'Admin.Dossiers.Find_Desk\' | translate}}"\n                                           typeahead="bureau as bureau.title for bureau in bureaux | sameId:editedBureau[\'delegations-possibles\'] | filter:queryForFilter($viewValue) | limitTo:5"\n                                           typeahead-on-select="checkDelegation($item)"\n                                           name="parapheurCible">\n                                </div>\n\n                                <span class="input-group-addon" style="opacity: 0.7;" ng-class="!!selectedBureauForDelegation.id ? \'label-success\' : \'label-warning\'">\n                                {{!!selectedBureauForDelegation.id ? (\'Admin.Dossiers.Find_Desk_Sel\' | translate) : (\'Admin.Dossiers.Find_Desk_None\' | translate)}}\n                            </span>\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class="control-label" for="delegationFrom">{{\'Admin.Bureaux.Bu_Begin\' | translate}}</label>\n                            <div class="input-group col-md-6">\n                                <input type="text" id="delegationFrom" ng-change="checkDelegation()" min-date="0" from="true" name="delegationFrom" linked="#delegationTo" return-format="timestamp" ng-model="selectedDelegation[\'date-debut-delegation\']" class="form-control unvalidate" readonly="true" ip-datepicker ng-required="delegationActivated"/>\n                                <span ng-if="!!selectedDelegation[\'date-debut-delegation\']" ng-click="selectedDelegation[\'date-debut-delegation\'] = undefined"\n                                      class="pointer input-group-addon">\n                                    <i class="fa fa-times"></i>\n                                </span>\n                                <label for="delegationFrom" ng-if="!selectedDelegation[\'date-debut-delegation\']" class="input-group-addon">\n                                    <i class="fa fa-calendar"></i>\n                                </label>\n                            </div>\n                            <div class="input-help">\n                                <h4 ng-show="modalForm.delegationFrom.$error.required">{{\'Admin.Bureaux.BuMod_Deleg_Required\' | translate}}</h4>\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class="control-label" for="delegationTo">{{\'Admin.Bureaux.Bu_Fin\' | translate}}</label>\n                            <div class="input-group col-md-6">\n                                <input type="text" id="delegationTo" ng-change="checkDelegation()" min-date="0" name="delegationTo" linked="#delegationFrom" return-format="timestamp" ng-model="selectedDelegation[\'date-fin-delegation\']" class="form-control unvalidate" readonly="true" ip-datepicker ng-required="!selectedDelegation[\'date-debut-delegation\'] && delegationActivated"/>\n                                <span ng-if="!!selectedDelegation[\'date-fin-delegation\']" ng-click="selectedDelegation[\'date-fin-delegation\'] = undefined"\n                                      class="pointer input-group-addon">\n                                    <i class="fa fa-times"></i>\n                                </span>\n                                <label for="delegationTo" ng-if="!selectedDelegation[\'date-fin-delegation\']" class="input-group-addon">\n                                    <i class="fa fa-calendar"></i>\n                                </label>\n                            </div>\n\n                            <div class="input-help">\n                                <h4 ng-show="modalForm.delegationTo.$error.required">{{\'Admin.Bureaux.BuMod_Deleg_Required\' | translate}}</h4>\n                            </div>\n                        </div>\n                        <div class="checkbox">\n                            <label for="dossiersActuels">\n                                <input type="checkbox" class="unvalidate" id="dossiersActuels" ng-model="selectedDelegation[\'deleguer-presents\']">\n                                {{\'Admin.Bureaux.BuMod_Deleg_Current\' | translate}}\n                            </label>\n                        </div>\n                        <span class="text-danger" ng-if="selectedDelegation.willItLoop"><i class="fa fa-warning"></i> {{\'Admin.Bureaux.BuMod_Deleg_Loop\' | translate}}</span>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n\n    </form>\n</div>\n\n<div class="modal-footer">\n    <div style="position: absolute; z-index: 2000000000; left: 20px;" ng-if="isSaving">\n        <span style="position: absolute; z-index: 2000000000; left: 10px;" us-spinner="{radius:10, width:4, length: 8}" ></span>\n        <span class="text text-info" style="margin-left:50px;">\n            {{\'Admin.Bureaux.BuMod_Saving\' | translate}}\n        </span>\n    </div>\n    <button class="btn btn-warning" ng-click="cancel()">\n        <i class="fa fa-times-circle-o"></i>\n        {{\'Back\' | translate}}\n    </button>\n    <button class="btn btn-primary" ng-click="ok()" ng-disabled="!modalForm.$valid">\n        <i class="fa fa-floppy-o"></i>\n        {{\'Save\' | translate}}\n    </button>\n</div>\n');
}]),angular.module("partials/modals/chainModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/chainModal.html",'<div class="modal-header">\n    <h3>{{\'chainModal.circuit_chaining\' | translate}}</h3>\n</div>\n<div class="modal-body row">\n    <div class="col-md-12">\n        <form novalidate name="chainCircuit" class="form-horizontal" ng-submit="ok()">\n            <div class="col-md-6">\n                <div class="form-group col-md-8">\n                    <label for="select-type">{{\'chainModal.type\' | translate}}</label>\n                    <select class="form-control" id="select-type" ng-disabled="flags.disabled" ng-model="action.type"\n                            ng-change="action.sousType = \'\'" ng-options="value.id as value.id for value in typo"\n                            required>\n                        <option value="">-- {{\'chainModal.type_selection\' | translate}} --</option>\n                    </select>\n                    <div class="input-help">\n                        <h4>Requis</h4>\n                    </div>\n                </div>\n                <div class="form-group col-md-8">\n                    <label for="select-sous-type">{{\'chainModal.subtype\' | translate}}</label>\n                    <select class="form-control" id="select-sous-type" ng-disabled="flags.disabled"\n                            ng-model="action.sousType"\n                            ng-options="value for value in (typo | findWithId:action.type).sousTypes" required>\n                        <option value="">-- {{\'chainModal.subtype_selection\' | translate}} --</option>\n                    </select>\n                    <div class="input-help">\n                        <h4>{{\'Mandatory\' | translate}}</h4>\n                    </div>\n                </div>\n                <span style="margin-bottom:15px;" class="col-md-8 text text-danger" ng-if="!!circuit.sigFormat && circuit.sigFormat !== dossier.circuit.sigFormat">\n                    <i class="fa fa-warning"></i>\n                    Attention ! <br/>\n                    Le format de signature du dossier est incompatible avec le format de signature de la typologie sélectionnée\n                </span>\n                <div class="form-group col-md-8">\n\n                    <div>\n                        <p class="label label-info label-block" ng-show="circuit.hasSelectionScript">\n                            <span>\n                                {{\'chainModal.circuit_selection_script_detected\' | translate}}\n                                {{\'chainModal.you_should_set_metadata_before_reloading_the_circuit\' | translate}}\n                            </span>\n                        </p>\n                        <div ng-show="circuit.hasSelectionScript" class="btn btn-info col-md-12"\n                             style="margin-bottom:10px;" ng-click="updateCircuit()">\n                            <i class="fa fa-refresh"></i>\n                            {{\'chainModal.reload_circuit\' | translate}}\n                        </div>\n                        <ol class="col-md-12">\n                            <li ng-repeat="etape in circuit.etapes">\n                                <i class="fa fa-fw fa-lg" ng-class="getIconClass(etape.actionDemandee)" tooltip="{{getActionTooltip(etape)}}"></i>\n                                    <span ng-if="etape.transition === \'VARIABLE\'" class="little-select">\n                                        <i class="fa fa-fw"\n                                           ng-class="action.acteursVariables[$index] ? \'text-success fa-check-square-o\' : \'fa-question\'"></i>\n                                        <select required class="unvalidate"\n                                                ng-options="acteur.id as acteur.name for acteur in currentBureau.associes"\n                                                ng-model="action.acteursVariables[$index]">\n                                            <option></option>\n                                        </select>\n                                    </span>\n                                    <span ng-if="etape.transition !== \'VARIABLE\'">\n                                        {{etape.parapheurName}}\n                                    </span>\n                            </li>\n\n                        </ol>\n                    </div>\n                    <div ng-if="errorMessage" class="alert alert-danger">\n                        {{errorMessage}}\n                    </div>\n                </div>\n            </div>\n            <div class="col-md-6">\n                <legend ng-show="metaInfos.length > 0" class="mini">{{\'app.nouveau.meta\' | i18n}}</legend>\n                <div>\n                    <div ng-switch on="metaInfo.type" class="control-group"\n                         ng-repeat="(metaName, metaInfo) in metaInfos">\n                        <div class="form-group col-md-8"\n                             ng-class="{true:\'mandatory-group\', false:\'\'}[metaInfo.mandatory === \'true\']"\n                             ng-switch-when="DATE" ng-hide="metaInfo.values">\n                            <label class="control-label" for="{{metaInfo.id}}">{{metaInfo.realName}}</label>\n                            <span class="fa fa-warning label label-danger" ng-show="{{metaInfo.mandatory === \'true\'}}"> Obligatoire</span>\n                            <div class="input-group">\n                                <input name="{{\'date\' + $index}}" ng-change="metaChanged()" ng-cloak="" ip-id="\'date\' + $index"\n                                       return-format="timestamp" readonly="true" ip-datepicker type="text"\n                                       ng-model="action.metadatas[metaInfo.id].value" class="form-control"\n                                       ng-required="metaInfo.mandatory === \'true\' && !metaInfo.values"\n                                       ng-class="{true:\'\', false:\'unvalidate\'}[metaInfo.mandatory === \'true\']">\n                                <span ng-click="action.metadatas[metaInfo.id].value = \'\'"\n                                      class="pointer input-group-addon">X</span>\n                            </div>\n                        </div>\n                        <div class="form-group col-md-8"\n                             ng-class="{true:\'mandatory-group\', false:\'\'}[metaInfo.mandatory === \'true\']"\n                             ng-switch-when="STRING" ng-hide="metaInfo.values">\n                            <label class="control-label" for="{{metaInfo.id}}">{{metaInfo.realName}}</label>\n                            <span class="fa fa-warning label label-danger" ng-show="{{metaInfo.mandatory === \'true\'}}"> Obligatoire</span>\n                            <input ng-cloak type="text" ng-change="metaChanged()" id="{{metaInfo.id}}"\n                                   ng-model="action.metadatas[metaInfo.id].value"\n                                   ng-class="{true:\'\', false:\'unvalidate\'}[metaInfo.mandatory === \'true\']"\n                                   class="form-control"\n                                   ng-required="metaInfo.mandatory === \'true\'  && !metaInfo.values">\n                        </div>\n                        <div class="form-group col-md-8"\n                             ng-class="{true:\'mandatory-group\', false:\'\'}[metaInfo.mandatory === \'true\']"\n                             ng-switch-when="INTEGER" ng-hide="metaInfo.values">\n                            <label class="control-label" for="{{metaInfo.id}}">{{metaInfo.realName}}</label>\n                            <span class="fa fa-warning label label-danger" ng-show="{{metaInfo.mandatory === \'true\'}}"> Obligatoire</span>\n                            <input type="text" integer ng-change="metaChanged()" id="{{metaInfo.id}}"\n                                   ng-model="action.metadatas[metaInfo.id].value"\n                                   ng-class="{true:\'\', false:\'unvalidate\'}[metaInfo.mandatory === \'true\']"\n                                   class="form-control"\n                                   ng-required="metaInfo.mandatory === \'true\'  && !metaInfo.values">\n                        </div>\n                        <div class="form-group col-md-8"\n                             ng-class="{true:\'mandatory-group\', false:\'\'}[metaInfo.mandatory === \'true\']"\n                             ng-switch-when="DOUBLE" ng-hide="metaInfo.values">\n                            <label class="control-label" for="{{metaInfo.id}}">{{metaInfo.realName}}</label>\n                            <span class="fa fa-warning label label-danger" ng-show="{{metaInfo.mandatory === \'true\'}}"> Obligatoire</span>\n                            <input type="text" decimal ng-change="metaChanged()" id="{{metaInfo.id}}"\n                                   ng-model="action.metadatas[metaInfo.id].value"\n                                   ng-class="{true:\'\', false:\'unvalidate\'}[metaInfo.mandatory === \'true\']"\n                                   class="form-control"\n                                   ng-required="metaInfo.mandatory === \'true\'  && !metaInfo.values">\n                        </div>\n                        <div class="form-group col-md-8"\n                             ng-class="{true:\'mandatory-group\', false:\'\'}[metaInfo.mandatory === \'true\']"\n                             ng-switch-when="BOOLEAN">\n                            <label class="control-label" for="{{metaInfo.id}}">{{metaInfo.realName}}</label>\n                            <span class="fa fa-warning label label-danger" ng-show="{{metaInfo.mandatory === \'true\'}}"> Obligatoire</span>\n                            <select id="{{metaInfo.id}}" ng-change="metaChanged()"\n                                    ng-model="action.metadatas[metaInfo.id].value"\n                                    ng-class="{true:\'\', false:\'unvalidate\'}[metaInfo.mandatory === \'true\']"\n                                    class="form-control" ng-required="metaInfo.mandatory === \'true\'">\n                                <option ng-hide="metaInfo.mandatory === \'true\'" value=""></option>\n                                <option value="true">Oui</option>\n                                <option value="false">Non</option>\n                            </select>\n                        </div>\n                        <div class="form-group col-md-8" ng-show="metaInfo.values">\n                            <label class="control-label" for="{{metaInfo.id}}">{{metaInfo.realName}}</label>\n                            <span class="fa fa-warning label label-danger float-right"\n                                  ng-show="{{metaInfo.mandatory === \'true\'}}"> {{\'Mandatory\' | translate}}</span>\n                            <select id="{{metaInfo.id}}" ng-change="metaChanged()"\n                                    ng-change="valuesMetaUndefined(metaInfo.id)"\n                                    ng-model="action.metadatas[metaInfo.id].value"\n                                    ng-class="{true:\'\', false:\'unvalidate\'}[metaInfo.mandatory === \'true\']"\n                                    class="form-control"\n                                    ng-required="metaInfo.mandatory === \'true\'  && metaInfo.values">\n                                <option ng-hide="metaInfo.mandatory === \'true\'" value=""></option>\n                                <option ng-repeat="value in metaInfo.values" ng-value="value">{{value}}</option>\n                            </select>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <!-- Pour l\'envoi du formulaire avec touche entrée -->\n            <input type="submit" style="position: absolute; left: -9999px; width: 1px; height: 1px;"/>\n        </form>\n    </div>\n\n</div>\n\n<div class="modal-footer">\n    <div class="message-modal">\n        <span class="text-info">\n            <i class="fa fa-info-circle"></i> {{\'chainModal.once_chain_set_you_have_to_validate_the_folder_transfer_it\' | translate}}\n        </span>\n    </div>\n    <button class="btn btn-warning" ng-click="cancel()">\n        <i class="fa fa-times-circle-o"></i>\n        {{\'Back\' | translate}}\n    </button>\n    <button type="submit" class="btn btn-primary" ng-disabled="!chainCircuit.$valid" ng-click="ok()">\n        <i class="fa fa-road"></i>\n        {{\'chainModal.chain_circuit\' | translate}}\n    </button>\n</div>')}]),angular.module("partials/modals/colorationModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/colorationModal.html",'<div class="modal-header">\n    <h3>{{\'colorationModal.color_creation_for_the_dashboard\' | translate}}</h3>\n</div>\n<div class="modal-body row">\n\n    <div class="col-md-6">\n        <div class="col-md-12">\n            <label for="property">{{\'colorationModal.property\' | translate}}</label>\n            <select id="property" class="form-control unvalidate" ng-model="coloration.property" required="required" ng-options="prop as (prop.i18n | i18n) for prop in properties">\n            </select>\n        </div>\n\n        <div class="row">\n            <div class="col-md-5" ng-if="coloration.property">\n                <label for="test">Test</label>\n                <input id="test" class="form-control unvalidate" ng-model="tmp.value" type="text">\n            </div>\n            <div class="col-md-5">\n                <label for="comparator">{{\'colorationModal.comparator\' | translate}}</label>\n                <select id="comparator" class="form-control unvalidate" ng-model="tmp.comparator">\n                    <option>=</option>\n                    <option>!=</option>\n                    <option ng-show="canCompare">></option>\n                    <option ng-show="canCompare"><</option>\n                </select>\n            </div>\n\n            <div class="col-md-2">\n                <input type="button" class="btn btn-success" ng-click="addToTest()" value="+" ng-disabled="!tmp.value">\n            </div>\n        </div>\n\n\n        <div class="col-md-12">\n            <h4>{{\'colorationModal.current_conditions\' | translate}}</h4>\n            <p ng-if="coloration.test.length === 0">{{\'None_fp\' | translate}}</p>\n            <ul>\n                <li ng-repeat="test in coloration.test">\n                    <span>{{test.comparator}}</span> {{test.value}} <span ng-click="removeCondition($index)" class="fa fa-trash-o right"></span>\n                </li>\n            </ul>\n        </div>\n\n    </div>\n\n    <div class="col-md-6">\n\n        <label for="colorBack">{{\'Preview\' | translate}}</label>\n        <p style="background-color: {{coloration.backgroundColor}}; color:{{coloration.textColor}};">\n            {{\'colorationModal.text_sample\' | translate}}\n        </p>\n\n        <label for="colorText">{{\'colorationModal.text_color\' | translate}}</label>\n        <input id="colorText" class="form-control unvalidate" colorpicker="rgba" ng-model="coloration.textColor" type="text">\n\n        <label for="colorBack">{{\'colorationModal.background_color\' | translate}}</label>\n        <input id="colorBack" class="form-control unvalidate" colorpicker="rgba" ng-model="coloration.backgroundColor" type="text">\n\n\n    </div>\n\n</div>\n\n<div class="modal-footer">\n    <button class="btn btn-warning" ng-click="cancel()">{{\'Cancel\' | translate}}</button>\n    <button class="btn btn-primary" ng-click="ok()">{{\'Save\' | translate}}</button>\n</div>')}]),angular.module("partials/modals/confirmForceModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/confirmForceModal.html",'<div class="modal-header">\n    <h3>{{\'confirmForceModal.confirmation\' | translate}}</h3>\n</div>\n<div class="modal-body row">\n    <div class="row">\n        <div class="text-danger col-xs-12">\n            <i class="fa fa-warning"></i> {{\'Warning\' | translate}} : <br/> {{\'confirmForceModal.confirmations_from\' | translate}}\n            <ul>\n                <li ng-if="!info.confirmed" ng-repeat="info in infos">{{info.email}}</li>\n            </ul>\n            {{\'confirmForceModal.hasnt_been_received\' | translate}}\n        </div>\n        <label class="legendLabel col-xs-12">\n            {{\'confirmForceModal.public_annotations_to_add\' | translate}}\n            <hr>\n            <textarea class="form-control annotation" ng-model="action.annotation"></textarea>\n        </label>\n    </div>\n</div>\n\n<div class="modal-footer">\n    <div class="spinner">\n        <span us-spinner spinner-key="spinner"></span>\n    </div>\n    <button class="btn btn-warning" ng-click="cancel()">\n        <i class="fa fa-times-circle-o"></i>\n        {{\'Back\' | translate}}\n    </button>\n    <button class="btn btn-primary" ng-click="ok()">\n        <i class="fa fa-check"></i>\n        {{\'Confirm\' | translate}}\n    </button>\n</div>')}]),angular.module("partials/modals/confirmationModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/confirmationModal.html",'<div class="modal-header">\n    <h3>{{\'confirmationModal.confirmation\' | translate}}</h3>\n</div>\n<div class="modal-body row">\n    {{textModal}}\n    <ul class="listeDossiers">\n        <li ng-repeat="dossier in dossiers" class="btn btn-default col-md-12 force-display"><span class="label label-info">{{dossier.actionDemandee}}</span>{{dossier.title}}</li>\n    </ul>\n\n    <label class="legendLabel col-xs-12" ng-if="showAnnot">\n        Annotation\n        <hr>\n        <div>\n            <textarea class="form-control annotationprivee" ng-model="action.annotPub"></textarea>\n            <i class="fa fa-3x fa-user-secret textarea-icon"></i>\n        </div>\n\n    </label>\n</div>\n\n<div class="modal-footer">\n    <progressbar class="progress-striped active progress-modal" value="progress" max="max" type="info">\n        <span style="color:black; white-space:nowrap;">{{\'confirmationModal.handled_folders\' | translate}} : {{progress}} / {{max}}</span>\n    </progressbar>\n    <button class="btn btn-warning" ng-click="cancel()">\n        <i class="fa fa-times-circle-o"></i>\n        {{\'Back\' | translate}}\n    </button>\n    <button class="btn btn-primary" ng-click="ok()">\n        <i class="fa fa-check"></i>\n        {{\'Confirm\' | translate}}\n    </button>\n</div>')}]),angular.module("partials/modals/extensionHelpModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/extensionHelpModal.html",'<div class="modal-header">\n    <h3>{{\'extensionModal.title\' | translate}}</h3>\n</div>\n<div class="modal-body row">\n    <div>\n        <h4>Etape 1 : Installation de l\'extension {{navigator}}</h4>\n        <hr/>\n\n        <p>\n            La version 2 de LiberSign fonctionne avec une extension de navigateur.<br/>\n            Cette extension est spécifique au navigateur {{navigator}}.<br/>\n        </p>\n\n        <!-- Premier cas, FireFox -->\n        <div ng-if="navigator === \'Firefox\'">\n            <p>\n                <span ng-click="installFFExtension()"\n                      class="btn btn-success pointer"><i class="fa fa-download"></i> Installer l\'extension</span><br/>\n            </p>\n            <p>\n                <span class="label label-warning">Attention</span> Il est possible que vous obteniez le message\n                ci-dessous lors de l\'installation :<br/>\n                <img class="table-bordered"\n                     src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYkAAABwCAYAAADrN4zYAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AUGDQg01q6MYAAAIABJREFUeNrtnXuQHMWd579ZWY/unqcG9OAlgW9GcgjhsMKHbEbGB9YhNKNjLeMTh/Htgm+FpI3wIelsLnZt7hUhNmKRL5DYOy96+DD2wp0RBxPyMjM8fIcRkrAPsIOQhKQZrNdi8ZIsNI9+VGXm/ZFZ1dUz3TPd89SMfp9Qx2i6q7KyMqt/3/z9fpk5TCmlQBAEQRAD6OlLg5FIEARBEKWwqAkIgiAIEgmCIAiCRIIgCIIgkSAIgiBIJAiCIIjR8t6J03hs51PoT2ei9/rTGTy28ym8d+I0iQRBEMSlzD+8/CsoKOz8+2fRn86gP53Bzr9/FgoK//Dyr4Y8l6bAEgRBTHP6+9PY+bNni3629s9WI5lMkEhcqsQ7l03wlZWSkFJBKgWAgQGwLAuMWWDsYm40lW87xsDoMSKmg1CkM9jx05/DsnQASUqJtX/2r5AaQiAAwJ7ISuZyORw9ehQffPABzp49C9/3IYQAYwyu66Kurg6zZs1CU1MT6urqqFdHbJyVNs5SQippbB6DxRgsyzKGmo2boVZKQIgAQWBeQkEpgFkWOLfh2DZs2wbnVgkDrKCkhBASUgpIpY21ZXFTf6brP8ZtpqTUbSYEhJRQjIExCxbn4GGbmeOlOVaIAEJIfT50vSyLg3MOznVbW0y/X5Y4MZIkYhytg5TRwFFJWdY5E+ZJdHd3Y+/evcjlcsNXijEsXLgQzc3NkeqVi/zoQ2Re6kDm5U6IM+9Dnj0LALAuuwz8yquRuO12JJa3wpo5a5IGqargpzFRhUP+SryEeDkqHL1LCCGMgQ4QBBIAh+No42zb2uiFxrZIB2hjOKwhZoVioxSkFBBBDrlcFplMGv3pLHKBNvTMsuG6CSQ8D57nwnUc2DY39dDnK2Xq7vvwcznksln4EmCOC89xdP15TCygzw3vQ/805RWtfygI2sNRShpRFZBCIAh8BH6AIJdFTjFw1zP1tHWbAaaOAQLfR843dRQSUjFY3IbrefBcfX+OEcPiYpEXp1DYwXQZFmNgFoNV4HUplPq2hvqilMqLGQkOEQs3Pf6Tp4t+tv6+e5BKJSdXJI4fP46XXnqp4vOuu+46LF++vKxjg5PH0bPlr5HpfAEYTiEtC4kVK1Hz4Pdhz7tu3EMXQggIKSBFbGSvrWJeMNTwwjlIaOKhkUEC4cP3c0inswiEBBiHbXtIJl24rgPHzo+OBwlE/DWsQFgFRl4KH7lsBun+C+jpTSOdzSHrB7pLLA7bduF5KdRUp5BIePDcUCgAGOMbikO6rw+ZXIBAKS0wySQSrmsMLwdnzFzbAjOCZ5k6MWNko//HREgKYfrEeA7S/B4YYUr3I+0LSDBY3IGXSsFzdJtZDFBSIPBzyGYz6OvrRzbnIxASCgwW53AcD4mqKqQSCSTCtg6FLSaqkfcigkgYBSxY3IWX8LSoc31OJCjRa4BoRI+QMgJR2E+hBxl6RcSlxX/9b7ui///Fn38LAPB3P34qeu+731kzeSIhpcRTTz2F/v7+EZ2/bNkyNDY2DnlM+rln8On3vwdVhpdScPOeh7q//iGSX189bmGXwPeRy2aRzeXg+4EOY8SNcWTgY0LB4q4CCox2gaGICZEeieZDIEGQQzaTRibrIxAKYBZs24GbSCKV8OA6heEeFb9WPKQTC7GExymlMwwsNDphaAUKUuSQTfeh58IF9PT1I53JIRsEEKYO3HbguQkkUtWordFC4To2uAXAtFc2m0G6txd96QxyfgAhFWDZsB0PiaQH13gTPAydWTEjyCxT/5hRDA1tzAPwfR9BYMRbSoggQODnkMumkc7k4AthPAMHjptCKmXEyQKUDODnssj096K3P4usHxMJi8N2PHiJKlRXJZH0XLiO8d44HywSQkAIH9lsDkIqKOg2crwUqlIuHMcGNx6CFjPdx6FQ5D3TfB+xvH9qPtfiZTsukskkHOPhWORoXDJ0vXcce9pfxl+s+VOkktpr6E+n8Xe7foY/ab0NTf/kuskTiTNnzmDPnj0jPn/evHlYsWJFyc/7fvw4Lvz1fwFGehuWhdrv/2dU/Zu1Yy2PCHJZZNL96O3tQV9/xow4hU7kWmYkb77IMhD6K24xY9BM+AEAYxZs2zbhBAkRmDLi3oXxIJQCpAzg+1lkszkE0bEmH+A48BIJeK4DbjFAweQuVDTq5HxA7J+FQ1UTpkHoQXBw24Ztu0gkXNgWoEQOmf4efHqhB319aaQzWeT8AIEMjZUNx3HhJZJIVmlDmnAd2JxFxjfd14v+/gwy2Rz8wIgEs2DxMFxmPIlIDEy+glvgYd6Cm/o5HhKuDc4ZEHoA6XRUdiCEyUNoD8b3ffO+NvrMsmE7DlwviYTLtcGWAfxcWvep8ZS0+DPTVw5c10MiVYWk58LmHK4bC5MxExtW2pRL3zeilBdS100gVZVCwtXGXMpAh7X80ANSUZgyHGDk/UsGy1KQQsAXAioKgyWQqqlDfW0NqpIJuA4JBTE84564vnDhAkajQ+fOnSvtQfyibXQCoV0dXHj4P4HPnoPEyj8ZOy9CCAR+Fun+HvT0XECvGVX7gdBGLwwhGUGIexEDgzwsFsuOQhRqYPgh7k2Y8EmYgFW6DItz2LaNdLo/EgJWEKpAFJrIey+6iqwgHGUZo2zDth04rotc4CFhW4DMIZPJIJvJIms8qFzORyD1yNfi3BjhAIHQIbFUwoXDGZT0kU33I53W5+ai0b4RsLjnEiWxQ5EY4EEYAXMcBxnPg2tbgAiQy6SRzmSQy/m6fNNOOgQV6OsJARGJpr6mne5Hn8XBOaCCAH6gz9eiIowXoAWdc45sNotMJoM+J5+ot2NeTT7Ml++3eHI/9Dp9j8OChJ/VYusHgfEmCvsdRnCUcfWkElHoUQJgjMNJVKPWl2AmsW5xCy6n0BMxySJh2/a4nC8+OINPv/+90QlELFxz/q++i1k3fhHWrNljIRGQUsD3c8j096O/rw+9vX3oT2d0Eleo2PTKcKTOoliy/h8L/w2oamwWTmRcioiFkrHYdd74+5wXznAqIUhxgSh83xhgIxC2K/S1pIS0LVhKIBcbpYsgMIIltbGSUgtXGBoLAgQ5F47NIIOcPjeXiwRCj/TzXs5AIYgEIvzMhJs4t0wdbeRyObi2BRXkkMlkkTPl+0Gg6xcaUzOzSbetGZObdsuF+QQgn1wXAUSghTgMIzIwBJYVJd65EWb9U4tblMi2LFgWoIzB1w1tgXOBQEoIpRD4FiB8+H44UyzmSQwSChX1hQ6jmXZXCopxuDkJy3HhJauQSmpvUnKLVtQSkysStbW1ozp/xowZRd/veeRhqL7esRv59/bgwpaHUb/lsTERHT3Lx9ex60w/0v2hSEidxA0FIpqhExOL0HgPmDmkjYAqMGZh8rUgRxEXG2PY8p4IIC2JYinpYuIQlWUEgocehNIGzRLcTKsziXmpp7wOzqcATOVFTkgBFvgAJKTwkWXQOQMzbTZK9kcG1EwxlRgghhYsaWb0MBkZdSEscC5NQjqAb6EgH+EHWoSkkFFeQl8rJrrI54CYlJDG6wtH/iLm0SHyyBQgJYSCEUIOIQJwbkOI0JvI53E452Aq1n/M5BLCdSY+TLvKvNiG15WFAqFCD8J4R0EQIJBaxKXikJZjvKisFnEp4SqAFoIQkyoSM2fORG1tLS5cuDCi8+fPnz/Yi/jH00jveW7M65pu+9+o+Xd/CX7FlaP2JPRMI52UDIWiP+1rQ8TySVYLVvEvaZQwLkx0IuZJxENKUuVDWGxgAnfAjKXoggMT4AOvFYYvWH7mkGQKzKy7CMM/tklGu5aCCEzsPwjgCB2GkeZ+ZDRYNiEilhdUFdUnLkgAMzN4VCw8F86oikJM4X1FghhrUqVj81IoKBmG32Kzgoyo6HIVlLIKRAnA4GmroShZlhm5q1ioJ8wKhC0atrH5Gd1DOCuLw2bMiE1elAEFJQL4Mn/NkgOB8BwFMMmi3JVUIvKUmA2zpkOH+kSxgQVBTIZIAEBzczM6OjoqPq+xsRHz5s0b9H7mpfbhp7mOBCGQebEdVfetGWVBxhNQZoZT4COTycD3JRTj4LYJhcSmRRaM/KO8gBUlOiPvRAgEQT6ZLJWEGXrqc8NYfJjgjc0AimYqKeTj4FIiENLE3i0TCjEJVeFrM6cULG4DjMGxXZ0EdV24rouEl0AiUYWqVAKOzQAZIJexjStijD23EYhYcjycrhqbthoNxWV+llbeALOCHE4+7BUmqK1oRrFSKj/zyoShLBZ6MLE1FSZBHyaPw3NVmKBHLASYr535LD+zqEAcwvND0TA/pWLgtgvHdfTMLDufV7G5DdtGbN2GKsgPRTOVLP25JQdPg41NczMTGHzzzIQLA0NvREWznQjiohKJa6+9FjfddBMOHDhQ0TnLli0r+ln2tVfHra7Z1/7P6EUiHjtn2nBKIREIBct14XpJJBMeXEfP9R94rmWSpdHKXcuChQB+oEfovq8Tvr6fg5VjYD7MNFc9zdHzPCQ8L1qsxgeusDYzp5SUCILAhKsYuGPDdnQYRJmwhYpWPGtjr18OHMeF63lIJpKoqq5GKuHCNjOIXNcBtywtVhk3msYqlYq25Mgvfot7TXFPScVCOTEvKDovNsXVscGZhBRmRli4Qjuccor8Ir1ojYTQcf+BXgIGeBlhCDAe0lFFI4wD8wJ5sdMDAweOSWJzbhnxDsNONmwmEAhZOHMJLDb7KL6KPn+PA6WMMQUZ5JDN2OjtMfetJALJ8m0yaAU5QUyySADA5z//efT09ODgwYPDHjt37lzcfvvtJVdbi5MnBr132dPPwf1Sc0V1yh14HWe/9S8Lyz51cgzuloFzbawd24alFJQEbMeDm6xGzYw61FenkHBsMMhoCwoVhT/sKDHsOlxP34SCFFlkM3pWTS6X1esJ0v3oT6eRzgRgThLJZArV1VWorq5G0nPNAjAWG22rglXfSggIP4AAwDiH63na2ENBBFlks1pEmGWMC7fBLRvctuG6HrxEClUps9aBMQASge/CcRzYbj8yZjVy6K1oj0Ufp2Q4Ps8LGIOMRr0yFn6yTMI3v62A8ZocF64bLnIL4OeECZHpqaQ2t8Ag4PtBtN1GlJxGLAcUa5t4iI2F05RjuZ+CgQBjAzwJk5SPcgeIpu/qxXE62Q6lYtuUcNMfArmcH23zAeNlcW4Zz04gCPJhIsvisQWEZsFduIbD4WBSROJsKRue68HzEkiGC/UsixZlExePSADAF77whbJEYsmSJUNuxyE+/mjQe5UKBAC4N315cNkffjgm98q4DS+RRHVVErZrw3ZcIFGHGTOvxjVzLkNddRKubYEpCT/nawOEWKzfvMLtM/KhhHA7CJ3n6L3wKT49z+E4EsxOoLquAQ0NdaipSiHhOXA4L7nXUXxLCG1XGRzHhWUxncCVAjk/iD7nNo9mNlnMgu04sG29LiA+395x9DqBZFWN8VSM52ICHaFRDmdgIRZe0SESHWoSQubFIFoQp6KRdDQlNlwJrSRkIGPrQripV2xUb0bjyuQctKGFNvZSanGUWtDCkBRMjiIIAh0Rg4Jl8cjQSyljmwLmvSGlI0/R6u9wNhbiQhNfVBkPs6kC5xIATLJaFuRo8jPUwtXkesW7wxmE7yPwJSRseNxFsroWddW1qEnptSmcZjYRF5tIlB+tmR7DG8tOIFXTgNn1tejJOuDVM3HlNVfjigYdnuGWMUxKG6bQcOuV1YiEMhQJxlgU59b7I2XQV10Fz/HQmxVgThL1l89GQ30NqpMeHM7BY/szWZY1eM2K+T0+Sydc2R3/KWOhmbBerNTGdcwCdyxwAK7rFawKjh/OCvePGChhBdN3pxyDwlIDtmEBooEBi4l2JIKFmRCoWC6pIL9dsGrfLAp0HdiWMiLLYacEwD1U183AjIZ61FTpbUZsWiNBXGwi8Zvf/KashXVvvvkmli9fXtKb4LNmIzjx+8LQ0Zu/hvtPv1hZuOk3bwwue86cMVQJDq96BmZeuwjerBwsN4nqmlpUhSuAAYDrUINTsRvkIZnUuQ3PS6IvK8HcFGpqa1CV8OBYZQqw+Z0PcznO+YiboSD/UEHIbkqPFYrG+wtnSw3lLQ/1PVExaYnP4gq37tB5DxvccuB6KdQIwE4kkUpVoaYmpTcftG3yIojyHuWJ2Lvp5MmT+N3vfoczZ86Ufd7ll1+OxYsX4zOf+cwgA3Xuvm8i+9r/HZf6erd8FQ3/4+kxb4O8lxCGj8ZqxCoHTJ+09HYbxKWL0hMShFmdLZSCxXVo0OK2ydMQxDh5Er29vdi3bx/ef/99ZDKZcavYJ598gpdffjn6/aabbsLixYu1If/qbeMmEolly8e8TGs8d91kFu2/Qwx6JmzH1Xkwghit/apUIH7+85/jvffeG1eBKMaJEyfyhvyrtwHjYXg5h/fV5fRUEARBjEQkXn/9dWSz2Ump6AcffBBtN86vvgapu+4Z82uk7v7TaLW1HI/FegRBENNZJE6dOlV0M7mJeEkp8eabb0Z1qX7gu2BV1WPnoVfXoObfbop+D4Sgp4MgCBKJSg72fX9SK3vo0CH88Y9/1N7EnCsw40e7otlBo4LbmPGjXdEOsL7vw7FtejoIgiCRmEqVlVLiV796LZon7t18C2r/8j+M7m/5WhZq/+o/wvvyP4veymQy02atBkEQxCUjEgBw+vQpvPar16Lfq/58PWb8951gqVTFZbFUFWb86McFf5Xuj388j9QIyhqaDqwbsBPr0m3dQPc2LGVLsa270uLW6XKWbkP3tHkUdRut6yjnuDLarGPdxLTPSPuwrPvrwLrwHsb8OmVce9yvN0Z9Pdr+KattL4b2mAIiMVn5iPiLMYZf/+bXePfdI1G9Eiv+BWbtfRPV678D5nnDi4PnoXr9dzBr7/9DYnlL9H5vXx8U1KgWjpWmGVu78vexb0Mj0LgB+9Q+bGis8IvTugNr2xXUvg1onCYPYse6NqxSXVjYNhaGvQPrNi9E10S0T0EfjqMhGdGzQgaurHYbVdtOf6Zk4D2VTOK5557Dki8uwT9ftkxvcjajATX//iFU3Xc/Mi91IPNyJ4KTxyE/0Av4rDlXwL72M0jcdjsSy1thzZxVUObZs+eQy+VwxRVzpkALNGNh03R6DLvR9OB2NAJoeXDl6EWiuwkP7msBfecJ4hIMN4XU1FTjwIE38MzuZwv+oJE1azZS//o+NDz5vzDr1V9jzpFTmHPkFGa9+ms0/OR/IvWt+woEwvd9vP/+H9DT24tZs2ZOojut/79u3VIwtg4dkRschqjWoQMdWMdasQP7sbHJhKwGHReGbLqxbWnsmBLhl451sTBYqVjPoHrE6t6R/2xdB9C9bWlhSK3EsUvjw9ruF3Bvkym/aQu6YuKxbenA+zJ0lSprG5Y2NaGpoK6DRalouUXvc7jzwj4s7JuoLYcts/CYpduOxT5owfbIGyoSCtq2rkhbD6xj8XqV1e9lPgMFz2xJ76Xc+pdbhwHPQ0EbbhsibDZUH6L8PkMF5Q33PSeRGKeKWxbq62rR1XUMj/3t3+KVX/4S/f3pss9PZzJ4+ZVX8DePPIKf/uyneOPAfhw7dmwca2y+pMUe8NgxBxc+CaW2owUdWNf0DO4KQ1TtwOZtTdiu2rHWhK72bWjUD13TRixqN8d1bcXB1qXY1t2IDfvasWjjFi0urUB7kfBLy/YwBNaOtTs2FwlJFKtHd/6eNgNPKgXVvhY7WhnuxZPmuLXYv3FL7EsQO7ZrK7Dx3vyXpmj53di2tAnP3NUVhei2t6DodfPXGaqu8S91sXLLOLdjCzYuai9SH2PQY32jtreUWZ/C/nsSz2BHuc/T4VWD23pQHYvVq5x+L/8ZyD+zFX4fitV/yDoUe84racOhnqly7rVYtYZ6Jkrf+8jajERiREJRV1sLbnHs3fs6tvxwC574yU+w/8ABnD59GtlsNuq8IAiQTmdw/PgJPPHET/DII4/g9df3weY2qquq8Mknn+CXv/wlOjs7MT7bWRXmJIo/TM24a6Ux493HcDAuLK07sP9wV5Hn/hgOYi1WteTjqw+t3Q99aAu2twOtrBVoL/FAhklw1lr8izVkPZqx9UkjPC2rsDZe/5ZVWIuDONaNwcfG61iq/O4X8Mz+tXioaKB44HXNdcpps1LllnNu00I072gtb9Rbbpndx3CweSsebAm77yGsLfd5Ck+Kt0G5dRyu3yt4BqI+r/T7UKz+Q9ahxHNebhsO+Uyhsu/dSJ+JUbXZFBGJiyF5HX8BQHV1Fepqa2FZFo4fP4HOzhexc9eP8ejWbXj3yFF0v/d7HD9xEgfeeANP/vSnOH7iRCQwVVWpgvvq6urCb3/724uke9aiPX6/28d43NG9DUtbYa7Rha3NE1WPbhw7OF7lj6asYc5t3IB9SuFJ3DuENzjBfTiQcupYdr9P4n1Mle/diJ6JaZyTKHdqaHV1Na666irMnDlxMX7HsVFfV4eGGfWoqkrBdRxks1l0dHTg3Xffxdtvv403DhxAMplAw4x61NfVwXGK5+3feust/QdmJpPG+ViEHUO7urHj2mJx9c07whGXCTOpdqC1SPyz6zD2Ny9EUzTKGkU9ynCxn3mhu2BEt6pliPIbV+Ku5gqvW05dS5VbwX02btiHrq3NOHisewzqMx+L9m/EliiFsbnMcNMo6lhOv4/6GWjCwubQowXQ0Ta6+xrqOS+3Dct5pkb4vBe29xjf+1QSiTnD/K2F+vp6rFq1Ct/+9rdx55134u6778bXvvY1OI4zYTfEOUcqmURdXS0aZtTDdWycPHEcH334AWpqqpFKJoed4prJZPCHP/xhkrumBdu7tgIbm4ZJMOrjDraGid9ncFfXdrSgG9uWtuLg1gfRghY8uPUgWgcmrlsexFZs1Eneew9jUfNo6jG8i73o8L2mjhuxKAp/lSo/zKk0DZPHqbSupcot49yOfKK1aeOiImGLFqxaG08Ql1OfFmw3+RzGGO7FXWWGm4YLI8XrOKBeZfX7aJ+BRmx4KH9frA2ju6+Sz3klbVjOM1XhvRZt77G+98mlor8nceLECfziF78o+llDQwO+8Y1vIJFIDB64dHWhs7NzSjXMjTfeiC996UsgxoIOrGObsbCL5qITE0D3NixtOoyHpkhieFp5Etdeey0WLVo0KC8wY8YMfP3rXy8qEADQ1NSE+vr6iy6fMdQr3HGWIIgpNiTZsjEfTiNGTcWL6W699VZceeWV6O7uRl9fH+bMmYMbb7wRyWRyyPOuu+66aHO+qcBE/70MgiBG7Dpg29ImbIxyK2vRrjbQYsoxYtz/fGnI4cOH8corr0yZhlmwYAFuv/12ekIIgrikmbB1El4ZeypdTJQKnREEQZBIjAOTPqW0Qurq6ujpIAiCRGI0J+dyubKP7e3tnVKJ66uvvvoSfzRi+81MyDbVBEFcjFScuO7v78fevXvx+9//HrlcDpdddhluvfVWXHXVVUOed+bMmUm5wUWLFmHx4sXo7e3FK6+8gp6enmHPmTlzJi6//PKLwEhfJNNGGzdgn9owPe6FIIjx8ySy2SyeffZZHDlyJPIizp49i7a2Npw6dWpIYTlx4sSE39zcuXOxbNkyNDQ0YO7cuVi1atWwuRHGGG6++WZ6MgiCICoViXfeeafoNNYgCLBnz56SQrB3714IISb85m644YaC3xsaGnDHHXeUXAFuWRZuueUWXHPNNWNYC72VcMGizfi23UW3Py62vXM5W4kXu3yp7ZWHLq9wy+ryt3kevAV1JVtoT68tlgnikhOJ9957r+RnQgjs2bMHr732Gs6dOwcpJT799FO8+OKLOHLkyKTcXDFjf9VVV+Gee+7BwoULUVVVBQCoqanBggULcPfdd+Nzn/vcWMdq9BL9trxZ62jbgbUPbUBjye2Pi2/vPPxW4kNvQ124vXKx8srdsrr0Ns+Dt6Ae6Rbaxa87lbZYJojpQEU5ibNnzw65jbZSCm+//Tbefvvti+LmSoWW6uvrcdttt01cRVpWYW1rGzq2t6AFHWg7uBUPbke0/fFDBdsfb0RbF1B8JdDgrcR3NDFsDD9eu6rwxGHLH1Be81Y8Gd9ueePmEjc0cJvnzTjWDbQ0Gi+pdUf+uKLeTam6D8fU2mKZIC45kfB9f1wq4TgO5s6di9mzZyOZTCIIApw/fx4nT57E+fPnp0Ezt+DBrZtx77ZuNGEzDt715BitBl2L9otpVB3bglpvMHhvhXWnIBJBTOlw05hf3LKwZMkSrFmzBnfccQeWLFmCG264AYsXL8att96K++67D3feeScaGhqmfEM3rrwLeGYLtjwT2z10yG2+hyuwzG2oyy1/LLasLncL6pJ1r2SL5YH5C4Igpp1ItLa2orm5ecgZR3PnzsU3v/nNYafYTgGVwF3YgR2LVsVGz0Nvf1y47fRg76SsbahLll+kvNFuWV1yC+pyt9CeXlssE8R0oKK9mx599NExu/D8+fOxcuXKso+/cOECnnjiCUgpyz5n06ZN1MMEQRBT0ZNobKwsKl9bW4srrriCeowgCOJSEImR7OU0GWstCIIgSCQmgY8//rhiUTl37hz1GEEQxKUgEocPH0ZfX1/Zxx88eLCiDQUJgiCICRaJsdxlNZPJoKOjo6wQ0scff4zXX3+94msQBEEQU9STAIBTp07hxRdfHNKg9/T04PnnnycvgiAI4lITCQA4cuQI9u3bV/SzIAjw/PPPo7e3l3qKIAjiUhQJAHjrrbfQ398/6P2jR4/ik08+oV4iCIK4lEVCCFFUDD766CPqIYIgiEmkog3+HMcZt9xAIpEY9J7neSNOQA/3x4UIgiCIMfYk5s2bNy6VmD17NmbOnDno/c9+9rOwrJE5O3PnzqXeJQiCmEiR+PKXv1x0xD8a6urq0NraCsbYoM8aGhpwyy23FP1sOK+E/gQpQRDE6Klogz9Ab7T36quv4uTJkyMOPSUSCVzvT+gsAAAEEElEQVR++eWYP38+rr/+eriuO+TxH374Id555x2cPn0a58+fLxmCcl0X8+bNw1e+8hXU19dT7xIEQUy0SBAEQRCXDhY1AUEQBEEiQRAEQZBIEARBECQSBEEQBIkEQRAEQSJBEARBkEgQBEEQJBIEQRAEiQRBEAQx3bGpCQiCmGiefvppaoRJ5p577iGRIAji4mX16tWwLKviDTwvJZRSkFJi9+7dY9Je8fLKhcJNBEFMCkEQQEoJ2j5uaIMeBMGYtNfA8kgkCIIgiFFDIkEQxKSNlIny22ms2qvSckgkCIIgoZgi7TPa9hrJ+SQSBEEQBIkEQRDTk871HHx958RcrPsx3MxvxmPdJBIEQRAXP92P4eFD9+P+Qw9XYLg7sX6khr7xAewVe/FAI4kEQRDExa8R7buB1d/D91YDu9u7qUFIJAiCICKJQPtuYHVrIxpbVwO729Fd0lsIf+/Eer4SO7EfmxbEwlTdj+FmzsHNKx+90uetX38zOF+PzoJyu/HYzUXOKShrPTqLljM27Nq1K7p+sdeuXbtIJAiCuGTdCOzGarQ2AmhsxWrsxvDOxAo8Ll7A/WjGo0cFxOMrtAFfsAnXvyAghIA4+igOrYwLzH4cWvgEhHgcK+JFdf4Qm65/QZ8jBB5fYcRgwW6sPmrKegF4OCqoRDmjYM2aNdi+fXvRz7Zv3441a9aQSBAEcalqxG5gdSt0eqARrauBTT8cwRi9+xgO4X6sCi134wP4wf37cTgSiWasbi2ShGhciOadK3FzPLnRfQyHQi+Fc/CVO7E/KqhEOeMgFGMlECQSBEFMUTrxw037sX/Tgii0smDTfmBnGzonqgqND2CvEHgC3x4QorofLxjvQojQWxlf4kIxlgJBIkEQxBTViDbsbH4UR+PGWBzFo8070dapPYuFzTFvoLMNO0sa+/m4HuF50DOmdsY8i2G1Yi+OPtqMQ8e6o7IenoQ5sqFQjKVAkEgQBDFFNWInmqNQU2Su0bq6GTvbOgE04oEf3I+dK03Ypw24PzpuBVbdH09cr8DjRx/FofDYBbux+mgZeYPO9TEv5nr84IHGqCzEPJwJW8NhhGKsYYrWxRMEMcE8/fTTWLVqFWzbBuectgsvglIKQggEQYC2trZRt9fA8ujvSRAEccnCOS/5mRCCGqgCSCQIgph2kBCQSBAEMQ1QStFOsBW0zWjaa6TnkkgQBDEpSCmj2DrlJIobdSklpJRj0l4DyyORIAjioiYIAiilSCCGMexh6Gws2iteHokEQRAXvScRjmpJKIob9LFsr5GGqUgkCIKYFDo7O6kRpkB70ToJgiAIoiS04pogCIIgkSAIgiBIJAiCIAgSCYIgCIJEgiAIgiCRIAiCIEgkCIIgiCnEP77/Pv4/o/ytispguyAAAAAASUVORK5CYII="/>\n                <br/>\n                Dans ce cas, cliquez sur \'Autoriser\', puis sur \'Installer\'\n            </p>\n        </div>\n        <!-- Deuxième cas, Chrome -->\n        <div ng-if="navigator === \'Chrome\'">\n            <a ng-href="{{properties[\'parapheur.extension.libersign.chrome.url\']}}" target="_blank"\n               class="btn btn-success"><i class="fa fa-download"></i> Installer l\'extension</a>\n        </div>\n\n        <hr/>\n    </div>\n\n    <div>\n        <h4>Etape 2 : Installation de l\'application LiberSign</h4>\n        <hr/>\n        <p>\n            Un logiciel compagnon est à télécharger puis installer.<br/>\n        </p>\n        <p>\n            <a class="btn btn-info" target="_blank"\n               ng-href="{{properties[\'parapheur.extension.libersign.native.url\']}}"><i class="fa fa-download"></i> Télécharger le logiciel compagnon</a>\n        </p>\n        <p>\n            Une fois le logiciel compagnon installé, vous pouvez passer à l\'étape 3 de l\'installation.\n        </p>\n        <hr/>\n    </div>\n    <div>\n        <h4>Etape 3 : Vérification d\'installation</h4>\n        <hr/>\n        <p>\n            Une fois les deux étapes précédentes effectuées, vous devez tester la bonne installation de LiberSign.<br/>\n            <span class="btn btn-primary" ng-click="testExtension()">\n                <i class="fa fa-check"></i>\n                Tester LiberSign\n            </span>\n        </p>\n    </div>\n\n</div>\n\n<div class="modal-footer">\n    <button class="btn btn-primary" ng-click="ok()">\n        <i class="fa fa-close"></i>\n        {{\'Close\' | translate}}\n    </button>\n</div>');
}]),angular.module("partials/modals/healthModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/healthModal.html",'<div class="modal-header">\n    <h3>{{\'Admin.Informations.Info_Health\' | translate}}</h3>\n</div>\n<div class="modal-body row">\n\n    <div class="col-md-12" ng-if="!health">\n        <div style="width: 100px; margin: 0 auto;">\n            <div style="width:100%;height:100px;" class="css-loader"></div>\n        </div>\n\n    </div>\n    <div class="col-md-12" ng-if="health">\n        <div class="col-md-6">\n            <div class="col-md-12"  ng-if="!isTenant">\n                <div class="col-md-12">\n                    <p><strong>{{\'Admin.Informations.Info_Mem\' | translate}} :</strong><br/><span class="bash"\n                                                                                                  ng-bind-html="health.memory | bash"></span>\n                    </p>\n\n                    <p><strong>{{\'Admin.Informations.Info_HDD\' | translate}} :</strong><br/><span class="bash"\n                                                                                                  ng-bind-html="health.disk | bash"></span>\n                    </p>\n                </div>\n                <div class="row">\n                    <div class="col-md-6">\n                        <h4 class="legend">{{\'Admin.Informations.Info_Launch_Date\' | translate}}</h4>\n                    </div>\n                    <div class="col-md-6">\n                        <h4 class="legend">{{\'Admin.Informations.Info_Nodes_Count\' | translate}}</h4>\n                    </div>\n                </div>\n                <div class="col-md-6">\n\n                    <p ng-if="health.nginx"><strong>NginX :</strong><br/>\n                        <span ng-if="+health.nginx >= 86400" class="text-danger">\n                        <b>\n                            <i class="fa fa-warning"></i>\n                            Redémarrage requis\n                        </b>\n                    </span>\n                        <span ng-if="+health.nginx < 86400" class="text-success">\n                        <b>\n                            <i class="fa fa-check"></i>\n                            OK\n                        </b>\n                    </span>\n                    </p>\n\n                    <p ng-if="health.xemelios"><strong>Xemelios :</strong><br/>\n                        <span ng-if="+health.xemelios >= 86400" class="text-danger">\n                        <b>\n                            <i class="fa fa-warning"></i>\n                            Redémarrage requis\n                        </b>\n                    </span>\n                        <span ng-if="+health.xemelios < 86400" class="text-success">\n                        <b>\n                            <i class="fa fa-check"></i>\n                            OK\n                        </b>\n                    </span>\n                    </p>\n\n                    <p ng-if="health.office"><strong>Office :</strong><br/>\n                        <span ng-if="+health.office >= 86400" class="text-danger">\n                            <b>\n                                <i class="fa fa-warning"></i>\n                                Redémarrage requis\n                            </b>\n                        </span>\n                        <span ng-if="+health.office < 86400" class="text-success">\n                            <b>\n                                <i class="fa fa-check"></i>\n                                OK\n                            </b>\n                        </span>\n                    </p>\n                    <p><strong>Redis :</strong><br/>\n                        <span ng-if="!health.redis" class="text-danger">\n                            <b>\n                                <i class="fa fa-warning"></i>\n                                Erreur\n                            </b>\n                        </span>\n                        <span ng-if="health.redis" class="text-success">\n                            <b>\n                                <i class="fa fa-check"></i>\n                                OK\n                            </b>\n                        </span>\n                    </p>\n                    <p><strong>Connecteur Pastell :</strong><br/>\n                        <span ng-if="!health.pastellconnector" class="text-danger">\n                            <b>\n                                <i class="fa fa-warning"></i>\n                                Erreur\n                            </b>\n                        </span>\n                        <span ng-if="health.pastellconnector" class="text-success">\n                            <b>\n                                <i class="fa fa-check"></i>\n                                OK\n                            </b>\n                        </span>\n                    </p>\n                </div>\n                <div class="col-md-6">\n                    <p><strong>{{\'Admin.Informations.Info_Folders\' | translate}} :</strong><br/>\n                        <b ng-if="+health.dossiers >= 1000" class="text-danger">\n                            <i class="fa fa-warning"  tooltip="{{\'Admin.Informations.Purge_Advised\' | translate}}"></i>\n                            {{health.dossiers}}\n                        </b>\n                        <span ng-if="+health.dossiers < 1000">\n                        {{health.dossiers}}\n                    </span>\n                    </p>\n\n                    <p><strong>{{\'Admin.Informations.Info_Archives\' | translate}} :</strong><br/>\n                        <b ng-if="+health.archives >= 1000" class="text-danger">\n                            <i class="fa fa-warning" ></i>\n                            {{health.archives}}\n                        </b>\n                        <span ng-if="+health.archives < 1000">\n                        {{health.archives}}\n                    </span>\n                    </p>\n\n                    <p><strong>{{\'Admin.Informations.Orphan_Nodes\' | translate}} :</strong><br/>\n                        <span ng-if="health.orphans == \'0\'" class="text-success">\n                        <b>\n                            <i class="fa fa-check"></i>\n                            OK\n                        </b>\n                    </span>\n                        <span ng-if="health.orphans != \'0\'" class="text-danger">\n                        <b>\n                            <i class="fa fa-warning"></i>\n                            {{\'Admin.Informations.Orphans_Found\' | translate}}\n                        </b>\n                    </span>\n                    </p>\n                </div>\n            </div>\n            <div class="col-md-12">\n                <h4 class="legend">{{\'Admin.Informations.Info_Maintenance\' | translate}}</h4>\n                <a ng-click="regenerateCount()" ng-disabled="reload.launchCount" class="btn btn-default">\n                    <i  ng-class="{\'fa-spin\': reload.launchCount}" class="fa fa-refresh"></i>\n                    {{\'Admin.Informations.Regenerate_Count\' | translate}}\n                </a><br/>\n                <span class="text-danger" ng-if="messages.error">\n                    {{\'Admin.Informations.Regenerate_Error\' | translate}}\n                </span>\n                <span class="text-success" ng-if="messages.success">\n                    {{\'Admin.Informations.Regenerate_Success\' | translate}}\n                </span>\n            </div>\n        </div>\n\n        <div class="col-md-6">\n            <h4 class="legend">{{\'Admin.Informations.Info_Certs\' | translate}}</h4>\n            <div class="row">\n                <a class="col-md-4 btn btn-success" tooltip="{{\'Admin.Informations.Cacert_Tooltip\' | translate}}" href="data:application/x-pem-file;base64,{{health.certs.cacert}}" download="cacert.cer">\n                    <i class="fa fa-save"></i>\n                    Cacert\n                </a>\n                <a class="col-md-4 btn btn-info" tooltip="{{\'Admin.Informations.Trust_Tooltip\' | translate}}" href="data:application/x-pem-file;base64,{{health.certs.trust}}" download="trust.cer">\n                    <i class="fa fa-save"></i>\n                    Trust\n                </a>\n                <a class="col-md-4 btn btn-warning" tooltip="{{\'Admin.Informations.Store_Tooltip\' | translate}}" href="data:application/octet-stream;base64,{{health.certs.truststore}}" download="truststore.jks">\n                    <i class="fa fa-save"></i>\n                    TrustStore\n                </a>\n            </div>\n            <div class="panel-group" id="accordion" role="tablist">\n                <div class="panel panel-default" ng-repeat="cert in health.certs.chain">\n                    <div class="panel-heading" role="tab" id="head{{cert.CN}}">\n                        <h4 class="panel-title">\n                            {{cert.CN}}\n                        </h4>\n                    </div>\n                    <div id="cert.CN" class="panel-collapse collpase in" role="tabpanel">\n                        <div class="panel-body">\n                            <ul>\n                                <li><strong>{{\'Admin.Informations.Cert_CN\' | translate}} :</strong> {{cert.CN}}</li>\n                                <li><strong>{{\'Admin.Informations.Cert_O\' | translate}} :</strong> {{cert.O}}</li>\n                                <li><strong>{{\'Admin.Informations.Cert_OU\' | translate}} :</strong> {{cert.OU}}</li>\n                                <li><strong>{{\'Admin.Informations.Cert_L\' | translate}} :</strong> {{cert.L}}</li>\n                                <li><strong>{{\'Admin.Informations.Cert_ST\' | translate}} :</strong> {{cert.ST}}</li>\n                                <li><strong>{{\'Admin.Informations.Cert_C\' | translate}} :</strong> {{cert.C}}</li>\n                                <li><strong>{{\'Admin.Informations.Cert_EMAILADDRESS\' | translate}} :</strong>\n                                    {{cert.EMAILADDRESS}}\n                                </li>\n                                <li><strong>{{\'Admin.Informations.Cert_Expire\' | translate}} :</strong> {{cert.notAfter\n                                    | date}}\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n\n</div>\n\n<div class="modal-footer">\n    <button class="btn btn-primary" ng-click="ok()">\n        <i class="fa fa-times"></i>\n        {{\'Close\' | translate}}\n    </button>\n</div>')}]),angular.module("partials/modals/inputModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/inputModal.html",'<div class="modal-header">\n    <h3>{{title | i18n}}</h3>\n</div>\n<div class="modal-body row">\n    <p class="text-info"><i class="fa fa-warning"></i> {{message  | i18n}}</p>\n    <div class="col-md-12">\n        <form name="simpleInput" class="form-horizontal" ng-submit="ok()">\n            <div class="form-group mandatory-group">\n                <span class="label label-danger"><i class="fa fa-warning"></i> {{\'Mandatory\' | translate}}</span>\n                <input class="form-control validation-control" type="text" id="in" name="in" ng-model="ctrl.value" required="required">\n            </div>\n            <!-- Pour l\'envoi du formulaire avec touche entrée -->\n            <input type="submit" style="position: absolute; left: -9999px; width: 1px; height: 1px;"/>\n        </form>\n    </div>\n\n</div>\n\n<div class="modal-footer">\n    <span class="btn btn-warning" ng-click="cancel()">\n        <i class="fa fa-times-circle-o"></i>\n        {{\'Back\' | translate}}\n    </span>\n    <span class="btn btn-primary" ng-disabled="!simpleInput.$valid" ng-click="ok()">\n        <i class="fa fa-floppy-o"></i>\n        {{\'Save\' | translate}}\n    </span>\n</div>')}]),angular.module("partials/modals/journalModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/journalModal.html",'<div class="modal-header">\n    <h3>{{\'journalModal.event_log\' | translate}}</h3>\n</div>\n<div class="modal-body row">\n    <table class="table table-bordered table-striped" style="table-layout: fixed;">\n        <thead>\n            <tr>\n                <th>{{\'journalModal.date\' | translate}}</th>\n                <th>{{\'journalModal.name\' | translate}}</th>\n                <th>{{\'journalModal.annotation_observation\' | translate}}</th>\n                <th>{{\'journalModal.state\' | translate}}</th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr ng-repeat="event in dossiers[0].events">\n                <td>{{event.date}}</td>\n                <td>{{event.nom}}</td>\n                <td style="word-wrap: break-word;" ng-bind-html="event.annotation"></td>\n                <td>{{event.status}}</td>\n            </tr>\n        </tbody>\n    </table>\n</div>\n\n<div class="modal-footer">\n    <button class="btn btn-primary" ng-click="ok()">\n        <i class="fa fa-times"></i>\n        {{\'Close\' | translate}}\n    </button>\n</div>')}]),angular.module("partials/modals/mailModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/mailModal.html",'<div class="modal-header">\n    <h3>{{\'mailModal.sending_mail\' | translate}}</h3>\n</div>\n<div class="modal-body row">\n    <form novalidate name="modalForm" class="row form-horizontal">\n        <div class="col-md-6">\n            <label class="col-xs-12">\n                {{\'mailModal.to\' | translate}} : <input type="text" class="form-control" ng-pattern="/^([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-\\.]+)\\.([a-zA-Z]{2,5}){1,25}(;[ ]{0,1}([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-\\.]+)\\.([a-zA-Z]{2,5}){1,25})*$/" ng-model="action.destinataires">\n            </label>\n            <label class="col-xs-12">\n                {{\'mailModal.object\' | translate}} : <input type="text" class="form-control" ng-model="action.objet">\n            </label>\n            <label class="col-xs-12">\n                {{\'mailModal.message\' | translate}} :\n                <div>\n                    <textarea class="form-control mailCore" ng-model="action.message"></textarea>\n                    <i class="fa fa-4x fa-envelope-o textarea-icon"></i>\n                </div>\n            </label>\n        </div>\n        <div class="col-md-6">\n            <div class="col-xs-12">\n                <span class="legend">{{\'mailModal.folder_list\' | translate}}<hr></span>\n                <ul class="listeDossiers">\n                    <li ng-repeat="dossier in dossiers" class="btn btn-default col-md-12 force-display"><span class="label label-info">{{dossier.actionDemandee === "ARCHIVAGE" ? "À EXTRAIRE" : dossier.actionDemandee}}</span>{{dossier.title}}</li>\n                </ul>\n            </div>\n            <div class="col-xs-12">\n                <label for="includeFirstPage">\n                    <input ng-model="action.includeFirstPage" class="unvalidate" type="checkbox" id="includeFirstPage">\n                    {{\'mailModal.send_signature_slip\' | translate}}\n                </label>\n            </div>\n            <div class="col-xs-12" ng-show="hasAnnexes">\n                <span class="legend">{{\'mailModal.annexes_to_add\' | translate}}<hr></span>\n                <label ng-show="dossiers.length > 1">\n                    <input type="checkbox" class="checkbox-inline unvalidate" ng-model="action.annexesIncluded">\n                    {{\'mailModal.send_annexes\' | translate}}\n                </label>\n                <ul ng-show="dossiers.length === 1">\n                    <li ng-repeat="annexe in action.attachments">\n                        <label>\n                            <input type="checkbox" name="selectedAnnexes[]" class="checkbox-inline unvalidate" ng-model="annexe.selected">\n                            {{annexe.name}}\n                        </label>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </form>\n</div>\n\n<div class="modal-footer">\n    <button ng-disabled="spin" class="btn btn-warning" ng-click="cancel()">\n        <i class="fa fa-times-circle-o"></i>\n        {{\'Back\' | translate}}\n    </button>\n    <button ng-disabled="spin" class="btn btn-primary" ng-click="ok()">\n        <i class="fa fa-paper-plane-o"></i>\n        {{\'Send\' | translate}}\n    </button>\n</div>\n')}]),angular.module("partials/modals/mailsecInfosModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/mailsecInfosModal.html",'<div class="modal-header">\n    <h3>{{\'mailsecInfoModal.folder_state_on_the_secured_mail_platform\' | translate}}</h3>\n</div>\n<div class="modal-body row">\n    <div>\n        <b>Statut : </b>\n        <span id="statusInfos">{{dossier.infosMailSec.statut}}</span>\n        <span ng-if="error" class="text text-danger">\n            <i class="fa fa-warning"></i>\n            Erreur lors de la récupération du statut.\n            </br>\n            Veuillez contacter votre administrateur.\n        </span>\n        <div style="float:right;">\n            <span us-spinner spinner-key="spinner"></span>\n            <button ng-click="update()" ng-disabled="updating" class="btn btn-info"><i class="fa fa-undo"></i><span> {{\'mailsecInfoModal.refresh\' | translate}}</span></button>\n        </div>\n        <br>\n        <span ng-if="dossier.infosMailSec.documentId">\n            <b>{{\'mailsecInfoModal.send_date\' | translate}} : </b><span id="statusEnvoi">{{dossier.infosMailSec.envoi | date:\'dd/MM/yyyy HH:mm\'}}</span>\n        </span>\n        <span ng-if="!dossier.infosMailSec.documentId">\n            <b>{{\'mailsecInfoModal.send_date\' | translate}} : </b><span id="statusEnvoi">{{dossier.infosMailSec.envoi | toUTC | date:\'dd/MM/yyyy HH:mm\'}}</span>\n        </span>\n\n        <br>\n        <span ng-if="dossier.infosMailSec.documentId" style="color: rgba(0,0,0,0.25); font-size: 0.7em;">\n            <b>Identifiant unique : </b><span>{{dossier.infosMailSec.documentId}}</span>\n        </span>\n\n\n    </div>\n    <br>\n    <div>\n        <table class="table table-striped table-condensed table-bordered" aria-live="polite">\n            <thead>\n        <tr>\n            <th id="column_confirmed" >{{\'mailsecInfoModal.state\' | translate}}</th>\n            <th id="column_mail">{{\'mailsecInfoModal.mail\' | translate}}</th>\n            <th id="column_date">{{\'mailsecInfoModal.modification_date\' | translate}}</th>\n        </tr>\n            </thead>\n            <tbody>\n                <tr ng-repeat="info in dossier.infosMailSec.details">\n                    <td style="text-align: center;">\n                        <i ng-class="info.confirmed ? \'fa-check text-success\' : \'fa-times text-danger\'" class="fa" ></i>\n                    </td>\n                    <td>{{info.email}}</td>\n                    <td>{{info.confirmationDate | date:\'EEEE dd MMMM yyyy HH:mm:ss\'}}</td>\n                </tr>\n            </tbody>\n\n        </table>\n    </div>\n    <br>\n    <p class="text-info infoNextStep" ng-if="dossier.infosMailSec.statut === \'confirmé\'">{{\'mailsecInfoModal.go_to_next_step_confirmed\' | translate}}</p>\n</div>\n\n<div class="modal-footer">\n    <div style="float:left;">\n        <button ng-disabled="dossier.infosMailSec.statut == \'confirmé\'" class="btn btn-danger" ng-click="remorse()" ng-if="dossier.infosMailSec.documentId"><i class="fa fa-times-circle-o"></i> Interrompre la récupération de l\'état</button>\n        <button ng-disabled="dossier.infosMailSec.statut == \'confirmé\'" class="btn btn-danger" ng-click="remorse()" ng-if="!dossier.infosMailSec.documentId"><i class="fa fa-share"></i> {{\'mailsecInfoModal.use_my_remorse_right\' | translate}}</button>\n        <button ng-disabled="dossier.infosMailSec.statut == \'confirmé\'" class="btn btn-success" ng-click="force()"><i class="fa fa-road"></i> {{\'mailsecInfoModal.ignore_unconfirmed_mails\' | translate}}</button>\n    </div>\n\n    <button class="btn btn-default" ng-click="cancel()"><i class="fa fa-times"></i> {{\'Close\' | translate}}</button>\n</div>')}]),angular.module("partials/modals/mailsecModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/mailsecModal.html",'<div class="modal-header">\n    <h3>{{\'mailsecModal.send_by_secure_mail\' | translate}}</h3>\n</div>\n<div class="modal-body row">\n    <form name="modalForm" class="row form-horizontal">\n        <div class="col-md-6">\n            <label class="col-xs-12 mandatory-group">\n                <span class="label label-danger"><i class="fa fa-warning"></i> {{\'Mandatory\' | translate}}</span>\n                {{\'mailsecModal.to\' | translate}} : <input type="text" class="form-control" ng-pattern="/^([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-\\.]+)\\.([a-zA-Z]{2,5}){1,25}(;[ ]{0,1}([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-\\.]+)\\.([a-zA-Z]{2,5}){1,25})*$/" ng-model="action.destinataires" required>\n            </label>\n            <label class="col-xs-12">\n                {{\'mailsecModal.cc\' | translate}} : <input type="text" class="form-control" ng-pattern="/^([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-\\.]+)\\.([a-zA-Z]{2,5}){1,25}(;[ ]{0,1}([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-\\.]+)\\.([a-zA-Z]{2,5}){1,25})*$/" ng-model="action.destinatairesCC">\n            </label>\n            <label class="col-xs-12">\n                {{\'mailsecModal.cci\' | translate}} : <input type="text" class="form-control" ng-pattern="/^([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-\\.]+)\\.([a-zA-Z]{2,5}){1,25}(;[ ]{0,1}([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-\\.]+)\\.([a-zA-Z]{2,5}){1,25})*$/" ng-model="action.destinatairesCCI">\n            </label>\n            <label class="col-xs-12 mandatory-group">\n                <span class="label label-danger"><i class="fa fa-warning"></i> {{\'Mandatory\' | translate}}</span>\n                {{\'mailsecModal.object\' | translate}} : <input type="text" class="form-control unvalidate" ng-model="action.objet" required>\n            </label>\n            <label class="col-xs-12 mandatory-group">\n                <span class="label label-danger"><i class="fa fa-warning"></i> {{\'Mandatory\' | translate}}</span>\n                {{\'mailsecModal.message\' | translate}} :\n                <div>\n                    <textarea class="form-control mailCore unvalidate" ng-model="action.message" required></textarea>\n                    <i class="fa fa-4x fa-envelope-o textarea-icon"></i>\n                </div>\n            </label>\n            <label class="col-xs-12" ng-if="dossiers[0].actionDemandee !== \'MAILSECPASTELL\'">\n                {{\'mailsecModal.password\' | translate}} : <input type="text" class="form-control unvalidate" ng-model="action.password">\n            </label>\n            <label class="col-xs-12" ng-if="dossiers[0].actionDemandee !== \'MAILSECPASTELL\'">\n                {{\'mailsecModal.sending_password_uncrypted\' | translate}}\n                <div class="checkbox-inline">\n                    <input class="unvalidate" type="checkbox" ng-model="action.showpass">\n                </div>\n            </label>\n            <label class="col-xs-12">\n                {{\'mailsecModal.include_bord\' | translate}}\n                <div class="checkbox-inline">\n                    <input class="unvalidate" type="checkbox" ng-model="action.includeFirstPage">\n                </div>\n            </label>\n        </div>\n        <div class="col-md-6">\n            <div class="col-xs-12">\n                <span class="legend">{{\'mailsecModal.folder_list\' | translate}}<hr></span>\n                <ul class="listeDossiers">\n                    <li ng-repeat="dossier in dossiers" class="btn btn-default col-md-12 force-display"><span class="label label-info">{{dossier.actionDemandee}}</span>{{dossier.title}}</li>\n                </ul>\n            </div>\n            <div class="col-xs-12" ng-show="hasAnnexes">\n                <span class="legend">{{\'mailsecModal.annexes_to_add\' | translate}}<hr></span>\n                <label ng-show="dossiers.length > 1">\n                    <input type="checkbox" class="checkbox-inline unvalidate" ng-model="action.annexesIncluded">\n                    Inclure les annexes\n                </label>\n                <ul ng-show="dossiers.length === 1">\n                    <li ng-repeat="annexe in action.attachments">\n                        <label>\n                            <input type="checkbox" name="selectedAnnexes[]" class="checkbox-inline unvalidate" ng-model="annexe.selected">\n                            {{annexe.name}}\n                        </label>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </form>\n</div>\n\n<div class="modal-footer">\n    <button ng-disabled="spin" class="btn btn-warning" ng-click="cancel()">\n        <i class="fa fa-times-circle-o"></i>\n        {{\'Back\' | translate}}\n    </button>\n    <button ng-disabled="!modalForm.$valid" class="btn btn-primary" ng-click="ok()">\n        <i class="fa fa-check"></i>\n        {{\'Send\' | translate}}\n    </button>\n</div>\n')}]),angular.module("partials/modals/mandatoryReadModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/mandatoryReadModal.html",'<div class="modal-header">\n    <h3>{{\'mandatoryReadModal.folder_reading_is_required\' | translate}}</h3>\n</div>\n<div class="modal-body row">\n    <p>{{\'mandatoryReadModal.this_folder_have_to_be_read_before_signing\' | translate}} {{\'mandatoryReadModal.the_download_link_is_available_below\' | translate}}</p>\n    <a ng-click="ok()" target="_blank" class="xemelios" ng-if="dossier.isXemEnabled && (dossier.documents[0].name | fileext) === \'xml\'" href="{{context}}/proxy/alfresco/parapheur/dossiers/{{dossier.id}}/{{dossier.documents[0].id}}/xemelios">\n        <img ng-src="{{context}}/res/images/xemelios.png">\n        {{\'mandatoryReadModal.xemelios_reader\' | translate}}\n    </a>\n    <a ng-click="ok()" ng-if="!dossier.isXemEnabled || (dossier.documents[0].name | fileext) !== \'xml\'" target="_blank" href="{{context}}/proxy/alfresco/api/node/workspace/SpacesStore/{{dossier.documents[0].id}}/content/{{dossier.documents[0].name}}">\n        <i class="fa fa-lg fa-fw" ng-class="getFileExtIcon(dossier.documents[0].name)"></i>{{\'Download_action\' | translate}}</a>\n    </a>\n</div>\n\n<div class="modal-footer">\n    <button class="btn btn-warning" ng-click="cancel()">\n        <i class="fa fa-times-circle-o"></i>\n        {{\'Back\' | translate}}\n    </button>\n</div>')}]),angular.module("partials/modals/moveModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/moveModal.html",'<div class="modal-header">\n    <h3>{{\'moveModal.move_folder\' | translate}}</h3>\n</div>\n<div class="modal-body row">\n    <form novalidate name="modalForm" class="row form-horizontal">\n        <div class="col-md-6">\n            <span class="text-danger"><i class="fa fa-warning"></i> {{\'moveModal.moving_a_folder_imply_circuit_modification\' | translate}}</span>\n        </div>\n        <div class="col-md-8">\n            <label class="legendLabel col-xs-12">\n                {{\'moveModal.available_desks\' | translate}}\n                <hr>\n                <div class="input-group" ng-show="bureau.associes.length !== 0">\n                    <div class="right-inner-addon">\n                        <i class="fa fa-question-circle" tooltip-trigger="click" tooltip-placement="bottom"\n                           tooltip="{{\'validationModal.type_your_search_tooltip\' | translate}}"></i>\n                        <input id="bureau" type="text" class="form-control unvalidate" ng-model="action.bureau"\n                               placeholder="{{\'validationModal.search_by_title_name_or_user\' | translate}}"\n                               typeahead="bureau as bureau.title for bureau in bureaux | filter:$viewValue | limitTo:8"\n                               name="bureau" required="required">\n                    </div>\n\n                    <span class="input-group-addon" style="opacity: 0.7;"\n                          ng-class="!!action.bureau.id ? \'label-success\' : \'label-warning\'">\n                        {{!!action.bureau.id ? (\'validationModal.selected_folder\' | translate) : (\'validationModal.no_folder_selected\' | translate)}}\n                    </span>\n                </div>\n            </label>\n        </div>\n\n    </form>\n</div>\n\n<div class="modal-footer">\n    <div class="col-md-1" style="margin-top:12px;">\n        <span us-spinner ng-if="showSpinner"></span>\n    </div>\n    <button ng-disabled="showSpinner" class="btn btn-warning" ng-click="cancel()">\n        <i class="fa fa-times-circle-o"></i>\n        {{\'Back\' | translate}}\n    </button>\n    <button ng-disabled="!modalForm.$valid || showSpinner" class="btn btn-primary" ng-click="ok()" >\n        <i class="fa fa-check"></i>\n        {{\'Confirm\' | translate}}\n    </button>\n</div>\n')}]),angular.module("partials/modals/notificationModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/notificationModal.html",'<div class="modal-header">\n    <h3>{{\'notificationModal.notify_and_add_consultation_credentials\' | translate}}</h3>\n</div>\n<div class="modal-body row">\n    <div class="col-md-12">\n        <div class="row">\n            <div class="col-md-6">\n                <legend>{{\'notificationModal.available_desks\' | translate}}</legend>\n                <div class="col-md-12">\n                    <div class="input-group">\n                        <span class="input-group-addon"><i class="fa fa-search fa-fw"></i></span>\n                        <input type="text" class="unvalidate form-control" placeholder="Recherche de bureau disponible"\n                               ng-model="searchBureau">\n                    </div>\n                </div>\n                <ul class="col-md-12 nav nav-pills nav-stacked list-data overflow">\n                    <li class="pointer" ng-click="addToNotifications(b.id)"\n                        ng-repeat="b in (bureau.associes | filter:searchBureau | notSameIdInArray:dossier.notifications)">\n                        <a>\n                            {{b.name}} <span style="float:right;" class="label label-success"><i\n                                class="fa fa-plus-circle"></i> {{\'notificationModal.notify\' | translate}}</span>\n                            <br/>\n                            <blockquote>\n                                <small>{{b.proprietaires | array2string:\', \'}}</small>\n                            </blockquote>\n                        </a>\n                    </li>\n                </ul>\n                <span class="text-info" ng-if="(bureau.associes | notSameIdInArray:dossier.notifications).length === 0">\n                    <i class="fa fa-info-circle"></i> {{\'notificationModal.no_desk\' | translate}}\n                </span>\n            </div>\n            <div class="col-md-6">\n                <legend>{{\'notificationModal.desks_to_notify\' | translate}}</legend>\n                <ul class="nav nav-pills nav-stacked list-data overflow">\n                    <li ng-class="notif.mandatory ? \'\': \'pointer\'"\n                        ng-click="!notif.mandatory ? removeFromNotifications(notif):\'\';"\n                        ng-if="(bureau.associes | findWithId:notif.id).id"\n                        ng-init="b = (bureau.associes | findWithId:notif.id)"\n                        ng-repeat="notif in (dossier.notifications)">\n                        <a ng-if="!notif.mandatory">\n                            {{b.name}} <span style="float:right;" class="label label-danger"><i\n                                class="fa fa-times-circle"></i> {{\'notificationModal.remove\' | translate}}</span>\n                            <br/>\n                            <blockquote>\n                                <small>{{b.proprietaires | array2string:\', \'}}</small>\n                            </blockquote>\n                        </a>\n\n                        <div style="padding:2px 15px !important;" ng-if="notif.mandatory">\n                            {{b.name}}\n                            <br/>\n                            <blockquote>\n                                <small>{{b.proprietaires | array2string:\', \'}}</small>\n                            </blockquote>\n                        </div>\n                    </li>\n                </ul>\n                <span class="text-info" ng-if="dossier.notifications.length === 0">\n                    <i class="fa fa-info-circle"></i> {{\'notificationModal.no_desk\' | translate}}\n                </span>\n            </div>\n        </div>\n\n    </div>\n</div>\n\n<div class="modal-footer">\n    <button class="btn btn-warning" ng-click="cancel()">\n        <i class="fa fa-times-circle-o"></i>\n        {{\'Back\' | translate}}\n    </button>\n    <button class="btn btn-primary" ng-click="ok()">\n        <i class="fa fa-check"></i>\n        {{\'Confirm\' | translate}}\n    </button>\n</div>');
}]),angular.module("partials/modals/overrideS2low.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/overrideS2low.html","<div class=\"modal-header\" ng-if=\"ready\">\n    <h3 ng-show=\"selectedType.sigFormat | contains:'PAdES'\">{{'overrideS2low.pades_signature_profile' | translate}}</h3>\n    <h3 ng-show=\"(selectedType.tdtProtocole == 'aucun' || selectedType.tdtNom !=='S²LOW') && !(selectedType.sigFormat | contains:'PAdES')\">{{'overrideS2low.xades_signature_profile_override' | translate}}</h3>\n    <h3 ng-hide=\"selectedType.tdtProtocole === 'aucun' || selectedType.tdtNom !=='S²LOW'\">{{titleModal}}</h3>\n</div>\n<div class=\"modal-body row\" ng-if=\"ready\">\n<div ng-show=\"typeError && !files[0].name\" class=\"col-sm-8 alert alert-danger alert-top-modal\">{{'Error' | translate}} : {{'overrideS2low.the_selected_file_type_is_incorrect' | translate}} <br>{{'overrideS2low.your_file_should_be_png_jpg_or_gif' | translate}}</div>\n"+'    <form submit-button=".launchUpload" one-file="true" fileupload="certificat" file-added="certAdded(files)" wrong-type="wrongType(ext)" fileinput="#fileinput" upload-success="fileEncoded(data, index)" action="{{context + \'/base64encode\'}}" method="POST" enctype="multipart/form-data" novalidate name="modalForm" class="form-horizontal">\n        <div class="col-md-12">\n            <div class="row" ng-show="(selectedType.tdtNom ===\'S²LOW\' && selectedType.tdtProtocole !== \'aucun\') || selectedType.sigFormat | contains:\'AUTO\'">\n                <div class="form-group col-md-4" ng-show="selectedType.tdtNom ===\'S²LOW\' && selectedType.tdtProtocole !== \'aucun\'">\n                    <div>\n                        <div class="radio">\n                            <label for="connecteurActiv">\n                                <input class="unvalidate" id="connecteurActiv" ng-model="selectedType.overridedTdt.active" type="radio" value="true" name="connecteurState">{{\'overrideS2low.activate_connector\' | translate}}\n                            </label>\n                        </div>\n                        <div class="radio">\n                            <label for="connecteurDesactiv">\n                                <input class="unvalidate" id="connecteurDesactiv" ng-model="selectedType.overridedTdt.active" type="radio" value="false" name="connecteurState">{{\'overrideS2low.deactivate_connector\' | translate}}\n                            </label>\n                        </div>\n                    </div>\n                </div>\n                <ul ng-if="(selectedType.sigFormat | contains:\'AUTO\') || ((selectedType.tdtProtocole ===\'HELIOS\' || (selectedType.sigFormat | contains:\'PAdES\')) && selectedType.tdtNom ===\'S²LOW\')" class="nav nav-tabs">\n                    <li ng-if="!(selectedType.sigFormat | contains:\'AUTO\')" class="active"><a href="#connecteur" bs-tab><i class="fa fa-info-circle"></i> {{\'overrideS2low.s2low_server_connection\' | translate}}</a></li>\n                    <li ng-if="!(selectedType.sigFormat | contains:\'PAdES\') || (selectedType.sigFormat | contains:\'AUTO\')"><a href="#signature" bs-tab><i class="fa fa-road"></i> {{\'overrideS2low.xades_signature_profile\' | translate}}</a></li>\n                    <li ng-if="(selectedType.sigFormat | contains:\'PAdES\') || (selectedType.sigFormat | contains:\'AUTO\')"><a href="#pades" bs-tab><i class="fa fa-hand-o-up"></i> {{\'overrideS2low.pades_signature_profile\' | translate}}</a></li>\n                </ul>\n            </div>\n\n            <div class="tab-content">\n                <div class=\'tab-pane\' ng-class="selectedType.tdtProtocole !==\'aucun\' && selectedType.tdtNom ===\'S²LOW\' ? \'active\' : \'\'" id=\'connecteur\'>\n                    <div class="col-md-12">\n\n                        <div class="form-group">\n                            <label class="control-label col-sm-3" for="serveur">{{\'overrideS2low.server_name\' | translate}}</label>\n                            <div class="col-sm-9">\n                                <input class="form-control unvalidate" type="text" id="serveur" name="serveur" ng-change="infoChanged()" placeholder="{{selectedType.overridedTdt.server}}" ng-model="selectedType.overridedTdt.server" required>\n                            </div>\n                        </div>\n\n                        <div class="form-group">\n                            <label class="control-label col-sm-3" for="port">Port</label>\n                            <div class="col-sm-9">\n                                <input class="form-control unvalidate" type="text" id="port" name="port" ng-change="infoChanged()" placeholder="{{selectedType.overridedTdt.port}}" ng-model="selectedType.overridedTdt.port" required>\n                            </div>\n                        </div>\n\n                        <div class="form-group" style="display:inline-block;">\n                            <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->\n                            <div class="fileupload-buttonbar form-group" style="margin-bottom:0;">\n                                <!-- The fileinput-button span is used to style the file input field as button -->\n                                <div class="col-md-6">\n                                    <div class="col-md-12">\n                                        <span style="display:block !important;" class="btn btn-default fileinput-button">\n                                            <i class="fa fa-folder-open-o"></i>\n                                            <span>{{\'Browse\' | translate}}</span>\n                                            <input id="fileinput" type="file" name="file">\n                                        </span>\n                                    </div>\n                                    <div class="col-md-12" style="float:left;">\n                                        <span>{{\'overrideS2low.selected_certificate\' | translate}} : {{filename}}</span>\n                                    </div>\n                                </div>\n                                <div class="col-md-6" style="display:inline-block;">\n                                    <div>\n                                        <p>{{\'overrideS2low.current_certificate\' | translate}} : {{selectedType.overridedTdt.name}}<br>\n                                            {{\'overrideS2low.expiration_date\' | translate}} : {{selectedType.overridedTdt.dateLimite}}</p>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="form-group">\n                            <label class="control-label col-sm-3" for="password">{{\'overrideS2low.certificate_password\' | translate}}</label>\n                            <div class="col-sm-9">\n                                <input class="form-control unvalidate" type="text" id="password" name="password" ng-change="infoChanged()" placeholder="{{selectedType.overridedTdt.password}}" ng-model="selectedType.overridedTdt.password" required>\n                            </div>\n                        </div>\n\n                        <div class="form-group">\n                            <div class="col-md-6 row">\n                                <div class="col-md-12">\n                                    <span>{{\'overrideS2low.certificate_password\' | translate}} :\n                                        <i class="fa fa-check fa-2x" style="color:green;" ng-show="selectedType.overridedTdt.isPwdGoodForPkcs === \'ok\'"></i>\n                                        <i class="fa fa-times fa-2x" style="color:red;" ng-show="selectedType.overridedTdt.isPwdGoodForPkcs !== \'ok\'"></i>\n                                    </span>\n                                </div>\n                                <div class="col-md-12">\n                                    <span ng-if="selectedType.overridedTdt.listeLogins.length > 0">{{\'overrideS2low.connection_with_user\' | translate}} :\n                                        <i class="fa fa-check fa-2x" style="color:green;" ng-show="selectedType.overridedTdt.validLoginAndCertCnx === \'ok\'"></i>\n                                        <i class="fa fa-times fa-2x" style="color:red;" ng-show="selectedType.overridedTdt.validLoginAndCertCnx !== \'ok\'"></i>\n                                    </span>\n                                </div>\n\n                            </div>\n                            <div class="col-md-6" ng-if="selectedType.overridedTdt.listeLogins.length > 0">\n                                <div class="row">\n                                    <div class="col-md-6">\n                                        <div class="form-group">\n                                            <label class="control-label" for="password">{{\'overrideS2low.user_account\' | translate}}</label>\n                                            <select ng-change="infoChanged()" class="form-control" ng-model="selectedType.overridedTdt.userlogin" ng-options="user for user in selectedType.overridedTdt.listeLogins">\n                                            </select>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-6">\n                                        <div class="form-group">\n                                            <label class="control-label" for="password">{{\'overrideS2low.password\' | translate}}</label>\n                                            <input ng-change="infoChanged()" type="text" class="form-control" ng-model="selectedType.overridedTdt.userpassword">\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="col-md-6">\n                                <span>{{\'overrideS2low.connection_with_certificate\' | translate}} :\n                                    <i class="fa fa-check fa-2x" style="color:green;" ng-show="selectedType.overridedTdt.validCertCnx === \'ok\'"></i>\n                                    <i class="fa fa-times fa-2x" style="color:red;" ng-show="selectedType.overridedTdt.validCertCnx !== \'ok\'"></i>\n                                </span>\n                            </div>\n                        </div>\n\n                        <div ng-if="selectedType.tdtProtocole ===\'ACTES\'" class="form-group">\n                            <label class="control-label col-sm-3" for="archivage">{{\'overrideS2low.base_url_for_archiving\' | translate}}</label>\n                            <div class="col-sm-9">\n                                <input class="form-control" type="text" id="archivage" name="archivage" placeholder="{{selectedType.overridedTdt.baseUrlArchivage}}" ng-model="selectedType.overridedTdt.baseUrlArchivage" required>\n                            </div>\n                        </div>\n\n                        <div ng-if="selectedType.tdtProtocole ===\'HELIOS\'  && selectedType.tdtNom ===\'S²LOW\'" class="form-group">\n                            <label class="control-label col-sm-3" for="collectivite">{{\'overrideS2low.collectivity_id\' | translate}}</label>\n                            <div class="col-sm-9">\n                                <input class="form-control" type="text" id="collectivite" name="collectivite" placeholder="{{selectedType.overridedTdt.collectivite}}" ng-model="selectedType.overridedTdt.collectivite" required>\n                            </div>\n                        </div>\n\n                        <span ng-if="selectedType.overridedTdt.validCertCnx !== \'ok\' || selectedType.overridedTdt.validLoginAndCertCnx !== \'ok\' || changed" class="text-danger">{{\'overrideS2low.the_connection_have_to_be_validated_to_save_configuration\' | translate}}</span>\n                    </div>\n                </div>\n                <div class=\'tab-pane\' ng-class="(selectedType.tdtProtocole ===\'aucun\' || selectedType.tdtNom !==\'S²LOW\') && !(selectedType.sigFormat | contains:\'PAdES\') ? \'active\' : \'\'" id=\'signature\'>\n                    <div class="col-md-12">\n\n                        <div class="form-group">\n                            <label class="control-label col-sm-3" for="pPolicyIdentifierID">{{\'overrideS2low.pes_policy_identifier_default\' | translate}}</label>\n                            <div class="col-sm-9">\n                                <input class="form-control" type="text" id="pPolicyIdentifierID" name="pPolicyIdentifierID" ng-model="selectedType.overridedTdt.pPolicyIdentifierID" required>\n                            </div>\n                        </div>\n\n                        <div class="form-group">\n                            <label class="control-label col-sm-3" for="pPolicyIdentifierDescription">{{\'overrideS2low.pes_policy_description_default\' | translate}}</label>\n                            <div class="col-sm-9">\n                                <input class="form-control" type="text" id="pPolicyIdentifierDescription" name="pPolicyIdentifierDescription" ng-model="selectedType.overridedTdt.pPolicyIdentifierDescription" required>\n                            </div>\n                        </div>\n\n                        <div class="form-group">\n                            <label class="control-label col-sm-3" for="pPolicyDigest">{{\'overrideS2low.pes_digest_default\' | translate}}</label>\n                            <div class="col-sm-9">\n                                <input class="form-control" type="text" id="pPolicyDigest" name="pPolicyDigest" ng-model="selectedType.overridedTdt.pPolicyDigest" required>\n                            </div>\n                        </div>\n\n                        <div class="form-group">\n                            <label class="control-label col-sm-3" for="pSPURI">{{\'overrideS2low.pes_spuri_default\' | translate}}</label>\n                            <div class="col-sm-9">\n                                <input class="form-control" type="text" id="pSPURI" name="pSPURI" ng-model="selectedType.overridedTdt.pSPURI" required>\n                            </div>\n                        </div>\n\n                        <div class="form-group" ng-show="selectedType.tdtNom ===\'FAST\'">\n                            <label class="control-label col-sm-3" for="pClaimedRole">{{\'overrideS2low.pes_claimed_role\' | translate}}</label>\n                            <div class="col-sm-9">\n                                <input class="form-control" type="text" id="pClaimedRole" name="pClaimedRole" ng-model="selectedType.overridedTdt.pClaimedRole" required>\n                            </div>\n                        </div>\n\n                        <div class="row">\n                            <div class="col-md-6">\n                                <div class="form-group">\n                                    <label class="control-label col-sm-3" for="pPostalCode">{{\'overrideS2low.zip_code\' | translate}}</label>\n                                    <div class="col-sm-9">\n                                        <input class="form-control" type="text" id="pPostalCode" name="pPostalCode" ng-model="selectedType.overridedTdt.pPostalCode" required>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="col-md-6">\n                                <div class="form-group">\n                                    <label class="control-label col-sm-3" for="pCity">{{\'overrideS2low.city\' | translate}}</label>\n                                    <div class="col-sm-9">\n                                        <input class="form-control" type="text" id="pCity" name="pPostalCode" ng-model="selectedType.overridedTdt.pCity" required>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n\n                        <div class="form-group">\n                            <label class="control-label col-sm-3" for="pCountryName">{{\'overrideS2low.country\' | translate}}</label>\n                            <div class="col-sm-9">\n                                <input class="form-control" type="text" id="pCountryName" name="pCountryName" ng-model="selectedType.overridedTdt.pCountryName" required>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\'tab-pane\' ng-class="(selectedType.sigFormat | contains:\'PAdES\') && ((selectedType.tdtProtocole === \'aucun\') || (selectedType.tdtNom !== \'S²LOW\') || (selectedType.tdtOverride === \'false\')) ? \'active\' : \'\'" id=\'pades\'>\n                    <div class="col-md-12">\n\n                        <div class="form-group">\n                            <label class="control-label col-sm-3" for="pCityPades">{{\'overrideS2low.city\' | translate}}</label>\n                            <div class="col-sm-9">\n                                <input class="form-control" type="text" id="pCityPades" name="pCityPades" ng-model="selectedType.overridedTdt.pCity" required>\n                            </div>\n                        </div>\n\n                        <div class="well row">\n                            <div class="col-md-8">\n                                <h3>{{\'overrideS2low.signature_stamp\' | translate}}</h3>\n\n                                <div class="form-group">\n                                    <div>\n                                        <div class="radio">\n                                            <label for="showStamp">\n                                                <input class="unvalidate" id="showStamp" ng-model="selectedType.overridedTdt.showStamp" type="radio" value="true" name="showStamp">{{\'overrideS2low.show_the_signature_stamp\' | translate}}\n                                            </label>\n                                        </div>\n                                        <div class="radio">\n                                            <label for="donotShowStamp">\n                                                <input class="unvalidate" id="donotShowStamp" ng-model="selectedType.overridedTdt.showStamp" type="radio" value="false" name="donotShowStamp">{{\'overrideS2low.dont_show_the_signature_stamp\' | translate}}\n                                            </label>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div class="form-group">\n                                    <label class="control-label col-sm-3" for="stampPage">{{\'overrideS2low.page\' | translate}}</label>\n                                    <div class="col-sm-9">\n                                        <input class="form-control" type="text" id="stampPage" name="stampPage" ng-model="selectedType.overridedTdt.stampPage" required>\n                                    </div>\n                                </div>\n\n                                <div class="form-group">\n                                    <label class="control-label col-sm-3" for="stampFontSize">{{\'overrideS2low.text_size\' | translate}}</label>\n                                    <div class="col-sm-9">\n                                        <input class="form-control" type="text" id="stampFontSize" name="stampPage" ng-model="selectedType.overridedTdt.stampFontSize" required>\n                                        <span class="text-info">{{\'overrideS2low.text_size_info\' | translate}}</span>\n                                    </div>\n\n\n                                </div>\n\n                                <div class="form-group">\n                                    <label class="control-label col-sm-3" for="coordX">{{\'overrideS2low.x_coordinate\' | translate}}</label>\n                                    <div class="col-sm-9">\n                                        <input class="form-control" type="text" id="coordX" name="coordX" ng-model="selectedType.overridedTdt.stampCoordX" required>\n                                    </div>\n                                </div>\n\n                                <div class="form-group">\n                                    <label class="control-label col-sm-3" for="coordY">{{\'overrideS2low.y_coordinate\' | translate}}</label>\n                                    <div class="col-sm-9">\n                                        <input class="form-control" type="text" id="coordY" name="coordY" ng-model="selectedType.overridedTdt.stampCoordY" required>\n                                    </div>\n                                </div>\n\n                                <div class="form-group">\n                                    <label class="control-label col-sm-3" for="stampWidth">{{\'overrideS2low.width\' | translate}}</label>\n                                    <div class="col-sm-9">\n                                        <input class="form-control" type="text" id="stampWidth" name="stampWidth" ng-model="selectedType.overridedTdt.stampWidth" required>\n                                    </div>\n                                </div>\n\n                                <div class="form-group">\n                                    <label class="control-label col-sm-3" for="stampHeight">{{\'overrideS2low.height\' | translate}}</label>\n                                    <div class="col-sm-9">\n                                        <input class="form-control" type="text" id="stampHeight" name="stampHeight" max="840" ng-model="selectedType.overridedTdt.stampHeight" required>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="col-md-4">\n                                <h3>{{\'overrideS2low.position\' | translate}}</h3>\n                                <div style="background-color: white; width:210px; height:297px; outline: 1px groove cornsilk; overflow: hidden;">\n                                    <div style="z-index:50; width:210px; height:297px; position: absolute;" ng-click="movePosition($event)">\n\n                                    </div>\n                                    <div style="border: 1px groove #0055aa; position:relative; z-index:49; max-height: 297px; max-width:210px;"\n                                         ng-style="handlePosition()">\n\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n\n<div class="modal-body" ng-if="!ready">\n    <div style="height:500px;">\n        <span style="position: relative; width: 0px; z-index: 2000000000; top:50%; left:50%;" us-spinner="{radius:20, width:8, length: 16}" ></span>\n    </div>\n</div>\n\n<div class="modal-footer" style="text-align: left;" ng-if="ready">\n    <div class="col-md-4">\n        <button type="button" ng-if="selectedType.tdtProtocole !==\'aucun\' && selectedType.tdtNom ===\'S²LOW\'" class="btn btn-default launchUpload" ng-click="enableModeTest()">\n            <i class="fa fa-check"></i>\n            {{\'overrideS2low.test_configuration\' | translate}}\n        </button>\n        <div>\n            <span ng-if="hasTest" class="text-info"><i class="fa fa-info-circle"></i> {{\'overrideS2low.tests_updated\' | translate}}</span>\n        </div>\n    </div>\n    <div class="col-md-8" style="text-align: right;">\n        <button class="btn btn-warning" ng-click="ok()">\n            <i class="fa fa-times-circle-o"></i>\n            {{\'Back\' | translate}}\n        </button>\n        <button type="button" ng-disabled="(selectedType.overridedTdt.validCertCnx !== \'ok\' || selectedType.overridedTdt.validLoginAndCertCnx !== \'ok\' || changed) && selectedType.tdtProtocole !==\'aucun\' && selectedType.tdtNom !== \'pas de TdT\'" ng-click="enableModeSave()" class="btn btn-primary launchUpload">\n            <i class="fa fa-floppy-o"></i>\n            {{\'overrideS2low.save_configuration\' | translate}}\n        </button>\n    </div>\n</div>')}]),angular.module("partials/modals/pesPropertiesTenant.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/pesPropertiesTenant.html",'<div class="modal-header">\n    <h3>{{title | i18n}}</h3>\n</div>\n<div class="modal-body row">\n    <p class="text-info"><i class="fa fa-warning"></i> {{message  | i18n}}</p>\n    <div class="col-md-12">\n        <form novalidate name="pesProperties" class="form-horizontal" ng-submit="ok()">\n            <div class="form-group">\n                <label for="id">{{\'pesPropertiesTenant.policy_identifier_id\' | translate}}</label>\n                <input class="form-control validation-control" type="text" id="id" name="id" ng-model="properties.policyIdentifierID" required="required">\n                <div class="input-help">\n                    <span class="error" ng-show="pesProperties.id.$error.required">{{\'Mandatory\' | translate}}</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <label for="desc">{{\'pesPropertiesTenant.policy_identifier_description\' | translate}}</label>\n                <input class="form-control validation-control" type="text" id="desc" name="desc" ng-model="properties.policyIdentifierDescription" required="required">\n                <div class="input-help">\n                    <span class="error" ng-show="pesProperties.desc.$error.required">{{\'Mandatory\' | translate}}</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <label for="digest">{{\'pesPropertiesTenant.policy_digest\' | translate}}</label>\n                <input class="form-control validation-control" type="text" id="digest" name="digest" ng-model="properties.policyDigest" required="required">\n                <div class="input-help">\n                    <span class="error" ng-show="pesProperties.digest.$error.required">{{\'Mandatory\' | translate}}</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <label for="uri">{{\'pesPropertiesTenant.sp_uri\' | translate}}</label>\n                <input class="form-control validation-control" type="text" id="uri" name="uri" ng-model="properties.spuri" required="required">\n                <div class="input-help">\n                    <span class="error" ng-show="pesProperties.uri.$error.required">{{\'Mandatory\' | translate}}</span>\n                </div>\n            </div>\n            <!-- Pour l\'envoi du formulaire avec touche entrée -->\n            <input type="submit" style="position: absolute; left: -9999px; width: 1px; height: 1px;"/>\n        </form>\n    </div>\n\n</div>\n\n<div class="modal-footer">\n    <button class="btn btn-warning" ng-click="cancel()">\n        <i class="fa fa-times-circle"></i>\n        {{\'Back\' | translate}}</button>\n    <button type="submit" class="btn btn-primary" ng-disabled="!pesProperties.$valid" ng-click="ok()">\n        <i class="fa fa-floppy-o"></i>\n        {{\'Save\' | translate}}</button>\n</div>')}]),angular.module("partials/modals/printModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/printModal.html",'<div class="modal-header">\n    <h3>{{\'printModal.printing\' | translate}}</h3>\n</div>\n<div class="modal-body row">\n    {{textModal}}\n    <div class="col-xs-12">\n        <span class="legend">{{\'printModal.concerned_folder\' | translate}}<hr></span>\n        <ul class="listeDossiers">\n            <li ng-repeat="dossier in dossiers"><span class="label label-info">{{dossier.actionDemandee}}</span>{{dossier.title}}</li>\n        </ul>\n    </div>\n    <div class="col-xs-12">\n        <label for="includeFirstPage">\n            <input ng-model="includeFirstPage" class="unvalidate" type="checkbox" id="includeFirstPage">\n            {{\'printModal.print_with_signature_slip\' | translate}}\n        </label>\n    </div>\n    <div class="col-xs-12" ng-if="dossiers[0].annexes.length > 0">\n        <span class="legend">{{\'printModal.annexes\' | translate}}<hr></span>\n        <div ng-repeat="annexe in dossiers[0].annexes">\n            <label for="annexe_{{$index}}">\n                <input ng-init="checkboxAnnexes[$index] = dossiers[0].includeAnnexes" ng-model="checkboxAnnexes[$index]" class="unvalidate" type="checkbox" id="annexe_{{$index}}">\n                {{annexe.name}}\n            </label>\n        </div>\n    </div>\n</div>\n\n<div class="modal-footer">\n    <button class="btn btn-warning" ng-click="cancel()">\n        <i class="fa fa-times-circle-o"></i>\n        {{\'Back\' | translate}}\n    </button>\n    <a class="btn btn-primary" target="_blank" href="{{context}}/proxy/alfresco/parapheur/dossiers/{{dossiers[0].id}}/print?includeFirstPage={{includeFirstPage}}&attachments={{annexesToInclude | encodeURIComponent}}" ng-click="ok()">\n        <i class="fa fa-print"></i>\n        {{\'Print\' | translate}}\n    </a>\n</div>')}]),angular.module("partials/modals/propertiesModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/propertiesModal.html",'<div class="modal-header">\n    <h3>{{\'propertiesModal.node_properties\' | translate}}</h3>\n</div>\n<div class="modal-body row" style=" overflow-y: scroll; max-height: 400px; ">\n    <table class="table table-bordered table-striped">\n        <thead>\n            <tr>\n                <th>{{\'propertiesModal.property\' | translate}}</th>\n                <th>{{\'propertiesModal.value\' | translate}}</th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr ng-repeat="(prop, value) in nodes[0].properties">\n                <td>{{prop}}</td>\n                <td>{{value}}</td>\n            </tr>\n        </tbody>\n    </table>\n</div>\n\n<div class="modal-footer">\n    <button class="btn btn-primary" ng-click="ok()">\n        <i class="fa fa-times"></i>\n        {{\'Close\' | translate}}\n    </button>\n</div>')}]),angular.module("partials/modals/readConfirmModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/readConfirmModal.html",'<div class="modal-header">\n    <h3>{{title | i18n}} {{titleComplement}}</h3>\n</div>\n<div class="modal-body row">\n    <div class="checkbox">\n        <label>\n            <input ng-model="confirm" type="checkbox"> {{message}}\n        </label>\n    </div>\n</div>\n\n<div class="modal-footer">\n    <button class="btn btn-warning" ng-click="cancel()">\n        <i class="fa fa-times-circle-o"></i>\n        {{\'Back\' | translate}}\n    </button>\n    <button class="btn btn-primary" ng-disabled="!confirm" ng-click="ok()">\n        <i class="fa fa-check"></i>\n        {{\'Confirm\' | translate}}\n    </button>\n</div>')}]),angular.module("partials/modals/rejectModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/rejectModal.html",'<div class="modal-header">\n    <h3>{{\'rejectModal.reject\' | translate}}</h3>\n</div>\n<div class="modal-body row">\n    <form novalidate name="modalForm" class="row form-horizontal">\n        <div class="col-md-6">\n            <label class="legendLabel col-xs-12">\n                <span class="label label-danger">{{\'Mandatory\' | translate}}</span> {{\'rejectModal.public_annotation\' | translate}}\n                <hr>\n                <textarea class="form-control annotation" ng-model="action.annotPub" required></textarea>\n                <i class="fa fa-3x fa-globe textarea-icon"></i>\n            </label>\n            <label class="legendLabel col-xs-12">\n                {{\'rejectModal.private_annotation\' | translate}}\n                <hr>\n                <textarea class="form-control annotationprivee" ng-model="action.annotPriv"></textarea>\n                <i class="fa fa-3x fa-user-secret textarea-icon"></i>\n            </label>\n        </div>\n        <div class="col-md-6">\n            <div class="col-xs-12">\n                <span class="legend">{{\'rejectModal.folder_list\' | translate}}<hr></span>\n                <ul class="listeDossiers">\n                    <li ng-repeat="dossier in dossiers" class="btn btn-default col-md-12 force-display"><span class="label label-info">{{dossier.actionDemandee}}</span>{{dossier.title}}</li>\n                </ul>\n            </div>\n        </div>\n    </form>\n</div>\n\n<div class="modal-footer">\n    <progressbar class="progress-striped active progress-modal" value="progress" max="max" type="info">\n        <span style="color:black; white-space:nowrap;">{{\'rejectModal.handled_folders\' | translate}} : {{progress}} / {{max}}</span>\n    </progressbar>\n    <button class="btn btn-warning" ng-click="cancel()">\n        <i class="fa fa-times-circle-o"></i>\n        {{\'Back\' | translate}}\n    </button>\n    <button ng-disabled="!modalForm.$valid" class="btn btn-primary" ng-click="ok()">\n        <i class="fa fa-times"></i>\n        {{\'rejectModal.reject\' | translate}}\n    </button>\n</div>\n');
}]),angular.module("partials/modals/signPapierConfirmationModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/signPapierConfirmationModal.html",'<div class="modal-header">\n    <h3>{{\'signPapeConfirmationModal.paper_signature_confirmation\' | translate}}</h3>\n</div>\n<div class="modal-body row">\n    <p>{{\'signPapeConfirmationModal.do_you_really_want_change_signature_to_paper_signature\' | translate}}</p>\n    <p>{{\'signPapeConfirmationModal.link_to_the_document_to_print\' | translate}} :\n        <a target="_blank" href="{{context}}/proxy/alfresco/api/node/workspace/SpacesStore/{{dossier.documents[0].id}}/content/{{dossier.documents[0].name}}">\n            <i class="fa fa-file"></i>\n            {{dossier.documents[0].name}}\n        </a>\n    </p>\n</div>\n\n<div class="modal-footer">\n    <button class="btn btn-warning" ng-click="cancel()">\n        <i class="fa fa-times-circle-o"></i>\n        {{\'Back\' | translate}}\n    </button>\n    <button class="btn btn-primary" ng-click="ok()">\n        <i class="fa fa-check"></i>\n        {{\'Confirm\' | translate}}\n    </button>\n</div>')}]),angular.module("partials/modals/signPapierModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/signPapierModal.html",'<div class="modal-header">\n    <h3>{{\'signPaperModal.signature_paper_confirmation\' | translate}}</h3>\n</div>\n<div class="modal-body row">\n    <form novalidate name="modalForm" class="row form-horizontal">\n        <div class="col-md-6">\n            <label class="legendLabel col-xs-12">\n                {{\'signPaperModal.public_annotation\' | translate}}\n                <hr>\n                <div>\n                    <textarea class="form-control annotation" ng-model="action.annotPub"></textarea>\n                    <i class="fa fa-3x fa-globe textarea-icon"></i>\n                </div>\n            </label>\n            <label class="legendLabel col-xs-12">\n                {{\'signPaperModal.private_annotation\' | translate}}\n                <hr>\n                <div>\n                    <textarea class="form-control annotationprivee" ng-model="action.annotPriv"></textarea>\n                    <i class="fa fa-3x fa-user-secret textarea-icon"></i>\n                </div>\n            </label>\n        </div>\n        <div class="col-md-6">\n            <div class="col-xs-12">\n                <span class="legend">{{\'signPaperModal.folder_list\' | translate}}<hr></span>\n                <ul class="listeDossiers">\n                    <li ng-repeat="dossier in dossiers" class="btn btn-default col-md-12 force-display"><span class="label label-info">{{dossier.actionDemandee}}</span>{{dossier.title}}</li>\n                </ul>\n            </div>\n        </div>\n    </form>\n</div>\n\n<div class="modal-footer">\n    <progressbar class="progress-striped active progress-modal" value="progress" max="max" type="info">\n        <span style="color:black; white-space:nowrap;">{{\'signPaperModal.handled_folders\' | translate}} : {{progress}} / {{max}}</span>\n    </progressbar>\n    <button class="btn btn-warning" ng-click="cancel()">\n        <i class="fa fa-times-circle-o"></i>\n        {{\'Back\' | translate}}\n    </button>\n    <button ng-disabled="!modalForm.$valid" class="btn btn-primary" ng-click="ok()">\n        <i class="fa fa-check"></i>\n        {{\'signPaperModal.Transmit_after_printing_and_paper_signature\' | translate}}\n    </button>\n</div>\n')}]),angular.module("partials/modals/simpleConfirmationModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/simpleConfirmationModal.html",'<div class="modal-header">\n    <h3>{{title | translate}} {{titleComplement}}</h3>\n</div>\n<div class="modal-body row">\n    {{message  | translate}}\n\n    <span ng-if="error" class="text text-danger">\n        <br/>\n        <br/>\n        <i class="fa fa-warning"></i>\n        <span ng-bind-html="error"></span>\n    </span>\n</div>\n\n<div class="modal-footer">\n    <button class="btn btn-warning" ng-click="cancel()">\n        <i class="fa fa-times-circle-o"></i>\n        {{\'Back\' | translate}}\n    </button>\n    <button class="btn btn-primary" ng-click="ok()">\n        <i class="fa fa-check"></i>\n        {{\'Confirm\' | translate}}\n    </button>\n</div>')}]),angular.module("partials/modals/tdtModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/tdtModal.html",'<div class="modal-header">\n    <h3>{{\'tdtModal.sending_helios_folders\' | translate}}</h3>\n</div>\n<div class="modal-body row">\n    <form novalidate name="modalForm" class="row form-horizontal">\n        <div class="col-md-6">\n            <label class="legendLabel col-xs-12">\n                {{\'tdtModal.public_annotation\' | translate}}\n                <hr>\n                <div>\n                    <textarea class="form-control annotation" ng-change="giveCommentToApplet()" ng-model="action.annotPub"></textarea>\n                    <i class="fa fa-3x fa-globe textarea-icon"></i>\n                </div>\n            </label>\n            <label class="legendLabel col-xs-12">\n                {{\'tdtModal.private_annotation\' | translate}}\n                <hr>\n                <div>\n                    <textarea class="form-control annotationprivee" ng-model="action.annotPriv"></textarea>\n                    <i class="fa fa-3x fa-user-secret textarea-icon"></i>\n                </div>\n            </label>\n        </div>\n\n        <div ng-if="actesInfo" class="col-md-6">\n            <div class="form-group col-md-12">\n                <label for="nature-acte">{{\'tdtModal.acte_subject\' | translate}}</label>\n                <select class="form-control" id="nature-acte" ng-model="actesInfo.nature" ng-change="dossier.sousType = \'\'" ng-options="nature.name as nature.name for nature in actesInfo.nature" required>\n                    <option value="">-- {{\'tdtModal.type_selection\' | translate}} --</option>\n                </select>\n                <div class="input-help">\n                    <h4>{{\'tdtModal.required_input_help\' | translate}}</h4>\n                </div>\n            </div>\n            <div class="form-group col-md-12 mandatory-group">\n                <label for="numero-acte">{{\'tdtModal.acte_number\' | translate}}</label>\n                <span class="fa fa-warning label label-danger"> {{\'Mandatory\' | translate}}</span>\n                <input type="text" ng-model="action.numeroActe" id="numero-acte" class="form-control" required/>\n            </div>\n            <div class="form-group col-md-12">\n                <label class="control-label" for="date-decision">{{\'tdtModal.decision_date\' | translate}}</label>\n                <span class="fa fa-warning label label-danger"> {{\'Mandatory\' | translate}}</span>\n                <inpu readonly="true"t ip-datepicker return-format="timestamp" type="text" id="date-decision" ng-model="action.dateDecision" class="form-control unvalidate" required>\n                <span ng-click="action.dateDecision = undefined" class="pointer input-group-addon">X</span>\n            </div>\n        </div>\n\n        <div ng-if="dossiers" class="col-md-6">\n            <div class="col-xs-12">\n                <span class="legend">{{\'tdtModal.folder_list\' | translate}}<hr></span>\n                <ul class="listeDossiers">\n                    <li ng-repeat="dossier in dossiers" class="btn btn-default col-md-12 force-display"><span class="label label-info">{{dossier.actionDemandee}}</span>{{dossier.title}}</li>\n                </ul>\n            </div>\n        </div>\n    </form>\n</div>\n\n<div class="modal-footer">\n    <progressbar ng-if="dossiers" class="progress-striped active" value="progress" max="max" type="info">\n        <span style="color:black; white-space:nowrap;">{{\'tdtModal.handled_folders\' | translate}} : {{progress}} / {{max}}</span>\n    </progressbar>\n\n    <button ng-disabled="spin" class="btn btn-warning" ng-click="cancel()">\n        <i class="fa fa-times-circle-o"></i>\n        {{\'Back\' | translate}}\n    </button>\n    <button ng-disabled="spin" class="btn btn-primary" ng-click="ok()">\n        <i class="fa fa-check"></i>\n        {{\'Confirm\' | translate}}\n    </button>\n\n    </div>\n</div>\n')}]),angular.module("partials/modals/utilisateursModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/utilisateursModal.html",'<div class="modal-header">\n    <h3>{{\'Admin.Users.UserMod_Title\' | translate}} {{originalUser.firstName}} {{originalUser.lastName}}</h3>\n</div>\n<div class="modal-body row">\n\n\n        <ul class="nav nav-tabs">\n            <li class="active"><a href="#general" bs-tab><i class="fa fa-user"></i> {{\'Admin.Users.UserMod_General\' | translate}}</a></li>\n            <li ng-if="!user.isFromLdap"><a href="#motdepasse" bs-tab><i class="fa fa-lock"></i> {{\'Admin.Users.UserMod_Password\' | translate}}</a></li>\n            <li><a href="#notifications" bs-tab><i class="fa fa-envelope-o"></i> {{\'Admin.Users.UserMod_Notifs\' | translate}}</a></li>\n            <li><a href="#certificat" bs-tab ng-click="setCertificat()"><i class="fa fa-certificate"></i> {{\'Admin.Users.UserMod_Cert\' | translate}}</a></li>\n            <li><a href="#signature" bs-tab ng-click="setSignature()"><i class="fa fa-picture-o"></i> {{\'Admin.Users.UserMod_Sig\' | translate}}</a></li>\n            <li ng-if="originalUser.username.split(\'@\')[0] !== \'admin\'"><a href="#droits" bs-tab><i class="fa fa-ban"></i> {{\'Admin.Users.UserMod_Rights\' | translate}}</a></li>\n            <li><a href="#bureaux" bs-tab ng-click="getBureaux()"><i class="fa fa-desktop"></i> {{\'Admin.Users.UserMod_Bur\' | translate}}</a></li>\n            <li><a href="#groups" bs-tab><i class="fa fa fa-group"></i> {{\'Admin.Users.UserMod_Gr\' | translate}}</a></li>\n        </ul>\n\n        <div class="tab-content">\n            <div class=\'tab-pane active\' id=\'general\'>\n                <form name="general">\n                    <div class="col-md-12">\n                        <div class="form-group">\n                            <label for="username">{{\'Admin.Users.User_Name\' | translate}}</label>\n                            <input class="form-control validation-control" ng-pattern=\'/^[^&"£*/<>?%|+;]*$/\' type="text" id="username" name="username" placeholder="{{originalUser.username}}" ng-model="user.username" required disabled>\n                            <div class="input-help">\n                                <h4 ng-show="general.username.$error.pattern">{{\'Admin.Users.User_SpecialChar\' | translate}}</h4>\n                                <h4 ng-show="general.username.$error.required">{{\'Admin.Users.UserMod_Required\' | translate}}</h4>\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class="control-label" for="firstName">{{\'Admin.Users.User_Firstname\' | translate}}</label>\n                            <input class="form-control validation-control" type="text" id="firstName" name="firstName" placeholder="{{originalUser.firstName}}" ng-model="user.firstName" ng-required="!user.isFromLdap" ng-disabled="user.isFromLdap">\n                            <div class="input-help">\n                                <h4 ng-show="general.firstName.$error.required">{{\'Admin.Users.UserMod_Required\' | translate}}</h4>\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class="control-label" for="lastName">{{\'Admin.Users.User_Lastname\' | translate}}</label>\n                            <input class="form-control validation-control" type="text" id="lastName" name="lastName" placeholder="{{originalUser.lastName}}" ng-model="user.lastName" ng-required="!user.isFromLdap" ng-disabled="user.isFromLdap">\n                            <div class="input-help">\n                                <h4 ng-show="general.lastName.$error.required">{{\'Admin.Users.UserMod_Required\' | translate}}</h4>\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class="control-label" for="mailUser">{{\'Admin.Users.User_Mail\' | translate}}</label>\n                            <input class="form-control validation-control" type="email" id="mailUser" name="mailUser" placeholder="{{originalUser.email}}" ng-model="user.email" ng-disabled="user.isFromLdap">\n                            <div class="input-help">\n                                <h4 ng-show="general.email.$error.email">{{\'Admin.Users.User_Mail_Error\' | translate}}</h4>\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class="control-label" for="metas">{{\'Admin.Users.UserMod_Comp\' | translate}} <i class="fa fa-info-circle" tooltip="{{\'Admin.Users.UserMod_CompInfo\' | translate}}"></i></label>\n                            <input class="form-control validation-control" type="text" id="metas" name="metas" placeholder="{{originalUser.metadata}}" ng-model="user.metadata">\n                        </div>\n                    </div>\n                </form>\n            </div>\n            <div class=\'tab-pane\' id=\'motdepasse\'>\n                <form name="password">\n                    <div class="col-md-6">\n                        <div class="form-group" ng-if="originalUser.username === config.username">\n                            <label for="old">{{\'Admin.Users.UserMod_Actual_Pass\' | translate}}</label>\n                            <input class="form-control validation-control" ng-minlength="3" ng-maxlength="32" type="password" id="old" name="old" ng-model="newPass.oldOne">\n                            <div class="input-help">\n                                <span class="error" ng-show="password.password.$error.required">{{\'Admin.Users.UserMod_Required\' | translate}}</span>\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label for="password">{{\'Admin.Users.UserMod_New_Pass\' | translate}}</label>\n                            <input check-strength="{{properties[\'parapheur.ihm.password.strength\']}}"\n                                   class="form-control validation-control" type="password" id="password" name="password"\n                                   ng-model="newPass.newOne">\n                        </div>\n                        <div class="form-group">\n                            <label class="control-label" for="confirm">{{\'Admin.Users.UserMod_Confirm_Pass\' | translate}}</label>\n                            <input class="form-control validation-control" type="password" id="confirm" name="confirm" ng-model="newPass.confirm" confirm-with="newPass">\n                            <div class="input-help">\n                                <span class="error" ng-show="password.confirm.$error.confirm">{{\'Admin.Users.UserMod_Error_Confirm\' | translate}}</span>\n                                <span class="error" ng-show="password.confirm.$error.required">{{\'Admin.Users.UserMod_Required\' | translate}}</span>\n                            </div>\n                        </div>\n                        <span class="btn btn-success force-display" ng-click="changePassword()"\n                              ng-disabled="!password.$valid || newPass.confirm === \'\'">\n                            <i class="fa fa-floppy-o"></i>\n                            {{\'Admin.Users.UserMod_Save_Pass\' | translate}}\n                        </span>\n                    </div>\n                    <div strength-result="{{properties[\'parapheur.ihm.password.strength\']}}"\n                         error="password.password.$error" class="col-md-6"\n                         ng-if="password.password.$error._length != undefined">\n                    </div>\n                </form>\n\n                <div class="alert alert-success col-md-4" ng-show="respPass.success">{{\'Admin.Users.UserMod_Saved_Pass\' | translate}}</div>\n                <div class="alert alert-danger col-md-4" ng-show="respPass.error">{{\'Admin.Users.UserMod_Error_Pass\' | translate}}</div>\n                <div class="alert alert-danger col-md-4" ng-if="wrongPwd">{{\'Admin.Users.UserMod_Invalid_Pass\' | translate}}</div>\n            </div>\n\n            <div class=\'tab-pane\' id=\'notifications\'>\n                <form ng-class="{launched: !notifications.changed}">\n                    <div class="row">\n                        <div class="col-md-12">\n                            <div class="form-group">\n                                <label class="block">\n                                    {{\'Notif_Mail\' | translate}}\n                                    <i class="fa fa-info-circle"  tooltip-placement="bottom" tooltip="{{\'Notif_Helper\' | translate}}"></i>\n                                    <input type="text" class="form-control col-md-12" ng-model="notifications.mail" id="email" name="email" />\n                                </label>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="col-md-12">\n                            <h3 class="small"><strong>{{\'Notif_Freq\' | translate}}</strong></h3>\n                            <div class="form-group">\n                                <div class="col-md-12">\n                                    <div class="radio">\n                                        <label>\n                                            <input class="unvalidate" ng-change="notifications.cronDidChange()" type="radio" name="notif-radio" id="radio-never" value="never" ng-model="notifications.mode" />\n                                            {{\'Notif_None\' | translate}}\n                                        </label>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="form-group">\n                                <div class="col-md-12">\n                                    <div class="radio">\n                                        <label>\n                                            <input class="unvalidate" ng-change="notifications.cronDidChange()" type="radio" name="notif-radio" id="radio-always" value="always" ng-model="notifications.mode" />\n                                            {{\'Notif_Unit\' | translate}}\n                                        </label>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <div class="col-md-12">\n                                    <div class="radio">\n                                        <label>\n                                            <input class="unvalidate" ng-change="notifications.cronDidChange()" type="radio" name="notif-abo-radio" value="hourly" ng-model="notifications.mode">\n                                            {{\'Notif_Every\' | translate}}\n                                        </label>\n                                        <div style="width:auto; display:inline-block;">\n                                            <select class="unvalidate form-control" ng-change="notifications.cronDidChange()" ng-model="notifications.cron.hourly">\n                                                <option value="1">1</option>\n                                                <option value="2">2</option>\n                                                <option value="3">3</option>\n                                                <option value="4">4</option>\n                                                <option value="6">6</option>\n                                                <option value="12">12</option>\n                                            </select>\n                                        </div>\n                                        {{\'Notif_Hour\' | translate}}\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <div class="col-md-12">\n                                    <div class="radio">\n                                        <label>\n                                            <input class="unvalidate" ng-change="notifications.cronDidChange()" type="radio" name="notif-abo-radio" value="daily" ng-model="notifications.mode">\n                                            {{\'Notif_daily\' | translate}}\n                                        </label>\n                                        <div style="width:auto; display:inline-block;">\n                                            <select class="unvalidate form-control" ng-change="notifications.cronDidChange()" ng-model="notifications.cron.daily">\n                                                <option value="0">0h</option>\n                                                <option value="1">1h</option>\n                                                <option value="2">2h</option>\n                                                <option value="3">3h</option>\n                                                <option value="4">4h</option>\n                                                <option value="5">5h</option>\n                                                <option value="6">6h</option>\n                                                <option value="7">7h</option>\n                                                <option value="8">8h</option>\n                                                <option value="9">9h</option>\n                                                <option value="10">10h</option>\n                                                <option value="11">11h</option>\n                                                <option value="12">12h</option>\n                                                <option value="13">13h</option>\n                                                <option value="14">14h</option>\n                                                <option value="15">15h</option>\n                                                <option value="16">16h</option>\n                                                <option value="17">17h</option>\n                                                <option value="18">18h</option>\n                                                <option value="19">19h</option>\n                                                <option value="20">20h</option>\n                                                <option value="21">21h</option>\n                                                <option value="22">22h</option>\n                                                <option value="23">23h</option>\n                                            </select>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <div class="col-md-12">\n                                    <div class="radio">\n                                        <label>\n                                            <input class="unvalidate" ng-change="notifications.cronDidChange()" type="radio" name="notif-abo-radio" value="weekly" ng-model="notifications.mode">\n                                            {{\'Notif_weekly\' | translate}}\n                                        </label>\n                                        <div style="width:auto; display:inline-block;">\n                                            <select class="unvalidate form-control" ng-change="notifications.cronDidChange()" ng-model="notifications.cron.weekly">\n                                                <option value="1">{{\'Mon\' | translate}}</option>\n                                                <option value="2">{{\'Tue\' | translate}}</option>\n                                                <option value="3">{{\'Wed\' | translate}}</option>\n                                                <option value="4">{{\'Thu\' | translate}}</option>\n                                                <option value="5">{{\'Fri\' | translate}}</option>\n                                                <option value="6">{{\'Sat\' | translate}}</option>\n                                                <option value="7">{{\'Sun\' | translate}}</option>\n                                            </select>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            </div>\n\n\n\n            <div class=\'tab-pane\' id=\'certificat\'>\n                <form novalidate name="modalForm"\n                      class="form-horizontal"\n                      fileupload="{{fileUploadFormat}}"\n                      one-file="true"\n                      submit-button=".launchUpload"\n                      wrong-type="wrongType(ext)"\n                      fileinput="#fileinput"\n                      file-added="fileAdded(files)"\n                      upload-success="fileUploaded(data, index)"\n                      action="{{context + \'/base64encode\'}}"\n                      method="POST"\n                      enctype="multipart/form-data">\n                    <h2 class="underscore">{{\'Admin.Users.UserMod_Cert_Choose\' | translate}}</h2>\n\n                    <span ng-show="isEmptyOrNull(user.certificat)" class="text-info"><i class="fa fa-info-circle"></i> {{\'Admin.Users.UserMod_Cert_None\' | translate}}</span>\n\n\n                    <div ng-show="!isEmptyOrNull(user.certificat)">\n                        <div class="row">\n                            <span class="col-md-4"><strong>{{\'Admin.Users.UserMod_Cert_Emit\' | translate}}</strong></span>\n                            <span class="col-md-8">{{user.certificat.issuer_name}}</span>\n                        </div>\n                        <div class="row">\n                            <span class="col-md-4"><strong>{{\'Admin.Users.UserMod_Cert_ID\' | translate}}</strong></span>\n                            <span class="col-md-8">{{user.certificat.id}}</span>\n                        </div>\n                        <div class="row">\n                            <span class="col-md-4"><strong>{{\'Admin.Users.UserMod_Cert_CN\' | translate}}</strong></span>\n                            <span class="col-md-8">{{user.certificat.subject_name}}</span>\n                        </div>\n                        <div class="row">\n                            <span class="col-md-4"><strong>{{\'Admin.Users.UserMod_Cert_O\' | translate}}</strong></span>\n                            <span class="col-md-8">{{user.certificat.organization}}</span>\n                        </div>\n                        <div class="row">\n                            <span class="col-md-4"><strong>{{\'Admin.Users.UserMod_Cert_Contact\' | translate}}</strong></span>\n                            <span class="col-md-8">{{user.certificat.email}}</span>\n                        </div>\n                        <div class="row">\n                            <span class="col-md-4"><strong>{{\'Admin.Users.UserMod_Cert_Serial\' | translate}}</strong></span>\n                            <span class="col-md-8">{{user.certificat.title}}</span>\n                        </div>\n                        <div class="row">\n                            <span class="col-md-4"><strong>{{\'Admin.Users.UserMod_Cert_Begin\' | translate}}</strong></span>\n                            <span class="col-md-8">{{user.certificat.certificate_valid_from}}</span>\n                        </div>\n                        <div class="row">\n                            <span class="col-md-4"><strong>{{\'Admin.Users.UserMod_Cert_End\' | translate}}</strong></span>\n                            <span class="col-md-8">{{user.certificat.certificate_valid_to}}</span>\n                        </div>\n\n\n                        <a ng-if="!user.certificat.content\n                        " class="row btn btn-default" ng-href="{{context}}/proxy/alfresco/api/node/content%3bph%3acertificat/workspace/SpacesStore/{{user.id}}/{{user.certificat.subject_name}}.p12">\n                            <i class="fa fa-floppy-o"></i>\n                            {{\'Admin.Users.UserMod_Cert_Download\' | translate}}\n                        </a>\n                        <!--http://localhost/alfresco/d/d/workspace/SpacesStore/f1e32fd9-16ee-40d3-b872-781b439b7a87/f1e32fd9-16ee-40d3-b872-781b439b7a87?property=%7bhttp%3a%2f%2fwww.atolcd.com%2falfresco%2fmodel%2fparapheur%2f1.0%7dcertificat\n                            -->\n                    </div>\n\n                    <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->\n                    <div class="row fileupload-buttonbar">\n                        <!-- The fileinput-button span is used to style the file input field as button -->\n                        <span class="btn btn-default fileinput-button force-display">\n                            <i class="fa fa-folder-open-o"></i>\n                            <span>{{\'Browse\' | translate}}</span>\n                            <input id="certificateFileinput" type="file" name="file" />\n                        </span>\n                        <span class="btn btn-danger" ng-click="deleteCertificat()" ng-show="!isEmptyOrNull(user.certificat)" >\n                            <i class="fa fa-trash-o"></i>\n                            {{\'Admin.Users.UserMod_Cert_Save\' | translate}}\n                        </span>\n                    </div>\n                    <div ng-show="typeError" class="row alert alert-danger">{{\'Admin.Users.UserMod_Cert_File\' | translate}}</div>\n                    <div ng-show="certificateUsedBy !== undefined" class="row alert alert-warning">{{certificateUsedBy}}&nbsp;{{\'Admin.Users.UserMod_Cert_Used\' | translate}}</div>\n\n\n                </form>\n            </div>\n\n\n\n            <div class=\'tab-pane\' id=\'signature\'>\n\n                <form novalidate name="modalForm"\n                      class="form-horizontal"\n                      fileupload="{{fileUploadFormat}}"\n                      one-file="true"\n                      submit-button=".launchUpload"\n                      wrong-type="wrongType(ext)"\n                      fileinput="#fileinput"\n                      file-added="fileAdded(files)"\n                      upload-success="fileUploaded(data, index)"\n                      action="{{context + \'/base64encode\'}}"\n                      method="POST"\n                      enctype="multipart/form-data">\n\n                    <h2 class="underscore">{{\'Admin.Users.UserMod_Sig_Choose\' | translate}}</h2>\n                    <img ng-show="!isEmptyOrNull(user.signatureData)" class="signatureImg" ng-cloak ng-src="data:image/{{signatureFormat}};base64,{{user.signatureData}}" />\n                    <img ng-if="isEmptyOrNull(user.signatureData) && !isEmptyOrNull(user.signature)" class="signatureImg" ng-cloak ng-src="{{context}}/proxy/alfresco/api/node/workspace/SpacesStore/{{user.signature}}/content?v={{date}}" />\n                    <span ng-show="isEmptyOrNull(user.signatureData) && isEmptyOrNull(user.signature)" class="text-info"><i class="fa fa-info-circle"></i> {{\'Admin.Users.UserMod_Sig_NoScan\' | translate}}</span>\n\n                    <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->\n                    <div class="fileupload-buttonbar">\n                        <!-- The fileinput-button span is used to style the file input field as button -->\n                        <span class="btn btn-default fileinput-button force-display">\n                            <i class="fa fa-folder-open-o"></i>\n                            <span>{{\'Browse\' | translate}}</span>\n                            <input id="fileinput" type="file" name="file" />\n                        </span>\n                    </div>\n                    <span class="btn btn-danger" ng-click="deleteSignature()" ng-show="(user.signature !== undefined && user.signature !== \'\') || (user.signatureData !== undefined)" >\n                        <i class="fa fa-trash-o"></i>\n                        {{\'Admin.Users.UserMod_Sig_Delete\' | translate}}\n                    </span>\n                    <div ng-show="typeError" class="alert alert-danger">{{\'Admin.Users.UserMod_Sig_Err2\' | translate}}</div>\n\n                </form>\n            </div>\n\n\n\n            <div class=\'tab-pane\' id=\'droits\'>\n                <div class="col-md-12">\n                    <div class="radio-inline">\n                        <label>\n                            <input type="radio" ng-model="user.admin" value="admin" class="unvalidate"/>\n                            {{\'Admin.Users.UserMod_Rights_Admin\' | translate}}\n                        </label>\n                    </div>\n                    <div class="radio-inline">\n                        <label>\n                            <input type="radio" ng-model="user.admin" value="adminFonctionnel" class="unvalidate"/>\n                            {{\'Admin.Users.UserMod_Rights_Fonc\' | translate}}\n                        </label>\n                    </div>\n                    <div class="radio-inline">\n                        <label>\n                            <input type="radio" ng-model="user.admin" value="aucun" class="unvalidate"/>\n                            {{\'Admin.Users.UserMod_Rights_None\' | translate}}\n                        </label>\n                    </div>\n                </div>\n                <div class="col-md-12">\n                    <div ng-show="user.admin==\'adminFonctionnel\'" >\n                        <span class="text-info">\n                            <i class="fa fa-info-circle"></i>\n                            Les droits d\'administration fonctionnelle sont attribués par bureau\n                        </span>\n                        <div class="well row">\n                            <div class="col-md-6">\n                                <div>\n                                    <h3>\n                                        Bureaux disponibles\n                                    </h3>\n                                    <div class="input-group">\n                                        <span class="input-group-addon"><i class="fa fa-search fa-fw"></i></span>\n                                        <input placeholder="{{\'Search\' | translate}}" ng-model="searchBureauSuperieur" ng-change="listHandler.search(searchBureauSuperieur)" class="form-control unvalidate" type="text">\n                                    </div>\n                                    <div style="height:15px;" ng-if="listHandler.total > 0 && listHandler.maxSize < listHandler.total">\n                                        <span class="text-warning float-right">\n                                            {{listHandler.page*listHandler.maxSize +1}}-{{(listHandler.page+1)*listHandler.maxSize < listHandler.total ? (listHandler.page+1)*listHandler.maxSize : listHandler.total}} {{\'On\' | translate}} {{listHandler.total}}\n                                            <span class="btn btn-default fa fa-chevron-left force-display" ng-disabled="listHandler.page === 0" ng-click="listHandler.pagine(-1)"></span>\n                                            <span class="btn btn-default fa fa-chevron-right force-display" ng-disabled="listHandler.page+1 >= (listHandler.total/listHandler.maxSize)" ng-click="listHandler.pagine(1)"></span>\n                                        </span>\n                                    </div>\n                                </div>\n\n                                <span class="text-info" ng-if="listHandler.total === 0"><i class="fa fa-info-circle"></i> {{\'Admin.Users.User_None\' | translate}}</span>\n                                <ul class="list-unstyled nav nav-pills nav-stacked adminContent list-data">\n                                    <li ng-repeat="bureau in listHandler.subListAdminFonctionnel" ng-switch on="user.bureauxAdministres.indexOf(bureau.id)">\n                                        <a ng-click="listHandler.selectForAdminFonctionnel(bureau)" ng-switch-when="-1">\n                                            <i class="fa fa-plus-circle text-success"></i> {{bureau.name}}\n                                        </a>\n                                        <a class="disabled" ng-switch-default>\n                                            {{bureau.name}}\n                                        </a>\n                                    </li>\n                                </ul>\n                            </div>\n                            <div class="col-md-6">\n                                <h3>{{\'Admin.Users.UserMod_Right_Selected\' | translate}}</h3>\n                                <span ng-if="user.bureauxAdministres.length === 0" class="text-info"><i class="fa fa-info-circle"></i> Aucun bureau</span>\n                                <ul class="list-unstyled pointer">\n                                    <li class="hover-li" ng-click="listHandler.unselectForAdminFonctionnel(bureau.id)" ng-repeat="bureau in (bureaux | sameId:user.bureauxAdministres)"><i class="text-danger fa fa-times-circle"></i> {{bureau.name}}</li>\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n                    <div ng-if="orderedBureaux.length === 0 && user.admin==\'adminFonctionnel\'">\n                        <p class="text-info"><i class="fa fa-warning"></i> {{\'Admin.Users.UserMod_Right_Selected_None\' | translate}}</p>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\'tab-pane\' id=\'bureaux\'>\n                <div class="row">\n                    <table ng-show="user.bureaux.length > 0" ng-table="tableParams" class="table table-striped">\n                        <tr ng-repeat="bureau in $data">\n                            <td data-title="\'Admin.Users.UserMod_Bur_Title\' | translate" sortable="\'title\'">\n                                {{bureau.title}}\n                            </td>\n                            <td class="text-success" data-title="\'Admin.Users.UserMod_Bur_Prop\' | translate" sortable="\'isProprietaire\'">\n                                <span ng-if="bureau.isProprietaire" class="text-success fa fa-check fa-2x"></span>\n                            </td>\n                            <td class="text-info" data-title="\'Admin.Users.UserMod_Bur_Sec\' | translate" sortable="\'isSecretaire\'">\n                                <span ng-if="bureau.isSecretaire" class="text-warning fa fa-check fa-2x"></span>\n                            </td>\n                            <td data-title="\'Admin.Users.UserMod_Bur_Actions\' | translate">\n                                <button class="btn btn-danger helper-inline-block" type="button" ng-click="removeFromBureau(bureau)">\n                                    <i class="fa fa-unlink"></i>\n                                    {{\'Admin.Users.UserMod_Bur_Remove\' | translate}}\n                                </button>\n                                <div ng-show="bureauSuppressError" class="alert alert-error">{{\'Admin.Users.UserMod_Bur_Error\' | translate}}</div>\n                            </td>\n                        </tr>\n                    </table>\n                    <div ng-if="!user.bureaux.length" class="text-info"><i class="fa fa-info-circle"></i> {{\'Admin.Users.UserMod_Bur_None\' | translate}}</div>\n                    <span ng-if="user.bureaux.length" class="text-info"><i class="fa fa-warning"></i> {{\'Admin.Users.UserMod_Bur_Warning\' | translate}}</span>\n                </div>\n            </div>\n\n            <div class=\'tab-pane\' id=\'groups\'>\n                <div class="row">\n                    <p ng-if="user.groups.length > 0" class="text-info">\n                        <i class="fa fa-info-circle"></i> {{\'Admin.Users.UserMod_Gr_Actual\' | translate}} :\n                    </p>\n                    <ul>\n                        <li ng-repeat="group in user.groups">\n                            <i ng-if="!(user.username.split(\'@\')[0] === \'admin\' && group === \'ALFRESCO_ADMINISTRATORS\')" ng-click="removeFromGroup(group)" class="fa fa-unlink text-danger pointer" tooltip-trigger="mouseenter" tooltip="{{\'Admin.Users.UserMod_Gr_Remove\' | translate}}"></i>\n                            {{group}}\n                        </li>\n                    </ul>\n                    <div ng-if="!user.groups.length" class="text-info"><i class="fa fa-info-circle"></i> {{\'Admin.Users.UserMod_Gr_None\' | translate}}</div>\n                </div>\n            </div>\n        </div>\n\n</div>\n\n<div class="modal-footer">\n    <button class="btn btn-warning" ng-click="cancel()">\n        <i class="fa fa-times-circle-o"></i>\n        {{\'Back\' | translate}}\n    </button>\n    <button class="btn btn-primary" ng-click="ok()" ng-disabled="general.$invalid">\n        <i class="fa fa-floppy-o"></i>\n        {{\'Save\' | translate}}\n    </button>\n</div>\n');
}]),angular.module("partials/modals/validationModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/modals/validationModal.html",'<div class="modal-header">\n    <h3>{{titleModal }}</h3>\n</div>\n<div class="modal-body row">\n    <form novalidate name="modalForm" class="row form-horizontal">\n        <div class="row" ng-if="!!bureau.associes">\n            <label class="legendLabel">\n                {{\'validationModal.destination\' | translate}}\n                <hr>\n            </label>\n            <div class="col-md-8">\n                <div class="input-group" ng-show="bureau.associes.length !== 0">\n                    <div class="right-inner-addon">\n                        <i class="fa fa-question-circle" tooltip-trigger="click" tooltip-placement="bottom"\n                           tooltip="{{\'validationModal.type_your_search_tooltip\' | translate}}"></i>\n                        <input id="bureau" type="text" class="form-control unvalidate" ng-model="view.bureauCible"\n                               placeholder="{{\'validationModal.search_by_title_name_or_user\' | translate}}"\n                               typeahead="assoc as assoc.title for assoc in bureau.associes | filter:$viewValue | limitTo:8"\n                               name="bureau" required="required">\n                    </div>\n\n                    <span class="input-group-addon" style="opacity: 0.7;"\n                          ng-class="!!view.bureauCible.id ? \'label-success\' : \'label-warning\'">\n                        {{!!view.bureauCible.id ? (\'validationModal.selected_folder\' | translate) : (\'validationModal.no_folder_selected\' | translate)}}\n                    </span>\n                </div>\n                <div style="font-size:14px;" ng-if="bureau.associes.length === 0">\n                    <span class="text-danger"><i class="fa fa-warning"></i> {{\'validationModal.you_can_t_move_this_folder_in_any_desk\' | translate}}</span>\n                </div>\n\n            </div>\n            <div class="col-md-4">\n                <div class="checkbox">\n                    <label class="ng-binding" for="notifme">\n                        <input class="unvalidate" id="notifme" ng-model="action.notifMe"\n                               name="notifme" type="checkbox">\n                        {{\'validationModal.please_notify_me_when_validated\' | translate}}\n                    </label>\n                </div>\n            </div>\n        </div>\n        <div class="row">\n            <div class="col-md-6">\n                <label class="legendLabel col-xs-12">\n                    {{\'validationModal.public_annotation\' | translate}}\n                    <hr>\n                    <div>\n                        <textarea class="form-control annotation" ng-change="giveCommentToApplet()"\n                                  ng-model="action.annotPub" ng-disabled="liberSignLoading"></textarea>\n                        <i class="fa fa-3x fa-globe textarea-icon"></i>\n                    </div>\n\n                </label>\n                <label class="legendLabel col-xs-12">\n                    {{\'validationModal.private_annotation\' | translate}}\n                    <hr>\n                    <div>\n                        <textarea class="form-control annotationprivee" ng-model="action.annotPriv"\n                                  ng-disabled="liberSignLoading">\n                        </textarea>\n                        <i class="fa fa-3x fa-user-secret textarea-icon"></i>\n                    </div>\n\n                </label>\n\n                <label class="legendLabel col-xs-12" ng-if="metaToDefine.length > 0">\n                    Métadonnée(s) obligatoire sur l\'étape\n                    <hr>\n                </label>\n                <div ng-if="metaToDefine.length > 0" class="col-md-9 col-md-offset-1">\n                    <div ng-switch on="metaInfo.type" class="control-group"\n                         ng-repeat="(metaName, metaInfo) in metaInfos">\n                        <div class="form-group mandatory-group"\n                             ng-switch-when="DATE" ng-hide="metaInfo.values">\n                            <label class="control-label" for="{{metaInfo.id}}">{{metaInfo.name}}</label>\n                            <span class="fa fa-warning label label-danger"> {{\'Mandatory\' | translate}}</span>\n\n                            <div class="input-group">\n                                <input id="{{\'date\' + $index}}" name="{{\'date\' + $index}}" ng-change="metaChanged()" ng-cloak="" ip-id="\'date\' + $index"\n                                       return-format="timestamp" readonly="true" ip-datepicker type="text"\n                                       ng-model="metaValues[metaInfo.id]" class="form-control"\n                                       required="">\n                                <span ng-if="!!metaValues[metaInfo.id]" ng-click="metaValues[metaInfo.id] = \'\'"\n                                      class="pointer input-group-addon">\n                                    <i class="fa fa-times"></i>\n                                </span>\n                                <label for="{{\'date\' + $index}}" ng-if="!metaValues[metaInfo.id]" class="pointer input-group-addon">\n                                    <i class="fa fa-calendar"></i>\n                                </label>\n                            </div>\n                        </div>\n                        <div class="form-group mandatory-group"\n                             ng-switch-when="STRING" ng-hide="metaInfo.values">\n                            <label class="control-label" for="{{metaInfo.id}}">{{metaInfo.name}}</label>\n                            <span class="fa fa-warning label label-danger"> {{\'Mandatory\' | translate}}</span>\n                            <input ng-cloak type="text" ng-change="metaChanged()" id="{{metaInfo.id}}"\n                                   ng-model="metaValues[metaInfo.id]"\n                                   class="form-control"\n                                   required="">\n                        </div>\n                        <div class="form-group mandatory-group"\n                             ng-switch-when="URL" ng-hide="metaInfo.values">\n                            <label class="control-label" for="{{metaInfo.id}}">{{metaInfo.name}}</label>\n                            <span class="fa fa-warning label label-danger"> {{\'Mandatory\' | translate}}</span>\n                            <input ng-cloak type="text" ng-change="metaChanged()" id="{{metaInfo.id}}"\n                                   ng-model="metaValues[metaInfo.id]"\n                                   class="form-control"\n                                   required="">\n                        </div>\n                        <div class="form-group mandatory-group"\n                             ng-switch-when="INTEGER" ng-hide="metaInfo.values">\n                            <label class="control-label" for="{{metaInfo.id}}">{{metaInfo.name}}</label>\n                            <span class="fa fa-warning label label-danger"> {{\'Mandatory\' | translate}}</span>\n                            <span class="label label-info">\n                                                                <i class="fa-info-circle fa"></i>\n                                                                {{\'Admin.Typologie.Ty_Sub_Meta_Int\'\n                                                                | translate}}\n                                                            </span>\n                            <input type="text" integer ng-change="metaChanged()" id="{{metaInfo.id}}"\n                                   ng-model="metaValues[metaInfo.id]"\n                                   class="form-control"\n                                   required="">\n                        </div>\n                        <div class="form-group mandatory-group"\n                             ng-switch-when="DOUBLE" ng-hide="metaInfo.values">\n                            <label class="control-label" for="{{metaInfo.id}}">{{metaInfo.name}}</label>\n                            <span class="fa fa-warning label label-danger"> {{\'Mandatory\' | translate}}</span>\n                            <span class="label label-info">\n                                                                <i class="fa-info-circle fa"></i>\n                                                                {{\'Admin.Typologie.Ty_Sub_Meta_Double\'\n                                                                | translate}}\n                                                            </span>\n                            <input type="text" decimal ng-change="metaChanged()" id="{{metaInfo.id}}"\n                                   ng-model="metaValues[metaInfo.id]"\n                                   class="form-control"\n                                   required="">\n                        </div>\n                        <div class="form-group mandatory-group"\n                             ng-switch-when="BOOLEAN">\n                            <label class="control-label" for="{{metaInfo.id}}">{{metaInfo.name}}</label>\n                            <span class="fa fa-warning label label-danger"> {{\'Mandatory\' | translate}}</span>\n                            <select id="{{metaInfo.id}}" ng-change="metaChanged()"\n                                    ng-model="metaValues[metaInfo.id]"\n                                    class="form-control" required="">\n                                <option value="true">Oui</option>\n                                <option value="false">Non</option>\n                            </select>\n                        </div>\n                        <div class="form-group" ng-show="metaInfo.values">\n                            <label class="control-label" for="{{metaInfo.id}}">{{metaInfo.name}}</label>\n                            <span class="fa fa-warning label label-danger float-right"> {{\'Mandatory\' | translate}}</span>\n                            <select id="{{metaInfo.id}}" ng-change="metaChanged()"\n                                    ng-options="value.value as value.value for value in metaInfo.values"\n                                    ng-change="valuesMetaUndefined(metaInfo.id)"\n                                    ng-model="metaValues[metaInfo.id]"\n                                    class="form-control"\n                                    required="">\n                            </select>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="col-md-6">\n                <div class="col-xs-12">\n                    <span class="legend">{{\'validationModal.folder_list\' | translate}}<hr></span>\n                    <ul class="listeDossiers">\n                        <li ng-repeat="dossier in dossiers" class="btn btn-default col-md-12 force-display"><span\n                                class="label label-info">{{dossier.actionDemandee}}</span>{{dossier.title}}\n                        </li>\n                    </ul>\n                </div>\n                <div class="col-xs-12" ng-show="dossiers[0].steps.length > 1 && metaToDefine.length == 0">\n                    <span class="legend">{{\'validationModal.consecutive_steps\' | translate}}<hr></span>\n                    <label>\n                        <input type="checkbox" class="checkbox-inline" ng-model="action.consecutiveSteps">\n                        {{\'validationModal.validate_every_consecutive_step\' | translate}}\n                    </label>\n                    <ul>\n                        <li ng-repeat="step in dossiers[0].steps">\n                            <i class="fa fa-fw fa-lg fa-check-square-o"></i>\n                            {{step.titulaire}}\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n\n<div class="modal-footer">\n    <progressbar\n            class="progress-striped active"\n            value="progress" max="max" type="info">\n        <span ng-show="!signLoaded && hasSignature" style="color:black; white-space:nowrap;">{{\'validationModal.retrieving_signature_informations\' | translate}} : {{progress}} / {{max}}</span>\n        <span ng-show="signLoaded || !hasSignature" style="color:black; white-space:nowrap;">{{\'validationModal.handled_folders\' | translate}} : {{progress}} / {{max}}</span>\n    </progressbar>\n\n    <span ng-show="errorMessage" class="text-danger"><i class="fa fa-warning"></i> {{errorMessage}}</span>\n\n    <div ng-if="hasSignature && signLoaded" libersign success="ok()" cancel="cancel()" signatures="signatures"\n         signature-informations="signObj" ready="readyToSign" loaded="loaded()">\n    </div>\n\n    <div ng-if="!hasSignature">\n        <button ng-disabled="spin" class="btn btn-warning" ng-click="cancel()">\n            <i class="fa fa-times-circle-o"></i>\n            {{\'Back\' | translate}}\n        </button>\n        <button ng-disabled="spin || !modalForm.$valid" class="btn btn-primary"\n                ng-click="ok()">\n            <i ng-class="primaryIcon ? primaryIcon : \'fa-check\'" class="fa"></i>\n            {{primaryLabel ? primaryLabel : (\'Confirm\' | translate)}}\n        </button>\n    </div>\n\n</div>\n')}]),angular.module("partials/passwordStrength.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("partials/passwordStrength.html","<p>Le nouveau mot de passe doit :</p>\n<ul>\n    <li ng-class=\"error._length ? 'text-danger' : 'text-success'\">\n        <i class=\"fa\" ng-class=\"error._length ? 'fa-times' : 'fa-check'\"></i>\n        Faire au moins {{minLength}} caractères\n    </li>\n</ul>\n<p>Et contenir au moins :</p>\n<ul>\n    <li ng-if=\"error._lowerletters != undefined\" ng-class=\"error._lowerletters ? 'text-danger' : 'text-success'\">\n        <i class=\"fa\" ng-class=\"error._lowerletters ? 'fa-times' : 'fa-check'\"></i>\n        une lettre minuscule\n    </li>\n    <li ng-if=\"error._upperletters != undefined\" ng-class=\"error._upperletters ? 'text-danger' : 'text-success'\">\n        <i class=\"fa\" ng-class=\"error._upperletters ? 'fa-times' : 'fa-check'\"></i>\n        une lettre majuscule\n    </li>\n    <li ng-if=\"error._numbers != undefined\" ng-class=\"error._numbers ? 'text-danger' : 'text-success'\">\n        <i class=\"fa\" ng-class=\"error._numbers ? 'fa-times' : 'fa-check'\"></i>\n        un chiffre\n    </li>\n    <li ng-if=\"error._symbols != undefined\" ng-class=\"error._symbols ? 'text-danger' : 'text-success'\">\n        <i class=\"fa\" ng-class=\"error._symbols ? 'fa-times' : 'fa-check'\"></i>\n        un caractère spécial\n    </li>\n</ul>")}]),angular.module("templates/about.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/about.html",'<div class="container about">\n    <div class="page-header">\n        <h1>{{\'About.About\' | translate}}</h1>\n        <a class="btn btn-default float-right manual-download" target="_blank"\n           href="{{properties[\'parapheur.ihm.aide.utilisateur.url\']}}">\n            <i class="fa fa-download fa-lg"></i> {{properties[\'parapheur.ihm.aide.utilisateur.text\']}}\n        </a>\n    </div>\n    <div class="col-md-12">\n        <div class="col-md-6">\n            <div class="col-md-12">\n                <h4 class="page-header">Informations du poste</h4>\n                <p>\n                    <strong>Navigateur: </strong>\n                    <span ng-repeat="v in navigator">{{v}} </span>\n                </p>\n\n                <p>\n                    <strong>Signature électronique : </strong>\n\n                    <span class="text-success" ng-if="client.signature.isCompatible"><i\n                            class="fa fa-check"></i> <strong>Compatible</strong><br/></span>\n                    <span class="text-danger" ng-if="!client.signature.isCompatible"><i\n                            class="fa fa-warning"></i> <strong>Non compatible</strong><br/></span>\n\n                </p>\n                <p>\n                    <span ng-if="client.signature.extension">\n                        <strong>Extension : </strong>\n                        <span ng-if="client.signature.version" class="text-success fa fa-check"><br/></span>\n                        <span ng-if="client.signature.version"\n                              class="text-info">Version {{client.signature.version}}</span>\n                        <span ng-if="client.signature.error === \'no_implementation\'" class="text-warning">\n                            <i class="fa fa-warning"></i> <strong>Application LiberSign non installée</strong><br/>\n                        </span>\n                    </span>\n                    <span ng-if="client.signature.canExtension && !client.signature.extension">\n                        <strong>Extension : </strong>\n                        <span class="text-warning"><i class="fa fa-warning"></i> <strong>Non installée</strong><br/></span>\n                    </span>\n                    <div ng-if="client.signature.canExtension">\n                <p class="text-info"><i class="fa fa-info-circle"></i> Afin de rendre votre navigateur compatible avec\n                    la signature électronique, merci de suivre l\'aide d\'installation.</p>\n                        <span class="btn btn-info"\n                              ng-click="launchHelpModal()">\n                            <i class="fa fa-question"></i>\n                            Aide d\'installation\n                        </span>\n            </div>\n\n\n            <span ng-if="client.signature.error && client.signature.error !== \'no_implementation\'" class="text-danger"><br/><i class="fa fa-warning"></i> Problème de communication avec LiberSign : {{client.signature.error}}</span>\n                </p>\n                <p ng-if="client.signature.canJava && !client.signature.extension">\n                    <strong>Java :</strong>\n                    <span ng-if="client.java.enabled" class="text-success fa fa-check"><br/></span>\n                    <span ng-if="!client.java.enabled" class="text-danger"><i class="fa fa-times"></i> Non installé<br/></span>\n                    <span ng-if="client.java.enabled" class="text-info">Version : {{client.java.version}}</span>\n                </p>\n            </div>\n            <div class="col-md-12">\n                <h4 class="page-header">{{\'About.LicenceTitle\' | translate}}</h4>\n                <div class="col-md-12">\n                    <div>{{\'About.Agplpart1.1\' | translate}} <a target="_blank"\n                                                                href="//www.gnu.org/licenses/agpl-3.0.html">{{\'About.Agplpart1.link\'\n                        | translate}}</a> {{\'About.Agplpart1.2\' | translate}}\n                    </div>\n                    <br/>\n                    <div>{{\'About.Agplpart2.1\' | translate}} <a target="_blank"\n                                                                href="//www.gnu.org/licenses/agpl-3.0.html">{{\'About.Agplpart2.link\'\n                        | translate}}</a> {{\'About.Agplpart2.2\' | translate}}\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="col-md-6">\n            <h4 class="page-header">I-Parapheur Web - Version {{\'About.Version\' | translate}} - <a target="_blank"\n                                                                                                   href="//adullact.net/projects/iparapheur-web/">Forge</a>\n            </h4>\n\n            <p ng-bind-html="\'About.Copyright\' | translate"></p>\n            <div class="col-md-12">\n                <p ng-bind-html="\'About.ReleaseNote4600\' | translate"></p>\n                <p ng-bind-html="\'About.ReleaseNote4500\' | translate"></p>\n                <p ng-bind-html="\'About.ReleaseNote4400\' | translate"></p>\n                <p ng-bind-html="\'About.ReleaseNote4300\' | translate"></p>\n                <p ng-bind-html="\'About.ReleaseNote4200\' | translate"></p>\n                <p ng-bind-html="\'About.ReleaseNote4101\' | translate"></p>\n                <p ng-bind-html="\'About.ReleaseNote41\' | translate"></p>\n                <p ng-bind-html="\'About.ReleaseNote40\' | translate"></p>\n            </div>\n        </div>\n    </div>')}]),angular.module("templates/admin/avance.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/admin/avance.html",'<div class="row-fluid">\n    <div class="menuAdmin col-md-3 label label-info headertop" removeonsize="992" classes-list="label label-info" ng-include src="\'partials/adminNavbar.html\'"></div>\n    <div class="col-md-3 adminContent">\n        <div class="col-md-11 col-md-offset-1">\n            <h1 class="underscore">{{\'Admin.Avance.title\' | translate}}</h1>\n            <div class="bs-sidebar " role="complementary">\n                <ul class="nav bs-sidenav">\n                    <li>\n                        <span class="titleList">{{\'Admin.Avance.config_tdt\' | translate}}</span>\n                        <a bs-tab ng-if="properties[\'parapheur.admin.s2low.actes.show\'] == \'true\'" href="#slowactes" ng-click="slowActes.init()" data-toggle="tab">{{\'Admin.Avance.actes\' | translate}}</a>\n                    </li>\n                    <li>\n                        <a bs-tab ng-if="properties[\'parapheur.admin.s2low.helios.show\'] == \'true\'" href="#slowhelios" ng-click="slowHelios.init()" data-toggle="tab">{{\'Admin.Avance.helios\' | translate}}</a>\n                    </li>\n                    <li>\n                        <a bs-tab ng-if="properties[\'parapheur.admin.s2low.mailsec.show\'] == \'true\'" href="#slowmailsec" ng-click="slowMailsec.init()" data-toggle="tab">{{\'Admin.Avance.mailsec\' | translate}}</a>\n                    </li>\n                    <li>\n                        <a bs-tab ng-if="properties[\'parapheur.admin.pastell.mailsec.show\'] == \'true\'" href="#pastellmailsec" ng-click="pastellMailsec.init()" data-toggle="tab">{{\'Admin.Avance.mailsec_pastell\' | translate}}</a>\n                    </li>\n                    <li>\n                        <a bs-tab ng-if="properties[\'parapheur.admin.fast.show\'] == \'true\'" href="#fasthelios" ng-click="fastHelios.init()" data-toggle="tab">{{\'Admin.Avance.fast\' | translate}}</a>\n                    </li>\n                    <li>\n                        <a bs-tab ng-if="properties[\'parapheur.admin.srci.show\'] == \'true\'" href="#srcihelios" ng-click="srciHelios.init()" data-toggle="tab">{{\'Admin.Avance.srci\' | translate}}</a>\n                    </li>\n                    <li>\n                        <span class="titleList">{{\'Admin.Avance.advanced_config\' | translate}}</span>\n                        <a bs-tab href="#model" ng-click="modeles.init()" data-toggle="tab">{{\'Admin.Avance.models\' | translate}}</a>\n                    </li>\n                    <li>\n                        <a bs-tab href="#metadonne" ng-click="meta.init()" data-toggle="tab">{{\'Admin.Avance.metadata\' | translate}}</a>\n                    </li>\n                    <li>\n                        <a bs-tab href="#calque" ng-click="calques.init()" data-toggle="tab">{{\'Admin.Avance.calque\' | translate}}</a>\n                    </li>\n                    <li>\n                        <a bs-tab href="#cachet" ng-click="cachet.init()" data-toggle="tab">{{\'Admin.Avance.cachet\' | translate}}</a>\n                    </li>\n                    <li>\n                        <span\n                                ng-if="\n                                properties[\'parapheur.ihm.attest.show\'] == \'true\' ||\n                                properties[\'parapheur.admin.horodate.show\'] == \'true\' ||\n                                properties[\'parapheur.admin.mailservice.show\'] == \'true\' ||\n                                properties[\'parapheur.admin.archiland.show\'] == \'true\'"\n                                class="titleList">{{\'Admin.Avance.other_config\' | translate}}</span>\n                        <a ng-if="properties[\'parapheur.ihm.attest.show\'] == \'true\'" bs-tab href="#attestation" ng-click="attestation.init()" data-toggle="tab">{{\'Admin.Avance.attestation\' | translate}}</a>\n                    </li>\n                    <li>\n                        <a bs-tab ng-if="properties[\'parapheur.admin.horodate.show\'] == \'true\'" href="#horodatage" ng-click="horodate.init()" data-toggle="tab">{{\'Admin.Avance.horodate\' | translate}}</a>\n                    </li>\n                    <li>\n                        <a bs-tab ng-if="properties[\'parapheur.admin.mailservice.show\'] == \'true\'" href="#mail" ng-click="mail.init()" data-toggle="tab">{{\'Admin.Avance.mail_service\' | translate}}</a>\n                    </li>\n                    <li>\n                        <a bs-tab ng-if="properties[\'parapheur.admin.archiland.show\'] == \'true\'" href="#archiland" ng-click="archiland.init()" data-toggle="tab">{{\'Admin.Avance.archiland\' | translate}}</a>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n    <div class="tab-content">\n        <div class="tab-pane" id="slowactes">\n            <div class="include-animate" ng-include="\'templates/admin/avance/slowactes.html\'"></div>\n        </div>\n        <div class="tab-pane" id="slowhelios">\n            <div class="include-animate" ng-include="\'templates/admin/avance/slowhelios.html\'"></div>\n        </div>\n        <div class="tab-pane" id="slowmailsec">\n            <div class="include-animate" ng-include="\'templates/admin/avance/slowmailsec.html\'"></div>\n        </div>\n        <div class="tab-pane" id="fasthelios">\n            <div class="include-animate" ng-include="\'templates/admin/avance/fasthelios.html\'"></div>\n        </div>\n        <div class="tab-pane" id="srcihelios">\n            <div class="include-animate" ng-include="\'templates/admin/avance/srcihelios.html\'"></div>\n        </div>\n\n        <div class="tab-pane" id="model">\n            <div class="include-animate editor" ng-include="\'templates/admin/avance/model.html\'"></div>\n        </div>\n        <div class="tab-pane" id="attestation">\n            <div class="include-animate" ng-include="\'templates/admin/avance/attestation.html\'"></div>\n        </div>\n        <div class="tab-pane" id="horodatage">\n            <div class="include-animate" ng-include="\'templates/admin/avance/horodatage.html\'"></div>\n        </div>\n        <div class="tab-pane" id="mail">\n            <div class="include-animate" ng-include="\'templates/admin/avance/mail.html\'"></div>\n        </div>\n        <div class="tab-pane" id="archiland">\n            <div class="include-animate" ng-include="\'templates/admin/avance/archiland.html\'"></div>\n        </div>\n        <div class="tab-pane" id="metadonne">\n            <div class="include-animate" ng-include="\'templates/admin/avance/metadonne.html\'"></div>\n        </div>\n        <div class="tab-pane" id="calque">\n            <div class="include-animate" ng-include="\'templates/admin/avance/calque.html\'"></div>\n        </div>\n        <div class="tab-pane" id="cachet">\n            <div class="include-animate" ng-include="\'templates/admin/avance/cachet.html\'"></div>\n        </div>\n        <div class="tab-pane" id="pastellmailsec">\n            <div class="include-animate" ng-include="\'templates/admin/avance/pastellmailsec.html\'"></div>\n        </div>\n    </div>\n\n</div>')}]),angular.module("templates/admin/avance/archiland.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/admin/avance/archiland.html",'<div>\n    <div style="top:100px;" class="nextDossierInfo" ng-if="!archiland.isInit">\n                <span class="text text-info">\n                    {{\'Admin.Avance.getting_infos\' | translate}}\n                </span>\n        <span style="position: relative; width: 0px; z-index: 2000000000; right: 140px; top: 100px;" us-spinner="{radius:20, width:8, length: 16}" ></span>\n    </div>\n    <div class="col-md-12" ng-if="archiland.isInit">\n        <div class="row">\n            <div class="col-md-12">\n                <h3>{{\'Admin.Avance.Archiland.title\' | translate}}</h3>\n            </div>\n        </div>\n        <div class="row">\n            <form class="form-horizontal">\n                <div class="col-md-12">\n\n                    <div class="row">\n                        <div class="form-group col-md-4">\n                            <div>\n                                <div class="radio">\n                                    <label for="connecteurActivArchi">\n                                        <input class="unvalidate" id="connecteurActivArchi" ng-model="archiland.config.enabled" type="radio" value="true" name="connecteurStateArchi">{{\'Admin.Avance.Archiland.enable\' | translate}}\n                                    </label>\n                                </div>\n                                <div class="radio">\n                                    <label for="connecteurDesactivArchi">\n                                        <input class="unvalidate" id="connecteurDesactivArchi" ng-model="archiland.config.enabled" type="radio" value="false" name="connecteurStateArchi">{{\'Admin.Avance.Archiland.disable\' | translate}}\n                                    </label>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <label class="control-label col-sm-3" for="idArchi">{{\'Admin.Avance.Archiland.id\' | translate}}</label>\n                        <div class="col-sm-9">\n                            <input type="text" class="form-control unvalidate" id="idArchi" name="idArchi" ng-model="archiland.config.user">\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <label class="control-label col-sm-3" for="passwordArchi">{{\'Admin.Avance.Archiland.passwd\' | translate}}</label>\n                        <div class="col-sm-9">\n                            <input type="text" class="form-control unvalidate" id="passwordArchi" name="passwordArchi" ng-model="archiland.config.password">\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <label class="control-label col-sm-3" for="serverArchi">{{\'Admin.Avance.Archiland.msg_server\' | translate}}</label>\n                        <div class="col-sm-9">\n                            <input type="text" class="form-control unvalidate" id="serverArchi" name="serverArchi" ng-model="archiland.config.host">\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <label class="control-label col-sm-3" for="portArchi">{{\'Admin.Avance.Archiland.server_port\' | translate}}</label>\n                        <div class="col-sm-9">\n                            <input type="text" class="form-control unvalidate" id="portArchi" name="portArchi" ng-model="archiland.config.port">\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <label class="control-label col-sm-3" for="sirenArchi">{{\'Admin.Avance.Archiland.siren\' | translate}}</label>\n                        <div class="col-sm-9">\n                            <input type="text" class="form-control unvalidate" id="sirenArchi" name="sirenArchi" ng-model="archiland.config.collectivite">\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <label class="control-label col-sm-3" for="serviceArchi">{{\'Admin.Avance.Archiland.services\' | translate}}</label>\n                        <div class="col-sm-9">\n                            <textarea class="form-control unvalidate" id="serviceArchi" name="serviceArchi" ng-model="archiland.config.services">\n                            </textarea>\n                        </div>\n                    </div>\n\n                </div>\n                <div class="col-md-12">\n                    <input type="button" ng-click="archiland.set()" class="btn btn-success force-display" value="{{\'Admin.Avance.Archiland.save\' | translate}}">\n                </div>\n            </form>\n        </div>\n    </div>\n</div>');
}]),angular.module("templates/admin/avance/attestation.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/admin/avance/attestation.html",'<div>\n    <div style="top:100px;" class="nextDossierInfo" ng-if="!attestation.isInit">\n                <span class="text text-info">\n                    {{\'Admin.Avance.getting_infos\' | translate}}\n                </span>\n        <span style="position: relative; width: 0px; z-index: 2000000000; right: 140px; top: 100px;" us-spinner="{radius:20, width:8, length: 16}" ></span>\n    </div>\n    <div class="col-md-12" ng-if="attestation.isInit">\n        <div class="row">\n            <div class="col-md-12">\n                <h3>{{\'Admin.Avance.Attestation.title\' | translate}}</h3>\n            </div>\n        </div>\n        <div class="row">\n            <form class="form-horizontal">\n                <div class="col-md-12">\n\n                    <div class="row">\n                        <div class="form-group col-md-4">\n                            <div>\n                                <div class="radio">\n                                    <label for="connecteurActivAttest">\n                                        <input class="unvalidate" id="connecteurActivAttest"\n                                               ng-model="attestation.config.enabled" type="radio" value="true"\n                                               name="connecteurStateAttest">{{\'Admin.Avance.Archiland.enable\' |\n                                        translate}}\n                                    </label>\n                                </div>\n                                <div class="radio">\n                                    <label for="connecteurDesactivAttest">\n                                        <input class="unvalidate" id="connecteurDesactivAttest"\n                                               ng-model="attestation.config.enabled" type="radio" value="false"\n                                               name="connecteurStateAttest">{{\'Admin.Avance.Archiland.disable\' |\n                                        translate}}\n                                    </label>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <label class="control-label col-sm-3" for="serverAttestation">{{\'Admin.Avance.Attestation.server_name\' | translate}}</label>\n                        <div class="col-sm-9">\n                            <input type="text" class="form-control unvalidate" id="serverAttestation" name="serverAttestation" ng-model="attestation.config.host">\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label class="control-label col-sm-3" for="portAttestation">{{\'Admin.Avance.Attestation.server_port\' | translate}}</label>\n                        <div class="col-sm-9">\n                            <input type="text" class="form-control unvalidate" id="portAttestation" name="portAttestation" ng-model="attestation.config.port">\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <label class="control-label col-sm-3" for="userAttestation">{{\'Admin.Avance.Attestation.username\' | translate}}</label>\n                        <div class="col-sm-9">\n                            <input type="text" class="form-control unvalidate" id="userAttestation" name="userAttestation" ng-model="attestation.config.username">\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <label class="control-label col-sm-3" for="passAttestation">{{\'Admin.Avance.Attestation.password\' | translate}}</label>\n                        <div class="col-sm-9">\n                            <input type="text" class="form-control unvalidate" id="passAttestation" name="passAttestation" ng-model="attestation.config.password">\n                        </div>\n                    </div>\n\n\n                </div>\n                <div class="col-md-12">\n                    <input type="button" ng-click="attestation.set()" class="btn btn-success force-display" value="{{\'Admin.Avance.Attestation.save_config\' | translate}}">\n                    <span ng-if="attestation.isSaved" class="text text-success"><i class="fa fa-check"></i>{{\'Admin.Avance.Attestation.saved\' | translate}}</span>\n                </div>\n\n            </form>\n        </div>\n    </div>\n</div>')}]),angular.module("templates/admin/avance/cachet.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/admin/avance/cachet.html",'<div>\n    <div style="top:100px;" class="nextDossierInfo" ng-if="!cachet.isInit">\n        <span class="text text-info">\n            {{\'Admin.Avance.getting_infos\' | translate}}\n        </span>\n        <span style="position: relative; width: 0px; z-index: 2000000000; right: 140px; top: 100px;"\n              us-spinner="{radius:20, width:8, length: 16}"></span>\n    </div>\n    <div class="col-md-12" ng-if="cachet.isInit">\n        <div class="row">\n            <div class="col-md-12">\n                <h3>{{\'Admin.Avance.Cachet.title\' | translate}}</h3>\n            </div>\n        </div>\n        <div class="row">\n            <div class="row">\n                <div class="col-md-4">\n                    <label for="mailForWarn">{{\'Mail(s) de notification\' | translate}}</label>\n                    <div class="input-group">\n                        <input id="mailForWarn" type="text" class="form-control unvalidate"\n                               ng-model="cachet.mailForWarn" ng-change="cachet.mailForWarnStatus = 0" name="mailForWarn">\n                        <span class="input-group-btn">\n                            <span class="btn btn-default disabled" ng-if="cachet.mailForWarnStatus == 1">\n                                En cours...\n                            </span>\n                            <span class="btn btn-success disabled" ng-if="cachet.mailForWarnStatus == 2">\n                                Sauvegardé\n                            </span>\n                            <a ng-if="cachet.mailForWarnStatus == 0" ng-click="cachet.saveMailForWarn()" class="btn btn-primary">\n                                <i class="fa fa-save"></i>\n                                Enregistrer\n                            </a>\n                        </span>\n                    </div>\n                </div>\n            </div>\n\n            <div class="col-md-3">\n\n                <hr/>\n                <span ng-click="cachet.create()" class="btn btn-success"><i class="fa fa-plus-circle"></i> {{\'Admin.Avance.Cachet.create\' | translate}}</span>\n                <ul class="list-unstyled nav nav-pills nav-stacked adminContent list-data">\n                    <li ng-repeat="cert in cachet.list" ng-class="cachet.current.id == cert.id ? \'active\' : \'\'">\n                        <a ng-click="cachet.select(cert)">\n                            {{cert.title}}\n                            <br>\n                            <span class="text right"\n                                  ng-class="cachet.current.id == cert.id ? \'text-inverse\' : \'text-warning\'">\n                                Expiration :\n                                <span ng-class="cachet.current.id == cert.id ? \'text-inverse\' : cert.description.notAfter < cachet.timestamp ? \'text-danger \' : \'text-success\'">\n                                    {{cert.description.notAfter | date}}\n                                </span>\n                                <span ng-class="cachet.current.id == cert.id ? \'text-inverse\' : \'text-danger\'" ng-if="cert.description.notAfter < cachet.timestamp">\n                                    <br/>\n                                    <i class="fa fa-warning"></i>\n                                    EXPIRÉ\n                                    <i class="fa fa-warning"></i>\n                                </span>\n                            </span>\n                            <i ng-click="cachet.remove(cert)"\n                               ng-class="cachet.current.id == cert.id ? \'text-inverse\' : \'text-danger\'"\n                               tooltip="Supprimer"\n                               class="fa fa-trash-o icon-right pointer"></i>\n                        </a>\n                    </li>\n                </ul>\n                <span ng-if="cachet.list.length == 0" class="text text-info">\n                    <i class="fa fa-info-circle"></i>\n                    Aucun certificat présent\n                </span>\n            </div>\n            <div class="col-md-9">\n                <div class="col-md-12" ng-if="cachet.current">\n                    <form one-file="true" fileupload="certificat"\n                          file-added="cachet.fileAdded(files)"\n                          fileinput="#fileinput"\n                          novalidate="novalidate" name="certificate" class="form-horizontal"\n                          >\n                        <div class="col-md-6">\n                            <h4 ng-if="cachet.current.isNew">Ajout d\'un nouveau certificat</h4>\n                            <h4 ng-if="!cachet.current.isNew">Modification du certificat</h4>\n\n\n                            <div class="form-group mandatory-group">\n                                <label for="titleCert">{{\'Name\' | translate}}</label>\n                                <span ng-if="cachet.current.isNew" class="label label-danger"><i class="fa fa-warning"></i> {{\'Mandatory\' | translate}}</span>\n                                <span ng-if="cachet.current.isNew" class="label label-info"><i class="fa fa-info-circle"></i> Min : 2</span>\n                                <input id="titleCert" type="text" class="form-control unvalidate" ng-minlength="2"\n                                       ng-model="cachet.current.title" name="titleCert"\n                                       required ng-disabled="!cachet.current.isNew">\n                            </div>\n                            <div class="mandatory-group form-group">\n                                <label for="certFile" style="margin-right:0;">{{\'Certificat (format p12)\' | translate}}</label>\n                                <span ng-if="cachet.current.editing" class="label label-danger"><i class="fa fa-warning"></i> {{\'Mandatory\' | translate}}</span>\n                                <div class="fileinput-button" style="float: none;">\n                                    <div class="input-group">\n                                        <span class="input-group-btn">\n                                            <span class="btn btn-default force-display" ng-disabled="!cachet.current.editing">\n                                                <i class="fa fa-folder-open-o"></i>\n                                                {{\'Browse\' | translate}}\n                                            </span>\n                                        </span>\n                                        <input type="text" name="certFile" id="certFile" class="form-control"\n                                               ng-model="cachet.current.originalName"\n                                               placeholder="Sélectionner le certificat" readonly\n                                               ng-style="cachet.current.editing ? {\'background-color\': \'#fff\'} : {}" >\n                                    </div>\n\n                                    <input id="fileinput" type="file" name="file" accept=".p12"\n                                           title="&nbsp;"\n                                           required="required"  ng-disabled="!cachet.current.editing">\n                                </div>\n                                <span ng-if="cachet.wrongExt" class="label label-danger"><i class="fa fa-warning"></i> {{\'Type de fichier attentu: p12\' | translate}}</span>\n                            </div>\n                            <div class="form-group mandatory-group">\n                                <label for="passCert">{{\'Options.Password\' | translate}}</label>\n                                <span ng-if="cachet.current.editing" class="label label-danger"><i class="fa fa-warning"></i> {{\'Mandatory\' | translate}}</span>\n                                <input id="passCert" type="password" class="form-control unvalidate"\n                                       ng-model="cachet.current.password" name="passCert"\n                                       ng-change="cachet.stopTyping($event)"\n                                       required ng-disabled="!cachet.current.editing" placeholder="{{cachet.current.isNew ? \'\' : \'**********\'}}">\n                            </div>\n                            <div class="mandatory-group form-group">\n                                <label for="imageFile">{{\'Image\' | translate}}</label>\n                                <div class="fileinput-button" style="float: none;">\n                                    <div class="input-group">\n                                        <span class="input-group-btn">\n                                            <span class="btn btn-default force-display" ng-disabled="!cachet.current.editing">\n                                                <i class="fa fa-folder-open-o"></i>\n                                                {{\'Browse\' | translate}}\n                                            </span>\n                                        </span>\n                                        <input type="text" name="imageFile" id="imageFile" class="form-control"\n                                               ng-model="cachet.current.imageName" placeholder="Sélectionner l\'image"\n                                               readonly ng-style="cachet.current.editing ? {\'background-color\': \'#fff\'} : {}">\n                                        <span class="input-group-btn" title="Supprimer l\'image actuelle" style="z-index:1;">\n                                            <span  class="btn btn-danger force-display" ng-disabled="!cachet.current.editing"\n                                                  ng-if="cachet.current.image && cachet.current.editing"\n                                                  ng-click="cachet.current.image = \'\'; cachet.current.imageName = \'\';">\n                                                <i class="fa fa-trash"></i>\n                                            </span>\n                                        </span>\n                                    </div>\n                                    <input id="imageFileinput" type="file" name="file" accept="image/*"\n                                           title="&nbsp;"\n                                           onchange="angular.element(this).scope().cachet.fileNameChanged(this)"\n                                           required="required" ng-disabled="!cachet.current.editing">\n                                </div>\n                                <span ng-if="cachet.wrongExt" class="label label-danger"><i class="fa fa-warning"></i> {{\'Type de fichier attentu: p12\' | translate}}</span>\n                            </div>\n                            <div class="col-md-12">\n                                <button ng-if="cachet.current.editing && !cachet.current.isNew" class="btn btn-warning force-display"\n                                        ng-click="cachet.cancel()">\n                                    <i class="fa fa-times-circle-o"></i>\n                                    {{\'Back\' | translate}}\n                                </button>\n                                <button ng-if="cachet.current.editing" class="btn btn-primary force-display" ng-disabled="!cachet.current.description"\n                                        ng-click="cachet.save()">\n                                    <i class="fa fa-save"></i>\n                                    Enregistrer\n                                </button>\n                                <button ng-if="!cachet.current.editing" class="btn btn-info force-display"\n                                        ng-click="cachet.modify()">\n                                    <i class="fa fa-pencil"></i>\n                                    Modifier le certificat\n                                </button>\n                            </div>\n\n                        </div>\n                    </form>\n                    <div class="col-md-6">\n                        <h4>Informations supplémentaires</h4>\n                        <div ng-if="cachet.current.loadChange">\n                            <span style="position: relative; width: 0px; z-index: 2000000000; right: -50%; top: 100px;"\n                                  us-spinner="{radius:20, width:8, length: 16}"></span>\n                        </div>\n                        <div ng-if="!cachet.current.loadChange && !cachet.errorCode">\n                            <div ng-if="cachet.current.description">\n                                <ul class="list-unstyled">\n                                    <li>\n                                        <b>Alias : </b>{{cachet.current.description.alias}}\n                                    </li>\n                                    <li>\n                                        <b>Date d\'expiration : </b>{{cachet.current.description.notAfter | date}}\n                                    </li>\n                                    <li>\n                                        <b>Autorité : </b>\n                                        <ul>\n                                            <li ng-repeat="info in cachet.current.description.issuerDN.split(\',\')">\n                                                {{info}}\n                                            </li>\n                                        </ul>\n                                    </li>\n                                    <li>\n                                        <b>Sujet : </b>\n                                        <ul>\n                                            <li ng-repeat="info in cachet.current.description.subjectDN.split(\',\')">\n                                                {{info}}\n                                            </li>\n                                        </ul>\n                                    </li>\n                                </ul>\n                            </div>\n                            <div ng-if="!cachet.current.description" class="text text-info">\n                                <i class="fa fa-info-circle"></i>\n                                Merci de définir un certificat ainsi que son mot de passe.\n                            </div>\n                        </div>\n                        <div ng-if="cachet.errorCode" ng-switch="cachet.errorCode">\n                            <div ng-switch-when="403" class="text text-danger">\n                                <i class="fa fa-warning"></i>\n                                Le mot de passe du certificate est invalide !\n                            </div>\n                            <div ng-switch-when="400" class="text text-danger">\n                                <i class="fa fa-warning"></i>\n                                Le format du certificat est invalide !\n                            </div>\n                            <div ng-switch-when="409" class="text text-danger">\n                                <i class="fa fa-warning"></i>\n                                Un certificat du même nom existe déjà !\n                            </div>\n                        </div>\n\n                        <div style="position: relative;">\n                            <img ng-if="cachet.current.image"\n                                 style="width:100%; max-width:200px;"\n                                 ng-src="data:image/png;base64,{{cachet.current.image}}"/>\n                            <span ng-if="!cachet.current.image" class="text text-info">\n                                    <i class="fa fa-info-circle"></i>\n                                    Aucune image sélectionnée\n                                </span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n')}]),angular.module("templates/admin/avance/calque.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/admin/avance/calque.html",'<div>\n    <script type="text/ng-template" id="popover_commentaire">\n        <textarea class="form-control unvalidate" ng-model="calques.currentSub.texte"></textarea>\n    </script>\n\n    <div style="top:100px;" class="nextDossierInfo" ng-if="!calques.isInit">\n                    <span class="text text-info">\n                        {{\'Admin.Avance.getting_infos\' | translate}}\n                    </span>\n        <span style="position: relative; width: 0px; z-index: 2000000000; right: 140px; top: 100px;"\n              us-spinner="{radius:20, width:8, length: 16}"></span>\n    </div>\n    <div class="col-md-12" ng-if="calques.isInit">\n        <div class="row">\n            <div class="col-md-3">\n                <h3>{{\'Admin.Avance.Calque.title\' | translate}}</h3>\n                <span ng-click="calques.create()" class="btn btn-success"><i class="fa fa-plus"></i> {{\'Admin.Avance.Calque.create\' | translate}}</span>\n                <ul class="list-unstyled nav nav-pills nav-stacked adminContent list-data">\n                    <li ng-repeat="calque in calques.list | orderBy:\'name\':false"\n                        ng-class="calques.current.id == calque.id ? \'active\' : \'\'">\n                        <a ng-click="calques.select(calque)">\n                            {{calque.name}}\n                            <i ng-click="calques.remove(calque)"\n                               ng-class="calques.current.id == calque.id ? \'text-inverse\' : \'text-danger\'"\n                               tooltip="Supprimer" class="fa fa-trash-o icon-right pointer"></i>\n                        </a>\n                    </li>\n                </ul>\n            </div>\n            <div class="col-md-9">\n                <div class="row" ng-if="!empty(calques.current)">\n                    <div class="col-md-12">\n                        <div class="row">\n                            <div class="col-md-6">\n                                <h4>{{\'Admin.Avance.Calque.edit\' | translate}} {{calques.current.name}}</h4>\n                                <a class="btn btn-success"\n                                   href="{{context + \'/proxy/alfresco/parapheur/calques/\' + calques.current.id + \'/preview\'}}"\n                                   target="_blank"><i class="fa fa-eye"></i> {{\'Admin.Avance.Calque.preview\' |\n                                    translate}}</a>\n                            </div>\n                            <div class="col-md-6">\n                                <img style="float:right;" ng-src="{{context + \'/res/images/a4.jpg\'}}">\n                                <div>\n                                    <div class="text-info"><i class="fa fa-info-circle"></i>\n                                        {{\'Admin.Avance.Calque.rank_info\' | translate}}\n                                    </div>\n                                    <div class="text-info"><i class="fa fa-info-circle"></i>\n                                        {{\'Admin.Avance.Calque.page_info\' | translate}}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <ul class="nav nav-tabs">\n                        <li class="active"><a href="#signatures" bs-tab><i class="fa ls-signature"></i>\n                            {{\'Admin.Avance.Calque.signatures\' | translate}} <span class="badge">{{calques.current.signature.length}}</span></a>\n                        </li>\n                        <li><a href="#images" bs-tab><i class="fa fa-picture-o"></i> {{\'Admin.Avance.Calque.images\' |\n                            translate}} <span class="badge">{{calques.current.image.length}}</span></a></li>\n                        <li><a href="#commentaires" bs-tab><i class="fa fa-comments-o"></i> {{\'Admin.Avance.Calque.comments\' |\n                            translate}} <span class="badge">{{calques.current.commentaire.length}}</span></a></li>\n                        <li><a href="#metadatas" bs-tab><i class="fa fa-code"></i> {{\'Admin.Avance.Calque.metadatas\' |\n                            translate}} <span class="badge">{{calques.current.metadata.length}}</span></a></li>\n                    </ul>\n\n\n                    <div class="tab-content">\n                        <div class=\'tab-pane\' ng-class="\'active\'" id=\'signatures\'>\n                            <div class="col-md-12">\n                                <h5>{{\'Admin.Avance.Calque.signatures\' | translate}}</h5>\n                                <span class="btn btn-success"\n                                      ng-click="calques.newSub(\'signature\')">\n                                    <i class="fa fa-plus"></i>\n                                    Ajouter une signature\n                                </span>\n                                <form name="signature">\n                                    <span ng-if="!(calques.current.signature.length > 0 || (!empty(calques.currentSub) && calques.currentSub.type === \'signature\'))">{{\'Admin.Avance.Calque.sig_none\' | translate}}</span>\n                                    <table ng-if="calques.current.signature.length > 0 || (!empty(calques.currentSub) && calques.currentSub.type === \'signature\')"\n                                           class="table table-striped">\n                                        <thead>\n                                        <tr>\n                                            <th>{{\'Admin.Avance.Calque.rank\' | translate}}</th>\n                                            <th>{{\'Admin.Avance.Calque.x_coord\' | translate}}</th>\n                                            <th>{{\'Admin.Avance.Calque.y_coord\' | translate}}</th>\n                                            <th>{{\'Admin.Avance.Calque.page\' | translate}}</th>\n                                            <th>{{\'Admin.Avance.Calque.after_sig\' | translate}}</th>\n                                            <th>{{\'Admin.Avance.Calque.action\' | translate}}</th>\n                                        </tr>\n                                        </thead>\n                                        <tbody>\n                                        <tr ng-repeat="signature in calques.current.signature">\n                                            <td>{{signature.rang}}</td>\n                                            <td>{{signature.coordonneeX}}</td>\n                                            <td>{{signature.coordonneeY}}</td>\n                                            <td>{{signature.page}}</td>\n                                            <td><input type="checkbox" disabled class="checkbox unvalidate"\n                                                       ng-model="signature.postSignature"></td>\n                                            <td>\n                                                    <span ng-click="calques.deleteSub(signature, \'signature\')"\n                                                          class="btn btn-danger force-display" title="Supprimer">\n                                                        <i class="fa fa-trash-o"></i>\n                                                    </span>\n                                            </td>\n                                        </tr>\n                                        <tr ng-if="!empty(calques.currentSub) && calques.currentSub.type === \'signature\'">\n                                            <td><input class="form-control unvalidate"\n                                                       ng-model="calques.currentSub.rang" required="required"></td>\n                                            <td><input class="form-control unvalidate"\n                                                       ng-model="calques.currentSub.coordonneeX" required="required">\n                                            </td>\n                                            <td><input class="form-control unvalidate"\n                                                       ng-model="calques.currentSub.coordonneeY" required="required">\n                                            </td>\n                                            <td><input class="form-control unvalidate"\n                                                       ng-model="calques.currentSub.page" required="required"></td>\n                                            <td><input type="checkbox" class="unvalidate"\n                                                       ng-model="calques.currentSub.postSignature"></td>\n                                            <td>\n                                                    <span ng-click="calques.saveSub(\'signature\')"\n                                                          class="btn btn-info force-display"\n                                                          ng-disabled="!signature.$valid" title="Enregistrer">\n                                                        <i class="fa fa-save"></i>\n                                                    </span>\n                                            </td>\n                                        </tr>\n                                        </tbody>\n                                    </table>\n                                </form>\n                            </div>\n                        </div>\n\n\n                        <div class=\'tab-pane\' id=\'images\'>\n                            <div class="col-md-12">\n                                <h5>{{\'Admin.Avance.Calque.images\' | translate}}</h5>\n                                <span class="btn btn-success"\n                                      ng-click="calques.newSub(\'image\')">\n                                    <i class="fa fa-plus"></i>\n                                    Ajouter une image\n                                </span>\n                                <form submit-button=".launchUploadImage" one-file="true" fileupload="image"\n                                      file-added="calques.fileAdded(files)" wrong-type="calques.wrongType(ext)"\n                                      fileinput="#fileinputImg" upload-success="calques.fileEncoded(data)"\n                                      action="{{context + \'/base64encode\'}}" method="POST" enctype="multipart/form-data"\n                                      novalidate="novalidate" name="images">\n                                    <span ng-if="!(calques.current.image.length > 0 || (!empty(calques.currentSub) && calques.currentSub.type === \'image\'))">{{\'Admin.Avance.Calque.img_none\' | translate}}</span>\n                                    <table ng-show="calques.current.image.length > 0 || (!empty(calques.currentSub) && calques.currentSub.type === \'image\')"\n                                           class="table table-striped">\n                                        <thead>\n                                        <tr>\n                                            <th>{{\'Admin.Avance.Calque.image\' | translate}}</th>\n                                            <th>{{\'Admin.Avance.Calque.x_coord\' | translate}}</th>\n                                            <th>{{\'Admin.Avance.Calque.y_coord\' | translate}}</th>\n                                            <th>{{\'Admin.Avance.Calque.page\' | translate}}</th>\n                                            <th>{{\'Admin.Avance.Calque.after_sig\' | translate}}</th>\n                                            <th>{{\'Admin.Avance.Calque.action\' | translate}}</th>\n                                        </tr>\n                                        </thead>\n                                        <tbody>\n                                        <tr ng-repeat="image in calques.current.image">\n                                            <td>{{image.nomImage}}</td>\n                                            <td>{{image.coordonneeX}}</td>\n                                            <td>{{image.coordonneeY}}</td>\n                                            <td>{{image.page}}</td>\n                                            <td><input type="checkbox" disabled class="checkbox unvalidate"\n                                                       ng-model="image.postSignature"></td>\n                                            <td>\n                                                <span ng-click="calques.deleteSub(image, \'image\')"\n                                                      class="btn btn-danger force-display" title="Supprimer">\n                                                    <i class="fa fa-trash-o"></i>\n                                                </span>\n                                            </td>\n                                        </tr>\n                                        <tr ng-show="!empty(calques.currentSub) && calques.currentSub.type === \'image\'">\n                                            <td>\n                                                <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->\n                                                <div class="fileupload-buttonbar form-group" style="margin-bottom:0;">\n                                                    <!-- The fileinput-button span is used to style the file input field as button -->\n                                                    <div>\n                                                        <div>\n                                                            <span style="display:block !important;"\n                                                                  class="btn btn-default fileinput-button">\n                                                                <i class="fa fa-folder-open-o"></i>\n                                                                <span>{{\'Browse\' | translate}}</span>\n                                                                <input id="fileinputImg" type="file" name="file"\n                                                                       required="required">\n                                                            </span>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <div>\n                                                    {{calques.currentSub.nomImage}}\n                                                </div>\n\n                                            </td>\n                                            <td><input class="form-control unvalidate"\n                                                       ng-model="calques.currentSub.coordonneeX" required="required">\n                                            </td>\n                                            <td><input class="form-control unvalidate"\n                                                       ng-model="calques.currentSub.coordonneeY" required="required">\n                                            </td>\n                                            <td><input class="form-control unvalidate"\n                                                       ng-model="calques.currentSub.page" required="required"></td>\n                                            <td><input type="checkbox" class="unvalidate"\n                                                       ng-model="calques.currentSub.postSignature"></td>\n                                            <td>\n                                                <span class="btn btn-info force-display launchUploadImage"\n                                                      ng-disabled="!images.$valid || !calques.currentSub.nomImage" title="Enregistrer">\n                                                    <i class="fa fa-save"></i>\n                                                </span>\n                                            </td>\n                                        </tr>\n                                        </tbody>\n                                    </table>\n                                </form>\n                            </div>\n                        </div>\n\n\n                        <div class=\'tab-pane\' id=\'commentaires\'>\n                            <div class="col-md-12">\n                                <h5>{{\'Admin.Avance.Calque.comments\' | translate}}</h5>\n                                <span class="btn btn-success"\n                                        ng-click="calques.newSub(\'commentaire\')">\n                                    <i class="fa fa-plus"></i>\n                                    Ajouter un commentaire\n                                </span>\n                                <form name="commentaires">\n                                    <span ng-if="!(calques.current.commentaire.length > 0 || (!empty(calques.currentSub) && calques.currentSub.type === \'commentaire\'))">{{\'Admin.Avance.Calque.comment_none\' | translate}}</span>\n                                    <table ng-if="calques.current.commentaire.length > 0 || (!empty(calques.currentSub) && calques.currentSub.type === \'commentaire\')"\n                                           class="table table-striped">\n                                        <thead>\n                                        <tr>\n                                            <th>{{\'Admin.Avance.Calque.txt\' | translate}}</th>\n                                            <th>{{\'Admin.Avance.Calque.font_size\' | translate}}</th>\n                                            <th>{{\'Admin.Avance.Calque.txt_color\' | translate}}</th>\n                                            <th>{{\'Admin.Avance.Calque.x_coord\' | translate}}</th>\n                                            <th>{{\'Admin.Avance.Calque.y_coord\' | translate}}</th>\n                                            <th>{{\'Admin.Avance.Calque.page\' | translate}}</th>\n                                            <th>{{\'Admin.Avance.Calque.after_sig\' | translate}}</th>\n                                            <th>{{\'Admin.Avance.Calque.action\' | translate}}</th>\n                                        </tr>\n                                        </thead>\n                                        <tbody>\n                                        <tr ng-repeat="comm in calques.current.commentaire">\n                                            <td>{{comm.texte}}</td>\n                                            <td>{{comm.taillePolice}}</td>\n                                            <td>{{comm.couleurTexte}}</td>\n                                            <td>{{comm.coordonneeX}}</td>\n                                            <td>{{comm.coordonneeY}}</td>\n                                            <td>{{comm.page}}</td>\n                                            <td><input type="checkbox" disabled class="checkbox unvalidate"\n                                                       ng-model="comm.postSignature"></td>\n                                            <td>\n                                                <span ng-click="calques.deleteSub(comm, \'commentaire\')"\n                                                      class="btn btn-danger force-display" title="Supprimer">\n                                                    <i class="fa fa-trash-o"></i>\n                                                </span>\n                                            </td>\n                                        </tr>\n                                        <tr ng-if="!empty(calques.currentSub) && calques.currentSub.type === \'commentaire\'">\n                                            <td style="position: relative;">\n                                                <i ng-if="calques.editComment"\n                                                   class="fa fa-save text-primary pointer fa-2x"\n                                                   ng-click="calques.editComment = false"\n                                                   style="position:absolute; bottom:10px; right:25px;"\n                                                   tooltip=" {{\'Save\' | translate}}"></i>\n                                                <textarea focus-me="{{calques.editComment}}"\n                                                          ng-show="calques.editComment"\n                                                          class="form-control unvalidate"\n                                                          ng-model="calques.currentSub.texte"\n                                                          style="min-height:150px;min-width:150px;"></textarea>\n                                                <span ng-if="!calques.editComment"\n                                                      tooltip=" {{\'Admin.Avance.Calque.define_comment\' | translate}}"\n                                                      ng-click="calques.editComment = true">\n                                                    <span class="text-info pointer">\n                                                        <i class="fa fa-pencil"></i>\n                                                        <span ng-if="!calques.currentSub.texte">{{\'Admin.Avance.Calque.define_comment\' | translate}}</span>\n                                                    </span>\n                                                    {{calques.currentSub.texte}}\n                                                </span>\n                                            </td>\n                                            <td><input class="form-control unvalidate"\n                                                       ng-model="calques.currentSub.taillePolice" required></td>\n                                            <td>\n                                                <select class="form-control unvalidate"\n                                                        ng-model="calques.currentSub.couleurTexte" required>\n                                                    <option value="noir">{{\'Admin.Avance.Calque.black\' | translate}}\n                                                    </option>\n                                                    <option value="rouge">{{\'Admin.Avance.Calque.red\' | translate}}\n                                                    </option>\n                                                </select>\n                                            </td>\n                                            <td><input class="form-control unvalidate"\n                                                       ng-model="calques.currentSub.coordonneeX" required></td>\n                                            <td><input class="form-control unvalidate"\n                                                       ng-model="calques.currentSub.coordonneeY" required></td>\n                                            <td><input class="form-control unvalidate"\n                                                       ng-model="calques.currentSub.page" required></td>\n                                            <td><input type="checkbox" class="unvalidate"\n                                                       ng-model="calques.currentSub.postSignature"></td>\n                                            <td>\n                                                <span ng-click="calques.saveSub(\'commentaire\')"\n                                                      class="btn btn-info force-display"\n                                                      ng-disabled="!commentaires.$valid" title="Enregistrer">\n                                                    <i class="fa fa-save"></i>\n                                                </span>\n                                            </td>\n                                        </tr>\n                                        </tbody>\n                                    </table>\n                                </form>\n                            </div>\n                        </div>\n\n\n                        <div class=\'tab-pane\' id=\'metadatas\'>\n                            <div class="col-md-12">\n                                <h5>{{\'Admin.Avance.Calque.metadatas\' | translate}}</h5>\n                                <span class="btn btn-success"\n                                      ng-click="calques.newSub(\'metadata\')">\n                                    <i class="fa fa-plus"></i>\n                                    Ajouter une metadonnée\n                                </span>\n                                <form name="metadonnees">\n                                    <span ng-if="!(calques.current.metadata.length > 0 || (!empty(calques.currentSub) && calques.currentSub.type === \'metadata\'))">{{\'Admin.Avance.Calque.metadata_none\' | translate}}</span>\n                                    <table ng-if="calques.current.metadata.length > 0 || (!empty(calques.currentSub) && calques.currentSub.type === \'metadata\')"\n                                           class="table table-striped">\n                                        <thead>\n                                        <tr>\n                                            <th>{{\'Admin.Avance.Calque.metadata\' | translate}}</th>\n                                            <th>{{\'Admin.Avance.Calque.font_size\' | translate}}</th>\n                                            <th>{{\'Admin.Avance.Calque.x_coord\' | translate}}</th>\n                                            <th>{{\'Admin.Avance.Calque.y_coord\' | translate}}</th>\n                                            <th>{{\'Admin.Avance.Calque.page\' | translate}}</th>\n                                            <th>{{\'Admin.Avance.Calque.after_sig\' | translate}}</th>\n                                            <th>{{\'Admin.Avance.Calque.action\' | translate}}</th>\n                                        </tr>\n                                        </thead>\n                                        <tbody>\n                                        <tr ng-repeat="meta in calques.current.metadata">\n                                            <td>{{calques.selectOptions[meta.qnameMD]}}</td>\n                                            <td>{{meta.taillePolice}}</td>\n                                            <td>{{meta.coordonneeX}}</td>\n                                            <td>{{meta.coordonneeY}}</td>\n                                            <td>{{meta.page}}</td>\n                                            <td><input type="checkbox" disabled class="checkbox unvalidate"\n                                                       ng-model="meta.postSignature"></td>\n                                            <td>\n                                                <span ng-click="calques.deleteSub(meta, \'metadata\')"\n                                                      class="btn btn-danger force-display" title="Supprimer">\n                                                    <i class="fa fa-trash-o"></i>\n                                                </span>\n                                            </td>\n                                        </tr>\n                                        <tr ng-if="!empty(calques.currentSub) && calques.currentSub.type === \'metadata\'">\n                                            <td>\n                                                <select class="form-control unvalidate"\n                                                        ng-model="calques.currentSub.qnameMD" required="required"\n                                                        ng-options="opt.id as opt.value for opt in calques.selectOptions | orderObjectById">\n\n                                                </select>\n                                            </td>\n                                            <td><input class="form-control unvalidate"\n                                                       ng-model="calques.currentSub.taillePolice" required="required"\n                                                       type="number" min="1" step="0.5"></td>\n                                            <td><input class="form-control unvalidate"\n                                                       ng-model="calques.currentSub.coordonneeX" required="required">\n                                            </td>\n                                            <td><input class="form-control unvalidate"\n                                                       ng-model="calques.currentSub.coordonneeY" required="required">\n                                            </td>\n                                            <td><input class="form-control unvalidate"\n                                                       ng-model="calques.currentSub.page" required="required"></td>\n                                            <td><input type="checkbox" class="unvalidate"\n                                                       ng-model="calques.currentSub.postSignature"></td>\n                                            <td>\n                                                <span ng-click="calques.saveSub(\'metadata\')"\n                                                      class="btn btn-info force-display"\n                                                      ng-disabled="!metadonnees.$valid" title="Enregistrer">\n                                                    <i class="fa fa-save"></i>\n                                                </span>\n                                            </td>\n                                        </tr>\n                                        </tbody>\n                                    </table>\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n');
}]),angular.module("templates/admin/avance/fasthelios.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/admin/avance/fasthelios.html",'<div>\n    <div style="top:100px;" class="nextDossierInfo" ng-if="!fastHelios.isInit">\n                <span class="text text-info">\n                    {{\'Admin.Avance.getting_infos\' | translate}}\n                </span>\n        <span style="position: relative; width: 0; z-index: 2000000000; right: 140px; top: 100px;" us-spinner="{radius:20, width:8, length: 16}" ></span>\n    </div>\n    <div class="col-md-12" ng-if="fastHelios.isInit">\n    <div class="row">\n        <div class="col-md-12">\n            <h3>{{\'Admin.Avance.Fast.title\' | translate}}</h3>\n        </div>\n    </div>\n    <div class="row">\n        <form submit-button=".launchUploadFast" one-file="true" fileupload="certificat" file-added="fastHelios.certAdded(files)" wrong-type="fastHelios.wrongType(ext)" fileinput="#fileinput" upload-success="fastHelios.fileEncoded(data, index)" action="{{context + \'/base64encode\'}}" method="POST" enctype="multipart/form-data" novalidate name="modalForm" class="form-horizontal">\n            <div class="col-md-12">\n                <div class="row">\n                    <div class="form-group col-md-4">\n                        <div>\n                            <div class="radio">\n                                <label for="connecteurActivFast">\n                                    <input class="unvalidate" id="connecteurActivFast" ng-model="fastHelios.config.active" type="radio" value="true" name="connecteurStateFast">{{\'Admin.Avance.Fast.enable\' | translate}}\n                                </label>\n                            </div>\n                            <div class="radio">\n                                <label for="connecteurDesactivFast">\n                                    <input class="unvalidate" id="connecteurDesactivFast" ng-model="fastHelios.config.active" type="radio" value="false" name="connecteurStateFast">{{\'Admin.Avance.Fast.disable\' | translate}}\n                                </label>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <ul class="nav nav-tabs">\n                    <li class="active"><a href="#connecteurfast" bs-tab><i class="fa fa-info-circle"></i> {{\'Admin.Avance.Fast.connect_to_server\' | translate}}</a></li>\n                    <li><a href="#signaturefast" bs-tab><i class="fa fa-road"></i> {{\'Admin.Avance.Fast.xades_profile\' | translate}}</a></li>\n                </ul>\n\n                <div class="tab-content">\n                    <div class=\'tab-pane\' ng-class="\'active\'" id=\'connecteurfast\'>\n                        <div class="col-md-12">\n\n                            <div class="form-group">\n                                <label class="control-label col-sm-3" for="serveurFast">{{\'Admin.Avance.Fast.server_name\' | translate}}</label>\n                                <div class="col-sm-9">\n                                    <input class="form-control unvalidate" type="text" id="serveurFast" name="serveurFast" ng-change="fastHelios.infoChanged()" placeholder="{{fastHelios.config.server}}" ng-model="fastHelios.config.server" required>\n                                </div>\n                            </div>\n\n                            <div class="form-group">\n                                <label class="control-label col-sm-3" for="portFast">{{\'Admin.Avance.Fast.server_port\' | translate}}</label>\n                                <div class="col-sm-9">\n                                    <input class="form-control unvalidate" type="text" id="portFast" name="portFast" ng-change="fastHelios.infoChanged()" placeholder="{{fastHelios.config.port}}" ng-model="fastHelios.config.port" required>\n                                </div>\n                            </div>\n\n                            <div class="form-group" style="display:inline-block;">\n                                <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->\n                                <div class="fileupload-buttonbar form-group" style="margin-bottom:0;">\n                                    <!-- The fileinput-button span is used to style the file input field as button -->\n                                    <div class="col-md-6">\n                                        <div class="col-md-12">\n                                            <span style="display:block !important;" class="btn btn-info fileinput-button">\n                                                <i class="icon-pencil icon-white"></i>\n                                                <span>{{\'Admin.Avance.Fast.certificate\' | translate}}</span>\n                                                <input id="fileinput" type="file" name="file">\n                                            </span>\n                                            <span ng-if="fastHelios.typeError" class="text-danger"><i class="fa fa-times"></i> {{\'Admin.Avance.Fast.certificate_error\' | translate}}</span>\n                                        </div>\n                                        <div class="col-md-12" style="float:left;">\n                                            <span>{{\'Admin.Avance.Fast.certificate_sel\' | translate}} : {{fastHelios.filename}}</span>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-6" style="display:inline-block;">\n                                        <div>\n                                            <p>{{\'Admin.Avance.Fast.certificate_actual\' | translate}} : {{fastHelios.config.name}}<br>\n                                                {{\'Admin.Avance.Fast.certificate_expiration\' | translate}} : {{fastHelios.config.dateLimite}}</p>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="form-group">\n                                <label class="control-label col-sm-3" for="passwordFast">{{\'Admin.Avance.Fast.certificate_passwd\' | translate}}</label>\n                                <div class="col-sm-9">\n                                    <input class="form-control unvalidate" type="text" id="passwordFast" name="passwordFast" ng-change="fastHelios.infoChanged()" placeholder="{{fastHelios.config.password}}" ng-model="fastHelios.config.password" required>\n                                </div>\n                            </div>\n\n                            <div class="form-group">\n                                <div class="col-md-6 row">\n                                    <div class="col-md-12">\n                                        <span>{{\'Admin.Avance.Fast.certificate_passwd\' | translate}} :\n                                            <i class="fa fa-check fa-2x" style="color:green;" ng-show="fastHelios.config.isPwdGoodForPkcs === \'ok\'"></i>\n                                            <i class="fa fa-times fa-2x" style="color:red;" ng-show="fastHelios.config.isPwdGoodForPkcs !== \'ok\'"></i>\n                                        </span>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="form-group">\n                                <label class="control-label col-sm-3" for="collectiviteFast">{{\'Admin.Avance.Fast.idCol\' | translate}}</label>\n                                <div class="col-sm-9">\n                                    <input class="form-control" type="text" id="collectiviteFast" name="collectiviteFast" placeholder="{{fastHelios.config.collectivite}}" ng-model="fastHelios.config.collectivite" required>\n                                </div>\n                            </div>\n\n                            <div class="form-group">\n                                <label class="control-label col-sm-3" for="cinematiqueFast">{{\'Admin.Avance.Fast.kinematic\' | translate}}</label>\n                                <div class="col-sm-9">\n                                    <input class="form-control" type="text" id="cinematiqueFast" name="cinematiqueFast" placeholder="{{fastHelios.config.cinematique}}" ng-model="fastHelios.config.cinematique" required>\n                                </div>\n                            </div>\n\n                            <div class="form-group">\n                                <label class="control-label col-sm-3" for="check_freqFast">{{\'Admin.Avance.Fast.verify_folders\' | translate}}</label>\n                                <div class="col-sm-9">\n                                    <input class="form-control" type="text" id="check_freqFast" name="check_freqFast" placeholder="{{fastHelios.config.check_freq}}" ng-model="fastHelios.config.check_freq" required>\n                                </div>\n                            </div>\n\n                            <div class="form-group">\n                                <label class="control-label col-sm-3" for="time_to_consider_file_not_pickableFast">{{\'Admin.Avance.Fast.error_folders\' | translate}}</label>\n                                <div class="col-sm-9">\n                                    <input class="form-control" type="text" id="time_to_consider_file_not_pickableFast" name="time_to_consider_file_not_pickableFast" placeholder="{{fastHelios.config.time_to_consider_file_not_pickable}}" ng-model="fastHelios.config.time_to_consider_file_not_pickable" required>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\'tab-pane\' id=\'signaturefast\'>\n                        <div class="col-md-12">\n\n                            <div class="form-group">\n                                <label class="control-label col-sm-3" for="pPolicyIdentifierIDFast">{{\'Admin.Avance.Fast.policy_identifier\' | translate}}</label>\n                                <div class="col-sm-9">\n                                    <input class="form-control" type="text" id="pPolicyIdentifierIDFast" name="pPolicyIdentifierIDFast" ng-model="fastHelios.config.pPolicyIdentifierID" required>\n                                </div>\n                            </div>\n\n                            <div class="form-group">\n                                <label class="control-label col-sm-3" for="pPolicyIdentifierDescriptionFast">{{\'Admin.Avance.Fast.policy_identifier_description\' | translate}}</label>\n                                <div class="col-sm-9">\n                                    <input class="form-control" type="text" id="pPolicyIdentifierDescriptionFast" name="pPolicyIdentifierDescriptionFast" ng-model="fastHelios.config.pPolicyIdentifierDescription" required>\n                                </div>\n                            </div>\n\n                            <div class="form-group">\n                                <label class="control-label col-sm-3" for="pPolicyDigestFast">{{\'Admin.Avance.Fast.policy_digest\' | translate}}</label>\n                                <div class="col-sm-9">\n                                    <input class="form-control" type="text" id="pPolicyDigestFast" name="pPolicyDigestFast" ng-model="fastHelios.config.pPolicyDigest" required>\n                                </div>\n                            </div>\n\n                            <div class="form-group">\n                                <label class="control-label col-sm-3" for="pSPURIFast">{{\'Admin.Avance.Fast.spuri\' | translate}}</label>\n                                <div class="col-sm-9">\n                                    <input class="form-control" type="text" id="pSPURIFast" name="pSPURIFast" ng-model="fastHelios.config.pSPURI" required>\n                                </div>\n                            </div>\n\n                            <div class="form-group">\n                                <label class="control-label col-sm-3" for="pClaimedRoleFast">{{\'Admin.Avance.Fast.claimed_role\' | translate}}</label>\n                                <div class="col-sm-9">\n                                    <input class="form-control" type="text" id="pClaimedRoleFast" name="pClaimedRoleFast" ng-model="fastHelios.config.pClaimedRole" required>\n                                </div>\n                            </div>\n\n                            <div class="row">\n                                <div class="col-md-6">\n                                    <div class="form-group">\n                                        <label class="control-label col-sm-3" for="pPostalCodeFast">{{\'Admin.Avance.Fast.postal_code\' | translate}}</label>\n                                        <div class="col-sm-9">\n                                            <input class="form-control" type="text" id="pPostalCodeFast" name="pPostalCodeFast" ng-model="fastHelios.config.pPostalCode" required>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="col-md-6">\n                                    <div class="form-group">\n                                        <label class="control-label col-sm-3" for="pCityFast">{{\'Admin.Avance.Fast.city\' | translate}}</label>\n                                        <div class="col-sm-9">\n                                            <input class="form-control" type="text" id="pCityFast" name="pCityFast" ng-model="fastHelios.config.pCity" required>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n\n                            <div class="form-group">\n                                <label class="control-label col-sm-3" for="pCountryNameFast">{{\'Admin.Avance.Fast.country\' | translate}}</label>\n                                <div class="col-sm-9">\n                                    <input class="form-control" type="text" id="pCountryNameFast" name="pCountryNameFast" ng-model="fastHelios.config.pCountryName" required>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="col-md-8">\n                        <input type="button" class="btn btn-default launchUploadFast force-display" ng-click="fastHelios.enableModeTest()" value="{{\'Admin.Avance.Fast.test_config\' | translate}}">\n                        <input type="button" ng-click="fastHelios.enableModeSave()" class="btn btn-success launchUploadFast force-display" value="{{\'Admin.Avance.Fast.save_config\' | translate}}">\n                        <span  ng-if="fastHelios.hasTestConfig">\n                            <div class="text-info"><i class="fa fa-info-circle"></i> {{\'Admin.Avance.Fast.test_updated\' | translate}}</div>\n                            <div ng-if="fastHelios.config.active === \'false\'" class="text-warning"><i class="fa fa-warning"></i> {{\'Admin.Avance.Fast.warn_disabled\' | translate}}</div>\n                        </span>\n                        <span class="text-success" ng-if="fastHelios.hasSaveConfig"><i class="fa fa-check"></i> {{\'Admin.Avance.Fast.saved\' | translate}}</span>\n                    </div>\n                </div>\n            </div>\n        </form>\n    </div>\n</div>\n</div>')}]),angular.module("templates/admin/avance/horodatage.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/admin/avance/horodatage.html",'<div>\n    <div style="top:100px;" class="nextDossierInfo" ng-if="!horodate.isInit">\n                <span class="text text-info">\n                    {{\'Admin.Avance.getting_infos\' | translate}}\n                </span>\n        <span style="position: relative; width: 0px; z-index: 2000000000; right: 140px; top: 100px;" us-spinner="{radius:20, width:8, length: 16}" ></span>\n    </div>\n    <div class="col-md-12" ng-if="horodate.isInit">\n        <div class="row">\n            <div class="col-md-12">\n                <h3>{{\'Admin.Avance.Horodatage.title\' | translate}}</h3>\n            </div>\n        </div>\n        <div class="row">\n            <form class="form-horizontal">\n                <div class="col-md-12">\n                    <div class="form-group">\n                        <label class="control-label col-sm-3" for="nameHorodate">{{\'Admin.Avance.Horodatage.name\' | translate}}</label>\n                        <div class="col-sm-9">\n                            <select class="form-control unvalidate" id="nameHorodate" name="nameHorodate" ng-model="horodate.config.name">\n                                <option value="_off_">{{\'Admin.Avance.Horodatage.disabled\' | translate}}</option>\n                                <option value="adullact">{{\'Admin.Avance.Horodatage.adullact_service\' | translate}}</option>\n                                <option value="certeurope">{{\'Admin.Avance.Horodatage.certeurope_service\' | translate}}</option>\n                            </select>\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <label class="control-label col-sm-3" for="serverHorodate">{{\'Admin.Avance.Horodatage.server_name\' | translate}}</label>\n                        <div class="col-sm-9">\n                            <input type="text" class="form-control unvalidate" id="serverHorodate" name="serverHorodate" ng-model="horodate.config.server">\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label class="control-label col-sm-3" for="portHorodate">{{\'Admin.Avance.Horodatage.server_port\' | translate}}</label>\n                        <div class="col-sm-9">\n                            <input type="text" class="form-control unvalidate" id="portHorodate" name="portHorodate" ng-model="horodate.config.port">\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label class="control-label col-sm-3" for="algoHorodate">{{\'Admin.Avance.Horodatage.algo\' | translate}}</label>\n                        <div class="col-sm-9">\n                            <select class="form-control unvalidate" id="algoHorodate" name="algoHorodate" ng-model="horodate.config.algorithme">\n                                <option value="SHA1">SHA1</option>\n                            </select>\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label class="control-label col-sm-3" for="identifiantHorodate">{{\'Admin.Avance.Horodatage.app_id\' | translate}}</label>\n                        <div class="col-sm-9">\n                            <input type="text" class="form-control unvalidate" id="identifiantHorodate" name="identifiantHorodate" ng-model="horodate.config.idclient">\n                        </div>\n                    </div>\n\n\n                </div>\n                <div class="col-md-12">\n                    <input type="button" ng-click="horodate.set()" class="btn btn-success force-display" value="{{\'Admin.Avance.Horodatage.save_config\' | translate}}">\n                </div>\n            </form>\n        </div>\n    </div>\n</div>')}]),angular.module("templates/admin/avance/mail.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/admin/avance/mail.html",'<div>\n    <div style="top:100px;" class="nextDossierInfo" ng-if="!mail.isInit">\n                <span class="text text-info">\n                    {{\'Admin.Avance.getting_infos\' | translate}}\n                </span>\n        <span style="position: relative; width: 0px; z-index: 2000000000; right: 140px; top: 100px;" us-spinner="{radius:20, width:8, length: 16}" ></span>\n    </div>\n    <div class="col-md-12" ng-if="mail.isInit">\n        <div class="row">\n            <div class="col-md-12">\n                <h3>{{\'Admin.Avance.Mail.title\' | translate}}</h3>\n            </div>\n        </div>\n        <div class="row">\n            <form class="form-horizontal">\n                <div class="col-md-12">\n\n                    <div class="row">\n                        <div class="form-group col-md-4">\n                            <div>\n                                <div class="radio">\n                                    <label for="connecteurActivMail">\n                                        <input class="unvalidate" id="connecteurActivMail" ng-model="mail.config.enabled" type="radio" value="true" name="connecteurStateMail">{{\'Admin.Avance.Mail.enable\' | translate}}\n                                    </label>\n                                </div>\n                                <div class="radio">\n                                    <label for="connecteurDesactivMail">\n                                        <input class="unvalidate" id="connecteurDesactivMail" ng-model="mail.config.enabled" type="radio" value="false" name="connecteurStateMail">{{\'Admin.Avance.Mail.disable\' | translate}}\n                                    </label>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    \n                    <div class="form-group">\n                        <label class="control-label col-sm-3" for="idMail">{{\'Admin.Avance.Mail.id\' | translate}}</label>\n                        <div class="col-sm-9">\n                            <input type="text" class="form-control unvalidate" id="idMail" name="idMail" ng-model="mail.config.username">\n                        </div>\n                    </div>\n                    \n                    <div class="form-group">\n                        <label class="control-label col-sm-3" for="passwordMail">{{\'Admin.Avance.Mail.passwd\' | translate}}</label>\n                        <div class="col-sm-9">\n                            <input type="text" class="form-control unvalidate" id="passwordMail" name="passwordMail" ng-model="mail.config.password">\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <label class="control-label col-sm-3" for="serverMail">{{\'Admin.Avance.Mail.msg_server\' | translate}}</label>\n                        <div class="col-sm-9">\n                            <input type="text" class="form-control unvalidate" id="serverMail" name="serverMail" ng-model="mail.config.server">\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <label class="control-label col-sm-3" for="portMail">{{\'Admin.Avance.Mail.server_port\' | translate}}</label>\n                        <div class="col-sm-9">\n                            <input type="text" class="form-control unvalidate" id="portMail" name="portMail" ng-model="mail.config.port">\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <label class="control-label col-sm-3" for="folderMail">{{\'Admin.Avance.Mail.base_directory\' | translate}}</label>\n                        <div class="col-sm-9">\n                            <input type="text" class="form-control unvalidate" id="folderMail" name="folderMail" ng-model="mail.config.folder">\n                        </div>\n                    </div>\n                    \n                </div>\n                <div class="col-md-12">\n                    <input type="button" ng-click="mail.set()" class="btn btn-success force-display" value="{{\'Admin.Avance.Mail.save\' | translate}}">\n                </div>\n            </form>\n        </div>\n    </div>\n</div>')}]),angular.module("templates/admin/avance/metadonne.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/admin/avance/metadonne.html",'<div>\n    <div style="top:100px;" class="nextDossierInfo" ng-if="!meta.isInit">\n                <span class="text text-info">\n                    {{\'Admin.Avance.getting_infos\' | translate}}\n                </span>\n        <span style="position: relative; width: 0px; z-index: 2000000000; right: 140px; top: 100px;" us-spinner="{radius:20, width:8, length: 16}" ></span>\n    </div>\n    <div class="col-md-12" ng-if="meta.isInit">\n        <div class="row">\n            <div class="col-md-3">\n                <h3>{{\'Admin.Avance.Metadata.title\' | translate}}</h3>\n                <span ng-click="meta.create()" class="btn btn-success"><i class="fa fa-plus"></i> {{\'Admin.Avance.Metadata.create\' | translate}}</span>\n                <ul class="list-unstyled nav nav-pills nav-stacked adminContent list-data">\n                    <li ng-repeat="m in meta.list | orderBy:\'name\':false" ng-class="meta.current.id == m.id ? \'active\' : \'\'">\n                        <a ng-click="meta.select(m)">\n                            {{m.name}}\n                            <i ng-if="m.deletable" ng-click="meta.remove(m)" tooltip="Supprimer" ng-class="meta.current.id == m.id ? \'text-inverse\' : \'text-danger\'" class="fa fa-trash-o icon-right"></i>\n                        </a>\n                    </li>\n                </ul>\n            </div>\n            <div class="col-md-9">\n                <div ng-if="!empty(meta.current)" class="row">\n                    <div class="col-md-12">\n                        <h4 ng-if="meta.current.isNew">{{\'Admin.Avance.Metadata.creating\' | translate}}</h4>\n                        <h4 ng-if="!meta.current.isNew">{{\'Admin.Avance.Metadata.edit\' | translate}} {{meta.current.name}}</h4>\n                        <form class="form-horizontal" name="metadata">\n                            <div class="col-md-12">\n\n                                <div class="form-group">\n                                    <label class="control-label col-sm-3" for="name">{{\'Admin.Avance.Metadata.id\' | translate}}</label>\n                                    <div class="col-sm-9">\n                                        <input type="text" class="form-control" ng-pattern="/^[a-zA-Z]([\\w])*$/"\n                                               id="name" name="name" ng-model="meta.current.id"\n                                               ng-disabled="!meta.current.isNew" placeholder="{{meta.current.id}}" required="required">\n                                    </div>\n                                </div>\n\n                                <div class="form-group">\n                                    <label class="control-label col-sm-3" for="long">{{\'Admin.Avance.Metadata.name\' | translate}}</label>\n                                    <div class="col-sm-9">\n                                        <input type="text" class="form-control unvalidate" id="long" name="long" ng-model="meta.current.name" required="required">\n                                    </div>\n                                </div>\n\n                                <div class="form-group">\n                                    <label class="control-label col-sm-3" for="nature">{{\'Admin.Avance.Metadata.type\' | translate}}</label>\n                                    <div class="col-sm-9">\n                                        <select class="form-control" ng-model="meta.current.type" name="nature"\n                                                id="nature" ng-disabled="!meta.current.isNew" required="required"\n                                                ng-options="type.value as (type.key | translate) for type in meta.nature">\n                                        </select>\n                                    </div>\n                                </div>\n                                <div class="form-group">\n                                    <div class="checkbox"\n                                         ng-if="!!meta.current.type && meta.current.type !== \'BOOLEAN\'">\n                                        <label>\n                                            <input class="unvalidate" ng-model="meta.current.hasValues"\n                                                   type="checkbox"/> {{\'Admin.Avance.Metadata.restrict_values\' |\n                                            translate}}\n                                        </label>\n                                    </div>\n                                </div>\n\n                                <div class="form-group" ng-if="!!meta.current.type && meta.current.type !== \'BOOLEAN\'">\n                                    <div class="checkbox" ng-if="meta.current.hasValues">\n                                        <label>\n                                            <input class="unvalidate" ng-model="meta.current.isAlphaOrdered"\n                                                   type="checkbox"/> {{\'Admin.Avance.Metadata.alpha_ordered\' |\n                                            translate}}\n                                        </label>\n                                    </div>\n                                </div>\n\n                                <div class="col-md-12"\n                                     ng-if="meta.current.hasValues && !!meta.current.type && meta.current.type !== \'BOOLEAN\'">\n                                    <h4>\n                                        {{\'Admin.Avance.Metadata.autorized_values\' | translate}}\n                                        <i class="fa fa-plus-circle text-success pointer" tooltip="{{\'Admin.Avance.Metadata.add_value\' | translate}}" ng-click="meta.addValue()"></i>\n                                    </h4>\n                                    <div class="form-group" ng-if="meta.current.hasValues" ng-repeat="value in meta.current.values">\n                                        <div class="row">\n                                            <div class="col-sm-9" ng-switch on="meta.current.type">\n                                                <div ng-switch-when="DATE" class="input-group col-md-12" style="padding: 0;">\n                                                    <input name="{{\'date\' + $index}}" id="{{\'date\' + $index}}" ng-cloak="" ip-id="\'date\' + $index" return-format="yy-mm-dd" readonly="true" ip-datepicker type="text" ng-model="value.value" class="form-control unvalidate" ng-disabled="!value.deletable">\n                                                    <span ng-if="!!value.value" ng-click="value.value = \'\'" class="pointer input-group-addon">\n                                                        <i class="fa fa-times"></i>\n                                                    </span>\n                                                    <label ng-if="!value.value" for="{{\'date\' + $index}}" class="pointer input-group-addon">\n                                                        <i class="fa fa-calendar"></i>\n                                                    </label>\n                                                </div>\n                                                <input ng-switch-when="STRING" type="text" class="form-control unvalidate" ng-model="value.value" ng-disabled="!value.deletable">\n                                                <input ng-switch-when="URL" type="text" class="form-control unvalidate" ng-model="value.value" ng-disabled="!value.deletable">\n                                                <input type="text" ng-switch-when="INTEGER" integer ng-model="value.value" class="form-control" ng-disabled="!value.deletable">\n                                                <input type="text"  ng-switch-when="DOUBLE" decimal ng-model="value.value" class="form-control" ng-disabled="!value.deletable">\n                                            </div>\n                                            <div class="col-sm-3">\n                                                <span class="btn btn-danger force-display" ng-if="value.deletable"\n                                                      ng-click="meta.deleteValue($index)">\n                                                    <i class="fa fa-trash"></i>\n                                                    {{\'Delete\' | translate}}</span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="col-md-12">\n                                <span ng-click="meta.save()" class="btn btn-primary force-display" ng-disabled="!metadata.$valid || (meta.current.isNew && meta.idExists())">\n                                    <i class="fa fa-save"></i>\n                                    {{\'Admin.Avance.Metadata.save\' | translate}}\n                                </span>\n                                <span class="text-success" ng-if="meta.hasSaved"><i class="fa fa-check"></i> {{\'Admin.Avance.Metadata.saved\' | translate}}</span>\n                                <span class="text-danger" ng-if="meta.errorMessage"><i class="fa fa-warning"></i> {{meta.errorMessage}}</span>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>');
}]),angular.module("templates/admin/avance/model.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/admin/avance/model.html",'<div>\n    <div style="top:100px;" class="nextDossierInfo" ng-if="!modeles.isInit">\n                <span class="text text-info">\n                    {{\'Admin.Avance.getting_infos\' | translate}}\n                </span>\n        <span style="position: relative; width: 0px; z-index: 2000000000; right: 140px; top: 100px;" us-spinner="{radius:20, width:8, length: 16}" ></span>\n    </div>\n    <div class="col-md-12" ng-if="modeles.isInit">\n        <div class="row">\n            <div class="col-md-3">\n                <h3>{{\'Admin.Avance.Model.title\' | translate}} <i ng-click="modeles.reload()" tooltip-placement="right" tooltip="{{\'Admin.Avance.Model.reload_all\' | translate}}" class="fa fa-undo pointer"></i></h3>\n                <ul class="list-unstyled nav nav-pills nav-stacked adminContent list-data">\n                    <li ng-repeat="modele in modeles.list | filter:\'bdx\' | orderBy:\'name\':false" ng-class="modeles.current.id == modele.id ? \'active\' : \'\'">\n                        <a ng-click="modeles.get(modele)">\n                            {{modele.name}}\n                            <i tooltip-placement="right" tooltip="{{\'Admin.Avance.Model.reload\' | translate}}" ng-click="modeles.reload(modele)" ng-class="modeles.current.id == modele.id ? \'text-inverse\' : \'text-warning\'" class="text-warning fa fa-undo icon-right pointer"></i>\n                        </a>\n                    </li>\n                </ul>\n                <ul class="list-unstyled nav nav-pills nav-stacked adminContent list-data">\n                    <li ng-repeat="modele in modeles.list | filter:\'mail\' | orderBy:\'name\':false" ng-class="modeles.current.id == modele.id ? \'active\' : \'\'">\n                        <a ng-click="modeles.get(modele)">\n                            {{modele.name}}\n                            <i tooltip-placement="right" tooltip="{{\'Admin.Avance.Model.reload\' | translate}}" ng-click="modeles.reload(modele)" ng-class="modeles.current.id == modele.id ? \'text-inverse\' : \'text-warning\'" class="text-warning fa fa-undo icon-right pointer"></i>\n                        </a>\n                    </li>\n                </ul>\n            </div>\n            <div class="col-md-9 editor">\n                <div style="height: 52px;">\n                    <span class="text-info" ng-if="modeles.hasReload === 2 && !modeles.hasSaved">{{\'Admin.Avance.Model.reload_all_done\' | translate}}</span>\n                    <span class="text-info" ng-if="modeles.hasReload === 1 && !modeles.hasSaved">{{(\'Admin.Avance.Model.reload_done\' | translate).replace(\'__var__\', modeles.reloadName)}}</span>\n                    <span class="text-info" ng-if="modeles.hasSaved">{{\'Admin.Avance.Model.saved\' | translate}}</span>\n                    <span ng-if="!!modeles.current.id" style="margin-top: 10px;" ng-click="modeles.set()" class="btn btn-primary float-right">\n                        <i class="fa fa-floppy-o"></i>\n                        {{\'Admin.Avance.Model.save\' | translate}}\n                    </span>\n                </div>\n                <div ng-if="!!modeles.current.id">\n                    <div ui-ace="{\n                          useWrapMode : true,\n                          showGutter: true,\n                          theme:\'twilight\',\n                          mode: \'ftl\'\n                    }" class="editor" ng-style="{height:modeles.getHeight()}" ng-model="modeles.current.content"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n')}]),angular.module("templates/admin/avance/pastellmailsec.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/admin/avance/pastellmailsec.html",'<div>\n    <div style="top:100px;" class="nextDossierInfo" ng-if="!pastellMailsec.isInit">\n        <span class="text text-info">\n            {{\'Admin.Avance.getting_infos\' | translate}}\n        </span>\n        <span style="position: relative; width: 0px; z-index: 2000000000; right: 140px; top: 100px;"\n              us-spinner="{radius:20, width:8, length: 16}"></span>\n    </div>\n    <div class="col-md-12" ng-if="pastellMailsec.isInit">\n        <div class="row">\n            <div class="col-md-12">\n                <h3>{{\'Admin.Avance.PastellMailsec.title\' | translate}}</h3>\n            </div>\n        </div>\n        <div class="row">\n            <div class="col-md-3">\n                <hr/>\n                <span ng-click="pastellMailsec.create()" class="btn btn-success"><i class="fa fa-plus-circle"></i> {{\'Admin.Avance.PastellMailsec.create\' | translate}}</span>\n                <ul class="list-unstyled nav nav-pills nav-stacked adminContent list-data">\n                    <li ng-repeat="conn in pastellMailsec.list"\n                        ng-class="pastellMailsec.selected.id == conn.id ? \'active\' : \'\'">\n                        <a ng-click="pastellMailsec.select(conn)">\n                            {{conn.title}}\n                            <i ng-click="pastellMailsec.remove(conn)"\n                               ng-class="pastellMailsec.selected.id == conn.id ? \'text-inverse\' : \'text-danger\'"\n                               tooltip="Supprimer"\n                               class="fa fa-trash-o icon-right pointer"></i>\n                        </a>\n                    </li>\n                </ul>\n                <span ng-if="pastellMailsec.list.length == 0" class="text text-info">\n                    <i class="fa fa-info-circle"></i>\n                    Aucun connecteur présent\n                </span>\n            </div>\n            <div class="col-md-9">\n                <div class="col-md-12" ng-if="pastellMailsec.current">\n                    <form novalidate="novalidate" name="pastellmailsec" class="form-horizontal">\n                        <div class="col-md-6 col-md-offset-3">\n                            <h4 ng-if="pastellMailsec.current.isNew">Nouveau connecteur</h4>\n                            <h4 ng-if="!pastellMailsec.current.isNew">Modification du connecteur</h4>\n\n\n                            <div class="form-group mandatory-group">\n                                <label for="titleConnector">{{\'Name\' | translate}}</label>\n                                <span class="label label-warning"><i\n                                        class="fa fa-warning"></i> Unique</span>\n                                <span class="label label-danger"><i\n                                        class="fa fa-warning"></i> {{\'Mandatory\' | translate}}</span>\n                                <span class="label label-info"><i\n                                        class="fa fa-info-circle"></i> Min : 2</span>\n                                <input id="titleConnector" type="text" class="form-control unvalidate" ng-minlength="2"\n                                       required ng-change="pastellMailsec.exists = false"\n                                       ng-model="pastellMailsec.current.title" name="titleCert">\n                            </div>\n\n                            <div class="form-group mandatory-group">\n                                <label for="urlConnector">{{\'Url\' | translate}}</label>\n                                <span class="label label-danger"><i\n                                        class="fa fa-warning"></i> {{\'Mandatory\' | translate}}</span>\n                                <input id="urlConnector" type="text" class="form-control unvalidate" ng-minlength="2"\n                                       ng-model="pastellMailsec.current.url" name="urlConnector" required\n                                       ng-disabled="pastellMailsec.current.connected">\n                            </div>\n\n                            <div class="form-group mandatory-group">\n                                <label for="usernameConnector">Nom d\'utilisateur</label>\n                                <span class="label label-danger"><i\n                                        class="fa fa-warning"></i> {{\'Mandatory\' | translate}}</span>\n                                <input id="usernameConnector" type="text" class="form-control unvalidate"\n                                       ng-minlength="2"\n                                       ng-model="pastellMailsec.current.login" name="usernameConnector" required\n                                       ng-disabled="pastellMailsec.current.connected">\n                                <span class="text text-info">\n                                    <i class="fa fa-info-circle">\n                                    </i>\n                                    L\'utilisateur Pastell doit avoir les droits "mailsec" en édition et lecture\n                                </span>\n                            </div>\n\n                            <div class="form-group mandatory-group">\n                                <label for="passCert">{{\'Options.Password\' | translate}}</label>\n                                <span class="label label-danger"><i\n                                        class="fa fa-warning"></i> {{\'Mandatory\' | translate}}</span>\n                                <input id="passCert" type="password" class="form-control unvalidate"\n                                       ng-model="pastellMailsec.current.password" name="passCert"\n                                       required ng-disabled="pastellMailsec.current.connected">\n                            </div>\n                            <div class="row">\n                                <button ng-if="!pastellMailsec.current.connected"\n                                        class="btn btn-info force-display"\n                                        ng-click="pastellMailsec.plug()" ng-disabled="pastellMailsec.plugloading">\n                                    <i class="fa fa-plug"></i>\n                                    Connecter\n                                </button>\n\n                                <button ng-if="pastellMailsec.current.connected" class="btn btn-warning force-display"\n                                        ng-click="pastellMailsec.unplug()">\n                                    <i class="fa fa-plug"></i>\n                                    Déconnecter\n                                </button>\n\n                                <span ng-if="pastellMailsec.plugloading">\n                                    <i class="fa fa-spin fa-refresh"></i>\n                                </span>\n                                <span class="text-success" ng-if="pastellMailsec.current.connected">\n                                    <i class="fa fa-check"></i> Connecté\n                                </span>\n                                <span class="text-danger" ng-if="pastellMailsec.errorCode == 503">\n                                    <i class="fa fa-times"></i>\n                                    Connecteur Pastell indisponible, veuillez contacter votre administrateur\n                                </span>\n                                <span class="text-danger" ng-if="pastellMailsec.errorCode == 410">\n                                    <i class="fa fa-times"></i>\n                                    Impossible d\'atteindre le serveur Pastell\n                                </span>\n                                <span class="text-danger" ng-if="pastellMailsec.errorCode == 401">\n                                    <i class="fa fa-times"></i>\n                                    Utilisateur ou mot de passe invalide\n                                </span>\n                            </div>\n                            <hr/>\n                            <div class="form-group mandatory-group">\n                                <label for="entity">Entité :</label>\n                                <span class="label label-danger"><i\n                                        class="fa fa-warning"></i> {{\'Mandatory\' | translate}}</span>\n                                <select ng-options="ent.id as ent.denomination for ent in pastellMailsec.entities"\n                                        ng-change="pastellMailsec.entitychanged()"\n                                        id="entity" class="form-control unvalidate"\n                                        ng-model="pastellMailsec.current.entity" name="entity" required\n                                        ng-disabled="!pastellMailsec.current.connected">\n                                </select>\n                            </div>\n                            <div class="row">\n                                <button class="btn btn-primary force-display"\n                                        ng-click="pastellMailsec.save()" ng-disabled="!pastellMailsec.current.entity">\n                                    <i class="fa fa-floppy-o"></i>\n                                    Enregistrer\n                                </button>\n                                <span ng-if="pastellMailsec.exists" class="text text-danger">\n                                    <i class="fa fa-warning"></i>\n                                    Un connecteur nommé {{pastellMailsec.current.title}} existe déjà !\n                                </span>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>')}]),angular.module("templates/admin/avance/slowactes.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/admin/avance/slowactes.html",'<div>\n    <div style="top:100px;" class="nextDossierInfo" ng-if="!slowActes.isInit">\n            <span class="text text-info">\n                {{\'Admin.Avance.getting_infos\' | translate}}\n            </span>\n        <span style="position: relative; width: 0px; z-index: 2000000000; right: 140px; top: 100px;" us-spinner="{radius:20, width:8, length: 16}" ></span>\n    </div>\n    <div class="col-md-12" ng-if="slowActes.isInit">\n        <div class="row">\n            <div class="col-md-12">\n                <h3>{{\'Admin.Avance.Actes.title\' | translate}}</h3>\n            </div>\n        </div>\n        <div class="row">\n            <form submit-button=".launchUpload" one-file="true" fileupload="certificat" file-added="slowActes.certAdded(files)" wrong-type="slowActes.wrongType(ext)" fileinput="#fileinput" upload-success="slowActes.fileEncoded(data)" action="{{context + \'/base64encode\'}}" method="POST" enctype="multipart/form-data" novalidate name="modalForm" class="form-horizontal">\n                <div class="col-md-12">\n                    <div class="row">\n                        <div class="form-group col-md-4">\n                            <div>\n                                <div class="radio">\n                                    <label for="connecteurActiv">\n                                        <input class="unvalidate" id="connecteurActiv" ng-model="slowActes.config.active" type="radio" value="true" name="connecteurState">{{\'Admin.Avance.Actes.enable\' | translate}} \n                                    </label>\n                                </div>\n                                <div class="radio">\n                                    <label for="connecteurDesactiv">\n                                        <input class="unvalidate" id="connecteurDesactiv" ng-model="slowActes.config.active" type="radio" value="false" name="connecteurState">{{\'Admin.Avance.Actes.disable\' | translate}}   \n                                    </label>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="col-md-12">\n\n                            <div class="form-group">\n                                <label class="control-label col-sm-3" for="serveur">{{\'Admin.Avance.Actes.server_name\' | translate}}</label>\n                                <div class="col-sm-9">\n                                    <input class="form-control unvalidate" type="text" id="serveur" name="serveur" ng-change="slowActes.infoChanged()" placeholder="{{slowActes.config.server}}" ng-model="slowActes.config.server" required>\n                                </div>\n                            </div>\n\n                            <div class="form-group">\n                                <label class="control-label col-sm-3" for="port">{{\'Admin.Avance.Actes.server_port\' | translate}}</label>\n                                <div class="col-sm-9">\n                                    <input class="form-control unvalidate" type="text" id="port" name="port" ng-change="slowActes.infoChanged()" placeholder="{{slowActes.config.port}}" ng-model="slowActes.config.port" required>\n                                </div>\n                            </div>\n\n                            <div class="form-group" style="display:inline-block;">\n                                <h4>Certificat de connexion</h4>\n                                <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->\n                                <div class="fileupload-buttonbar form-group" style="margin-bottom:0;">\n                                    <!-- The fileinput-button span is used to style the file input field as button -->\n                                    <div class="col-md-6">\n                                        <div class="col-md-12">\n                                            <span style="display:block !important;" class="btn btn-default fileinput-button">\n                                                <i class="fa fa-folder-open-o"></i>\n                                                <span>{{\'Browse\' | translate}}</span>\n                                                <input id="fileinput" type="file" name="file">\n                                            </span>\n                                            <span ng-if="slowActes.typeError" class="text-danger"><i class="fa fa-times"></i> {{\'Admin.Avance.Actes.certificate_error\' | translate}}</span>\n                                        </div>\n                                        <div class="col-md-12" style="float:left;">\n                                            <span>{{\'Admin.Avance.Actes.certificate_sel\' | translate}} : {{slowActes.filename}}</span>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-6" style="display:inline-block;">\n                                        <div>\n                                            <p>{{\'Admin.Avance.Actes.certificate_actual\' | translate}} : {{slowActes.config.name}}<br>\n                                                {{\'Admin.Avance.Actes.certificate_expiration\' | translate}} : {{slowActes.config.dateLimite}}</p>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="form-group">\n                                <label class="control-label col-sm-3" for="password">{{\'Admin.Avance.Actes.certificate_passwd\' | translate}}</label>\n                                <div class="col-sm-9">\n                                    <input class="form-control unvalidate" type="text" id="password" name="password" ng-change="slowActes.infoChanged()" placeholder="{{slowActes.config.password}}" ng-model="slowActes.config.password" required>\n                                </div>\n                            </div>\n\n                            <div class="form-group">\n                                <div class="col-md-6 row">\n                                    <div class="col-md-12">\n                                        <span ng-if="slowActes.config.isPwdGoodForPkcs !== \'ex\'">{{\'Admin.Avance.Actes.certificate_passwd\' | translate}} :\n                                            <i class="fa fa-check fa-2x" style="color:green;" ng-show="slowActes.config.isPwdGoodForPkcs === \'ok\'"></i>\n                                            <i class="fa fa-times fa-2x" style="color:red;" ng-show="slowActes.config.isPwdGoodForPkcs !== \'ok\'"></i>\n                                        </span>\n                                        <span ng-if="slowActes.config.isPwdGoodForPkcs === \'ex\'">\n                                            <i class="fa fa-warning fa-2x text-warning"></i> {{\'Admin.Avance.Actes.certificate_expired\' | translate}}     \n                                        </span>\n                                    </div>\n                                    <div class="col-md-12">\n                                    <span ng-if="slowActes.config.listeLogins.length > 1">{{\'Admin.Avance.Actes.connection_with_user\' | translate}} :\n                                        <i class="fa fa-check fa-2x" style="color:green;" ng-show="slowActes.config.validLoginAndCertCnx === \'ok\'"></i>\n                                        <i class="fa fa-times fa-2x" style="color:red;" ng-show="slowActes.config.validLoginAndCertCnx !== \'ok\'"></i>\n                                    </span>\n                                    </div>\n\n                                </div>\n                                <div class="col-md-6" ng-if="slowActes.config.listeLogins.length > 1">\n                                    <div class="row">\n                                        <div class="col-md-6">\n                                            <div class="form-group">\n                                                <label class="control-label" for="user">{{\'Admin.Avance.Actes.user\' | translate}}</label>\n                                                <select ng-change="slowActes.infoChanged()" id="user" name="user" class="form-control" ng-model="slowActes.config.userlogin" ng-options="user for user in slowActes.config.listeLogins">\n                                                </select>\n                                            </div>\n                                        </div>\n                                        <div class="col-md-6">\n                                            <div class="form-group">\n                                                <label class="control-label" for="passwordUser">{{\'Admin.Avance.Actes.passwd\' | translate}}</label>\n                                                <input ng-change="slowActes.infoChanged()" id="passwordUser" name="passwordUser" type="text" class="form-control" ng-model="slowActes.config.userpassword">\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="col-md-6">\n                                    <span>{{\'Admin.Avance.Actes.certificate_connection\' | translate}} :\n                                        <i class="fa fa-check fa-2x" style="color:green;" ng-show="slowActes.config.validCertCnx === \'ok\'"></i>\n                                        <i class="fa fa-times fa-2x" style="color:red;" ng-show="slowActes.config.validCertCnx !== \'ok\'"></i>\n                                    </span>\n                                </div>\n                            </div>\n\n                            <div class="form-group">\n                                <label class="control-label col-sm-3" for="archivage">{{\'Admin.Avance.Actes.archive_base_url\' | translate}}</label>\n                                <div class="col-sm-9">\n                                    <input class="form-control" type="text" id="archivage" name="archivage" placeholder="{{slowActes.config.baseUrlArchivage}}" ng-model="slowActes.config.baseUrlArchivage" required>\n                                </div>\n                            </div>\n\n                            <span ng-if="slowActes.config.validCertCnx !== \'ok\' || slowActes.config.validLoginAndCertCnx !== \'ok\' || slowActes.changed" class="text-danger">{{\'Admin.Avance.Actes.must_save\' | translate}}</span>\n                        </div>\n\n                        <div class="col-md-12">\n                            <div class="col-md-7">\n                                <span class="btn btn-default launchUpload" ng-click="slowActes.enableModeTest()">\n                                    <i class="fa fa-check"></i>\n                                    {{\'Admin.Avance.Actes.test_config\' | translate}}\n                                </span>\n                                <span ng-disabled="(slowActes.config.validCertCnx !== \'ok\' || slowActes.config.validLoginAndCertCnx !== \'ok\' || slowActes.changed)" ng-click="slowActes.enableModeSave()" class="btn btn-primary launchUpload">\n                                    <i class="fa fa-save"></i>\n                                    {{\'Admin.Avance.Actes.save_config\' | translate}}\n                                </span>\n                                <div ng-if="slowActes.hasTestConfig">\n                                    <div class="text-info"><i class="fa fa-info-circle"></i> {{\'Admin.Avance.Actes.test_updated\' | translate}}</div>\n                                    <div ng-if="slowActes.config.active === \'false\'" class="text-warning"><i class="fa fa-warning"></i> {{\'Admin.Avance.Actes.warn_disabled\' | translate}}</div>\n                                </div>\n                                <span class="text-success" ng-if="slowActes.hasSaveConfig"><i class="fa fa-check"></i> {{\'Admin.Avance.Actes.saved\' | translate}}</span>\n                                <span class="text-success" ng-if="slowActes.updated && slowActes.classifications.classificationResult === \'ok\'"><i class="fa fa-check"></i> {{\'Admin.Avance.Actes.classif_updated\' | translate}}</span>\n                                <span class="text-danger" ng-if="slowActes.updated && slowActes.classifications.classificationResult !== \'ok\'"><i class="fa fa-times"></i> {{\'Admin.Avance.Actes.classif_not_updated\' | translate}}</span>\n                            </div>\n                            <div class="col-md-5">\n                                <span class="btn btn-info" ng-click="slowActes.updateClassifications()" ng-if="slowActes.config.validCertCnx === \'ok\'">\n                                    <i class="fa fa-refresh" ng-class="slowActes.updating ? \'fa-spin\' : \'\'" ng-if="!slowActes.updated"></i>\n                                    <i class="fa fa-check" ng-if="slowActes.updated && slowActes.classifications.classificationResult === \'ok\'"></i>\n                                    <i class="fa fa-times" ng-if="slowActes.updated && slowActes.classifications.classificationResult !== \'ok\'"></i> {{\'Admin.Avance.Actes.classif_update\' | translate}}\n                                </span>\n                            </div>\n\n                        </div>\n                    </div>\n                </div>\n            </form>\n        </div>\n    </div>\n</div>')}]),angular.module("templates/admin/avance/slowhelios.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/admin/avance/slowhelios.html",'<div>\n    <div style="top:100px;" class="nextDossierInfo" ng-if="!slowHelios.isInit">\n            <span class="text text-info">\n                {{\'Admin.Avance.getting_infos\' | translate}}\n            </span>\n        <span style="position: relative; width: 0px; z-index: 2000000000; right: 140px; top: 100px;" us-spinner="{radius:20, width:8, length: 16}" ></span>\n    </div>\n    <div class="col-md-12" ng-if="slowHelios.isInit">\n        <div class="row">\n            <div class="col-md-12">\n                <h3>{{\'Admin.Avance.Helios.title\' | translate}}</h3>\n            </div>\n        </div>\n        <div class="row">\n            <form submit-button=".launchUploadHelios" one-file="true" fileupload="certificat" file-added="slowHelios.certAdded(files)" wrong-type="slowHelios.wrongType(ext)" fileinput="#fileinput" upload-success="slowHelios.fileEncoded(data, index)" action="{{context + \'/base64encode\'}}" method="POST" enctype="multipart/form-data" novalidate name="modalForm" class="form-horizontal">\n                <div class="col-md-12">\n                    <div class="row">\n                        <div class="form-group col-md-4">\n                            <div>\n                                <div class="radio">\n                                    <label for="connecteurActivHelios">\n                                        <input class="unvalidate" id="connecteurActivHelios" ng-model="slowHelios.config.active" type="radio" value="true" name="connecteurStateHelios">{{\'Admin.Avance.Helios.enable\' | translate}}\n                                    </label>\n                                </div>\n                                <div class="radio">\n                                    <label for="connecteurDesactivHelios">\n                                        <input class="unvalidate" id="connecteurDesactivHelios" ng-model="slowHelios.config.active" type="radio" value="false" name="connecteurStateHelios">{{\'Admin.Avance.Helios.disable\' | translate}}\n                                    </label>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <ul class="nav nav-tabs">\n                        <li class="active"><a href="#connecteurHelios" bs-tab><i class="fa fa-plug"></i> {{\'Admin.Avance.Helios.connect_to_server\' | translate}}</a></li>\n                        <li><a href="#signatureHelios" bs-tab><i class="fa fa-gavel"></i> {{\'Admin.Avance.Helios.xades_profile\' | translate}}</a></li>\n                    </ul>\n\n                    <div class="tab-content">\n                        <div class=\'tab-pane\' ng-class="\'active\'" id=\'connecteurHelios\'>\n                            <div class="col-md-12">\n    \n                                <div class="form-group">\n                                    <label class="control-label col-sm-3" for="serveurHelios">{{\'Admin.Avance.Helios.server_name\' | translate}}</label>\n                                    <div class="col-sm-9">\n                                        <input class="form-control unvalidate" type="text" id="serveurHelios" name="serveurHelios" ng-change="slowHelios.infoChanged()" placeholder="{{slowHelios.config.server}}" ng-model="slowHelios.config.server" required>\n                                    </div>\n                                </div>\n    \n                                <div class="form-group">\n                                    <label class="control-label col-sm-3" for="portHelios">{{\'Admin.Avance.Helios.server_port\' | translate}}</label>\n                                    <div class="col-sm-9">\n                                        <input class="form-control unvalidate" type="text" id="portHelios" name="portHelios" ng-change="slowHelios.infoChanged()" placeholder="{{slowHelios.config.port}}" ng-model="slowHelios.config.port" required>\n                                    </div>\n                                </div>\n    \n                                <div class="form-group" style="display:inline-block;">\n                                    <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->\n                                    <div class="fileupload-buttonbar form-group" style="margin-bottom:0;">\n                                        <!-- The fileinput-button span is used to style the file input field as button -->\n                                        <div class="col-md-6">\n                                            <div class="col-md-12">\n                                                <span style="display:block !important;" class="btn btn-default fileinput-button">\n                                                    <i class="fa fa-folder-open-o"></i>\n                                                    <span>{{\'Browse\' | translate}}</span>\n                                                    <input id="fileinput" type="file" name="file">\n                                                </span>\n                                                <span ng-if="slowHelios.typeError" class="text-danger"><i class="fa fa-times"></i> {{\'Admin.Avance.Helios.certificate_error\' | translate}}</span>\n                                            </div>\n                                            <div class="col-md-12" style="float:left;">\n                                                <span>{{\'Admin.Avance.Helios.certificate_sel\' | translate}} : {{slowHelios.filename}}</span>\n                                            </div>\n                                        </div>\n                                        <div class="col-md-6" style="display:inline-block;">\n                                            <div>\n                                                <p>{{\'Admin.Avance.Helios.certificate_actual\' | translate}} : {{slowHelios.config.name}}<br>\n                                                    {{\'Admin.Avance.Helios.certificate_expiration\' | translate}} : {{slowHelios.config.dateLimite}}</p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n    \n                                <div class="form-group">\n                                    <label class="control-label col-sm-3" for="passwordHelios">{{\'Admin.Avance.Helios.certificate_passwd\' | translate}}</label>\n                                    <div class="col-sm-9">\n                                        <input class="form-control unvalidate" type="text" id="passwordHelios" name="passwordHelios" ng-change="slowHelios.infoChanged()" placeholder="{{slowHelios.config.password}}" ng-model="slowHelios.config.password" required>\n                                    </div>\n                                </div>\n    \n                                <div class="form-group">\n                                    <div class="col-md-6 row">\n                                        <div class="col-md-12">\n                                        <span ng-if="slowHelios.config.isPwdGoodForPkcs !== \'ex\'">{{\'Admin.Avance.Helios.certificate_passwd\' | translate}} :\n                                            <i class="fa fa-check fa-2x" style="color:green;" ng-show="slowHelios.config.isPwdGoodForPkcs === \'ok\'"></i>\n                                            <i class="fa fa-times fa-2x" style="color:red;" ng-show="slowHelios.config.isPwdGoodForPkcs !== \'ok\'"></i>\n                                        </span>\n                                        <span ng-if="slowHelios.config.isPwdGoodForPkcs === \'ex\'">\n                                            <i class="fa fa-warning fa-2x text-warning"></i> {{\'Admin.Avance.Helios.certificate_expired\' | translate}}\n                                        </span>\n                                        </div>\n                                        <div class="col-md-12">\n                                        <span ng-if="slowHelios.config.listeLogins.length > 1">{{\'Admin.Avance.Helios.connection_with_user\' | translate}} :\n                                            <i class="fa fa-check fa-2x" style="color:green;" ng-show="slowHelios.config.validLoginAndCertCnx === \'ok\'"></i>\n                                            <i class="fa fa-times fa-2x" style="color:red;" ng-show="slowHelios.config.validLoginAndCertCnx !== \'ok\'"></i>\n                                        </span>\n                                        </div>\n    \n                                    </div>\n                                    <div class="col-md-6" ng-if="slowHelios.config.listeLogins.length > 1">\n                                        <div class="row">\n                                            <div class="col-md-6">\n                                                <div class="form-group">\n                                                    <label class="control-label" for="userHelios">{{\'Admin.Avance.Helios.user\' | translate}}</label>\n                                                    <select ng-change="slowHelios.infoChanged()" id="userHelios" name="userHelios" class="form-control" ng-model="slowHelios.config.userlogin" ng-options="user for user in slowHelios.config.listeLogins">\n                                                    </select>\n                                                </div>\n                                            </div>\n                                            <div class="col-md-6">\n                                                <div class="form-group">\n                                                    <label class="control-label" for="passwordUserHelios">{{\'Admin.Avance.Helios.passwd\' | translate}}</label>\n                                                    <input ng-change="slowHelios.infoChanged()" id="passwordUserHelios" name="passwordUserHelios" type="text" class="form-control" ng-model="slowHelios.config.userpassword">\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-6">\n                                        <span>{{\'Admin.Avance.Helios.certificate_connection\' | translate}} :\n                                            <i class="fa fa-check fa-2x" style="color:green;" ng-show="slowHelios.config.validCertCnx === \'ok\'"></i>\n                                            <i class="fa fa-times fa-2x" style="color:red;" ng-show="slowHelios.config.validCertCnx !== \'ok\'"></i>\n                                        </span>\n                                    </div>\n                                </div>\n    \n                                <span ng-if="(slowHelios.config.validCertCnx !== \'ok\' || slowHelios.config.validLoginAndCertCnx !== \'ok\' || slowHelios.changed) && slowHelios.config.active === \'true\'" class="text-danger">{{\'Admin.Avance.Helios.must_save\' | translate}}</span>\n                            </div>\n                        </div>\n                        <div class=\'tab-pane\' id=\'signatureHelios\'>\n                            <div class="col-md-12">\n\n                                <div class="form-group">\n                                    <label class="control-label col-sm-3" for="pPolicyIdentifierID">{{\'Admin.Avance.Helios.policy_identifier\' | translate}}</label>\n                                    <div class="col-sm-9">\n                                        <input class="form-control" type="text" id="pPolicyIdentifierID" name="pPolicyIdentifierID" ng-model="slowHelios.config.pPolicyIdentifierID" required>\n                                    </div>\n                                </div>\n\n                                <div class="form-group">\n                                    <label class="control-label col-sm-3" for="pPolicyIdentifierDescription">{{\'Admin.Avance.Helios.policy_identifier_description\' | translate}}</label>\n                                    <div class="col-sm-9">\n                                        <input class="form-control" type="text" id="pPolicyIdentifierDescription" name="pPolicyIdentifierDescription" ng-model="slowHelios.config.pPolicyIdentifierDescription" required>\n                                    </div>\n                                </div>\n\n                                <div class="form-group">\n                                    <label class="control-label col-sm-3" for="pPolicyDigest">{{\'Admin.Avance.Helios.policy_digest\' | translate}}</label>\n                                    <div class="col-sm-9">\n                                        <input class="form-control" type="text" id="pPolicyDigest" name="pPolicyDigest" ng-model="slowHelios.config.pPolicyDigest" required>\n                                    </div>\n                                </div>\n\n                                <div class="form-group">\n                                    <label class="control-label col-sm-3" for="pSPURI">{{\'Admin.Avance.Helios.spuri\' | translate}}</label>\n                                    <div class="col-sm-9">\n                                        <input class="form-control" type="text" id="pSPURI" name="pSPURI" ng-model="slowHelios.config.pSPURI" required>\n                                    </div>\n                                </div>\n\n                                <div class="form-group" ng-show="false">\n                                    <label class="control-label col-sm-3" for="pClaimedRole">{{\'Admin.Avance.Helios.claimed_role\' | translate}}</label>\n                                    <div class="col-sm-9">\n                                        <input class="form-control" type="text" id="pClaimedRole" name="pClaimedRole" ng-model="slowHelios.config.pClaimedRole" required>\n                                    </div>\n                                </div>\n\n                                <div class="row">\n                                    <div class="col-md-6">\n                                        <div class="form-group">\n                                            <label class="control-label col-sm-3" for="pPostalCode">{{\'Admin.Avance.Helios.postal_code\' | translate}}</label>\n                                            <div class="col-sm-9">\n                                                <input class="form-control" type="text" id="pPostalCode" name="pPostalCode" ng-model="slowHelios.config.pPostalCode" required>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-6">\n                                        <div class="form-group">\n                                            <label class="control-label col-sm-3" for="pCity">{{\'Admin.Avance.Helios.city\' | translate}}</label>\n                                            <div class="col-sm-9">\n                                                <input class="form-control" type="text" id="pCity" name="pPostalCode" ng-model="slowHelios.config.pCity" required>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n\n                                <div class="form-group">\n                                    <label class="control-label col-sm-3" for="pCountryName">{{\'Admin.Avance.Helios.country\' | translate}}</label>\n                                    <div class="col-sm-9">\n                                        <input class="form-control" type="text" id="pCountryName" name="pCountryName" ng-model="slowHelios.config.pCountryName" required>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="col-md-8">\n                            <span class="btn btn-default launchUploadHelios force-display" ng-click="slowHelios.enableModeTest()">\n                                <i class="fa fa-check"></i>\n                                {{\'Admin.Avance.Helios.test_config\' | translate}}\n                            </span>\n                            <span ng-disabled="(slowHelios.config.validCertCnx !== \'ok\' || slowHelios.config.validLoginAndCertCnx !== \'ok\' || slowHelios.changed) && slowHelios.config.active === \'true\'" ng-click="slowHelios.enableModeSave()" class="btn btn-primary launchUploadHelios force-display">\n                                <i class="fa fa-save"></i>\n                                {{\'Admin.Avance.Helios.save_config\' | translate}}\n                            </span>\n                            <span  ng-if="slowHelios.hasTestConfig">\n                                <div class="text-info"><i class="fa fa-info-circle"></i> {{\'Admin.Avance.Helios.test_updated\' | translate}}</div>\n                                <div ng-if="slowHelios.config.active === \'false\'" class="text-warning"><i class="fa fa-warning"></i> {{\'Admin.Avance.Helios.warn_disabled\' | translate}}</div>\n                            </span>\n                            <span class="text-success" ng-if="slowHelios.hasSaveConfig"><i class="fa fa-check"></i> {{\'Admin.Avance.Helios.saved\' | translate}}</span>\n                        </div>\n                    </div>\n                </div>\n            </form>\n        </div>\n    </div>\n</div>');
}]),angular.module("templates/admin/avance/slowmailsec.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/admin/avance/slowmailsec.html",'<div>\n    <div style="top:100px;" class="nextDossierInfo" ng-if="!slowMailsec.isInit">\n            <span class="text text-info">\n                {{\'Admin.Avance.getting_infos\' | translate}}\n            </span>\n        <span style="position: relative; width: 0px; z-index: 2000000000; right: 140px; top: 100px;" us-spinner="{radius:20, width:8, length: 16}" ></span>\n    </div>\n    <div class="col-md-12" ng-if="slowMailsec.isInit">\n        <div class="row">\n            <div class="col-md-12">\n                <h3>{{\'Admin.Avance.Mailsec.title\' | translate}}</h3>\n            </div>\n        </div>\n        <div class="row">\n            <form submit-button=".launchUploadMailsec" one-file="true" fileupload="certificat" file-added="slowMailsec.certAdded(files)" wrong-type="slowMailsec.wrongType(ext)" fileinput="#fileinput" upload-success="slowMailsec.fileEncoded(data)" action="{{context + \'/base64encode\'}}" method="POST" enctype="multipart/form-data" novalidate name="modalForm" class="form-horizontal">\n                <div class="col-md-12">\n                    <div class="row">\n                        <div class="col-md-12">\n\n                            <div class="form-group">\n                                <label class="control-label col-sm-3" for="serveurMailsec">{{\'Admin.Avance.Mailsec.server_name\' | translate}}</label>\n                                <div class="col-sm-9">\n                                    <input class="form-control unvalidate" type="text" id="serveurMailsec" name="serveurMailsec" ng-change="slowMailsec.infoChanged()" placeholder="{{slowMailsec.config.server}}" ng-model="slowMailsec.config.server" required>\n                                </div>\n                            </div>\n\n                            <div class="form-group">\n                                <label class="control-label col-sm-3" for="portMailsec">{{\'Admin.Avance.Mailsec.server_port\' | translate}}</label>\n                                <div class="col-sm-9">\n                                    <input class="form-control unvalidate" type="text" id="portMailsec" name="portMailsec" ng-change="slowMailsec.infoChanged()" placeholder="{{slowMailsec.config.port}}" ng-model="slowMailsec.config.port" required>\n                                </div>\n                            </div>\n\n                            <div class="form-group" style="display:inline-block;">\n                                <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->\n                                <div class="fileupload-buttonbar form-group" style="margin-bottom:0;">\n                                    <!-- The fileinput-button span is used to style the file input field as button -->\n                                    <div class="col-md-6">\n                                        <div class="col-md-12">\n                                            <span style="display:block !important;" class="btn btn-info fileinput-button">\n                                                <i class="icon-pencil icon-white"></i>\n                                                <span>{{\'Admin.Avance.Mailsec.certificate\' | translate}}</span>\n                                                <input id="fileinput" type="file" name="file">\n                                            </span>\n                                            <span ng-if="slowMailsec.typeError" class="text-danger"><i class="fa fa-times"></i> {{\'Admin.Avance.Mailsec.certificate_error\' | translate}}</span>\n                                        </div>\n                                        <div class="col-md-12" style="float:left;">\n                                            <span>{{\'Admin.Avance.Mailsec.certificate_sel\' | translate}} : {{slowMailsec.filename}}</span>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-6" style="display:inline-block;">\n                                        <div>\n                                            <p>{{\'Admin.Avance.Mailsec.certificate_actual\' | translate}} : {{slowMailsec.config.name}}<br>\n                                                {{\'Admin.Avance.Mailsec.certificate_expiration\' | translate}} : {{slowMailsec.config.dateLimite}}</p>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="form-group">\n                                <label class="control-label col-sm-3" for="passwordMailsec">{{\'Admin.Avance.Mailsec.certificate_passwd\' | translate}}</label>\n                                <div class="col-sm-9">\n                                    <input class="form-control unvalidate" type="text" id="passwordMailsec" name="passwordMailsec" ng-change="slowMailsec.infoChanged()" placeholder="{{slowMailsec.config.password}}" ng-model="slowMailsec.config.password" required>\n                                </div>\n                            </div>\n\n                            <div class="form-group">\n                                <div class="col-md-6 row">\n                                    <div class="col-md-12">\n                                    <span>{{\'Admin.Avance.Mailsec.certificate_passwd\' | translate}} :\n                                        <i class="fa fa-check fa-2x" style="color:green;" ng-show="slowMailsec.config.isPwdGoodForPkcs === \'ok\'"></i>\n                                        <i class="fa fa-times fa-2x" style="color:red;" ng-show="slowMailsec.config.isPwdGoodForPkcs !== \'ok\'"></i>\n                                    </span>\n                                    </div>\n                                    <div class="col-md-12">\n                                    <span ng-if="slowMailsec.config.listeLogins.length > 1">{{\'Admin.Avance.Mailsec.connection_with_user\' | translate}} :\n                                        <i class="fa fa-check fa-2x" style="color:green;" ng-show="slowMailsec.config.validLoginAndCertCnx === \'ok\'"></i>\n                                        <i class="fa fa-times fa-2x" style="color:red;" ng-show="slowMailsec.config.validLoginAndCertCnx !== \'ok\'"></i>\n                                    </span>\n                                    </div>\n\n                                </div>\n                                <div class="col-md-6" ng-if="slowMailsec.config.listeLogins.length > 1">\n                                    <div class="row">\n                                        <div class="col-md-6">\n                                            <div class="form-group">\n                                                <label class="control-label" for="UserMailsec">{{\'Admin.Avance.Mailsec.user\' | translate}}</label>\n                                                <select ng-change="slowMailsec.infoChanged()" id="UserMailsec" name="UserMailsec" class="form-control" ng-model="slowMailsec.config.userlogin" ng-options="user for user in slowMailsec.config.listeLogins">\n                                                </select>\n                                            </div>\n                                        </div>\n                                        <div class="col-md-6">\n                                            <div class="form-group">\n                                                <label class="control-label" for="passwordUserMailsec">{{\'Admin.Avance.Mailsec.passwd\' | translate}}</label>\n                                                <input ng-change="slowMailsec.infoChanged()" id="passwordUserMailsec" name="passwordUserMailsec" type="text" class="form-control" ng-model="slowMailsec.config.userpassword">\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="col-md-6">\n                                    <span>{{\'Admin.Avance.Mailsec.certificate_connection\' | translate}} :\n                                        <i class="fa fa-check fa-2x" style="color:green;" ng-show="slowMailsec.config.validCertCnx === \'ok\'"></i>\n                                        <i class="fa fa-times fa-2x" style="color:red;" ng-show="slowMailsec.config.validCertCnx !== \'ok\'"></i>\n                                    </span>\n                                </div>\n                            </div>\n\n                            <span ng-if="slowMailsec.config.validCertCnx !== \'ok\' || slowMailsec.config.validLoginAndCertCnx !== \'ok\' || slowMailsec.changed" class="text-danger">{{\'Admin.Avance.Mailsec.must_save\' | translate}}</span>\n                        </div>\n\n                        <div class="col-md-8">\n                            <input type="button" class="btn btn-default launchUploadMailsec" ng-click="slowMailsec.enableModeTest()" value="{{\'Admin.Avance.Mailsec.test_config\' | translate}}">\n                            <input type="button" ng-disabled="(slowMailsec.config.validCertCnx !== \'ok\' || slowMailsec.config.validLoginAndCertCnx !== \'ok\' || slowMailsec.changed)" ng-click="slowMailsec.enableModeSave()" class="btn btn-success launchUploadMailsec" value="{{\'Admin.Avance.Mailsec.save_config\' | translate}}">\n                            <span  ng-if="slowMailsec.hasTestConfig">\n                                <div class="text-info"><i class="fa fa-info-circle"></i> {{\'Admin.Avance.Mailsec.test_updated\' | translate}}</div>\n                            </span>\n                            <span class="text-success" ng-if="slowMailsec.hasSaveConfig"><i class="fa fa-check"></i> {{\'Admin.Avance.Mailsec.saved\' | translate}}</span>\n                        </div>\n                    </div>\n                </div>\n            </form>\n        </div>\n    </div>\n</div>')}]),angular.module("templates/admin/avance/srcihelios.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/admin/avance/srcihelios.html",'<div>\n    <div style="top:100px;" class="nextDossierInfo" ng-if="!srciHelios.isInit">\n            <span class="text text-info">\n                {{\'Admin.Avance.getting_infos\' | translate}}\n            </span>\n        <span style="position: relative; width: 0px; z-index: 2000000000; right: 140px; top: 100px;" us-spinner="{radius:20, width:8, length: 16}" ></span>\n    </div>\n    <div class="col-md-12" ng-if="srciHelios.isInit">\n        <div class="row">\n            <div class="col-md-12">\n                <h3>{{\'Admin.Avance.SRCI.title\' | translate}}</h3>\n            </div>\n        </div>\n        <div class="row">\n            <form class="form-horizontal">\n                <div class="col-md-12">\n                    <div class="form-group">\n                        <label class="control-label col-sm-3" for="proxyAccount">{{\'Admin.Avance.SRCI.account\' | translate}}</label>\n                        <div class="col-sm-9">\n                            <input class="form-control" type="text" id="proxyAccount" name="proxyAccount" ng-model="srciHelios.config.proxy_account" required>\n                        </div>\n                        <span class="text-info">{{\'Admin.Avance.SRCI.account_info\' | translate}}</span>\n                    </div>\n\n                    <div class="form-group">\n                        <label class="control-label col-sm-3" for="pPolicyIdentifierIDSrci">{{\'Admin.Avance.SRCI.policy_identifier\' | translate}}</label>\n                        <div class="col-sm-9">\n                            <input class="form-control" type="text" id="pPolicyIdentifierIDSrci" name="pPolicyIdentifierIDSrci" ng-model="srciHelios.config.pPolicyIdentifierID" required>\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <label class="control-label col-sm-3" for="pPolicyIdentifierDescriptionSrci">{{\'Admin.Avance.SRCI.policy_identifier_description\' | translate}}</label>\n                        <div class="col-sm-9">\n                            <input class="form-control" type="text" id="pPolicyIdentifierDescriptionSrci" name="pPolicyIdentifierDescriptionSrci" ng-model="srciHelios.config.pPolicyIdentifierDescription" required>\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <label class="control-label col-sm-3" for="pPolicyDigestSrci">{{\'Admin.Avance.SRCI.policy_digest\' | translate}}</label>\n                        <div class="col-sm-9">\n                            <input class="form-control" type="text" id="pPolicyDigestSrci" name="pPolicyDigestSrci" ng-model="srciHelios.config.pPolicyDigest" required>\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <label class="control-label col-sm-3" for="pSPURISrci">{{\'Admin.Avance.SRCI.spuri\' | translate}}</label>\n                        <div class="col-sm-9">\n                            <input class="form-control" type="text" id="pSPURISrci" name="pSPURISrci" ng-model="srciHelios.config.pSPURI" required>\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <label class="control-label col-sm-3" for="pClaimedRoleSrci">{{\'Admin.Avance.SRCI.claimed_role\' | translate}}</label>\n                        <div class="col-sm-9">\n                            <input class="form-control" type="text" id="pClaimedRoleSrci" name="pClaimedRoleSrci" ng-model="srciHelios.config.pClaimedRole" required>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="col-md-6">\n                            <div class="form-group">\n                                <label class="control-label col-sm-3" for="pPostalCodeSrci">{{\'Admin.Avance.SRCI.postal_code\' | translate}}</label>\n                                <div class="col-sm-9">\n                                    <input class="form-control" type="text" id="pPostalCodeSrci" name="pPostalCodeSrci" ng-model="srciHelios.config.pPostalCode" required>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="col-md-6">\n                            <div class="form-group">\n                                <label class="control-label col-sm-3" for="pCitySrci">{{\'Admin.Avance.SRCI.city\' | translate}}</label>\n                                <div class="col-sm-9">\n                                    <input class="form-control" type="text" id="pCitySrci" name="pCitySrci" ng-model="srciHelios.config.pCity" required>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n\n                    <div class="form-group">\n                        <label class="control-label col-sm-3" for="pCountryNameSrci">{{\'Admin.Avance.SRCI.country\' | translate}}</label>\n                        <div class="col-sm-9">\n                            <input class="form-control" type="text" id="pCountryNameSrci" name="pCountryNameSrci" ng-model="srciHelios.config.pCountryName" required>\n                        </div>\n                    </div>\n                </div>\n                <div class="col-md-12">\n                    <span class="text-info">{{srciHelios.config.proxy_account_message}}</span>\n                </div>\n                <div class="col-md-12">\n                    <input type="button" ng-click="srciHelios.enableModeSave()" class="btn btn-success force-display" value="{{\'Admin.Avance.SRCI.save_config\' | translate}}">\n                    <span class="text-success" ng-if="srciHelios.hasSaveConfig"><i class="fa fa-check"></i> {{\'Admin.Avance.SRCI.saved\' | translate}}</span>\n                </div>\n            </form>\n        </div>\n    </div>\n</div>')}]),angular.module("templates/admin/bureaux.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/admin/bureaux.html",'<div class="row-fluid">\n    <div class="menuAdmin col-md-3 label label-info headertop" removeonsize="992" classes-list="label label-info" ng-include src="\'partials/adminNavbar.html\'"></div>\n    <div class="col-md-6 adminContent">\n        <h2 style="display:inline-block;">{{\'Admin.Bureaux.Bu_Title\' | translate}}</h2>\n        <span style="margin-bottom:20px; margin-left:50px;" ng-if="config.isAdmin" class="btn btn-success" ng-click="bureaux.create()">\n            <i class="fa fa-plus"></i>\n            {{\'Admin.Bureaux.Bu_Create\' | translate}}\n        </span>\n        <div>\n            <div class="col-lg-7 col-md-12">\n                <div class="input-group">\n                    <span class="input-group-addon"><i class="fa fa-search fa-fw"></i></span>\n                    <input type="text" class="unvalidate form-control" placeholder="{{\'Admin.Bureaux.Bu_Filter\' | translate}}" ng-model="bureaux.search">\n                </div>\n            </div>\n            <div class="col-md-12 text-info"><i class="fa fa-info-circle"></i> {{\'Admin.Bureaux.Bu_Filter_Info\' | translate}}</div>\n        </div>\n        <!-- Tree -->\n        <div class="well adminContent col-md-12">\n            <span>\n                <i class="fa fa-expand pointer" tooltip="{{\'Admin.Bureaux.Bu_Show_All\' | translate}}" ng-click="bureaux.expandAll()"></i>\n            </span>\n            <span>\n                <i class="fa fa-compress pointer" tooltip="{{\'Admin.Bureaux.Bu_Hide_All\' | translate}}" ng-click="bureaux.reduceAll()"></i>\n            </span>\n            <div style="top:100px;" class="nextDossierInfo" ng-if="bureaux.isSearching">\n                <span style="position: relative; width: 0px; z-index: 2000000000;" us-spinner="{radius:20, width:8, length: 16}" ></span>\n            </div>\n            <abn-tree tree-data="bureaux.ordered"\n                      on-select="bureaux.select(branch)"\n                      search="bureaux.queryForTable"\n                      show-detail="true"\n                      check-rights="true"></abn-tree>\n        </div>\n    </div>\n    <div class="col-md-6">\n        <div ng-if="!empty(bureaux.selected)" class="adminContent well">\n            <legend>\n                {{bureaux.selected.title}}\n            </legend>\n\n            <p>{{\'Admin.Bureaux.Bu_Shortname\' | translate}} : {{bureaux.selected.name}}</p>\n            <p>{{\'Admin.Bureaux.Bu_Name\' | translate}} : {{bureaux.selected.title}}</p>\n            <p>{{\'Admin.Bureaux.Bu_Desc\' | translate}} : {{bureaux.selected.description}}</p>\n            <p>{{\'Admin.Bureaux.Bu_Prop\' | translate}} : <span ng-repeat="user in bureaux.selected.proprietaires"><span ng-if="$index > 0">, </span>{{user.firstName}} {{user.lastName}}</span><span ng-if="bureaux.selected.proprietaires.length === 0"><i class="fa fa-info-circle"></i> {{\'Admin.Bureaux.BuMod_None_Prop\' | translate}}</span></p>\n            <p>{{\'Admin.Bureaux.Bu_Sec\' | translate}} : <span ng-repeat="user in bureaux.selected.secretaires"><span ng-if="$index > 0">, </span>{{user.firstName}} {{user.lastName}}</span><span ng-if="bureaux.selected.secretaires.length === 0"><i class="fa fa-info-circle"></i> {{\'Admin.Bureaux.BuMod_None_Sec\' | translate}}</span></p>\n            <div>{{\'Admin.Bureaux.Bu_Deleg\' | translate}} : <span ng-if="!bureaux.selected.delegation.idCible"><i class="fa fa-info-circle"></i> {{\'Admin.Bureaux.Bu_No_Deleg\' | translate}}</span>\n                <ul style="margin-left:30px;" ng-if="bureaux.selected.delegation.idCible" class="list-unstyled">\n'+"                    <li ng-if=\"bureaux.selected.delegation['date-debut-delegation'] !== undefined\"><strong>{{'Admin.Bureaux.Bu_Begin' | translate}} : </strong>Le {{bureaux.selected.delegation['date-debut-delegation'] | date:'fullDate'}}</li>\n                    <li ng-if=\"bureaux.selected.delegation['date-fin-delegation'] !== undefined\"><strong>{{'Admin.Bureaux.Bu_Fin' | translate}} : </strong>Le {{bureaux.selected.delegation['date-fin-delegation'] | date:'fullDate'}}</li>\n                    <li><strong>{{'Admin.Bureaux.Bu_Target' | translate}} : </strong>{{bureaux.selected.delegation.titreCible | date:'fullDate'}}</li>\n                </ul>\n            </div>\n            <br/>\n            <button class=\"btn btn-info\" ng-click=\"bureaux.edit()\">\n                <i class=\"fa fa-pencil\"></i>\n                {{'Admin.Bureaux.Edit' | translate}}\n            </button>\n\n        </div>\n    </div>\n\n</div>")}]),angular.module("templates/admin/circuits.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/admin/circuits.html",'<script type="text/ng-template" id="popover_detail_circuit">\n    <ul class="list-unstyled">\n        <li ng-repeat="etape in circuit.etapes">\n            <span ng-switch="etape.actionDemandee.toLowerCase()">\n                <i ng-switch-when="visa" class="fa fa-check-square-o"></i>\n                <i ng-switch-when="signature" class="fa ls-signature"></i>\n                <i ng-switch-when="mailsecpastell" class="fa fa-envelope-o"></i>\n                <i ng-switch-when="mailsec" class="fa fa-envelope"></i>\n                <i ng-switch-when="tdt" class="fa fa-cloud-upload"></i>\n                <i ng-switch-when="cachet" class="fa ls-stamp"></i>\n                <i ng-switch-when="archivage" class="fa fa-flag-checkered"></i>\n            </span>\n            <span ng-if="!etape.parapheur">\n                {{(etape.transition | translate) + "..."}}\n            </span>\n            <span ng-if="!!etape.parapheur">\n                {{etape.parapheurName}}\n            </span>\n        </li>\n    </ul>\n</script>\n\n<script type="text/ng-template" id="popover_used_by">\n    <div class="text text-success wrap"><i class="fa fa-info-circle"></i> {{\'Admin.Circuits.Wo_Used_Info\' | translate}} :<ul style="padding-left:15px; "><li ng-repeat="(key, value) in selectedCircuit.usedBy">{{key}}<ul style="padding-left:10px;"><li ng-repeat="subtype in value">{{subtype}}</li></ul></li></ul></div>\n</script>\n\n<div class="row-fluid">\n    <div class="menuAdmin col-md-3 label label-info headertop" removeonsize="992" classes-list="label label-info" ng-include src="\'partials/adminNavbar.html\'"></div>\n    <div>\n        <!-- contenu -->\n        <div class="col-md-3 adminContent">\n            <div class="col-md-12">\n                <h2 class="helper-inline-block">{{\'Admin.Circuits.Wo_Title\' | translate}}</h2>\n                <span style="float: right; margin-bottom:10px;" class="btn btn-success" ng-click="newCircuit()">\n                    <i class="fa fa-plus"></i>\n                    {{\'Admin.Circuits.Wo_Create\' | translate}}\n                </span>\n            </div>\n\n            <div class="well col-md-12">\n                <form role="form" name=\'searchCircuitForm\' novalidate>\n                    <div>\n                        <div class="input-group">\n                            <input placeholder="{{\'Search\' | translate}}" ng-model="search" class="form-control unvalidate" type="text">\n                            <span class="input-group-btn">\n                                <button class="btn btn-success force-display" ng-click="searchCircuit(search)" type="submit">\n                                    <i class="fa fa-search"></i>\n                                    {{\'Search\' | translate}}\n                                </button>\n                            </span>\n                        </div>\n                        <div style="height:18px;" ng-if="circuits[0].total != circuits.length && total > 0">\n                            <span class="text-warning float-right">\n                                {{page*maxSize +1}}-{{(page+1)*maxSize < total ? (page+1)*maxSize : total}} {{\'On\' | translate}} {{total}}\n                                <span class="btn btn-default fa fa-chevron-left force-display" ng-disabled="page === 0" ng-click="pagine(-1)"></span>\n                                <span class="btn btn-default fa fa-chevron-right force-display" ng-disabled="page+1 >= (total/maxSize)" ng-click="pagine(1)"></span>\n                            </span>\n                        </div>\n                    </div>\n                </form>\n\n                <ul class="list-unstyled nav nav-pills nav-stacked adminContent list-data">\n                    <li ng-repeat="circuit in circuits | filter:{name:filter} | orderBy:\'name\'" ng-class="selectedCircuit.name == circuit.name ? \'active\' : \'\'" data-placement="bottom"\n                        bs-popover="\'popover_detail_circuit\'" data-trigger="hover">\n                        <a style="padding-left:34px !important;" ng-click="circuit.editable ? selectCircuit(circuit) : undefined">\n                            <span style="left:15px; top:2px; position:absolute;">\n                                <i class="fa fa-code" ng-if="hasMetadataMandatory(circuit)" tooltip="Métadonnées obligatoires définies"></i>\n                            </span>\n                            <span style="display:inline-block; padding-right:50px;">{{circuit.name}}</span>\n\n                            <span style="right:15px; top:2px; position:absolute;">\n                                <i ng-if="circuit.isUsed" tooltip="{{\'Admin.Circuits.Wo_Used\' | translate}}" class="fa fa-info-circle pull-right" ng-class="selectedCircuit.name == circuit.name ? \'text-inverse\' : \'text-success\'"></i>\n                                <i tooltip="Supprimer" ng-if="circuit.editable && !circuit.isUsed" ng-click="deleteCircuit(circuit); $event.stopPropagation();" ng-class="selectedCircuit.name == circuit.name ? \'text-inverse\' : \'text-danger\'" class="fa-trash-o fa pull-right"></i>\n                                <i tooltip="{{\'Admin.Circuits.Wo_Copy\' | translate}}" ng-click="newCircuit(circuit); $event.stopPropagation();" class="fa-copy fa pull-right text-inverse"></i>\n                            </span>\n                        </a>\n                    </li>\n                </ul>\n            </div>\n\n        </div>\n        <div ng-show="!empty(selectedCircuit)" class="col-md-9 adminContent">\n            <div class="row">\n                <div class="col-lg-12">\n                    <div class="col-md-8">\n                        <form name="creationCircuit">\n\n                            <div class="input-group">\n                                <input ng-disabled="selectedCircuit.isUsed" ng-pattern="/^[0-9a-zA-ZÀ-ÿ \\-_.]+[0-9a-zA-ZÀ-ÿ]$/"\n                                       name="nomCircuit" id="nomCircuit" ng-model="selectedCircuit.name"\n                                       ng-change="saved = false;" type="text" class="form-control"\n                                       placeholder="{{\'Admin.Circuits.Wo_New\' | translate}}" ng-required="true">\n                                    <span class="input-group-btn">\n                                        <span ng-click="saveCircuit()" class="btn btn-primary">\n                                            <i class="fa fa-floppy-o"></i>\n                                            {{\'Save\' | translate}}\n                                        </span>\n                                        <span class="btn btn-primary" disabled>\n                                            <i class="fa fa-floppy-o"></i>\n                                            {{\'Save\' | translate}}\n                                        </span>\n                                        <span bs-popover="\'popover_used_by\'" data-placement="bottom" data-trigger="hover" ng-if="selectedCircuit.isUsed" class="btn btn-success">\n                                            <i class="fa fa-info-circle"></i>\n                                        </span>\n                                    </span>\n                            </div><!-- /input-group -->\n\n                        </form>\n                    </div>\n                    <div class="col-md-4">\n                        <span class="text-success" ng-if="saved"><i class="fa fa-check"></i> {{\'Admin.Circuits.Wo_Saved\' | translate}}</span>\n                        <span class="text-info" ng-if="selectedCircuit.isCopy"><i class="fa fa-info-circle"></i> {{\'Admin.Circuits.Wo_Copied\' | translate}}</span>\n                        <span class="text-warning" ng-if="((circuits | filter:{name:selectedCircuit.name}:true).length > 0 && selectedCircuit.name && selectedCircuit.name !== baseName && !saved) || alreadyExist"><i class="fa fa-warning"></i> {{\'Admin.Circuits.Wo_Exist\' | translate}}</span>\n                    </div>\n                </div><!-- /.col-lg-6 -->\n            </div><!-- /.row -->\n\n            <div class="col-md-3">\n                <div style="margin-top: 20px; margin-left: 20px; overflow-y: auto; margin-bottom:10px;" class="fixbottom">\n                    <div class="bubble step0">\n                        <span class="action">\n                            <i class="fa fa-check-square-o"></i>\n                        </span>\n                        <p>\n                            {{\'Admin.Circuits.Wo_Creation\' | translate}}  {{\'EMETTEUR\' | translate}}...\n                        </p>\n                    </div>\n                    <div ng-mouseover="overclass = \'showEtape\'" ng-mouseleave="overclass = \'\'" ng-click="addEtape(0)" class="add-step" style="display: inline-block;">\n                        <div class="vertical-line">\n\n                            <p ng-class="overclass">\n                                <i class="fa fa-plus-circle"></i> {{\'Admin.Circuits.Wo_Step\' | translate}}\n                            </p>\n                        </div>\n                    </div>\n                    <ul class="circuit-graph" ui-sortable="sortableOpts" ng-model="selectedCircuit.etapes">\n                        <li ng-class="\'step\' + ($index+1)" ng-if="!$last" ng-repeat="etape in selectedCircuit.etapes">\n                            <div>\n                                <div class="{{\'bubble \' + etape.actionDemandee + \' \' + (selectedEtape.index == $index ? \'active\' : \'\')}}" ng-mousedown="selectEtape(etape, $index)">\n                                    <span style="position:absolute; left: 5%;">\n                                        <i class="fa fa-code" ng-if="etape.listeMetadatas.length > 0" tooltip="Métadonnées obligatoires définies" tooltip-placement="right"></i>\n                                    </span>\n                                    <span class="action" ng-switch="etape.actionDemandee.toLowerCase()">\n                                        <i ng-switch-when="visa" class="fa fa-check-square-o"></i>\n                                        <i ng-switch-when="signature" class="fa ls-signature"></i>\n                                        <i ng-switch-when="mailsecpastell" class="fa fa-envelope-o"></i>\n                                        <i ng-switch-when="mailsec" class="fa fa-envelope"></i>\n                                        <i ng-switch-when="tdt" class="fa fa-cloud-upload"></i>\n                                        <i ng-switch-when="cachet" class="fa ls-stamp"></i>\n                                        <i ng-switch-when="archivage" class="fa fa-flag-checkered"></i>\n                                    </span>\n                                    <p>\n                                        {{(etape.transition == \'PARAPHEUR\') ? etape.parapheurName : (etape.transition | translate) + "..."}}\n                                    </p>\n                                    <span tooltip="{{\'Admin.Circuits.Wo_RemoveStep\' | translate}}" ng-click="deleteEtape($index)" class="deleteEtapeBtn text-danger fa fa-trash-o"></span>\n                                </div>\n                                <div ng-init="overclass=\'\'" ng-mouseover="overclass = \'showEtape\'" ng-mouseleave="overclass = \'\'" ng-click="addEtape($index+1)" class="add-step">\n                                    <div class="vertical-line">\n                                        <p ng-class="overclass">\n                                            <i class="fa fa-plus-circle"></i> {{\'Admin.Circuits.Wo_Step\' | translate}}\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                    </ul>\n                    <div class="bubble" ng-class="selectedCircuit.etapes[selectedCircuit.etapes.length-1].actionDemandee + (selectedEtape.index == selectedCircuit.etapes.length-1 ? \' active\' : \'\') + (\' step\' + selectedCircuit.etapes.length)" ng-click="selectEtape(selectedCircuit.etapes[selectedCircuit.etapes.length-1], selectedCircuit.etapes.length-1)">\n\n                        <span class="action" ng-switch="selectedCircuit.etapes[selectedCircuit.etapes.length-1].actionDemandee.toLowerCase()">\n                            <i ng-switch-when="visa" class="fa fa-check-square-o"></i>\n                            <i ng-switch-when="signature" class="fa ls-signature"></i>\n                            <i ng-switch-when="mailsecpastell" class="fa fa-envelope-o"></i>\n                            <i ng-switch-when="mailsec" class="fa fa-envelope"></i>\n                            <i ng-switch-when="tdt" class="fa fa-cloud-upload"></i>\n                            <i ng-switch-when="cachet" class="fa ls-stamp"></i>\n                            <i ng-switch-when="archivage" class="fa fa-flag-checkered"></i>\n                        </span>\n\n                        <p>\n                            {{(selectedCircuit.etapes[selectedCircuit.etapes.length-1].transition == \'PARAPHEUR\') ? selectedCircuit.etapes[selectedCircuit.etapes.length-1].parapheurName : (selectedCircuit.etapes[selectedCircuit.etapes.length-1].transition | translate) + "..."}}\n                        </p>\n                    </div>\n                </div>\n            </div>\n            <div ng-show="!empty(selectedEtape)" class="col-md-9" style="margin-top:20px;">\n                <div class="well">\n                    <div class="row">\n                        <div ng-if="selectedEtape.actionDemandee != \'ARCHIVAGE\'" class="col-md-4">\n                            <h3 class="control-label">{{\'Admin.Circuits.Wo_Action\' | translate}}</h3>\n                            <div>\n                                <span class="step-select" ng-click="selectedEtape.actionDemandee = \'SIGNATURE\'" ng-class="selectedEtape.actionDemandee == \'SIGNATURE\' ? \'active\' : \'\'">\n                                    <i class="fa fa-2x ls-signature"></i>\n                                    Signature\n                                </span>\n                                <span class="step-select" ng-click="selectedEtape.actionDemandee = \'VISA\'" ng-class="selectedEtape.actionDemandee == \'VISA\' ? \'active\' : \'\'">\n                                    <i class="fa fa-2x fa-check-square-o"></i>\n                                    Visa\n                                </span>\n                                <span class="step-select" ng-click="selectedEtape.actionDemandee = \'MAILSEC\'" ng-class="selectedEtape.actionDemandee == \'MAILSEC\' ? \'active\' : \'\'">\n                                    <i class="fa fa-2x fa-envelope"></i>\n                                    Mail sécurisé S²LOW\n                                </span>\n                                <span class="step-select" ng-click="selectedEtape.actionDemandee = \'MAILSECPASTELL\'" ng-class="selectedEtape.actionDemandee == \'MAILSECPASTELL\' ? \'active\' : \'\'">\n                                    <i class="fa fa-2x fa-envelope-o"></i>\n                                    Mail sécurisé PASTELL\n                                </span>\n                                <span class="step-select" ng-click="selectedEtape.actionDemandee = \'TDT\'" ng-class="selectedEtape.actionDemandee == \'TDT\' ? \'active\' : \'\'">\n                                    <i class="fa fa-2x fa-cloud-upload"></i>\n                                    Télé-transmission\n                                </span>\n                                <span class="step-select" ng-click="selectedEtape.actionDemandee = \'CACHET\'" ng-class="selectedEtape.actionDemandee == \'CACHET\' ? \'active\' : \'\'">\n                                    <i class="fa fa-2x ls-stamp"></i>\n                                    Cachet serveur\n                                </span>\n                            </div>\n                        </div>\n                        <div class="col-md-8">\n                            <h3 class="control-label">{{\'Admin.Circuits.Wo_Desk\' | translate}}</h3>\n                            <div>\n                                <p style="font-size: 14px;"><b>{{\'Admin.Circuits.Wo_Actual\' | translate}} :</b>\n                                    <span>\n                                        {{selectedEtape.transition == \'PARAPHEUR\' ? selectedEtape.parapheurName : ((selectedEtape.transition | translate) + "...")}}\n                                    </span>\n                                </p>\n                                <div>\n                                    <div class="input-group">\n                                        <span class="input-group-addon"><i class="fa fa-search fa-fw"></i></span>\n                                        <input placeholder="{{\'Search\' | translate}}" ng-model="searchEtapeBureau" ng-change="listHandler.search(searchEtapeBureau)" class="form-control unvalidate" type="text">\n                                    </div>\n\n                                    <div style="height:15px;" ng-if="listHandler.total > 0 && listHandler.total > listHandler.maxSize">\n                                        <span class="text-warning float-right">\n                                            {{listHandler.page*listHandler.maxSize +1}}-{{(listHandler.page+1)*listHandler.maxSize < listHandler.total ? (listHandler.page+1)*listHandler.maxSize : listHandler.total}} {{\'On\' | translate}} {{listHandler.total}}\n                                            <span class="btn btn-default fa fa-chevron-left force-display" ng-disabled="listHandler.page === 0" ng-click="listHandler.pagine(-1)"></span>\n                                            <span class="btn btn-default fa fa-chevron-right force-display" ng-disabled="listHandler.page+1 >= (listHandler.total/listHandler.maxSize)" ng-click="listHandler.pagine(1)"></span>\n                                        </span>\n                                    </div>\n                                </div>\n                                <ul class="list-unstyled nav nav-pills nav-stacked adminContent list-data">\n                                    <li>\n                                        <a ng-click="listHandler.selectEtape(\'EMETTEUR\')">\n                                            <i ng-class="selectedEtape.transition === \'EMETTEUR\' ? \'fa fa-arrow-right text-success\' : \'\'"></i><i ng-if="selectedEtape.transition !== \'EMETTEUR\'" style="width: 13px;display:inline-block;"></i> {{\'EMETTEUR\' | translate}}...\n                                        </a>\n                                    </li>\n                                    <li>\n                                        <a ng-click="listHandler.selectEtape(\'CHEF_DE\')">\n                                            <i ng-class="selectedEtape.transition === \'CHEF_DE\' ? \'fa fa-arrow-right text-success\' : \'\'"></i><i ng-if="selectedEtape.transition !== \'CHEF_DE\'" style="width: 13px;display:inline-block;"></i> {{\'CHEF_DE\' | translate}}...\n                                        </a>\n                                    </li>\n                                    <li>\n                                        <a ng-click="listHandler.selectEtape(\'VARIABLE\')">\n                                            <i ng-class="selectedEtape.transition === \'VARIABLE\' ? \'fa fa-arrow-right text-success\' : \'\'"></i><i\n                                                ng-if="selectedEtape.transition !== \'VARIABLE\'"\n                                                style="width: 13px;display:inline-block;"></i> {{\'VARIABLE\' |\n                                            translate}}...\n                                        </a>\n                                    </li>\n                                    <li ng-repeat="bureau in listHandler.bureaux.slice(listHandler.page*listHandler.maxSize, (listHandler.page*listHandler.maxSize) + listHandler.maxSize)">\n                                        <a ng-click="listHandler.selectEtape(bureau)">\n                                            <i ng-class="selectedEtape.parapheur === bureau.id ? \'fa fa-arrow-right text-success\' : \'\'"></i><i ng-if="selectedEtape.parapheur !== bureau.id" style="width: 13px;display:inline-block;"></i> {{bureau.title}}\n                                        </a>\n                                    </li>\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="col-md-6">\n                            <h3 class="control-label">{{\'Admin.Circuits.Wo_Notifs\' | translate}}</h3>\n                            <span class="text-info"><i class="fa fa-info-circle"></i> {{\'Admin.Circuits.Wo_Search_Info\' | translate}}</span>\n                            <div class="input-group">\n                                <span class="input-group-addon"><i class="fa fa-search fa-fw"></i></span>\n                                <input type="text" class="form-control unvalidate" placeholder="{{\'Search\' | translate}}" ng-model="filterBureau">\n                            </div>\n                            <div class="col-md-6" >\n                                <label class="control-label">{{\'Admin.Circuits.Wo_Desks\' | translate}} :</label>\n                                <ul class="list-unstyled">\n                                    <li class="hover-li pointer" ng-click="selectedEtape.listeNotification.push(\'_emetteur_\')" ng-show="selectedEtape.listeNotification.indexOf(\'_emetteur_\') == -1">\n                                        <i class="fa fa-plus-circle text-success" ></i>\n                                        {{\'EMETTEUR\' | translate}}...\n                                    </li>\n                                    <li class="hover-li pointer" ng-click="selectedEtape.listeNotification.push(bureau.id)" ng-repeat="bureau in listHandler.list | filter:filterBureau | notSameId:selectedEtape.listeNotification" ng-show="$index <= 9">\n                                        <i class="fa fa-plus-circle text-success"></i>\n                                        {{bureau.title}}\n                                    </li>\n                                </ul>\n                                <p class="label label-info" ng-if="(listHandler.list | filter:filterBureau | notSameId:selectedEtape.listeNotification).length > 10">Tous les bureaux ne sont pas affichés, merci d\'affiner votre recherche</p>\n                            </div>\n                            <div class="col-md-6">\n                                <label class="control-label">{{\'Admin.Circuits.Wo_Notified\' | translate}} :</label>\n                                <div class="text-info" ng-if="selectedEtape.listeNotification.length === 0"><i class="fa fa-info-circle"></i> {{\'Admin.Circuits.Wo_Notified_None\' | translate}}</div>\n                                <ul class="list-unstyled">\n                                    <li class="hover-li pointer" ng-repeat="notifie in selectedEtape.listeNotification" ng-click="selectedEtape.listeNotification.splice(selectedEtape.listeNotification.indexOf(notifie), 1)">\n                                        <i class="fa fa-times-circle text-danger"></i>\n                                        {{notifie | getNameWithId:listHandler.list}}\n                                    </li>\n                                </ul>\n                            </div>\n                        </div>\n                        <div class="col-md-6">\n                            <h3 class="control-label">Métadonnées obligatoires</h3>\n                            <span class="text-info col-md-12">\n                                <i class="fa fa-info-circle"></i>\n                                Ces métadonnées seront à renseigner lors de la validation de cette étape\n                            </span>\n                            <div class="col-md-6">\n                                <label class="control-label">Disponibles :</label>\n                                <ul class="list-unstyled">\n                                    <li class="hover-li pointer" ng-click="selectedEtape.listeMetadatas.push(meta.id)" ng-repeat="meta in listMetaHandler.list | notSameId:selectedEtape.listeMetadatas">\n                                        <i class="fa fa-plus-circle text-success"></i>\n                                        {{meta.name}}\n                                    </li>\n                                </ul>\n                            </div>\n                            <div class="col-md-6">\n                                <label class="control-label">Obligatoires :</label>\n                                <ul class="list-unstyled">\n                                    <li class="hover-li pointer" ng-repeat="meta in selectedEtape.listeMetadatas" ng-click="selectedEtape.listeMetadatas.splice(selectedEtape.listeMetadatas.indexOf(meta), 1)">\n                                        <i class="fa fa-times-circle text-danger"></i>\n                                        {{listMetaHandler.getNameWithId(meta).name}}\n                                    </li>\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n                    <button ng-click="deleteEtape()" ng-if="selectedEtape.actionDemandee != \'ARCHIVAGE\'" class="btn-block btn btn-danger">\n                        <i class="fa fa-trash-o"></i>\n                        {{\'Admin.Circuits.Wo_RemoveStep\' | translate}}\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>');
}]),angular.module("templates/admin/dossiers.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/admin/dossiers.html",'<div class="row-fluid">\n    <div class="menuAdmin col-md-3 label label-info headertop" removeonsize="992" classes-list="label label-info" ng-include src="\'partials/adminNavbar.html\'"></div>\n    <div class="col-md-12 adminContent">\n        <!-- contenu -->\n        <div class="row">\n            <div class="col-md-2">\n                <h2>{{\'Admin.Dossiers.Title\' | translate}}</h2>\n            </div>\n            <div class="col-md-10">\n                <div class="row">\n                    <div class="col-md-12">\n                        <div class="row">\n                            <div class="col-md-3">\n                                <label for="type">{{\'Admin.Dossiers.Filter_Type\' | translate}}</label>\n                                <div class="form-group">\n                                    <select ng-options="type.id as type.id for type in types" id="type"  class="form-control unvalidate" ng-model="opt.type" ng-change="opt.sousType = \'\'" name="type">\n                                        <option value="">-- {{\'None\' | translate}} --</option>\n                                    </select>\n                                </div>\n                            </div>\n                            <div class="col-md-3">\n                                <label for="subtype">{{\'Admin.Dossiers.Filter_Sub\' | translate}}</label>\n                                <div class="form-group">\n                                    <select ng-options="subtype.id as subtype.id for subtype in (types | findWithId:opt.type).sousTypes " id="subtype" class="form-control unvalidate" ng-model="opt.sousType" name="subtype">\n                                        <option value="">-- {{\'None\' | translate}} --</option>\n                                    </select>\n                                </div>\n                            </div>\n                            <div class="col-md-3">\n                                <div class="form-group">\n                                    <label class="control-label" style="width:100%;" for="beforeEmit">\n                                        {{\'Admin.Dossiers.Emit_date\' | translate}}\n                                        <i class="fa fa-question-circle"\n                                           tooltip="{{\'Admin.Dossiers.Emit_date_help\' | translate}}"></i>\n\n                                    </label>\n                                    <div class="input-group validation-control" style="width: auto !important;">\n                                        <input type="text" id="beforeEmit" max-date="today" name="beforeEmit"\n                                               return-format="timestamp" ng-model="opt.beforeEmit"\n                                               class="form-control unvalidate" ip-datepicker readonly=\'true\'/>\n                                        <span ng-if="!!opt.beforeEmit" ng-click="opt.beforeEmit = undefined"\n                                              class="pointer input-group-addon">\n                                                    <i class="fa fa-times"></i>\n                                                </span>\n                                        <label for="beforeEmit" ng-if="!opt.beforeEmit" class="input-group-addon">\n                                            <i class="fa fa-calendar"></i>\n                                        </label>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="col-md-3">\n                                <div class="checkbox">\n                                    <label class="ng-binding" for="endedDossiers">Afficher seulement les dossiers en\n                                        cours\n                                        <input class="unvalidate" id="endedDossiers" ng-model="opt.showOnlyCurrent"\n                                               name="endedDossiers" type="checkbox">\n                                    </label>\n                                </div>\n                                <div class="checkbox">\n                                    <label class="ng-binding" for="lateDossiers">Afficher seulement les dossiers en\n                                        retard\n                                        <input class="unvalidate" id="lateDossiers" ng-model="opt.showOnlyLate"\n                                               name="lateDossiers" type="checkbox">\n                                    </label>\n                                </div>\n                            </div>\n\n                        </div>\n                        <div class="row">\n                            <div ng-if="!config.isAdminFonctionnel()" class="col-md-3">\n                                <label for="bureau">\n                                    {{\'Admin.Dossiers.Filter_Desk\' | translate}}\n                                </label>\n                                <div class="input-group">\n                                    <div class="right-inner-addon">\n                                        <input id="bureau" type="text" class="form-control unvalidate" ng-model="opt.bureau" placeholder="{{\'Admin.Dossiers.Find_Desk\' | translate}}"\n                                               typeahead="bureau as bureau.title for bureau in bureaux | filter:$viewValue | limitTo:8"\n                                               name="bureau">\n                                    </div>\n\n                                    <span style="white-space: normal;cursor: pointer;" class="input-group-addon"\n                                          tooltip-trigger="click" tooltip-placement="bottom"\n                                          tooltip="{{\'Admin.Dossiers.Find_Desk_Info\' | translate}}">\n                                        <i ng-class="!!opt.bureau.id ? \'text-success fa-check\' : \'text-warning fa-question-circle\'"\n                                           class="fa fa-question-circle"></i>\n                                    </span>\n                                </div>\n                            </div>\n                            <div ng-if="config.isAdminFonctionnel()" class="col-md-3">\n                                <label for="bureauFonctionnel">{{\'Admin.Dossiers.Filter_Desk\' | translate}}</label>\n                                <div class="input-group">\n                                    <div class="right-inner-addon">\n                                        <input id="bureauFonctionnel" type="text" class="form-control unvalidate" ng-model="opt.bureau" placeholder="{{\'Admin.Dossiers.Find_Desk\' | translate}}"\n                                               typeahead="bureau as bureau.name for bureau in bureaux | sameId:config.adminFonctionnel() | filter:$viewValue | limitTo:8"\n                                               name="bureauFonctionnel">\n                                    </div>\n                                     <span style="white-space: normal;cursor: pointer;" class="input-group-addon"\n                                           tooltip-trigger="click" tooltip-placement="bottom"\n                                           tooltip="{{\'Admin.Dossiers.Find_Desk_Info\' | translate}}">\n                                        <i ng-class="!!opt.bureau.id ? \'text-success fa-check\' : \'text-warning fa-question-circle\'"\n                                           class="fa fa-question-circle"></i>\n                                    </span>\n                                </div>\n                            </div>\n                            <div class="col-md-3">\n                                <label for="recherche">{{\'Admin.Dossiers.Filter_Title\' | translate}}</label>\n                                <div class="form-group">\n                                    <input id="recherche" type="text" class="form-control unvalidate" ng-model="opt.title" placeholder="{{\'Search\' | translate}}" name="recherche">\n                                </div>\n\n                            </div>\n                            <div class="col-md-3">\n                                <div class="form-group">\n                                    <label class="control-label" style="width:100%;" for="staticSince">\n                                        {{\'Admin.Dossiers.Static_since\' | translate}}\n                                        <i class="fa fa-question-circle"\n                                           tooltip="{{\'Admin.Dossiers.Static_since_help\' | translate}}"></i>\n\n\n                                    </label>\n                                    <div class="input-group validation-control" style="width: auto !important;">\n                                        <input type="text" id="staticSince" max-date="today" name="staticSince"\n                                               return-format="timestamp" ng-model="opt.staticSince"\n                                               class="form-control unvalidate" ip-datepicker readonly=\'true\'\n                                               max-date="today"/>\n                                        <span ng-if="!!opt.staticSince" ng-click="opt.staticSince = undefined"\n                                              class="pointer input-group-addon">\n                                                    <i class="fa fa-times"></i>\n                                                </span>\n                                        <label for="staticSince" ng-if="!opt.staticSince" class="input-group-addon">\n                                            <i class="fa fa-calendar"></i>\n                                        </label>\n                                    </div>\n\n                                </div>\n                            </div>\n                            <div class="col-md-3">\n                                <div class="row">\n                                    <div class="col-md-12">\n                                        <span ng-click="getDossiers(opt)" class="btn btn-success col-xs-12" ng-disabled="buttonsDisabled">\n                                            <i class="fa fa-search"></i>\n                                            {{\'Find\' | translate}}\n                                        </span>\n                                    </div>\n                                    <div class="col-md-12">\n                                        <span ng-click="opt = copy(noneOpt); hasSearch = false;" class="btn btn-info col-xs-12"\n                                              ng-disabled="buttonsDisabled">\n                                            <i class="fa fa-undo"></i>\n                                            {{\'Reset\' | translate}}\n                                        </span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n        <div class="row" ng-show="hasSearch">\n            <div class="col-md-12">\n                <table ng-table="tableParams" class="table table-striped" ng-show="!buttonsDisabled && hasFoundFolder">\n                    <tr ng-repeat="dossier in $data" ng-init="completelyLocked = isUnlockable(dossier)" ng-class="completelyLocked ? \'text-danger\' : \'\'">\n                        <td data-title="\'Title\' | translate" sortable="\'title\'">\n                            <i ng-if="dossier.locked && !completelyLocked" class="text-info fa fa-clock-o fa-2x" tooltip-placement="right" tooltip="{{\'Admin.Dossiers.Currently\' | translate}}"></i>\n                            <i ng-if="completelyLocked" class="text-danger fa fa-warning fa-2x" tooltip-placement="right" tooltip="{{(\'Admin.Dossiers.Locked\' | translate).replace(\'__var__\', properties[\'parapheur.ihm.admin.dossier.locked.notify\'] || 600)}}"></i>\n                            {{dossier.title}}\n                        </td>\n                        <td data-title="\'Admin.Dossiers.Current_Desk\' | translate" sortable="\'parent\'">\n                            {{(bureaux | findWithId:dossier.parent).title}}\n                        </td>\n                        <td data-title="\'Admin.Dossiers.Emit_Date\' | translate" sortable="\'dateEmission\'">\n                            {{dossier.dateEmission | texttodate | date:\'dd/MM/yyyy à HH:mm\'}}\n                        </td>\n                        <td data-title="\'Admin.Dossiers.Modif_Date\' | translate" sortable="\'modified\'">\n                            {{dossier.modified | texttodate | date:\'dd/MM/yyyy à HH:mm\'}}\n                        </td>\n                        <td data-title="\'Admin.Dossiers.Type\' | translate" sortable="\'type\'">\n                            {{dossier.type}}\n                        </td>\n                        <td data-title="\'Admin.Dossiers.Sub\' | translate" sortable="\'sousType\'">\n                            {{dossier.sousType}}\n                        </td>\n                        <td data-title="\'Admin.Dossiers.State\' | translate" sortable="\'banetteName\'">\n                            {{getStateName(dossier.banetteName)}}\n                        </td>\n                        <td style="text-align: center;" data-title="\'Admin.Dossiers.Actions\' | translate">\n                            <span ng-click="unlock(dossier)" ng-if="completelyLocked" class="btn btn-warning" title="{{\'Admin.Dossiers.Unlock\' | translate}}">\n                                <i class="fa fa-unlock"></i>\n                            </span>\n                            <span ng-click="confirmTransfert(dossier)" ng-if="isEnCours(dossier.banetteName) && !dossier.locked" class="btn btn-info" title="{{\'Admin.Dossiers.Transfert\' | translate}}">\n                                <i class="fa fa-share"></i>\n                            </span>\n                            <span ng-click="confirmDelete(dossier)" ng-if="!dossier.locked" class="btn btn-danger" title="{{\'Delete\' | translate}}">\n                                <i class="fa fa-trash-o"></i>\n                            </span>\n                            <span ng-click="viewJournal(dossier)" class="btn btn-default" title="{{\'Admin.Dossiers.Events\' | translate}}">\n                                <i class="fa fa-list-alt"></i>\n                            </span>\n                            <span ng-if="properties[\'parapheur.ihm.admin.mode.advanced\'] === \'true\' && config.isAdmin" ng-click="viewProperties(dossier)" class="btn btn-success" title="{{\'Admin.Dossiers.Advanced\' | translate}}">\n                                <i class="fa fa-info"></i>\n                            </span>\n                        </td>\n                    </tr>\n                </table>\n\n                <div class="col-md-offset-5" ng-if="!hasFoundFolder">\n                    <span class="text text-info"><i class="fa fa-info-circle"></i> {{\'Admin.Dossiers.No_Folders\' | translate}}</span>\n                </div>\n\n                <div class="row">\n                    <div style="margin-top:30px;" class="col-md-12">\n                        <span us-spinner spinner-key="spinnerDossiers"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>')}]),angular.module("templates/admin/groupes.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/admin/groupes.html",'<div class="row-fluid">\n    <div class="menuAdmin col-md-3 label label-info headertop" removeonsize="992" classes-list="label label-info" ng-include src="\'partials/adminNavbar.html\'"></div>\n    <div class="col-md-6 adminContent">\n        <h2 style="display:inline-block;">{{\'Admin.Groupes.Gr_Title\' | translate}}</h2>\n        <span  style="margin-bottom:20px; margin-left:50px;"  class="btn btn-success" ng-click="createGroup()">\n            <i class="fa fa-plus"></i>\n            {{\'Admin.Groupes.Gr_New\' | translate}}\n        </span>\n        <div>\n            <div class="col-md-6">\n                <div class="input-group">\n                    <span class="input-group-addon"><i class="fa fa-search fa-fw"></i></span>\n                    <input type="text" class="unvalidate form-control" placeholder="{{\'Admin.Groupes.Gr_Filter\' | translate}}" ng-model="search">\n                </div>\n            </div>\n            <div class="col-md-12 text-info"><i class="fa fa-info-circle"></i> {{\'Admin.Groupes.Gr_Filter_Info\' | translate}}</div>\n        </div>\n        <div class="well adminContent col-md-12">\n            <abn-tree-groups tree-data="groupes"\n                             on-select="selectGroup(branch);"\n                             on-delete="deleteGroup(branch)"\n                             search="queryGroups"></abn-tree-groups>\n        </div>\n    </div>\n    <div class="col-md-6 adminContent">\n        <div ng-if="!empty(selectedGroup)" class="adminContent col-md-12 well">\n            <div class="col-md-12">\n\n                <form name="editGroup" novalidate>\n                    <legend ng-if="!selectedGroup.isNew">\n                        {{selectedGroup.shortName}}\n                    </legend>\n                    <legend ng-if="selectedGroup.isNew">\n                        {{\'Admin.Groupes.Gr_Create\' | translate}}\n                    </legend>\n\n                    <label ng-if="selectedGroup.isNew" class="col-md-12">\n                        {{\'Admin.Groupes.Gr_Name\' | translate}} :\n                        <input class="form-control" name="nomGroup" ng-minlength="1" type="text" ng-model="selectedGroup.shortName" ng-pattern=\'/^[^&:"£*/<>?%|+;]*$/\' required diff-array="unorderedGroupes" placeholder="{{\'Admin.Groupes.Gr_New_Name\' | translate}}" attr="shortName">\n                        <span class="text-danger" ng-show="editGroup.nomGroup.$error.pattern"><i class="fa fa-warning"></i> {{\'Admin.Groupes.Gr_SpeChar\' | translate}}</span>\n                    </label>\n                    <div ng-if="selectedGroup.isNew">\n                        <label class="col-md-12">\n                            {{\'Admin.Groupes.Gr_Parent\' | translate}} :\n                            <select class="form-control unvalidate" ng-model="selectedGroup.parent">\n                                <option value="">-- {{\'None\' | translate}} --</option>\n                                <option ng-value="group.shortName" ng-repeat="group in unorderedGroupes">\n                                    {{group.shortName}}\n                                </option>\n                            </select>\n                        </label>\n                    </div>\n                </form>\n\n                <div class="row">\n                    <div class="col-md-6">\n                        <label>{{\'Admin.Groupes.Gr_Add_Member\' | translate}} :</label>\n                        <div>\n                            <div>\n                                <div class="input-group">\n                                    <span class="input-group-addon"><i class="fa fa-search fa-fw"></i></span>\n                                    <input placeholder="{{\'Search\' | translate}}" ng-model="searchUser" ng-change="listUsersHandler.search(searchUser)" class="form-control unvalidate" type="text">\n                                </div>\n\n                                <div style="height:30px;" ng-if="listUsersHandler.maxSize < listUsersHandler.total">\n                                <span class="text-warning float-right">\n                                    {{listUsersHandler.page*listUsersHandler.maxSize +1}}-{{(listUsersHandler.page+1)*listUsersHandler.maxSize < listUsersHandler.total ? (listUsersHandler.page+1)*listUsersHandler.maxSize : listUsersHandler.total}} {{\'On\' | translate}} {{listUsersHandler.total}}\n                                    <span class="btn btn-default fa fa-chevron-left force-display" ng-disabled="listUsersHandler.page === 0" ng-click="listUsersHandler.pagine(-1)"></span>\n                                    <span class="btn btn-default fa fa-chevron-right force-display" ng-disabled="listUsersHandler.page+1 >= (listUsersHandler.total/listUsersHandler.maxSize)" ng-click="listUsersHandler.pagine(1)"></span>\n                                </span>\n                                </div>\n                            </div>\n\n                            <span class="text-info" ng-if="listUsersHandler.total == 0 || (listUsersHandler.subList.length === 0 && $scope.selectedGroup.users.length === 0)"><i class="fa fa-info-circle"></i> {{\'Admin.Groupes.Gr_None_Result\' | translate}}</span>\n                            <ul class="list-unstyled nav nav-pills nav-stacked adminContent list-data" style="margin-top:5px;margin-bottom: 20px;">\n                                <li ng-repeat="user in listUsersHandler.subList" ng-switch on="userAlreadyInGroup(user)">\n                                    <a ng-click="addUserToGroup(user)" ng-switch-when="true">\n                                        <i class="fa fa-plus-circle text-success"></i> {{user.firstName}} {{user.lastName}} ({{user.username}})\n                                    </a>\n                                    <a class="disabled" ng-switch-default>\n                                        {{user.firstName}} {{user.lastName}} ({{user.username}})\n                                    </a>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                    <div class="col-md-6">\n                        <label>{{\'Admin.Groupes.Gr_Members\' | translate}} :</label>\n                        <ul class="list-unstyled">\n                            <li ng-class="(selectedGroup.shortName === \'ALFRESCO_ADMINISTRATORS\' && user.shortName.split(\'@\')[0] ===\'admin\') ? \'\' : \'hover-li pointer\'" ng-repeat="user in selectedGroup.users" ng-click="removeUserFromGroup($index)"><i ng-hide="selectedGroup.shortName === \'ALFRESCO_ADMINISTRATORS\' && user.shortName.split(\'@\')[0] ===\'admin\'" class="fa fa-times-circle text-danger"></i> {{user.fullName}} ({{user.shortName}})</li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="col-md-6">\n                    <span ng-if="!selectedGroup.isNew" class="btn btn-primary" ng-click="saveGroup()" ng-disabled="saving">\n                        <i class="fa fa-floppy-o"></i>\n                        <span>{{\'Save\' | translate}}</span>\n                    </span>\n                    <span ng-if="selectedGroup.isNew" ng-disabled="!editGroup.$valid" class="btn btn-primary" ng-click="saveGroup()" ng-disabled="saving">\n                        <i class="fa fa-floppy-o"></i>\n                        <span>{{\'Save\' | translate}}</span>\n                    </span>\n                    <span us-spinner spinner-key="spinnerGroups"></span>\n                    <span ng-show="saved" class="alert alert-success">{{\'Admin.Groupes.Gr_Saved\' | translate}}</span>\n                    <span ng-if="selectedGroup.isNew && selectedGroup.shortName !== \'\' && editGroup.nomGroup.$error.isdiff" class="block alert alert-danger">{{\'Admin.Groupes.Gr_Exist\' | translate}}</span>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>')}]),angular.module("templates/admin/informations.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/admin/informations.html",'<script type="text/ng-template"  id="popover_users">\n    <ul class="list-unstyled">\n        <li ng-repeat="user in infos.users">{{user}}</li>\n    </ul>\n</script>\n\n<div class="row-fluid">\n    <div class="menuAdmin col-md-3 label label-info headertop" removeonsize="992" classes-list="label label-info" ng-include src="\'partials/adminNavbar.html\'"></div>\n    <div ng-cloak class="col-md-11 col-md-offset-1">\n        <h2>{{\'Admin.Informations.Info_Title\' | translate}}</h2>\n        <div class="row">\n            <div class="col-md-3">\n                <div>\n                    <span class="btn btn-info" ng-if="!isTenant" ng-click="reloadInfos()"><i class="fa fa-refresh"></i> {{\'Admin.Informations.Info_Reload\' | translate}}</span>\n                    <span class="btn btn-success" ng-click="launchHealthStatus()"><i\n                            class="fa fa-medkit"></i> {{\'Admin.Informations.Info_Health\' | translate}}</span>\n\n                    <div ng-show="reload.all" class="text-info">{{\'Admin.Informations.Info_Reloaded\' | translate}} <i\n                            class="fa fa-check"></i></div>\n                </div>\n                <div ng-if="!isTenant">\n                    <p><br><strong>{{\'Admin.Informations.Users_Connected\' | translate}} :</strong>\n                        {{infos.users.length}}\n                        <i ng-if="infos.users.length <= +properties[\'parapheur.ihm.admin.users.connected.threshold\']" title="Utilisateurs connectés" class="fa fa-question-circle pointer" bs-popover="\'popover_users\'" data-trigger="hover"></i>\n                    </p>\n                </div>\n                <div>\n                    <h3>{{\'Admin.Informations.Info_Check\' | translate}}</h3>\n\n                    <div>\n                        <i tooltip="{{\'Admin.Informations.Info_Relaunch\' | translate}}"\n                           ng-if="infos.office.available && !isTenant" ng-click="restartOffice()"\n                           class="fa fa-refresh pointer"></i>\n                        <strong>{{infos.office.available && infos.office.ooName ? infos.office.ooName + " " +\n                            infos.office.ooSetupVersion : "OpenOffice"}} : </strong>\n                        <i class="fa-2x"\n                           ng-class="infos.office.available ? \'text-success fa fa-check\' : \'text-danger fa fa-times\'"></i>\n                        <span class="text-success" ng-if="reload.office">\n                            {{\'Admin.Informations.Info_Office_Success\' | translate}}\n                        </span>\n                        <span class="text-danger" ng-if="reload.errorOffice">\n                            {{\'Admin.Informations.Info_Office_Error\' | translate}}\n                        </span>\n                    </div>\n                    <div>\n                        <i tooltip="{{\'Admin.Informations.Info_Relaunch\' | translate}}"\n                           ng-if="!isTenant && !reload.xemelios" ng-click="restartXemelios()"\n                           class="fa fa-refresh pointer"></i>\n                        <strong>Xemelios : </strong>\n                        <i ng-if="!reload.xemelios" class="fa-2x"\n                           ng-class="infos.isXemEnabled ? \'text-success fa fa-check\' : \'text-danger fa fa-times\'"></i>\n\n                        <div class="inline" ng-class="reload.xemelios ? \'css-loader\' : \'\'"></div>\n                        <span ng-if="reload.xemelios" class="text text-info">{{\'Admin.Informations.Info_Wait\' | translate}}</span>\n                    </div>\n                    <div ng-if="!infos.isGSEnabled"><strong>GhostScript : </strong><i class="fa-2x"\n                                                                                      ng-class="infos.isGSEnabled ? \'text-success fa fa-check\' : \'text-danger fa fa-times\'"></i>\n                    </div>\n                    <div ng-if="!isTenant">\n                        <i tooltip="{{\'Admin.Informations.Info_Reload\' | translate}}" ng-click="reloadProperties()" ng-if="!isTenant" class="fa fa-refresh pointer"></i>\n                        <strong>{{\'Admin.Informations.Info_Prop\' | translate}} : </strong>\n                        <i class="fa-2x" ng-class="infos.isPropertiesFound ? \'text-success fa fa-check\' : \'text-danger fa fa-times\'"></i>\n                        <span class="text-success" ng-if="reload.properties">\n                            {{\'Admin.Informations.Info_Prop_Reload\' | translate}}\n                        </span>\n                        <span class="text-danger" ng-if="reload.errorProperties">\n                            {{\'Admin.Informations.Info_Prop_Error\' | translate}} <i class="fa fa-warning"></i>\n                        </span>\n                    </div>\n                    <div ng-if="infos.isASEnabled"><strong>LiberValid : </strong><i class="fa-2x"\n                                                                                    ng-class="infos.isASEnabled ? \'text-success fa fa-check\' : \'text-danger fa fa-times\'"></i>\n                    </div>\n                </div>\n                <div ng-if="!isTenant">\n                    <h3>{{\'Admin.Informations.Info_CPU\' | translate}}</h3>\n                    <p><strong>{{\'Admin.Informations.Info_Core\' | translate}} :</strong> {{infos.cores}}</p>\n                </div>\n            </div>\n            <div class="col-md-4" ng-if="!isTenant">\n                <div id="memChart" style="height: 300px;" pie-chart pie-title="\'Admin.Informations.Info_Mem\' | translate" pie-tooltip="\'{name}: {y} Mo\'" dataset="memChartData"></div>\n            </div>\n            <div class="col-md-4" ng-if="!isTenant">\n                <div id="diskChart" style="height: 300px;" pie-chart pie-title="\'Admin.Informations.Info_HDD\' | translate" pie-tooltip="\'{name}: {y} Go\'" dataset="diskChartData"></div>\n            </div>\n        </div>\n\n    </div>\n</div>')}]),angular.module("templates/admin/nodebrowser.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/admin/nodebrowser.html",'<div class="row-fluid">\n    <div class="menuAdmin col-md-3 label label-info headertop" removeonsize="992" classes-list="label label-info" ng-include src="\'partials/adminNavbar.html\'"></div>\n    <div>\n        <!-- contenu -->\n        <div class="col-md-3 adminContent">\n            <h2>Node browser</h2>\n            <ul>\n                <li ng-click="goToPathIndex($index)" ng-repeat="path in rootPath">\n                    {{path}}\n                </li>\n            </ul>\n        </div>\n\n        <div class="col-md-9 adminContent">\n            <h2>Propriétés</h2>\n            <ul>\n                <li ng-repeat="(key, value) in objectProps">\n                    {{key}} : {{value}}\n                </li>\n            </ul>\n            <h2>Navigation</h2>\n            <ul>\n                <li ng-click="selectNode(item.name)" ng-repeat="item in datatree.items">\n                    {{item.name}}\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>\n')}]),angular.module("templates/admin/script.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/admin/script.html",'<div class="row-fluid">\n    <div class="menuAdmin col-md-3 label label-info headertop" removeonsize="992" classes-list="label label-info" ng-include src="\'partials/adminNavbar.html\'"></div>\n    <div class="row adminContent">\n        <div class="col-md-6">\n            <h2>{{\'Admin.Avance.Script.Script_execution\' | translate}}</h2>\n        </div>\n\n        <div class="col-md-offset-1 col-md-6 text-info">\n            <i class="fa fa-info-circle"></i>\n            {{\'Admin.Avance.Script.Execute_as_admin\' | translate}}\n            <input type="text" ng-model="runas" class="unvalidate form-control inline" style="width:auto;">\n            {{\'Admin.Avance.Script.of_tenant\' | translate}}\n            <select ng-model="selectedTenant" ng-options="tenant.name for tenant in tenantList | orderBy:\'name\'"\n                    class="unvalidate form-control inline" style="width:auto;">\n                <option value="">-- ROOT --</option>\n            </select>\n        </div>\n    </div>\n\n    <div class="row">\n        <div class="col-md-12">\n            <div class="col-md-4">\n                <h3>Script</h3>\n                <div ui-ace="{\n                      useWrapMode : true,\n                      showGutter: true,\n                      theme:\'twilight\',\n                      mode: \'javascript\'\n                }" ng-model="script" style="height:400px;"></div>\n                <span ng-click="sendScript()" class="btn btn-success"> {{\'Admin.Avance.Script.Execute_script\' | translate}}</span>\n                <span ng-if="scriptError" class="text-danger"><i class="fa fa-warning"></i> {{\'Admin.Avance.Script.Error_on_script_execution\' | translate}}</span>\n            </div>\n            <div class="col-md-4">\n                <h3>Modèle</h3>\n                <div ui-ace="{\n                      useWrapMode : true,\n                      showGutter: true,\n                      theme:\'twilight\',\n                      mode: \'ftl\'\n                }" ng-model="template" style="height:400px;"></div>\n\n                <label class="checkbox">\n                    <input class="unvalidate" type="checkbox" ng-model="readOnly"/>\n                    {{\'Admin.Avance.Script.Read_only\' | translate}}\n                </label>\n            </div>\n            <div class="col-md-4">\n                <h3>Résultat</h3>\n                <div ng-if="renderedTemplate">\n                    <h4 ng-if="!scriptError">{{\'Admin.Avance.Script.Model\' | translate}}</h4>\n                    <h4 ng-if="scriptError">{{\'Admin.Avance.Script.Error_message\' | translate}}</h4>\n                    {{renderedTemplate}}\n                </div>\n                <div ng-if="printOutput.length > 0">\n                    <h4>Logs</h4>\n                    <ul class="list-unstyled">\n                        <li ng-repeat="log in printOutput">{{log}}</li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>');
}]),angular.module("templates/admin/stats.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/admin/stats.html",'<div class="row-fluid">\n    <div class="menuAdmin col-md-3 label label-info headertop" removeonsize="992" classes-list="label label-info" ng-include src="\'partials/adminNavbar.html\'"></div>\n    <div class="col-md-4">\n        <!-- contenu -->\n        <div class="col-md-11 col-md-offset-1">\n            <form name="statistiques" novalidate="novalidate">\n\n                <div class="row">\n                    <h2 class="col-md-6">{{\'Admin.Stats.Title\' | translate}}</h2>\n                </div>\n\n\n\n                <h3>{{\'Admin.Stats.Period\' | translate}}</h3>\n\n                <div class="row">\n                    <div class="col-md-6">\n                        <div style="width: 100%;" class="form-group">\n                            <label for="debut">{{\'Admin.Stats.Begin\' | translate}}\n\n                            </label>\n                            <span class="float-right label label-danger"><i class="fa fa-warning"></i> {{\'Mandatory\' | translate}}</span>\n\n                            <div class="input-group col-md-12" style="padding: 0;">\n                                <input id="debut" name="debut" placeholder="{{\'Admin.Stats.Begin\' | translate}}" ng-cloak="" from="true" linked="#fin" ip-id="debut" return-format="@" readonly="true" ip-datepicker type="text" ng-model="opt.fromTime" class="form-control unvalidate" required>\n                                <span ng-if="!!opt.fromTime" ng-click="opt.fromTime = undefined"\n                                      class="pointer input-group-addon">\n                                    <i class="fa fa-times"></i>\n                                </span>\n                                <label for="debut" ng-if="!opt.fromTime" class="input-group-addon">\n                                    <i class="fa fa-calendar"></i>\n                                </label>\n                            </div>\n\n                        </div>\n                    </div>\n\n                    <div class="col-md-6">\n                        <div class="form-group">\n                            <label for="fin">{{\'Admin.Stats.End\' | translate}}\n\n                            </label>\n                            <span class="float-right label label-danger"><i class="fa fa-warning"></i> {{\'Mandatory\' | translate}}</span>\n\n                            <div class="input-group col-md-12" style="padding: 0;">\n                                <input id="fin" name="fin" placeholder="{{\'Admin.Stats.End\' | translate}}" ng-cloak="" linked="#debut" ip-id="fin" return-format="@" readonly="true" ip-datepicker type="text" ng-model="opt.toTime" class="form-control unvalidate" required>\n                                <span ng-if="!!opt.toTime" ng-click="opt.toTime = undefined" class="pointer input-group-addon">\n                                    <i class="fa fa-times"></i>\n                                </span>\n                                <label for="fin" ng-if="!opt.toTime" class="input-group-addon">\n                                    <i class="fa fa-calendar"></i>\n                                </label>\n                            </div>\n\n                        </div>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <label for="cumul">{{\'Admin.Stats.Cumulation\' | translate}}</label>\n                    <select class="form-control unvalidate" id="cumul" name="cumul" ng-model="cumul">\n                        <option value="1">{{\'Admin.Stats.Day\' | translate}}</option>\n                        <option value="2">{{\'Admin.Stats.Week\' | translate}}</option>\n                        <option value="3">{{\'Admin.Stats.Month\' | translate}}</option>\n                        <option value="4">{{\'Admin.Stats.Year\' | translate}}</option>\n                    </select>\n                </div>\n\n                <div class="well dashlet">\n                    <div class="row pos-rel margin-none">\n                        <h3 ng-click="element.show = !element.show" class="pointer">{{\'Admin.Stats.Filter_Desks\' | translate}}</h3>\n                        <div class="checkbox inline-right-checkbox">\n                            <i class="fa fa-question-circle" tooltip-trigger="mouseenter" tooltip-placement="top" tooltip="{{\'Admin.Stats.Accumulative_Info\' | translate}}"></i>\n                            <label>\n                                <input class="unvalidate" ng-model="bureaux.cumul" type="checkbox">\n                                {{\'Admin.Stats.Accumulative\' | translate}}\n                            </label>\n                        </div>\n                        <div class="dashlet-content" bn-slide-show="element.show">\n\n                            <div class="col-md-6">\n                                <div>\n                                    <div class="input-group">\n                                        <span class="input-group-addon"><i class="fa fa-search fa-fw"></i></span>\n                                        <input placeholder="{{\'Search\' | translate}}" ng-model="searchBureau" ng-change="listHandler.search(searchBureau)" class="form-control unvalidate" type="text">\n                                    </div>\n\n                                    <div style="height:15px;" ng-if="listHandler.maxSize < listHandler.total">\n                                    <span class="text-warning float-right">\n                                        {{listHandler.page*listHandler.maxSize +1}}-{{(listHandler.page+1)*listHandler.maxSize < listHandler.total ? (listHandler.page+1)*listHandler.maxSize : listHandler.total}} {{\'On\' | translate}} {{listHandler.total}}\n                                        <span class="btn btn-default fa fa-chevron-left force-display" ng-disabled="listHandler.page === 0" ng-click="listHandler.pagine(-1)"></span>\n                                        <span class="btn btn-default fa fa-chevron-right force-display" ng-disabled="listHandler.page+1 >= (listHandler.total/listHandler.maxSize)" ng-click="listHandler.pagine(1)"></span>\n                                    </span>\n                                    </div>\n                                </div>\n\n                                <span class="text-info" ng-if="listHandler.searchResultSubList.length === 0"><i class="fa fa-info-circle"></i> {{\'Admin.Stats.No_Result\' | translate}}</span>\n\n                                <ul class="list-unstyled nav nav-pills nav-stacked adminContent list-data">\n                                    <li ng-repeat="bureau in listHandler.searchResultSubList">\n                                        <a ng-click="listHandler.selectElement(bureau)">\n                                            <i class="fa fa-plus-circle text-success"></i> {{bureau.name}}\n                                        </a>\n                                    </li>\n                                </ul>\n                            </div>\n                            <div class="col-md-6">\n                                <span ng-if="listHandler.selectedSubList.length === 0" class="text-info"><i class="fa fa-info-circle"></i> {{\'Admin.Stats.All_Selected\' | translate}}</span>\n                                <ul class="list-unstyled pointer">\n                                    <li class="hover-li" ng-click="listHandler.deselectElement(bureau.id)" ng-repeat="bureau in listHandler.selectedSubList">\n                                        <i class="text-danger fa fa-times-circle"></i> {{bureau.name}}\n                                    </li>\n                                </ul>\n                            </div>\n                        </div>\n\n                    </div>\n\n\n                </div>\n\n                <div class="row">\n                    <div class="col-md-6">\n                        <h3>{{\'Admin.Stats.Filter_Types\' | translate}}</h3>\n\n                        <div class="col-md-12">\n                            <div class="form-group">\n                                <label for="type">{{\'Admin.Stats.Types\' | translate}}</label>\n                                <select id="type" ng-model="opt.options.type" name="type" class="form-control unvalidate" ng-options="type.id as type.id for type in types">\n                                    <option value="">{{\'None\' | translate}}</option>\n                                </select>\n                            </div>\n                        </div>\n                        <div class="col-md-12">\n                            <div class="form-group">\n                                <label for="subType">{{\'Admin.Stats.Sub\' | translate}}</label>\n                                <select id="subType" ng-model="opt.options.sousType" name="subType" class="form-control unvalidate" ng-options="sousType.id as sousType.id for sousType in (types | findWithId:opt.options.type).sousTypes">\n                                    <option value="">{{\'None\' | translate}}</option>\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="col-md-6">\n                        <h3>{{\'Admin.Stats.Actions\' | translate}}</h3>\n\n                        <div class="checkbox">\n                            <i class="fa fa-question-circle" tooltip-trigger="mouseenter" tooltip-placement="left" tooltip="{{\'Admin.Stats.Create_Info\' | translate}}"></i>\n                            <label>\n                                <input class="unvalidate" ng-model="action.dossiersCrees" type="checkbox"> {{\'Admin.Stats.Create\' | translate}}\n                            </label>\n                        </div>\n                        <div class="checkbox">\n                            <i class="fa fa-question-circle" tooltip-trigger="mouseenter" tooltip-placement="left" tooltip="{{\'Admin.Stats.Emit_Info\' | translate}}"></i>\n                            <label>\n                                <input class="unvalidate" ng-model="action.dossiersEmis" type="checkbox"> {{\'Admin.Stats.Emit\' | translate}}\n                            </label>\n                        </div>\n                        <div class="checkbox">\n                            <i class="fa fa-question-circle" tooltip-trigger="mouseenter" tooltip-placement="left"\n                               tooltip="{{\'Admin.Stats.EmitReject_Info\' | translate}}"></i>\n                            <label>\n                                <input class="unvalidate" ng-model="action.dossiersEmisRefuses" type="checkbox">\n                                {{\'Admin.Stats.EmitReject\' | translate}}\n                            </label>\n                        </div>\n                        <div class="checkbox">\n                            <i class="fa fa-question-circle" tooltip-trigger="mouseenter" tooltip-placement="left" tooltip="{{\'Admin.Stats.Instruct_Info\' | translate}}"></i>\n                            <label>\n                                <input class="unvalidate" ng-model="action.dossiersInstruits" type="checkbox"> {{\'Admin.Stats.Instruct\' | translate}}\n                            </label>\n                        </div>\n                        <div class="checkbox">\n                            <i class="fa fa-question-circle" tooltip-trigger="mouseenter" tooltip-placement="left" tooltip="{{\'Admin.Stats.Reject_Info\' | translate}}"></i>\n                            <label>\n                                <input class="unvalidate" ng-model="action.dossiersRefuses" type="checkbox"> {{\'Admin.Stats.Reject\' | translate}}\n                            </label>\n                        </div>\n                        <div class="checkbox">\n                            <i class="fa fa-question-circle" tooltip-trigger="mouseenter" tooltip-placement="left" tooltip="{{\'Admin.Stats.Handle_Info\' | translate}}"></i>\n                            <label>\n                                <input class="unvalidate" ng-model="action.dossiersTraites" type="checkbox"> {{\'Admin.Stats.Handle\' | translate}}\n                            </label>\n                        </div>\n                        <div class="checkbox">\n                            <i class="fa fa-question-circle" tooltip-trigger="mouseenter" tooltip-placement="left"\n                               tooltip="{{\'Admin.Stats.Time_Info\' | translate}}"></i>\n                            <label>\n                                <input class="unvalidate" ng-change="" ng-model="action.tempsTraitement"\n                                       type="checkbox"> {{\'Admin.Stats.Time\' | translate}}\n                            </label>\n                        </div>\n                    </div>\n                </div>\n                <div class="col-md-6" style="margin-top: 10px; margin-bottom:30px;">\n                        <span style="margin-bottom:10px;" class="btn btn-success force-display" ng-disabled="!statistiques.$valid" ng-click="updateChartData()">\n                            <i class="fa fa-eye"></i>\n                            {{\'Admin.Stats.Generate\' | translate}}\n                        </span>\n                    <span class="btn btn-info force-display" ng-disabled="toHandle !== 0 || !hasStats" ng-click="exportToCSV()">\n                            <i class="fa fa-download"></i>\n                            {{\'Admin.Stats.Export\' | translate}}\n                        </span>\n                </div>\n            </form>\n        </div>\n    </div>\n    <div class="col-md-8">\n        <div>\n            <h2 style="display:inline-block">{{\'Admin.Stats.Result\' | translate}}</h2>\n\n            <div class="text-info" ng-if="moyenne" style="float:right;margin-top:20px;">\n                <span class="fa fa-info-circle"></span>\n\n                <p class="inline">{{\'Admin.Stats.Average\' | translate}} : {{moyenne}}<br>\n                    {{\'Admin.Stats.E_Type\' | translate}} : {{ecartType}}</p>\n            </div>\n\n            <ul class="nav nav-tabs" ng-if="searchReject && toHandle == 0">\n                <li class="active"><a href="#courbe" bs-tab><i class="fa fa-bar-chart-o"></i> {{\'Admin.Stats.Courbe\' |\n                    translate}}</a></li>\n                <li><a ng-click="generateRejectTable()" href="#rejets" bs-tab><i class="fa fa-times-circle"></i>\n                    {{\'Admin.Stats.Cause\' | translate}}</a></li>\n            </ul>\n\n            <div class="tab-content">\n                <div class=\'tab-pane active\' id=\'courbe\'>\n                    <div ng-if="datalength > 0" chart id="chartstat" dataset="data" cumul="savedCumul"\n                         datalength="datalength"></div>\n                </div>\n\n                <div class=\'tab-pane\' id=\'rejets\'>\n                    <div>\n                        <table class="table table-striped" ng-table="tableParams">\n                            <tr ng-repeat="dossier in $data">\n                                <td data-title="\'Admin.Stats.Title_Reject\' | translate" sortable="\'title\'">\n                                    {{dossier.title}}\n                                </td>\n                                <td data-title="\'Admin.Stats.Emetteur_Reject\' | translate" sortable="\'emetteur\'">\n                                    {{(bureaux | findWithId:dossier.emetteur).title}}\n                                </td>\n                                <td data-title="\'Admin.Stats.Reject_By\' | translate" sortable="\'parapheur\'">\n                                    {{(bureaux | findWithId:dossier.parapheur).title}}\n                                </td>\n                                <td data-title="\'Admin.Stats.Date_Reject\' | translate" sortable="\'date\'">\n                                    {{dossier.date | texttodate | date:\'dd/MM/yyyy à HH:mm\'}}\n                                </td>\n                                <td data-title="\'Admin.Stats.Cause_Reject\' | translate" ng-bind-html="dossier.cause">\n                                </td>\n                            </tr>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div style="top:100px;" class="nextDossierInfo" ng-if="gettingStats">\n                    <span class="text text-info">\n                        {{\'Admin.Stats.Getting_Info\' | translate}}\n                    </span>\n            <span style="position: relative; width: 0px; z-index: 2000000000; right: 120px; top: 100px;" us-spinner="{radius:20, width:8, length: 16}"></span>\n        </div>\n\n    </div>\n</div>')}]),angular.module("templates/admin/tenants.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/admin/tenants.html",'<div class="row-fluid">\n    <div class="menuAdmin col-md-3 label label-info headertop" removeonsize="992" classes-list="label label-info" ng-include src="\'partials/adminNavbar.html\'"></div>\n    <div>\n        <!-- contenu -->\n        <div class="col-md-3 adminContent">\n            <h2>Gestion des collectivités</h2>\n            <div ng-if="!tenant.isEnabled">\n                <span class="text-info"><i class="fa fa-info-circle"></i> Le mode multi-collectivité est désactivé.</span>\n            </div>\n            <div class="form-horizontal row" ng-if="tenant.isEnabled">\n                <div class="col-md-12" style="margin-bottom:10px;">\n                    <div class="input-group">\n                        <span class="input-group-addon"><i class="fa fa-search fa-fw"></i></span>\n                        <input type="text" placeholder="{{\'Search\' | translate}}" ng-model="tenant.search" class="unvalidate form-control">\n                    </div>\n                    <div class="col-md-12 text-info"><i class="fa fa-info-circle"></i> Recherche sensible aux accents</div>\n                </div>\n                <div class="col-md-12">\n                    <button value="" class="btn btn-success" ng-click="tenant.create()" ng-disabled="tenant.isCreating">\n                        <i class="fa fa-plus-circle"></i>\n                        Ajouter une collectivité\n                    </button>\n                </div>\n\n\n            </div>\n            <ul class="list-unstyled well nav nav-pills nav-stacked adminContent list-data" ng-if="tenant.isEnabled">\n                <li ng-repeat="collectivite in tenant.list | filter:{tenantDomain:tenant.search} | orderBy:\'tenantDomain\'" ng-class="tenant.selected.tenantDomain == collectivite.tenantDomain ? \'active\' : \'\'">\n                    <a ng-click="tenant.select(collectivite)">\n                        <span class="label label-success" ng-if="collectivite.enabled">Activée</span>\n                        <span class="label label-danger" ng-if="!collectivite.enabled">Désactivée</span>\n                        <span style="display:inline-block; padding-right:50px;">{{collectivite.tenantDomain}}</span>\n                        <span style="right:50px; top:1px; position:absolute;">\n                            <span class="label label-warning pointer fa fa-refresh" tooltip="Recharger les modèles de mail" ng-click="$event.stopPropagation(); tenant.reloadMail(collectivite); " ng-if="collectivite.enabled && !collectivite.modify && !collectivite.reloadMail && !tenant.isCreating"> </span>\n\n                        </span>\n                        <span style="right:15px; top:1px; position:absolute;">\n                            <span class="label label-success pointer fa fa-toggle-off" tooltip="Activer" ng-click="tenant.switchState(collectivite); $event.stopPropagation();" ng-if="!collectivite.enabled && !collectivite.modify && !collectivite.reloadMail && !tenant.isCreating"> </span>\n                            <span class="label label-danger pointer fa fa-toggle-on" tooltip="Désactiver" ng-click="tenant.switchState(collectivite); $event.stopPropagation();" ng-if="collectivite.enabled && !collectivite.modify && !collectivite.reloadMail && !tenant.isCreating"> </span>\n                            <span class="label label-info" ng-if="collectivite.modify">Modification...</span>\n                            <span class="label label-info" ng-if="collectivite.reloadMail">Rechargement...</span>\n                        </span>\n                    </a>\n                </li>\n            </ul>\n        </div>\n\n        <div class="col-md-9 adminContent text-warning" ng-if="tenant.cantSelect">\n            <i class="fa fa-warning"></i> Il faut que la collectivité soit activée pour pouvoir la sélectionner\n        </div>\n        <div ng-if="tenant.selected !== undefined" class="col-md-9 adminContent">\n            <h2 ng-if="!tenant.selected.isNew">Modifier la collectivité {{tenant.selected.tenantDomain}}\n                <i ng-if="tenant.selected.enabled" class="fa fa-toggle-on text-success"  tooltip="Cette collectivité est activée."></i>\n                <i ng-if="!tenant.selected.enabled" class="fa fa-toggle-off text-danger"  tooltip="Cette collectivité est désactivée."></i>\n            </h2>\n            <h2 ng-if="tenant.selected.isNew">Ajout d\'une collectivité</h2>\n            <form role="form" name=\'tenantForm\' novalidate>\n                <div class="well">\n                    <div class="row">\n                        <div ng-if="tenant.selected.isNew">\n                            <span class="text-info"><i class="fa fa-info-circle"></i> Ce formulaire va créer un "espace client" (ci-appelé "tenant") vide, activé par défaut.\nSi appelé "domaine", il aura un compte administrateur nommé admin@domaine protégé par le mot de passe saisi dans ce formulaire.\nNB: le nom de tenant ne doit pas comporter de majuscule, de caractère avec accent, ni espace ou caractère exotique ni de ponctuation.\nBonne pratique: Privilégier des noms simples de type domaine internet (exemple: collectivite.org)</span>\n                        </div>\n                        <div class="col-md-4">\n                            <div ng-if="tenant.selected.isNew" class="form-group mandatory-group">\n                                <label for="domainTenant">Tenant (syntaxe de type FQDN, en minuscules)</label>\n                                <span class="label label-danger"><i class="fa fa-warning"></i> Obligatoire</span>\n                                <input id="domainTenant" ng-pattern="/^(?=^.{4,253}$)(^((?!-)[a-z0-9-]{0,62}[a-z0-9]\\.)?[a-z0-9-]{2,63}$)/i" type="text" class="form-control" ng-model="tenant.edited.tenantDomain" name="domainTenant" required>\n                            </div>\n                            <div ng-if="tenant.selected.isNew" class="form-group mandatory-group">\n                                <label for="passwordTenant">Mot de passe administrateur (compte admin@...)</label>\n                                <span class="label label-danger"><i class="fa fa-warning"></i> Obligatoire</span>\n                                <input id="passwordTenant" type="password" class="form-control" ng-model="password.newOne" name="passwordTenant" required>\n                            </div>\n                            <div ng-if="tenant.selected.isNew" class="form-group mandatory-group">\n                                <label for="confirmTenant">Mot de passe (seconde saisie de confirmation)</label>\n                                <span class="label label-danger"><i class="fa fa-warning"></i> Obligatoire</span>\n                                <input id="confirmTenant" type="password" class="form-control" ng-model="password.confirm" confirm-with="password" name="confirmTenant" required>\n                            </div>\n                            <div class="form-group mandatory-group">\n                                <label for="titleTenant">Titre de l\'organisation</label>\n                                <span class="label label-danger"><i class="fa fa-warning"></i> Obligatoire</span>\n                                <input id="titleTenant" type="text" class="form-control" ng-model="tenant.edited.title" name="titleTenant" required>\n                            </div>\n                            <div class="form-group mandatory-group">\n                                <label for="descTenant">Description</label>\n                                <span class="label label-danger"><i class="fa fa-warning"></i> Obligatoire</span>\n                                <input id="descTenant" type="text" class="form-control" ng-model="tenant.edited.description" name="descTenant" required>\n                            </div>\n                        </div>\n                        <div class="col-md-4">\n                            <div class="form-group">\n                                <label for="sirenTenant">SIREN</label>\n                                <input id="sirenTenant" type="text" class="form-control unvalidate" ng-model="tenant.edited.siren" name="sirenTenant">\n                            </div>\n                            <div class="form-group">\n                                <label for="villeTenant">Ville</label>\n                                <input id="villeTenant" type="text" class="form-control unvalidate" ng-model="tenant.edited.city" name="villeTenant">\n                            </div>\n                            <div class="form-group">\n                                <label for="postTenant">Code Postal</label>\n                                <input id="postTenant" type="text" class="form-control unvalidate" ng-model="tenant.edited.postalCode" name="postTenant">\n                            </div>\n                            <div class="form-group">\n                                <label for="paysTenant">Pays</label>\n                                <input id="paysTenant" type="text" class="form-control unvalidate" ng-model="tenant.edited.country" name="paysTenant">\n                            </div>\n                        </div>\n                        <div ng-if="!tenant.selected.isNew && tenant.selected.enabled" class="col-md-4">\n                            <button ng-if="tenant.selected.enabled && !tenant.selected.hasDetails && !tenant.isGettingInfos" value="" class="btn btn-success force-display" ng-click="tenant.infos()"><i class="fa fa-bar-chart-o"></i> Récupérer les statistiques de la collectivité</button>\n                            <span ng-if="tenant.isGettingInfos" class="text text-info">Récupération des informations de la collectivité <b>{{tenant.isGettingInfos}}</b> en cours, merci de patienter...</span>\n                            <div ng-if="tenant.selected.hasDetails">\n                                <h3>Détails de la collectivité</h3>\n                                <ul>\n                                    <li>Nombre d\'utilisateurs : {{tenant.selected.people.length}}</li>\n                                    <li>Nombre de bureaux : {{tenant.selected.bureaux.length}}</li>\n                                    <li>Nombre de dossier : {{tenant.selected.dossiers.length}}</li>\n                                    <li>Nombre de dossier à archiver : {{tenant.selected.dossiersAArchiver.length}} ({{tenant.selected.dossiersAArchiverDiskUsage}} octets)</li>\n                                    <li>Utilisation disque : {{tenant.selected.diskUsage}} octets</li>\n                                </ul>\n                            </div>\n                        </div>\n                        <div class="col-md-12">\n                            <span ng-if="tenant.selected.modify && tenant.selected.isNew"  style="position: relative; width: 0px; z-index: 2000000000; left: 25px; top: 13px;" us-spinner="{radius:10, width:4, length: 8}" ></span>\n                            <button ng-click="tenant.save()" ng-if="!(tenant.selected.modify && tenant.selected.isNew)" ng-disabled="tenant.selected.modify || !tenantForm.$valid" class="force-display btn btn-primary"><i class="fa-floppy-o fa"></i> Enregistrer</button>\n                            <span ng-if="tenant.selected.modify && tenant.selected.isNew" style="margin-left: 60px;" class="text text-info"><i class="fa fa-info-circle"></i> Ajout de la collectivité en cours... ( ~1 minute )</span>\n                            <button ng-if="!tenant.selected.isNew" ng-click="tenant.changeAdminPassword()" class="force-display btn btn-info">\n                                <i class="fa fa-lock"></i>\n                                Modifier le mot de passe administrateur</button>\n                            <button ng-if="!tenant.selected.isNew" ng-click="tenant.changePESProperties()" class="force-display btn btn-warning">\n                                <i class="fa fa-pencil"></i>\n                                Modifier les propriétés PES</button>\n                            <span ng-if="tenant.selected.modify && !tenant.selected.isNew" class="text text-info"><i class="fa fa-info-circle"></i> Modification de la collectivité en cours...</span>\n                            <span ng-if="tenant.selected.exist" class="text text-danger"><i class="fa fa-warning"></i> Ce tenant existe déjà !</span>\n                        </div>\n                    </div>\n                </div>\n            </form>\n        </div>\n    </div>\n</div>\n')}]),angular.module("templates/admin/typologie.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/admin/typologie.html",'<div class="row-fluid">\n    <div class="menuAdmin col-md-3 label label-info headertop" removeonsize="992" classes-list="label label-info" ng-include src="\'partials/adminNavbar.html\'"></div>\n    <div class="col-md-4 adminContent">\n        <!-- contenu -->\n        <div class="row">\n            <div class="col-md-6">\n                <h2>{{\'Admin.Typologie.Ty_Title\' | translate}}</h2>\n            </div>\n            <div class="col-md-6" style="margin-top:25px; text-align: right;">\n                <span ng-click="handler.types.create()" class="btn btn-success"><i class="fa fa-plus"></i> {{\'Admin.Typologie.Ty_Create\' | translate}}</span>\n            </div>\n        </div>\n\n        <div class="well" style="margin-bottom: 0; padding-bottom: 0;">\n\n            <div class="input-group">\n                <span class="input-group-addon"><i class="fa fa-search fa-fw"></i></span>\n                <input placeholder="{{\'Search\' | translate}}" ng-model="handler.types.searchValue" ng-change="handler.types.search()" class="form-control unvalidate" type="text">\n            </div>\n\n            <div style="height:45px;" ng-if="handler.types.maxSize < handler.types.total">\n                <span class="text-warning float-right">\n                    {{handler.types.page*handler.types.maxSize +1}}-{{(handler.types.page+1)*handler.types.maxSize < handler.types.total ? (handler.types.page+1)*handler.types.maxSize : handler.types.total}} {{\'On\' | translate}} {{handler.types.total}}\n                    <span class="btn btn-default fa fa-chevron-left force-display" ng-disabled="handler.types.page === 0" ng-click="handler.types.pagine(-1)"></span>\n                    <span class="btn btn-default fa fa-chevron-right force-display" ng-disabled="handler.types.page+1 >= (handler.types.total/handler.types.maxSize)" ng-click="handler.types.pagine(1)"></span>\n                </span>\n            </div>\n\n            <abn-tree-types ng-cloak tree-data="handler.types.subList"\n                            on-select="handler.types.select(branch)"\n                            on-delete="handler.types.remove(branch)"\n                            on-create="handler.types.createSub(branch)"\n                            search="handler.types.searchValue"\n                            selection="simulateSelectType"></abn-tree-types>\n        </div>\n    </div>\n    <div ng-if="!empty(handler.types.selected)" ng-cloak class="col-md-8">\n        <!-- detail type + sous-type -->\n        <h2 ng-if="!handler.types.selected.isNew">{{\'Admin.Typologie.Ty_Edit\' | translate}} {{handler.types.selected.id}}</h2>\n        <h2 ng-if="handler.types.selected.isNew">{{\'Admin.Typologie.Ty_Create_Title\' | translate}}</h2>\n        <form role="form" name=\'typeForm\' novalidate>\n            <div class="well">\n                <div class="row">\n                    <div class="col-md-6">\n                        <h3>{{\'Admin.Typologie.Ty_General\' | translate}}</h3>\n                        <div class="form-group mandatory-group">\n                            <label for="idType">{{\'Name\' | translate}}</label>\n                            <span ng-if="typeForm.idType.$error.pattern" class="label label-danger"><i\n                                    class="fa fa-exclamation-circle"></i> Interdits : \' " &amp; > <</span>\n                            <span class="label label-danger"><i class="fa fa-warning"></i> {{\'Mandatory\' | translate}}</span>\n                            <span class="label label-info"><i class="fa fa-info-circle"></i> Max : 28</span>\n                            <span class="label label-info"><i class="fa fa-info-circle"></i> Min : 3</span>\n                            <input id="idType" type="text" class="form-control" ng-change="dashChanged=true"\n                                   ng-minlength="3" ng-maxlength="28" ng-model="handler.types.edited.id" name="idType"\n                                   ng-pattern="/^[^\\\'&quot;&amp;><]*$/" required>\n                        </div>\n                        <div class="form-group mandatory-group">\n                            <label for="desc">{{\'Admin.Typologie.Ty_Desc\' | translate}}</label>\n                            <span ng-if="typeForm.desc.$error.pattern" class="label label-danger"><i\n                                    class="fa fa-exclamation-circle"></i> Interdits : \' " &amp; > <</span>\n                            <span class="label label-danger"><i class="fa fa-warning"></i> {{\'Mandatory\' | translate}}</span>\n                            <span class="label label-info"><i class="fa fa-info-circle"></i> Min : 3</span>\n                            <input id="desc" type="text" class="form-control" ng-change="dashChanged=true"\n                                   ng-minlength="3" ng-model="handler.types.edited.desc" name="desc"\n                                   ng-pattern="/^[^\\\'&quot;&amp;><]*$/" required>\n                        </div>\n                    </div>\n                    <div class="col-md-6">\n                        <h3>{{\'Admin.Typologie.Ty_Tdt\' | translate}}</h3>\n                        <div class="form-group">\n                            <label for="tdtNom">{{\'Name\' | translate}}</label>\n                            <select id="tdtNom" class="form-control unvalidate" ng-change="dashChanged=true" ng-model="handler.types.edited.tdtNom" name="tdtNom" required>\n                                <option value="pas de TdT">{{\'pas de TdT\' | translate}}</option>\n                                <option ng-value="el.value" ng-repeat="el in tdtNomOptions">{{el.key}}</option>\n                            </select>\n                        </div>\n                        <div class="form-group">\n                            <label for="tdtProtocole">{{\'Admin.Typologie.Ty_Protocol\' | translate}}</label>\n                            <select ng-change="handler.types.changeProtocol()" id="tdtProtocole"\n                                    class="form-control unvalidate"\n                                    ng-model="handler.types.edited.tdtProtocole" name="tdtProtocole" required>\n                                <option ng-value="el.value" ng-repeat="el in tdtProtocoleOptions">{{el.key}}</option>\n                                <option value="aucun">{{\'None\' | translate}}</option>\n                            </select>\n                        </div>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="col-md-6">\n                        <h3>{{\'Admin.Typologie.Ty_Format\' | translate}}</h3>\n                        <div class="form-group">\n                            <label for="sig_format">{{\'Admin.Typologie.Ty_Format\' | translate}}</label>\n                            <select ng-if="handler.types.edited.tdtProtocole != \'ACTES\'" id="sig_format"\n                                    class="form-control unvalidate" ng-change="dashChanged=true"\n                                    ng-model="handler.types.edited.sigFormat" name="sig_format" required\n                                    ng-disabled="handler.types.edited.tdtProtocole != \'aucun\'">\n                                <option value="AUTO">-- Sélection automatique --</option>\n                                <option ng-if="properties[\'parapheur.admin.signature.pkcs1.show\'] == \'true\'" value="PKCS#1/sha256">PKCS#1 (compatible EBICS-TS)</option>\n                                <option value="PKCS#7/single">PKCS#7 simple (compatible ACTES)</option>\n                                <option ng-if="properties[\'parapheur.admin.signature.pkcs7aio.show\'] == \'true\'" value="PKCS#7/multiple">PKCS#7 all-in-one</option>\n                                <!--  option value="CAdES/basic">CAdES profil de base</option -->\n                                <option value="PAdES/basic">PAdES profil ISO32000-1 (signature de PDF)</option>\n                                <option value="PAdES/basicCertifie">PAdES profil ISO32000-1 (verrouille le PDF après signature)</option>\n                                <option value="XAdES/enveloped">XAdES enveloppée (PESv2 HELIOS)</option>\n                                <option ng-if="properties[\'parapheur.admin.signature.xadesdia.show\'] == \'true\'" value="XAdES/DIA">XAdES pour DIA</option>\n                                <option ng-if="properties[\'parapheur.admin.signature.xadesdet.show\'] == \'true\'" value="XAdES/detached">XAdES détachée</option>\n                                <option ng-if="properties[\'parapheur.admin.signature.xadesecd.show\'] == \'true\'" value="XAdES132/detached">XAdES 1.3.2 détachée (compatible ANTS-ECD)</option>\n                                <!-- option value="XAdES-T/enveloped">XAdES-T enveloppée</option  -->\n                            </select>\n\n                            <select ng-if="handler.types.edited.tdtProtocole == \'ACTES\'" id="sig_format"\n                                    class="form-control unvalidate" ng-change="dashChanged=true"\n                                    ng-model="handler.types.edited.sigFormat" name="sig_format" required>\n                                <option value="PKCS#7/single">PKCS#7 simple (compatible ACTES)</option>\n                                <option value="PAdES/basic">PAdES profil ISO32000-1 (signature de PDF)</option>\n                                <option value="PAdES/basicCertifie">PAdES profil ISO32000-1 (verrouille le PDF après signature)</option>\n                            </select>\n                        </div>\n                    </div>\n\n                    <div class="col-md-6" ng-if="handler.types.showOverrideButton()">\n                        <h3>{{\'Admin.Typologie.Ty_Override\' | translate}}</h3>\n                        <div ng-if="!handler.types.edited.isNew">\n                            <div ng-if="handler.types.showOverrideRadio()">\n                                <div class="radio">\n                                    <label for="overTrue">\n                                        <input class="unvalidate" id="overTrue" ng-model="handler.types.edited.tdtOverride" type="radio" value="true" name="overrideTdt" required>{{\'Admin.Typologie.Ty_Enable\' | translate}}\n                                    </label>\n                                </div>\n                                <div class="radio">\n                                    <label for="overFalse">\n                                        <input class="unvalidate" id="overFalse" ng-model="handler.types.edited.tdtOverride" type="radio" value="false" name="overrideTdt" required>{{\'Admin.Typologie.Ty_Disable\' | translate}}\n                                    </label>\n                                </div>\n                            </div>\n\n                            <button ng-click="handler.types.launchOverride()" class="btn btn-info col-md-12 force-display">\n                                <i class="fa" ng-class="handler.types.getOverrideButtonIcon()"></i>\n                                {{handler.types.getOverrideButtonName()}}\n                            </button>\n                        </div>\n\n                        <div ng-if="handler.types.edited.isNew">\n                            <p class="text-danger"> {{\'Admin.Typologie.Ty_Not_Created\' | translate}}</p>\n                        </div>\n                    </div>\n                </div>\n                <div>\n                    <button ng-if="!handler.types.edited.isNew" ng-click="handler.types.update()" type="submit" class="btn btn-primary">\n                        <i class="fa fa-floppy-o"></i>\n                        {{\'Save\' | translate}}\n                    </button>\n                    <button ng-if="handler.types.edited.isNew" ng-click="handler.types.save()" type="submit" class="btn btn-primary">\n                        <i class="fa fa-floppy-o"></i>\n                        {{\'Save\' | translate}}\n                    </button>\n                    <button type="submit" class="btn btn-primary" disabled>\n                        <i class="fa fa-floppy-o"></i>\n                        {{\'Save\' | translate}}\n                    </button>\n                    <span ng-if="handler.types.errorType != undefined" class="text-danger">\n                        <i class="fa fa-warning"></i>\n                        {{handler.types.errorType}}\n                    </span>\n                    <span style="position: relative; margin-left: 30px;"  ng-if="handler.types.saving">\n                        <span us-spinner="{radius:10, width:4, length: 8}"></span>\n                    </span>\n                </div>\n            </div>\n        </form>\n    </div>\n    <div ng-if="!empty(handler.types.selectedSubtype)" ng-cloak class="col-md-8">\n        <!-- detail sous-type -->\n        <h2 ng-if="!!handler.types.selectedSubtype.id">{{\'Admin.Typologie.Ty_Sub_Title\' | translate}} {{handler.types.selectedSubtype.id}}</h2>\n        <h2 ng-if="!handler.types.selectedSubtype.id">{{\'Admin.Typologie.Ty_Sub_Create_Title\' | translate}}</h2>\n        <form role="form" name=\'sousTypeForm\' novalidate>\n            <div class="well">\n                <ul class="nav nav-tabs">\n                    <li class="active"><a href="#general" bs-tab><i class="fa fa-info-circle"></i> {{\'Admin.Typologie.Ty_General\' | translate}}</a></li>\n                    <li><a href="#permissions" bs-tab><i class="fa fa-ban"></i> {{\'Admin.Typologie.Ty_Sub_PermCreate\' | translate}}</a></li>\n                    <li><a href="#permissionsFilters" bs-tab><i class="fa fa-eye"></i> {{\'Admin.Typologie.Ty_Sub_PermSee\' | translate}}</a></li>\n                    <li><a href="#circuit" bs-tab><i class="fa fa-road"></i> {{\'Admin.Typologie.Ty_Sub_Wo\' | translate}}</a></li>\n                    <li><a href="#metadonnees" bs-tab><i class="fa fa-code"></i> {{\'Admin.Typologie.Ty_Sub_Meta\' | translate}}</a></li>\n                    <li><a href="#calques" bs-tab><i class="fa fa-clone"></i> {{\'Admin.Typologie.Ty_Sub_Cal\' | translate}}</a></li>\n                </ul>\n\n                <div class="tab-content">\n                    <div class=\'tab-pane active\' id=\'general\'>\n                        <div class="col-md-12">\n                            <div class="row">\n                                <div class="col-md-6">\n                                    <h3>{{\'Admin.Typologie.Ty_Sub_Sub\' | translate}} "{{handler.types.selectedSubtype.parent}}"</h3>\n                                    <div class="form-group mandatory-group">\n                                        <label for="idSousType">{{\'Name\' | translate}}</label>\n                                        <span ng-if="sousTypeForm.idSousType.$error.pattern" class="label label-danger"><i\n                                                class="fa fa-exclamation-circle"></i> Interdits : \' " &amp; > <</span>\n                                        <span class="label label-danger"><i class="fa fa-warning"></i> {{\'Mandatory\' | translate}}</span>\n                                        <span class="label label-info"><i class="fa fa-info-circle"></i> Min : 2</span>\n                                        <input id="idSousType" type="text" class="form-control" ng-minlength="2"\n                                               ng-model="handler.types.editedSubtype.id" name="idSousType"\n                                               ng-pattern="/^[^\\\'&quot;&amp;><]*$/" required>\n                                    </div>\n                                    <div class="form-group mandatory-group">\n                                        <label for="descSousType">{{\'Description\' | translate}}</label>\n                                        <span ng-if="sousTypeForm.descSousType.$error.pattern"\n                                              class="label label-danger"><i class="fa fa-exclamation-circle"></i> Interdits : \' " &amp; > <</span>\n                                        <span class="label label-danger"><i class="fa fa-warning"></i> {{\'Mandatory\' | translate}}</span>\n                                        <span class="label label-info"><i class="fa fa-info-circle"></i> Min : 2</span>\n                                        <input id="descSousType" type="text" class="form-control" ng-minlength="2"\n                                               ng-model="handler.types.editedSubtype.desc" name="descSousType"\n                                               ng-pattern="/^[^\\\'&quot;&amp;><]*$/" required>\n                                    </div>\n                                    <h3>{{\'Admin.Typologie.Ty_Sub_Opt\' | translate}}</h3>\n                                    <div class="checkbox">\n                                        <label>\n                                            <input class="unvalidate" ng-model="handler.types.editedSubtype.digitalSignatureMandatory" ng-true-value="true" ng-false-value="false" type="checkbox"> {{\'Admin.Typologie.Ty_Sub_SigMand\' | translate}}\n                                        </label>\n                                    </div>\n                                    <div class="checkbox">\n                                        <label>\n                                            <input class="unvalidate" ng-model="handler.types.editedSubtype.readingMandatory" ng-true-value="true" ng-false-value="false" type="checkbox"> {{\'Admin.Typologie.Ty_Sub_ReadMand\' | translate}}\n                                        </label>\n                                    </div>\n                                    <div class="checkbox">\n                                        <label>\n                                            <input class="unvalidate" ng-model="handler.types.editedSubtype.includeAttachments" ng-true-value="true" ng-false-value="false" type="checkbox"> {{\'Admin.Typologie.Ty_Sub_PJ\' | translate}}\n                                        </label>\n                                    </div>\n                                    <div class="checkbox" ng-if="isAcceptingMultidoc()">\n                                        <label>\n                                            <input class="unvalidate" ng-model="handler.types.editedSubtype.multiDocument" ng-true-value="true" ng-false-value="false" type="checkbox"> {{\'Admin.Typologie.Ty_Sub_µdoc\' | translate}} <i class="fa fa-question-circle" tooltip="{{\'Admin.Typologie.Ty_Sub_µdoc_info\' | translate}}"></i>\n                                        </label>\n                                    </div>\n                                    <div class="checkbox" ng-if="isAcceptingAttest() && properties[\'parapheur.ihm.attest.show\'] == \'true\'" >\n                                        <label>\n                                            <input class="unvalidate" ng-model="handler.types.editedSubtype.hasToAttest" ng-true-value="true" ng-false-value="false" type="checkbox"> {{\'Admin.Typologie.Ty_Sub_Attest\' | translate}}\n                                        </label>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\'tab-pane\' id=\'permissions\'>\n                        <div class="col-md-12">\n                            <div class="row">\n                                <h3>{{\'Admin.Typologie.Ty_Sub_PermCreate\' | translate}}</h3>\n                                <div class="checkbox">\n                                    <label>\n                                        <input class="unvalidate" ng-model="handler.types.editedSubtype.visibility" type="checkbox" ng-false-value="private" ng-true-value="public"> {{\'Admin.Typologie.Ty_Sub_Public\' | translate}}\n                                    </label>\n                                </div>\n                                <div class="col-md-12 no-padding">\n                                    <div class="row" ng-if="handler.types.editedSubtype.visibility !== \'public\'">\n                                        <div class="form-group col-md-4 no-padding">\n                                            <div class="col-md-12">\n                                                <h4>{{\'Admin.Typologie.Ty_Sub_Desks\' | translate}}</h4>\n                                                <div>\n                                                    <div class="input-group">\n                                                        <span class="input-group-addon"><i class="fa fa-search fa-fw"></i></span>\n                                                        <input placeholder="{{\'Search\' | translate}}" ng-model="handler.bureaux.searchValue" ng-change="handler.bureaux.search()" class="form-control unvalidate" type="text" ng-enter="handler.bureaux.search()">\n                                                    </div>\n\n                                                    <div style="height:15px;" ng-if="handler.bureaux.maxSize < handler.bureaux.total">\n                                                <span class="text-warning float-right">\n                                                    {{handler.bureaux.page*handler.bureaux.maxSize +1}}-{{(handler.bureaux.page+1)*handler.bureaux.maxSize < handler.bureaux.total ? (handler.bureaux.page+1)*handler.bureaux.maxSize : handler.bureaux.total}} {{\'On\' | translate}} {{handler.bureaux.total}}\n                                                    <span class="btn btn-default fa fa-chevron-left force-display" ng-disabled="handler.bureaux.page === 0" ng-click="handler.bureaux.pagine(-1)"></span>\n                                                    <span class="btn btn-default fa fa-chevron-right force-display" ng-disabled="handler.bureaux.page+1 >= (handler.bureaux.total/handler.bureaux.maxSize)" ng-click="handler.bureaux.pagine(1)"></span>\n                                                </span>\n                                                    </div>\n                                                </div>\n                                            </div>\n\n                                            <span class="text-info" ng-if="handler.bureaux.total === 0"><i class="fa fa-info-circle"></i> {{\'Admin.Typologie.Ty_Sub_No_Result\' | translate}}</span>\n                                            <span class="text-info" ng-if="handler.bureaux.subListForCreation.length === 0 && handler.bureaux.total > 0"><i class="fa fa-info-circle"></i> {{\'Admin.Typologie.Ty_Sub_Desks_Sel_All\' | translate}}</span>\n                                            <ul class="list-unstyled nav nav-pills nav-stacked adminContent list-datas col-md-12 no-margin">\n                                                <li ng-repeat="bureau in handler.bureaux.subList" ng-switch on="handler.types.editedSubtype.parapheurs.indexOf(bureau.id)">\n                                                    <a ng-click="handler.bureaux.selectForCreation(bureau)" ng-switch-when="-1">\n                                                        <i class="fa fa-plus-circle text-success"></i> {{bureau.name}}\n                                                    </a>\n                                                    <a class="disabled" ng-switch-default>\n                                                        {{bureau.name}}\n                                                    </a>\n                                                </li>\n                                            </ul>\n                                        </div>\n\n                                        <div class="form-group col-md-4 no-padding">\n                                            <div class="col-md-12">\n                                                <h4>{{\'Admin.Typologie.Ty_Sub_Gr\' | translate}}</h4>\n                                                <div>\n                                                    <div class="input-group">\n                                                        <span class="input-group-addon"><i class="fa fa-search fa-fw"></i></span>\n                                                        <input placeholder="{{\'Search\' | translate}}" ng-model="handler.groupes.searchValue" ng-change="handler.groupes.search()" class="form-control unvalidate" type="text" ng-enter="handler.groupes.search()">\n                                                    </div>\n\n                                                    <div style="height:15px;" ng-if="handler.groupes.maxSize < handler.groupes.total">\n                                                    <span class="text-warning float-right">\n                                                        {{handler.groupes.page*handler.groupes.maxSize +1}}-{{(handler.groupes.page+1)*handler.groupes.maxSize < handler.groupes.total ? (handler.groupes.page+1)*handler.groupes.maxSize : handler.groupes.total}} sur {{handler.groupes.total}}\n                                                        <span class="btn btn-default fa fa-chevron-left force-display" ng-disabled="handler.groupes.page === 0" ng-click="handler.groupes.pagine(-1)"></span>\n                                                        <span class="btn btn-default fa fa-chevron-right force-display" ng-disabled="handler.groupes.page+1 >= (handler.groupes.total/handler.groupes.maxSize)" ng-click="handler.groupes.pagine(1)"></span>\n                                                    </span>\n                                                    </div>\n                                                </div>\n                                            </div>\n\n                                            <span class="text-info" ng-if="handler.groupes.total === 0"><i class="fa fa-info-circle"></i> {{\'Admin.Typologie.Ty_Sub_No_Result\' | translate}}</span>\n                                            <span class="text-info" ng-if="handler.groupes.subListForCreation.length === 0 && handler.groupes.total > 0"><i class="fa fa-info-circle"></i> {{\'Admin.Typologie.Ty_Sub_Gr_Sel_All\' | translate}}</span>\n                                            <ul class="list-unstyled nav nav-pills nav-stacked adminContent list-datas col-md-12 no-margin">\n                                                <li ng-repeat="group in handler.groupes.subList" ng-switch on="handler.types.editedSubtype.groups.indexOf(group.id)">\n                                                    <a ng-click="handler.groupes.selectForCreation(group)" ng-switch-when="-1">\n                                                        <i class="fa fa-plus-circle text-success"></i> {{group.shortName}}\n                                                    </a>\n                                                    <a class="disabled" ng-switch-default>\n                                                        {{group.shortName}}\n                                                    </a>\n                                                </li>\n                                            </ul>\n                                        </div>\n\n                                        <div class="col-md-4">\n                                            <h3>{{\'Admin.Typologie.Ty_Sub_Desks_Sel\' | translate}}</h3>\n                                            <span ng-if="handler.types.editedSubtype.parapheurs.length === 0" class="text-info"><i class="fa fa-info-circle"></i> {{\'Admin.Typologie.Ty_Sub_Desks_None\' | translate}}</span>\n                                            <ul class="list-unstyled pointer">\n                                                <li class="hover-li" ng-click="handler.bureaux.unselectForCreation(bureau.id)" ng-repeat="bureau in (handler.bureaux.list() | sameId:handler.types.editedSubtype.parapheurs)"><i class="text-danger fa fa-times-circle"></i> {{bureau.name}}</li>\n                                            </ul>\n                                        </div>\n\n                                        <div class="col-md-4">\n                                            <h3>{{\'Admin.Typologie.Ty_Sub_Gr_Sel\' | translate}}</h3>\n                                            <span ng-if="handler.types.editedSubtype.groups.length === 0" class="text-info"><i class="fa fa-info-circle"></i> {{\'Admin.Typologie.Ty_Sub_Gr_None\' | translate}}</span>\n                                            <ul class="list-unstyled pointer">\n                                                <li class="hover-li" ng-click="handler.groupes.unselectForCreation(group.id)" ng-repeat="group in (handler.groupes.list() | sameId:handler.types.editedSubtype.groups)"><i class="text-danger fa fa-times-circle"></i> {{group.shortName}}</li>\n                                            </ul>\n                                        </div>\n                                    </div>\n\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\'tab-pane\' id=\'permissionsFilters\'>\n                        <div class="col-md-12">\n                            <div class="row">\n                                <h3>{{\'Admin.Typologie.Ty_Sub_PermSee\' | translate}}</h3>\n                                <div class="checkbox">\n                                    <label>\n                                        <input class="unvalidate" ng-model="handler.types.editedSubtype.visibilityFilter" type="checkbox" ng-false-value="private" ng-true-value="public"> {{\'Admin.Typologie.Ty_Sub_Public\' | translate}}\n                                    </label>\n                                </div>\n                                <div class="col-md-12 no-padding">\n\n                                    <div ng-if="handler.types.editedSubtype.visibilityFilter !== \'public\'" class="form-group col-md-4 no-padding">\n                                        <div class="col-md-12">\n                                            <h4>{{\'Admin.Typologie.Ty_Sub_Desks\' | translate}}</h4>\n                                            <div>\n                                                <div class="input-group">\n                                                    <span class="input-group-addon"><i class="fa fa-search fa-fw"></i></span>\n                                                    <input placeholder="{{\'Search\' | translate}}" ng-model="handler.bureaux.searchValue" ng-change="handler.bureaux.search()" class="form-control unvalidate" type="text" ng-enter="handler.bureaux.search()">\n                                                </div>\n\n                                                <div style="height:15px;" ng-if="handler.bureaux.maxSize < handler.bureaux.total">\n                                                <span class="text-warning float-right">\n                                                    {{handler.bureaux.page*handler.bureaux.maxSize +1}}-{{(handler.bureaux.page+1)*handler.bureaux.maxSize < handler.bureaux.total ? (handler.bureaux.page+1)*handler.bureaux.maxSize : handler.bureaux.total}} sur {{handler.bureaux.total}}\n                                                    <span class="btn btn-default fa fa-chevron-left force-display" ng-disabled="handler.bureaux.page === 0" ng-click="handler.bureaux.pagine(-1)"></span>\n                                                    <span class="btn btn-default fa fa-chevron-right force-display" ng-disabled="handler.bureaux.page+1 >= (handler.bureaux.total/handler.bureaux.maxSize)" ng-click="handler.bureaux.pagine(1)"></span>\n                                                </span>\n                                                </div>\n                                            </div>\n                                        </div>\n\n                                        <span class="text-info" ng-if="handler.bureaux.total === 0"><i class="fa fa-info-circle"></i> {{\'Admin.Typologie.Ty_Sub_No_Result\' | translate}}</span>\n                                        <span class="text-info" ng-if="handler.bureaux.subListForFilter.length === 0 && handler.bureaux.total > 0"><i class="fa fa-info-circle"></i> {{\'Admin.Typologie.Ty_Sub_Desks_Sel_All\' | translate}}</span>\n                                        <ul class="list-unstyled nav nav-pills nav-stacked adminContent list-datas col-md-12 no-margin">\n                                            <li ng-repeat="bureau in handler.bureaux.subList" ng-switch on="handler.types.editedSubtype.parapheursFilters.indexOf(bureau.id)">\n                                                <a ng-click="handler.bureaux.selectForFilter(bureau)" ng-switch-when="-1">\n                                                    <i class="fa fa-plus-circle text-success"></i> {{bureau.name}}\n                                                </a>\n                                                <a class="disabled" ng-switch-default>\n                                                    {{bureau.name}}\n                                                </a>\n                                            </li>\n                                        </ul>\n                                    </div>\n                                    <div ng-if="handler.types.editedSubtype.visibilityFilter !== \'public\'" class="form-group col-md-4 no-padding">\n                                        <div class="col-md-12">\n                                            <h4>{{\'Admin.Typologie.Ty_Sub_Gr\' | translate}}</h4>\n                                            <div>\n                                                <div class="input-group">\n                                                    <span class="input-group-addon"><i class="fa fa-search fa-fw"></i></span>\n                                                    <input placeholder="{{\'Search\' | translate}}" ng-model="handler.groupes.searchValue" ng-change="handler.groupes.search()" class="form-control unvalidate" type="text" ng-enter="handler.groupes.search()">\n                                                </div>\n\n                                                <div style="height:15px;" ng-if="handler.groupes.maxSize < handler.groupes.total">\n                                                    <span class="text-warning float-right">\n                                                        {{handler.groupes.page*handler.groupes.maxSize +1}}-{{(handler.groupes.page+1)*handler.groupes.maxSize < handler.groupes.total ? (handler.groupes.page+1)*handler.groupes.maxSize : handler.groupes.total}} sur {{handler.groupes.total}}\n                                                        <span class="btn btn-default fa fa-chevron-left force-display" ng-disabled="handler.groupes.page === 0" ng-click="handler.groupes.pagine(-1)"></span>\n                                                        <span class="btn btn-default fa fa-chevron-right force-display" ng-disabled="handler.groupes.page+1 >= (handler.groupes.total/handler.groupes.maxSize)" ng-click="handler.groupes.pagine(1)"></span>\n                                                    </span>\n                                                </div>\n                                            </div>\n                                        </div>\n\n                                        <span class="text-info" ng-if="handler.groupes.total === 0"><i class="fa fa-info-circle"></i> {{\'Admin.Typologie.Ty_Sub_No_Result\' | translate}}</span>\n                                        <span class="text-info" ng-if="handler.groupes.subListForFilter.length === 0 && handler.groupes.total > 0"><i class="fa fa-info-circle"></i> {{\'Admin.Typologie.Ty_Sub_Gr_Sel_All\' | translate}}</span>\n                                        <ul class="list-unstyled nav nav-pills nav-stacked adminContent list-datas col-md-12 no-margin">\n                                            <li ng-repeat="group in handler.groupes.subList" ng-switch on="handler.types.editedSubtype.groupsFilters.indexOf(group.id)">\n                                                <a ng-click="handler.groupes.selectForFilter(group)" ng-switch-when="-1">\n                                                    <i class="fa fa-plus-circle text-success"></i> {{group.shortName}}\n                                                </a>\n                                                <a class="disabled" ng-switch-default>\n                                                    {{group.shortName}}\n                                                </a>\n                                            </li>\n                                        </ul>\n                                    </div>\n\n                                    <div ng-if="handler.types.editedSubtype.visibilityFilter !== \'public\'" class="col-md-4">\n                                        <h3>{{\'Admin.Typologie.Ty_Sub_Desks_Sel\' | translate}}</h3>\n                                        <span ng-if="handler.types.editedSubtype.parapheursFilters.length === 0" class="text-info"><i class="fa fa-info-circle"></i> {{\'Admin.Typologie.Ty_Sub_Desks_None\' | translate}}</span>\n                                        <ul class="list-unstyled pointer">\n                                            <li class="hover-li" ng-click="handler.bureaux.unselectForFilter(bureau.id)" ng-repeat="bureau in (handler.bureaux.list() | sameId:handler.types.editedSubtype.parapheursFilters)"><i class="text-danger fa fa-times-circle"></i> {{bureau.name}}</li>\n                                        </ul>\n                                        <h3>{{\'Admin.Typologie.Ty_Sub_Gr_Sel\' | translate}}</h3>\n                                        <span ng-if="handler.types.editedSubtype.groupsFilters.length === 0" class="text-info"><i class="fa fa-info-circle"></i> {{\'Admin.Typologie.Ty_Sub_Gr_None\' | translate}}</span>\n                                        <ul class="list-unstyled pointer">\n                                            <li class="hover-li" ng-click="handler.groupes.unselectForFilter(group.id)" ng-repeat="group in (handler.groupes.list() | sameId:handler.types.editedSubtype.groupsFilters)"><i class="text-danger fa fa-times-circle"></i> {{group.shortName}}</li>\n                                        </ul>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\'tab-pane\' id=\'circuit\'>\n                        <div class="col-md-12">\n                            <div class="row">\n                                <div class="col-md-6">\n                                    <div class="form-group">\n                                        <label for="searchCircuit" class="control-label legendLabel">{{\'Admin.Typologie.Ty_Sub_Wo_Sel\' | translate}}</label>\n\n                                        <div class="row">\n                                            <div class="col-md-12">\n                                                <div>\n                                                    <div class="input-group">\n                                                        <input placeholder="{{\'Search\' | translate}}" name="searchCircuit" id="searchCircuit" ng-model="searchCircuit" class="form-control unvalidate" type="text">\n                                                        <span class="input-group-btn">\n                                                            <button class="btn btn-success force-display" ng-click="handler.circuits.search(searchCircuit)" type="submit">\n                                                                <i class="fa fa-search"></i>\n                                                                {{\'Find\' | translate}}\n                                                            </button>\n                                                        </span>\n                                                    </div>\n                                                    <div style="height:35px;" ng-if="handler.circuits.total != handler.circuits.list.length">\n                                                        <span class="text-warning float-right">\n                                                            {{handler.circuits.page*handler.circuits.maxSize +1}}-{{(handler.circuits.page+1)*handler.circuits.maxSize < handler.circuits.total ? (handler.circuits.page+1)*handler.circuits.maxSize : handler.circuits.total}} sur {{handler.circuits.total}}\n                                                            <span class="btn btn-default fa fa-chevron-left force-display" ng-disabled="handler.circuits.page === 0" ng-click="handler.circuits.pagine(-1)"></span>\n                                                            <span class="btn btn-default fa fa-chevron-right force-display" ng-disabled="handler.circuits.page+1 >= (handler.circuits.total/handler.circuits.maxSize)" ng-click="handler.circuits.pagine(1)"></span>\n                                                        </span>\n                                                    </div>\n                                                    <span ng-if="handler.circuits.pagedList.length > 0 && handler.circuits.pagedList[0].length === 0" class="text-info">\n                                                        <i class="fa fa-info-circle"></i> {{\'Admin.Typologie.Ty_Sub_No_Result\' | translate}}\n                                                    </span>\n                                                </div>\n                                                <ul class="list-unstyled nav nav-pills nav-stacked adminContent list-datas" style="margin-top: 0px">\n                                                    <li ng-repeat="circuit in handler.circuits.list">\n                                                        <a ng-click="circuit.name === handler.types.editedSubtype.circuit ? handler.circuits.select() : handler.circuits.select(circuit)">\n                                                            <i ng-if="circuit.name === handler.types.editedSubtype.circuit" class="fa fa-dot-circle-o text-success"></i><i ng-if="circuit.name !== handler.types.editedSubtype.circuit" style="width: 13px;display:inline-block;"></i> {{circuit.name}}\n                                                        </a>\n                                                    </li>\n                                                </ul>\n                                            </div>\n                                        </div>\n\n                                        <div class="col-md-12" ng-if="handler.types.hasCachet() && handler.types.canCachet()">\n                                            <hr/>\n                                            <div class="form-group mandatory-group">\n                                                <label for="cachetCert">Certificat de cachet serveur</label>\n                                                <span ng-if="!!handler.types.editedSubtype.circuit" class="label label-danger"><i class="fa fa-warning"></i> {{\'Mandatory\' | translate}}</span>\n                                                <select id="cachetCert" class="form-control"\n                                                        ng-model="handler.types.editedSubtype.cachetCertificate" name="cachetCert"\n                                                        ng-options="cert.id as cert.title for cert in cachetCerts"\n                                                        ng-required="!!handler.types.editedSubtype.circuit">\n                                                    <option></option>\n                                                </select>\n                                            </div>\n                                            <div class="col-md-12 checkbox">\n                                                <label>\n                                                    <input class="unvalidate" ng-model="handler.types.editedSubtype.isCachetAuto" ng-true-value="true" ng-false-value="false" type="checkbox">\n                                                    Étape de cachet serveur automatique\n                                                </label>\n                                            </div>\n                                        </div>\n                                        <div class="col-md-12" ng-if="handler.types.hasPastellMailsec()">\n                                            <hr/>\n                                            <div class="form-group mandatory-group">\n                                                <label for="mailsecPastell">Connecteur Mail-sécurisé Pastell</label>\n                                                <span ng-if="!!handler.types.editedSubtype.circuit" class="label label-danger"><i class="fa fa-warning"></i> {{\'Mandatory\' | translate}}</span>\n                                                <select id="mailsecPastell" class="form-control"\n                                                        ng-model="handler.types.editedSubtype.pastellMailsec" name="mailsecPastell"\n                                                        ng-options="conn.id as conn.title for conn in pastellMailsec"\n                                                        ng-required="!!handler.types.editedSubtype.circuit">\n                                                    <option></option>\n                                                </select>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="col-md-6">\n                                    <div class="col-md-12">\n                                        {{\'Admin.Typologie.Ty_Sub_Wo_Selected\' | translate}} :\n                                        <ul class="list-unstyled nav nav-pills nav-stacked adminContent list-datas">\n                                            <li ng-if="!!handler.types.editedSubtype.circuit">\n                                                <a ng-click="handler.circuits.select()">\n                                                    <i class="fa fa-times-circle text-danger"></i> {{handler.types.editedSubtype.circuit}}\n                                                </a>\n                                            </li>\n                                        </ul>\n                                        <div ng-if="!handler.types.editedSubtype.circuit" class="text-info">\n                                            <i class="fa fa-info-circle"></i> {{\'Admin.Typologie.Ty_Sub_Wo_None\' | translate}}\n                                        </div>\n                                    </div>\n                                    <div ng-if="!handler.types.editedSubtype.circuit" class="col-md-12">\n                                        <span class="text-info"><i class="fa fa-info-circle"></i> {{\'Admin.Typologie.Ty_Sub_Wo_None_Info\' | translate}}</span>\n                                        <div class="col-md-12">\n                                            <div ui-ace="{\n                                                  useWrapMode : true,\n                                                  showGutter: true,\n                                                  theme:\'twilight\',\n                                                  mode: \'groovy\'\n                                            }" ng-model="handler.types.editedSubtype.script" style="height:400px;"></div>\n                                        </div>\n                                    </div>\n                                    <div ng-if="handler.types.editedSubtype.circuit" class="col-md-12">\n                                        <h3>{{\'Admin.Typologie.Ty_Sub_Wo_Step\' | translate}}</h3>\n                                        <ul class="list-unstyled">\n                                            <li ng-repeat="etape in handler.circuits.selected.etapes">\n                                                <span class="action" ng-switch="etape.actionDemandee.toLowerCase()">\n                                                    <i tooltip="Visa" ng-switch-when="visa" class="fa fa-check-square-o"></i>\n                                                    <i tooltip="Signature" ng-switch-when="signature" class="fa ls-signature"></i>\n                                                    <i tooltip="Mail sécurisé Pastell" ng-switch-when="mailsecpastell" class="fa fa-envelope-o"></i>\n                                                    <i tooltip="Mail sécurisé S²LOW" ng-switch-when="mailsec" class="fa fa-envelope"></i>\n                                                    <i tooltip="Télé-transmission" ng-switch-when="tdt" class="fa fa-cloud-upload"></i>\n                                                    <i tooltip="Cachet serveur" ng-switch-when="cachet" class="fa ls-stamp"></i>\n                                                    <i tooltip="Fin de circuit" ng-switch-when="archivage" class="fa fa-flag-checkered"></i>\n                                                </span>\n                                                <span ng-if="!etape.parapheur">\n                                                    {{(etape.transition | translate) + "..."}}\n                                                </span>\n                                                <span ng-if="!!etape.parapheur">\n                                                    {{etape.parapheurName}}\n                                                </span>\n                                            </li>\n                                        </ul>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="col-md-12 checkbox" ng-if="handler.types.getProtocol() === \'HELIOS\'">\n                            <label>\n                                <input class="unvalidate" ng-model="handler.types.editedSubtype.isTdtAuto" ng-true-value="true" ng-false-value="false" type="checkbox">\n                                Étape d\'envoi au TdT automatique\n                            </label>\n                        </div>\n\n                    </div>\n\n                    <div class=\'tab-pane\' id=\'metadonnees\'>\n                        <div class="col-md-12 no-padding" ng-if="!isMetaInited">\n                            <span class="text text-info">Chargement des metadonnées en cours ...</span>\n                        </div>\n                        <div class="col-md-12 no-padding" ng-if="isMetaInited">\n                            <div class="col-md-12">\n                                <h3>{{\'Admin.Typologie.Ty_Sub_Meta\' | translate}}</h3>\n                                <div class="col-md-6">\n                                    <p><b>{{\'Admin.Typologie.Ty_Sub_Meta_Avail\' | translate}}</b></p>\n                                    <span class="text-info" ng-if="(handler.metadonnees.list() | notSameIdInArray:handler.types.editedSubtype.metadatas).length === 0"><i class="fa fa-info-circle"></i> {{\'None_f\' | translate}}</span>\n                                    <ul class="list-unstyled nav nav-pills nav-stacked adminContent list-datas">\n                                        <li ng-repeat="meta in (handler.metadonnees.list() | notSameIdInArray:handler.types.editedSubtype.metadatas)">\n                                            <a ng-click="handler.types.addMetadata(meta)">\n                                                <i class="fa fa-plus-circle text-success"></i>\n                                                {{meta.name}}\n                                            </a>\n\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class="col-md-6">\n                                    <p><b>{{\'Admin.Typologie.Ty_Sub_Meta_Actual\' | translate}}</b></p>\n                                    <span class="text-info" ng-if="handler.types.editedSubtype.metadatas.length === 0"><i class="fa fa-info-circle"></i> {{\'None_f\' | translate}}</span>\n                                    <div ng-repeat="currentMeta in handler.types.editedSubtype.metadatas">\n                                        <div style="margin-top:16px;"\n                                             ng-init="meta = (handler.metadonnees.list() | findWithId:currentMeta.id)"\n                                             ng-show="meta.name">\n                                            <span ng-if="!meta.name"\n                                                  ng-init="handler.types.editedSubtype.metadatas.splice($index, 1);"></span>\n                                            <div class="row">\n                                                <p><i tooltip="{{\'Delete\' | translate}}"\n                                                      class="fa fa-times-circle text-danger pointer"\n                                                      ng-click="handler.types.editedSubtype.metadatas.splice($index, 1);"\n                                                      ng-if="!currentMeta.fromCircuit"></i>\n                                                    <b>{{meta.name}}</b></p>\n                                            </div>\n                                            <span class="text-info" ng-if="currentMeta.fromCircuit">\n                                                <i class="fa fa-info-circle"></i>\n                                                Métadonnée relative au circuit\n                                            </span>\n                                            <div class="row" ng-if="!currentMeta.fromCircuit">\n                                                <div class="col-md-12" ng-switch on="meta.type">\n                                                    <div class="row">\n                                                        <div class="form-group" ng-switch-when="DATE"\n                                                             ng-hide="meta.hasValues">\n                                                            <label class="sr-only" for="{{currentMeta.id}}">{{\'Admin.Typologie.Ty_Sub_Meta_Default\'\n                                                                | translate}}</label>\n                                                            <div class="input-group col-md-12" style="padding: 0;">\n                                                                <input placeholder="{{\'Admin.Typologie.Ty_Sub_Meta_Default\' | translate}}"\n                                                                       ng-cloak="" ip-id="currentMeta.id"\n                                                                       return-format="yy-mm-dd" readonly="true"\n                                                                       ip-datepicker type="text"\n                                                                       ng-model="currentMeta.default"\n                                                                       class="form-control unvalidate">\n                                                                <span ng-click="currentMeta.default = \'\'"\n                                                                      class="pointer input-group-addon">X</span>\n                                                            </div>\n                                                        </div>\n                                                        <div class="form-group" ng-switch-when="STRING"\n                                                             ng-hide="meta.hasValues">\n                                                            <label class="sr-only" for="{{currentMeta.id}}">{{\'Admin.Typologie.Ty_Sub_Meta_Default\'\n                                                                | translate}}</label>\n                                                            <input type="text" class="form-control unvalidate"\n                                                                   id="{{currentMeta.id}}"\n                                                                   ng-model="currentMeta.default"\n                                                                   placeholder="{{\'Admin.Typologie.Ty_Sub_Meta_Default\' | translate}}">\n                                                        </div>\n                                                        <div class="form-group" ng-switch-when="URL"\n                                                             ng-hide="meta.hasValues">\n                                                            <label class="sr-only" for="{{currentMeta.id}}">{{\'Admin.Typologie.Ty_Sub_Meta_Default\'\n                                                                | translate}}</label>\n                                                            <input type="text" class="form-control unvalidate"\n                                                                   id="{{currentMeta.id}}"\n                                                                   ng-model="currentMeta.default"\n                                                                   placeholder="{{\'Admin.Typologie.Ty_Sub_Meta_Default\' | translate}}">\n                                                        </div>\n                                                        <div class="form-group mandatory-group-abs"\n                                                             ng-switch-when="INTEGER"\n                                                             ng-hide="meta.hasValues">\n                                                            <label class="sr-only" for="{{currentMeta.id}}">{{\'Admin.Typologie.Ty_Sub_Meta_Default\'\n                                                                | translate}}</label>\n                                                            <span class="label label-info">\n                                                                <i class="fa-info-circle fa"></i>\n                                                                {{\'Admin.Typologie.Ty_Sub_Meta_Int\'\n                                                                | translate}}\n                                                            </span>\n                                                            <input type="text" integer id="{{currentMeta.id}}"\n                                                                   ng-model="currentMeta.default" class="form-control"\n                                                                   placeholder="{{\'Admin.Typologie.Ty_Sub_Meta_Default\' | translate}}">\n                                                        </div>\n                                                        <div class="form-group mandatory-group-abs"\n                                                             ng-switch-when="DOUBLE"\n                                                             ng-hide="meta.hasValues">\n                                                            <label class="sr-only" for="{{currentMeta.id}}">{{\'Admin.Typologie.Ty_Sub_Meta_Default\'\n                                                                | translate}}</label>\n                                                            <span class="label label-info">\n                                                                <i class="fa-info-circle fa"></i>\n                                                                {{\'Admin.Typologie.Ty_Sub_Meta_Double\'\n                                                                | translate}}\n                                                            </span>\n                                                            <input type="text" decimal id="{{currentMeta.id}}"\n                                                                   ng-model="currentMeta.default" class="form-control"\n                                                                   placeholder="{{\'Admin.Typologie.Ty_Sub_Meta_Default\' | translate}}">\n                                                        </div>\n                                                        <div class="form-group" style="padding: 0;"\n                                                             ng-switch-when="BOOLEAN">\n                                                            <label class="sr-only" for="{{currentMeta.id}}">{{\'Admin.Typologie.Ty_Sub_Meta_Default\'\n                                                                | translate}}</label>\n                                                            <select id="{{currentMeta.id}}"\n                                                                    ng-model="currentMeta.default"\n                                                                    class="form-control unvalidate"\n                                                                    ng-options="item.value as item.key for item in boolvalues">\n                                                                <option value="">{{\'Admin.Typologie.Ty_Sub_Meta_Default\'\n                                                                    | translate}}\n                                                                </option>\n                                                            </select>\n                                                        </div>\n                                                        <div class="form-group" style="padding: 0;"\n                                                             ng-show="meta.hasValues">\n                                                            <label class="sr-only" for="{{currentMeta.id}}">{{\'Admin.Typologie.Ty_Sub_Meta_Default\'\n                                                                | translate}}</label>\n                                                            <select id="{{currentMeta.id}}"\n                                                                    ng-model="currentMeta.default"\n                                                                    class="form-control unvalidate"\n                                                                    ng-options="value.value as value.value for value in meta.values">\n                                                                <option value="">{{\'Admin.Typologie.Ty_Sub_Meta_Default\'\n                                                                    | translate}}\n                                                                </option>\n                                                            </select>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <div class="form-inline">\n                                                    <div class="checkbox">\n                                                        <label>\n                                                            <input class="unvalidate" ng-model="currentMeta.mandatory"\n                                                                   ng-true-value="true" ng-false-value="false"\n                                                                   type="checkbox"> {{\'Mandatory\' | translate}}\n                                                        </label>\n                                                    </div>\n                                                    <div class="checkbox">\n                                                        <label>\n                                                            <input class="unvalidate" ng-model="currentMeta.editable"\n                                                                   ng-true-value="true" ng-false-value="false"\n                                                                   type="checkbox"> {{\'Admin.Typologie.Ty_Sub_Meta_Edit\'\n                                                            | translate}}\n                                                        </label>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\'tab-pane\' id=\'calques\' style="overflow:visible;">\n                        <div class="col-md-12 no-padding">\n                            <div class="col-md-6">\n\n                                <script type="text/ng-template" id="popover_info_multidoc_calque">\n                                    <span class="text-info" role="menu" aria-labelledby="dropdownMenuDocs">\n                                            <i class="fa fa-info-circle"></i>\n                                            {{\'Admin.Typologie.muDocs_Info1\' | translate}}<br>\n                                            {{\'Admin.Typologie.muDocs_Info2\' | translate}}<br>\n                                            {{\'Admin.Typologie.muDocs_Info3\' | translate}} <br>\' 1-3,5 \' <br>{{\'Admin.Typologie.muDocs_Info4\' | translate}}\n                                        <br> {{\'Admin.Typologie.muDocs_Info5\' | translate}}\n                                        </span>\n                                </script>\n                                <h3>{{\'Admin.Typologie.Ty_Sub_Cal\' | translate}}\n                                    <button style="float:right;" ng-if="handler.types.editedSubtype.multiDocument" class="btn btn-default fa fa-info-circle" id="dropdownMenuDocs" type="button" bs-popover="\'popover_info_multidoc_calque\'" data-trigger="click">\n                                    </button>\n                                </h3>\n\n                                <div class="col-md-6">\n                                    <p><b>{{\'Admin.Typologie.Ty_Sub_Meta_Avail\' | translate}}</b></p>\n                                    <span class="text-info" ng-if="(handler.calques.list() | notSameIdInArray:handler.types.editedSubtype.calques).length === 0"><i class="fa fa-info-circle"></i> {{\'None\' | translate}}</span>\n                                    <ul class="list-unstyled nav nav-pills nav-stacked adminContent list-datas">\n                                        <li ng-repeat="calque in (handler.calques.list() | notSameIdInArray:handler.types.editedSubtype.calques)">\n                                            <a ng-click="handler.types.addCalque(calque)">\n                                                <i class="fa fa-plus-circle text-success"></i>\n                                                {{calque.name}}\n                                            </a>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class="col-md-6">\n                                    <p><b>{{\'Admin.Typologie.Ty_Sub_Cal_Actual\' | translate}}</b></p>\n                                    <span class="text-info" ng-if="handler.types.editedSubtype.calques.length === 0"><i class="fa fa-info-circle"></i> {{\'None\' | translate}}</span>\n                                    <ul class="list-unstyled nav nav-pills nav-stacked adminContent list-datas">\n                                        <li ng-repeat="currentCalque in handler.types.editedSubtype.calques">\n                                            <a ng-init="calque = (handler.calques.list() | findWithId:currentCalque.id)" ng-click="handler.types.editedSubtype.calques.splice($index, 1);">\n                                                <i class="fa fa-times-circle text-danger"></i>\n                                                {{calque.name}}\n                                            </a>\n                                            <input class="form-control" ng-if="handler.types.editedSubtype.multiDocument" ng-model="currentCalque.numDocument" type="text" ng-pattern="/^(?:\\d+(?:\\-\\d+){0,1}\\,)*(?:\\d+(?:\\-\\d*){0,1})$/" required>\n                                        </li>\n                                    </ul>\n                                </div>\n                            </div>\n                            <div class="col-md-6">\n                                <h3>{{\'Admin.Typologie.Ty_Sub_Cal_Ann\' | translate}}</h3>\n                                <div class="col-md-6">\n                                    <p><b>{{\'Admin.Typologie.Ty_Sub_Meta_Avail\' | translate}}</b></p>\n                                    <span class="text-info" ng-if="(handler.calques.list() | notSameId:handler.types.editedSubtype.calquesAnnexes).length === 0"><i class="fa fa-info-circle"></i> {{\'None\' | translate}}</span>\n                                    <ul class="list-unstyled nav nav-pills nav-stacked adminContent list-datas">\n                                        <li ng-repeat="calque in (handler.calques.list() | notSameId:handler.types.editedSubtype.calquesAnnexes)">\n                                            <a ng-click="handler.types.addCalqueAnnexe(calque)">\n                                                <i class="fa fa-plus-circle text-success"></i>\n                                                {{calque.name}}\n                                            </a>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class="col-md-6">\n                                    <p><b>{{\'Admin.Typologie.Ty_Sub_Cal_Actual\' | translate}}</b></p>\n                                    <span class="text-info" ng-if="handler.types.editedSubtype.calquesAnnexes.length === 0"><i class="fa fa-info-circle"></i> {{\'None\' | translate}}</span>\n                                    <ul class="list-unstyled nav nav-pills nav-stacked adminContent list-datas">\n                                        <li ng-repeat="currentCalque in handler.types.editedSubtype.calquesAnnexes">\n                                            <a ng-init="calque = (handler.calques.list() | findWithId:currentCalque)" ng-click="handler.types.editedSubtype.calquesAnnexes.splice($index, 1);">\n                                                <i class="fa fa-times-circle text-danger"></i>\n                                                {{calque.name}}\n                                            </a>\n                                        </li>\n                                    </ul>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div>\n                    <button ng-if="!handler.types.editedSubtype.isNew" ng-click="handler.types.updateSub()" type="submit" class="btn btn-primary force-display" ng-disabled="!sousTypeForm.$valid || !handler.types.hasCachetSelected()">\n                        <i class="fa fa-floppy-o"></i>\n                        {{\'Save\' | translate}}\n                    </button>\n                    <button ng-if="handler.types.editedSubtype.isNew" ng-click="handler.types.saveSub()" type="submit" class="btn btn-primary force-display" ng-disabled="!sousTypeForm.$valid || !handler.types.hasCachetSelected()">\n                        <i class="fa fa-floppy-o"></i>\n                        {{\'Save\' | translate}}\n                    </button>\n                    <span ng-if="handler.types.errorSubtype != undefined" class="text-danger">\n                        <i class="fa fa-warning"></i>\n                        {{handler.types.errorSubtype}}\n                    </span>\n                    <span ng-if="handler.types.hasCachet() && !handler.types.canCachet() && !!handler.types.editedSubtype.circuit" class="text-danger">\n                        <i class="fa fa-warning"></i>\n                        Erreur ! Le cachet serveur n\'est disponible que pour de la signature PAdES !\n                    </span>\n                    <span style="position: relative; margin-left: 30px;"  ng-if="handler.types.saving">\n                        <span us-spinner="{radius:10, width:4, length: 8}"></span>\n                    </span>\n                </div>\n            </div>\n        </form>\n    </div>\n</div>\n');
}]),angular.module("templates/admin/utilisateurs.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/admin/utilisateurs.html",'<div class="row-fluid">\n    <div class="menuAdmin col-md-3 label label-info headertop" removeonsize="992" classes-list="label label-info" ng-include src="\'partials/adminNavbar.html\'"></div>\n\n    <div class="col-md-12 adminContent">\n        <div class="row">\n            <div class="col-md-12">\n                <div class="row">\n                    <div class="col-md-9">\n                        <h2 style="display:inline-block;">{{\'Admin.Users.User_Title\' | translate}}</h2>\n                        <span style="margin-bottom:20px; margin-left:50px;" class="btn btn-success" ng-click="createUser()"><i class="fa fa-plus-circle"></i> {{\'Admin.Users.User_Create\' | translate}}</span>\n                    </div>\n                </div>\n\n                <div class="row">\n                    <div class="col-md-4">\n                        <form name="find">\n                            <div class="input-group">\n                                <span class="input-group-addon"><i class="fa fa-search fa-fw"></i></span>\n                                <input type="text" class="unvalidate form-control" ng-change="changeSearch()" placeholder="{{\'Admin.Users.User_Search\' | translate}}" ng-model="search">\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="row">\n            <div class="col-md-12">\n                <div style="top:100px;" class="nextDossierInfo" ng-if="flags.isSearching">\n                    <span class="text text-info">\n                        {{\'Admin.Users.User_Searching\' | translate}}\n                    </span>\n                    <span style="position: relative; width: 0px; z-index: 2000000000; right: 90px; top: 100px;" us-spinner="{radius:20, width:8, length: 16}" ></span>\n                </div>\n                <form name="userCreation">\n                    <table ng-show="(flags.hasSearch && users.length > 0 && !flags.isSearching) || !empty(newUser)" ng-table="tableParams" class="table table-striped">\n\n                        <tr ng-if="!empty(newUser)">\n                            <td data-title="\'Admin.Users.User_Lastname\' | translate" sortable="\'lastName\'">\n                                <input name="lastName" placeholder="{{\'Admin.Users.User_Lastname\' | translate}}" type="text" class="form-control" ng-model="newUser.lastName" required="required">\n                            </td>\n                            <td data-title="\'Admin.Users.User_Firstname\' | translate" sortable="\'firstName\'">\n                                <input name="firstName" placeholder="{{\'Admin.Users.User_Firstname\' | translate}}" type="text" class="form-control" ng-model="newUser.firstName" required="required">\n                            </td>\n                            <td data-title="\'Admin.Users.User_Name\' | translate" sortable="\'username\'">\n                                <input name="username" placeholder="{{\'Admin.Users.User_Name\' | translate}}" ng-pattern=\'/^[^&:"£*/<>?%|+;]*$/\' type="text" class="form-control" ng-model="newUser.username" required="required">\n                                <span class="text-danger" ng-show="exist"><i class="fa fa-warning"></i> {{\'Admin.Users.User_Exist\' | translate}}</span>\n                                <span class="text-danger" ng-show="multiTenantEnableError"><i class="fa fa-warning"></i> {{\'Admin.Users.User_MultiT\' | translate}}</span>\n                                <span class="text-danger" ng-show="userCreation.username.$error.pattern"><i class="fa fa-warning"></i> {{\'Admin.Users.User_SpecialChar\' | translate}}</span>\n                            </td>\n                            <td data-title="\'Admin.Users.User_Mail\' | translate" sortable="\'email\'">\n                                <input name="email" placeholder="Courriel" type="email" class="form-control unvalidate" ng-model="newUser.email">\n                                <span class="text-danger" ng-show="userCreation.email.$error.email"><i class="fa fa-warning"></i> {{\'Admin.Users.User_Mail_Error\' | translate}}</span>\n                            </td>\n                            <td data-title="\'Admin.Users.User_Info\' | translate"></td>\n                            <td style="text-align: center;" data-title="\'Admin.Users.User_Actions\' | translate">\n                                <span tooltip="Annuler" ng-click="cancelCreate()" class="btn btn-warning force-display">\n                                    <i class="fa fa-times-circle"></i>\n                                </span>\n                                <button tooltip="Enregistrer" type="submit" ng-click="askForPassword()" class="btn btn-primary force-display" ng-disabled="!userCreation.$valid">\n                                    <i class="fa fa-floppy-o"></i>\n                                </button>\n                            </td>\n                        </tr>\n\n                        <tr ng-repeat="user in $data">\n                            <td data-title="\'Admin.Users.User_Lastname\' | translate" sortable="\'lastName\'">\n                                {{user.lastName}}\n                            </td>\n                            <td data-title="\'Admin.Users.User_Firstname\' | translate" sortable="\'firstName\'">\n                                {{user.firstName}}\n                            </td>\n                            <td data-title="\'Admin.Users.User_Name\' | translate" sortable="\'username\'">\n                                {{user.username}}\n                            </td>\n                            <td data-title="\'Admin.Users.User_Mail\' | translate" sortable="\'email\'">\n                                {{user.email}}\n                            </td>\n                            <td data-title="\'Admin.Users.User_Info\' | translate">\n                                <i class="fa fa-certificate fa-2x text-success" ng-if="user.hasCertificate" tooltip="{{\'Admin.Users.User_HasCert\' | translate}}"></i>\n                                <i class="fa fa-user fa-2x text-success" ng-if="user.isAdmin" tooltip="{{\'Admin.Users.User_IsAdmin\' | translate}}"></i>\n                                <i class="fa fa-desktop fa-2x text-success" style="vertical-align: inherit;" ng-if="user.isAdminFonctionnel" tooltip="{{\'Admin.Users.User_IsFonc\' | translate}}"></i>\n                                <i class="fa fa-share-alt-square fa-2x text-success" ng-if="user.isFromLdap" tooltip="{{\'Admin.Users.User_LDAP\' | translate}}"></i>\n                            </td>\n                            <td style="text-align: center;" data-title="\'Admin.Users.User_Actions\' | translate">\n                            <span ng-click="editUser(user)" tooltip="Modifier l\'utilisateur" class="btn btn-info force-display">\n                                <i class="fa fa-pencil"></i>\n                            </span>\n                            <span tooltip="Supprimer l\'utilisateur" ng-if="user.username !== \'admin\' && !(user.username.split(\'@\')[0] === \'admin\' && !tenantName)"\n                                  tooltip="" ng-click="deleteUser(user)" class="btn btn-danger force-display">\n                                <i class="fa fa-trash-o"></i>\n                            </span>\n                            </td>\n                        </tr>\n                    </table>\n                </form>\n                <div class="col-md-12" ng-if="!flags.isSearching">\n                    <p>\n                        <span ng-show="(!users || users.length === 0) && flags.hasSearch" class="text-info">{{\'Admin.Users.User_None\' | translate}}</span>\n                        <span ng-show="!flags.hasSearch" class="text-info">{{\'Admin.Users.User_HasToSearch\' | translate}}</span>\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>')}]),angular.module("templates/admin/workers.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/admin/workers.html",'<div class="row-fluid">\n    <div class="menuAdmin col-md-3 label label-info headertop" removeonsize="992" classes-list="label label-info" ng-include src="\'partials/adminNavbar.html\'"></div>\n    <div>\n        <!-- contenu -->\n        <div class="col-md-3 adminContent">\n            <h2>Gestion des workers</h2>\n\n        </div>\n\n        <div class="col-md-9 adminContent">\n            Content\n        </div>\n    </div>\n</div>\n')}]),angular.module("templates/apercu.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/apercu.html",'<div>\n\n    <ul is-visible-dash ng-show="!apercu.annotations.fullscreen" listen-on="dashletsPosition.left" is-visible="apercu.annotations.hasDashlets.left" ui-sortable="{connectWith:\'.list-dash-right\'}" ng-model="dashletsPosition.left" class="list-dash-left">\n        <li ng-repeat="element in dashletsPosition.left" ng-include="\'partials/dashlets/\'+element.name+\'.html\'">\n        </li>\n    </ul>\n\n    <div ng-cloak ng-show="loaded" class="annotatableContainer" ng-style="apercu.annotations.fullscreen ? {width:\'100%\', paddingLeft:\'20px\', paddingRight:\'20px\', left:\'0\'} : (apercu.annotations.hasDashlets.left ? apercu.annotations.hasDashlets.right ? {width:\'60%\', height:\'60%\', left:\'20%\'} : {width:\'80%\', height:\'80%\', right:\'0\', paddingRight:\'20px\'} : {width:\'80%\', height:\'80%\', left:\'0\', paddingLeft:\'20px\'})">\n        <div class="helper-inline-block" ng-if="dossier.isXemEnabled && !apercu.flags.noVisuel" style="position:absolute; padding-left:50px;padding-top:15px;">\n            <i class="fa fa-file-pdf-o fa-2x block" ng-if="apercu.iframe.visuType === \'xemelios\'" ng-class="apercu.iframe.current < 0 ? \'text-danger\' : \'pointer\'" ng-click="apercu.iframe.switchVisu()" tooltip="{{\'apercu.Show_with_PDF_reader\' | translate}}" tooltip-placement="right"></i>\n            <i class="fa fa-file-excel-o fa-2x block pointer" ng-if="apercu.iframe.visuType === \'visuelpdf\'" ng-click="apercu.iframe.switchVisu()" tooltip="{{\'apercu.Show_with_Xemelios_viewer\' | translate}}" tooltip-placement="right"></i>\n        </div>\n\n        <div class="helper-inline-block" style="position:absolute;">\n            <i class="fa fa-save fa-2x block pointer" ng-click="saveDashletsPosition()" tooltip-placement="right" tooltip="{{\'apercu.Save_screen_layout\' | translate}}"></i>\n            <i ng-if="!apercu.flags.noVisuel || dossier.isXemEnabled" class="fa fa-expand fa-2x block pointer" ng-class="apercu.annotations.fullscreen ? \'fa-compress\' : \'fa-expand\'" ng-click="apercu.annotations.switchFullscreen()" tooltip-placement="right" tooltip="{{apercu.annotations.fullscreen ? (\'apercu.Exit_fullscreen_mode\' | translate) : (\'apercu.View_folder_in_fullscreen_mode\' | translate)}}"></i>\n            <div class="signaturePosition" ng-if="apercu.annotations.canPositionSignature()">\n                <i class="fa fa-hand-o-up fa-2x pointer" ng-class="apercu.annotations.signatureMode ? \'text-danger\' : \'\'" ng-click="apercu.annotations.signatureMode = !apercu.annotations.signatureMode" tooltip-placement="right" tooltip="{{forCachet ? \'apercu.position_cachet\': \'apercu.position_signature\' | translate}}"></i>\n                <div ng-if="apercu.annotations.signatureMode" class="text-info"><i class="fa fa-info-circle"></i> {{forCachet ? \'apercu.position_cachet_mode_active\' : \'apercu.position_mode_active\' | translate}}</div>\n            </div>\n        </div>\n\n\n        <div ng-hide="apercu.flags.noVisuel || (dossier.isXemEnabled && apercu.iframe.visuType === \'xemelios\')" pagination timestamp="timestamp" ng-change="apercu.annotations.pageChanged()" previous-text="Précédent" next-text="Suivant" first-text="Première Page" last-text="Dernière Page" total-items="apercu.annotations.pageCount" items-per-page="1" ng-model="apercu.annotations.viewPage" max-size="apercu.annotations.maxSize" class="pagination-sm" boundary-links="true" rotate="false"></div>\n\n        <span class="text-info nextDossierInfo" ng-if="nextDossierSelected"><i class="fa fa-info-circle"></i> {{\'apercu.Action_pending_Next_folder_selected\' | translate}}</span>\n\n        <span class="text-info nextDossierInfo" ng-if="dashletsSaved"><i class="fa fa-info-circle"></i> {{\'apercu.Screen_layout_saved\' | translate}}</span>\n\n        <span class="text-info nextDossierInfo" ng-if="refreshDossier"><i class="fa fa-info-circle"></i> {{\'apercu.Folder_refreshing_Please_wait\' | translate}}</span>\n\n        <span class="text-danger nextDossierInfo" ng-if="hasNoVisualToDisplay()"><i class="fa fa-times"></i> {{\'apercu.No_visual_to_display\' | translate}}</span>\n\n        <span class="text-info nextDossierInfo" ng-if="isGenerating()"><i class="fa fa-info-circle"></i> {{\'apercu.Visual_generating\' | translate}}</span>\n\n        <div ng-if="(!(apercu.flags.noVisuel || (dossier.isXemEnabled && apercu.iframe.visuType === \'xemelios\'))) || apercu.flags.annotShownOnce"\n             ng-init="apercu.flags.annotShownOnce = true;"\n             ng-show="!(apercu.flags.noVisuel || (dossier.isXemEnabled && apercu.iframe.visuType === \'xemelios\'))"\n             annotorious\n             load-on="apercu.annotations.canLoad"\n             document-page-listen="apercu.annotations.documentPage"\n             src-base="apercu.annotations.src"\n             on-created="apercu.annotations.create(annotation)"\n             set-position="apercu.annotations.setPosition(anno, annotation)"\n             on-updated="apercu.annotations.update(annotation)"\n             on-removed="apercu.annotations.remove(annotation)"\n             on-load="apercu.annotations.load(anno, width, height)"\n             signature-mode="apercu.annotations.signatureMode"\n             for-cachet="forCachet"\n             version-number="getCurrentDocumentVersionNumber()">\n        </div>\n\n        <div ng-show="(dossier.isXemEnabled && apercu.iframe.visuType === \'xemelios\')" class="pagination">\n            <span class="btn btn-default" ng-click="apercu.iframe.previousPage()" ng-disabled="apercu.iframe.current <= 0">{{\'apercu.Previous_page\' | translate}}</span>\n            <span class="btn btn-default" ng-click="apercu.iframe.nextPage()" ng-disabled="!(apercu.iframe.current < apercu.iframe.max)">{{\'apercu.Next_page\' | translate}}</span>\n            <div ng-if="apercu.iframe.current < 0" class="text-info" style="position:absolute; right:0; bottom:0;">{{\'apercu.Loading_Xemelios_viewer___\' | translate}}</div>\n        </div>\n\n        <iframe ng-cloak class="fixbottom" id="visionneuse" style="width: 100%; margin-bottom:20px;" onLoad="onIframeLoad()" ng-if="dossier.isXemEnabled && apercu.iframe.visuType === \'xemelios\'" ng-src="{{context + \'/proxy/alfresco/parapheur/dossiers/\' + dossier.id + \'/\' + dossier.documents[0].id + \'/xemelios\'}}" localize>\n            {{\'apercu.Cant_load_the_Xemelios_viewer\' | translate}}\n        </iframe>\n\n        <span us-spinner style="position:absolute; top:100px; right:50%;" spinner-key="spinnerLoading"></span>\n\n        <div style="position:absolute; top:5px; right:20px;" ng-if="apercu.annotations.fullscreen" ng-include="\'partials/dashlets/actions.html\'">\n        </div>\n\n    </div>\n\n    <div style="top:100px;" class="nextDossierInfo" ng-show="!loaded && !bestBureauError">\n        <span class="text text-info" localize>\n            {{\'apercu.Loading_folder_preview___\' | translate}}\n        </span>\n        <span style="position: relative; width: 0px; z-index: 2000000000; right: 120px; top: 100px;" us-spinner="{radius:20, width:8, length: 16}" ></span>\n    </div>\n    <div style="top:100px;" class="nextDossierInfo" ng-show="bestBureauError">\n        <span class="text text-warning">\n            <i class="fa fa-warning"></i>\n            {{\'apercu.Moved_archived_or_deleted_folder\' | translate}}\n        </span>\n    </div>\n\n    <ul is-visible-dash ng-show="!apercu.annotations.fullscreen" listen-on="dashletsPosition.right" is-visible="apercu.annotations.hasDashlets.right" ui-sortable="{connectWith:\'.list-dash-left\'}" ng-model="dashletsPosition.right" class="list-dash-right">\n        <li ng-repeat="element in dashletsPosition.right" ng-include="\'partials/dashlets/\'+element.name+\'.html\'">\n        </li>\n    </ul>\n</div>')}]),angular.module("templates/archives.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/archives.html",'<!-- Modal de suppression de filtre -->\n<div bs-modal when="filterToDelete"\n     title="{{\'archive.deleting_filter_\' | translate}} {{filterToDelete}}"\n     primary-label="{{\'Delete\' | translate}}"\n     primary-action="deleteFilter()">\n    <p>{{\'archives.are_you_sure_you_want_to_delete_the_filter_\' | translate}} <strong>{{filterToDelete}}</strong> ?</p>\n</div>\n\n<!-- Modal d\'ajout de filtre -->\n<div bs-modal when="filterToSave"\n     title="{{\'archive.saving_filter\' | translate}}"\n     primary-label="{{\'Save\' | translate}}"\n     primary-action="saveFilter()">\n    <label>\n        {{\'archives.choose_a_name_for_your_filter\' | translate}} :\n        <input type="text" ng-model="newFilterName">\n    </label>\n</div>\n\n<div class="dashboard-page">\n<div id="dashboard-filters" class="well">\n    <form action="#" method="post">\n        <tabset>\n            <tab heading="{{\'Basic\' | translate}}">\n                <div class="row col-md-12" style="margin-top:10px;">\n                    <!-- TYPE -->\n                    <fieldset class="col-md-4">\n                        <label class="checkbox">\n                            <input class="unvalidate" ng-checked="dashboard.showed.types.length" ng-change="dashboard.showed.types = []; dashboard.showed.subtypes = []" type="checkbox" ng-model="selectType"/>\n                            Type\n                        </label>\n                        <select multiple class="form-control unvalidate" ng-change="selectType = true" ng-selected="selectType" ng-model="dashboard.showed.types" ng-options="type.id as type.id for type in typo"></select>\n                    </fieldset>\n                    <!-- SOUS-TYPE -->\n                    <fieldset class="col-md-4">\n                        <label class="checkbox">\n                            <input class="unvalidate"  ng-checked="dashboard.showed.subtypes.length" ng-change="dashboard.showed.subtypes = []" type="checkbox" ng-model="selectSubtype"/>\n                            {{\'SubType\' | translate}}\n                        </label>\n                        <select multiple  class="form-control unvalidate" ng-change="selectSubtype = true" ng-model="dashboard.showed.subtypes" ng-options="ssType as ssType for ssType in (typo | sameId:dashboard.showed.types | mergeArrays:\'sousTypes\')"></select>\n                    </fieldset>\n\n                    <!-- DATE -->\n                    <fieldset class="col-md-2">\n                        <div class="control-group">\n                            <label class="checkbox">\n                                <input  class="unvalidate" ng-checked="dashboard.showed.dateFrom || dashboard.showed.dateTo" ng-change="dashboard.showed.dateFrom=\'\';dashboard.showed.dateTo=\'\'" ng-model="selectDate" type="checkbox"/>\n                                {{\'archives.creation_date\' | translate}}\n                            </label>\n\n                            <div class="input-group">\n                                <input  ng-change="selectDate = true" type="text" id="from" from="true" linked="#to" ng-model="dashboard.showed.dateFrom" class="form-control unvalidate" readonly="true" ip-datepicker i18n="app.dashboard.filters.from" kind="attr" attr="placeholder"/>\n                                <span ng-if="!!dashboard.showed.dateFrom" ng-click="dashboard.showed.dateFrom = undefined"\n                                      class="pointer input-group-addon">\n                                        <i class="fa fa-times"></i>\n                                    </span>\n                                <label style="display: table-cell;" ng-if="!dashboard.showed.dateFrom" class="input-group-addon btn" for="from">\n                                    <i class="fa fa-calendar"></i>\n                                </label>\n\n                            </div>\n\n                            <div class="input-group">\n                                <input  ng-change="selectDate = true" type="text" id="to" linked="#from" ng-model="dashboard.showed.dateTo" class="form-control unvalidate" readonly="true" ip-datepicker i18n="app.dashboard.filters.to" kind="attr" attr="placeholder"/>\n                                <span ng-if="!!dashboard.showed.dateTo" ng-click="dashboard.showed.dateTo = undefined"\n                                      class="pointer input-group-addon">\n                                        <i class="fa fa-times"></i>\n                                    </span>\n                                <label style="display: table-cell;" ng-if="!dashboard.showed.dateTo" class="input-group-addon btn" for="to">\n                                    <i class="fa fa-calendar"></i>\n                                </label>\n                            </div>\n\n                        </div>\n                    </fieldset>\n\n                    <div class="col-md-2">\n\n                        <!-- CONTENT -->\n                        <div>\n                            <label for="searchValue">\n                                {{\'Title\' | translate}}\n                            </label>\n                            <input type="text" ng-model="dashboard.showed.title" id="searchValue" name="searchValue" class="form-control unvalidate"/>\n                        </div>\n                    </div>\n\n\n                </div>\n            </tab>\n            <tab heading="{{\'Advanced\' | translate}} {{metaFilter.length > 0 ? \'- Actuellement : \' + (metaFilter | object2string:\', \':\'name\') : \'\'}}">\n                <div class="row col-md-12 ng-scope" style="margin-top:10px;">\n                    <div class="col-md-4">\n                        <label>\n                            {{\'archives.available_filters\' | translate}}\n                            <select size="5"\n                                    ng-options="el.value as el.key group by el.group for el in optionsFiltersAvailable"\n                                    class="form-control unvalidate"\n                                    ng-change="createAdvancedFilter(selectedMetadonneeIndex.index)"\n                                    ng-model="selectedMetadonneeIndex.index">\n                            </select>\n                        </label>\n                    </div>\n                    <div class="col-md-4">\n                        <div ng-show="!empty(metaTmpFilter)">\n                            <label>\n                                {{!empty(metaTmpFilter) ? metaTmpFilter.name + \' - Condition\' : \'\'}}\n                                <select class="form-control unvalidate" ng-change="editAdvancedFilter()" ng-show="metaTmpFilter.values !== undefined" ng-model="metaTmpFilter.text" ng-options="val for val in metaTmpFilter.values">\n                                </select>\n                                <input ng-cloak ng-keydown="keyDownAdvancedFilter($event)" ng-change="editAdvancedFilter()" type="text" class="form-control unvalidate" ng-model="metaTmpFilter.text" ng-show="metaTmpFilter.values === undefined && metaTmpFilter.type === \'STRING\'">\n                                <input ng-cloak ng-keydown="keyDownAdvancedFilter($event)" ng-change="editAdvancedFilter()" integer type="text" class="form-control unvalidate" ng-model="metaTmpFilter.text" ng-show="metaTmpFilter.values === undefined && metaTmpFilter.type === \'INTEGER\'">\n                                <input ng-cloak ng-keydown="keyDownAdvancedFilter($event)" ng-change="editAdvancedFilter()" decimal type="text" class="form-control unvalidate" ng-model="metaTmpFilter.text" ng-show="metaTmpFilter.values === undefined && metaTmpFilter.type === \'DOUBLE\'">\n                                <input ng-cloak ng-keydown="keyDownAdvancedFilter($event)" ng-change="editAdvancedFilter()" type="checkbox" class="unvalidate" ng-model="metaTmpFilter.text" ng-true-value="\'true\'" ng-false-value="\'false\'" ng-show="metaTmpFilter.values === undefined && metaTmpFilter.type === \'BOOLEAN\'">\n                                <input ng-cloak ng-keydown="keyDownAdvancedFilter($event)" ng-change="editAdvancedFilter()" ng-show="metaTmpFilter.values === undefined && metaTmpFilter.type === \'DATE\'" type="text" id="fromMeta" from="true" linked="#toMeta" ng-model="metaTmpFilter.dateFrom" class="form-control unvalidate" readonly="true" ip-datepicker i18n="app.dashboard.filters.from" kind="attr" attr="placeholder"/>\n                            </label>\n                            <label>\n                                <input ng-keydown="keyDownAdvancedFilter($event)" ng-change="editAdvancedFilter()" ng-show="metaTmpFilter.type === \'DATE\'" type="text" id="toMeta" linked="#fromMeta" ng-model="metaTmpFilter.dateTo" class="form-control unvalidate" readonly="true" ip-datepicker i18n="app.dashboard.filters.to" kind="attr" attr="placeholder"/>\n                            </label>\n                            <div>\n                                <span class="btn btn-info" ng-click="saveAdvancedFilter()">OK</span>\n                                <span ng-show="selectedMetadonneeIndex.bis !== \'\'" class="btn btn-warning" ng-click="deleteAdvancedFilter()">Supprimer</span>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="col-md-4">\n                        <label>\n                            {{\'archives.current_advanced_filder\' | translate}}\n                            <select size="5" ng-keydown="keyDownAdvancedActiveFilter($event)" class="form-control unvalidate" ng-change="selectAdvancedFilter(selectedMetadonneeIndex.bis)" ng-model="selectedMetadonneeIndex.bis">\n                                <option value="">-- {{\'archives.select_a_filter_to_edit\' | translate}} --</option>\n                                <option ng-repeat="item in metaFilter" ng-value="$index"><i class="fa fa-trash"></i>{{item.name}} = {{item.text}}{{item.dateFrom ? item.dateFrom : \'\'}}{{item.dateTo ? \' -> \' + item.dateTo : \'\'}}</option>\n                            </select>\n                        </label>\n                    </div>\n                </div>\n            </tab>\n        </tabset>\n\n        <hr>\n\n        <!-- DO FILTER -->\n        <div class="row">\n            <div class="col-md-12">\n                <div class="col-md-offset-4 col-md-3">\n                    <span ng-if="!dashboard.navigation.selected == unsavedFilterName"\n                          class="btn btn-default"\n                          ng-click="dashboard.save()">\n                        <i class="fa fa-save"></i> {{\'archives.save_current_filter\' | translate}}\n                    </span>\n                    <span ng-if="(!!dashboard.navigation.selected) && (dashboard.navigation.selected !== unsavedFilterName) && (dashboard.navigation.selected !== noFilterName)"\n                          class="btn btn-danger"\n                          ng-click="dashboard.remove()">\n                        <i class="fa fa-trash-o"></i> {{\'archives.delete_selected_filter\' | translate}}\n                    </span>\n                </div>\n                <div class="col-md-offset-2 col-md-3">\n                    <fieldset>\n                        <span ng-click="dashboard.resetFilter()" class="btn btn-default">\n                            <i class="fa fa-undo"></i>\n                            Réinitialiser\n                        </span>\n                        <span ng-click="dashboard.doFilter()" class="btn btn-success">\n                            <i class="fa fa-filter"></i>\n                            {{\'archives.apply_filter\' | translate}}\n                        </span>\n                    </fieldset>\n                </div>\n            </div>\n        </div>\n    </form>\n\n\n</div>\n\n<div class="alert alert-info row">\n\n    <div class="filtreActif col-xs-10">\n            <span>\n                <i class="icon-filter"></i>\n                <strong id="titleInfoFiltre">{{\'archives.active_filter\' | translate}} :</strong>\n            </span>\n            <span ng-hide="currentFilter.types || currentFilter.subtypes || currentFilter.dateFrom || currentFilter.dateTo || currentFilter.title || currentFilter.metadonnees.length > 0">\n                <strong>{{\'archives.None\' | translate}}</strong>\n            </span>\n            <span ng-show="currentFilter.types" id="filtreType">\n                <p>{{\'archives.type\' | translate}} </p>\n                <strong>\n                    <p ng-repeat="type in currentFilter.types">&nbsp;{{type}},</p>\n                </strong>\n            </span>\n            <span ng-show="currentFilter.subtypes" id="filtreSousType">\n                <p>{{\'archives.subtype\' | translate}}</p>\n                <strong>\n                    <p ng-repeat="subtype in currentFilter.subtypes">&nbsp;{{subtype}},</p>\n                </strong>\n            </span>\n            <span id="filtreDate">\n                <span ng-show="currentFilter.dateFrom" id="filtreFrom">\n                    <p> {{\'archives.from\' | translate}} </p>\n                    <strong>{{currentFilter.dateFrom | texttodate | date:\'fullDate\'}}</strong>\n                </span>\n                <span ng-show="currentFilter.dateTo" id="filtreTo">\n                    <p> {{\'archives.until\' | translate}} </p>\n                    <strong>{{currentFilter.dateTo | texttodate | date:\'fullDate\'}}</strong>\n                </span>\n            </span>\n            <span ng-show="currentFilter.title" id="filtreRecherche">\n                <span class="icon-angle-right"></span>\n                 {{\'archives.searching\' | translate}}\n                <strong>"{{currentFilter.title}}"</strong>\n                 {{\'archives.in\' | translate}}\n                <strong>{{\'Title\' | translate}}</strong>\n            </span>\n            <span ng-show="currentFilter.metadonnees.length > 0" id="filtreMetadonnees">\n                {{\'archives.with\' | translate}}\n                <span ng-repeat="meta in currentFilter.metadonnees">\n                    <strong ng-show="{{meta.type === \'STRING\'}}" >{{meta.name}} = "{{meta.text}}",</strong>\n                    <strong ng-show="{{meta.type === \'BOOLEAN\'}}" >{{meta.name}} = {{(meta.text === "\'true\'" ? \'archives.true\' : \'archives.false\') | translate}},</strong>\n                    <span ng-show="{{meta.type ===\'DATE\'}}">\n                        <strong>{{meta.name}}</strong>\n                        <span ng-show="meta.dateFrom">\n                            <p> {{\'archives.from\' | translate}} </p>\n                            <strong>{{meta.dateFrom | texttodate | date:\'fullDate\'}}</strong>\n                        </span>\n                        <span ng-show="meta.dateTo">\n                            <p> {{\'archives.until\' | translate}} </p>\n                            <strong>{{meta.dateTo | texttodate | date:\'fullDate\'}}</strong>\n                        </span>\n                        ,\n                    </span>\n                </span>\n            </span>\n    </div>\n\n    <!-- FILTERS HANDLER -->\n    <div class="col-xs-2">\n        <select ng-model="dashboard.navigation.selected"\n                ng-options="name as translateFilter(name) for (name, filter) in dashboard.list"\n                ng-change="dashboard.change()"\n                class="form-control unvalidate">\n            <option value="">{{noFilterName | translate}}</option>\n        </select>\n    </div>\n</div>\n<table class="table table-condensed table-bordered dashboard-table">\n    <thead>\n    <tr>\n        <th ng-repeat="data in dashboard.columns.enabled" ng-class="data.key ? \'sort-th pointer\' : \'\'" ng-click="sortTable(data.key)">\n            <i ng-if="nav.currentChamp === data.key" class="fa" ng-class="nav.ascBase ? data.value === \'created\' ? \'fa-sort-numeric-asc\' : \'fa-sort-alpha-asc\' : data.value === \'created\' ? \'fa-sort-numeric-desc\' : \'fa-sort-alpha-desc\'"></i> {{data.i18n | translate}}\n        </th>\n    </tr>\n    </thead>\n    <tbody>\n    <tr ng-repeat="dossier in dossiers" ng-style="{{checkColoration(dossier)}}">\n        <td ng-repeat="data in dashboard.columns.enabled" ng-switch on="data.value">\n            <p ng-switch-when="type">\n                {{dossier[\'type\']}} / {{dossier[\'sousType\']}}\n            </p>\n\n            <p ng-switch-when="created">\n                {{dossier[data.value] | texttodate | date:\'dd/MM/yyyy\'}}\n            </p>\n            <p ng-switch-when="telechargements" class="downloadCol" style="display:block;text-align: center;font-size:18px;">\n                <a ng-if="dossier.sig === \'true\'"\n                   href="{{context}}/proxy/alfresco/api/node/content%3bph%3asig/workspace/SpacesStore/{{dossier.id}}/{{removeSlash(dossier.title)}}_sig.zip">\n                    <i tooltip="Signatures" class="fa ls-signature"></i>\n                </a>\n                <a ng-if="dossier.original === \'true\'" target="_blank" href="{{context}}/proxy/alfresco/api/node/content%3bph%3aoriginal/workspace/SpacesStore/{{dossier.id}}/{{removeSlash(dossier.originalName)}}">\n                    <i tooltip="Document Original" class="fa fa-download"></i>\n                </a>\n                <a ng-if="dossier.attest" target="_blank" ng-init="attestName = \'attest-\' + dossier.originalName" href="{{context}}/proxy/alfresco/api/node/content%3bph%3aattest-content/workspace/SpacesStore/{{dossier.id}}/{{attestName}}">\n                    <i tooltip="Attestation de signature" class="fa fa-check-circle-o"></i>\n                </a>\n            </p>\n            <p ng-switch-when="title">\n\n                <a target="_blank" href="{{context}}/proxy/alfresco/api/node/workspace/SpacesStore/{{dossier.id}}/content/{{getFullTitle(dossier.title)}}">\n                    {{dossier[data.value]}}\n                </a>\n                <a target="_blank" class="xemelios" ng-if="dossier.isXemEnabled && dossier.original === \'true\'" href="{{context}}/proxy/alfresco/parapheur/archives/{{dossier.id}}/xemelios">\n                    <img ng-src="{{context}}/res/images/xemelios.png">\n                </a>\n            </p>\n            <a ng-switch-when="title" tooltip="Supprimer" ng-if="config.isAdmin" class="btn btn-danger float-right" ng-click="deleteArchive(dossier)">\n                <i class="fa fa-trash-o"></i>\n            </a>\n            <a ng-switch-when="title" tooltip="Renommer" ng-if="config.isAdmin" class="btn btn-info float-right" ng-click="renameArchive(dossier)">\n                <i class="fa fa-ellipsis-h"></i>\n            </a>\n\n            <p ng-switch-default>\n                {{dossier[data.value]}}\n            </p>\n        </td>\n    </tr>\n    </tbody>\n</table>\n</div>\n\n<div class="paginate">\n    <div ng-click="changePage(false)" ng-class="{true:\'enable\', false:\'disable\'}[nav.hasPrev]" class="page {{hasPrev}}"><p class="inline" i18n="app.general.page.previous"></p><i class="icon-circle-arrow-left"></i></div>\n    <p style="display:inline-block;">{{\'archives.current_page\' | translate}} : {{nav.currentPage+1}}</p>\n    <div ng-click="changePage(true)" ng-class="{true:\'enable\', false:\'disable\'}[nav.hasNext]" class="page"><i class="icon-circle-arrow-right"></i><p class="inline" i18n="app.general.page.next"></p></div>\n</div>\n\n<!-- Panneau d\'alertes, d\'informations et d\'erreurs -->\n<div notify text="alert" class="notifications bottom-right">\n</div>\n\n\n\n');
}]),angular.module("templates/bureaux.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/bureaux.html",'<div style="position:relative;">\n    <ul class="liste-bureaux">\n        <li class="bureaux-animate" ng-repeat="bureau in orderedBureaux">\n            <div bureau on-select="selectBureau(bureau)" is-thumbnail="true" b="bureau"></div>\n        </li>\n    </ul>\n\n    <div style="position:absolute; top:-30px; right:30px">\n        <span class="text-info" ng-if="orderedBureaux.length === 1">\n            <i class="fa fa-info-circle"> {{\'bureau.you_only_have_one_desk_automatic_selection_\' | translate}}</i>\n        </span>\n\n        <span class="text-info" ng-if="orderedBureaux.length === 0">\n            <i class="fa fa-info-circle"> {{\'bureau.no_desk\' | translate}}</i>\n        </span>\n    </div>\n</div>\n\n\n')}]),angular.module("templates/dashboard.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/dashboard.html",'<!-- Modal de suppression de filtre -->\n<div bs-modal when="filterToDelete"\n     title="{{\'dashboard.Deleting_filter\' | translate}} : {{filterToDelete}}"\n     primary-label="{{\'Delete\' | translate}}"\n     primary-action="deleteFilter()">\n    <p>{{\'dashboard.Are_you_sure_you_want_to_delete_the_filter\' | translate}} : <strong>{{filterToDelete}}</strong> ?</p>\n</div>\n\n<!-- Modal d\'ajout de filtre -->\n<div bs-modal when="filterToSave"\n     title="{{\'dashboard.Saving_current_filter\' | translate}}"\n     primary-label="{{\'Save\' | translate}}"\n     primary-action="saveFilter()">\n    <label>\n        {{\'dashboard.Choose_a_filter_name\' | translate}} :\n        <input type="text" ng-model="newFilterName">\n    </label>\n</div>\n\n<script type="text/ng-template" id="popover_list_documents">\n    {{\'dashboard.Main_documents\' | translate}} :\n    <ul class="list-unstyled">\n        <li ng-repeat="doc in dossier.documentsPrincipaux">\n            <a target="_blank" class="wrap" href="{{context}}/proxy/alfresco/api/node/workspace/SpacesStore/{{doc.id}}/content/{{doc.name}}">\n                <i class="fa" ng-class="getFileExtIcon(doc.name)"></i>\n                {{doc.name}}\n            </a>\n        </li>\n    </ul>\n</script>\n\n<div class="dashboard-page">\n    <div id="dashboard-filters" class="well">\n        <form action="#" method="post">\n\n            <tabset>\n                <tab heading="{{\'dashboard.Base\' | translate}}">\n                    <div class="row col-md-12" style="margin-top:10px;">\n                        <!-- TYPE -->\n                        <fieldset class="col-md-4">\n                            <label class="checkbox">\n                                <input class="unvalidate" ng-disabled="dashboard.searchContent == \'true\'" ng-checked="dashboard.showed.types.length" ng-change="dashboard.showed.types = []; dashboard.showed.subtypes = []" type="checkbox" ng-model="selectType"/>\n                                {{\'dashboard.Type\' | translate}}\n                            </label>\n                            <select multiple class="form-control unvalidate" ng-disabled="dashboard.searchContent == \'true\'" ng-change="selectType = true" ng-selected="selectType" ng-model="dashboard.showed.types" ng-options="type.id as type.id for type in typo"></select>\n                        </fieldset>\n                        <!-- SOUS-TYPE -->\n                        <fieldset class="col-md-4">\n                            <label class="checkbox">\n                                <input class="unvalidate" ng-disabled="dashboard.searchContent == \'true\'" ng-checked="dashboard.showed.subtypes.length" ng-change="dashboard.showed.subtypes = []" type="checkbox" ng-model="selectSubtype"/>\n                                {{\'dashboard.SubType\' | translate}}\n                            </label>\n                            <select multiple ng-disabled="dashboard.searchContent == \'true\'" class="form-control unvalidate" ng-change="selectSubtype = true" ng-model="dashboard.showed.subtypes" ng-options="ssType as ssType for ssType in (typo | sameId:dashboard.showed.types | mergeArrays:\'sousTypes\')"></select>\n                        </fieldset>\n\n                        <!-- DATE -->\n                        <fieldset class="col-md-2">\n                            <div class="control-group">\n                                <label class="checkbox">\n                                    <input ng-disabled="dashboard.searchContent == \'true\'" class="unvalidate" ng-checked="dashboard.showed.dateFrom || dashboard.showed.dateTo" ng-change="dashboard.showed.dateFrom=\'\';dashboard.showed.dateTo=\'\'" ng-model="selectDate" type="checkbox"/>\n                                    {{\'dashboard.Creation_date\' | translate}}\n                                </label>\n\n                                <div class="input-group">\n                                    <input ng-disabled="dashboard.searchContent == \'true\'" ng-change="selectDate = true" type="text" id="from" from="true" linked="#to" ng-model="dashboard.showed.dateFrom" class="form-control unvalidate" readonly="true" ip-datepicker i18n="app.dashboard.filters.from" kind="attr" attr="placeholder"/>\n                                    <span ng-if="!!dashboard.showed.dateFrom" ng-click="dashboard.showed.dateFrom = undefined"\n                                          class="pointer input-group-addon">\n                                        <i class="fa fa-times"></i>\n                                    </span>\n                                    <label style="display: table-cell;" ng-if="!dashboard.showed.dateFrom" class="input-group-addon btn" for="from">\n                                        <i class="fa fa-calendar"></i>\n                                    </label>\n\n                                </div>\n\n                                <div class="input-group">\n                                    <input ng-disabled="dashboard.searchContent == \'true\'" ng-change="selectDate = true" type="text" id="to" linked="#from" ng-model="dashboard.showed.dateTo" class="form-control unvalidate" readonly="true" ip-datepicker i18n="app.dashboard.filters.to" kind="attr" attr="placeholder"/>\n                                    <span ng-if="!!dashboard.showed.dateTo" ng-click="dashboard.showed.dateTo = undefined"\n                                          class="pointer input-group-addon">\n                                        <i class="fa fa-times"></i>\n                                    </span>\n                                    <label style="display: table-cell;" ng-if="!dashboard.showed.dateTo" class="input-group-addon btn" for="to">\n                                        <i class="fa fa-calendar"></i>\n                                    </label>\n                                </div>\n                            </div>\n                        </fieldset>\n\n                        <div class="col-md-2">\n                            <!-- CORBEILLE -->\n                            <fieldset class="control-group">\n                                <label i18n="app.dashboard.filters.files.title"></label>\n                                <select ng-disabled="dashboard.searchContent == \'true\'" ng-options="corbeille.key as corbeille.value for corbeille in corbeillesListFilter" ng-model="dashboard.showed.dossier" class="form-control unvalidate">\n                                </select>\n                            </fieldset>\n\n                            <!-- CONTENT -->\n                            <div>\n                                <label for="searchValue">\n                                    {{\'dashboard.Search\' | translate}} :\n                                </label>\n\n                                <label class="radio-inline">\n                                    <input class="unvalidate" type="radio" name="radio-content" ng-checked="dashboard.showed.dossier === \'content\'" ng-model="dashboard.searchContent" id="content-filter" value="true">\n                                    {{\'dashboard.Full_text\' | translate}}\n                                </label>\n                                <label class="radio-inline">\n                                    <input class="unvalidate" type="radio" name="radio-content" ng-change="dashboard.showed.dossier=\'a-traiter\'" ng-checked="dashboard.showed.dossier !== \'content\'" ng-model="dashboard.searchContent" id="title-radio" value="false">\n                                    {{\'Title\' | translate}}\n                                </label>\n\n                                <input type="text" ng-model="dashboard.showed.title" id="searchValue" name="searchValue" class="form-control unvalidate"/>\n                            </div>\n                        </div>\n\n\n                    </div>\n                </tab>\n                <tab heading="{{\'dashboard.Advanced\' | translate}} {{metaFilter.length > 0 ? (\'- \' + (\'Currently\' | translate) + \' : \') + (metaFilter | object2string:\', \':\'name\') : \'\'}}">\n                    <div style="margin-top:10px; display: flex;">\n                        <div style="flex: 0 0 33%;">\n                            <label style="width: 95%;">\n                                {{\'dashboard.Available_filters\' | translate}}\n                                <select size="5" class="form-control unvalidate" ng-change="createAdvancedFilter(selectedMetadonneeIndex.index)" ng-model="selectedMetadonneeIndex.index">\n                                    <option value="">-- {{\'dashboard.Select_to_create_a_filter\' | translate}} --</option>\n                                    <optgroup label="{{\'dashboard.Metadata\' | translate}}">\n                                        <option ng-repeat="item in metadonnees" ng-value="$index">{{item.name}}</option>\n                                    </optgroup>\n                                </select>\n                            </label>\n                        </div>\n                        <div style="flex: 0 0 33%;">\n                            <div ng-hide="empty(metaTmpFilter) || metaTmpFilter.name === undefined">\n                                <label>\n                                    {{metaTmpFilter.name + \' - Condition\'}}\n                                    <select class="form-control unvalidate" ng-show="metaTmpFilter.values !== undefined"\n                                            ng-model="metaTmpFilter.text"\n                                            ng-options="val for val in metaTmpFilter.values">\n                                    </select>\n                                    <input ng-cloak type="text" class="form-control unvalidate"\n                                           ng-model="metaTmpFilter.text"\n                                           ng-show="metaTmpFilter.values === undefined && (metaTmpFilter.type === \'STRING\' || metaTmpFilter.type === \'URL\')">\n                                    <input ng-cloak integer type="text" class="form-control unvalidate"\n                                           ng-model="metaTmpFilter.text"\n                                           ng-show="metaTmpFilter.values === undefined && metaTmpFilter.type === \'INTEGER\'">\n                                    <input ng-cloak decimal type="text" class="form-control unvalidate"\n                                           ng-model="metaTmpFilter.text"\n                                           ng-show="metaTmpFilter.values === undefined && metaTmpFilter.type === \'DOUBLE\'">\n                                    <input ng-cloak type="checkbox" class="unvalidate" ng-model="metaTmpFilter.text"\n                                           ng-true-value="true" ng-false-value="false"\n                                           ng-show="metaTmpFilter.values === undefined && metaTmpFilter.type === \'BOOLEAN\'">\n                                    <input ng-cloak\n                                           ng-show="metaTmpFilter.values === undefined && metaTmpFilter.type === \'DATE\'"\n                                           type="text" id="fromMeta" from="true" linked="#toMeta"\n                                           ng-model="metaTmpFilter.dateFrom" class="form-control unvalidate"\n                                           readonly="true" ip-datepicker i18n="app.dashboard.filters.from" kind="attr"\n                                           attr="placeholder"/>\n                                </label>\n                                <label>\n                                    <input ng-show="metaTmpFilter.type === \'DATE\'" type="text" id="toMeta"\n                                           linked="#fromMeta" ng-model="metaTmpFilter.dateTo"\n                                           class="form-control unvalidate" readonly="true" ip-datepicker\n                                           i18n="app.dashboard.filters.to" kind="attr" attr="placeholder"/>\n                                </label>\n\n                                <div>\n                                    <span class="btn btn-info" ng-click="saveAdvancedFilter()">OK</span>\n                                    <span ng-show="selectedMetadonneeIndex.bis !== \'\'" class="btn btn-warning" ng-click="deleteAdvancedFilter()">{{\'Delete\' | translate}}</span>\n                                </div>\n                            </div>\n                        </div>\n                        <div style="flex: 0 0 33%;">\n                            <label style="width:95%;">\n                                {{\'dashboard.Current_advanced_filters\' | translate}}\n                                <select size="5" ng-keydown="keyDownAdvancedActiveFilter($event)" class="form-control unvalidate" ng-change="selectAdvancedFilter(selectedMetadonneeIndex.bis)" ng-model="selectedMetadonneeIndex.bis">\n                                    <option value="">-- Édition de filtre --</option>\n                                    <option ng-repeat="item in metaFilter" ng-value="$index">{{item.name}} =\n                                        {{item.text === \'\\\'true\\\'\' ? \'Oui\' : (item.text === \'\\\'false\\\'\' || item.text ===\n                                        \'false\') ? \'Non\' : item.text}}{{item.dateFrom ? item.dateFrom :\n                                        \'\'}}{{item.dateTo ? \' -> \' + item.dateTo : \'\'}}\n                                    </option>\n                                </select>\n                            </label>\n                        </div>\n                    </div>\n                </tab>\n            </tabset>\n\n            <hr>\n\n            <!-- DO FILTER -->\n            <div class="row">\n                <div class="col-md-12">\n                    <div class="col-md-offset-4 col-md-3">\n                        <span ng-if="dashboard.navigation.selected === unsavedFilterName"\n                              class="btn btn-default"\n                              ng-click="dashboard.save() && (dashboard.navigation.selected !== \'\')">\n                            <i class="fa fa-save"></i> {{\'dashboard.Save_current_filter\' | translate}}\n                        </span>\n                        <span ng-if="(!!dashboard.navigation.selected) && (dashboard.navigation.selected !== unsavedFilterName) && (dashboard.navigation.selected !== defaultFilterName)"\n                              class="btn btn-danger"\n                              ng-click="dashboard.remove()">\n                            <i class="fa fa-trash-o"></i> {{\'dashboard.Delete_selected_filter\' | translate}}\n                        </span>\n                    </div>\n                    <div class="col-md-offset-2 col-md-3">\n                        <fieldset>\n                            <button ng-click="dashboard.resetFilter()" class="btn btn-default" type="reset">\n                                <i class="fa fa-undo"></i>\n                                {{\'Reset\' | translate}}\n                            </button>\n                            <button ng-click="dashboard.doFilter()" class="btn btn-success" type="button">\n                                <i class="fa fa-filter"></i>\n                                {{"Filter" | translate}}\n                            </button>\n                        </fieldset>\n                    </div>\n                </div>\n            </div>\n        </form>\n    </div>\n\n    <div class="alert alert-info row" style="margin-bottom:5px;">\n\n        <div class="filtreActif col-xs-10">\n            <span>\n                <i class="fa fa-filter"></i>\n                <strong id="titleInfoFiltre">{{\'dashboard.Active_filter\' | translate}} :</strong>\n            </span>\n            <span id="filtreDossiers">\n                <strong ng-show="currentFilter.dossier && currentFilter.dossier !== \'content\'"\n                        i18n="{{corbeilleList[currentFilter.dossier]}}" watch-value="currentFilter"></strong>\n            </span>\n            <span ng-show="currentFilter.types.length > 0" id="filtreType">\n                <p> {{\'dashboard.of_type\' | translate}} </p>\n                <strong>\n                    <p ng-repeat="type in currentFilter.types">&nbsp;{{type}},</p>\n                </strong>\n            </span>\n            <span ng-show="currentFilter.subtypes.length > 0" id="filtreSousType">\n                <p>{{\'dashboard.of_subtype\' | translate}}</p>\n                <strong>\n                    <p ng-repeat="subtype in currentFilter.subtypes">&nbsp;{{subtype}},</p>\n                </strong>\n            </span>\n            <span id="filtreDate">\n                <span ng-show="currentFilter.dateFrom" id="filtreFrom">\n                    <p> {{\'dashboard.from\' | translate}} </p>\n                    <strong>{{currentFilter.dateFrom | texttodate | date:\'fullDate\'}}</strong>\n                </span>\n                <span ng-show="currentFilter.dateTo" id="filtreTo">\n                    <p> {{\'dashboard.until\' | translate}} </p>\n                    <strong>{{currentFilter.dateTo | texttodate | date:\'fullDate\'}}</strong>\n                </span>\n            </span>\n            <span ng-show="currentFilter.title" id="filtreRecherche">\n                <span class="icon-angle-right"></span>\n                 {{\'dashboard.Search\' | translate}}\n                <strong>"{{currentFilter.title}}"</strong>\n                 {{\'dashboard.in\' | translate}}\n                <strong ng-show="currentFilter.dossier == \'content\'">{{\'dashboard.Content\' | translate}}</strong>\n                <strong ng-hide="currentFilter.dossier == \'content\'">{{\'Title\' | translate}}</strong>\n            </span>\n            <span ng-show="currentFilter.metadonnees.length > 0" id="filtreMetadonnees">\n                {{\'dashboard.with\' | translate}}\n                <span ng-repeat="meta in currentFilter.metadonnees">\n                    <strong ng-show="{{meta.type === \'STRING\'}}">{{meta.name}} = "{{meta.text}}",</strong>\n                    <strong ng-show="{{meta.type === \'BOOLEAN\'}}" >{{meta.name}} = {{(meta.text === "\'true\'" ? \'dashboard.true\' : \'dashboard.false\') | translate}},</strong>\n                    <span ng-show="{{meta.type ===\'DATE\'}}">\n                        <strong>{{meta.name}}</strong>\n                        <span ng-show="meta.dateFrom">\n                            <p> {{\'dashboard.from\' | translate}} </p>\n                            <strong>{{meta.dateFrom | texttodate | date:\'fullDate\'}}</strong>\n                        </span>\n                        <span ng-show="meta.dateTo">\n                            <p> {{\'dashboard.until\' | translate}} </p>\n                            <strong>{{meta.dateTo | texttodate | date:\'fullDate\'}}</strong>\n                        </span>\n                        ,\n                    </span>\n                </span>\n            </span>\n        </div>\n\n        <!-- FILTERS HANDLER -->\n        <div class="col-xs-2">\n            <select ng-model="dashboard.navigation.selected"\n                    ng-options="name as translateFilter(name) for (name, filter) in dashboard.list"\n                    ng-change="dashboard.change()"\n                    class="form-control unvalidate">\n                <option value="">{{defaultFilterName | translate}}</option>\n            </select>\n        </div>\n    </div>\n\n\n    <div style="display:flex; height: 47px; flex-wrap: wrap; align-items: center;">\n        <div style="flex: 0 0 33%;">\n            <div id="actions" class="left-buttons action-buttons">\n                <a class="fa fa-2x text-muted" ng-class="isOnlySignature() ? \'ls-signature\' : isOnlyCachet() ? \'ls-stamp\' : isOnlyVisa() ? \'fa-check-square-o\': \'fa-check\'" ng-show="(!isDossierLockedInSelection()) && ((dossiersToDo | intersectionOnProperty:\'actions\').indexOf(\'VALIDATION\') !== -1)" ng-click="checkReadAndLaunchModal(\'VALIDATION\')" tooltip="{{isOnlySignature() ? \'Signer\' : isOnlyCachet() ? \'Cacheter\' :  isOnlyVisa() ? \'Viser\' : \'Valider\'}}" tooltip-placement="bottom">\n                </a>\n                <a class="fa fa-2x fa-check text-muted" ng-show="(!isDossierLockedInSelection()) && ((dossiersToDo | intersectionOnProperty:\'actions\').indexOf(\'TDT_HELIOS\') !== -1)" ng-click="launchModal(\'TDT_HELIOS\')" i18n="app.general.actions.tdt" kind="tooltip">\n                </a>\n                <a class="fa fa-2x fa-reply text-muted" ng-show="(!isDossierLockedInSelection()) && ((dossiersToDo | intersectionOnProperty:\'actions\').indexOf(\'REMORD\') !== -1)" ng-click="launchModal(\'REMORD\')" tooltip="Exercer mon droit de remords" tooltip-placement="right">\n                </a>\n                <a class="fa fa-2x fa-times text-muted" ng-show="(!isDossierLockedInSelection()) && ((dossiersToDo | intersectionOnProperty:\'actions\').indexOf(\'REJET\') !== -1)" ng-click="launchModal(\'REJET\')" tooltip="Rejeter">\n                </a>\n                <a class="fa fa-2x fa-inbox text-muted" ng-show="(!isDossierLockedInSelection()) && ((dossiersToDo | intersectionOnProperty:\'actions\').indexOf(\'ARCHIVAGE\') !== -1)" ng-click="launchModal(\'ARCHIVAGE\')" tooltip="{{\'actions.archive\' | translate}}" tooltip-placement="right">\n                </a>\n                <a class="fa fa-2x fa-share text-muted" ng-show="(!isDossierLockedInSelection()) && ((dossiersToDo | intersectionOnProperty:\'actions\').indexOf(\'TRANSFERT_ACTION\') !== -1)" ng-click="launchModal(\'TRANSFERT\')" i18n="Transférer les dossiers" kind="tooltip">\n                </a>\n                <a class="fa fa-2x fa-paper-plane-o text-muted" ng-show="(dossiersToDo | intersectionOnProperty:\'actions\').indexOf(\'EMAIL\') !== -1" ng-click="launchModal(\'EMAIL\')" i18n="app.general.actions.email" kind="tooltip">\n                </a>\n                <a class="fa fa-2x fa-trash-o text-muted" ng-show="(!isDossierLockedInSelection()) && ((dossiersToDo | intersectionOnProperty:\'actions\').indexOf(\'SUPPRESSION\') !== -1)" ng-click="launchModal(\'SUPPRESSION\')" i18n="app.general.actions.delete" kind="tooltip">\n                </a>\n                <a class="fa fa-2x fa-user text-muted" ng-show="(!isDossierLockedInSelection()) && ((dossiersToDo | intersectionOnProperty:\'actions\').indexOf(\'SECRETARIAT\') !== -1)" ng-click="launchModal(\'SECRETARIAT\')" i18n="{{currentBureau.isSecretaire ? \'Renvoyer le dossier\' : \'app.general.actions.sendToSecretariat\'}}" kind="tooltip">\n                </a>\n            </div>\n\n\n            <div class="text-info" style="padding-left:30px;">\n                <span ng-if="dossiersToDo.length > 0"><i class="fa fa-info-circle"></i> {{(\'dashboard._number_folder_s_selected\' | translate).replace("-number-", dossiersToDo.length)}}</span>\n            </div>\n        </div>\n\n        <div ng-if="delegation.hasToShow && delegation.showed && (delegation.titulaires.length > 0 || delegation.current[\'date-debut-delegation\'] < delegation.timestamp || delegation.current[\'date-fin-delegation\'] > delegation.timestamp)"\n             class="alert alert-info" style="flex: 0 0 33%;">\n            <script type="text/ng-template" id="popover_titulaires">\n                <ul class="list-unstyled text-info">\n                    <li ng-repeat="titulaire in delegation.titulaires">{{titulaire}}</li>\n                </ul>\n            </script>\n            <span>\n                <strong ng-if="delegation.titulaires.length === 0">\n                    Délégations :\n                </strong>\n                <span ng-if="delegation.titulaires.length > 0">\n                    <strong class="pointer" ng-click="delegation.showDossiers()">\n                        <i class="fa fa-share"></i> ({{delegation.dossiers}}) {{\'dashboard.delegated_folders\' | translate}}\n                    </strong>\n                    <span>\n                        <span tooltip="Titulaire" ng-if="delegation.titulaires.length === 1">{{delegation.titulaires[0]}} <i class="fa fa-arrow-right"></i></span>\n                        <span ng-if="delegation.titulaires.length > 1">\n                            <span class="btn btn-default" data-placement="bottom" bs-popover="\'popover_titulaires\'" data-trigger="hover">Titulaires</span>&nbsp;<i class="fa fa-arrow-right"></i>\n\n                        </span>\n                    </span>\n                </span>\n\n                <span tooltip="Mon Bureau">{{currentBureau.name}}</span>\n                <span tooltip="Suppléant"\n                      ng-if="delegation.current[\'date-debut-delegation\'] < delegation.timestamp || delegation.current[\'date-fin-delegation\'] > delegation.timestamp">\n                    <i class="fa fa-arrow-right"></i>\n                    {{delegation.current.titreCible}}\n                </span>\n            </span>\n        </div>\n\n\n        <div class="paginate" style="margin-left: auto;">\n            <p style="display:inline-block;">{{\'dashboard.Current_page\' | translate}} : {{nav.currentPage+1}}</p>\n\n            <div ng-if="nav.hasPrev || nav.hasNext" title="Précédent" ng-click="changePage(false)" ng-class="{true:\'\', false:\'disabled\'}[nav.hasPrev]" class="btn btn-default">\n                <i class="fa-chevron-left fa"></i></div>\n            <div ng-if="nav.hasPrev || nav.hasNext" title="Suivant" ng-click="changePage(true)" ng-class="{true:\'\', false:\'disabled\'}[nav.hasNext]" class="btn btn-default">\n                <i class="fa-chevron-right fa"></i></div>\n        </div>\n    </div>\n\n\n    <div ng-if="!loaded">\n        <div style="position:relative;" class="nextDossierInfo">\n            <span class="text text-info">\n                <i class="fa fa-info-circle"></i> {{\'dashboard.Retrieving_folders___\' | translate}}\n            </span>\n            <span style="position: relative; width: 0; z-index: 2000000000; right: 120px; top: 100px;" us-spinner="{radius:20, width:8, length: 16}"></span>\n        </div>\n    </div>\n    <div ng-if="loaded && dossiers.length > 0">\n        <div class="fixbottom" id="table-container" style=" overflow-y: auto; margin-bottom:10px;">\n            <table class="table table-condensed table-bordered" id="data-table">\n                <thead>\n                <tr>\n                    <th>\n                        <label>\n                            <input class="unvalidate" ng-click="setAllCheck(!masterCheckbox); updateActions()" ng-model="masterCheckbox" type="checkbox">\n                        </label>\n                    </th>\n                    <th ng-repeat="data in dashboard.columns.enabled" ng-class="data.key ? \'pointer\' : \'\'" ng-click="sortTable(data)">\n                        <div>\n                            <i ng-if="nav.currentChamp === data.key" class="fa" ng-class="nav.ascBase ? \'fa-sort-alpha-asc\' : \'fa-sort-alpha-desc\'"></i>\n                            {{data.i18n | translate}}\n                        </div>\n                    </th>\n                </tr>\n\n                </thead>\n                <tbody>\n                <tr ng-repeat="dossier in dossiers" ng-class="checkboxDossier[$index] ? \'selected-row\' : \'\'">\n                    <td>\n                        <label>\n                            <input class="unvalidate" ng-model="checkboxDossier[$index]" type="checkbox">\n                        </label>\n                    </td>\n                    <td ng-repeat="data in dashboard.columns.enabled" ng-switch on="data.value">\n                        <a href="#/apercu" ng-click="selectDossier(dossier)" ng-switch-when="title">\n                            {{dossier[data.value]}}\n                            <a class="navbar-link" ng-switch-when="title"\n                               ng-show="(dossier.banetteName === \'Dossiers à transmettre\' || \'Dossiers à relire - annoter\') && dossier.actions.indexOf(\'EDITION\') !== -1"\n                               ng-click="selectDossier(dossier)" href="#/nouveau">\n                                <i class="fa fa-pencil" tooltip="Modifier"></i>\n                            </a>\n                            <span class="label label-danger float-right" ng-switch-when="title"\n                                  ng-if="dossier.dateLimite && dossier.dateLimite < delegation.timestamp">{{\'dashboard.Late\' | translate}}</span>\n                        </a>\n\n                        <p ng-switch-when="type">\n                            {{dossier[\'type\']}} / {{dossier[\'sousType\']}}\n                        </p>\n\n                        <p ng-switch-when="actionDemandee" class="center block" style="min-width:60px;">\n                            <span>\n                                <i class="fa" tooltip="{{getReadMandatoryTooltip(dossier)}}"\n                                   ng-class="dossier.hasRead ? \'fa-eye text-success\' : dossier.readingMandatory && dossier.actionDemandee === \'SIGNATURE\' ? \'fa-warning text-danger\' : \'fa-eye-slash text-yellow\'"></i>\n                            </span>\n                            <i ng-if="!dossier.locked" class="fa fa-lg" ng-class="getIconClass(dossier, data)" tooltip="{{getActionTooltip(dossier, data)}}"></i>\n\n                            <i ng-if="dossier.locked" i18n="Traitement en cours" kind="tooltip" placement="top"\n                               class="fa fa-spinner center fa-spin"></i>\n                        </p>\n\n                        <p ng-switch-when="dateEmission">\n                            {{dossier[data.value] | texttodate | date:\'dd/MM/yyyy\'}}\n                        </p>\n\n                        <p ng-switch-when="dateLimite">\n                            {{dossier[data.value] | texttodate | date:\'dd/MM/yyyy\'}}\n                        </p>\n\n                        <div ng-switch-when="visual">\n                            <a target="_blank" class="xemelios" ng-click="readDossier(dossier)"\n                               ng-if="(dossier.documentsPrincipaux[0].name | fileext) === \'xml\' && dossier.isXemEnabled && dossier.protocol === \'HELIOS\'"\n                               href="{{context}}/proxy/alfresco/parapheur/dossiers/{{dossier.id}}/{{dossier.documentsPrincipaux[0].id}}/xemelios">\n                                <img ng-src="{{context}}/res/images/xemelios.png">\n                            </a>\n                            <a ng-show="(dossier.documentsPrincipaux[0].name | fileext) !== \'xml\' || !dossier.isXemEnabled || dossier.protocol !== \'HELIOS\'"\n                               target="_blank" class="wrap"\n                               ng-click="readDossier(dossier)"\n                               href="{{context}}/proxy/alfresco/api/node/workspace/SpacesStore/{{dossier.documentsPrincipaux[0].id}}/content/{{dossier.documentsPrincipaux[0].name}}">\n                                <i class="fa" ng-class="getFileExtIcon(dossier.documentsPrincipaux[0].name)"></i>\n                                {{dossier.documentsPrincipaux[0].name}}\n                            </a>\n                            <div ng-if="dossier.documentsPrincipaux.length > 1" class="dropdown multiDoc">\n                                <button class="btn btn-default fa fa-list-ul dropdown-toggle" id="dropdownMenuDocs"\n                                        type="button" data-toggle="dropdown" aria-expanded="true">\n                                </button>\n                                <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuDocs">\n                                    <li role="presentation" class="dropdown-header">{{\'dashboard.Main_documents\' |\n                                        translate}}\n                                    </li>\n                                    <li ng-repeat="doc in dossier.documentsPrincipaux">\n                                        <a target="_blank" class="wrap"\n                                           href="{{context}}/proxy/alfresco/api/node/workspace/SpacesStore/{{doc.id}}/content/{{doc.name}}">\n                                            <i class="fa" ng-class="getFileExtIcon(doc.name)"></i>\n                                            {{doc.name}}\n                                        </a>\n                                    </li>\n                                </ul>\n                            </div>\n\n                            <span ng-if="!dossier.documentsPrincipaux" class="text-info"><i\n                                    class="fa fa-info-circle"></i> {{\'dashboard.No_document\' | translate}}</span>\n                        </div>\n\n                        <p ng-switch-default>\n                            <span ng-if="data.type === \'DOUBLE\'">{{dossier[data.value] | number:2}}</span>\n                            <span ng-if="data.type !== \'DOUBLE\'">{{dossier[data.value]}}</span>\n                        </p>\n                    </td>\n                </tr>\n                </tbody>\n            </table>\n            <table copy-size="table-container" style="position: fixed; pointer-events:none; top:146px; "\n                   class="table table-condensed table-bordered">\n                <thead style="visibility: hidden; pointer-events: auto; background-color: white; color: #333333;">\n                <tr>\n                    <th>\n                        <label>\n                            <input class="unvalidate" ng-click="setAllCheck(!masterCheckbox); updateActions()" ng-model="masterCheckbox" type="checkbox">\n                        </label>\n                    </th>\n                    <th ng-repeat="data in dashboard.columns.enabled" ng-class="data.key ? \'pointer\' : \'\'"\n                        ng-click="sortTable(data)">\n                        <div>\n                            <i ng-if="nav.currentChamp === data.key || nav.currentChamp === data.value" class="fa" ng-class="nav.ascBase ? \'fa-sort-alpha-asc\' : \'fa-sort-alpha-desc\'"></i>\n                            {{data.i18n | translate}}\n                        </div>\n                    </th>\n                </tr>\n\n                </thead>\n                <tbody class="no-border" style="visibility: hidden;">\n                <tr ng-repeat="dossier in dossiers" ng-class="checkboxDossier[$index] ? \'selected-row\' : \'\'">\n                    <td>\n                        <label>\n                            <input class="unvalidate" ng-model="checkboxDossier[$index]" type="checkbox">\n                        </label>\n                    </td>\n                    <td ng-repeat="data in dashboard.columns.enabled" ng-switch on="data.value">\n                        <a href="#/apercu" ng-click="selectDossier(dossier)" ng-switch-when="title">\n                            {{dossier[data.value]}}\n                            <a class="navbar-link" ng-switch-when="title" ng-show="(dossier.banetteName === \'Dossiers à transmettre\' || \'Dossiers à relire - annoter\') && dossier.actions.indexOf(\'EDITION\') !== -1" ng-click="selectDossier(dossier)" href="#/nouveau">\n                                <i class="fa fa-pencil"></i>\n                            </a>\n                            <span class="label label-danger float-right" ng-switch-when="title" ng-if="dossier.dateLimite && dossier.dateLimite < delegation.timestamp">{{\'dashboard.Late\' | translate}}</span>\n                        </a>\n\n                        <p ng-switch-when="type">\n                            {{dossier[\'type\']}} / {{dossier[\'sousType\']}}\n                        </p>\n\n                        <p ng-switch-when="actionDemandee" class="center block" style="min-width:60px;">\n                            <span>\n                                <i class="fa" tooltip="{{getReadMandatoryTooltip(dossier)}}"\n                                   ng-class="dossier.hasRead ? \'fa-eye text-success\' : dossier.readingMandatory && dossier.actionDemandee === \'SIGNATURE\' ? \'fa-warning text-danger\' : \'fa-eye-slash text-yellow\'"></i>\n                            </span>\n                            <i ng-if="!dossier.locked" class="fa fa-lg" ng-class="getIconClass(dossier, data)" tooltip="{{getActionTooltip(dossier, data)}}"></i>\n                            <i ng-if="dossier.locked" i18n="Traitement en cours" kind="tooltip" placement="top" class="fa fa-spinner center fa-spin"></i>\n                        </p>\n\n                        <p ng-switch-when="dateEmission">\n                            {{dossier[data.value] | texttodate | date:\'dd/MM/yyyy\'}}\n                        </p>\n\n                        <p ng-switch-when="dateLimite">\n                            {{dossier[data.value] | texttodate | date:\'dd/MM/yyyy\'}}\n                        </p>\n\n                        <div ng-switch-when="visual">\n                            <a target="_blank" class="xemelios" ng-click="readDossier(dossier)" ng-if="(dossier.documentsPrincipaux[0].name | fileext) === \'xml\' && dossier.isXemEnabled && dossier.protocol === \'HELIOS\'" href="{{context}}/proxy/alfresco/parapheur/dossiers/{{dossier.id}}/{{dossier.documentsPrincipaux[0].id}}/xemelios">\n                                <img ng-src="{{context}}/res/images/xemelios.png">\n                            </a>\n                            <a ng-if="(dossier.documentsPrincipaux[0].name | fileext) !== \'xml\' || !dossier.isXemEnabled || dossier.protocol !== \'HELIOS\'" target="_blank" class="wrap" ng-click="readDossier(dossier)" href="{{context}}/proxy/alfresco/api/node/workspace/SpacesStore/{{dossier.documentsPrincipaux[0].id}}/content/{{dossier.documentsPrincipaux[0].name}}">\n                                <i class="fa" ng-class="getFileExtIcon(dossier.documentsPrincipaux[0].name)" ></i>\n                                {{dossier.documentsPrincipaux[0].name}}\n                            </a>\n                            <div ng-if="dossier.documentsPrincipaux.length > 1" class="dropdown multiDoc">\n                                <button class="btn btn-default fa fa-list-ul dropdown-toggle" id="dropdownMenuDocs" type="button" data-toggle="dropdown" aria-expanded="true">\n                                </button>\n                                <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuDocs">\n                                    <li role="presentation" class="dropdown-header">{{\'dashboard.Main_documents\' | translate}}</li>\n                                    <li ng-repeat="doc in dossier.documentsPrincipaux">\n                                        <a target="_blank" class="wrap" href="{{context}}/proxy/alfresco/api/node/workspace/SpacesStore/{{doc.id}}/content/{{doc.name}}">\n                                            <i class="fa" ng-class="getFileExtIcon(doc.name)"></i>\n                                            {{doc.name}}</a>\n                                    </li>\n                                </ul>\n                            </div>\n\n                            <span ng-if="!dossier.documentsPrincipaux" class="text-info"><i class="fa fa-info-circle"></i> {{\'dashboard.No_document\' | translate}}</span>\n                        </div>\n\n                        <p ng-switch-default>\n                            <span ng-if="data.type === \'DOUBLE\'">{{dossier[data.value] | number:2}}</span>\n                            <span ng-if="data.type !== \'DOUBLE\'">{{dossier[data.value]}}</span>\n                        </p>\n                    </td>\n                </tr>\n                </tbody>\n            </table>\n        </div>\n\n    </div>\n\n    <span class="text text-info center block" ng-if="dossiers.length === 0 && loaded && !error">\n        <i class="fa fa-info-circle"></i> {{\'dashboard.No_folder_found\' | translate}}\n    </span>\n    <span class="text text-danger center block" ng-if="error">\n        <i class="fa fa-warning"></i> {{errorMessage}}\n    </span>\n</div>\n\n\n\n');
}]),angular.module("templates/delegation.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/delegation.html",'<div class="container delegationPage">\n    <div ng-if="!loaded">\n        <div style="top:100px;" class="nextDossierInfo">\n        <span class="text text-info">\n            <i class="fa fa-info-circle"></i> {{\'delegation.Retrieving_current_delegation\' | translate}}\n        </span>\n            <span style="position: relative; width: 0px; z-index: 2000000000; right: 120px; top: 100px;" us-spinner="{radius:20, width:8, length: 16}" ></span>\n        </div>\n    </div>\n\n    <div class="page-header" ng-if="loaded">\n        <h1>{{\'delegation.Delegation\' | translate}}</h1>\n    </div>\n\n    <div class="col-md-3">\n        <legend>Etat actuel :\n            <span ng-if="delegationEnabled">\n                <span class="label label-success" ng-if="when === \'present\'">{{\'Activated\' | translate}}</span>\n                <span class="label label-warning" ng-if="when === \'past\'">{{\'delegation.Past\' | translate}}</span>\n                <span class="label label-info" ng-if="when === \'future\'">{{\'delegation.Upcoming\' | translate}}</span>\n            </span>\n            <span class="label label-danger" ng-show="!delegationEnabled">{{\'Desactivated\' | translate}}</span>\n        </legend>\n    </div>\n\n    <div class="col-md-9" ng-if="loaded">\n        <div>\n            <label style="" ng-class="delegationActivated ? \'text-danger\' : \'text-success\'" for="activatedDelegation">\n                <i ng-if="!delegationActivated" class="fa fa-2x fa-toggle-off"></i>\n                <i ng-if="delegationActivated" class="fa fa-2x fa-toggle-on"></i>\n                <span ng-if="!delegationActivated">{{\'Admin.Bureaux.BuMod_Deleg_Enable\' | translate}}</span>\n                <span ng-if="delegationActivated">Désactiver la délégation</span>\n                <input style="display: none;" class="unvalidate" id="activatedDelegation" type="checkbox" ng-click="selectedDelegation.idCible = undefined" ng-model="delegationActivated">\n            </label>\n        </div>\n        <form name="delegation" ng-show="delegationActivated">\n            <div class="form-group">\n                <label class="control-label" for="parapheurCible">{{\'delegation.Target_desk\' | translate}}</label>\n                <div class="input-group">\n                    <div class="right-inner-addon">\n                        <i class="fa fa-question-circle" tooltip-trigger="click" tooltip-placement="bottom" tooltip="{{\'Admin.Dossiers.Find_Desk_Info\' | translate}}"></i>\n                        <input id="parapheurCible" type="text" class="form-control unvalidate" ng-model="selectedBureauForDelegation" placeholder="{{\'Admin.Dossiers.Find_Desk\' | translate}}"\n                               typeahead="b as b.title for b in bureau.associes | filter:$viewValue | limitTo:5"\n                               typeahead-on-select="checkDelegation($item)"\n                               name="parapheurCible" required>\n                    </div>\n\n                    <span class="input-group-addon" style="opacity:0.7;" ng-class="!!selectedBureauForDelegation.id ? \'label-success\' : \'label-warning\'">\n                        {{!!selectedBureauForDelegation.id ? (\'Admin.Dossiers.Find_Desk_Sel\' | translate) : (\'Admin.Dossiers.Find_Desk_None\' | translate)}}\n                    </span>\n                </div>\n            </div>\n            <div class="form-group" >\n                <label class="control-label" for="delegationFrom">{{\'delegation.Start_date\' | translate}}</label>\n                    <div class="input-group col-md-6">\n                        <input type="text" id="delegationFrom" ng-change="checkDelegation()" min-date="0" from="true" name="delegationFrom" linked="#delegationTo" return-format="timestamp" ng-model="selectedDelegation[\'date-debut-delegation\']" class="form-control unvalidate" ip-datepicker ng-required="delegationActivated" readonly=\'true\'/>\n                        <span ng-if="!!selectedDelegation[\'date-debut-delegation\']" ng-click="selectedDelegation[\'date-debut-delegation\'] = undefined"\n                              class="pointer input-group-addon">\n                            <i class="fa fa-times"></i>\n                        </span>\n                        <label for="delegationFrom" ng-if="!selectedDelegation[\'date-debut-delegation\']" class="input-group-addon">\n                            <i class="fa fa-calendar"></i>\n                        </label>\n                    </div>\n                    <div class="input-help">\n                        <h4 ng-show="delegation.delegationFrom.$error.required">{{\'delegation.At_least_one_date_is_required\' | translate}}</h4>\n                    </div>\n            </div>\n            <div class="form-group" >\n                <label class="control-label" for="delegationTo">{{\'delegation.End_date\' | translate}}</label>\n                <div class="controls">\n                    <div class="input-group validation-control">\n                        <input type="text" id="delegationTo" ng-change="checkDelegation()" min-date="0" name="delegationTo" linked="#delegationFrom" return-format="timestamp" ng-model="selectedDelegation[\'date-fin-delegation\']" class="form-control unvalidate" ip-datepicker ng-required="!selectedDelegation[\'date-debut-delegation\'] && delegationActivated" readonly=\'true\'/>\n                        <span ng-if="!!selectedDelegation[\'date-fin-delegation\']" ng-click="selectedDelegation[\'date-fin-delegation\'] = undefined"\n                              class="pointer input-group-addon">\n                            <i class="fa fa-times"></i>\n                        </span>\n                        <label for="delegationTo" ng-if="!selectedDelegation[\'date-fin-delegation\']" class="input-group-addon">\n                            <i class="fa fa-calendar"></i>\n                        </label>\n                    </div>\n                    <div class="input-help">\n                        <h4 ng-show="delegation.delegationTo.$error.required">{{\'delegation.At_least_one_date_is_required\' | translate}}</h4>\n                    </div>\n                </div>\n            </div>\n            <div class="checkbox" ng-show="delegationActivated">\n                <label for="dossiersActuels">\n                    <input type="checkbox" class="unvalidate" id="dossiersActuels" ng-model="selectedDelegation[\'deleguer-presents\']">\n                    {{\'delegation.Current_folders\' | translate}}\n                </label>\n            </div>\n        </form>\n        <span class="text-danger" ng-if="selectedDelegation.willItLoop"><i class="fa fa-warning"></i> {{\'delegation.Warning_delegation_cycle\' | translate}}</span>\n        <span class="btn btn-info" ng-click="save()" ng-disabled="selectedDelegation.willItLoop || !delegation.$valid">\n            <i class="fa fa-floppy-o"></i>\n            {{\'Save\' | translate}}\n        </span>\n        <span class="text text-success" ng-if="saved">\n            <i class="fa fa-check"></i> {{\'delegation.Delegation_saved\' | translate}}\n        </span>\n    </div>\n\n</div>\n')}]),angular.module("templates/logout.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/logout.html","<div class=\"container\">\n    <h1>{{'logout.Logout' | translate}}</h1>\n    <div><p>{{'logout.You_are_disconnected_from_iParapheur' | translate}}</p><p>{{'logout.To_ensure_this_disconnection_you_need_to_close_your_browser' | translate}}</p></div>\n\n    <div class=\"btn btn-success\" ng-click=\"login()\">{{'logout.Reconnect' | translate}}</div>\n</div>")}]),angular.module("templates/nouveau.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/nouveau.html",'<div class="container-fluid">\n    <div class="row-fluid">\n        <div class="col-md-8">\n            <form name=\'nouveau\' novalidate>\n                <legend>{{\'app.nouveau.infos.title\' |i18n}}</legend>\n                <div class="col-md-6 spanright">\n                    <div class="form-group col-md-8 mandatory-group">\n                        <label for="titre">\n                            {{\'app.nouveau.infos.filename\' | i18n}}\n                        </label>\n                        <span class="fa fa-warning label label-danger"> {{\'Mandatory\' | translate}}</span>\n                        <input type="text" ng-focus="focusTitle()" ng-blur="blurTitle()" ng-model="dossier.title"\n                               id="titre" name="titre" class="form-control" required/>\n                    </div>\n\n                    <div class="form-group col-md-8">\n                        <label for="visibility">\n                            {{\'app.nouveau.infos.visibility.title\' | i18n}}\n                        </label>\n                        <select class="unvalidate form-control" id="visibility" ng-model="dossier.visibility"\n                                ng-options="visible.value as visible.text for visible in visibilityChoices">\n                            <option value="public">{{\'app.nouveau.infos.visibility.public\' | i18n}}</option>\n                            <option value="confidentiel">{{\'app.nouveau.infos.visibility.confidential\' | i18n}}</option>\n                            <option value="group">{{\'app.nouveau.infos.visibility.group\' | i18n}}</option>\n                        </select>\n                    </div>\n\n                    <!-- Config dossier & metadonnees -->\n\n                    <div class="form-group col-md-8">\n                        <label style="width: 100%;" class="control-label" for="date-limite">{{\'app.nouveau.infos.limitdate\' | i18n}}\n                            <div class="input-group">\n                                <input readonly="true" ip-datepicker return-format="timestamp" type="text" id="date-limite"\n                                       ng-model="dossier.dateLimite" class="form-control unvalidate">\n                                <span ng-if="!dossier.dateLimite" class="pointer input-group-addon">\n                                    <i class="fa fa-calendar"></i>\n                                </span>\n                                <span ng-if="!!dossier.dateLimite" ng-click="dossier.dateLimite = undefined" class="pointer input-group-addon">\n                                    <i class="fa fa-times"></i>\n                                </span>\n                            </div>\n                        </label>\n                    </div>\n\n                    <div ng-if="circuit.sigFormat == \'XAdES/enveloped\'" class="form-group col-md-8 mandatory-group">\n                        <label for="xpath"><i class="fa fa-question-circle" tooltip-trigger="mouseenter"\n                                              tooltip-placement="right"\n                                              tooltip="{{\'nouveau.Xpath_Help\' | translate}}"></i>\n                            {{\'app.nouveau.infos.xpathSig\' | i18n}}</label>\n                        <span class="fa fa-warning label label-danger"> {{\'Mandatory\' | translate}}</span>\n                        <input class="form-control" placeholder="." ng-model="dossier[\'xPathSignature\']" id="xpath"\n                               type="text" required>\n                    </div>\n                    <div ng-if="!circuit.isDigitalSignatureMandatory" class="form-group col-md-8">\n                        <div class="controls">\n                            <label class="control-label checkbox" for="signature-papier-ck">\n                                <input ng-model="dossier.isSignPapier" id="signature-papier-ck" type="checkbox"\n                                       class="unvalidate">\n                                <span>{{\'app.nouveau.infos.papersignature\' | i18n}}</span>\n                            </label>\n                        </div>\n                    </div>\n                    <div class="col-md-8">\n                        <br>\n                        <legend ng-show="metaInfos.length > 0" class="mini">{{\'app.nouveau.meta\' | i18n}}</legend>\n                        <div>\n                            <div ng-switch on="metaInfo.type" class="control-group"\n                                 ng-repeat="(metaName, metaInfo) in metaInfos">\n                                <div class="form-group"\n                                     ng-class="{true:\'mandatory-group\', false:\'\'}[metaInfo.mandatory === \'true\']"\n                                     ng-switch-when="DATE" ng-hide="metaInfo.values">\n                                    <label class="control-label" for="{{metaInfo.id}}">{{metaInfo.realName}}</label>\n                                    <span class="fa fa-warning label label-danger"\n                                          ng-show="{{metaInfo.mandatory === \'true\'}}"> {{\'Mandatory\' | translate}}</span>\n\n                                    <div class="input-group">\n                                        <input ng-change="metaChanged()" ng-cloak="" ip-id="metaInfo.id"\n                                               return-format="timestamp" readonly="true" ip-datepicker type="text"\n                                               ng-class="{true:\'\', false:\'unvalidate\'}[metaInfo.mandatory === \'true\']"\n                                               ng-model="dossier.metadatas[metaInfo.id].value" class="form-control"\n                                               ng-required="metaInfo.mandatory === \'true\' && !metaInfo.values">\n                                        <span ng-click="dossier.metadatas[metaInfo.id].value = \'\'"\n                                              class="pointer input-group-addon">X</span>\n                                    </div>\n                                </div>\n                                <div class="form-group"\n                                     ng-class="{true:\'mandatory-group\', false:\'\'}[metaInfo.mandatory === \'true\']"\n                                     ng-switch-when="STRING" ng-hide="metaInfo.values">\n                                    <label class="control-label" for="{{metaInfo.id}}">{{metaInfo.realName}}</label>\n                                    <span class="fa fa-warning label label-danger"\n                                          ng-show="{{metaInfo.mandatory === \'true\'}}"> {{\'Mandatory\' | translate}}</span>\n                                    <input ng-cloak type="text" ng-change="metaChanged()" id="{{metaInfo.id}}"\n                                           ng-model="dossier.metadatas[metaInfo.id].value"\n                                           ng-class="{true:\'\', false:\'unvalidate\'}[metaInfo.mandatory === \'true\']"\n                                           class="form-control"\n                                           ng-required="metaInfo.mandatory === \'true\'  && !metaInfo.values">\n                                </div>\n                                <div class="form-group"\n                                     ng-class="{true:\'mandatory-group\', false:\'\'}[metaInfo.mandatory === \'true\']"\n                                     ng-switch-when="URL" ng-hide="metaInfo.values">\n                                    <label class="control-label" for="{{metaInfo.id}}">{{metaInfo.realName}}</label>\n                                    <span class="fa fa-warning label label-danger"\n                                          ng-show="{{metaInfo.mandatory === \'true\'}}"> {{\'Mandatory\' | translate}}</span>\n                                    <input ng-cloak type="text" ng-change="metaChanged()" id="{{metaInfo.id}}"\n                                           ng-model="dossier.metadatas[metaInfo.id].value"\n                                           ng-class="{true:\'\', false:\'unvalidate\'}[metaInfo.mandatory === \'true\']"\n                                           class="form-control"\n                                           ng-required="metaInfo.mandatory === \'true\'  && !metaInfo.values">\n                                </div>\n                                <div class="form-group mandatory-group"\n                                     ng-switch-when="INTEGER" ng-hide="metaInfo.values">\n                                    <label class="control-label" for="{{metaInfo.id}}">{{metaInfo.realName}}</label>\n                                    <span class="fa fa-warning label label-danger"\n                                          ng-if="metaInfo.mandatory === \'true\'"> {{\'Mandatory\' | translate}}</span>\n                                    <span class="label label-info">\n                                                                <i class="fa-info-circle fa"></i>\n                                                                {{\'Admin.Typologie.Ty_Sub_Meta_Int\'\n                                                                | translate}}\n                                                            </span>\n                                    <input type="text" integer ng-change="metaChanged()" id="{{metaInfo.id}}"\n                                           ng-model="dossier.metadatas[metaInfo.id].value"\n                                           class="form-control"\n                                           ng-required="metaInfo.mandatory === \'true\'  && !metaInfo.values">\n                                </div>\n                                <div class="form-group mandatory-group"\n                                     ng-switch-when="DOUBLE" ng-hide="metaInfo.values">\n                                    <label class="control-label" for="{{metaInfo.id}}">{{metaInfo.realName}}</label>\n                                    <span ng-if="metaInfo.mandatory === \'true\'"\n                                          class="fa fa-warning label label-danger"> {{\'Mandatory\' | translate}}</span>\n                                    <span class="label label-info">\n                                                                <i class="fa-info-circle fa"></i>\n                                                                {{\'Admin.Typologie.Ty_Sub_Meta_Double\'\n                                                                | translate}}\n                                                            </span>\n                                    <input type="text" decimal ng-change="metaChanged()" id="{{metaInfo.id}}"\n                                           ng-model="dossier.metadatas[metaInfo.id].value"\n                                           class="form-control"\n                                           ng-required="metaInfo.mandatory === \'true\'  && !metaInfo.values">\n                                </div>\n                                <div class="form-group"\n                                     ng-class="{true:\'mandatory-group\', false:\'\'}[metaInfo.mandatory === \'true\']"\n                                     ng-switch-when="BOOLEAN">\n                                    <label class="control-label" for="{{metaInfo.id}}">{{metaInfo.realName}}</label>\n                                    <span class="fa fa-warning label label-danger"\n                                          ng-show="{{metaInfo.mandatory === \'true\'}}"> {{\'Mandatory\' | translate}}</span>\n                                    <select id="{{metaInfo.id}}" ng-change="metaChanged()"\n                                            ng-model="dossier.metadatas[metaInfo.id].value"\n                                            ng-class="{true:\'\', false:\'unvalidate\'}[metaInfo.mandatory === \'true\']"\n                                            class="form-control" ng-required="metaInfo.mandatory === \'true\'">\n                                        <option ng-hide="metaInfo.mandatory === \'true\'" value=""></option>\n                                        <option value="true">Oui</option>\n                                        <option value="false">Non</option>\n                                    </select>\n                                </div>\n                                <div class="form-group" ng-show="metaInfo.values">\n                                    <label class="control-label" for="{{metaInfo.id}}">{{metaInfo.realName}}</label>\n                                    <span class="fa fa-warning label label-danger float-right"\n                                          ng-show="{{metaInfo.mandatory === \'true\'}}"> {{\'Mandatory\' | translate}}</span>\n                                    <select id="{{metaInfo.id}}" ng-change="metaChanged()"\n                                            ng-change="valuesMetaUndefined(metaInfo.id)"\n                                            ng-model="dossier.metadatas[metaInfo.id].value"\n                                            ng-class="{true:\'\', false:\'unvalidate\'}[metaInfo.mandatory === \'true\']"\n                                            class="form-control"\n                                            ng-required="metaInfo.mandatory === \'true\'  && metaInfo.values">\n                                        <option ng-hide="metaInfo.mandatory === \'true\'" value=""></option>\n                                        <option ng-repeat="value in metaInfo.values" ng-value="value">{{value}}</option>\n                                    </select>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="col-md-6">\n                    <!-- selection & affichage circuit -->\n                    <div class="form-group col-md-8">\n                        <label for="select-type">{{\'app.nouveau.infos.type\' | i18n}}</label>\n                        <select class="form-control" id="select-type" ng-disabled="flags.disabled"\n                                ng-model="dossier.type" ng-change="dossier.sousType = \'\'"\n                                ng-options="value.id as value.id for value in typo | orderBy:\'id\'" required>\n                            <option value="">-- {{\'nouveau.Type_selection\' | translate}} --</option>\n                        </select>\n\n                        <div class="input-help">\n                            <h4>Requis</h4>\n                        </div>\n                    </div>\n                    <div class="form-group col-md-8">\n                        <label for="select-sous-type">{{\'app.nouveau.infos.subtype\' | i18n}}</label>\n                        <select class="form-control" id="select-sous-type" ng-disabled="flags.disabled"\n                                ng-model="dossier.sousType"\n                                ng-options="value for value in (typo | findWithId:dossier.type).sousTypes | orderBy:\'toString()\'"\n                                required>\n                            <option value="">-- {{\'nouveau.SubType_selection\' | translate}} --</option>\n                        </select>\n\n                        <div class="input-help">\n                            <h4>{{\'Mandatory\' | translate}}</h4>\n                        </div>\n                    </div>\n                    <div class="form-group col-md-8">\n                        <!-- Affichage circuit +  si script de séléction, reload proposé ? -->\n                        <legend ng-show="!empty(circuit)" class="mini">\n                            <i class="fa fa-road"></i>\n                            {{\'app.general.validation.course\' | i18n}}\n                        </legend>\n                        <div>\n                            <p class="label label-info label-block" ng-show="circuit.hasSelectionScript">\n                                {{\'nouveau.Circuit_selection_script_detected\' | translate}}\n                                {{\'nouveau.You_need_to_fill_form_before_reloading_circuit\' | translate}}\n                            </p>\n                            <span ng-disabled="!nouveau.$valid" style="display:block;" ng-click="upgrade()"\n                                  ng-show="circuit.hasSelectionScript && (metaHasChange || dossier.documents[0].id != null)"\n                                  class="btn btn-primary">{{\'nouveau.Display_circuit_preview\' | translate}}</span>\n                            <ol>\n                                <li ng-if="!circuit.hasSelectionScript" ng-repeat="etape in circuit.etapes">\n                                    <i class="fa-fw fa-lg" ng-class="getIconClass(etape.actionDemandee)" tooltip="{{getActionTooltip(etape.actionDemandee)}}"></i>\n                                    <span ng-if="etape.transition === \'VARIABLE\'" class="little-select">\n                                        <i class="fa fa-fw" tooltip-trigger="mouseenter"\n                                           tooltip="Sélectionner un acteur pour l\'étape variable"\n                                           ng-class="acteursVariables[$index] ? \'text-success fa-check-square-o\' : \'fa-question\'"></i>\n                                        <select required class="unvalidate"\n                                                ng-options="acteur.id as acteur.name for acteur in currentBureau.associes"\n                                                ng-model="acteursVariables[$index]">\n                                            <option value=""></option>\n                                        </select>\n                                    </span>\n                                    <span ng-if="isPreviousVariable($index)">\n                                        <i class="fa fa-info-circle fa-fw text-info"\n                                           tooltip="Circuit à étape variable, la cible \'Chef de...\' sera affichée après la création de dossier"></i> Chef de...\n                                    </span>\n                                    <span ng-if="etape.transition !== \'VARIABLE\' && !isPreviousVariable($index)">\n                                        {{etape.parapheurName}}\n                                    </span>\n                                </li>\n                                <li ng-if="circuit.hasSelectionScript" ng-repeat="etape in dossier.circuit.etapes">\n                                    <i class="fa-fw fa-lg" ng-class="getIconClass(etape.actionDemandee)" tooltip="{{getActionTooltip(etape.actionDemandee)}}"></i>\n                                    {{etape.parapheurName}}\n                                </li>\n                                <li ng-if="circuit.hasSelectionScript && !dossier.circuit && circuit.etapes"\n                                    ng-repeat="etape in circuit.etapes">\n                                    <i class="fa-fw fa-lg" ng-class="getIconClass(etape.actionDemandee)" tooltip="{{getActionTooltip(etape.actionDemandee)}}"></i>\n                                    {{etape.parapheurName}}\n                                </li>\n                            </ol>\n                        </div>\n                    </div>\n                </div>\n            </form>\n        </div>\n        <div dropzone class="fade mainDocDrop dropzone"\n             ng-class="(circuit.isMultiDocument && (!isMainDocumentListFull())) ? \'mainDocDrop\' : \'allDropZone\'">\n            <div class="indropzone">\n                <span ng-if="circuit.isMultiDocument">\n                    {{\'nouveau.Drop_main_documents_here\' | translate}}\n                </span>\n                <span ng-if="!circuit.isMultiDocument">\n                    {{\'nouveau.Drop_documents_here\' | translate}}\n                </span>\n            </div>\n        </div>\n        <div ng-if="circuit.isMultiDocument" dropzone class="fade annDocDrop dropzone"\n             ng-class="(circuit.isMultiDocument && (isMainDocumentListFull())) ? \'allDropZone\' : \'\'">\n            <div class="indropzone">\n                <span>{{\'nouveau.Drop_annexes_here\' | translate}}</span>\n            </div>\n        </div>\n\n        <div class="col-md-4 filesHandler">\n            <legend>{{\'app.nouveau.mainfile\' | i18n}}</legend>\n            <span ng-if="docsExists" class="text-info"><i class="fa fa-info-circle"></i> {{\'nouveau.There_is_an_uploaded_document_already\' | translate}}</span>\n\n            <!-- Gestion documents & sauvegarde -->\n            <form fileupload="document|zip"\n                  main-document="isMainDocument()"\n                  signature-format="getSignatureFormat()"\n                  protocol="getProtocol()"\n                  wrong-type="wrongType(ext, isValid, isAuthorized)"\n                  check-if-exist="checkIfExist(name)"\n                  exist-file="existFile(name)"\n                  fileinput="#docinput"\n                  dropzone=".mainDocDrop"\n                  file-added="addDocument(files, circuit.isMultiDocument || dossier.documents[0].id == null)"\n                  upload-success="documentAdded(data, index)"\n                  upload-finish="uploadFinished(data, index)"\n                  upload-error="uploadError(data, index)"\n                  action="{{addDocumentUrl}}"\n                  method="POST"\n                  enctype="multipart/form-data">\n                <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->\n                <div class="fileupload-buttonbar">\n                    <div tooltip="{{!circuit.isMultiDocument && dossier.documents.length > 0 ? \'Vous ne pouvez ajouter qu\\\'un seul document principal sur cette typologie\' : \'\'}}" class="fileinput-button">\n                    <!-- The fileinput-button span is used to style the file input field as button -->\n                        <span style="margin-right:10px; z-index:100;" class="btn btn-success fileinput-button force-display"\n                              ng-disabled="(circuit.isMultiDocument && isMainDocumentListFull()) || (!circuit.isMultiDocument && dossier.documents.length > 0)">\n                            <i class="icon-plus icon-white"></i>\n                            <span><i class="fa fa-plus-circle"></i> {{\'nouveau.Adding_a_main_document\' | translate}}</span>\n                            <input ui-multiple="dossier.documents.length > 0" id="docinput" type="file" name="file">\n                        </span>\n                    </div>\n                    <input type="hidden" name="reloadMainDocument" value="false">\n                    <input type="hidden" name="isMainDocument" ng-value="isMainDocument()">\n                    <input type="hidden" name="browser" value="notIe">\n                    <input type="hidden" name="dossier" value="{{dossier.id}}">\n                </div>\n            </form>\n            <!-- Ajout de pièce annexe dans le cas du multi-document -->\n            <form fileupload="document|zip"\n                  main-document="false"\n                  signature-format="getSignatureFormat()"\n                  protocol="getProtocol()"\n                  dropzone=".annDocDrop"\n                  wrong-type="wrongType(ext, isValid, isAuthorized)"\n                  check-if-exist="checkIfExist(name)"\n                  exist-file="existFile(name)"\n                  fileinput="#docinputAnnexe"\n                  file-added="addDocument(files, false)"\n                  upload-success="documentAdded(data, index)"\n                  upload-finish="uploadFinished(data, index)"\n                  upload-error="uploadError(data, index)"\n                  action="{{addDocumentUrl}}"\n                  method="POST"\n                  enctype="multipart/form-data">\n                <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->\n                <div class="fileupload-buttonbar" >\n                    <!-- The fileinput-button span is used to style the file input field as button -->\n                    <div tooltip="{{!circuit.isMultiDocument && dossier.documents.length < 1 ? \'Merci d\\\'ajouter un document principal avant d\\\'ajouter une annexe\' : \'\'}}" class="fileinput-button">\n                        <span class="btn btn-info fileinput-button force-display"\n                              ng-disabled="!circuit.isMultiDocument && dossier.documents.length < 1">\n                            <i class="icon-plus icon-white"></i>\n                            <span><i class="fa fa-plus"></i> {{\'nouveau.Adding_an_annex\' | translate}}</span>\n                            <input ui-multiple="dossier.documents.length > 0" id="docinputAnnexe" type="file" name="file">\n                        </span>\n                    </div>\n\n                    <input type="hidden" name="reloadMainDocument" value="false">\n                    <input type="hidden" name="isMainDocument" value="false">\n                    <input type="hidden" name="browser" value="notIe">\n                    <input type="hidden" name="dossier" value="{{dossier.id}}">\n                </div>\n            </form>\n            <form ng-if="dossier.documents.length > 0 && extension(dossier.documents[0].name).toLowerCase() === \'xml\'"\n                  fileupload="pdf"\n                  signature-format="getSignatureFormat()"\n                  protocol="getProtocol()"\n                  wrong-type="wrongPDF(ext)"\n                  fileinput="#visuinput"\n                  file-added="updateVisu(files)"\n                  upload-success="updateVisuEnd(data, index)"\n                  action="{{addVisuelUrl}}"\n                  method="POST"\n                  enctype="multipart/form-data">\n                <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->\n                <div class="fileupload-buttonbar">\n                    <!-- The fileinput-button span is used to style the file input field as button -->\n                    <span class="btn btn-warning fileinput-button force-display">\n                        <i class="fa fa-eye"></i>\n                        <span ng-if="dossier.documents[0].visuelPdf">{{\'nouveau.Updating_visual\' | translate}}</span>\n                        <span ng-if="!dossier.documents[0].visuelPdf">{{\'nouveau.Adding_visual\' | translate}}</span>\n                        <input ui-multiple="dossier.documents.length > 0" id="visuinput" type="file" name="file">\n                    </span>\n                    <input type="hidden" name="dossier" value="{{dossier.id}}">\n                    <input type="hidden" name="browser" value="notIe">\n                    <input type="hidden" name="document" value="{{dossier.documents[0].id}}">\n                </div>\n            </form>\n\n            <div class="marginDocument">\n                <legend class="mini">\n                    {{(\'nouveau.Main_document\' | translate)}} <span ng-if="circuit.isMultiDocument" class="text-info"><i\n                        class="fa fa-info-circle"></i> {{(\'nouveau.MultiDoc_typology_number_maximum\' | translate).replace("-number-", mainDocsMax)}}</span>\n                </legend>\n                <ul ui-sortable="getSortableOptions(\'.annexesDocList\')" class="mainDocList"\n                    ng-model="documentsPrincipaux">\n                    <li delete ng-repeat="document in documentsPrincipaux">\n                        <div>\n                            <form ng-if="document.canDelete && documentsPrincipaux.length === 1"\n                                  fileupload="document"\n                                  signature-format="getSignatureFormat()"\n                                  protocol="getProtocol()"\n                                  main-document="true"\n                                  wrong-type="wrongType(ext, isValid, isAuthorized)"\n                                  file-added="beginReplace(files)"\n                                  upload-success="endReplace(data, index)"\n                                  upload-finish="uploadFinished(data, index)"\n                                  upload-error="replaceError(data, index)"\n                                  fileinput="#replaceMain"\n                                  action="{{addDocumentUrl}}"\n                                  method="POST"\n                                  enctype="multipart/form-data">\n                                <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->\n                                <div class="fileupload-buttonbar">\n                                    <!-- The fileinput-button span is used to style the file input field as button -->\n                                    <i tooltip="Remplacer" class="fa fa-exchange fileinput-button force-display">\n                                        &nbsp;\n                                        <input id="replaceMain" type="file" name="file">\n                                    </i>\n                                    <input type="hidden" name="reloadMainDocument" value="true">\n                                    <input type="hidden" name="isMainDocument" value="true">\n                                    <input type="hidden" name="browser" value="notIe">\n                                    <input type="hidden" name="dossier" value="{{dossier.id}}">\n                                </div>\n                            </form>\n                            <span ng-if="document.isLocked">\n                                <i class="fa fa-info-circle text-info"\n                                   tooltip="{{\'nouveau.Transforming___\' | translate}}"></i>\n                            </span>\n                            <span><i ng-if="document.canDelete && documentsPrincipaux.length > 1"\n                                     ng-click="document.state = \'delete\'; removeDocument(document)"\n                                     class="fa fa-times"></i> {{document.name}}</span>\n                            <br>\n                            <span ng-if="document.visuelPdf"><a target="_blank"\n                                                                href="{{context}}/proxy/alfresco/api/node/content%3bph%3avisuel-pdf/workspace/SpacesStore/{{document.id}}/{{document.name}}-visuel.pdf"><i\n                                    class="fa fa-eye"></i> {{\'nouveau.Visual\' | translate}}</a></span>\n\n                            <span ng-if="document.isProtected" class="text-warning">\n                                <i class="fa fa-warning"></i>\n                                {{\'nouveau.Protected_PDF\' | translate}}\n                            </span>\n\n                            <div bn-slide-show="document.state === \'delete\'" class="progress progress-striped active">\n                                <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="45"\n                                     aria-valuemin="0" aria-valuemax="100" style="width: 100%">\n                                    <span>{{\'nouveau.Deleting___\' | translate}}</span>\n                                </div>\n                            </div>\n\n                            <div bn-slide-show="document.state === \'saving\'" class="progress progress-striped active">\n                                <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="45"\n                                     aria-valuemin="0" aria-valuemax="100" style="width: 100%">\n                                    <span>{{\'nouveau.Saving___\' | translate}}</span>\n                                </div>\n                            </div>\n\n                            <div bn-slide-show="document.state === \'replace\'" class="progress progress-striped active">\n                                <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="45"\n                                     aria-valuemin="0" aria-valuemax="100" style="width: 100%">\n                                    <span>{{\'nouveau.Replacing___\' | translate}}</span>\n                                </div>\n                            </div>\n\n                            <div bn-slide-show="document.state === \'visuel\'" class="progress progress-striped active">\n                                <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="45"\n                                     aria-valuemin="0" aria-valuemax="100" style="width: 100%">\n                                    <span>{{\'nouveau.Updating_visual___\' | translate}}</span>\n                                </div>\n                            </div>\n                        </div>\n                    </li>\n                </ul>\n\n                <legend class="mini">\n                    {{\'nouveau.Annex_es_\' | translate}}\n                </legend>\n                <ul ui-sortable="getSortableOptions(\'.mainDocList\')" class="annexesDocList" ng-model="documentsAnnexes">\n                    <li delete ng-repeat="document in documentsAnnexes">\n                        <div>\n                            <span ng-if="document.isLocked">\n                                <i class="fa fa-info-circle text-info"\n                                   tooltip="{{\'nouveau.Transforming___\' | translate}}"></i>\n                            </span>\n                            <span><i\n                                    ng-if="document.canDelete && (documentsAnnexes.length > 1 || documentsPrincipaux.length > 0)"\n                                    ng-click="document.state = \'delete\'; removeDocument(document)"\n                                    class="fa fa-trash" tooltip="Supprimer le document"></i> {{document.name}}</span><br>\n                            <span class="text text-info"\n                                  ng-if="documentsAnnexes.length == 1 && documentsPrincipaux.length == 0"><i\n                                    class="fa fa-info-circle"></i> En l\'absence de pièce principale, cette annexe sera transformée en pièce principale lors de la sauvegarde.</span>\n                            <br>\n\n                            <span ng-if="document.isProtected" class="text-warning">\n                                <i class="fa fa-warning"></i>\n                                {{\'nouveau.Protected_PDF\' | translate}}\n                            </span>\n\n                            <div bn-slide-show="document.state === \'delete\'" class="progress progress-striped active">\n                                <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="45"\n                                     aria-valuemin="0" aria-valuemax="100" style="width: 100%">\n                                    <span>{{\'nouveau.Deleting___\' | translate}}</span>\n                                </div>\n                            </div>\n\n                            <div bn-slide-show="document.state === \'saving\'" class="progress progress-striped active">\n                                <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="45"\n                                     aria-valuemin="0" aria-valuemax="100" style="width: 100%">\n                                    <span>{{\'nouveau.Saving___\' | translate}}</span>\n                                </div>\n                            </div>\n                        </div>\n                    </li>\n                </ul>\n\n            </div>\n\n            <div class="alert alert-danger" ng-if="existLog">\n                <span><i\n                        class="fa fa-warning"></i> {{\'nouveau.Error_on_file_transfert\' | translate}} : {{message}}</span>\n            </div>\n            <div class="alert alert-danger" ng-if="result">\n                {{result.data.reponse | i18n}}\n            </div>\n            <div ng-show="typeError" class="alert alert-danger">\n                {{\'nouveau.Error_The_file_type_isnt_handled_by_the_iParapheur\' | translate}}\n            </div>\n            <div ng-show="formatError" class="alert alert-danger">\n                {{\'nouveau.Error_The_file_type_does_not_match_the_selected_type\' | translate}}\n            </div>\n            <div ng-show="pdfError" class="alert alert-danger">\n                {{\'nouveau.Error_The_visual_has_to_be_a_PDF_file\' | translate}}\n            </div>\n            <div ng-show="requestError" class="alert alert-danger">\n                {{requestErrorMessage}}\n            </div>\n\n            <hr>\n\n            <span class="btn btn-warning" ng-click="cancel()">\n                <i class="fa fa-times-circle-o"></i>\n                {{\'Back\' | translate}}\n            </span>\n            <span ng-click="save()" class="btn btn-primary" ng-disabled="!(nouveau.$valid && loadingDocuments === 0 && !upgrading)">\n                <i class="fa fa-floppy-o"></i>\n                {{\'Save\' | translate}}\n            </span>\n\n            <span class="btn btn-success"\n                  ng-disabled="!nouveau.$valid || dossier.documents[0].id == null || loadingDocuments > 0 || upgrading"\n                  ng-click="currentBureau.isSecretaire ? saveAndSecretariat() : saveAndEmit()">\n                <i class="fa fa-floppy-o"></i>\n                {{\'nouveau.Save_and_send\' | translate}}\n            </span>\n\n            <hr>\n            <div bn-slide-show="upgrading" class="progress progress-striped active">\n                <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="45" aria-valuemin="0"\n                     aria-valuemax="100" style="width: 100%">\n                    <span>{{\'nouveau.Saving_properties\' | translate}}</span>\n                </div>\n            </div>\n\n            <div ng-if="circuit.hasSelectionScript ? dossier.circuit.etapes[0].actionDemandee === \'VISA\' && dossier.circuit.etapes[0].parapheurName === currentBureau.name : circuit.etapes[0].actionDemandee === \'VISA\' && circuit.etapes[0].parapheurName === currentBureau.name && circuit.etapes[0].transition !== \'VARIABLE\'"\n                 class="text text-info">\n                <i class="fa fa-info-circle"></i> {{\'nouveau.You_are_asked_for_a_visa_in_the_first_step\' | translate}}\n            </div>\n\n            <div ng-if="redirect" class="text text-success">\n                <i class="fa fa-check"></i> {{\'nouveau.Folder_saved_Redirect_to_preview\' | translate}}\n            </div>\n            <div ng-if="errorSavingProperties" class="text text-danger">\n                <i class="fa fa-times"></i> {{\'nouveau.An_error_occured_on_folder_save\' | translate}}\n            </div>\n        </div>\n    </div>\n</div>\n');
}]),angular.module("templates/options.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/options.html",'<div class="optionsPage">\n    <div class="col-md-3">\n        <h1 class="underscore">{{"Options.Prefs" | translate}}</h1>\n        <div class="bs-sidebar affix" role="complementary">\n            <ul class="nav bs-sidenav">\n                <li ng-class="properties[\'parapheur.ihm.options.password.show\'] === \'true\' ? \'active\' : \'\'" ng-show="properties[\'parapheur.ihm.options.password.show\'] === \'true\'">\n                    <a bs-tab href="#infos" data-toggle="tab"><i class="fa fa-lock"></i> {{"Options.PasswordTitle" | translate}}</a>\n                </li>\n                <li ng-class="properties[\'parapheur.ihm.options.password.show\'] !== \'true\' && properties[\'parapheur.ihm.options.theme.show\'] === \'true\' ? \'active\' : \'\'"\n                    ng-show="properties[\'parapheur.ihm.options.theme.show\'] === \'true\'">\n                    <a bs-tab href="#theme" data-toggle="tab"><i class="fa fa-text-width"></i> {{"Options.Theme" | translate}}</a>\n                </li>\n                <li ng-class="properties[\'parapheur.ihm.options.password.show\'] !== \'true\' && properties[\'parapheur.ihm.options.theme.show\'] !== \'true\' ? \'active\' : \'\'">\n                    <a bs-tab href="#personaliser" data-toggle="tab"><i class="fa fa-tachometer"></i> {{"Options.Dashboard" | translate}}</a>\n                </li>\n                <li>\n                    <a bs-tab href="#archives" data-toggle="tab"><i class="fa fa-inbox"></i> {{"Options.Archives" | translate}}</a>\n                </li>\n                <li>\n                    <a bs-tab href="#notifications" data-toggle="tab"><i class="fa fa-envelope-o"></i> {{"Options.Notifs" | translate}}</a>\n                </li>\n                <li ng-show="properties[\'parapheur.ihm.options.signature.show\'] === \'true\'">\n                    <a bs-tab href="#signature" data-toggle="tab"><i class="fa fa-picture-o"></i> {{"Options.Signature" | translate}}</a>\n                </li>\n                <li ng-show="properties[\'parapheur.ihm.options.langue.show\'] === \'true\'">\n                    <a bs-tab href="#lang" data-toggle="tab"><i class="fa fa-globe"></i> {{"Options.Language" | translate}}</a>\n                </li>\n                <li ng-show="bureaux.length > 1">\n                    <a bs-tab href="#order" data-toggle="tab"><i class="fa fa-list-ul"></i> {{"Options.BureauOrder" | translate}}</a>\n                </li>\n            </ul>\n        </div>\n    </div>\n\n    <div class="tab-content col-md-9">\n        <div ng-class="properties[\'parapheur.ihm.options.password.show\'] === \'true\' ? \'active\' : \'\'" class="tab-pane" id="infos">\n            <div class="include-animate" ng-include="\'templates/options/informations.html\'"></div>\n        </div>\n        <div ng-class="properties[\'parapheur.ihm.options.password.show\'] !== \'true\' && properties[\'parapheur.ihm.options.theme.show\'] === \'true\' ? \'active\' : \'\'"\n             class="tab-pane" id="theme">\n            <div class="include-animate" ng-include="\'templates/options/theme.html\'"></div>\n        </div>\n        <div ng-class="properties[\'parapheur.ihm.options.password.show\'] !== \'true\' && properties[\'parapheur.ihm.options.theme.show\'] !== \'true\' ? \'active\' : \'\'" class="tab-pane" id="personaliser">\n            <div class="include-animate" ng-include="\'templates/options/dashboard.html\'"></div>\n        </div>\n        <div class="tab-pane" id="archives">\n            <div class="include-animate" ng-include="\'templates/options/archives.html\'"></div>\n        </div>\n        <div class="tab-pane" id="notifications">\n            <div class="include-animate" ng-include="\'templates/options/notifications.html\'"></div>\n        </div>\n        <div class="tab-pane" id="signature">\n            <div class="include-animate" ng-include="\'templates/options/signature.html\'"></div>\n        </div>\n        <div class="tab-pane" id="lang">\n            <div class="include-animate" ng-include="\'templates/options/langue.html\'"></div>\n        </div>\n        <div class="tab-pane" id="order">\n            <div class="include-animate" ng-include="\'templates/options/orderBureaux.html\'"></div>\n        </div>\n    </div>\n</div>')}]),angular.module("templates/options/archives.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/options/archives.html",'<div>\n    <h2 class="underscore">{{\'Options.Arch_Title\' | translate}}</h2>\n    <form name=\'dashboard\' class="form-horizontal" ng-class="{launched: !archiveChanged}" novalidate>\n        <div class="form-group">\n            <label class="control-label col-md-4" for="pagesizeArchives">{{\'Options.Dash_Page\' | translate}} :</label>\n            <div class="controls col-md-6">\n                <input type="text" class="form-control" ng-change="archiveChanged=true" ng-model="prefs.pagesizeArchives" ng-value="prefs.pagesizeArchives" id="pagesizeArchives" min="5" max="100" name="pagesizeArchives" integer required>\n                <div class="input-help">\n                    <h4>{{\'Options.Dash_Page_Helper\' | translate}} 100</h4>\n                </div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label col-md-4">{{\'Options.Dash_Col_Order\' | translate}} :</label>\n            <div class="controls col-md-6">\n                <div class="col-md-6">\n                    <label>{{\'Options.Dash_Col_Show\' | translate}}</label>\n                    <ul class="enabledColumns countainer-fluid" ng-mousedown="archiveChanged=true" ui-sortable="{connectWith:\'.disabledColumns\', cancel:\'.ui-disabled\'}" ng-model="archiveColumns.enabled">\n                        <li title="{{item.i18n | translate}}" ng-repeat="item in archiveColumns.enabled" ng-class="{true:\'ui-disabled disabled\', false:\'\'}[item.disabled]" class="col-md-12 btn btn-default force-display">{{item.i18n | translate}}</li>\n                    </ul>\n                </div>\n                <div class="col-md-6">\n                    <label>{{\'Options.Dash_Col_Hide\' | translate}}</label>\n                    <ul class="disabledColumns countainer-fluid" ng-mousedown="archiveChanged=true" ui-sortable="{connectWith:\'.enabledColumns\'}" ng-model="archiveColumns.disabled">\n                        <li title="{{item.i18n | translate}}" ng-repeat="item in archiveColumns.disabled" class="col-md-12 btn btn-default force-display">{{item.i18n | translate}}</li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n        <div class="form-group">\n            <div class="alert alert-success col-md-4" ng-show="!archiveChanged && archiveSaved">{{\'Options.Dash_Success\' | translate}}</div>\n            <div class="col-md-4" ng-show="!(!archiveChanged && archiveSaved)"></div>\n            <div class="controls col-md-4">\n                <button type="submit" ng-init="archiveChanged = false; archiveSaved = false;" ng-click="saveArchivePrefs(); archiveChanged = false; archiveSaved = true;" class="btn btn-primary">\n                    <i class="fa fa-floppy-o"></i>\n                    {{\'Options.Dash_Save\' | translate}}\n                </button>\n                <button class="btn btn-primary" disabled>\n                    <i class="fa fa-floppy-o"></i>\n                    {{\'Options.Dash_Save\' | translate}}\n                </button>\n            </div>\n        </div>\n    </form>\n</div>')}]),angular.module("templates/options/dashboard.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/options/dashboard.html",'<div>\n    <h2 class="underscore">{{\'Options.Dash_Title\' | translate}}</h2>\n    <form name=\'dashboard\' class="form-horizontal" ng-class="{launched: !dashChanged}" novalidate>\n        <div class="form-group">\n            <div class="col-md-offset-4 col-md-6">\n                <div class="checkbox">\n                    <label for="delegation">{{\'Options.Dash_Deleg\' | translate}}\n                        <input type="checkbox" ng-change="dashChanged = true" id="delegation" ng-model="prefs.displayDelegation" name="delegation">\n                    </label>\n                </div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label col-md-4" for="pagesize">{{\'Options.Dash_Page\' | translate}} :</label>\n            <div class="controls col-md-6">\n                <input type="text" class="form-control" ng-change="dashChanged=true" ng-model="prefs.pagesize" ng-value="prefs.pagesize" id="pagesize" min="1" max="{{properties[\'parapheur.ihm.dashboard.lignes.max\'] < 0 ? 30 : properties[\'parapheur.ihm.dashboard.lignes.max\'] === 0 ? Number.MAX_VALUE : properties[\'parapheur.ihm.dashboard.lignes.max\']}}" name="pagesize" integer required>\n                <div class="input-help">\n                    <h4>{{\'Options.Dash_Page_Helper\' | translate}} {{properties[\'parapheur.ihm.dashboard.lignes.max\'] < 0 ? 30 : properties[\'parapheur.ihm.dashboard.lignes.max\'] === 0 ? Number.MAX_VALUE : properties[\'parapheur.ihm.dashboard.lignes.max\']}}</h4>\n                </div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label col-md-4" for="propSort">{{\'Options.Dash_Sort\' | translate}}</label>\n            <div class="controls col-md-6">\n                <select class="form-control" ng-change="dashChanged=true" ng-model="prefs.propSort" id="propSort" name="propSort" ng-options="col.key as (col.i18n | translate) for col in sort" required>\n                </select>\n            </div>\n        </div>\n        <div class="form-group">\n            <div class="col-md-offset-4 col-md-6">\n                <div class="checkbox">\n                    <label for="ascSort">{{\'Options.Dash_Asc\' | translate}}\n                        <input type="checkbox" ng-change="dashChanged = true" id="ascSort" ng-model="prefs.asc" name="ascSort">\n                    </label>\n                </div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label col-md-4" for="filterDefault">{{\'Options.Dash_Default_Filter\' | translate}}</label>\n            <div class="controls col-md-6">\n                <select class="form-control" ng-change="dashChanged=true" ng-model="prefs.filterDefault" id="filterDefault" name="propSort" ng-options="name as name for (name, filter) in prefs.savedFilters">\n                    <option value="">--- {{\'Options.Dash_Filter_None\' | translate}} ---</option>\n                </select>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label col-md-4">{{\'Options.Dash_Col_Order\' | translate}} :</label>\n            <div class="controls col-md-6">\n                <div class="col-md-6">\n                    <label>{{\'Options.Dash_Col_Show\' | translate}}</label>\n                    <ul class="enabledColumns container-fluid" ng-mousedown="dashChanged=true" ui-sortable="{connectWith:\'.disabledColumns\', cancel:\'.ui-disabled\'}" ng-model="columns.enabled">\n                        <li title="{{item.i18n | translate}}" ng-repeat="item in columns.enabled" ng-class="{true:\'ui-disabled disabled\', false:\'\'}[item.disabled]" class="col-md-12 btn btn-default force-display">\n                            {{item.i18n | translate}}\n                        </li>\n                    </ul>\n                </div>\n                <div class="col-md-6">\n                    <label>{{\'Options.Dash_Col_Hide\' | translate}}</label>\n                    <ul class="disabledColumns container-fluid" ng-mousedown="dashChanged=true" ui-sortable="{connectWith:\'.enabledColumns\'}" ng-model="columns.disabled">\n                        <li title="{{item.i18n | translate}}" ng-repeat="item in columns.disabled" class="col-md-12 btn btn-default force-display">{{item.i18n | translate}}</li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n        <div class="form-group" ng-if="false">\n            <label class="control-label col-md-4">Coloration</label>\n            <ul class="col-md-offset-4" ui-sortable ng-model="colorations" ng-mousedown="dashChanged=true">\n                <li ng-repeat="color in colorations"  class="colorations">\n                    <span style="background-color: {{color.backgroundColor}}; color:{{color.textColor}};">{{color.property.i18n | translate}}\n                        <span ng-repeat="test in color.test"> {{test.comparator}} {{test.value}}</span>\n                        <span class="fa fa-trash-o" ng-click="deleteColoration($index)"></span>\n                    </span>\n                </li>\n            </ul>\n            <div class="controls col-md-offset-4 col-md-6">\n                <div class="btn btn-success force-display" ng-mousedown="dashChanged=true" ng-click="addColoration()">Ajouter une coloration</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <div class="alert alert-success col-md-4" ng-show="!dashChanged && dashSaved">{{\'Options.Dash_Success\' | translate}}</div>\n            <div class="col-md-4" ng-show="!(!dashChanged && dashSaved)"></div>\n            <div class="controls col-md-4">\n                <button type="submit" ng-init="dashChanged = false; dashSaved = false;" ng-click="saveDashboardPrefs(); dashChanged = false; dashSaved = true;" class="btn btn-primary">\n                    <i class="fa fa-floppy-o"></i>\n                    {{\'Options.Dash_Save\' | translate}}</button>\n                <button class="btn btn-primary" disabled>\n                    <i class="fa fa-floppy-o"></i>\n                    {{\'Options.Dash_Save\' | translate}}</button>\n            </div>\n        </div>\n    </form>\n</div>')}]),angular.module("templates/options/informations.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/options/informations.html",'<div>\n    <h2 class="underscore">{{"Options.Pass_Title" | translate}}</h2>\n    <form role="form" name=\'password\' class="form-horizontal" ng-class="{launched: !respPass.error && !respPass.success && respPass.status.code != 401 && launched}" novalidate>\n        <div class="col-md-6">\n            <div class="form-group">\n                <label class="control-label col-md-4" for="password">{{\'Options.Pass_Current\' | translate}}</label>\n                <div class="col-md-6">\n                    <input type="password" id="password" class="form-control" name="password"\n                           placeholder="{{\'Options.Pass_Current\' | translate}}" ng-model="newpass.old" required>\n                    <div class="input-help">\n                        <h4>{{\'Options.Pass_Current_Alert\' | translate}}</h4>\n                    </div>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <label class="control-label col-md-4" for="newpass">{{\'Options.Pass_New\' | translate}}</label>\n                <div class=" col-md-6">\n                    <input check-strength="{{properties[\'parapheur.ihm.password.strength\']}}" type="password"\n                           id="newpass" class="form-control" name="newpass"\n                           placeholder="{{\'Options.Pass_New\' | translate}}" ng-model="newpass.newOne" required>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <label class="control-label col-md-4" for="confirmpass">{{\'Options.Pass_Confirm\' | translate}}</label>\n                <div class="col-md-6">\n                    <input type="password" class="form-control" confirm-with="newpass" id="confirmpass" name="confirm"\n                           placeholder="{{\'Options.Pass_Confirm\' | translate}}" ng-model="newpass.confirm" required>\n                    <div class="input-help">\n                        <h4>{{\'Options.Pass_Confirm_Alert\' | translate}}</h4>\n                    </div>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <div class="alert alert-success col-md-4" ng-show="respPass.success">{{\'Options.Pass_Success\' |\n                    translate}}\n                </div>\n                <div class="alert alert-error col-md-4" ng-show="respPass.error">{{\'Options.Pass_Error\' | translate}}\n                </div>\n                <div class="alert alert-warning col-md-4" ng-show="respPass.status.code == 401">{{\'Options.Pass_Invalid\'\n                    | translate}}\n                </div>\n                <div class="alert alert-info col-md-4"\n                     ng-hide="respPass.error || respPass.success || respPass.status.code == 401 || !launched">\n                    <throbber></throbber>\n                    <span>{{\'Options.Pass_Saving\' | translate}}</span>\n                </div>\n                <div class="col-md-4" ng-show="!launched"></div>\n                <div class="controls col-md-4">\n                    <button type="submit" ng-init="launched = false;" ng-click="changePassword(); launched = true;"\n                            class="btn btn-primary">\n                        <i class="fa fa-floppy-o"></i>\n                        {{\'Options.Pass_Save\' | translate}}\n                    </button>\n                    <button class="btn btn-primary" disabled>\n                        <i class="fa fa-floppy-o"></i>\n                        {{\'Options.Pass_Save\' | translate}}</button>\n                </div>\n\n            </div>\n        </div>\n\n        <div strength-result="{{properties[\'parapheur.ihm.password.strength\']}}" error="password.newpass.$error"\n             class="col-md-6" ng-if="password.newpass.$error._length != undefined"></div>\n\n    </form>\n\n</div>')}]),angular.module("templates/options/langue.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/options/langue.html",'<div>\n    <h2 class="underscore">{{\'Options.Lang_Title\' | translate}}</h2>\n    <form name=\'lang\' class="form-horizontal col-md-6" novalidate>\n        <div class="form-group col-md-12">\n            <label class="control-label" for="choosen">{{\'Options.Lang_Choice\' | translate}}</label>\n            <div class="controls">\n                <select class="form-control unvalidate" id="choosen" name="choosen" ng-model="prefs.language">\n                    <option value="fr">{{\'Options.Lang_FR\' | translate}}</option>\n                    <option value="en">{{\'Options.Lang_EN\' | translate}}</option>\n                </select>\n            </div>\n        </div>\n        <div class="form-group col-md-12">\n            <div class="controls">\n                <button type="submit" ng-click="saveLanguage()" class="btn btn-primary">\n                    <i class="fa fa-floppy-o"></i>\n                    {{\'Options.Lang_Change\' | translate}}</button>\n            </div>\n        </div>\n    </form>\n</div>')}]),angular.module("templates/options/notifications.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/options/notifications.html",'<div >\n    <div class="container-fluid">\n    <h2 class="underscore">{{\'Options.Notif_Title\' | translate}}</h2>\n    <form ng-class="{launched: !notifications.changed}">\n        <div class="row">\n            <div class="col-md-12">\n                <div class="form-group">\n                    <label class="block">\n                        {{\'Notif_Mail\' | translate}}\n                        <i class="fa fa-info-circle" tooltip="{{\'Notif_Helper\' | translate}}"></i>\n                        <input type="text" ng-change="notifications.cronDidChange()" class="form-control col-md-12" ng-model="notifications.mail" id="email" name="email" />\n                    </label>\n                </div>\n            </div>\n        </div>\n        <div class="row">\n            <div class="col-md-12">\n                <h3 class="small"><strong>{{\'Notif_Freq\' | translate}}</strong></h3>\n                <div class="form-group">\n                    <div class="col-md-12">\n                        <div class="radio">\n                            <label>\n                                <input class="unvalidate" ng-change="notifications.cronDidChange()" type="radio" name="notif-radio" id="radio-never" value="never" ng-model="notifications.mode" />\n                                {{\'Notif_None\' | translate}}\n                            </label>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <div class="col-md-12">\n                        <div class="radio">\n                            <label>\n                                <input class="unvalidate" ng-change="notifications.cronDidChange()" type="radio" name="notif-radio" id="radio-always" value="always" ng-model="notifications.mode" />\n                                {{\'Notif_Unit\' | translate}}\n                            </label>\n                        </div>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <div class="col-md-12">\n                        <div class="radio">\n                            <label>\n                                <input class="unvalidate" ng-change="notifications.cronDidChange()" type="radio" name="notif-abo-radio" value="hourly" ng-model="notifications.mode">\n                                {{\'Notif_Every\' | translate}}\n                            </label>\n                            <div style="width:auto; display:inline-block;">\n                                <select class="unvalidate form-control" ng-change="notifications.cronDidChange()" ng-model="notifications.cron.hourly">\n                                    <option value="1">1</option>\n                                    <option value="2">2</option>\n                                    <option value="3">3</option>\n                                    <option value="4">4</option>\n                                    <option value="6">6</option>\n                                    <option value="12">12</option>\n                                </select>\n                            </div>\n                            {{\'Notif_Hour\' | translate}}\n                        </div>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <div class="col-md-12">\n                        <div class="radio">\n                            <label>\n                                <input class="unvalidate" ng-change="notifications.cronDidChange()" type="radio" name="notif-abo-radio" value="daily" ng-model="notifications.mode">\n                                {{\'Notif_daily\' | translate}}\n                            </label>\n                            <div style="width:auto; display:inline-block;">\n                                <select class="unvalidate form-control" ng-change="notifications.cronDidChange()" ng-model="notifications.cron.daily">\n                                    <option value="0">0h</option>\n                                    <option value="1">1h</option>\n                                    <option value="2">2h</option>\n                                    <option value="3">3h</option>\n                                    <option value="4">4h</option>\n                                    <option value="5">5h</option>\n                                    <option value="6">6h</option>\n                                    <option value="7">7h</option>\n                                    <option value="8">8h</option>\n                                    <option value="9">9h</option>\n                                    <option value="10">10h</option>\n                                    <option value="11">11h</option>\n                                    <option value="12">12h</option>\n                                    <option value="13">13h</option>\n                                    <option value="14">14h</option>\n                                    <option value="15">15h</option>\n                                    <option value="16">16h</option>\n                                    <option value="17">17h</option>\n                                    <option value="18">18h</option>\n                                    <option value="19">19h</option>\n                                    <option value="20">20h</option>\n                                    <option value="21">21h</option>\n                                    <option value="22">22h</option>\n                                    <option value="23">23h</option>\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <div class="col-md-12">\n                        <div class="radio">\n                            <label>\n                                <input class="unvalidate" ng-change="notifications.cronDidChange()" type="radio" name="notif-abo-radio" value="weekly" ng-model="notifications.mode">\n                                {{\'Notif_weekly\' | translate}}\n                            </label>\n                            <div style="width:auto; display:inline-block;">\n                                <select class="unvalidate form-control" ng-change="notifications.cronDidChange()" ng-model="notifications.cron.weekly">\n                                    <option value="1">{{\'Mon\' | translate}}</option>\n                                    <option value="2">{{\'Tue\' | translate}}</option>\n                                    <option value="3">{{\'Wed\' | translate}}</option>\n                                    <option value="4">{{\'Thu\' | translate}}</option>\n                                    <option value="5">{{\'Fri\' | translate}}</option>\n                                    <option value="6">{{\'Sat\' | translate}}</option>\n                                    <option value="7">{{\'Sun\' | translate}}</option>\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <span ng-click="notifications.saveCronPrefs()" class="btn btn-primary">\n            <i class="fa fa-floppy-o"></i>\n            {{\'Options.Dash_Save\' | translate}}</span>\n        <button class="btn btn-primary" disabled>\n            <i class="fa fa-floppy-o"></i>\n            {{\'Options.Dash_Save\' | translate}}</button>\n        <span class="alert alert-success" ng-show="!notifications.changed && notifications.saved">{{\'Options.Dash_Success\' | translate}}</span>\n        <span class="alert alert-danger" ng-show="!notifications.changed && notifications.error">{{notifications.error}}</span>\n    </form>\n    </div>\n</div>')}]),angular.module("templates/options/orderBureaux.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/options/orderBureaux.html",'<div>\n    <h2 class="underscore">{{\'Options.Ord_Title\' | translate}}</h2>\n    <form name=\'orderBureaux\' class="form-horizontal" ng-class="{launched: !orderChanged}" novalidate>\n        <div class="form-group">\n            <div class="controls col-md-6">\n                <div class="col-md-12">\n                    <ul class="enabledColumns orderBureaux container-fluid" ng-mousedown="orderChanged=true" ui-sortable ng-model="orderedBureaux">\n                        <li ng-repeat="item in orderedBureaux" class="col-md-12 btn btn-default force-display">{{item.name}}</li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n        <div class="form-group">\n\n            <div class="controls col-md-4">\n                <button type="submit" ng-init="orderChanged = false; orderSaved = false;" ng-click="saveOrderPrefs(); orderChanged = false; orderSaved = true;" class="btn btn-primary">\n                    <i class="fa fa-floppy-o"></i>\n                    {{\'Options.Dash_Save\' | translate}}</button>\n                <button class="btn btn-primary" disabled>\n                    <i class="fa fa-floppy-o"></i>\n                    {{\'Options.Dash_Save\' | translate}}</button>\n            </div>\n            <div class="alert alert-success col-md-4" ng-show="!orderChanged && orderSaved">{{\'Options.Dash_Success\' | translate}}</div>\n        </div>\n    </form>\n</div>')}]),angular.module("templates/options/signature.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/options/signature.html",'<div>\n    <h2 class="underscore">{{\'Options.Sig_Title\' | translate}}</h2>\n    <span ng-show="isEmptyOrNull(signNode)" class="text-info"><i class="fa fa-info-circle"></i> {{\'Options.Sig_NoScan\' | translate}}</span>\n\n    <img ng-if="signNode" class="signatureImg" ng-cloak ng-src="{{context}}/proxy/alfresco/api/node/workspace/SpacesStore/{{signNode}}/content?timestamp={{timeimg || 0}}">\n\n    <form fileupload="image" wrong-type="wrongType(ext)" fileinput="#fileinput" upload-success="signatureSaved(data, index)" action="{{changeSignatureUrl}}" method="POST" enctype="multipart/form-data">\n        <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->\n        <div class="fileupload-buttonbar">\n            <!-- The fileinput-button span is used to style the file input field as button -->\n        <span class="btn btn-default fileinput-button">\n            <i class="fa fa-folder-open-o"></i>\n            <span>{{\'Browse\' | translate}}</span>\n            <input id="fileinput" type="file" name="file">\n        </span>\n            <input type="hidden" name="username" value="{{config.username}}">\n        </div>\n        <div ng-show="typeError" class="alert alert-error">{{\'Options.Sig_Err1\' | translate}}<br>{{\'Options.Sig_Err2\' | translate}}</div>\n    </form>\n</div>\n')}]),angular.module("templates/options/theme.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/options/theme.html",'<div>\n    <h2 class="underscore">{{\'Options.Theme_Title\' | translate}}</h2>\n    <form name=\'theme\' class="form-horizontal col-md-6" novalidate>\n        <div class="alert" ng-class="{\'alert-success\':themeChanged, \'alert-info\':!themeChanged}">\n            {{\'Options.Theme_Actual\' | translate}} : {{prefs.theme}}\n        </div>\n        <div class="form-group col-md-12">\n            <label class="control-label" for="choosen">{{\'Options.Theme_Choice\' | translate}}</label>\n            <div class="controls">\n                <select diff-current="prefs" attr="theme" class="form-control" id="choosen" name="choosen" ng-model="choosen" required>\n                    <option ng-repeat="theme in themes" ng-value="{{theme}}">{{theme}}</option>\n                </select>\n            </div>\n        </div>\n        <div class="form-group col-md-12">\n            <div class="controls">\n                <button type="submit" ng-click="changeTheme(choosen); themeChanged = true" class="btn btn-primary">\n                    <i class="fa fa-floppy-o"></i>\n                    {{\'Options.Theme_Save\' | translate}}</button>\n                <button class="btn btn-primary" disabled>\n                    <i class="fa fa-floppy-o"></i>\n                    {{\'Options.Theme_Save\' | translate}}</button>\n            </div>\n        </div>\n    </form>\n</div>');
}]),angular.module("templates/policy.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/policy.html","<div class=\"container about\">\n    <div class=\"page-header\">\n        <h1>{{'Policy' | translate}}</h1>\n    </div>\n\n    <h2>\n        Informations relatives au règlement européen sur la protection des données personnelles (RGPD)\n    </h2>\n\n    <p>\n        La création de votre compte utilisateur sur i-Parapheur demande la saisie de données personnelles vous\n        concernant. Vous trouverez ci-dessous le détail des informations collectées ainsi que les traitements effectués.\n        Ces données sont collectées uniquement dans le cadre de votre activité professionnelle et pour l'utilisation\n        exclusive de l'application i-Parapheur.\n\n        <br><br>\n\n        Le fonctionnement dans les conditions nominales et recommandées de l'application, ne permet pas de partager ou\n        de diffuser à un tiers vos informations personnelles. Vous pouvez demander à tout moment à l'administrateur de\n        la plateforme de vous communiquer l'ensemble des informations collectées pour la création de votre compte.\n    </p>\n\n    <h2>\n        Collecte\n    </h2>\n\n    <p>\n        Lors de la création de votre compte utilisateur, les informations suivantes sont collectées :\n    </p>\n\n    <ul>\n        <li>Nom d'utilisateur</li>\n        <li>Adresse de messagerie professionnelle</li>\n        <li>Identifiant de connexion</li>\n    </ul>\n\n    <h2>\n        Traitements\n    </h2>\n\n\n    <p>\n        Vos informations personnelles sont utilisées pour le bon fonctionnement de i-Parapheur dans les cas listés\n        ci-après :\n    </p>\n    <p>\n        Affichage de vos données personnelles :\n    </p>\n    <ul>\n        <li>liste des utilisateurs : votre identifiant de connexion, votre nom et votre courriel apparaissent dans la liste</li>\n        <li>journal d'événement de dossier : votre nom apparaît pour chaque action (visa, signature, rejet, annotation publique) de votre part sur un dossier.</li>\n    </ul>\n\n    <h2>\n        Droit à l'oubli\n    </h2>\n\n    <p>\n        Sur votre demande ou à la demande de l’administrateur de i-Parapheur, votre compte utilisateur peut être supprimé\n        définitivement.\n        <br>\n        La suppression de votre compte laissera les traces de votre activité sur les documents circulant dans i-Parapheur, le temps de leur présence. Ces traces disparaîtront avec l'extraction de ces documents hors de i-Parapheur.\n    </p>\n\n\n</div>")}]),angular.module("templates/stats.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/stats.html",'<div class="row-fluid">\n    <div class="col-md-4">\n        <!-- contenu -->\n        <div class="col-md-11 col-md-offset-1">\n            <form name="statistiques" novalidate="novalidate">\n\n                <div class="row">\n                    <h2 class="col-md-6">{{\'stats.my_stats\' | translate}}</h2>\n                </div>\n\n\n                <h3>{{\'Admin.Stats.Period\' | translate}}</h3>\n\n                <div class="row">\n                    <div class="col-md-6">\n                        <div class="form-group">\n                            <label for="debut">{{\'Admin.Stats.Begin\' | translate}}\n\n                            </label>\n                            <span class="float-right label label-danger"><i class="fa fa-warning"></i> {{\'Mandatory\' | translate}}</span>\n\n                            <div class="input-group col-md-12" style="padding: 0;">\n                                <input id="debut" name="debut" placeholder="{{\'Admin.Stats.Begin\' | translate}}"\n                                       ng-cloak="" from="true" linked="#fin" ip-id="debut" return-format="@"\n                                       readonly="true" ip-datepicker type="text" ng-model="opt.fromTime"\n                                       class="form-control unvalidate" required>\n                                <span ng-if="!!opt.fromTime" ng-click="opt.fromTime = undefined"\n                                      class="pointer input-group-addon">\n                                    <i class="fa fa-times"></i>\n                                </span>\n                                <label for="debut" ng-if="!opt.fromTime" class="input-group-addon">\n                                    <i class="fa fa-calendar"></i>\n                                </label>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="col-md-6">\n                        <div class="form-group">\n                            <label for="fin">{{\'Admin.Stats.End\' | translate}}\n\n\n                            </label>\n                            <span class="float-right label label-danger"><i class="fa fa-warning"></i> {{\'Mandatory\' | translate}}</span>\n\n                            <div class="input-group col-md-12" style="padding: 0;">\n                                <input id="fin" name="fin" placeholder="{{\'Admin.Stats.End\' | translate}}" ng-cloak=""\n                                       linked="#debut" ip-id="fin" return-format="@" readonly="true" ip-datepicker\n                                       type="text" ng-model="opt.toTime" class="form-control unvalidate" required>\n                                <span ng-if="!!opt.toTime" ng-click="opt.toTime = undefined"\n                                      class="pointer input-group-addon">\n                                        <i class="fa fa-times"></i>\n                                    </span>\n                                <label for="fin" ng-if="!opt.toTime" class="input-group-addon">\n                                        <i class="fa fa-calendar"></i>\n                                    </label>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <label for="cumul">{{\'Admin.Stats.Cumulation\' | translate}}</label>\n                    <select class="form-control unvalidate" id="cumul" name="cumul" ng-model="cumul">\n                        <option value="1">{{\'Admin.Stats.Day\' | translate}}</option>\n                        <option value="2">{{\'Admin.Stats.Week\' | translate}}</option>\n                        <option value="3">{{\'Admin.Stats.Month\' | translate}}</option>\n                        <option value="4">{{\'Admin.Stats.Year\' | translate}}</option>\n                    </select>\n                </div>\n\n                <div class="row">\n                    <div class="col-md-6">\n                        <h3>{{\'Admin.Stats.Filter_Types\' | translate}}</h3>\n\n                        <div class="col-md-12">\n                            <div class="form-group">\n                                <label for="type">{{\'Admin.Stats.Types\' | translate}}</label>\n                                <select id="type" ng-model="opt.options.type" name="type"\n                                        class="form-control unvalidate"\n                                        ng-options="type.id as type.id for type in types">\n                                    <option value="">{{\'None\' | translate}}</option>\n                                </select>\n                            </div>\n                        </div>\n                        <div class="col-md-12">\n                            <div class="form-group">\n                                <label for="subType">{{\'Admin.Stats.Sub\' | translate}}</label>\n                                <select id="subType" ng-model="opt.options.sousType" name="subType"\n                                        class="form-control unvalidate"\n                                        ng-options="sousType for sousType in (types | findWithId:opt.options.type).sousTypes">\n                                    <option value="">{{\'None\' | translate}}</option>\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="col-md-6">\n                        <h3>{{\'Admin.Stats.Filter_Desks\' | translate}}</h3>\n\n                        <div>\n                            <div class="input-group">\n                                <span class="input-group-addon"><i class="fa fa-search fa-fw"></i></span>\n                                <input placeholder="{{\'Search\' | translate}}" ng-model="searchBureau"\n                                       ng-change="listHandler.search(searchBureau)" class="form-control unvalidate"\n                                       type="text">\n                            </div>\n\n                            <div style="height:15px;" ng-if="listHandler.maxSize < listHandler.total">\n                                        <span class="text-warning float-right">\n                                            {{listHandler.page*listHandler.maxSize +1}}-{{(listHandler.page+1)*listHandler.maxSize < listHandler.total ? (listHandler.page+1)*listHandler.maxSize : listHandler.total}} {{\'On\' | translate}} {{listHandler.total}}\n                                            <span class="btn btn-default fa fa-chevron-left force-display"\n                                                  ng-disabled="listHandler.page === 0"\n                                                  ng-click="listHandler.pagine(-1)"></span>\n                                            <span class="btn btn-default fa fa-chevron-right force-display"\n                                                  ng-disabled="listHandler.page+1 >= (listHandler.total/listHandler.maxSize)"\n                                                  ng-click="listHandler.pagine(1)"></span>\n                                        </span>\n                            </div>\n                        </div>\n\n                        <span class="text-info" ng-if="listHandler.searchResultSubList.length === 0"><i\n                                class="fa fa-info-circle"></i> {{\'Admin.Stats.No_Result\' | translate}}</span>\n\n                        <ul class="list-unstyled nav nav-pills nav-stacked adminContent list-data">\n                            <li ng-repeat="bureau in listHandler.searchResultSubList">\n                                <a ng-click="listHandler.selectElement(bureau)">\n                                    <i ng-if="bureau.id === listHandler.selectedBureau.id"\n                                       class="fa fa-check text-success"></i> {{bureau.name}}\n                                </a>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n                <span class="btn btn-success force-display" ng-disabled="!statistiques.$valid"\n                      ng-click="updateChartData()">\n                            <i class="fa fa-eye"></i>\n                            {{\'stats.visual\' | translate}}</span>\n            </form>\n        </div>\n    </div>\n    <div class="col-md-8" ng-if="gettingStats || datalength > 0">\n        <div>\n            <h2 style="display:inline-block">{{\'Admin.Stats.Result\' | translate}} - {{\'Admin.Circuits.Wo_Desk\' |\n                translate }} {{currentBureauName}}</h2>\n        </div>\n\n        <div style="top:100px;" class="nextDossierInfo" ng-if="gettingStats">\n                    <span class="text text-info">\n                        {{\'Admin.Stats.Getting_Info\' | translate}}\n                    </span>\n            <span style="position: relative; width: 0px; z-index: 2000000000; right: 120px; top: 100px;"\n                  us-spinner="{radius:20, width:8, length: 16}"></span>\n        </div>\n        <div ng-if="datalength > 0" chart id="chartstat" dataset="data" cumul="savedCumul" datalength="datalength"/>\n    </div>\n</div>')}]),angular.module("templates/topbar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/topbar.html",'<!--\n\n        This file is part of IPARAPHEUR-WEB.\n\n        Copyright (c) 2012, ADULLACT-Projet\n        Initiated by ADULLACT-Projet S.A.\n        Developped by ADULLACT-Projet S.A.\n\n        contact@adullact-projet.coop\n\n        IPARAPHEUR-WEB is free software: you can redistribute it and/or modify\n        it under the terms of the GNU Affero General Public License as published by\n        the Free Software Foundation, either version 3 of the License, or\n        (at your option) any later version.\n\n        IPARAPHEUR-WEB is distributed in the hope that it will be useful,\n        but WITHOUT ANY WARRANTY; without even the implied warranty of\n        MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n        GNU Affero General Public License for more details.\n\n        You should have received a copy of the GNU Affero General Public License\n        along with IPARAPHEUR-WEB.  If not, see <http://www.gnu.org/licenses/>.\n\n-->\n\n<div ng-controller="NavbarController" class="navbar navbar-default navbar-fixed-top" role="navigation">\n    <div class="navbar-header">\n        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-exl-collapse">\n            <span class="sr-only">Toggle navigation</span>\n            <span class="icon-bar"></span>\n            <span class="icon-bar"></span>\n            <span class="icon-bar"></span>\n        </button>\n\n        <!--Logged in-->\n        <a ng-if="isLoggedIn" href="#/" class="brand" ng-show="!showBrand">\n            <img class="brand logo" imageonload="logoLoaded()"\n                 ng-src="{{\'/themes/\' + (config.tenant ? config.tenant + \'/\' : \'\') + \'logo.png\'}}">\n        </a>\n        <a ng-if="showBrand && isLoggedIn" class="navbar-brand" href="#/">i-Parapheur</a>\n\n        <!--Logged out-->\n        <span ng-if="!isLoggedIn" class="brand" ng-show="!showBrand">\n            <img class="brand logo" imageonload="logoLoaded()"\n                 ng-src="{{\'/themes/\' + (config.tenant ? config.tenant + \'/\' : \'\') + \'logo.png\'}}">\n        </span>\n        <span ng-if="showBrand && !isLoggedIn" class="navbar-brand">i-Parapheur</span>\n\n    </div>\n    <div ng-if="isLoggedIn" class="collapse navbar-collapse navbar-exl-collapse">\n        <ul class="nav navbar-nav">\n            <li ng-class="{active:pagename()==\'/bureaux\' || pagename()==\'/\' || pagename()==\'\'}" class="desk icon">\n                <a href="#/bureaux" tooltip="{{\'ChoixBureau\' | translate}}" tooltip-placement="bottom">\n                    <i class="fa fa-home fa-lg"></i>\n                </a>\n            </li>\n            <li bureau is-thumbnail="false" b="currentBureau" ng-show="!empty(currentBureau)" id="currentBureauLi"\n                ng-class="{active:pagename()==\'/dashboard\'}">\n            </li>\n            <li ng-show="pagename().substring(0,10) == \'/dashboard\' || pagename()==\'/archives\'">\n                <button ng-disabled="flags.backdrop" ng-click="showFiltersWindow()" ip-slide="#dashboard-filters"\n                        class="btn btn-info show-hide-filters navbar-btn" type="button" id="show-hide-filters">\n                    <i class="fa fa-filter"></i>\n                    {{"Filters" | translate}}\n                </button>\n            </li>\n        </ul>\n        <form role="search" id="navBarSearch" class="navbar-form navbar-right">\n            <div class="form-group">\n                <div class="input-group">\n                    <span class="input-group-addon"><i class="fa fa-search fa-fw"></i></span>\n                    <input ng-disabled="flags.backdrop" type="text" size="22" class="form-control unvalidate"\n                           placeholder="{{pagename() === \'/archives\' ? (\'Search_Archive\' | translate) : (\'Search_Dossier\' | translate)}}"\n                           ng-model="asyncSelected.title"\n                           typeahead="dossier as dossier.title for dossier in getDossiersNavbar($viewValue)"\n                           typeahead-loading="loadingLocations" typeahead-on-select="selectAsyncDossier($model)">\n                </div>\n\n            </div>\n        </form>\n        <ul class="nav navbar-nav navbar-right">\n            <li class="dropdown auto"\n                ng-class="{active:pagename()==\'/options\' || pagename().indexOf(\'/admin\') !== -1 || pagename()==\'/delegation\' || pagename()==\'/about\'}">\n                <a class="dropdown-toggle">{{config.fullname}}<b class="caret"></b></a>\n                <ul class="dropdown-menu user">\n                    <li ng-class="{active:pagename()==\'/options\'}">\n                        <a href="#/options">\n                            <i class="fa fa-fw fa-cogs"></i>\n                            {{"Prefs" | translate}}\n                        </a>\n                    </li>\n                    <li ng-class="{active:pagename()==\'/stats\'}">\n                        <a href="#/stats">\n                            <i class="fa fa-fw fa-bar-chart-o"></i>\n                            {{"Stats" | translate}}\n                        </a>\n                    </li>\n                    <li ng-show="config.isAdmin || config.isAdminCircuits() || config.isAdminFonctionnel()"\n                        ng-class="{active:pagename().indexOf(\'/admin\') !== -1}">\n                        <a href="#/admin">\n                            <i class="fa fa-fw fa-wrench"></i>\n                            {{"Admin_Title" | translate}}\n                        </a>\n                    </li>\n                    <li ng-show="!empty(currentBureau)" id="topbarDelegation"\n                        ng-class="{active:pagename()==\'/delegation\'}">\n                        <a href="#/delegation">\n                            <i class="fa fa-fw fa-share"></i>\n                            {{"Deleg" | translate}}\n                        </a>\n                    </li>\n                    <li class="divider"></li>\n                    <li ng-class="{active:pagename()==\'/policy\'}">\n                        <a href="#/policy">\n                            <i class="fa fa-user-secret fa-fw"></i>\n                            {{"Policy" | translate}}\n                        </a>\n                    </li>\n                    <li ng-class="{active:pagename()==\'/about\'}">\n                        <a href="#/about">\n                            <i class="fa fa-question fa-fw"></i>\n                            {{"About.About" | translate}}\n                        </a>\n                    </li>\n                    <li class="divider"></li>\n                    <li>\n                        <a ng-if="config.connexionType === \'default\'" id="logout" ng-click="logout()"\n                           href="{{context + \'/dologout\'}}">\n                            <i class="fa fa-sign-out fa-fw"></i>\n                            {{"Logout" | translate}}\n                        </a>\n                    </li>\n                </ul>\n            </li>\n        </ul>\n        <ul ng-show="!empty(currentBureau) && currentBureau.habilitation.transmettre !== false" id="newFolderNav"\n            class="nav navbar-nav navbar-right">\n            <li class="auto">\n                <span style="margin-right: 15px;" ng-class="{disabled:pagename()==\'/nouveau\'}"\n                        tooltip="{{\'NewDossier\' | translate}}" tooltip-placement="bottom"\n                        ng-click="cleanCurrentDossier(); redirectToNew()"\n                        class="btn btn-success  navbar-btn">\n                    <i class="fa fa-plus"></i>\n                    {{"NewDossier" | translate}}\n                </span>\n            </li>\n        </ul>\n        <ul class="nav navbar-nav navbar-right" ng-if="properties[\'parapheur.ihm.archives.show\'] === \'true\'">\n            <li class="icon" ng-class="{active:pagename()==\'/archives\'}">\n                <a href="#/archives" tooltip="{{\'ArchiveExplorer\' | translate}}" tooltip-placement="bottom">\n                    <i class="fa-inbox fa fa-lg"></i>\n                </a>\n            </li>\n        </ul>\n        <ul class="nav navbar-right">\n            <li id="activityMonitor"></li>\n        </ul>\n    </div>\n</div>\n\n<div ng-if="loadingBureaux" style="position:absolute;left:0;right:0;">\n    <div style="position:relative;" class="nextDossierInfo">\n        <span class="text text-info col-md-12" style="margin-bottom:3%;">\n            <i class="fa fa-info-circle"></i> {{\'Retrieving_desks___\' | translate}}\n        </span>\n        <div style="width:100px;height:100px;" class="css-loader"></div>\n    </div>\n</div>\n\n<div ng-if="errorNotification.id" class="block-notification" ng-mouseover="stopErrorTask()"\n     ng-mouseleave="startErrorTask()">\n    <span class="alert alert-danger"><i class="fa fa-warning"></i> {{"ErrorDossier" | translate}}\n        <a class="pointer" ng-click="selectAsyncDossier(errorNotification)">{{errorNotification.titre}}</a> : {{errorNotification.message}}\n    </span>\n</div>')}]);